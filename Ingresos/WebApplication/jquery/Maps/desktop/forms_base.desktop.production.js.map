{"version":3,"sources":["jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/bizagi.rendering.handSignature.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.section.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.getUser.js","jquery/rendering/js/base/render/query/bizagi.rendering.queryProcess.js","jquery/rendering/js/base/render/query/bizagi.rendering.querySearchUser.js","jquery/rendering/js/base/render/query/bizagi.rendering.queryAdvanced.js","jquery/rendering/js/base/render/bizagi.rendering.comboSelected.js","jquery/rendering/js/base/render/bizagi.rendering.userPassword.js","jquery/rendering/js/base/render/bizagi.rendering.stakeholder.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.document.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.letter.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","render","services","endPoints","getEndPoints","params","renderHandlerPathRest","context","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","getXSRFToken","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","$","Class","extend","init","this","util","isEmpty","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","guid","Math","override","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","isSmartphoneDevice","deviceEnum","smartphone","isTabletDevice","tablet","desktop","deviceCode","getDeviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","data","action","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idCase","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","url","type","dataType","serviceType","avoidLoader","ajax","pipe","response","stopAndLog","form","properties","transformGridDataToReadOnly","_data","hasOwnProperty","id","allowAdd","allowDelete","allowEdit","allowGrouping","allowMore","allowSearch","each","key","value","e","getSearchFormData","xpath","idSearchForm","processDataValues","o","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","toString","toUpperCase","debug","beforeSend","xhr","status","renderingService","name","newName","isEmptyObject","search","substr","getPropertyData","extra","property","sessionId","guidentity","pxpath","prows","ppage","undefined","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","push","getData","getSearchData","term","getCollapseData","collapseState","getGridData","sort","order","page","rows","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","jQuery","param","downloadFile","self","fileUrl","queue","processData","then","binary_file","readFileAsJSON","arguments","contentType","getResponseHeader","media","byteArrayToBlob","stringToByteArray","def","Deferred","reader","FileReader","onloadend","reject","responseText","result","readAsText","promise","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","uploadECMFile","fileUpload","fileName","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","JSON","encode","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","content","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrintUrl","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","device","refreshControl","refreshGridCell","column","typeRender","executeRule","rule","create","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","append","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","idWorkItem","getCaseNumber","replace","isMobile","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportUrl","exportType","sendEmail","to","subject","message","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","body","getConfiguration","indexOf","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","detectDevice","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","values","actions","getParents","node","parents","fillTree","list","children","getChildren","child","displayName","hasConstructor","guidObject","guidConstructor","length","getEntityImage64","width","height","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","isMashupContext","replaceAll","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","resolve","disabledRequests","circularDependencies","replicateServiceMethods","getService","eval","proxyMethod","method","parameters","apply","originalPrepare","add","makeCircularDependenciesError","error","messageTmpl","localization","getResource","printf","dependencyFrom","dependencyTo","deferred","h_action","detectCircularDependencies","addNode","clearTimeout","batchTimeout","tag","singleAction","fn","resolveDependencies","i","multiactionError","fire","setTimeout","Object","keys","item","when","execute","rejectDeferreds","done","responses","fail","errorMessage","finalResponse","parse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","dateFormat","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","control","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","includes","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","getColumn","Error","renderType","normalizeType","isRelatedEntityRender","showTime","test","number","toLowerCase","Number","NaN","date","dateFormatter","getDateFromInvariant","Date","setHours","formatInvariant","setMilliseconds","Array","isArray","map","stringify","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","parent","evalGridXpath","evalXpath","grid","gridColumn","cellValue","getCellCurrentValue","index","isString","display","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","getValue","mapValue","isFileUploaded","isValidEmail","match","RegExp","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","columns","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","columnToEval","grep","onDeletedGridRow","rowDeleted","idMatches","exec","showContainerNotFoundError","getCurrentDate","includeTime","currentDate","invariantDate","isNaN","isNumeric","getTime","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","substring","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controllers","controller","validations","canvas","enableDebug","_super","initializeValidations","validationBox","appendTo","widget","ui","bizagi_notifications","expand","triggerGlobalHandler","collapse","hide","itemIcon","minimized","clearEnabled","title","orientation","bind","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showErrorAlertDialog","showValidationMessage","showAlertMessage","showInfoMessage","focus","icon","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","isIE8","retype","unbind","not","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","enabled","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","isValid","forEach","element","showValidationMessageById","console","log","globalDependencies","initialCallFunctions","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","concat","elseCommands","isClientAction","dontExecute","len","hashes","executeOnlyClientActions","hash","md5","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","ev","args","j","gridColumns","searchGridColumns","asyncFn","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","prefix","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","controlType","container","parseBoolean","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","background","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","getContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","ready","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","css","addClass","style","setProperty","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","isMobileDevice","changeFormButtonVisibility","show","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","attr","triggerClick","trigger","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","changeCellValue","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","normalizeQueryType","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","bizagiQueue","refreshContainer","internalQueue","addParallel","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","loadingDeferred","setAsActiveContainer","buttons","findIndex","navigation","getNavigation","setNavigationButtons","changes","cell","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getFormContainer","getElementType","resize","size","layout","isScrolledIntoView","effect","eventType","event","one","getRenderedElement","getMode","getParams","getFormType","isReadyToSave","getCustomHandlers","dispose","timeOutDispose","off","disposeTime","isDisposed","processFailMessage","isOfflineForm","errorType","validationController","code","startLoading","endLoading","beforeToRefresh","afterToRefresh","getResourceByKey","resource","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","ceil","random","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","clone","mode","processDuplicateRender","registerRender","isDesign","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","html","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceSelector","replaceChildrenTag","replaceChildrenHtml","replaceFirstWithoutPatterns","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","window","placeHolderConfig","forceApply","Placeholders","enable","childrenElements","childElement","postRenderElement","renderChildrenHtml","temp","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","firstChild","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","replaceWith","triggerChildrenActions","restoreChildrenVisualChanges","restoreAppearanceAfterRefresh","restoreContainerAppearance","always","refreshDesignContainer","messageValidation","l","triggerRenderChange","registerActions","actionController","unregisterRender","replaceChild","splice","getChildById","restoreElementAppearance","childrenVisualChanges","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","displayAsReadOnly","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","split","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","isFeatureEnabled","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","button","caption","ordinal","next","nextWithoutValidations","cancel","back","createnewcase","validate","save","quickAction","routing","refresh","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","template","fasttmpl","helptext","helpText","queryForm","globalForm","allowQuickActions","complexGatewayContainer","hasClass","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","readyDeferred","find","checkboxLabel","transitionId","removeClass","format","newFontSize","bold","isIE","italic","underline","strikethru","strStyle","getContextType","getEndPointAction","formtype","getButtons","on","preventDefault","stopImmediatePropagation","buttonProperties","btn","routingDisabled","prop","propagateExternalEvents","timeOutButton","processDefer","contains","document","documentElement","get","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","defer","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","submitForm","customHandler","validateForm","saveForm","isNativeMobileDevice","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","start","countProps","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","stop","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","showNotification","text","recreateNativeButtons","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","modalError","failHandler","partialSubmitFormOffline","animate","scrollTop","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res","res2","messageType","addValidationMessage","validationMessage","addErrorMessage","options","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","activeTab","addSubmitAction","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","position","getOffset","top","min-height","min-width","outerHeight","left","outerWidth","remove","getFocusedElement","setFocusedElement","errorJson","setSize","offset","updateOriginalValue","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","join","tryToExecuteFunction","internalSubmitOnChange","bRefreshForm","notCollect","cancelPreviousRequest","focusIdentifier","idCaseObject","IdScope","objMessage","strMessage","connection","pop","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","evt","click","isConnected","configureNetworkHandlers","BIZAGI_ENVIRONMENT","handleConnectionChange","handleOfflineSyncEvent","formParams","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","warn","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","isStartForm","formType","contextEvent","processTemplate","controls","processedTemplate","g1","g2","string","layoutCollection","getCss","layoutGuid","layoutguid","loadStyle","getContextEvent","stripslashes","activate","active","cssclass","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","displayAs","sectionContent","renderSectionContent","getBreadcrumb","unshift","getParentDisplayName","getSectionParent","originalParams","getSectionOrientationRTL","cssClass","panel","renderResult","performSearch","searchParams","refreshResults","getRemoteData","collectSearchValues","isMapEmpty","maxRows","dataUrl","records","totalPages","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","operation","getCriteriaOperation","criteriaData","typeSearch","parseAdditionalProperties","tabItems","counter","tooltip","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","trim","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","originalValue","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","label","layoutType","renderTemplateName","renderTemplate","encodeString","isFullRender","parseFloat","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","mapAlignClassName","columnAlign","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","state","replaceControlHtml","resolveResult","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRender","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","inlineAdd","hasValue","isQueryForm","filter","messageData","isQuery","val","columnEditable","controlValueIsChanged","changeFontBold","changeFontItalic","changeFontUnderline","changeFontStrikethru","changeFontSize","setValue","triggerEvents","identicalObjects","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","sanitizeHTML","getLabel","mustImplement","getControlFiller","readOnlyValue","isObject","encodeHtmlText","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","compareValue","baseValue","defaultValue","forceCollectData","getNormalizedDate","fullFormat","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","empty","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","onCellChange","labelElement","controlElement","prepend","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","input","change","is","getRenderId","tryCatch","queryValue","searchType","rangeQuery","newParameter","orderType","displayXpath","force","displayOnly","time","defaultControl","first","innerControl","autoScrollBottom","timeOutEffect","align","submitOnChangexpathContext","getCacheIdCase","percent2Number","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","closest","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","isNewRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","isSharepointContext","isWebpartContext","getMainForm","currentForm","fromRender","setInterceptionObserver","$context","callbackFn","intersectionObserver","IntersectionObserver","pluginInitialized","disconnect","POLL_INTERVAL","observe","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","$element","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","default","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","randomNumber","items","formatItem","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","resetData","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","hidden","bCurrentDataFound","emptyFound","dataValue","comboData","isExtraItem","escapeValue","validateValue","translated","findDataValueById","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","pointer","totalRows","inlineAddRecords","row","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","validateControls","showLetters","randomId","allowDecimals","getDefaultAllowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","symbol","positiveFormat","negativeFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","groupDigits","setGroupDigits","colorize","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","abs","toFixed","isAndroidDevice","numericInput","numeric","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","percentage","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","asNumber","messageToShow","isValidRenderMessage","parseInt","executeFormatCurrencyPlugin","formatCurrency","regions","language","blur","tmpData","isIE11","clipboardData","originalEvent","totalVal","keydown","keyUnicode","charCode","keyCode","formatTimeout","floatPart","selectionStart","selectionEnd","currentPosition","keyup","keypress","character","String","fromCharCode","roundToDecimalPlace","removeTrailingZeros","positive","regExp","re","validMessage","getDefaultGroupDigits","thousands","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","getMaxZindex","zIndex","timeOutFocus","numericSN","ud","timeFormat","datePickerRegional","formatDate","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","i18n","uppercaseDatePlaceholder","rtl","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getFullYear","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","regEx","decodedValue","decodeURI","valueToDisplay","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","columnProperties","groupBy","isExclusive","hasExclusiveCheck","columnRender","singleInstance","totalize","reverse","showSummary","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","isSortable","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","floatingHeader","sortBy","sortOrder","addLabel","editLabel","deleteLabel","exportOptionsLabel","detailLabel","tableCssClass","alreadySaved","overrideGetRemoteData","cellOverrides","isRTL","changeOrderData","rowKey","reverseDataRows","shift","removeRemainingColumns","numColumns","remainingColumns","getColumnType","columnIndex","getGridTemplate","applyTemplate","columnInitializers","initialize","encodeXpath","sortType","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","total","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","v","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","newRows","saveInlineAddedRows","saveRows","getDepthData","target","isBoolean","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","k","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","el","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","configureHelpText","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","mask","regex","showDesignValidations","isNull","getFormattedValue","getDesignModeValue","formatBoolean","formatMonetaryValue","formatDecimalValue","formatDateValue","submitOnChangexpathContextRow","runButtonAction","error_obj","getErrorFormatted","filesCount","horizontal","checkListGroup","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","err","formContainer","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","navigator","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","file","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","newRow","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","loader","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","cookie","lockUploadItem","unlockUploadItem","isEmptyValue","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","getTemplateItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","generateLink","isPropagationStopped","stopPropagation","documentTemplateGenerate","showDocumentPreview","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","slice","configured","itemSelected","listSize","normalizeData","getDataValue","addElement","removeElement","idToRemove","markAsChecked","found","isChecked","canAddMoreItems","$tagsContainer","toArray","reduce","acc","getElementWidth","MORE_OPTION_WIDTH","styles","getComputedStyle","filterList","query","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","BASE_IMAGE","EMPTY_IMAGE","EMPTY_VALUE","DELAY_TO_SAVE","RESOURCES_FALLBACK","DONE_BUTTON","EDIT_BUTTON","CLEAR_BUTTON","UPLOAD_SUCCESS","UPLOAD_ERROR","TITLE_DONE","TITLE_DRAW","TITLE_EDIT","STATE_TYPE","edit","draw","success","saveDeferred","saveTimestamp","currentState","render_signature_action_edit","render_signature_action_done","render_signature_action_clear","getSignatureContainer","initialized","renderSignature","setState","BzjSignature","setData","binaryValue","Blob","b64toBlob","isValidField","getBase64","base64","dataFile","buildAddFileParams","FormData","isVersion2OrSuperior","compatibilityVersion","blob","blobTob64","getDataUrl","charAt","executeFormFailHandler","assign","saveSignature","dataImage","postSignature","executePartialSaveForm","collectDataToSave","signature","postSignatureOnline","getDataFileFromSignature","saveImageOffline","path","buildOfflineImageId","blobImage","getFormParams","operationType","saveOfflineImage","offlineId","fileService","getOfflineImageName","isSignature","tmpTimeStamp","buildItemUrlOffline","imageId","loadImageFromForm","getOfflineImage","db","AttachmentType","$actions","setActions","isTaskForm","buildOfflineFileLoadingKey","atob","array","Uint8Array","setSignature","initialWidth","entries","entry","contentRect","selectorClass","contextClass","getSignatureContext","getFileDependencies","fileDependencies","loadFile","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","getPropertyValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","showPopup","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","isUserPreference","initializeWidthAndHeight","isAutoWidth","isAutoHeight","currentUser","idUser","forceBase64","getFileService","resolveBlobFromPath","buildFullItemUrl","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","idRight","checked","rightId","removeValue","leftXpath","rightXpath","leftFactName","rightFactName","allowDelegatedUser","loadtemplates","getUserData","decodedDisplayValue","MAX_TAGS_SUPPORTED","OPERATORS","like","defaultLabel","appliesTo","equals","equal","not-equals","starts-with","ends-with","greater-equals-than","less-equals-than","between","is-null","wildcard","skip","filterType","DATATYPE","getOptions","currentFilter","controlInitial","controlEnd","queryFilter","processComplexValue","isCurrentDefaultFilter","renderReadOnlyFilter","getCurrentFilter","$templateFilterReadonly","filterName","$filterValueContainer","isCurrentBetweenFilter","renderReadOnlyBetween","isCurrentTagFilter","renderReadOnlyTags","from","$ChildToAdd","getTagId","formatTagItem","configureFilterHandlers","configureTagHandlers","configureDefaultHandlers","isModeWildcard","filterTagExist","filterOptionIsShowed","clickOnFilter","onToggleDataView","onToggleDataOptions","valueTag","$tagInput","getValidTagValue","addTag","removeLastTag","tagId","removeTag","$buttonClean","setCurrentFilter","closeFloatView","isCurrentNullFilter","floatViewIsCollapsed","renderFloatView","$listView","filters","$floatList","showFloatListView","datasource","floatListHandlers","$containerControl","$containerRender","widthControl","my","at","of","collision","timeoutMouseDown","destroyFloatView","$list","$floatListContext","innerText","showHideCleanButton","destroyFilterContent","setSelectedFilter","onFilterChange","tagIsAdded","newTagItem","tagItem","isMaximumTagsValid","$templateItem","before","tags","lastTag","performTagItems","listString","$listTag","cleanDataFilter","getCurrentAction","defineLiteControl","typeFilter","getSearchType","performQueryValue","newQueryValue","formatInputValue","getRenderProperties","propertiesRender","typeControl","renderProperties","getRequiredProperties","isRange","isMinimumValue","isMinimum","isMaximumValue","isMaximum","setLiteControls","renderLiteControl","getTemplateByType","operators","$cleanButton","onToggleHideElement","elementClass","$buttonClose","toggleClass","idFilter","isCurrentFilter","isCurrentWildcardFilter","isCurrentContainsFilter","isCurrentStartsWithFilter","isCurrentEqualsThanFilter","isCurrentEndsWithFilter","currentAction","defaultFilter","prepareForSetValue","setFilter","performDataValue","dataList","performListValue","noFilterSettled","advancedQuery","leftValues","filterData","rightValues","orderArraySelected","a","b","nA","nB","dataListArray","renderControlReadOnly","valuePassword","userName","userNames","entities","valueXpath","currentPage","refreshStakeholderList","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","readOnly","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","count","getPropertiesActionLaucher","actionsLaucher","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","min","max","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","typeRangeControl","moneyMin","money","moneyMax","numberMin","numberMax","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","decoratedClass","showColumn","readonly","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","postRenderSummary","getCell","setSurrogateKey","defaultvalue","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","arrayEach","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","compositeValue","formattedDate","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","getCommonTemplate","containerParams","mobileform","formTemplate","usersForm","section","contentPanel","nestedForm","tabItem","accordion","accordionItem","group","mobilegroup","searchForm","renderParams","extendedText","mobiletext","check","yesno","cascadingCombo","multiSelect","radio","image","ecm","upload","searchList","letter","formLink","link","layoutImage","layoutLink","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutPlaceholder","actionLauncher","layoutBoolean","layoutUpload","entityTemplate","polymorphicLauncher","userfieldWrapper","getSearchRender","getQueryRender","fileprint","collectionnavigator","getUser","rangeDate","rangeMoney","rangeNumber","activityCheckList","columnParams","exclusiveCheck","uploadecm","numberScientificNotation","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","execution_device","cachedFactory","getRenderFactory","print","factory","getDataService","executionDeferred","deviceFactory","getFactory","subscribe","unsubscribe","publish","update","doc","ownerDocument","location","queryString","getQueryString","sendExecutingPostMessageWebparts","process","refreshing","pathProcess","insertBefore","lastWidth","lastHeight","timeoutResize","resizeInPopUpHTML","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","errorTemplate","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","refreshParams","fastEmpty","canvasParent","isOpen","timeoutTrigger","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","buttonContainer","heightButtonContainer","renderBehavior","postMessageSocket","heightCanvas","innerHeight","iframeCommunicator"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: jQuery.param(data),\n      type: \"POST\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = params.submitData || {};\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /*\r\n      *   Executes a fileprint action in the server\r\n      */\n  getFilePrintUrl: function getFilePrintUrl(params) {\n\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n  /*\r\n      *   Executes a grid export action in the server\r\n      */\n  getGridExportUrl: function getGridExportUrl(params) {\n\n    var self = this,\n    url = this.serviceLocator.getUrl(\"render-upload-data-url\"),\n    data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType; //\"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        return 'text';\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\n  /* \r\n                                                                                        *   Constructor\r\n                                                                                        */\n  init: function init(form, actions) {\n    var self = this;\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.trigger(\"click\");\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\n          var element = self.rendersByXpath[render.properties.xpath][i];\n          if (bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties))) {\n            self.rendersByXpath[render.properties.xpath].splice(i, 1);\n            self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\n            break;\n          }\n        }\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n        delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      self.startLoading();\n\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n\n      // External Events\n      self.propagateExternalEvents(e);\n\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    self.validationController.showErrorMessage(errorMessage);\n    self.validationController.expandNotificationBox();\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"normal\", \"!important\");\n        });\n        self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value) {\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    this._super(decodedValue);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      cell.setValue(newValue);\n      cell.setDisplayValue(newValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, newValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /*\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      *  @return {object} render attributes, including id, xpathContext, idPagecache, disposition (inline or attachment), and exportType (XLS or PDF)\r\n      */\n  getGridExportUrl: function getGridExportUrl(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportUrl({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      sessionId: self.getSessionId(),\n      idForm: self.getFormContainer().properties.id });\n\n\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrs Fernando Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render HandSignature Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for HandSignature control\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.handSignature\", {}, {\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n  EMPTY_IMAGE: \"R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==\",\n  EMPTY_VALUE: \"\",\n  DELAY_TO_SAVE: 1000,\n\n  // Fallback if resources\n  RESOURCES_FALLBACK: {\n    DONE_BUTTON: \"Done\",\n    EDIT_BUTTON: \"Edit\",\n    CLEAR_BUTTON: \"Clear\",\n    UPLOAD_SUCCESS: \"Your signature have been uploaded successfully\",\n    UPLOAD_ERROR: \"The signature have not been uploaded. Try again\",\n    TITLE_DONE: \"Click \\\"Done\\\" to upload the signature\",\n    TITLE_DRAW: \"Draw here your signature\",\n    TITLE_EDIT: \"Click \\\"Edit\\\" to start drawing\" },\n\n\n  // Type of state\n  STATE_TYPE: {\n    edit: 1,\n    draw: 2,\n    done: 3,\n    success: 4,\n    error: 5 },\n\n\n  /**\r\n                 * Whether or not is plugin initialized\r\n                 * @var isOfflineForm boolean\r\n                 */\n  pluginInitialized: false,\n\n  saveDeferred: null,\n  saveTimestamp: 0,\n\n  /**\r\n                     * Update or init the element data\r\n                     * @param data\r\n                     */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.addUrl = properties.addUrl || this.dataService.serviceLocator.getUrl(\"form-submit-data-upload\");\n    properties.deleteUrl = properties.deleteUrl || this.dataService.serviceLocator.getUrl(\"render-upload-delete-url\");\n    properties.isChanged = false;\n\n    this.currentState = this.STATE_TYPE.edit;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"hand-signature\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      isDesign: !self.isExecutionMode(),\n      render_signature_action_edit: self.getResourceByKey(\"render-signature-action-edit\", self.RESOURCES_FALLBACK.EDIT_BUTTON),\n      render_signature_action_done: self.getResourceByKey(\"render-signature-action-done\", self.RESOURCES_FALLBACK.DONE_BUTTON),\n      render_signature_action_clear: self.getResourceByKey(\"render-signature-action-clear\", self.RESOURCES_FALLBACK.CLEAR_BUTTON) });\n\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      var $container = self.getSignatureContainer();\n\n      // Wait until current element is rendered\n      self.setResizeObserver($container, function (initialized) {\n        self.renderSignature();\n        self.setState(self.currentState);\n\n        if ([self.STATE_TYPE.draw, self.STATE_TYPE.done].includes(self.currentState)) {\n          $container.BzjSignature(\"enable\");\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Apply plugin\n    if (this.isExecutionMode()) {\n      var $container = self.getSignatureContainer();\n\n      // Wait until current element is rendered\n      self.setResizeObserver($container, function () {\n        self.renderSignature();\n      });\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"hand-signature-readonly\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      isDesign: !self.isExecutionMode() });\n\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      if (value instanceof Blob) {\n        this.properties.binaryValue = value;\n      } else {\n        this.properties.binaryValue = bizagi.util.b64toBlob(value, \"image/png\");\n      }\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  getBase64: function getBase64() {\n    return this.properties.base64 || \"\";\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    if (!this.pluginInitialized) {\n      return !bizagi.util.isEmpty(this.properties.value);\n    } else {\n      var value = this.getData();\n      return !bizagi.util.isEmpty(value);\n    }\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-visible renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required && !self.hasValue()) {\n      var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n      invalidElements.push({ xpath: self.properties.xpath, message: message });\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    var form = this.getFormContainer();\n    if (!form.isOfflineForm) return true;\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = {\n      url: this.properties.addUrl,\n      formData: this.buildAddFileParams(dataFile) };\n\n\n    return this.dataService.processUploadFile(data);\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", properties.xpath);\n    formData.append(prefix + \"idRender\", properties.id);\n    formData.append(prefix + \"xpathContext\", properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(prefix + \"action\", \"savefile\");\n\n    var fileName = \"signature_\" + bizagi.util.randomNumber() + \".png\";\n    formData.append(self.properties.xpath, dataFile, fileName);\n\n    if (properties.contexttype) {\n      formData.append(prefix + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(url).promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: \"fileFullContent\",\n      queue: \"onlineimages\",\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype || undefined,\n      dataType: \"text\" };\n\n\n    if (isVersion2OrSuperior) {\n\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      parameters.property = \"fileBinaryContent\";\n      parameters.sessionId = form.properties.sessionId;\n\n      return self.dataService.downloadFile(parameters).\n      then(function (blob) {\n        self.setData(blob);\n        if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n        return bizagi.util.blobTob64(blob, false);\n      }).\n      then(function (base64) {\n        return bizagi.util.getDataUrl(base64, properties.url);\n      });\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var error_obj = bizagi.util.getErrorFormatted(error);\n    var message = error_obj;\n\n    if (typeof error_obj === \"undefined\" || error_obj && !error_obj.message) {\n      message = Object.assign({}, _typeof(error_obj) === \"object\" ? error_obj : {}, {\n        \"message\": bizagi.localization.getResource(\"workportal-general-error\") });\n\n    }\n\n    this.getFormContainer().failHandler(message);\n  },\n\n  /**\r\n      * Save data control\r\n      * @returns {*}\r\n      */\n  saveSignature: function saveSignature(dataImage) {\n    var self = this;\n\n    return $.when(self.postSignature(dataImage)).\n    then(function (base64) {\n      self.setData(base64);\n      self.properties.url = bizagi.util.getDataUrl(base64, self.EMPTY_VALUE);\n      self.executePartialSaveForm();\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  executePartialSaveForm: function executePartialSaveForm() {\n    var self = this;\n    var data = {};\n    var form = this.getFormContainer();\n\n    if (!form.isOfflineForm) return;\n    self.collectDataToSave(data);\n    form.partialSubmitFormOffline(data).then(function () {\n      //console.log(\"Signature saved\");\n    });\n  },\n\n  /**\r\n      * Delete image\r\n      * @returns {*}\r\n      */\n  deleteImage: function deleteImage() {\n    return this.dataService.deleteImage({\n      url: this.properties.deleteUrl,\n      idRender: this.properties.id,\n      xpath: this.properties.xpath,\n      xpathContext: this.properties.xpathContext,\n      idPageCache: this.properties.idPageCache,\n      contexttype: this.properties.contexttype });\n\n  },\n\n  /**\r\n      * Execute upload image\r\n      * @param dataImage\r\n      * @returns {*}\r\n      */\n  postSignature: function postSignature(dataImage) {\n    var signature = dataImage.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\");\n    return this.postSignatureOnline(signature);\n  },\n\n  /**\r\n      * Execute upload image for online mode\r\n      * @param signature\r\n      * @returns {*}\r\n      */\n  postSignatureOnline: function postSignatureOnline(signature) {\n    var self = this;\n    var dataFile = self.getDataFileFromSignature(signature);\n\n    if (bizagi.util.isEmpty(dataFile)) {\n      return self.getData();\n    }\n\n    return self.processUploadFile(dataFile).then(function () {\n      self.properties.isChanged = true;\n      return signature;\n    });\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  // region // #region METHODS TO OFFLINE\n\n  /**\r\n   * Create an image offline\r\n   * @param path File in Browser or Path in Mobile Devices\r\n   * @param promise Promise to be resolved when save is completed\r\n   */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n\n    return $.when(function () {\n      return path;\n    }()).then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectDataToSave: function collectDataToSave(renderValues) {\n    var self = this;\n    if (self.isOfflineForm && bizagi.util.isOfflineFormsV2Supported()) {\n      if (!self.properties.isChanged) return;\n\n      renderValues[self.properties.xpath] = {\n        offlineId: self.buildOfflineImageId(),\n        name: self.dataService.fileService.getOfflineImageName(self.getValue()),\n        isSignature: true };\n\n    }\n  },\n\n  /**\r\n      * This method allows wait until the signature is persisted to execute the form save \r\n      * @param {*} renderValues \r\n      * @returns \r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.saveTimestamp == 0) return;\n    var tmpTimeStamp = new Date().getTime() - self.saveTimestamp;\n\n    if (tmpTimeStamp < self.DELAY_TO_SAVE) {\n      var def = new $.Deferred();\n      setTimeout(function () {\n        $.when(self.saveDeferred).always(function () {\n          def.resolve();\n        });\n      }, self.DELAY_TO_SAVE + 10 - tmpTimeStamp);\n      renderValues.deferreds = renderValues.deferreds || [];\n      renderValues.deferreds.push(def.promise());\n    } else\n    if (self.saveDeferred) {\n      renderValues.deferreds = renderValues.deferreds || [];\n      renderValues.deferreds.push(self.saveDeferred.promise());\n    }\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @returns {*}\r\n      */\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var imageId = self.buildOfflineImageId();\n    var loadImageFromForm = !properties.isChanged;\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: imageId,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  // endregion // #endregion\n\n  // region // #region UTILS TO CONTROL\n\n  /**\r\n   * Update actions\r\n   * @param state\r\n   */\n  setState: function setState(state) {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n    var message = \"\";\n\n    self.currentState = state;\n\n    switch (state) {\n      case self.STATE_TYPE.edit:\n        message = self.getResourceByKey(\"render-signature-title-edit\", self.RESOURCES_FALLBACK.TITLE_EDIT);\n        break;\n      case self.STATE_TYPE.draw:\n        message = self.getResourceByKey(\"render-signature-title-draw\", self.RESOURCES_FALLBACK.TITLE_DRAW);\n        break;\n      case self.STATE_TYPE.done:\n        message = self.getResourceByKey(\"render-signature-title-done\", self.RESOURCES_FALLBACK.TITLE_DONE);\n        break;}\n\n\n    // Update message\n    $(\".bz-actions__status\", $actions).text(message);\n\n    // Update actions\n    self.setActions(state);\n  },\n\n  /**\r\n      * Update action state\r\n      * @param state\r\n      */\n  setActions: function setActions(state) {\n    var self = this;\n    var $actions = $(\".bz-actions\", this.getControl());\n\n    if ([self.STATE_TYPE.draw].includes(state)) {\n      // Hidden action\n      $actions.find(\"[data-action='edit']\").addClass(\"bz-hidden\");\n\n      // Show actions\n      $actions.find(\"[data-action='clear']\").removeClass(\"bz-hidden\");\n      $actions.find(\"[data-action='save']\").removeClass(\"bz-hidden\");\n    } else if ([self.STATE_TYPE.edit].includes(state)) {\n      // Show actions\n      $actions.find(\"[data-action='edit']\").removeClass(\"bz-hidden\");\n\n      // Hidden action\n      $actions.find(\"[data-action='clear']\").addClass(\"bz-hidden\");\n      $actions.find(\"[data-action='save']\").addClass(\"bz-hidden\");\n    }\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var isStartForm = !form.properties.isTaskForm;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior, isStartForm);\n  },\n\n  buildOfflineFileLoadingKey: function buildOfflineFileLoadingKey() {\n    var self = this;\n    var form = self.getFormContainer();\n    var idCase = form.getParams().idCase;\n    var idWorkitem = form.getParams().idWorkitem;\n\n    var key = idCase;\n    if (!bizagi.util.isEmpty(idWorkitem)) key += \"-\" + idWorkitem;\n    key += \"-\";\n    if (!bizagi.util.isEmpty(self.properties.xpathContext)) key += \"-\" + self.properties.xpathContext;\n    key += self.properties.xpath;\n\n    return key;\n  },\n\n  getDataFileFromSignature: function getDataFileFromSignature(signature) {\n    try {\n      var binary = atob(signature);\n      var array = bizagi.util.stringToByteArray(binary);\n\n      return new Blob([new Uint8Array(array)], { type: \"image/png\" });\n    } catch (e) {\n      return \"\";\n    }\n  },\n\n  setSignature: function setSignature($container) {\n    var url = this.properties && this.properties.url;\n\n    try {\n      if (!bizagi.util.isEmpty(url)) {\n        $container.BzjSignature(\"reset\");\n        $container.BzjSignature(\"setData\", url);\n      }\n    } catch (err) {\n    }\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n    var initialWidth = 0;\n\n    var resizeObserver = new ResizeObserver(function (entries) {\n      var entry = entries[0];\n      if (entry.contentRect) {\n        if (initialWidth !== entry.contentRect.width && entry.contentRect.width !== 0) {\n          initialWidth = entry.contentRect.width;\n          if (typeof callbackFn === \"function\") {\n            callbackFn();\n          }\n        }\n      }\n    });\n\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Get container of control\r\n      * @param selectorClass\r\n      * @returns {*}\r\n      */\n  getSignatureContainer: function getSignatureContainer(selectorClass) {\n    var contextClass = selectorClass || \".bz-signature__container\";\n    return this.getSignatureContext(contextClass);\n  },\n\n  /**\r\n      * Get context of control\r\n      * @param selectorClass\r\n      * @returns {jQuery|HTMLElement}\r\n      */\n  getSignatureContext: function getSignatureContext(selectorClass) {\n    var $control = this.getControl();\n    return $(selectorClass, $control);\n  }\n\n  // endregion // #endregion\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    var self = this;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Set flag to check when a render has changed\n    self.changed = false;\n\n    // If the render is not editable return the readonly version of the column\n    //Fix: Uncaught RangeError: Maximum call stack size exceeded\n    if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        self.saveChildrenVisualChanges(self);\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n        self.restoreChildrenVisualChanges(self);\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreContainerAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreContainerAppearance: function restoreContainerAppearance(data) {\n    var self = this;\n\n    self.restoreAppearance();\n\n    (data.elements || []).forEach(function (element) {\n      if (element.container) {\n        self.restoreContainerAppearance(element.container);\n      } else if (element.render) {\n        self.restoreElementAppearance(element.render);\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance();\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n\n    delete self.childrenVisualChanges;\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n *   Name: Bizagi Section Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a section container class for all devices\r\n */\n\n$.Class.extend(\n\"bizagi.rendering.section\",\n{},\n{\n  /**\r\n   * Constructor\r\n   * @param {object} params - section information\r\n   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n    properties.displayAs = properties.displayAs || \"section\";\n  },\n\n  /**\r\n      * Render the trigger of the section.\r\n      * @returns string with html code.\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * Overwritable on devices.\r\n      */\n  renderSectionContent: function renderSectionContent() {},\n\n  /**\r\n                                                             * Return the breadcrumb of the section.\r\n                                                             * @returns An array with breadcrumb. For example: [\"activity\", \"parent section\", \"child section\"]\r\n                                                             */\n  getBreadcrumb: function getBreadcrumb() {\n    var container = this;\n    var breadCrumb = [];\n\n    while (container) {\n      var properties = container.properties || {};\n      var params = container.params || {};\n\n      if (properties.type === \"section\") {\n        var displayName = properties.displayName ? properties.displayName : \"\";\n        breadCrumb.unshift(displayName);\n      } else if (params.type === \"form\") {\n        breadCrumb.unshift(this.getResourceByKey(\"render-section-breadcrumb-main-form\", \"Main form\"));\n      }\n      container = container.parent;\n    }\n    return breadCrumb;\n  },\n\n  /**\r\n      * Gets the display name of the previous section or form.\r\n      * @returns String with the display name\r\n      */\n  getParentDisplayName: function getParentDisplayName() {\n    var self = this;\n    var parent = self.getSectionParent(self.parent);\n    var displayName = \"\";\n\n    //TODO Improve this code implementation \n    if (parent.properties.type == \"form\") {\n      if (parent.properties.formtype && parent.properties.formtype == \"startform\") {\n        displayName = parent.params && parent.params.originalParams && parent.params.originalParams.displayName ? parent.params.originalParams.displayName : \"\";\n      } else\n      {\n        displayName = parent.properties.displayName || parent.params.displayName || parent.params.radNumber || parent.params.idCase;\n      }\n    } else {\n      displayName = parent.properties.displayName || \"\";\n    }\n\n    return displayName;\n  },\n\n  /**\r\n      * Gets the section's parent.\r\n      * @returns Object parent\r\n      */\n  getSectionParent: function getSectionParent(parent) {\n    if (parent.properties.type === \"section\" || !parent.parent) {\n      return parent;\n    } else {\n      return this.getSectionParent(parent.parent);\n    }\n  },\n\n  /**\r\n      * Gets if the section's  orientation is RTL.\r\n      * @returns Object\r\n      */\n  getSectionOrientationRTL: function getSectionOrientationRTL(obj) {\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"ltr\") return false;\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"rtl\") return true;\n    if (obj.parent) return this.getSectionOrientationRTL(obj.parent);\n    return false;\n  } });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data)) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\") {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n\n    properties.showLetters = bizagi.override && bizagi.override.enableCheck === true && !properties.editable;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n    if (typeof properties.value != \"undefined\" && /[e][-+]/gi.test(properties.value) && Math.abs(parseFloat(properties.value)) < 1) {\n      properties.value = self.value = parseFloat(properties.value).toFixed(properties.numDecimals);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"\", \"\", \"\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Fileprint Class\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /*\r\n                                                   *   Update or init the element data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption && properties.caption != \" \" ? properties.caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: properties.caption });\n\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n     *   get the fileprint url\r\n     */\n  getFilePrintUrl: function getFilePrintUrl(disposition) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFilePrintUrl({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: disposition,\n      sessionId: self.getSessionId() });\n\n\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrs Fernando Muoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Upload Class\r\n *   Author: Elkin Fernando Siabato Cruz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n  /**\r\n   * Constructor\r\n   */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else\n    {//QAF-2210\n      dataFiles = properties.value;\n    }\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else\n      {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    }\n    catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n\n    var formContainer = self.getFormContainer();\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = bizagi.util.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    var returnLink = self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n\n    return returnLink;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var generateLink = $(\".ui-bizagi-button-documentgenerator\", control);\n    if (mode === \"execution\") {\n      generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n    }\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-preview\", control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.showDocumentPreview($(this).data(\"url\"), $(this).data(\"filename\"));\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n    var form = self.getFormContainer();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (form.properties.compatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        var value = self.getValue();\n\n        if (value.length === 0) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n * Description of control\r\n *\r\n * @author:\r\n */\n\n$.Class.extend(\"bizagi.rendering.getUser\", {}, {\n  /*\r\n                                                  * Constructor\r\n                                                  */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    var properties = this.properties;\n    properties.allowDelegatedUser = this.properties.xpath && this.properties.xpath === \"idDelegate\";\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"render-getUser\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var result = this._super();\n    var html = result;\n    if (!bizagi.util.isString(html)) {\n      html = result[0] && result[0].value ? result[0].value : \"\";\n    }\n\n    return html;\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    return bValid;\n  } });","/**\r\n *   Name: Bizagi Render Query Process\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query process renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.queryProcess\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"queryProcess\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  loadtemplates: function loadtemplates() {\n  } });","/**\r\n *   Name: BizAgi Render Query Search User\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query search user renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.querySearchUser\", {}, {\n  /*\r\n                                                          * Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"render-querySearchUser\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getUserData: function getUserData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || false;\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n    //GET DATA\n    var data = [{ \"id\": 1, \"value\": \"user1\" }, { \"id\": 2, \"value\": \"user2\" }, { \"id\": 3, \"value\": \"user3\" }, {\n      \"id\": 4,\n      \"value\": \"user4\" },\n    { \"id\": 5, \"value\": \"user5\" }, { \"id\": 6, \"value\": \"user6\" }, { \"id\": 7, \"value\": \"user7\" }, {\n      \"id\": 8,\n      \"value\": \"user8\" },\n    { \"id\": 9, \"value\": \"user9\" }, { \"id\": 10, \"value\": \"user10\" }];\n    properties.data = data;\n    defer.resolve(properties.data);\n    return defer.promise(defer);\n\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var displayValue = self.getDisplayValue();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var decodedDisplayValue = bizagi.util.decodeURI(displayValue);\n        var valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      */\n  setValue: function setValue(value) {\n    /*ISUPP-4116/*\r\n                                       /*var decodedValue = bizagi.util.decodeURI(value);*/\n    var self = this;\n    self._super(value);\n  } });","/**\r\n *   Name: Bizagi Render Query Filter Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for query wrapper\r\n */\n\n$.Class.extend(\"bizagi.rendering.queryAdvanced\", {}, {\n\n  MAX_TAGS_SUPPORTED: 50,\n\n  OPERATORS: {\n    \"like\": {\n      label: \"workportal-widget-filter-operators-contains\",\n      defaultLabel: \"Contains\",\n      appliesTo: [\"Text\"],\n      operator: \"APPROX\",\n      action: \"like\" },\n\n    \"equals\": {\n      label: \"workportal-widget-filter-operators-equals-to\",\n      appliesTo: [\"Text\", \"Number\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"tags\" },\n\n    \"equal\": {\n      label: \"workportal-widget-filter-operators-equals-to\",\n      appliesTo: [\"DateTime\"],\n      operator: \"EXACT\",\n      action: \"equal\" },\n\n    \"not-equals\": {\n      label: \"workportal-widget-filter-operators-different-to\",\n      appliesTo: [\"Text\", \"Number\", \"Currency\"],\n      operator: \"NOTEXACTORNULL\",\n      action: \"tags\" },\n\n    \"starts-with\": {\n      label: \"workportal-widget-filter-operators-starts-with\",\n      defaultLabel: \"Starts with\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"starts-with\" },\n\n    \"ends-with\": {\n      label: \"workportal-widget-filter-operators-ends-with\",\n      defaultLabel: \"Ends with\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"ends-with\" },\n\n    \"greater-equals-than\": {\n      label: \"workportal-widget-filter-operators-greater-or-equal-than\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"FROM\",\n      action: \"from\" },\n\n    \"less-equals-than\": {\n      label: \"workportal-widget-filter-operators-less-or-equal-than\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"TO\",\n      action: \"to\" },\n\n    \"between\": {\n      label: \"workportal-widget-filter-operators-between\",\n      defaultLabel: \"Between\",\n      appliesTo: [\"Number\", \"DateTime\", \"Currency\"],\n      operator: \"BETWEEN\",\n      action: \"between\" },\n\n    \"is-null\": {\n      label: \"workportal-widget-filter-operators-is-empty\",\n      defaultLabel: \"Is empty\",\n      appliesTo: [\"Text\", \"Number\", \"DateTime\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"is-null\" },\n\n    \"wildcard\": {\n      label: \"Wildcard\",\n      appliesTo: [\"Text\"],\n      operator: \"WILDCARD\",\n      action: \"wildcard\",\n      skip: true },\n\n    \"default\": {\n      label: \"Default\",\n      appliesTo: [\"Number\", \"Currency\"],\n      operator: \"EXACT\",\n      action: \"default\",\n      skip: true } },\n\n\n\n  // region // #region CONTROL BASE\n\n  /**\r\n   * Constructor\r\n   * @param data\r\n   */\n  initializeData: function initializeData(data) {\n\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.filterType = properties.filterType || \"\";\n    properties.renderType = this.Class.DATATYPE;\n    properties.data = this.getOptions();\n    properties.orientation = properties.orientation || \"\";\n\n    this.currentFilter = {};\n    this.controlInitial = null;\n    this.controlEnd = null;\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var $control = this.getControl();\n    this.queryFilter = $(\".bz-query-filter\", $control);\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Method to customize each control\r\n      * @returns {jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"query.advanced\");\n    var html = $.fasttmpl(template, {});\n\n    return html;\n  },\n\n  processComplexValue: function processComplexValue(value) {\n    var newValue = value;\n    var isString = newValue && $.trim(newValue).length > 0;\n    var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n    if (isString && isArray) {\n      newValue = JSON.parse(newValue);\n    } else if (isString) {\n      newValue = [newValue];\n    } else {\n      newValue = newValue || [];\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var result;\n\n    if (this.isCurrentDefaultFilter()) {\n      result = this._super();\n    } else {\n      result = this.renderReadOnlyFilter();\n    }\n\n    return result;\n  },\n\n  renderReadOnlyFilter: function renderReadOnlyFilter() {\n    var template = this.renderFactory.getTemplate(\"query.advanced.readonly\");\n    var filter = this.getCurrentFilter();\n    var value = this.getValue() == \"null\" || bizagi.util.isNull(this.getValue()) ? \"\" : this.getValue();\n    var $templateFilterReadonly = $.tmpl(template, {\n      filterName: this.getResourceByKey(filter.label, filter.defaultLabel) });\n\n\n    var $filterValueContainer = $(\".bz-query-advanced__filter\", $templateFilterReadonly);\n\n    if (this.isCurrentBetweenFilter()) {\n      this.renderReadOnlyBetween($filterValueContainer);\n    } else if (this.isCurrentTagFilter()) {\n      this.renderReadOnlyTags($filterValueContainer);\n    } else {\n      $filterValueContainer.append(\"<li class='bz-query-advanced__filter-input'><span>\" + value + \"</span></li>\");\n    }\n\n    return $templateFilterReadonly;\n  },\n\n  renderReadOnlyBetween: function renderReadOnlyBetween(container) {\n    var values = this.processComplexValue(this.getValue());\n    if (values.length === 0) return;\n\n    var valueFrom = values[0] == \"null\" || bizagi.util.isNull(values[0]) ? \"\" : values[0];\n    var valueTo = values[1] == \"null\" || bizagi.util.isNull(values[1]) ? \"\" : values[1];\n    var from = \"<li class='bz-query-advanced__filter-input-from'><span>\" + valueFrom + \"</span></li>\";\n    var to = \"<li class='bz-query-advanced__filter-input-to'><span>\" + valueTo + \"</span></li>\";\n\n    container.append(from).append(to);\n  },\n\n  renderReadOnlyTags: function renderReadOnlyTags(container) {\n    var values = this.processComplexValue(this.getValue());\n    if (values.length === 0) return;\n\n    var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n\n    // Render tag items\n    values.forEach(function (value) {\n      var $ChildToAdd = $.tmpl(template, {\n        id: this.getTagId(),\n        value: this.formatTagItem(value || \"\"),\n        editable: false });\n\n\n      // Append tag\n      container.append($ChildToAdd);\n    });\n\n  },\n\n  /**\r\n      * The render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Call to base\n    this._super();\n\n    // Call to filters\n    this.configureFilterHandlers();\n\n    // Call to tag handlers\n    this.configureTagHandlers();\n\n    // Call to default handlers, Not apply to wildcard filter\n    if (!/Text/i.test(this.properties.renderType))\n    this.configureDefaultHandlers();\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureFilterHandlers: function configureFilterHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var $filterContainer = $(\".bz-query-advanced__tags\", $control);\n\n    $filterContainer.on(\"click\", function (evt) {\n      var $context = $(evt.target);\n      var isModeWildcard = $control.find(\".bz-query-advanced\").data(\"mode-wildcard\") || false;\n\n      var filterTagExist = self.filterOptionIsShowed();\n      var clickOnFilter = $context.hasClass(\"bz-query-advanced__filter\") ||\n      $context.hasClass(\"bz-query-advanced__tag\") ||\n      $context.hasClass(\"bz-query-advanced__tag-span\") ||\n      $context.hasClass(\"bz-btn-icn bz-query-advanced__tag-arrow\");\n\n      if (!isModeWildcard && (filterTagExist && clickOnFilter || !filterTagExist)) {\n        self.onToggleDataView();\n      }\n\n    });\n\n    $control.on(\"click\", \".bz-query-advanced__clean\", function () {\n      self.onToggleDataOptions();\n    });\n\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureTagHandlers: function configureTagHandlers() {\n    var self = this;\n    var $control = this.getControl();\n\n    // Add pill on enter and tab\n    $control.on(\"keydown\", \"input[data-action='tags']\", function (evt) {\n      var key = evt.key || evt.charCode || evt.keyCode;\n      var valueTag = null;\n\n      if (key === \"Tab\" || key === \"Enter\") {\n        var $tagInput = $(this);\n        valueTag = self.getValidTagValue($tagInput.val());\n\n        if (valueTag) {\n          self.addTag({ id: self.getTagId(), value: valueTag, displayValue: valueTag });\n          $tagInput.val(\"\");\n          evt.preventDefault();\n        }\n      } else if (key === \"Backspace\") {\n        valueTag = $(this).val();\n\n        if (!valueTag) {\n          self.removeLastTag();\n        }\n      }\n    });\n\n    // Add pill on focus out\n    $control.on(\"blur\", \"input[data-action='tags']\", function () {\n      var $tagInput = $(this);\n      var valueTag = self.getValidTagValue($tagInput.val());\n\n      if (valueTag) {\n        self.addTag({ id: self.getTagId(), value: valueTag, displayValue: valueTag });\n        $tagInput.val(\"\");\n      }\n    });\n\n    // Remove pills on click\n    $control.on(\"click\", \".bz-query-advanced__remove-pill-icon\", function (evt) {\n      var tagId = Number($(evt.target).attr(\"data-id\") || 0);\n      self.removeTag(tagId);\n    });\n\n  },\n\n  /**\r\n      * Add handlers to query-filter control\r\n      */\n  configureDefaultHandlers: function configureDefaultHandlers() {\n    var self = this;\n    var $control = self.getControl();\n    var $buttonClean = $(\".bz-query-advanced__clean\", $control);\n\n    $control.on(\"change\", \".bz-query-advanced__input\", function () {\n      if (!self.filterOptionIsShowed()) {\n        if ($.trim(this.value).length > 0) {\n          self.setCurrentFilter({ id: \"default\" });\n          $buttonClean.removeClass('bz-hidden');\n\n          // Hide list of filters\n          self.closeFloatView();\n        } else {\n          self.setCurrentFilter({ id: \"\" });\n          $buttonClean.addClass('bz-hidden');\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    // For base filter\n    if (!this._super(invalidElements)) return false;\n\n    // For single filter\n    if (!!this.controlInitial && !this.controlInitial.isValid(invalidElements)) return false;\n\n    // For between filter\n    if (!!this.controlEnd && !this.controlEnd.isValid(invalidElements)) return false;\n\n    return true;\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean|*}\r\n      */\n  hasValue: function hasValue() {\n    if (this.isCurrentNullFilter()) return true;\n    return this._super();\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LIST FILTERS\n\n  /**\r\n   * Toggle of data view\r\n   */\n  onToggleDataView: function onToggleDataView() {\n    this.floatViewIsCollapsed() ? this.closeFloatView() : this.renderFloatView();\n  },\n\n  /**\r\n      * Check if float list is collapsed\r\n      * @returns {boolean}\r\n      */\n  floatViewIsCollapsed: function floatViewIsCollapsed() {\n    var $listView = $(\".bz-query-advanced__content\", this.element);\n\n    return $listView && $listView.length > 0;\n  },\n\n  /**\r\n      * Get data and render the float list view\r\n      */\n  renderFloatView: function renderFloatView() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"query.advanced-item\");\n\n    var filters = self.properties.data;\n    var $floatList = self.showFloatListView(template, { datasource: filters }, {});\n\n    self.floatListHandlers($floatList);\n  },\n\n  /**\r\n      * Show float list view\r\n      * @param template\r\n      * @param data\r\n      */\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n    var $floatList = $.tmpl(template, data);\n    var widthControl = self.queryFilter.width() - 2;\n\n    $containerRender.addClass(\"bz-query-advanced__visible\");\n    $containerControl.addClass(\"bz-query-advanced__visible bz-query-advanced__floats\");\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: self.queryFilter,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    var timeoutMouseDown = setTimeout(function () {\n      $(document).one(\"mousedown.query-advanced\", function () {\n        $floatList.trigger('closeView');\n      });\n      clearTimeout(timeoutMouseDown);\n    }, 0);\n\n    return $floatList;\n  },\n\n  /**\r\n      * Update the float list view\r\n      */\n  closeFloatView: function closeFloatView() {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    var $listView = $($containerRender).find(\".bz-query-advanced__content\");\n\n    $listView.hide();\n\n    this.destroyFloatView($listView);\n  },\n\n  /**\r\n      * Destroy the float list view\r\n      * @param $list\r\n      */\n  destroyFloatView: function destroyFloatView($list) {\n    var $control = this.getControl();\n    var $containerControl = $control.closest(\".ui-bizagi-control-wrapper\");\n    var $containerRender = $containerControl.closest(\".bz-form-old-item\");\n\n    if ($containerControl.hasClass(\"bz-query-advanced__visible\")) {\n      $containerControl.removeClass(\"bz-query-advanced__visible\");\n    }\n\n    if ($containerControl.hasClass(\"bz-query-advanced__floats\")) {\n      $containerControl.removeClass(\"bz-query-advanced__floats\");\n    }\n\n    if ($containerRender.hasClass(\"bz-query-advanced__visible\")) {\n      $containerRender.removeClass(\"bz-query-advanced__visible\");\n    }\n\n    $list.remove();\n  },\n\n  floatListHandlers: function floatListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-query-advanced__list li\");\n\n    $listContainer.click(function () {\n      var $context = $(this);\n\n      var id = $context.data(\"id\");\n      var element = $(\"span\", $context)[0];\n      var value = element.innerText;\n\n      var newValue = { id: id, value: value };\n\n      if (self.getCurrentFilter().id !== newValue.id) {\n        if (!self.filterOptionIsShowed()) {\n          self.showHideCleanButton(true);\n        }\n\n        self.destroyFilterContent();\n        self.setSelectedFilter(newValue);\n      } else {\n        self.closeFloatView();\n      }\n\n\n      // Add focus to first control\n      if (self.controlInitial) {\n        $(\"input\", self.controlInitial.getControl()).focus();\n      }\n    });\n\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.query-advanced\");\n    });\n  },\n\n  setSelectedFilter: function setSelectedFilter(item) {\n    this.onFilterChange(item);\n    this.closeFloatView();\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO TAGS FILTER\n\n  tagIsAdded: function tagIsAdded(newTagItem) {\n    var values = (this.getDataValue() || []).\n    map(function (tagItem) {\n      return tagItem.value;\n    });\n\n    return values.includes(newTagItem.value);\n  },\n\n  addTag: function addTag(tagItem) {\n    if (this.tagIsAdded(tagItem)) return;\n\n    var form = this.getFormContainer();\n    form.clearValidationMessages();\n\n    if (this.isMaximumTagsValid()) {\n      var $container = $(\".bz-query-advanced__filter-input\", this.getControl());\n      var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n      var $templateItem = $.tmpl(template, {\n        id: tagItem.id,\n        value: tagItem.displayValue,\n        editable: this.properties.editable });\n\n\n      // Append tag\n      $container.before($templateItem);\n\n      // Update data\n      this.addElement(tagItem);\n    } else {\n      var message = this.getResourceByKey(\"workportal-tags-error-limit-exceeded\", \"You cannot add more than #maxTags# criteria elements\").replace(\"#maxTags#\", this.MAX_TAGS_SUPPORTED);\n      form.addErrorMessage(message);\n    }\n  },\n\n  removeTag: function removeTag(tagId) {\n    $(\"li[data-id=\" + tagId + \"]\", this.getControl()).remove();\n    // remove and update data\n    this.removeElement({ id: tagId });\n  },\n\n  removeLastTag: function removeLastTag() {\n    var tags = this.getDataValue();\n    var lastTag = tags[tags.length - 1];\n    // remove and update data\n    if (lastTag) {\n      this.removeTag(lastTag.id);\n    }\n  },\n\n  /**\r\n      * Get new id for tag filter\r\n      * @returns {number}\r\n      */\n  getTagId: function getTagId() {\n    return Math.ceil(Math.random() * 1000000);\n  },\n\n  /**\r\n      * Add format to tag\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  formatTagItem: function formatTagItem(value) {\n    return $.trim(value);\n  },\n\n  /**\r\n      * Add format to string\r\n      */\n  performTagItems: function performTagItems() {\n    var resultString = \"\";\n    var listString = (this.getDataValue() || []).\n    filter(function (item) {\n      return item && !!item.value;\n    }).map(function (item) {\n      return item.value;\n    });\n\n    if (listString.length > 1) {\n      resultString = JSON.encode(listString);\n    } else {\n      resultString = listString && listString[0] || \"\";\n    }\n\n    return resultString;\n  },\n\n  /**\r\n      * Check if maximum number of tag is valid\r\n      * @returns {boolean}\r\n      */\n  isMaximumTagsValid: function isMaximumTagsValid() {\n    var list = this.getDataValue() || [];\n\n    return list && list.length < this.MAX_TAGS_SUPPORTED;\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    if (this.isCurrentTagFilter()) return this.performTagItems();\n\n    // Call to base\n    return this._super();\n  },\n\n  /**\r\n      * Return the value\r\n      * @param {*} value\r\n      */\n  getValidTagValue: function getValidTagValue(value) {\n    return $.trim(value);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  filterOptionIsShowed: function filterOptionIsShowed() {\n    var $control = this.getControl();\n    var $listTag = $(\".bz-query-advanced__filter > .bz-query-advanced__tag\", $control);\n\n    return $listTag && $listTag.length > 0;\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO QUERY FORMS\n\n  /**\r\n   * Toggle the clean options\r\n   */\n  onToggleDataOptions: function onToggleDataOptions() {\n    this.showHideCleanButton();\n\n    this.cleanDataFilter(true);\n  },\n\n  /**\r\n      * onFilterChange, destroy current content and add render new content\r\n      * @param {*} item\r\n      */\n  onFilterChange: function onFilterChange(item) {\n    // Update filter\n    this.cleanDataFilter(false);\n    this.setCurrentFilter(item);\n\n    var $control = this.getControl();\n    var action = this.getCurrentAction();\n\n    // Remove data-action\n    $(\".bz-query-advanced__input\", $control).removeAttr(\"data-action\");\n    $(\".bz-query-advanced__tags\", $control).removeAttr(\"data-action\");\n\n    if (action) {\n      $(\".bz-query-advanced__tags\", $control).attr(\"data-action\", action);\n\n      this.defineLiteControl({ typeFilter: action });\n\n      if (this.isCurrentNullFilter()) {\n        this.setValue(this.getValue());\n      }\n    }\n  },\n\n  /**\r\n      * Remove data of control\r\n      * @param refresh\r\n      */\n  cleanDataFilter: function cleanDataFilter(refresh) {\n    this.controlInitial = null;\n    this.controlEnd = null;\n\n    this.destroyFilterContent();\n    this.setCurrentFilter({ id: \"\" });\n    this.cleanData();\n\n    $(\".bz-query-advanced__tag\", this.getControl()).remove();\n\n    if (refresh) {\n      this.defineLiteControl({ typeFilter: \"\" });\n    }\n  },\n\n  /**\r\n      * Get type of search\r\n      * @returns {string}\r\n      */\n  getSearchType: function getSearchType() {\n    var currentFilter = this.getCurrentFilter();\n    return currentFilter && currentFilter.operator || \"EXACT\";\n  },\n\n  /**\r\n      * Destroy content of filters\r\n      */\n  destroyFilterContent: function destroyFilterContent() {\n    // Remove data-action\n    $(\".bz-query-advanced__filter\", this.getControl()).empty();\n  },\n\n  /**\r\n      * Perform query-value by search type\r\n      * @param queryValue\r\n      * @param searchType\r\n      * @returns {*}\r\n      */\n  performQueryValue: function performQueryValue(queryValue, searchType) {\n    var newQueryValue = queryValue;\n\n    if (searchType === \"starts-with\") {\n      newQueryValue = newQueryValue ? newQueryValue + \"%\" : \"%\";\n    } else if (searchType === \"ends-with\") {\n      newQueryValue = newQueryValue ? \"%\" + newQueryValue : \"%\";\n    } else if (searchType === \"is-null\") {\n      newQueryValue = \"null\";\n    } else if ([\"equals\", \"not-equals\"].includes(searchType)) {\n      newQueryValue = this.performTagItems();\n    }\n\n    return newQueryValue;\n  },\n\n  formatInputValue: function formatInputValue(value) {\n    return typeof value !== \"undefined\" && !bizagi.util.isEmpty(value) ? value : \"null\";\n  },\n\n  /**\r\n      * Add selected elements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = this.getControl();\n    var values = this.getDataValue() || [];\n    var editable = this.properties.editable;\n\n    var $tagsContainer = $(\".bz-query-advanced__filter-input\", $control);\n    var template = this.renderFactory.getTemplate(\"query.advanced-pill\");\n\n    // Clean data\n    $tagsContainer.remove(\".bz-query-advanced__pill\");\n\n    // Render tag items\n    values.forEach(function (tagItem) {\n\n      var $ChildToAdd = $.tmpl(template, {\n        id: tagItem.id,\n        value: self.formatTagItem(tagItem.value || \"\"),\n        editable: editable });\n\n\n      // Append tag\n      $tagsContainer.before($ChildToAdd);\n    });\n\n  },\n\n  // endregion // #endregion\n\n  // region // #region METHODS TO LITE CONTROLS\n\n  /**\r\n   * Return render properties\r\n   * @param {*} params\r\n   */\n  getRenderProperties: function getRenderProperties(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    params = params || {};\n\n    var propertiesRender = {\n      \"id\": properties.id,\n      \"xpath\": properties.xpath + \"_\" + params.typeControl,\n      \"displayType\": \"value\",\n      \"type\": properties.type,\n      \"orientation\": properties.orientation };\n\n\n    var renderProperties = {\n      data: {\n        properties: $.extend({},\n        propertiesRender,\n        self.getRequiredProperties()) },\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (params.isRange) {\n\n      renderProperties.data.properties.isRange = params.isRange || false;\n      renderProperties.data.properties.isMinimumValue = params.isMinimum || false;\n      renderProperties.data.properties.isMaximumValue = params.isMaximum || false;\n\n      if (params.isMinimum) {\n        renderProperties.data.properties.displayName = bizagi.localization.getResource(\"bz-rp-components-time-from-label\");\n      } else {\n        renderProperties.data.properties.displayName = bizagi.localization.getResource(\"bz-rp-components-time-to-label\");\n      }\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Define the controls depend of filter type\r\n      * @param params\r\n      */\n  defineLiteControl: function defineLiteControl(params) {\n  },\n\n  /**\r\n      * Set the rendered controls\r\n      * @param controlInitial\r\n      * @param controlEnd\r\n      */\n  setLiteControls: function setLiteControls(controlInitial, controlEnd) {\n  },\n\n  /**\r\n      * Render control\r\n      * @param filterType\r\n      * @param $canvas\r\n      * @param control\r\n      */\n  renderLiteControl: function renderLiteControl(filterType, $canvas, control) {\n  },\n\n  /**\r\n      * Get template by type of control\r\n      * @param filterType\r\n      */\n  getTemplateByType: function getTemplateByType(filterType) {\n  },\n\n  getRequiredProperties: function getRequiredProperties() {\n    return {};\n  },\n\n  // endregion // #endregion\n\n  // region // #region UTILS TO FILTERS\n\n  /**\r\n   * Get Datasource by data type\r\n   * @returns {}\r\n   */\n  getOptions: function getOptions() {\n    var self = this;\n    var operators = self.OPERATORS;\n    var filterType = self.properties.renderType;\n    var result = [];\n\n    for (var item in operators) {\n      var operator = operators[item];\n\n      if ($.inArray(filterType, operator.appliesTo) >= 0 && !operator.skip) {\n        result.push({\n          value: self.getResourceByKey(operator.label, operator.defaultLabel),\n          id: item });\n\n      }\n    }\n\n    return result;\n  },\n\n  showHideCleanButton: function showHideCleanButton(show) {\n    var $control = this.getControl();\n\n    if (!!$control) {\n      var $cleanButton = $(\".bz-query-advanced__clean\", $control);\n      $cleanButton && show ? $cleanButton.removeClass('bz-hidden') : $cleanButton.addClass('bz-hidden');\n    }\n  },\n\n  onToggleHideElement: function onToggleHideElement(elementClass) {\n    var $control = this.getControl();\n\n    if (!!$control) {\n      var $buttonClose = $(elementClass, $control);\n\n      $buttonClose && $buttonClose.toggleClass(\"bz-hidden\");\n    }\n  },\n\n  setCurrentFilter: function setCurrentFilter(filter) {\n    var operators = this.OPERATORS;\n    var idFilter = filter && filter.id ? filter.id : \"\";\n\n    if (idFilter && operators[idFilter]) {\n      this.currentFilter = Object.assign({}, operators[idFilter], { id: idFilter });\n    } else {\n      this.currentFilter = {};\n    }\n\n  },\n\n  getCurrentFilter: function getCurrentFilter() {\n    return this.currentFilter || {};\n  },\n\n  getCurrentAction: function getCurrentAction() {\n    var filter = this.getCurrentFilter();\n    var action = filter && filter.action;\n\n    return action || \"\";\n  },\n\n  isCurrentTagFilter: function isCurrentTagFilter() {\n    return this.isCurrentFilter(\"tags\");\n  },\n\n  isCurrentBetweenFilter: function isCurrentBetweenFilter() {\n    return this.isCurrentFilter(\"between\");\n  },\n\n  isCurrentNullFilter: function isCurrentNullFilter() {\n    return this.isCurrentFilter(\"is-null\");\n  },\n\n  isCurrentWildcardFilter: function isCurrentWildcardFilter() {\n    return this.isCurrentFilter(\"wildcard\");\n  },\n\n  isCurrentContainsFilter: function isCurrentContainsFilter() {\n    return this.isCurrentFilter(\"like\");\n  },\n\n  isCurrentStartsWithFilter: function isCurrentStartsWithFilter() {\n    return this.isCurrentFilter(\"starts-with\");\n  },\n\n  isCurrentEqualsThanFilter: function isCurrentEqualsThanFilter() {\n    return this.isCurrentFilter(\"less-equals-than\") ||\n    this.isCurrentFilter(\"greater-equals-than\");\n  },\n\n  isCurrentEndsWithFilter: function isCurrentEndsWithFilter() {\n    return this.isCurrentFilter(\"ends-with\");\n  },\n\n  isCurrentFilter: function isCurrentFilter(filter) {\n    return this.getCurrentAction() === filter;\n  },\n\n  isCurrentDefaultFilter: function isCurrentDefaultFilter() {\n    var currentAction = this.getCurrentAction();\n    return currentAction === this.defaultFilter ||\n    currentAction === {} ||\n    currentAction === \"\";\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n\n  prepareForSetValue: function prepareForSetValue() {\n    var currentFilter = this.getCurrentFilter();\n    var noFilterSettled = bizagi.util.isEmpty(currentFilter);\n\n    if (noFilterSettled) {\n      this.setFilter(this.defaultFilter);\n    }\n  },\n\n  /**\r\n      * Perform data value by filter type\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  performDataValue: function performDataValue(value) {\n    var self = this;\n    var newValue = value;\n\n    if (self.isCurrentTagFilter()) {\n      var dataList = [];\n      var isString = newValue && $.trim(newValue).length > 0;\n      var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n      if (isString && !isArray) {\n        dataList = [newValue];\n      } else if (isArray) {\n        dataList = self.getDataValue() || [];\n      }\n\n      var list = (dataList || []).map(function (item) {\n        return {\n          id: self.getTagId(),\n          value: item };\n\n      });\n\n      return list || \"\";\n    } else if (newValue && $.trim(newValue).length > 0) {\n      if (self.isCurrentStartsWithFilter()) {\n        newValue = newValue.replace(/%$/i, \"\");\n      } else if (self.isCurrentEndsWithFilter()) {\n        newValue = newValue.replace(/^%/i, \"\");\n      }\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Perform list value by filter type\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  performListValue: function performListValue(value) {\n    var action = this.getCurrentAction();\n    var newValue = value;\n\n    if (action === \"between\") {\n      var dataList = [];\n      var isString = newValue && $.trim(newValue).length > 0;\n      var isArray = isString && /^\\[.*?\\]$/i.test(newValue);\n\n      if (isString && isArray) {\n        dataList = JSON.parse(value);\n\n        newValue = {\n          from: dataList[0] && dataList[0] !== \"null\" ? dataList[0] : \"\",\n          to: dataList[1] && dataList[1] !== \"null\" ? dataList[1] : \"\" };\n\n      } else {\n        //if value is not an array\n        newValue = {\n          from: value,\n          to: value };\n\n      }\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Update current filter type\r\n      * @param filterType\r\n      */\n  setFilter: function setFilter(filterType) {\n    var action = \"\";\n    var noFilterSettled = bizagi.util.isEmpty(this.getCurrentFilter());\n\n    if (!!filterType) {\n      this.setCurrentFilter({ id: filterType });\n      action = this.getCurrentAction();\n    }\n\n    !noFilterSettled && this.showHideCleanButton(true);\n\n    this.defineLiteControl({ typeFilter: action });\n  },\n\n  // endregion // #endregion\n\n  /**\r\n   * Add the render data to the given collection in order to send data to the server\r\n   * @param renderValues\r\n   */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n\n    if (!bizagi.util.isEmpty(xpath)) {\n      var searchType = self.getSearchType();\n      var filter = this.getCurrentFilter();\n      var filterType = filter && filter.id || \"\";\n\n      if (value !== null && typeof value !== \"undefined\") {\n        queryValue = value !== \"\" ? value : null;\n      }\n\n      if (queryValue !== null || properties.included || filterType === \"is-null\") {\n        var newQueryValue = self.performQueryValue(queryValue, filterType);\n\n        var newParameter = {\n          value: newQueryValue,\n          included: self.properties.included,\n          xpath: properties.xpath,\n          searchType: searchType,\n          orderType: \"NONE\",\n          filterType: filterType,\n          advancedQuery: properties.advancedQuery || false,\n          renderId: self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  } });","/*\r\n *   Name: Bizagi Render ComboSelected class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for comboSelected renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.comboSelected\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    this.leftValues = this.filterData();\n    this.rightValues = JSON.parse(JSON.stringify(this.properties.value));\n  },\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"render-comboSelected\");\n    var html = $.fasttmpl(template, { dataList: this.leftValues });\n    return html;\n  },\n\n  orderArraySelected: function orderArraySelected(dataList) {\n    var arrayOrder = dataList;\n\n    var order = arrayOrder.sort(function (a, b) {\n      var nA = a.value === undefined || a.value === null ? \"\" : a.value.toString().toLowerCase();\n      var nB = b.value === undefined || b.value === null ? \"\" : b.value.toString().toLowerCase();\n      if (nA < nB)\n      return -1;else\n      if (nA > nB)\n      return 1;\n      return 0;\n    });\n\n    return order;\n  },\n\n  /*\r\n     * Filter data before set\r\n     */\n  filterData: function filterData() {\n    var self = this;\n    var dataListArray = [];\n\n    if (self.properties.data) {\n      $.each(self.properties.data, function (i, data) {\n        var el = $.grep(self.properties.value, function (value, e) {\n          return self.properties.xpath == \"Organizations\" ? value.id == data.id : value.id === data.id;\n        });\n\n        if (!el.length) {\n          dataListArray.push(data);\n        }\n      });\n    }\n\n    return dataListArray;\n  },\n\n  /*\r\n     * Template method to implement in each children to customize each control\r\n     */\n  renderControlReadOnly: function renderControlReadOnly() {\n    var template = this.renderFactory.getTemplate(\"render-comboSelectedReadOnly\");\n    var html = $.fasttmpl(template, {});\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render userPassword class\r\n *   Author: Paola Herrera\r\n *   Comments:\r\n *   -   This script will define basic stuff for userPassword render\r\n */\n$.Class.extend(\"bizagi.rendering.userPassword\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    this.properties.value = null;\n    self.properties = this.properties;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"render-userPassword\");\n    // Render template\n    var html = $.fasttmpl(template, { valuePassword: self.properties.value });\n    return html;\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    return bValid;\n  } });","/*\r\n *   Name: BizAgi Render Stateholder\r\n *   Author: Fabian Moreno\r\n */\n\n$.Class.extend(\"bizagi.rendering.stakeholder\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    if (typeof this.properties.value === \"undefined\") {\n      this.properties.value = [];\n    }\n\n    if (typeof this.properties.data === \"undefined\") {\n      this.properties.data = [];\n    }\n    self.properties = this.properties;\n  },\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"stakeholder\");\n\n    var params = {\n      currentUser: bizagi.currentUser.userName,\n      userNames: typeof self.properties.value == \"string\" ? JSON.parse(self.properties.value).value : self.properties.value,\n      entities: self.properties.data };\n\n\n    // Render template\n    var html = $.fasttmpl(template, params);\n    return html;\n  },\n\n  getData: function getData(valueXpath, currentPage, filter, sort, order) {\n    var self = this;\n\n    if (typeof currentPage === \"undefined\" || currentPage == null)\n    currentPage = \"1\";\n\n    var params = {\n      pxpath: valueXpath,\n      prows: \"10\",\n      ppage: currentPage.toString(),\n      xpath: valueXpath,\n      idRender: self.properties.id,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      property: \"dataxpath\",\n      contexttype: \"entity\",\n      pfilter: filter,\n      psort: sort };\n\n\n    if (order) params.porder = order;\n\n    return self.dataService.multiaction().getPropertyData(params);\n  },\n\n  associatedUser: function associatedUser(idEntity, guidEntity, idUser) {\n    var self = this;\n\n    return self.dataService.associateStakeholder({\n\n      idPageCache: self.properties.idPageCache,\n      contexttype: \"entity\",\n      surrogateKey: parseInt(idEntity),\n      associatedUser: JSON.encode({ dataType: \"Int\", value: idUser == \"null\" ? idUser : parseInt(idUser) }),\n      guidentity: guidEntity });\n\n  },\n\n  refreshStakeholderList: function refreshStakeholderList() {\n    var self = this;\n\n    return self.dataService.refreshAssociateStakeholder({\n\n      idRender: self.properties.id,\n      contexttype: \"entity\",\n      property: \"value\",\n      idPageCache: self.properties.idPageCache });\n\n  } });","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Document Generator\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will define basic stuff for document generator render\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.document\", {}, {});","/*\r\n*   Name: BizAgi Render Letter\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for letter render\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.letter\", {}, {});","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    if (properties.advancedSearch && this.getMode() === \"execution\") {\n      properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\n      properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });"]}