{"version":3,"sources":["jquery/workportal/js/base/command/bizagi.workportal.command.security.js","jquery/workportal/js/bizagi.workportal.webpart.helper.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.widget.js","jquery/workportal/js/base/action/bizagi.workportal.actions.search.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.render.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.listCases.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.renderForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.print.js","jquery/workportal/desktop/widget/homeportal/bizagi.workportal.desktop.widgets.homeportal.js","jquery/workportal/desktop/widget/dialognav/bizagi.workportal.desktop.widgets.dialognav.js","jquery/common/bizagi.ui.controls/jquery.ui.controls.definition.js","jquery/workportal/js/base/command/bizagi.workportal.command.printform.js","jquery/workportal/js/base/bizagi.workportal.controllers.controller.js","jquery/workportal/js/base/bizagi.workportal.controllers.main.js","jquery/workportal/js/base/bizagi.workportal.controllers.menu.js","jquery/workportal/js/base/bizagi.workportal.controllers.workarea.js","jquery/workportal/js/base/webpart/bizagi.workportal.webparts.webpart.js","jquery/workportal/js/base/action/bizagi.workportal.actions.action.js","jquery/workportal/js/base/action/bizagi.workportal.actions.routing.js","jquery/workportal/js/desktop/action/bizagi.workportal.desktop.actions.routing.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.webpart.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.print.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.fontsize.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.routing.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.startForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.MySearchList.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.loadForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.subMenu.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.search.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.page.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.genericiframe.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.oldrenderintegration.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.fontsize.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.main.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.menu.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.workarea.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.popup.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.popup.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.routing.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.render.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.startForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.renderForm.js","jquery/workportal/desktop/widget/smartinbox/bizagi.workportal.desktop.widgets.smartinbox.js","jquery/workportal/desktop/widget/smartinbox.filter/bizagi.workportal.desktop.widgets.smartinbox.filter.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.subMenu.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.genericiframe.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.search.js","jquery/plugins/jsgrid/js/jsgrid.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.mySearchList.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.loadForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.oldrenderintegration.js","jquery/workportal/desktop/widget/createcase/bizagi.workportal.desktop.widgets.createcase.js","jquery/workportal/desktop/widget/updateform/bizagi.workportal.desktop.widgets.updateform.js","jquery/workportal/desktop/widget/templateEngine/bizagi.workportal.desktop.widgets.templateEngine.js","jquery/workportal/js/bizagi.workportal.override.helper.js","jquery/common/bizagi.ui.controls/jquery.ui.controls.loadtmpls.js","jquery/common/bizagi.dragScroll/js/bizagi.dragScroll.js","jquery/common/bizagi.internals/bizagi.workportal.desktop.overrides.js","jquery/workportal/desktop/widget/dashboard/bizagi.workportal.desktop.widgets.dashboard.js","jquery/workportal/desktop/widget/stuff/bizagi.workportal.desktop.widgets.stuff.js","jquery/workportal/desktop/widget/project.base/bizagi.workportal.desktop.widgets.project.base.js","jquery/workportal/desktop/widget/decontextualized.plans/bizagi.workportal.desktop.widgets.decontextualized.plans.js","jquery/workportal/desktop/widget/navigator/bizagi.workportal.desktop.widgets.navigator.js","jquery/workportal/desktop/widget/backnavigator/bizagi.workportal.desktop.widgets.backnavigator.js","jquery/workportal/desktop/widget/sidebarhome/bizagi.workportal.desktop.widgets.sidebarhome.js","jquery/workportal/desktop/widget/usersummary/bizagi.workportal.desktop.widgets.usersummary.js","jquery/workportal/desktop/widget/shortcuts/bizagi.workportal.desktop.widgets.shortcuts.js","jquery/workportal/desktop/widget/rightsidebar/bizagi.workportal.desktop.widgets.rightsidebar.js","jquery/workportal/desktop/widget/leftsidebar/bizagi.workportal.desktop.widgets.leftsidebar.js","jquery/workportal/desktop/widget/dummy/bizagi.workportal.desktop.widgets.dummy.js","jquery/workportal/desktop/widget/sidebar/bizagi.workportal.desktop.widgets.sidebar.js","jquery/workportal/js/base/widget/admin/admin.cases.js","jquery/workportal/js/base/widget/admin/admin.caseSearch.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.adhoc.create.process.js","jquery/workportal/desktop/widget/profly/bizagi.workportal.desktop.widgets.profly.js","jquery/workportal/desktop/widget/sessionTimeout/bizagi.workportal.desktop.widgets.sessionTimeout.js","jquery/workportal/desktop/widget/sessionTimeout/expired/bizagi.workportal.desktop.widgets.sessionTimeoutExpired.js","jquery/workportal/desktop/widget/user.privacy/bizagi.workportal.desktop.widgets.user.privacy.js","jquery/workportal/desktop/widget/users.modal/bizagi.workportal.desktop.widgets.users.modal.js","jquery/workportal/desktop/widget/accessDenied/bizagi.workportal.desktop.widgets.accessDenied.js","jquery/common/bizagi/js/bizagi.users.adapter.js","jquery/webparts/desktop/SharePoint/caseSummary/task.description/bizagi.workportal.desktop.widgets.task.description.js","jquery/webparts/desktop/SharePoint/workitemSummary/task.options/bizagi.workportal.desktop.widgets.task.options.js","jquery/workportal/js/services/bizagi.workportal.services.quickActionsRequester.js","jquery/workportal/desktop/widget/casesTemplate/bizagi.workportal.desktop.widgets.casestemplate.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_$$Class$extend","_bizagi$workportal$co","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","$","bizagi","ui","controls","uitable","namespace","availableComponents","css","tmpl","tmpl2","tmpl3","uicombo","uicheckbox","uiradio","uitreeview","uimultiselect","Class","init","dataService","this","rawData","getSecurity","self","def","Deferred","security","jsonSecurityList","menuSecurity","resolve","when","getMenuAuthorization","done","data","currentUser","associatedStakeholders","length","permissions","push","convertSecurityData","each","authMenu","fail","reject","promise","permsMenu","getRecursivePerms","perms","checkSecurityPerm","module","deferred","currentMenuSecurity","getRawData","renderFactory","print","properties","printParams","extend","document","triggerHandler","widgetName","workportal","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_PRINT","modalParameters","title","localization","getResource","refreshInbox","params","referrer","hasOwnProperty","referrerParams","buttons","text","click","selfButton","frameTemplate","getTemplate","headerTemplate","executePrintWidgetAction","objFrame","strFrameName","Date","getTime","jFrame","printID","jFrameHeader","environment","loader","productBuild","productBuildToAbout","build","fileName","window","parent","appendTo","util","isIE","frames","i","name","objDoc","contentWindow","open","objDocStr","innerHTML","html","write","close","win","styleLoading","timeoutClose","setTimeout","clearTimeout","focus","tmpWindowTitle","timeoutPrint","timeoutRemove","remove","removeAttr","attr","timeoutWidgetAction","workportalFacade","resources","componentContainers","subscribers","disposed","templatesDeferred","getWorkportal","publish","eventName","subscribe","callback","bind","event","subscribeOneTime","one","unsubscribe","unbind","render","defer","renderingDeferred","areTemplatedLoaded","pipe","renderContent","postRender","getContent","content","defaultValue","getComponentSelector","component","getComponentContainer","resizeLayout","performResizeLayout","dispose","item","override","disposeTime","loadTemplates","templates","tmplPromises","useNewEngine","undefined","loadTemplate","path","apply","templateService","getTemplateWidget","isRendered","controllers","controller","componentRegex","_super","e","p","liveSave","autoSave","liveProcessesEvents","saveEvent","saveLivePromise","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","BIZAGI_WORKPORTAL_WIDGET_INBOX","defaultWidget","setContext","setWidget","addDialogToDialogStack","showDialogWidget","closeCurrentDialog","closeAllDialogs","popupWidget","popWidget","pushWidget","executeAction","disposeWidget","appendWidgetTo","NotificationDispatcher","dispatch","notification","type","refreshQueryFormShortCut","template","workarea","getWorkareaController","menu","getMenuController","resize","currentWidget","currentWidgetParams","getMenu","assert","isEmpty","renderWorkarea","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","start","then","getAction","execute","BIZAGI_WORKPORTAL_ACTION_SEARCH","workareaContainer","cleanWidgets","empty","loadWidgetFromFacade","getWidget","widgetController","renderedContent","dialog","resizeContainer","height","container","containerHeight","adjustableChildren","children","adjustableContainersHeight","fixedContentHeight","element","hasClass","overflowY","addClass","marginTop","Number","replace","finalHeight","overflow-y","find","closest","show","customPreferencesObj","services","preferences","customFormats","customPreferencesValues","getPreferences","windowMaintenance","datepicker","setDefaults","currencyInfo","decimalSymbol","decimalSeparator","symbol","digitGroupSymbol","thousandSeparator","groupSeparator","setResource","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","uploadMaxFileSize","BIZAGI_SETTINGS","UploadMaxFileSize","changeData","overrideUserPreferences","command","enableFeatureDisplayOptions","DisplayOptions","base64image","themeLogo","photo","userPicture","hasPicture","initials","userFullName","getInitials","showQrMobileMenu","overrideLocalization","changeWidget","adjustMenuWP","buttonMenuContainer","toleranceFor","Jelement","changeWidth","sign","end","searchInputWidth","outerWidth","widthComponentsWithoutResponsive","limitWidth","width","selectorMenuButtons","indexButtonToHide","indexLastButton","thereIsAButtonOverlaped","position","top","eq","hide","clean","webpart","hideCasesColumn","columnName","columns","visible","old","imageColumn","newData","transformed","column","displayName","cases","columnTitle","oldColumn","fieldName","dataType","parseBoolean","isOrdered","orderBy","orderType","rows","oldRow","newRow","id","j","fields","totalPages","page","pages","number","active","filters","getCaseId","row","getEntityId","splitHeaderName","finalDispName","dispNameParts","split","getWorkItems","workitemsData","workitems","wi","wiInfo","idWorkItem","idTask","imageLabelColumn","getImage","files","getFileImage","getEmptyFile","getFile","removeClass","templateDestination","resolvedRemplate","errorTemplateName","errorMessage","message","remoteSeverURL","sharepointProxyPrefix","indexOf","substr","eTemplate","address","helpAddress","msg","alert","deferRet","console","log","webpartName","postMessageSocket","canvas","whenInitialized","webPartToDraw","iframeidentifier","send","mask","createElement","className","style","popUpParams","preClosePopUp","ev","eventPhase","closePopUp","addEventListener","attachEvent","closeCanvas","appendChild","webpartCanvasDiv","pathiFrame","location","href","substring","queryStringParams","toString","idCase","idWorkitem","idWfClass","iframe","postmessageSocket","postmessage","remoteServer","destination","origin","receive","parentNode","src","removeChild","iframeclosemsg","resizeInPopUp","heightActivitiFormContainer","body","webpartObject","canHide","showCasesMSG","readQueryString","destroy","webpartParams","adjustButtonsToContent","startWaiting","executeWebpart","result","onclick","dialogParams","showCloseButton","a","webparts","addConfigurationMessage","messageResourceName","doc","ownerDocument","errorTemplate","whenCreated","fullname","whenExecuted","helper","project","isVisible","isWebpartInIFrame","BIZAGI_IFRAME_IDENTIFIER","shortName","webPartDestine","startReceiving","sendDimensionsiFrame","mandatorysend","canvasobject","onresize","sendDimensionsiFramePostMessage","addResizeListener","iframeDimentions","iframeName","iframeHeight","iframeWidth","notFireToIframe","refresh","prepareForRefresh","newContent","contains","replaceSelector","creating","createWebpart","manageError","canvasError","errorMsg","responseText","getFailServerErrorDeferred","endWaiting","append","iframeCommunicator","trigger","onWaiting","getElementById","hideParent","routing","getRoute","route","deferredDialogOpened","isOfflineForm","moduleParams","formsRenderVersion","guid","BIZAGI_WORKPORTAL_WIDGET_RENDER","BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION","BIZAGI_WORKPORTAL_WIDGET_ASYNC","BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD","enableWorkPortalMenu","_executeWidgetProjectDashboard","BIZAGI_WORKPORTAL_WIDGET_START_FORM","parameters","onClose","dialogOpened","closeVisible","dialogClass","response","widgetReference","BIZAGI_WORKPORTAL_WIDGET_ROUTING","isThereAsync","asyncWidget","validateGoToLastSection","getPreference","hasWorkItems","goToInbox","routeModuleParams","getWidgetByCookie","notifier","injector","get","messageWhenGoToInbox","messageForm","showSucessMessage","goToInboxPreference","widgetReferrer","workItems","index","isAsynch","RETURN_TO","INBOX","INBOX_GRID","HOME_PORTAL","LAST_INBOX","QUERIES","BAM","NONE","LAUNCH_NOTIFICATION","_calcResult","_calcOnFinishWhere2Go","_returnTo","goBack","where","_changeWidgetTo","executeChangeWidget","_showToastMessage","_clearLaunchNotification","_to","_referrer","tryCatch","_isQueriesReferrer","_preferGo2Inbox","_go2LastSection","_execute","res","_where","_moduleParams","clone","_goBack","_return","navigator","goToBack","radNumber","trim","idWorkflow","taskState","onlyFavorites","order","orderFieldName","group","bizagiConfig","groupByCaseNumber","getCustomizedColumnsData","lstIdCases","key2","value2","isArray","TaskName","State","IsFavorite","IsOpen","BIZAGI_WORKPORTAL_WIDGET_SEARCH","showNoResults","showSearch","requestGlobalForm","referrerBackButton","context","isTabletDevice","originarlColor","detectDevice","noresults","redirectToProcess","onlyUserWorkItems","formatRequest","formatCategories","isDate","state","slash","getYear","BIZAGI_WORKPORTAL_WIDGET_INTEGRATION","BIZAGI_WORKPORTAL_WIDGET_WEBPART","BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY","BIZAGI_WORKPORTAL_WIDGET_RENDERFORM","BIZAGI_WORKPORTAL_WIDGET_NEWCASE","BIZAGI_WORKPORTAL_WIDGET_QUERIES","BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION","BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","BIZAGI_WORKPORTAL_WIDGET_SUBMENU","BIZAGI_WORKPORTAL_WIDGET_FONTSIZE","BIZAGI_WORKPORTAL_WIDGET_PAGE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_REPORTS","BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU","BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART","BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD","BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE","BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG","BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_START_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS","BIZAGI_WORKPORTAL_WIDGET_TREE","BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY","BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE","BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER","BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP","BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY","BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST","BIZAGI_WORKPORTAL_WIDGET_LOADFORM","BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME","BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_TIMELINE","BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP","BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_PROFLY","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED","BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY","BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_DESCRIPTION_CONTENT","BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS","BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX","BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX","BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE","observableElement","widgetReadyDeferred","isBlocked","getWidgetName","widgetParams","actionName","actionParams","showGraphicQuery","isAdhoc","maximizeOnly","desktop","dialogStack","pop","isProcessOnTheFlyCase","showTimeLine","startAndThen","showSelectUser","maximize","userLinkLabel","parentDef","showBackButton","userId","userName","val","eventAsTasks","fullName","off","arguments","on","pubDef","pub","queueDef","Array","events","_data","unsub","format","timeZone","date","moment","tz","checkProcess","checkWorkItems","getCaseSubprocesses","process","subProcessPersonalized","forEach","workitem","formatDate","formatDateFromInvariantStringDate","estimatedSolutionDate","hash","search","queryString","getQueryString","isConfiguredFromHash","hashParams","getHashParams","details","summaryDeferred","currentInboxView","summaryCaseDetails","caseNumber","releaseCurrentActivity","grep","currentState","activity","allowReleaseActivity","renderSummary","parents","renderForm","withOutGlobalForm","cache","htmlContent","showComments","PrintableVersion","StateLog","GraphicQuery","printableVersion","stateLog","graphicQuery","summary","caseSummaryTemplate","formatInvariantDate","delegate","routingExecute","tabs","create","activate","commentsFocus","newPanel","prop","comments","readOnly","tab","renderComments","summarySubProcess","subprocess","subProcesses","custData","caseSummaryTemplateSubprocess","summaryAssigness","assignees","eventsUniqueList","el","inArray","join","activitiesUniqueList","activities","caseSummaryTemplateAssigness","summaryCaseEvents","caseSummaryTemplateEvents","summaryActivities","fullFormat","caseSummaryTemplateActivities","resultRender","renderContainer","getMessageFromNetworkState","online","proxyPrefix","serviceLocator","database","rendering","facade","triggerparams","fromTask","fromWorkItemId","oldrenderevent","eventMethod","eventer","stopPropagation","renderingFacade","idProcess","startForm","concat","form","IsDisposed","searchCriteriasApplied","preProcessValue","control","processForm","containerParams","getRenderById","setValue","queryFormParams","h_action","h_contexttype","h_idForm","guidForm","getQueryForm","processedForm","match","g1","offset","string","toLowerCase","JSON","parse","isSearchesQueryForm","contextType","renderingParams","setTableHeadFixed","TableElement","floatThead","floatOptions","_startQuickActions","_QActionsStared","quickActionsInstance","_params","getContainerSelector","getQuickActionContainerSelector","checkAllSelector","getQuickActionCheckAllContainerSelector","refreshShowedResults","updateResults","quickActions","changeProcessOptions","changeProcess","_QuickActionsRenderIn","parentTemplate","workItemsInfo","_QActionsContainer","setDataToExecute","renderIn","renderCheckboxGroup","_getWorkItemsInfo","headers","_finalWorkItems","indexWorkItems","_getIndexFromTableColumn","indexCaseNumber","_rowInfo","_rowWorkItems","k","_workItem","findIndex","toUpperCase","showCase","caseSummaryContainer","adhocProcessId","isAdhocProcess","idAdhocProcess","hasComments","enableFeatureShowTimelineButton","enableTimelineByProcessType","isAvailableTimelineByProcessType","processPath","renderedTemplate","callTaskDescription","caseSummaryDialog","isPropagationStopped","getWorkitems","url","getUrl","iframeOldRender","getCaseFormsRenderVersion","formsVersion","renderSummaryForm","preview","button","modal","draggable","resizable","taskDescriptionParams","classNeedsModal","task","description","renderManyTasksDescription","summaryForm","isEnableFeature","listCases","renderStaticForm","BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM","idForm","idEntity","surrogateKey","genericiframe","widgetURL","fontsize","sizeSelected","fontsizeTemplate","fontButton","textSize","main","showOldWindow","sessionTimeOut","session-timeout","session-timeout-expired","getIEVersion","renderIENotCompatibleTemplate","BIZAGI_PATH_TO_BASE","renderWidget","closeQuirksModePopup","iDialog","iTotalDialog","closeContentDialog","dialogContent","popup","options","closed","extendQueryString","showQuirksModePopup","windowParameters","instance","dontClose","innerDialog","queries","shortcut","renderStoredQueries","actualWidget","storeWidget","inbox","grid","homeportal","isFunction","cookie","resetNavigatorInfo","searchContent","iconsTemplate","menuContent","sec","reportsSecurity","AnalysisReports","getWidgetByDataUser","siblings","LogOut","preventDefault","Search","setActiveSection","Inbox","showWidgetsPopup","showNewCasePopup","enableMySearch","showMySearchPopup","home","showQueriesPopup","renderAdminMenu","renderQuickProcessMenu","validateUrlInQuickProcess","renderReportsMenu","endPoint","showUserProfileMenu","showQRCodePopup","inputSearchField","renderFontMenu","CURRENT_THEME_REMOVE_IT","logout","showAboutPopup","keyCode","searchValue","emptyNavigatorInfo","$userProfile","target","is","ajax","success","popupContent","allowmaximize","maximized","showMenuPopup","sourceElement","buttonSelector","my","at","currentPopup","closePopupInstance","showUserPopup","max-height","activeScroll","disableFrankensteinQueryForms","argsTemplate","currentYear","currentYearVersion","hostName","checkRootCategory","getsRootCategory","getSubMenuData","category","v","categoryKey","categoryName","categoryUrl","menuData","BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTFOLDERS","menuValidator","AdhocProcessAdmin","AdhocUserGroupAdmin","applicationUrl","error","alertMessage","isIE8","renderSubMenu","menuButton","submenu","categoryClassName","customClickHandler","showEntitiesPopup","arrowPosition","insertAfter","scrollElement","closeDeferred","after","showPopup","popupWidth","popupHeight","display","float","left","z-index","of","collision","printversion","p_all_rows","formatTabs","formatGroups","appendCaseDetails","formatECM","formatButton","formatGrid","formatRenderContainer","tabElement","ind","ul","labels","formatContent","$caseDetails","setProcess","createdBy","Name","creationDate","idPlan","getPlan","responsePlan","prepend","containerText","cont","image","file","parentContainer","tableControl","pageContent","closeButton","register","registerCallback","contexts","HOME","dashboard","layout","stuff","plans","sidebar","usersummary","myshortcuts","rightSidebar","empty1","empty2","nav","level","belongs","toLeftSidebarCD","toRightSidebarCD","toTaskSidebarCD","TEMPLATEENGINE-VIEW","paginator","sortbar","mysearchfilter","ENTITY-ENGINE-VIEW","SEARCH-ENGINE-VIEW","mysearchcriteria","CASES-TEMPLATE-VIEW","proccesseslist","filtercases","PLANS-VIEW","topmenu","manager","ACTIVITY","leftSidebar","contentDashboard","caseState","activityState","activityDescription","processState","users","subprocesses","relatedPlan","OVERVIEW","overview","refreshLastItemBreadcrumb","COMMENTS","discussions","discussionSidebar","FILES","filesPreview","TIMELINE","timeline","timelineSidebar","PLANCREATE","plan","PLANOVERVIEW","planActivities","planSidebar","planAction","planState","planProgress","planTime","planParent","planUsers","PLANACTIVITIES","PLANFILES","empty3","empty4","empty5","empty6","empty7","PLANCOMMENTS","PLANTIMELINE","PLANSIDEBAR","EDITACTIVITY","activitiesForm","ACTIVITYPLAN","activitySidebar","activityAction","activityTime","activityProgress","activityParent","activityUsers","ACTIVITYPLANCREATE","ACTIVITYPLANOVERVIEW","ACTIVITYPLANCOMMENTS","ACTIVITYPLANFILES","ACTIVITYPLANTIMELINE","REFRESHALL","CONTEXT_HOME","supportNav","setContextsByNotifyEvents","sub","proxy","onNotifyChange","registerInstance","selectedInboxData","smartInboxId","owner","contextsSidebarActivity","contextsWithoutLeftSidebarCaseDashboard","contextsLeftSidebarCaseDashboard","contextsWithoutRightSidebarCaseDashboard","contextsRightSidebarCaseDashboard","d","necesaryClean","setLayout","servicesPD","behaviors","projectDashboard","getContextToShow","dataPD","responseGetCaseSummaryDetails","hasAccessToCase","currentContext","contextToShow","themesEnabled","getCurrentTheme","theme","loadContext","setCurrentTheme","setWidgetReady","histName","hasGlobalForm","updateView","args","showContextByMenuDashboard","isValidContext","removeCurrentTheme","emit","newInstance","dialognavdata","BIZAGI_WORKPORTAL_DIALOGNAV","paramsData","eventType","fromActionLauncher","guidEntityCurrent","reference","referenceType","showDateNavigator","xpath","skipRefresh","classContext","unsubscribeEvents","workOnITActivitySelector","workOnITProcessSelector","fromSearchWidget","showWorkitem","showAsyncWidget","inbox-common-case-summary-subprocess","inbox-common-case-summary-assignees","inbox-common-case-summary-events","inbox-common-case-summary-activities","render-case-summary","paginationTemplate","summaryDisplayed","bizagiScrollbar","autohide","configureSlider","configureHeader","identicalObjects","scrollabletab","tooltipNext","tooltipPrevious","getBackCase","getNextCase","restoreStatus","queryFormAction","urlParameters","getCasesByFolder","customized","casesGroupedByFolder","idFolder","hover","lastQueryFullKey","idtask","printFormCommand","printform","summaryContainer","hideSummary","showSummary","animate","renderPanel","sliderPanel","panelArrow","forceResize","windowWidth","openOldWorkportalForm","getListKey","renderform","afterLoad","backURL","smartInboxModel","_smartInboxModel","Math","ownerType","resultsPerPage","pinned","processes","filter","sort","access","getModel","setModel","model","property","set","addColumn","from","removeColumn","splice","updateColumn","moveColumn","fromIndex","toIndex","getColumns","addAccess","removeAccess","updateAccess","getAccess","resetAccess","dataModel","processesAvailable","currentStep","numberOfSteps","customizedColumnsAvailable","loadDataDef","sortOptions","pageSizeOptions","maxColumns","editing","cloning","filterWidget","smartinbox","smartinbox-main","smartinbox-columns","smartinbox-share","smartinbox-shared-inbox-not-found","getSpecificSmartInbox","settingName","err","status","sharedInboxNotFound","postRenderDef","closeWizard","shareMode","renderShareMode","renderWizardMode","onResize","adjustStep2Height","adjustStep3Height","mainTemplate","columnsTemplate","adminMode","isRTL","getAllProcessesSmartInbox","loadProcesses","checkCurrentStep","validateMode","filterContent","movePrevious","moveNext","saveSmartInbox","$form","createColumn","showErrorMessage","configureHandlers","validateWizardAction","moveStepWizard","dialogBox","getPersistenceModel","updateSmartInbox","createSmartInbox","createAdminSmartInbox","errorCode","inboxWidget","selectedSmartInboxId","stepNumber","checkStepOne","checkStepTwo","checkStepThree","updateFilterModel","loadCustomizedColumns","getAllCustomizedColumnsSmartInbox","filterModel","setWFClassList","setCustomizedColumns","buildColumnsForFilterModel","loadSortingOptions","masterEditor","warningOrder","outerHeight","changeStepWizard","newStep","$search","bizagi_multiSelect","list","itemValue","itemText","onChange","defaultColumns","isDefault","label","iconClass","parentPositionElement","parentElementToFitWidth","parentElementToBorder","classOpenedList","classOpenedParent","classItem","SEARCH_MIN_LENGTH","openOnFocus","customRenderItem","application","convertProcessesFromModelToMultiSelect","allProcess","selectedProcess","l","getSelectedProcessesId","processesId","_","sortable","items","handle","update","updatedColumns","any","alwaysVisible","isOptional","isColumnValid","scroll","customizedColumn","$content","values","combo","initValue","first","srcElement","scrollIntoView","selectedValue","createComboSortCustomizedColumns","isSortColumnValid","createComboSortOptions","createComboEmptySortOptions","customizedColumnItem","unshift","initialValue","priority","object","nextStep","duplicatedColumns","arrayMessagesErrors","x","hasDuplicatedColumns","validateFilterForSave","elem","validateEmail","email","test","objectValues","groupBy","tagInputEmails","tagsinput","allowDuplicates","trimValue","confirmKeys","delimiter","validateEmailAddress","shareSmartInbox","_this","cancel","usersNotFound","showWarningMessage","disabledUsers","smartInboxFilterModel","_filters","getInternalModel","now","addRow","operator","getRow","removeRow","setRowProperty","deleteRowProperty","MAX_DECIMALS","maxFilters","maxInValues","entityValuesCache","smartinbox-filter-main","smartinbox-filter-field-boolean","smartinbox-filter-field-text","smartinbox-filter-field-number","smartinbox-filter-field-datetime","smartinbox-filter-field-on-operator","smartinbox-filter-field-in-operator-combo","smartinbox-filter-field-in-operator-text","wfClassList","userTasksCache","booleanFieldTemplate","textFieldTemplate","numberFieldTemplate","dateTimeFieldTemplate","onOperatorTemplate","inOperatorComboTemplate","inOperatorTextTemplate","renderFilters","createFilterRow","internalModel","keys","c","messages","rowsRender","to","$newRow","createComboCustomizedColumns","createComboOperatorFilters","removeFilterRow","scrollTop","$row","removeValidationValue","columnItem","b","elements","entity","isEditable","$column","cleanOperator","cleanValueField","valueField","operatorItem","operators","buildOperatorValues","isValid","$operator","createValueField","isDateTimeDataType","buildDateTimeBetweenField","isNumberDataType","buildNumberBetweenField","buildInOperatorComboValueField","buildInOperatorComboForActivityField","buildInOperatorNotEntityValueField","isNumber","buildOnOperatorValueField","isTextDataType","buildTextValueField","buildNumberValueField","isBooleanDataType","buildBooleanValueField","buildDateTimeValueField","setValueField","booleanComboValues","validate","change","propertyToUpdate","placeholder","numeric","isInvalidNumber","originalValue","replaceAll","focusout","formatCurrency","getValue","removeMoneyExtraDecimals","numberFrom","valueTo","numberTo","wrapInner","datetime","firstDay","dateFormat","getDateFormat","BIZAGI_DEFAULT_DATETIME_INFO","shortDateFormat","changeYear","changeMonth","shortYearCutoff","twoDigitYearMaxDelta","yearRange","sValue","dateFormatter","getDateFromFormat","defaultDatetimeInfo","formatInvariant","getDate","parseDate","dateFrom","fromValue","dateTo","toValue","onOperatorValues","guidElement","multiselectCombo","bizagi_searchMultiSelect","scope","entityGuid","asyncList","getEntityValues","loadUserTasks","internalId","processName","request","term","entityValues","getEntityValuesForInboxFilter","wildcard","getUserTasksByWFClass","workflowId","isSmartInbox","getUserTasksForInboxFilter","multiselectText","map","possibleOperators","appliesTo","operatorsToAdd","datePickerFormat","calculateMaxValue","calculateMinValue","RegExp","dotIndex","groupSymbol","$test","groupDigits","roundToDecimalPlace","mySearchList","mySearchListWrapper","loadtemplates","renderSearchLists","mySearchListTmpl","getSearchLists","searchLists","$searchLists","closeModal","onListItemClick","keypress","$target","currentTarget","guidform","displayname","guidEntity","publishParams","summaryDecorator","validateForm","renderValues","forceCollectData","collectRenderValuesQueryForm","filterObject","metadataFilters","getRenders","getFilterControl","newValue","searchType","rangeQuery","advancedQuery","defineFilterObject","displayValue","getDisplayValue","editable","performQuery","guidSearch","pageSize","calculateFilters","onlyLocalResults","cleanContext","dataParams","homeportalInstance","_context","isReady","itemFilter","searchTypeFilter","typeSearch","loadForm","subMenu","renderSubMenuContent","scrollVertical","listTemplate","isAdminMenu","listContainer","callBack","ThemeBuilder","windowOpenBlank","asyncECMUpload","showWidgetPopup","AdminSmartInbox","enableMultipleCasesReassigment","CaseAdmin","enableAsyncECMUploadJobs","authorized","getSubItemsAuthorized","deleteMenuOption","features","enableOldBusinessPoliciesAdministration","enableNewBusinessPoliciesAdministration","typeIcon","BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS","UserAdmin","StakeholderAdmin","AuthenticationLogQuery","EncryptionAdmin","UserPendingRequests","UnlockFormsAdmin","AsynchronousWorkitemRetries","UserDefaultAssignation","Profiles","AlarmAdmin","Licenses","GRDimensionAdmin","DocumentTemplates","ProcessAdmin","LanguageAdmin","EntityAdmin","AdhocEntityAdmin","AdhocCreateProcess","showCustomWidgetPopup","_$$extend","UserPermissionReport","Holidays","_$$extend2","OAuthApplications","_$$extend3","ProjectName","_$$extend4","UsersDelegation","_$$extend5","ErrorLogs","innerWidth","BusinessPolicies","showContentPopup","Vocabularies","loadBusinessPolicesWidget","getCathegoriesMenuList","showBreadCrumb","eventHandlerGoBackBreadCrumb","checkIsAlive","eventHandlerCategoryGroupsParent","eventHandlerCategoryGroupsChildrenWithoutCustomClick","Jparent","categoryDisplayName","menuList","categoriesGroupsChildrenList","getCategoriesGroupsChildren","getMenuList","isIE11","isEdge","localStorage","setItem","sessionStorage","bizagiAuthentication","startLoading","loadDashboardQuickProcess","childrenList","groupCategoryChildren1","groupCategoryChildren2","groupCategoryChildren3","groupCategoryChildren4","groupCategoryChildren5","sortChildList","sortParentList","menulist","groupCategory1","getItemMenuList","groupCategory2","groupCategory3","groupCategory4","groupCategory5","listmenu_children","groupCategory","routeEvents","dispatchEvent","newLiveProcess","widgetParameters","needsQuicksMode","getPageHacks","hackParams","openBACase","sHref","routingAction","changeToWidget","stopLoading","hack","getInternetExplorerVersion","injectCss","afterLoadParams","settings","defaultWidth","idUser","fromDate","toDate","ping","load","fadeIn","callInside","cssList","getStyle","iframeContent","contents","$self","inputClasses","adhocIds","inbox-grid-cases","inbox-common-case-summary","inbox-common-case-summary-oldrender","search-details","searchTemplate","searchDetailsTemplate","searchPagination","renderSearch","contentDetails","pdata","pageSelector","actualPage","caseId","processId","timeLine","TimeLine","haveQuickActions","setFormat","formatValue","getRadNumberColumnIndex","showColumn","columnIndex","createGroupedHeader","rowIndex","getRadNumber","_dataCases","parseInt","isComplex","tooltip","elmnt","idObject","favoriteType","addFavorite","delFavorite","itemSelector","confirmationMsg","showConfirmationBox","dissasociateCaseFromFolder","pagination","pageToshow","pageNumber","previousPage","nextPage","paginationHtml","bizagiPagination","maxElemShow","listElement","clickCallBack","smartfoldersParameters","currentWorkitemId","workitemCaseId","cssLocation","browser","mozilla","webkit","oldrenderintegration","icoTaskState","integration-old-render","insertIframeOldRender","getInjectJavaScript","getInjectJS","_processId","_mapping","mapping","_idParentCase","idParentCase","_mappingstakeholders","mappingstakeholders","_guidprocess","guidprocess","createcase","getStartForm","_getServiceParams","_getRenderingFacade","_getCanvasForm","_rendering","RPproxyPrefix","getMapping","stringify","$canvas","onCaseCreated","_guidForm","_entityGuid","_surrogateKey","_readonlyform","readonlyform","updateform","getEntityForm","_overrideHandlers","idPageCache","originalProcessButton","processButton","buttonProperties","endLoading","actionService","casetoolbar","usersCasesService","actionsEventsService","accumulatedcontext","processActionService","templateEngine","templateEngineElement","templateEngineTooltip","templateEmptyData","selectorCheckboxItems","_currentPage","entitiesSelected","onEntityChecked","getCommonActions","updateData","setValues","onFormActionExecuted","onFormRuleExecuted","onFormExecuted","_page","_totalRecords","totalRecords","_defaultFilterApplied","defaultFilterApplied","_guidSearch","_fromActionLauncher","_reference","_referenceType","_xpath","_guidEntityCurrent","_pageSize","_onlyLocalResults","entityDataParams","filtersAppliedCounter","getEntityData","deferProcessEntities","processEntities","entitiesData","checkAll","renderEntities","commonActions","getTemplateEngine","renderDataService","service","factory","initAsyncStuff","router","addContext","getLevelNavigator","currentLevelNavigator","contextEvent","_matchHeaderWithColumns","ERROR_STR","onError","str","validArray","cells","headerMapper","reduce","xPaths","col","_exists","appliedFilters","_matchDataHeaders","extra","columnsXPaths","getSearchData","setFiltersData","getCollectionEntityData","getFiltersEntityData","filtersData","processFiltersData","updateCounterFiltersApplied","hideSortBar","appliedFilter","count","defaultValues","applied","attribute","filtersApplied","templateType","engine","entities","entityId","entityData","isDefaultTemplate","guidTemplate","entityDataForRender","paramsRender","makeArray","requestRepeat","idCasesOfProcessEntitiesPromise","lastParamsSendit","getIdCasesOfProcessEntities","generalDefer","collectionDeferreds","$dataViewList","entitiesLength","$elementsTmpl","$template","renderTemplate","getEmptyDataMessage","isRefresh","$templateData","isChecked","collectionGetActionsDeferred","idCases","$cardWrapper","$casetoolbar","getCaseToolbar","casetoolbarData","idcase","always","getEntityActionsAndEvents","$footer","actionData","loadEvents","delay","overlay","getActionsView","responseActions","$actionsView","actionsView","actionsData","$item","getCheckBox","showCheckItem","removeCheckItem","surrogateKeys","itemsSelected","guidentity","$inputs","input","refreshRegister","idBox","$templateBox","replaceWith","outerHTML","counterFilterParams","customWorkportalHandlers","customizeWorkportalHandler","handler","newUrl","original","customizeWorkportalWidget","extensionMethod","widgetImplementation","getWidgetImplementation","eval","customButtons","addCustomMenuButton","customButtonTemplate","menuButtonContainer","isAvailable","customButton","addDataService","functionName","fn","extensionObject","tmpls","templatesMap","arrPromises","_create","clicked","curYPos","curXPos","cursor","$scrollable","pageY","pageX","scrollLeft","_move","y","moveX","moveY","Widget","call","jQuery","enableFolder","enableSmartFolders","enableListOfRecentProcesses","enableCustomizeReports","enablePrintFromEditForm","enableDebug","enableE2EInterface","disableOldInbox","enableBatchRequest","forceBatchRequest","showAssignees","enableSecurityCaseDashBoard","enableQueriesClassicMenu","disableAbortCases","enableAdhocProcess","enableCCBCCFeatureOnLiveProcesses","enableReviewModeFeatureOnLiveProcesses","enableFilterByProcessGroupOnLiveProcesses","enableLocalizationInModelerOnLiveProcesses","enablePredefinedPerformersOnLiveProcesses","enableMaximizeModalsOption","enableStartPageDisplayOption","enablePing","enableECMMetadataMultiaction","validateGridsOnButtonClick","enableCustomFormats","enableShareActivity","enableFormatMoneyColumnQueryResult","enableSymbolMoneyColumnQueryResult","enableGridRefreshAfterCellRefresh","restoreAppearanceAfterRefresh","maxButtonForQuickActions","hideTimeWhenHourMinutesSecondsAreZero","enableActionIsChangedSupport","iconclass","icon","getData","slice","onShowCases","$route","$title","idworkflow","collections","onClickEntity","selectItem","getUserStuff","buildModel","lf","pubDeadLockDetection","differenceMillisecondsServer","uploadMaxFilesSize","supportFileExt","getDateServer","getDifferenceBetweenDates","mergePropertiesActivitiesWithWorkitems","workItemFilter","workItem","guidActivity","startDate","wiEntryDate","finishDate","wiSolutionDate","workItemState","estimatedFinishDate","wiEstimatedSolutionDate","base","decontextualized.plans","Plans","getServerDateDifference","resolveGetDateServer","onClickCard","flowContext","isOpen","decontextualized","CONTEXTS","EDIT_ACTIVITY","ACTIVITY_PLAN","TEMPLATE_ENGINE_VIEW","PLANS_VIEW","PLAN_ACTIVITIES","CASES_TEMPLATE_VIEW","CLASSES","GRID_CONTAINER","flagDisplayDate","fromClickBreadCrumb","showReleaseButton","caseLink","taskOptionsWidget","onRenderFinishParams","child","popup-release","releaseDialogBox","getDataObj","info","_level","printCase","actionButtonEvent","formContent","$container","onRenderFinish","updateLastCrumbParamsInfo","getLevel","goToPreviousCrumb","crumbEvent","plugins","popupRelease","buttonAccept","buttonCancel","onClickAcceptRelease","onClickCancelRelease","renderEnds","getBreadCrumbInfo","setBreadCrumbInfo","drawBreadCrumb","breadCrumbInfo","showSteps","crumbItem","crumbContent","drawCrumb","itemCrumb","isPrincipalHome","goToCrumb","crumb","contextActivity","getParentContext","cutContext","deleteRemainingCrumbs","pathSize","crumbBack","resetBreadCrumb","copyDataObjectWithoutReference","updateInfo","lastCrumb","secondLastCrumb","cleanBreadCumb","firstCrumb","factCrumbItem","hasGuidEntityInBreadCrumb","newFactCrumbItem","hasXpathInBreadCrumb","steps","drawDateNavigator","onDisplayDate","homeNavBarAdjust","setEnabledLeftSidebar","setEnabledRightSidebar","setEnabledBreadCrumb","setEnabledBackButton","_addGridContainerClass","toAdd","_$contentWrapper","setPropertiesForEngineTemplate","_CONTEXTS","_needsProjectGrid","getActivityName","setStateBarNavigator","backnavigator","GO_TO_BACK","activityName","taskOptions","getButtonForActivityAction","showButtonPrintForm","showUrlHelp","regional","currentDate","dayNames","getDay","monthNames","getMonth","getFullYear","$wrapperButtonPrint","$wrapperUrlHelp","helpUrl","validateUrlWellFormed","textForButton","buttonOption","buttonContainer","_taskOptionsRequest","showRelease","showTakeOwnership","_request","getTaskOptions","_waitShowCancelCase","showCancelCase","getShowCancelCase","destroyReleaseDialogBox","actionTakeOwnership","detach","launchReleaseActivity","multiactionService","disableRequests","validateIfRenderingIsCallingAEndpoint","releaseActivity","taskReleased","showMessageAndRefreshContext","waitForLoadCompletely","keyResourceDescriptionMessage","showMessageBox","refreshActivityContext","validateIfBatchIsExecuting","refreshAllWidgets","takeOwnershipActivity","_defaultMessage","_message","timeOut","ol","il","$date","navigatorInstance","queryForm","actionForm","notMigratedUrl","queryParams","pageToShow","recalculateQueryForm","reports","fromBackButton","modalWasOpened","sidebarData","isFromQueriesBackButton","sidebarhome","showStakeholders","$tooltip","getInfoToUser","getCurrentUser","stakeholders","totalStakeholders","stakeholdersToShow","stakeholdersHidden","showMore","user","orgArray","requestsInProgressProcessGuid","shortcuts","onClickShortcut","getMyShortcutsByCategory","actionsHasStartForm","hasStartForm","showConfirmation","executeProcessAction","actionCreateCase","launchActionsAfterCreateCase","includeRadicationPhase","printf","behaviorCollapsiblePanels","right-sidebar","enableOrDisableRightSidebar","eventsHandler","addBottomPadding","onCollapsePanel","addClassesCollapseSideBar","disableSidebar","enableSidebar","openRightSidebar","closeRightSidebar","collapseSideBar","setDisabledSidebar","right","left-sidebar","showTooltip","classArrow","textTooltip","tooltipClass","classSuffix","dummy","_defer","adhoc.create.process","addEventHandlers","isValidForm","next","nameValidation","onClickCancel","onSubmitFormCreateProcess","paramsNewProcess","showErrorAlertDialog","createNewAdhocProcess","isIE10OrLower","project-filespreview-wrapper","argumentsTemplate","paramsURL","encodeURI","generalTmpl","reload","currentFile","filesNumber","profly","sessionTimeoutService","_onClickMinValue","keepSessionOpen","removeXClose","sessionTimeout","redirectToLogoutPage","sessionTimeoutExpired","user-privacy","onDownloadReport","downloadReportUser","privacy","usuarios","showActivityInfo","isActivity","users-modal","clickArrow","contentItemSelected","access-denied","accessDenied","getOrApply","defaultController","loadData","noop","insertItem","updateItem","deleteItem","Grid","config","$element","_container","_editingRow","_sortField","_sortOrder","_firstDisplayingPage","_init","updateOnResize","rowClass","rowRenderer","rowClick","editItem","rowDoubleClick","noDataContent","noDataRowClass","heading","headerRowRenderer","headerRowClass","headerCellClass","filtering","filterRowRenderer","filterRowClass","inserting","insertRowRenderer","insertRowClass","editRowRenderer","editRowClass","confirmDeleting","deleteConfirm","selecting","selectedRowClass","oddRowClass","evenRowClass","cellClass","sorting","sortableClass","sortAscClass","sortDescClass","paging","pagerContainer","pageIndex","pageButtonCount","pagerFormat","pagePrevText","pageNextText","pageFirstText","pageLastText","pageNavigatorNextText","pageNavigatorPrevText","pagerContainerClass","pagerClass","pagerNavButtonClass","pagerNavButtonInactiveClass","pageClass","currentPageClass","customLoading","pageLoading","autoload","loadIndication","loadIndicationDelay","loadMessage","loadShading","invalidMessage","invalidNotify","errors","onInit","onRefreshing","onRefreshed","onPageChanged","onItemDeleting","onItemDeleted","onItemInserting","onItemInserted","onItemEditing","onItemUpdating","onItemUpdated","onItemInvalid","onDataLoading","onDataLoaded","onOptionChanging","onOptionChanged","invalidClass","containerClass","tableClass","gridHeaderClass","gridBodyClass","_initLoadStrategy","_initController","_initFields","_attachWindowLoadResize","_attachWindowResizeCallback","_callEventHandler","loadStrategy","jsGrid","loadStrategies","PageLoadingStrategy","DirectLoadingStrategy","_loadStrategy","_controller","source","loadIndicator","LoadIndicator","validation","Validation","field","isPlainObject","Field","_grid","_refreshSize","_detachWindowResizeCallback","option","optionChangingEventArgs","optionChangedEventArgs","oldValue","_handleOptionChange","fieldOption","_normalizeField","_renderGrid","_refreshContent","_refreshPager","openPage","cancelEdit","_clear","removeData","_createHeader","_createBody","_pagerContainer","_createPagerContainer","_loadIndicator","_createLoadIndicator","_validation","_createValidation","shading","_loadingTimer","$headerRow","_headerRow","_createHeaderRow","$filterRow","_filterRow","_createFilterRow","$insertRow","_insertRow","_createInsertRow","$headerGrid","_headerGrid","_header","_scrollBarWidth","_content","$bodyGrid","_bodyGrid","_body","_eachField","$result","$th","_prepareCell","cell","cssprop","align","filterTemplate","insertTemplate","eventParams","reset","_resetSorting","_resetPager","_setPage","_clearSortingCss","_refreshHeading","_refreshFiltering","_refreshInserting","toggle","_createNoDataRow","indexFrom","firstDisplayIndex","indexTo","lastDisplayIndex","itemIndex","_createRow","amountOfFields","_renderCells","_getRowClasses","_attachRowHover","classes","_createCell","fieldValue","_getItemFieldValue","cellRenderer","itemTemplate","props","shift","_setItemFieldValue","current","_setSortingParams","_setSortingCss","_reversedSortOrder","isNumeric","f","fieldIndex","_visibleFieldIndex","_sortData","sortFactor","_sortFactor","sortField","item1","item2","sortingFunc","_itemsCount","itemsCount","_pagesCount","floor","$pagerContainer","_createPager","showPager","pagerRenderer","pageCount","_createPagerByFormat","itemCount","pagerParts","pagerPart","_createPages","_createPagerNavButton","firstDisplayingPage","_createPagerPageNavButton","showPrevPages","_createPagerCurrentPage","_createPagerPage","showNextPages","isActive","_createPagerButton","$link","_refreshHeight","_refreshWidth","$ghostContainer","$ghostContent","widthExcludingScrollBar","nonBodyHeight","_controllerCall","method","param","isCanceled","doneCallback","_showLoading","Error","_errorHandler","_hideLoading","getFilter","loadParams","_sortingParams","loadedData","finishLoad","filterValue","sortOrder","getSorting","sortingParams","clearFilter","insertingItem","_getValidatedInsertItem","insertedItem","finishInsert","_getInsertItem","_validateItem","insertValue","validationErrors","_rowIndex","rules","_setCellValidity","invalidArgs","$cell","toggleClass","clearInsert","insertRow","rowByItem","_editRow","jquery","nodeType","_itemIndex","$editRow","_createEditRow","insertBefore","editTemplate","editedItem","_getValidatedEditedItem","_updateRow","_getEditedItem","_getEditRow","$updatingRow","updatingItem","updatingItemIndex","previousItem","updatedItem","$updatedRow","_finishUpdate","updatedItemIndex","editValue","confirm","_deleteRow","deletingItem","deletingItemIndex","finishDelete","methodArgs","methodResult","locales","setLocale","localeConfig","componentPrototype","locale","lang","version","zIndex","shaderClass","loadPanelClass","_initContainer","_initShader","_initLoadPanel","_shader","bottom","_loadPanel","$loadPanel","actualWidth","actualHeight","marginLeft","min","deletedItem","deletedItemIndex","isDefined","sortStrategies","str1","str2","localeCompare","n1","n2","dt1","dt2","numberAsString","parseFloat","_normalizeRules","rule","validator","_normalizeRule","_applyNamedValidator","validatorName","validators","required","rangeLength","minLength","maxLength","pattern","range","max","_getSortingFunc","sorter","_value","TextField","autosearch","filterControl","_createTextBox","which","insertControl","editControl","NumberField","TextAreaField","_createTextArea","textarea","SelectField","selectedIndex","textField","firstItemValue","valueType","resultItem","_createSelect","select","CheckboxField","_createCheckbox","checked","disabled","indeterminate","$cb","checkbox","ControlField","_configInitialized","buttonClass","modeButtonClass","modeOnButtonClass","searchModeButtonClass","insertModeButtonClass","editButtonClass","deleteButtonClass","searchButtonClass","clearFilterButtonClass","insertButtonClass","updateButtonClass","cancelEditButtonClass","searchModeButtonTooltip","insertModeButtonTooltip","editButtonTooltip","deleteButtonTooltip","searchButtonTooltip","clearFilterButtonTooltip","insertButtonTooltip","updateButtonTooltip","cancelEditButtonTooltip","editButton","deleteButton","clearFilterButton","modeSwitchButton","_initConfig","_hasFiltering","_hasInserting","hasFiltering","hasInserting","_createFilterSwitchButton","_createInsertSwitchButton","_createModeSwitchButton","add","_createEditButton","_createDeleteButton","_createSearchButton","_createClearFilterButton","_createInsertButton","_createUpdateButton","_createCancelEditButton","_createOnOffSwitchButton","cssClass","isOnInitially","isOn","updateButtonState","$button","_createGridButton","isInserting","cls","clickHandler","usersAdapter","matchExtendedInfo","usersWithExtendedInfo","uuser","u","extendedInfo","validateDataURIScheme","picture","createJsonUserInfo","userAssigned","username","isAssignee","participant","isParticipant","isAnonymized","anonymizedUserInformation","matchUsersForExtendedInfoCase","casee","justAssignees","usersWithoutAnonymized","fromWebpart","task-description","getContentOnRender","renderParams","modalForDescription","isNecessaryModal","DOMPurify","sanitize","isNecessaryModalForDescription","showModalDescription","baseUrl","getPathUrl","showConfirmationMessage","validateTrustDomains","closeOnEscape","resp","scrollWidth","scrollHeight","currentStates","newWidgets","tskDescription","_start","pipeResponse","_renderDefer","_wait4Render","_wait4RenderDefer","allowTakeOwnership","allowRelease","allowCaseCancel","QUICK_ACTIONS_QUEUE","numberAllActions","executedRequests","_startRequest","paramsQuickAction","paramsToBackend","workItemId","taskId","quickActionGuid","_buildParametersByActions","paramsRequest","executeQuickAction","_finishRequest","backResponse","_finishAllRequests","_clearQueue","_skipPendingRequests","numberSkipActions","clearQueue","stop","_executeQueueRequests","arrayRequestsInformation","queue","dequeue","quickAction","ruleGuid","_buildRequestSubmitData","_buildRequestCheckpoint","_buildRequestProcessPropertyValue","_buildRequestCommit","h_tag","h_xpath","h_idRender","h_xpathContext","h_propertyName","startAllRequests","arrayRequestsInformationRaw","stopAllRequests","quickActionsRequester","casestemplate-container","casestemplate-item","casestemplate-empty-data","hasBatchActions","sequenceCall","templateContainer","updateCases","onCaseChecked","sequence","casesSelected","getCasesData","casesData","getCasesTemplates","templateString","casesLength","$templateCase","renderCase","caseData","templateCase","$case","batchActions","getAssignees","$assignees","refreshCase","caseTemplate","getActivitiesData","getPendingsData","casesTemplates","guidFavorite","forcePersonalizedColumns","parentsid","casestemplate"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Security Command\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a common class to access the security data\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\n$.Class(\"bizagi.workportal.command.security\", {}, {\n\n\n  init: function init(dataService) {\n    var self = this;\n    self.dataService = dataService;\n    self.rawData = {};\n  },\n\n  getSecurity: function getSecurity() {\n    var self = this;\n    var def = new $.Deferred();\n    self.security = {};\n    self.jsonSecurityList = {};\n\n    if (bizagi.menuSecurity) {\n      def.resolve(bizagi.menuSecurity);\n    } else {\n\n      $.when(self.dataService.getMenuAuthorization()).done(function (data) {\n        if (bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0) {\n          data.permissions.push({ \"associatedStakeholders\": [] });\n        }\n        self.rawData = data;\n        bizagi.menuSecurity = self.convertSecurityData(data);\n        self.jsonSecurityList = data;\n        $.each(self.security, function (key, value) {\n          authMenu[key] = value;\n        });\n        def.resolve(bizagi.menuSecurity);\n      }).fail(function () {\n        def.reject();\n      });\n    }\n\n    return def.promise();\n  },\n\n\n  convertSecurityData: function convertSecurityData(data) {\n    var permsMenu = {};\n    var getRecursivePerms = function getRecursivePerms(perms) {\n      $.each(perms, function (key, value) {\n        if (_typeof(value) == 'object') {\n          if (typeof key != \"number\") {\n            permsMenu[key] = true;\n          }\n          getRecursivePerms(value);\n        } else {\n          permsMenu[value] = true;\n        }\n      });\n    };\n    getRecursivePerms(data.permissions);\n    return permsMenu;\n  },\n\n  checkSecurityPerm: function checkSecurityPerm(module) {\n    var self = this;\n    module = module || \"\";\n    var deferred = $.Deferred();\n    if (!bizagi.menuSecurity) {\n      self.getSecurity().done(function (currentMenuSecurity) {\n        deferred.resolve(!!currentMenuSecurity[module]);\n      }).fail(function () {\n        deferred.resolve(false);\n      });\n    } else {\n      deferred.resolve(!!bizagi.menuSecurity[module]);\n    }\n\n    return deferred.promise();\n  },\n\n  getRawData: function getRawData() {\n    return this.rawData;\n  } });","var _$$Class$extend;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /*\r\n                                                                                                                                                                                                                                *   Name: BizAgi Workportal Webpart helper\r\n                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                *   -   This script will define helper functions that the webparts could use to reuse some logic\r\n                                                                                                                                                                                                                                */\n\n\n$.Class.extend(\"bizagi.workportal.webpart.helper\", {}, (_$$Class$extend = {\n  /* \r\n                                                                             *   Constructor\r\n                                                                             */\n  init: function init(webpart) {\n    // Set data service\n    this.dataService = webpart.dataService;\n\n    // Set l10n service\n    this.resources = webpart.resources;\n\n    // Set workportal facade\n    this.workportalFacade = webpart.workportalFacade;\n\n    //Load Aditional templates\n    this.templates = {};\n  },\n\n  /*\r\n      *   Helper to set visible property to false to the given columns\r\n      */\n  hideCasesColumn: function hideCasesColumn(data, columnName) {\n    var self = this;\n    for (i = 0; i < data.columns.length; i++) {\n      if (data.columns[i].name == columnName) {\n        data.columns[i].visible = false;\n        break;\n      }\n    }\n    return data;\n  } }, _defineProperty(_$$Class$extend, \"hideCasesColumn\",\n\n\n\nfunction hideCasesColumn(data, columnName) {\n  var self = this;\n  for (i = 0; i < data.columns.length; i++) {\n    if (data.columns[i].name == columnName) {\n      data.columns[i].visible = false;\n      break;\n    }\n  }\n  return data;\n}), _defineProperty(_$$Class$extend, \"transformCasesInfo\",\n\n\n\n\nfunction transformCasesInfo(params) {\n  var old = params.data,\n  imageColumn = params.imageColumn;\n  var newData = {\n    transformed: true };\n\n\n  // If the data is already transformed, don't do anything\n  if (old.transformed) return old;\n\n  var getColumnType = function getColumnType(column) {\n    if (column.fieldName == imageColumn) return \"upload\";\n    if (column.fieldName == \"I_idTask\") return \"workitems\";\n    return column.type;\n  };\n\n  // Parse columns, and add \"id\" column\n  newData.columns = [{\n    name: \"id\",\n    displayName: \"id\",\n    visible: false }];\n\n\n  for (var i = 0; i < old.cases.columnTitle.length; i++) {\n    var oldColumn = old.cases.columnTitle[i];\n    newData.columns.push({\n      name: oldColumn.fieldName,\n      displayName: oldColumn.displayName,\n      dataType: getColumnType(oldColumn) });\n\n\n    if (bizagi.util.parseBoolean(oldColumn.isOrdered) == true) {\n      newData.orderBy = oldColumn.fieldName;\n      newData.orderType = oldColumn.orderType == 0 ? \"asc\" : \"desc\";\n    }\n  }\n\n  // Add \"workitems\" column\n  newData.columns.push({\n    name: \"workitems\",\n    displayName: \"workitems\",\n    visible: false,\n    dataType: \"workitems\" });\n\n\n  newData.columns.push({\n    name: \"permissions\",\n    displayName: \"permissions\",\n    visible: false,\n    dataType: \"permissions\" });\n\n\n  // Parse rows\n  newData.rows = [];\n  for (i = 0; i < old.cases.rows.length; i++) {\n    var oldRow = old.cases.rows[i];\n    var newRow = [];\n    newRow.push(oldRow.id);\n\n    // Add other fields\n    for (var j = 0; j < oldRow.fields.length; j++) {\n      newRow.push(oldRow.fields[j]);\n    }\n    newData.rows.push(newRow);\n  }\n\n  // Add other stuff\n  newData.totalPages = old.cases.totalPages;\n  newData.page = old.cases.page;\n\n  return newData;\n}), _defineProperty(_$$Class$extend, \"drawGridView\",\n\n\n\n\nfunction drawGridView(params) {\n  var templates = params.template;\n\n  // This is the data that will be used in order to render the template\n  var data = params.data;\n\n  // Complete column information with defaults\n  for (i = 0; i < data.columns.length; i++) {\n    data.columns[i].visible = typeof data.columns[i].visible !== \"undefined\" ? bizagi.util.parseBoolean(data.columns[i].visible) : true;\n\n    // Hide uploads & workitems\n    if (data.columns[i].dataType == \"upload\") data.columns[i].visible = false;\n    if (data.columns[i].dataType == \"workitems\") data.columns[i].visible = false;\n    if (data.columns[i].dataType == \"permissions\") data.columns[i].visible = false;\n  }\n\n  // Check that required params are defined\n  if (data.orderType == 0) data.orderType = \"asc\";\n  if (data.orderType == 1) data.orderType = \"desc\";\n  data.orderBy = !bizagi.util.isEmpty(data.orderBy) ? data.orderBy : \"\";\n  data.orderType = !bizagi.util.isEmpty(data.orderType) ? data.orderType : \"asc\";\n  data.totalPages = !bizagi.util.isEmpty(data.totalPages) ? data.totalPages : 0;\n\n  // Add paging stuff\n  var pages = [];\n  for (var i = 1; i <= data.totalPages; i++) {\n    pages.push({\n      number: i,\n      active: i == data.page });\n\n  }\n\n  // Build the html\n  var result = $.tmpl(templates, $.extend(data, {\n    pages: pages,\n    actions: params.actions,\n    filters: params.filters,\n    title: params.title,\n    getCaseId: function getCaseId(row) {\n      return row[0];\n    },\n    getEntityId: function getEntityId(row) {\n      return row[0];\n    },\n    splitHeaderName: function splitHeaderName(displayName) {\n      var finalDispName = displayName;\n      var dispNameParts = displayName.split('_');\n      if (dispNameParts.length > 1)\n      finalDispName = dispNameParts[1];\n      return finalDispName;\n    },\n    getWorkItems: function getWorkItems(row) {\n      var workitemsData = \"[\";\n      var workitems = row[row.length - 2].workitems;\n      if (workitems && workitems.length > 0) {\n        for (var wi in workitems) {\n          if (wi > 0) {\n            workitemsData += \",\";\n          }\n          var wiInfo = \"{\\\"idWorkItem\\\":\";\n          wiInfo += workitems[wi].idWorkItem;\n          wiInfo += \",\\\"idTask\\\":\";\n          wiInfo += workitems[wi].idTask;\n          wiInfo += \"}\";\n          workitemsData += wiInfo;\n        }\n\n      }\n      workitemsData += \"]\";\n      return workitemsData;\n    } }));\n\n\n  return result;\n}), _defineProperty(_$$Class$extend, \"drawThumbnailsView\",\n\n\n\n\nfunction drawThumbnailsView(params) {\n  var self = this;\n  var templates = params.template;\n\n  // This is the data that will be used in order to render the template\n  var data = params.data;\n  var imageUrl, label;\n\n  // Normalize label item\n  for (i = 0; i < data.columns.length; i++) {\n    // Set default visibility to true\n    data.columns[i].visible = typeof data.columns[i].visible !== \"undefined\" ? bizagi.util.parseBoolean(data.columns[i].visible) : true;\n\n    // Check label item\n    if (data.columns[i].name == params.imageLabelColumn) {\n      data.columns[i].dataType = \"imageLabel\";\n    }\n\n    // Check workitem item\n    if (data.columns[i].dataType == \"workitems\") {\n      data.columns[i].visible = false;\n    }\n  }\n\n  // Check that required params are defined\n  data.orderBy = !bizagi.util.isEmpty(data.orderBy) ? data.orderBy : \"\";\n  data.orderType = !bizagi.util.isEmpty(data.orderType) ? data.orderType : \"asc\";\n  data.totalPages = !bizagi.util.isEmpty(data.totalPages) ? data.totalPages : 0;\n\n  // Add paging stuff\n  var pages = [];\n  for (var i = 1; i <= data.totalPages; i++) {\n    pages.push({\n      number: i,\n      active: i == data.page });\n\n  }\n\n  // Build the html\n  return $.tmpl(templates,\n  $.extend(data, {\n    pages: pages,\n    getImage: function getImage(files) {\n      return self.getFileImage(files);\n    },\n    actions: params.actions,\n    getCaseId: function getCaseId(row) {\n      return row[0];\n    },\n    getEntityId: function getEntityId(row) {\n      return row[0];\n    },\n    getWorkItems: function getWorkItems(row) {\n      var workitemsData = \"[\";\n      var workitems = row[row.length - 1].workitems;\n      if (workitems && workitems.length > 0) {\n        for (var wi in workitems) {\n          if (wi > 0) {\n            workitemsData += \",\";\n          }\n          var wiInfo = \"{\\\"idWorkItem\\\":\";\n          wiInfo += workitems[wi].idWorkItem;\n          wiInfo += \",\\\"idTask\\\":\";\n          wiInfo += workitems[wi].idTask;\n          wiInfo += \"}\";\n          workitemsData += wiInfo;\n        }\n\n      }\n      workitemsData += \"]\";\n      return workitemsData;\n    } }));\n\n}), _defineProperty(_$$Class$extend, \"getEmptyFile\",\n\nfunction getEmptyFile() {\n  return \"/_layouts/Proxy/jquery/overrides/css/desktop/images/EmptyAsset.png\";\n  //return \"\"; //No Picture\n}), _defineProperty(_$$Class$extend, \"getFileImage\",\n\n\n\nfunction getFileImage(files) {\n  var self = this;\n\n  if (!files || files.length == 0) return self.getEmptyFile();\n  return files;\n}), _defineProperty(_$$Class$extend, \"getFile\",\nfunction getFile(files) {\n  var self = this;\n\n  if (!files || files.length == 0) return self.getEmptyFile();\n  return self.dataService.getFile(files[0]);\n}), _defineProperty(_$$Class$extend, \"removeWaitContainer\",\nfunction removeWaitContainer(container) {\n  if ($(container)) {\n    $(container).addClass(\"ui-bizagi-sharepoint-loading-container-hidden\");\n  }\n}), _defineProperty(_$$Class$extend, \"addWaitContainer\",\nfunction addWaitContainer(container) {\n  if ($(container)) {\n    $(container).removeClass(\"ui-bizagi-sharepoint-loading-container-hidden\");\n  }\n}), _defineProperty(_$$Class$extend, \"loadTemplate\",\n\nfunction loadTemplate(template, templateDestination) {\n  var self = this;\n\n  // Go fetch the template\n  return bizagi.templateService.getTemplate(templateDestination).\n  done(function (resolvedRemplate) {\n    self.templates[template] = resolvedRemplate;\n  });\n}), _defineProperty(_$$Class$extend, \"getFailServerErrorDeferred\",\n\nfunction getFailServerErrorDeferred(params, defer) {\n  var self = this;\n  var errorMessage = params.message;\n  var remoteSeverURL = \"\";\n  var errorTemplateName;\n  if (params.sharepointProxyPrefix.indexOf(\"URL\") != -1) {\n    remoteSeverURL = params.sharepointProxyPrefix.substr(params.sharepointProxyPrefix.indexOf(\"URL\") + 4, params.sharepointProxyPrefix.length);\n    errorTemplateName = \"bizagi.workportal.desktop.error-message-sharepoint\";\n  } else {\n    errorTemplateName = \"bizagi.workportal.desktop.error-message-portal\";\n  }\n  errorMessage = remoteSeverURL + \": \" + errorMessage;\n  self.loadTemplate(\"error-message\", bizagi.getTemplate(errorTemplateName)).\n  done(function (eTemplate) {\n    var content = self.content = $.tmpl(eTemplate, {\n      message: errorMessage,\n      address: params.helpAddress });\n\n\n    defer.resolve(content);\n\n  }).fail(function (msg) {\n    defer.resolve(\"<div>Unhandled error</div>\");\n  });\n\n}), _defineProperty(_$$Class$extend, \"getPaginationTemplate\",\nfunction getPaginationTemplate() {\n  return self.loadTemplate(\"pagination-template\", bizagi.getTemplate(\"inbox-common-pagination-inbox\"));\n}), _defineProperty(_$$Class$extend, \"publishShowRenderEvent\",\n\nfunction publishShowRenderEvent(event, webpart, params) {\n  // Check if the current render form can be changed\n  if (!!!event) {\n    alert(\"Event param cannot be undefined\");\n  }\n  //The webparts that not visible no receive events  \n  var deferRet = webpart.publish(\"ui-bizagi-can-change-activityform\");\n  if (deferRet) {\n    deferRet.done(function () {\n      // When the \"ui-bizagi-can-change-activityform\" event deferred is resolved, it means that we can change the activityform instance\n      // otherwise the deferred fails and nothing happens because we don't have fail implementation\n\n      // Publish the event so any other webpart could react to that\n      webpart.publish(event, params);\n    });\n  } else {\n    //Error autosave verification send error\n    console.log(\"autosave verification send error\");\n    //webpart.publish(event, params);\n  }\n}), _defineProperty(_$$Class$extend, \"isWebpartInIFrame\",\nfunction isWebpartInIFrame() {\n  try {\n    return window.self !== window.top;\n  } catch (e) {\n    return true;\n  }\n}), _defineProperty(_$$Class$extend, \"displayWebPartPopUpExternalIframe\",\n\nfunction displayWebPartPopUpExternalIframe(webpartName, params, callback, postMessageSocket) {\n  params.message = {};\n  var data = $.extend({}, params, {\n    workportal: null,\n    canvas: null,\n    whenInitialized: null,\n    event: \"postmessage-bizagi-openParentPopUp\",\n    message: {\n      webPartToDraw: webpartName,\n      iframeidentifier: postMessageSocket.iframeidentifier } });\n\n\n\n  postMessageSocket.send(data);\n}), _defineProperty(_$$Class$extend, \"displayWebPartPopUpinIFrame\",\nfunction displayWebPartPopUpinIFrame(webpartName, params, callback) {\n\n  var webpartObject;\n  // Publish the event so any other webpart could react to that\n  var mask = document.createElement(\"div\");\n  mask.className = \"containerPopUp\";\n  mask.style.height = \"100%\";\n\n  var popUpParams = params;\n\n  if (!mask.addEventListener) {\n    mask.attachEvent(\"onclick\", preClosePopUp);\n  } else {\n    mask.addEventListener(\"click\", preClosePopUp, false);\n  }\n\n  function preClosePopUp(ev, params) {\n    if (ev.eventPhase === 2) {\n      closePopUp(ev, params);\n    }\n  }\n\n  var canvas = document.createElement(\"div\");\n  canvas.className = \"activitiFormContainer\";\n  var closeCanvas = document.createElement(\"div\");\n  closeCanvas.className = \"closeCanvas\";\n\n  if (!closeCanvas.addEventListener) {\n    closeCanvas.attachEvent(\"onclick\", function (e, params) {\n      closePopUp(e, params);\n    });\n  } else {\n    closeCanvas.addEventListener(\"click\", function (e, params) {\n      closePopUp(e, params);\n    }, false);\n  }\n\n  canvas.appendChild(closeCanvas);\n  mask.appendChild(canvas);\n\n  var webpartCanvasDiv = document.createElement(\"div\");\n  webpartCanvasDiv.className = \"webpartCanvasDiv\";\n  webpartCanvasDiv.id = \"webpartCanvasPopUp\";\n  canvas.appendChild(webpartCanvasDiv);\n\n  var pathiFrame = \"\";\n  if (params.pathiFrame) {\n    pathiFrame = params.pathiFrame;\n  } else {\n    pathiFrame = window.location.href.substring(0, window.location.href.indexOf(\"jquery\"));\n  }\n\n  var queryStringParams = window.location.toString().split('?')[1];\n\n\n  pathiFrame = pathiFrame + \"jquery/webparts/desktop/portal/pages/webpart.htm\";\n  pathiFrame = pathiFrame + \"?type=\" + webpartName;\n  if (params.idCase) {\n    pathiFrame = pathiFrame + \"&idCase=\" + params.idCase;\n  }\n  if (params.idWorkitem) {\n    pathiFrame = pathiFrame + \"&idWorkitem=\" + params.idWorkitem;\n  }\n  if (params.idWfClass) {\n    pathiFrame = pathiFrame + \"&idWfClass=\" + params.idWfClass;\n  }\n  if (queryStringParams) {\n    pathiFrame = pathiFrame + \"&\" + queryStringParams;\n  }\n\n  pathiFrame = pathiFrame + \"&remoteServer=\" + window.location.toString();\n\n\n  //Aqui se agrega el iframe\n  var iframe = document.createElement(\"iframe\");\n  iframe.className = \"csswebpartIframePopUp\";\n  iframe.id = \"iframePopUp\";\n  iframe.src = pathiFrame;\n  iframe.resizeInPopUp = function (params) {\n    var self = this;\n    var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n    $(iframe).height(heightActivitiFormContainer);\n  };\n\n  webpartCanvasDiv.appendChild(iframe);\n  document.body.appendChild(mask);\n\n  iframe.resizeInPopUp(params);\n  $(window).resize(function () {\n    iframe.resizeInPopUp(params);\n  });\n\n  function closePopUp(ev, params) {\n    //if webpart has canHide event, call event canHide before\n\n    var postmessageSocket = new bizagi.postmessage({\n      remoteServer: pathiFrame,\n      destination: iframe.contentWindow,\n      origin: window });\n\n    postmessageSocket.receive = function (msg) {\n      //the canHide process is made in iframe\n      var params = msg.data;\n      if (params.event == \"postmessage-bizagi-closeIFramePopUp\") {\n        if (mask.parentNode) {\n          iframe.src = undefined;\n          mask.parentNode.removeChild(mask);\n          if (callback) {\n            callback(this, popUpParams);\n          }\n        }\n      }\n    };\n    var iframeclosemsg = {};\n    iframeclosemsg.event = \"postmessage-bizagi-canCloseIFramePopUp\";\n    postmessageSocket.send(iframeclosemsg);\n  }\n\n}), _defineProperty(_$$Class$extend, \"displayWebPartPopUp\",\nfunction displayWebPartPopUp(webpartName, params, callback) {\n  var webpartObject;\n  // Publish the event so any other webpart could react to that\n  var mask = document.createElement(\"div\");\n  mask.className = \"containerPopUp\";\n  mask.style.height = \"100%\";\n\n  var popUpParams = params;\n\n  if (!mask.addEventListener) {\n    mask.attachEvent(\"onclick\", preClosePopUp);\n  } else {\n    mask.addEventListener(\"click\", preClosePopUp, false);\n  }\n\n  function preClosePopUp(ev, params) {\n    if (ev.eventPhase === 2) {\n      closePopUp(ev, params);\n    }\n  }\n\n  function closePopUp(ev, params) {\n    //if webpart has canHide event, call event canHide before\n    if (webpartObject.canHide) {\n      $.when(webpartObject.canHide()).\n      done(function () {\n        var showCasesMSG = {\n          message: {} };\n\n        showCasesMSG.event = \"ui-bizagi-reload-cases\";\n\n        if (webpartObject.postmessageSocket) {\n          webpartObject.postmessageSocket.send(showCasesMSG);\n        } else {\n          var postmessageSocket = new bizagi.postmessage({\n            remoteServer: bizagi.readQueryString()[\"remoteServer\"],\n            destination: window.parent,\n            origin: window });\n\n          postmessageSocket.send(showCasesMSG);\n        }\n\n        mask.parentNode.removeChild(mask);\n        if (callback) {\n          callback(this, popUpParams);\n        }\n        webpartObject.destroy();\n      }).fail(function () {\n        mask.parentNode.removeChild(mask);\n        if (callback) {\n          callback(this, popUpParams);\n        }\n        webpartObject.destroy();\n      });\n    } else {\n      mask.parentNode.removeChild(mask);\n      if (callback) {\n        callback(this, popUpParams);\n      }\n      webpartObject.destroy();\n    }\n  }\n\n  var canvas = document.createElement(\"div\");\n  canvas.className = \"activitiFormContainer\";\n  var closeCanvas = document.createElement(\"div\");\n  closeCanvas.className = \"closeCanvas\";\n\n  if (!closeCanvas.addEventListener) {\n    closeCanvas.attachEvent(\"onclick\", function (e, params) {\n      closePopUp(e, params);\n    });\n  } else {\n    closeCanvas.addEventListener(\"click\", function (e, params) {\n      closePopUp(e, params);\n    }, false);\n  }\n\n  canvas.appendChild(closeCanvas);\n  mask.appendChild(canvas);\n\n  var webpartCanvasDiv = document.createElement(\"div\");\n  webpartCanvasDiv.className = \"webpartCanvasDiv\";\n  webpartCanvasDiv.id = \"webpartCanvasPopUp\";\n  canvas.appendChild(webpartCanvasDiv);\n\n  var webpartParams = $.extend({}, params, {\n    webpart: webpartName,\n    canvas: $(webpartCanvasDiv),\n    namespace: \"PopUp\",\n    data: null,\n    adjustButtonsToContent: true });\n\n\n  //add popUp in document\n  document.body.appendChild(mask);\n  //The element webpartCanvasDiv must be already added to document, for can call  bizagi.starWaiting\n  bizagi.startWaiting(webpartCanvasDiv);\n\n  params.workportal.executeWebpart(webpartParams).done(function (result) {\n    webpartObject = result.webpart;\n    closeCanvas.onclick = function (e, params) {\n      // callback(params);\n    };\n  });\n}), _defineProperty(_$$Class$extend, \"displayWebPartDialog\",\nfunction displayWebPartDialog(webpartName, params, callback) {\n  var webpartObject;\n  var dialogParams = params.dialogParams;\n  var canvas = document.createElement(\"div\");\n  canvas.className = \"activitiFormContainer\";\n  var webpartCanvasDiv = document.createElement(\"div\");\n  webpartCanvasDiv.className = \"webpartCanvasDiv\";\n  webpartCanvasDiv.id = \"webpartCanvasPopUp\";\n  canvas.appendChild(webpartCanvasDiv);\n  var webpartParams = $.extend({}, params, {\n    webpart: webpartName,\n    canvas: $(webpartCanvasDiv),\n    namespace: \"PopUp\",\n    data: null,\n    adjustButtonsToContent: true });\n\n  params.workportal.executeWebpart(webpartParams).done(function (result) {\n    webpartObject = result.webpart;\n    if (dialogParams.showCloseButton) {\n      dialogParams.buttons.push({\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click(p, a) {\n          webpartObject.content.dialog(\"close\");\n        } });\n\n    }\n    webpartObject.content.dialog(dialogParams);\n  });\n}), _$$Class$extend));\n\n\n/*\r\n                        *   Static Methods to configure webparts\r\n                        */\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.webparts = typeof bizagi.webparts !== \"undefined\" ? bizagi.webparts : {};\n\nbizagi.webparts.addConfigurationMessage = function (webpartParams, messageResourceName) {\n  var doc = this.ownerDocument;\n  var body = $(\"body\", doc);\n  var canvas = webpartParams.canvas || $(\"<div/>\").appendTo(body);\n  var errorTemplate = bizagi.getTemplate(\"bizagi.sharepoint.configurationerror\");\n  // Load template\n  $.when(bizagi.templateService.getTemplate(errorTemplate)).\n  then(function (template) {\n    $.tmpl(template, {\n      message: bizagi.localization.getResource(messageResourceName) }).\n    appendTo(canvas);\n\n  });\n};","var _bizagi$workportal$co;function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n/*\r\n                                                                                                                                                                                                                                     *   Name: BizAgi Workportal Widget Controller\r\n                                                                                                                                                                                                                                     *   Author: Diego Parra\r\n                                                                                                                                                                                                                                     *   Comments:\r\n                                                                                                                                                                                                                                     *   -   This script will define a base class to all widgets\r\n                                                                                                                                                                                                                                     */\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.widgets.widget\", {\n  BIZAGI_WORKPORTAL_WIDGET_INTEGRATION: \"widgetIntegration\",\n  BIZAGI_WORKPORTAL_WIDGET_WEBPART: \"webpart\",\n  BIZAGI_WORKPORTAL_WIDGET_INBOX: \"inbox\",\n  BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH: \"advanceSearch\",\n  BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL: \"homeportal\",\n  BIZAGI_WORKPORTAL_WIDGET_ACTIVITY: \"project.activity\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD: \"projectDashboard\",\n  BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID: \"inboxGrid\",\n  BIZAGI_WORKPORTAL_WIDGET_ROUTING: \"routing\",\n  BIZAGI_WORKPORTAL_WIDGET_SEARCH: \"search\",\n  BIZAGI_WORKPORTAL_WIDGET_RENDER: \"activityform\",\n  BIZAGI_WORKPORTAL_WIDGET_START_FORM: \"startForm\",\n  BIZAGI_WORKPORTAL_WIDGET_RENDERFORM: \"renderform\",\n  BIZAGI_WORKPORTAL_WIDGET_NEWCASE: \"newCase\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES: \"queries\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION: \"queriesDefinition\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT: \"queriesShortcut\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERYFORM: \"queryform\",\n  BIZAGI_WORKPORTAL_WIDGET_LISTCASES: \"listCases\",\n  BIZAGI_WORKPORTAL_WIDGET_ASYNC: \"async\",\n  BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME: \"genericiframe\",\n  BIZAGI_WORKPORTAL_WIDGET_SUBMENU: \"subMenu\",\n  BIZAGI_WORKPORTAL_WIDGET_PRINT: \"print\",\n  BIZAGI_WORKPORTAL_WIDGET_FONTSIZE: \"fontsize\",\n  BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION: \"oldrenderintegration\",\n  BIZAGI_WORKPORTAL_WIDGET_PAGE: \"page\",\n  BIZAGI_WORKPORTAL_WIDGET_ENTITIES: \"entities\",\n  BIZAGI_WORKPORTAL_WIDGET_REPORTS: \"reports\",\n  BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU: \"reportsMenu\",\n  BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART: \"reportsChart\",\n  BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS: \"smartfolders\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES: \"adminReassignCases\",\n  BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE: \"reassignCase\",\n  BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD: \"asyncECMUpload\",\n  BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE: \"processTree\",\n  BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE: \"entitiesTree\",\n  BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE: \"usersTable\",\n  BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG: \"activityLog\",\n  BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG: \"authenticationLog\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES: \"entityAdmin\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS: \"encryptPasswords\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS: \"userPendingRequests\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH: \"adminCaseSearch\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES: \"asyncActivities\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER: \"defaultsAssignUser\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS: \"transferCaseSecurityPermissions\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES: \"userProfiles\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS: \"adminAlarms\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES: \"userlicenses\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS: \"dimensions\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES: \"documentTemplates\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES: \"processes\",\n  BIZAGI_WORKPORTAL_WIDGET_START_PROCESS: \"startProcess\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES: \"businessPolicies\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE: \"languageAdmin\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE: \"businessPoliciesDecisionTable\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS: \"businessPoliciesPolitics\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES: \"businessPoliciesRules\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS: \"businessPoliciesTabs\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES: \"businessPoliciesVocabularies\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES: \"adminPreferences\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS: \"adminDisplayOptions\",\n  BIZAGI_WORKPORTAL_WIDGET_TREE: \"tree\",\n  BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY: \"graphicquery\",\n  BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW: \"processModeler\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION: \"adminUsers\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION: \"usersDelegation\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER: \"usersDelegationSearchUser\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS: \"adminStakeholders\",\n  BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS: \"events\",\n  BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE: \"release\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER: \"processDiagramHelper\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP: \"activityMapTooltip\",\n  BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY: \"usersummary\",\n  BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST: \"mySearchList\",\n  BIZAGI_WORKPORTAL_WIDGET_LOADFORM: \"loadForm\",\n  BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE: \"templates\",\n  BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV: \"dialognav\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS: \"holidays\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME: \"projectName\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS: \"oauth2Applications\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES: \"adhocProcesses\",\n  BIZAGI_WORKPORTAL_WIDGET_TIMELINE: \"timeline\",\n  BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER: \"adhocProcessModeler\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES: \"adhocEntities\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS: \"adhocUserGroups\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP: \"adhocBooleanExp\",\n  BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\n  BIZAGI_WORKPORTAL_WIDGET_PROFLY: \"adhocprofly\",\n  BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT: \"sessionTimeOut\",\n  BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED: \"sessionTimeOutExpired\",\n  BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY: \"userPrivacy\",\n  BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED: \"accessDenied\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES: \"adminBusinessPolices\",\n  BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL: \"usersModal\",\n  BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT: \"queriesManagement\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT: \"userPermissionReport\",\n  BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_DESCRIPTION_CONTENT: \"activityDescriptionContent\",\n  BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE: \"quickActionsExecute\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS: \"errorLogs\",\n  BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX: \"smartinbox\",\n  BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX: \"smartinboxAdmin\",\n  BIZAGI_WORKPORTAL_WIDGET_CANCEL_CASE: \"cancelCase\" }, (_bizagi$workportal$co = {\n\n\n  /*\r\n                                                                                   *   Constructor\r\n                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n    // Call base\n    this._super(workportalFacade, dataService);\n\n    // Set params\n    this.params = params;\n    if (params && params.menu) {\n      this.menu = params.menu;\n    }\n\n    this.observableElement = $({});\n\n    this.widgetReadyDeferred = new $.Deferred();\n\n    this.isBlocked = false;\n  },\n\n  /*\r\n     *   Publish an event so any controller can subscribe to it\r\n     */\n  publish: function publish(eventName, params) {\n    if (this.disposed) return null;\n    // Overrides base method to add referrer\n    $(document).triggerHandler(eventName, $.extend(params, {\n      referrer: this.getWidgetName() }));\n\n  },\n\n\n  /*\r\n     *   Change the current widget\r\n     */\n  changeWidget: function changeWidget(widgetName, params) {\n    var self = this;\n    params = params || {};\n    var widgetParams = $.extend(params, {\n      widgetName: widgetName });\n\n    self.publish(\"changeWidget\", widgetParams);\n  },\n\n  /*\r\n     *   Executes a workportal action\r\n     */\n  executeAction: function executeAction(actionName, params) {\n    var self = this;\n    params = params || {};\n    var actionParams = $.extend(params, {\n      action: actionName });\n\n    self.publish(\"executeAction\", actionParams);\n  },\n\n  /*\r\n     * Show graphic query\r\n     */\n  showGraphicQuery: function showGraphicQuery(data) {\n    var self = this;\n    /*This method is used for validate if the request is referd to process on the fly */\n    var processOnTheFly = data.isAdhoc;\n    if (processOnTheFly === true) {\n      bizagi.loader.start(\"processmodelerview\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW,\n          data: data,\n          modalParameters: {\n            title: \"Process viewer\",\n            refreshInbox: false },\n\n          maximizeOnly: true,\n          onClose: function onClose() {\n            bizagi.workportal.desktop.dialogStack.pop();\n          } });\n\n      });\n    } else\n    {\n      bizagi.loader.start(\"processviewer\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,\n          data: data,\n          modalParameters: {\n            title: self.getResource(\"render-graphic-query\"),\n            refreshInbox: false },\n\n          maximizeOnly: true,\n          onClose: function onClose() {\n            bizagi.workportal.desktop.dialogStack.pop();\n          } });\n\n      });\n    }\n  },\n\n  isProcessOnTheFlyCase: function isProcessOnTheFlyCase() {\n    return true;\n  },\n\n  showTimeLine: function showTimeLine(data) {\n    var self = this;\n    bizagi.loader.startAndThen(\"timeline\").then(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE,\n        data: data,\n        modalParameters: {\n          title: self.getResource(\"workportal-project-casedashboard-timeline\"),\n          refreshInbox: false },\n\n        maximizeOnly: true,\n        onClose: function onClose() {\n          bizagi.workportal.desktop.dialogStack.pop();\n        } });\n\n    });\n  },\n\n\n  /**\r\n      * open modal for selec an user\r\n      * @param {Deffered} def \r\n      */\n  showSelectUser: function showSelectUser(def) {\n    var self = this;\n    bizagi.loader.startAndThen(\"admin\").then(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,\n        data: {},\n        closeVisible: false,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-widget-usertable-search-user\"),\n          width: \"930px\",\n          id: \"SelectUser\" },\n\n        userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n        parentDef: def,\n        showBackButton: false,\n        onClose: function onClose() {\n          def.reject();\n        } });\n\n\n      $.when(def).done(function (userId, userName, guid) {\n        self.publish(\"closeCurrentDialog\");\n      });\n    });\n  } }, _defineProperty(_bizagi$workportal$co, \"showSelectUser\",\n\n\n\n\n\nfunction showSelectUser(def) {\n  var self = this;\n  bizagi.loader.startAndThen(\"admin\").then(function () {\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,\n      data: {},\n      closeVisible: false,\n      maximize: true,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"workportal-widget-usertable-search-user\"),\n        width: \"930px\",\n        id: \"SelectUser\" },\n\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def,\n      showBackButton: false,\n      onClose: function onClose() {\n        def.reject();\n      } });\n\n\n    $.when(def).done(function (userId, userName, guid) {\n      self.publish(\"closeCurrentDialog\");\n    });\n  });\n}), _defineProperty(_bizagi$workportal$co, \"routingExecute\",\n\nfunction routingExecute(element) {\n  // Executes routing action\n  if (element == undefined) {\n    return false;\n  }\n\n  var self = this;\n\n  var idCase = element.find(\"#idCase\").val() || self.params.idCase;\n  var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\n  var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\n  var idTask = element.find(\"#idTask\").val();\n  var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n  self.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkflow: idWorkflow,\n    idWorkItem: idWorkItem,\n    idTask: idTask,\n    eventAsTasks: eventAsTasks });\n\n\n  return true;\n}), _defineProperty(_bizagi$workportal$co, \"getWidgetName\",\n\n\n\n\n\nfunction getWidgetName() {\n  return this.Class.fullName;\n}), _defineProperty(_bizagi$workportal$co, \"sub\",\n\n\n\n\n\nfunction sub(event) {\n  // Gets events registered\n  //var events = $._data(this.observableElement[0], \"events\");\n  // If the events exist, ignore it\n  //if (!events || !events[event]) {\n  this.observableElement.off.apply(this.observableElement, arguments);\n  this.observableElement.on.apply(this.observableElement, arguments);\n  //}\n}), _defineProperty(_bizagi$workportal$co, \"unsub\",\n\n\n\n\nfunction unsub() {\n  this.observableElement.off.apply(this.observableElement, arguments);\n}), _defineProperty(_bizagi$workportal$co, \"pub\",\n\n\n\n\nfunction pub() {\n  return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n}), _defineProperty(_bizagi$workportal$co, \"pubDeadLockDetection\",\n\n\n\n\nfunction pubDeadLockDetection() {\n  var def = new $.Deferred();\n  if (!self.isBlocked) {\n    self.isBlocked = true;\n    var pubDef = this.pub.apply(this, arguments);\n    var queueDef = Array.isArray(pubDef) ? pubDef : [pubDef];\n    $.when.apply($, queueDef).done(function (data) {\n      self.isBlocked = false;\n      def.resolve();\n    });\n  } else {\n    def.reject();\n  }\n  return def.promise();\n}), _defineProperty(_bizagi$workportal$co, \"clean\",\n\n\n\n\nfunction clean() {\n  var self = this;\n\n  //remove events\n  if (this.observableElement) {\n    var events = $._data(this.observableElement[0], \"events\");\n\n    if (events) {\n      for (var event in events) {\n        if (event != \"notify\" &&\n        event != 'showDialogWidget' &&\n        event != 'showNotification') {\n          self.unsub(event);\n        }\n      }\n    }\n  }\n}), _defineProperty(_bizagi$workportal$co, \"isReady\",\n\nfunction isReady() {\n  return this.widgetReadyDeferred.promise();\n}), _defineProperty(_bizagi$workportal$co, \"setWidgetReady\",\n\nfunction setWidgetReady() {\n  this.widgetReadyDeferred.resolve();\n}), _defineProperty(_bizagi$workportal$co, \"getDateWithTimezone\",\n\n\n\n\n\n\n\nfunction getDateWithTimezone(format, timeZone, date) {\n  var moment = window.moment;\n  var _actualDate = function _actualDate() {\n    return new Date(moment().tz(timeZone).format());\n  },\n  _formatDate = function _formatDate() {\n    return new Date(moment.tz(date, format, timeZone).format());\n  };\n  return date ? _formatDate() : _actualDate();\n}), _bizagi$workportal$co));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Search Action\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will execute the search action\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.actions.action.extend(\"bizagi.workportal.actions.search\", {}, {\n\n  /*\r\n                                                                                  *   Executes the action\r\n                                                                                  *   Could return a deferred\r\n                                                                                  */\n  execute: function execute(params) {\n    var self = this;\n    // Set params reference\n    self.params = params;\n\n    // Referer parameters for render actions\n    var referrerParams = {\n      radNumber: $.trim(params.radNumber),\n      idWorkflow: \"\",\n      taskState: \"all\",\n      // Filter by favorites  only when we are searching all processes and favorites\n      onlyFavorites: false,\n      // Sort and order parameters\n      order: params.order || \"\",\n      orderFieldName: params.orderFieldName || \"\",\n      orderType: params.orderType || \"0\",\n      page: params.page || 1,\n      group: bizagiConfig.groupByCaseNumber ? \"T_RADNUMBER\" : null };\n\n\n    // Loads case workitems\n    $.when(\n    //self.dataService.searchCases(referrerParams)\n    self.dataService.getCustomizedColumnsData(referrerParams)).\n\n    done(function (data) {\n      bizagi.lstIdCases = data.cases.lstIdCases;\n      //  Hack json data :(\n      var i = 0;\n      $(data.cases.columnTitle).each(function (key, value) {\n        value[\"radNumber\"] = $.trim(params.radNumber);\n        if (value.order == \"T_idTask\") {\n          $(data.cases.rows).each(function (key2, value2) {\n            if (!self.isArray(value2[\"fields\"][i])) {\n              data[\"cases\"][\"rows\"][key2][\"fields\"][i] = {\n                \"workitems\": [{\n                  \"TaskName\": value2[\"fields\"][i],\n                  \"State\": data[\"cases\"][\"rows\"][key2][\"taskState\"] }] };\n\n\n            }\n          });\n        }\n        i++;\n      });\n      // Define radnumber for render actions bottons \n      bizagi.referrerParams = bizagi.referrerParams || {};\n      bizagi.referrerParams.radNumber = params.radNumber;\n      bizagi.referrerParams.page = params.page || 1;\n      data.IsFavorite = false;\n      data.IsOpen = false;\n      bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;\n      //bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n      // one result\n      if (data.cases.lstIdCases.length == 0) {\n        //show no results found\n        self.showNoResults(referrerParams);\n      } else if (data.cases.rows.length == 1) {\n\n        self.showSearch(data, params);\n\n\n      } else if (data.cases.rows.length >= 1) {\n        self.showSearch(data, referrerParams);\n      }\n    });\n  },\n\n  /*\r\n     *   Shows search results\r\n     */\n  showSearch: function showSearch(data, parameters) {\n    var self = this;\n    // Shows a dialog widget\n    bizagi.referrerParams.requestGlobalForm = true;\n\n    // define params to back button\n    bizagi.referrerParams.referrerBackButton = bizagi.referrerParams.referrerBackButton || bizagi.context.widget || bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n\n    self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n      data: data,\n      referrerParams: parameters }).\n    done(function () {\n      // Hide the container pagination:\n      if (bizagi.util.isEmpty($(\"#footer #casesPagination\").html().trim())) {\n        $(\"#footer #casesPagination\").hide();\n      }\n\n    });\n\n    if (bizagi.util.isTabletDevice()) {\n      $(\"#menu-items #search\").trigger(\"closePopUp\");\n    }\n\n    // Simulate a click on the button after a successful search\n    //  $('#menu-toggler').trigger('click');\n  },\n\n  showNoResults: function showNoResults(referrerParams) {\n    var self = this;\n    var originarlColor = $(\"#menuQuery\").css(\"color\");\n\n    $(\"#menuQuery\").css(\"color\", \"#f88f88\");\n    setTimeout(function () {\n      $(\"#menuQuery\").css(\"color\", originarlColor);\n    }, 5000);\n\n    if (bizagi.detectDevice() == \"smartphone_ios\" || bizagi.detectDevice() == \"smartphone_android\") {\n      self.showSearch({ \"noresults\": referrerParams.radNumber }, referrerParams);\n    }\n\n  },\n\n  /*\r\n     *   Show process\r\n     */\n  redirectToProcess: function redirectToProcess(idCase) {\n    var self = this;\n    // Executes routing action\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      onlyUserWorkItems: \"false\" });\n\n  },\n  /*\r\n     *   Misc method to format cell values\r\n     */\n  formatRequest: function formatRequest(value) {\n    return value;\n  },\n  /**\r\n     * Misc method to render categories\r\n     */\n  formatCategories: function formatCategories(value) {\n    return value;\n  },\n  isArray: function isArray(value) {\n    if (_typeof(value) == 'object') {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  isDate: function isDate(value) {\n    value = value || '';\n    var state = false;\n    var slash = typeof value == 'string' ? value.split(\"/\") : '';\n    try {\n      // Check format int/int/int\n      if (slash.length == 3) {\n        var date = new Date(value);\n        if (date.getYear() > 0) {\n          state = true;\n        }\n      }\n    } catch (e) {\n      state = false;\n    }\n\n    return state;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Render Widget Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base class to to define the render widget\r\n                                                                                                                                                                                                                                                                                                                                                                               *       the rendering module is loaded here\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.render\", {}, {\n\n  /*\r\n                                                                                  *   Returns the widget name\r\n                                                                                  */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER;\n  },\n\n  /*\r\n     *   Constructor\r\n     */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(params.idCase)) {\n\n      if (!bizagi.util.isEmpty(window.location.hash)) {\n        // Check in the hash\n        var hashParams = bizagi.util.getHashParams();\n\n        // Set the first hash param as the idCase\n        if (hashParams.length > 1) {\n          params.idCase = hashParams[1];\n          self.isConfiguredFromHash = true;\n        }\n\n        // Set the second hash param as the idWorkitem\n        if (hashParams.length > 2) {\n          params.idWorkitem = hashParams[2];\n        }\n      } else if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n\n        // Set idCase param from query string\n        if (queryString[\"idCase\"]) {\n          params.idCase = queryString[\"idCase\"];\n          self.isConfiguredFromHash = true;\n        } else\n\n          // Set guid param from query string\n          if (queryString[\"guid\"]) {\n            params.guid = queryString[\"guid\"];\n            self.isConfiguredFromHash = true;\n          }\n        // Set idWorkitem param from query string\n        if (queryString[\"idWorkitem\"]) {\n          params.idWorkitem = queryString[\"idWorkitem\"];\n        }\n      }\n    }\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"render\");\n    var summaryDeferred = new $.Deferred();\n    var details = {};\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(self.params.idCase) && bizagi.util.isEmpty(self.params.guid)) {\n      self.changeWidget(bizagi.workportal.currentInboxView);\n      return null;\n    }\n    details = self.params.idCase ?\n    {\n      idCase: self.params.idCase,\n      eventAsTasks: self.params.eventAsTasks,\n      onlyUserWorkItems: self.params.onlyUserWorkItems,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.params.isOfflineForm || false } :\n\n    {\n      guid: self.params.guid,\n      eventAsTasks: self.params.eventAsTasks,\n      onlyUserWorkItems: self.params.onlyUserWorkItems,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.params.isOfflineForm || false };\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(self.params.idWorkitem) && self.isConfiguredFromHash) {\n      if (!bizagi.util.isEmpty(self.params.idCase)) self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, { idCase: self.params.idCase });else\n      if (!bizagi.util.isEmpty(self.params.guid)) self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, { guid: self.params.guid });\n      return null;\n    }\n\n    // Render base template\n    self.content = $.tmpl(template);\n\n    // Render Form Tab\n    $.when(\n    self.dataService.summaryCaseDetails(details)).done(function (data) {\n\n      // Define global context into the comments section\n      // they need know global context to eval if stop interval\n      // or keep running, bizagi.util.setInterval\n      bizagi.util.setContext({\n        idCase: data.idCase || null,\n        caseNumber: data.caseNumber || null,\n        widget: self.getWidgetName(),\n        idWorkitem: self.params.idWorkitem || null,\n        idTask: self.params.idTask || null,\n        isOfflineForm: self.params.isOfflineForm || false });\n\n      data[\"params\"] = self.params;\n      //check if show event tab or not\n      if (data[\"countEvents\"] >= 1) {\n        for (var i = 0; i < data[\"currentState\"].length; i++) {\n          if (data[\"currentState\"][i][\"isEvent\"] == \"true\" && data[\"currentState\"][i][\"idWorkItem\"] == data.params.idWorkitem) {\n            data[\"countEvents\"] = data[\"countEvents\"] - 1;\n          }\n        }\n      }\n      data[\"showEvents\"] = data[\"countEvents\"] >= 1 ? true : false;\n\n      //check if the activity can be released\n      var releaseCurrentActivity = $.grep(data.currentState, function (activity) {\n        return activity.idWorkItem === data.params.idWorkitem && activity.allowReleaseActivity;\n      });\n      data[\"allowReleaseActivity\"] = releaseCurrentActivity.length === 1 ? releaseCurrentActivity[0].allowReleaseActivity : false;\n\n      summaryDeferred.resolve(self.renderSummary(data));\n    });\n\n\n    // Check if the content is already in dom\n    var includedInDom = self.content.parents(\"body\").length > 0;\n    if (includedInDom) {\n      self.renderForm();\n    } else {\n      // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\n      // (grids and uploads)\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\n\n        // Load render page\n        self.renderForm({\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          radNumber: self.params.radNumber,\n          withOutGlobalForm: self.params.withOutGlobalForm || false,\n          isOfflineForm: self.params.isOfflineForm || false,\n          messageForm: self.params.messageForm || \"\" });\n\n      });\n    }\n\n    // Synchronize deferreds to resolve method\n    return summaryDeferred.promise();\n  },\n\n  /*\r\n     *   Renders the summary component of the widget\r\n     */\n  renderSummary: function renderSummary(data) {\n    var self = this;\n    var content = self.getContent();\n    var cache = {};\n    var htmlContent = \"\";\n    var security = new bizagi.workportal.command.security(self.dataService);\n\n    data.showComments = true;\n\n    $.when(security.checkSecurityPerm(\"PrintableVersion\"), security.checkSecurityPerm(\"StateLog\"), security.checkSecurityPerm(\"GraphicQuery\")).done(function (PrintableVersion, StateLog, GraphicQuery) {\n      data.printableVersion = PrintableVersion;\n      data.stateLog = StateLog;\n      data.graphicQuery = GraphicQuery;\n\n      //Hide summary case tabs when idCase = 0\n      if (data.idCase == 0) {\n        setTimeout(function () {\n          $(\"div.ui-bizagi-wp-app-inbox-description-container \\\r\n                    div.ui-bizagi-loading-message \\\r\n                    div.ui-bizagi-loading-message-center \\\r\n                    div.ui-bizagi-loading-icon\").hide();\n        }, 1000);\n\n        return;\n      }\n\n      var summary = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(self.getComponentContainer(\"summary\"));\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n\n      // Delegate events for parent process\n      $(\"#details\", summary).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n      });\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        activate: function activate(event, ui) {\n          bizagi.util.setContext({\n            commentsFocus: false });\n\n          switch (ui.newPanel.prop('id')) {\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\", self.getComponentContainer(\"summary\"));\n                data.readOnly = $(ui.tab).data('isclosed') ? true : false;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.params.idCase })).\n\n                done(function (subprocess) {\n\n                  $.each(subprocess.subProcesses, function (key, value) {\n                    var custData = subprocess.subProcesses[key].custData;\n                    for (var i = 0; i < custData.length; i++) {\n                      if (custData[i] == null) {\n                        custData[i] = \"\";\n                      }\n                    }\n                  });\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", self.getComponentContainer(\"summary\")));\n                  cache[\"subprocess\"] = htmlContent;\n\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                  });\n                });\n              }\n              break;\n\n            case \"assignees\":\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.params.idCase })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  // Generates  lists of unique assignees for activities\n                  var activitiesUniqueList = [];\n                  $.each(assignees.activities.split(\", \"), function (i, el) {\n                    if ($.inArray(el, activitiesUniqueList) === -1) activitiesUniqueList.push(el);\n                  });\n                  assignees.activities = activitiesUniqueList.join(\", \");\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", self.getComponentContainer(\"summary\")));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.params.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", self.getComponentContainer(\"summary\")));\n                  cache[\"events\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                  });\n                });\n              }\n              break;\n\n            case \"activities\":\n              if (cache[\"activities\"] == undefined) {\n                $.when(\n                self.dataService.summaryActivities({\n                  data: data,\n                  idWorkitem: self.params.idWorkitem })).\n\n                done(function (activities) {\n                  activities[\"idCase\"] = self.params.idCase;\n                  activities[\"idWorkflow\"] = self.params.idWorkflow;\n\n                  //To solve QA-2124\n                  var defaultDateFormat = bizagi.localization.getResource(\"dateFormat\");\n                  var defaultTimeFormat = bizagi.localization.getResource(\"timeFormat\");\n                  var fullFormat = defaultDateFormat + ' ' + defaultTimeFormat;\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateActivities, activities);\n                  bizagi.util.formatInvariantDate(htmlContent, fullFormat);\n                  htmlContent.appendTo($(\"#activities\", self.getComponentContainer(\"summary\")));\n                  cache[\"activities\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n    });\n  },\n\n\n  /*\r\n     *   Renders the form component of the widget\r\n     */\n  renderForm: function renderForm(params) {\n    var self = this,resultRender;\n\n    var renderContainer = self.getComponentContainer(\"render\");\n    if (!params.withOutGlobalForm) {\n      // it has't activities and global form\n      var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n      var database = _typeof(self.dataService.database) != undefined ? self.dataService.database : \"\";\n\n\n      // Load render page\n      var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\n      // Executes rendering into render container\n      resultRender = rendering.execute($.extend(params, {\n        canvas: renderContainer,\n        menu: self.menu }));\n\n\n      // Attach handler to render container to subscribe for routing events\n      renderContainer.bind(\"routing\", function (context, triggerparams) {\n        // Executes routing action\n\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase,\n          fromTask: self.params.fromTask || self.params.idTask,\n          fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\n          isOfflineForm: self.params.isOfflineForm,\n          formsRenderVersion: self.params.formsRenderVersion,\n          onClose: function onClose() {\n            // If the user closes the dialog we need to redirect to inbox widget\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.currentInboxView });\n\n          } };\n\n        params = $.extend(params, triggerparams);\n        self.publish(\"executeAction\", params);\n      });\n\n      //\n      renderContainer.bind(\"oldrenderintegration\", function () {\n        if (bizagi.oldrenderevent == undefined) {\n          bizagi.oldrenderevent = true; // has been loaded\n          var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n          var eventer = window[eventMethod];\n          var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n          // Listen to message from child window\n          eventer(messageEvent, function (e) {\n            e.stopPropagation();\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n              idCase: e.data });\n\n          }, false);\n        }\n\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          onlyUserWorkItems: self.params.onlyUserWorkItems,\n          referrer: self.params.referrer,\n          eventAsTasks: self.params.eventAsTasks });\n\n\n      });\n    } else {\n      var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\n      var message = params.messageForm !== \"\" ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\n\n      if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var errorHtml = $.tmpl(errorTemplate, {\n        message: message });\n\n      // Remove loading icon from summary container\n      errorHtml.appendTo(renderContainer);\n\n      resultRender = $.Deferred();\n      resultRender.fail();\n    }\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n\n    return resultRender;\n  },\n\n\n  routingExecute: function routingExecute(element) {\n    // Executes routing action\n    if (element == undefined) {\n      return false;\n    }\n\n    var self = this;\n\n    var idCase = element.find(\"#idCase\").val() || self.params.idCase;\n    var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\n    var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\n    var idTask = element.find(\"#idTask\").val();\n    var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkflow: idWorkflow,\n      idWorkItem: idWorkItem,\n      idTask: idTask,\n      eventAsTasks: eventAsTasks });\n\n\n    return true;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Dispose the rendering binds\n    setTimeout(function () {\n      if (self.rendering) {\n        var renderContainer = self.rendering.canvas;\n        renderContainer.off();\n        self.rendering.dispose();\n      }\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Desktop List Cases implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Kevin Alvarado\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Used for Search, Queries Result and InboxGrid Desktop\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Because they share show cases as list \r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.listCases\", {}, {\n  /*\r\n                                                                                     *   Returns the widget name\r\n                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LISTCASES;\n  },\n\n  /**\r\n     * Set the table with the fixed thead\r\n     * @param {Json} params TableElement,groupByCaseNumber,floatOptions\r\n     */\n  setTableHeadFixed: function setTableHeadFixed(params) {\n    params.TableElement.floatThead(params.floatOptions);\n\n    if (params.groupByCaseNumber && bizagi.util.isIE()) {\n      params.TableElement.find(\"tbody > tr.ui-bizagi-wp-app-inbox-grouped-trtag-hide\").hide();\n    }\n  },\n  /**\r\n     * create a new instance and start to show the checkboxGroup for each activity\r\n     */\n  _startQuickActions: function _startQuickActions() {\n    var self = this,\n    _QActionsStared = self.quickActionsInstance !== undefined,\n    _params = {\n      getContainerSelector: self.getQuickActionContainerSelector.bind(self),\n      checkAllSelector: self.getQuickActionCheckAllContainerSelector(),\n      refreshShowedResults: self.updateResults.bind(self) };\n\n    if (!_QActionsStared)\n    self.quickActionsInstance = new bizagi.workportal.widgets.quickActions(self.workportalFacade, self.dataService, _params);\n  },\n\n  /**\r\n      * Refresh page results\r\n      */\n  updateResults: function updateResults() {\n    var self = this;\n    var _params = bizagi.util.tryCatch(function () {return bizagi.referrerParams.changeProcessOptions;}, {});\n    self.changeProcess(_params);\n  },\n\n  /**\r\n      * render quickActions in parentTemplate\r\n      * @param {Jquery Template} parentTemplate \r\n      */\n  _QuickActionsRenderIn: function _QuickActionsRenderIn(parentTemplate, workItemsInfo, quickActions) {\n    var self = this,\n    _QActionsContainer = parentTemplate.find(\"#contentQuickActions\");\n\n    self.quickActionsInstance.setDataToExecute(workItemsInfo, quickActions);\n    self.quickActionsInstance.renderIn(_QActionsContainer);\n    self.quickActionsInstance.renderCheckboxGroup(parentTemplate);\n  },\n\n  /**\r\n      * Filter the data from the workItems to send to QuickAction Widget.\r\n      * Return a dictionary by the workItem id as key and its information as value.\r\n      * @param {*} headers\r\n      * @param {*} rows\r\n      */\n  _getWorkItemsInfo: function _getWorkItemsInfo(headers, rows) {\n    var self = this,\n    _finalWorkItems = {};\n\n    var indexWorkItems = self._getIndexFromTableColumn(headers, \"order\", \"T_IDTASK\");\n    var indexCaseNumber = self._getIndexFromTableColumn(headers, \"order\", \"T_RADNUMBER\");\n\n    for (var j = 0; j < rows.length && indexWorkItems !== -1; j++) {\n      var _rowInfo = rows[j].fields,\n      _rowWorkItems = _rowInfo[indexWorkItems].workitems;\n\n      for (var k = 0; k < _rowWorkItems.length && indexCaseNumber !== -1; k++) {\n        var _workItem = _rowWorkItems[k];\n\n        _workItem.idCase = rows[j].id;\n        _workItem.caseNumber = _rowInfo[indexCaseNumber];\n        _finalWorkItems[_workItem.idWorkItem] = _workItem;\n      }\n    }\n\n    return _finalWorkItems;\n  },\n\n  /**\r\n      * Get the index of the column for workItems\r\n      */\n  _getIndexFromTableColumn: function _getIndexFromTableColumn(columnTitle, columnName, name) {\n    return columnTitle.findIndex(function (column) {\n      return column[columnName].toUpperCase() === name;\n    });\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionCheckAllContainerSelector: function getQuickActionCheckAllContainerSelector() {\n    return \"#ui-quickActions-all-processes\";\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionContainerSelector: function getQuickActionContainerSelector(id) {\n    return \"#ui-quickActions-checkbox-\" + id;\n  },\n\n  /*\r\n     *   Shows a popup with the case information\r\n     */\n  showCase: function showCase(idCase, idWorkflow) {\n    var self = this;\n    var content = self.getContent();\n    var caseSummaryContainer = $(\"#contentDesc\", content);\n    var cache = {};\n    var htmlContent = \"\";\n\n    // Update internal variable\n    self.idCase = idCase;\n\n    caseSummaryContainer.empty();\n\n    // Don't search data when there is no case\n    if (self.idCase == 0) {\n      return;\n    }\n\n    // Render Form Tab\n    $.when(self.dataService.summaryCaseDetails({\n      idCase: self.idCase })).\n\n    done(function (data) {\n      var adhocProcessId = null;\n      var isAdhoc = false;\n      if (!data.isAdhocProcess || typeof data.isAdhocProcess === 'undefined') data.isAdhocProcess = false;\n      if (data.isAdhocProcess) {\n        adhocProcessId = data.idAdhocProcess;\n        isAdhoc = true;\n      }\n      data.hasComments = data.hasComments == 'true' ? true : false;\n\n      // Get security\n      var security = new bizagi.workportal.command.security(self.dataService);\n      data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\n\n      data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\n      data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\n\n      if (data.currentState && data.currentState.length > 0) {\n        data.currentState.forEach(function (currentState) {\n          if (!currentState.idTask) {\n            currentState.idTask = 0;\n          }\n          if (!currentState.state) {\n            currentState.state = currentState.displayName || \" \";\n          }\n        });\n      }\n\n      if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\n        data.process = false;\n      }\n\n      if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\n        data.processPath = false;\n      }\n\n\n      var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\n      self.callTaskDescription(data, renderedTemplate);\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n\n      // Delegate events for parent process\n      $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n        caseSummaryDialog.dialog('close');\n      });\n\n      var caseSummaryDialog = renderedTemplate;\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        \"activate\": function activate(event, ui) {\n          var panel = ui == undefined ? \"formSummary\" : ui.newPanel.attr('id');\n          switch (panel) {\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\");\n                data.readOnly = true;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"formSummary\":\n              if (cache[\"formSummary\"] == undefined) {\n                var canvas = $(\"#formSummary\", caseSummaryContainer);\n\n                // Define action when render form has not been migrated\n                canvas.bind(\"oldrenderintegration\", function (e) {\n                  if (e.isPropagationStopped()) {\n                    return;\n                  }\n                  e.stopPropagation();\n\n                  var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\n                  var data = {};\n\n                  bizagi.oldrenderevent = true; // has been loaded\n                  var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                  var eventer = window[eventMethod];\n                  var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n                  // Listen to message from child window\n                  eventer(messageEvent, function (e) {\n                    e.stopPropagation();\n                    self.publish(\"executeAction\", {\n                      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                      idCase: e.data });\n\n                  }, false);\n\n                  // Define wirkitem and idtask\n                  $.when(self.dataService.getWorkitems({\n                    idCase: self.idCase,\n                    onlyUserWorkItems: true,\n                    eventAsTasks: true })).\n                  done(function (getWorkitems) {\n                    // verify workitem, in some cases these variables are not available\n                    if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n                      // Case Open\n                      var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n                      var idTask = getWorkitems.workItems[0]['idTask'];\n\n                      for (i = 0; i < getWorkitems.workItems.length; i++) {\n                        if (getWorkitems.workItems[i]['idCase'] == self.idCase) {\n                          idWorkitem = getWorkitems.workItems[i]['idWorkItem'];\n                          idTask = getWorkitems.workItems[i]['idTask'];\n                          break;\n                        }\n                      }\n\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n                    } else {\n                      // Case closed\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n                    }\n\n                    // Render content\n                    canvas.empty();\n                    $.tmpl(template, data).appendTo(canvas);\n                    //Set styles\n                    self.iframeOldRender($(\"iframe\", canvas));\n                  });\n                });\n\n                var params = {\n                  idCase: self.idCase };\n\n\n                $.when(self.dataService.getCaseFormsRenderVersion(params)).\n                done(function (formsVersion) {\n                  if (formsVersion.formsRenderVersion == 1) {\n                    canvas.trigger(\"oldrenderintegration\");\n                  } else {\n                    $.when(\n                    self.renderSummaryForm($(\"#formSummary\", renderedTemplate))).\n                    done(function () {\n                      htmlContent = $(\"#formSummary\", renderedTemplate).html();\n                      cache[\"formSummary\"] = htmlContent;\n                    });\n                  }\n                });\n              }\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.idCase })).\n\n                done(function (subprocess) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\n                  cache[\"subprocess\"] = htmlContent;\n\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;\n            case \"assignees\":\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.idCase,\n                  preview: true })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", renderedTemplate));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", renderedTemplate));\n                  cache[\"events\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n\n\n      // jquery UI Button work on it button\n      $(\".workonitRow\", renderedTemplate).button();\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", renderedTemplate).click(function (event) {\n        var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Add click to view workflow\n      $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n        if (isAdhoc) {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: adhocProcessId });\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n      });\n\n\n\n      // Bind events for events and process on summary case\n      $(\".workonitRow\", renderedTemplate).click(function () {\n        // Executes routing action\n        caseSummaryDialog.dialog('close');\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: data.idCase,\n          idWorkflow: idWorkflow,\n          idTask: $(this).parent().find(\"#idTask\").val(),\n          idWorkItem: $(this).parent().find(\"#idWorkItem\").val() });\n\n      });\n\n      // Set buttons\n      var buttons = {};\n      buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function () {\n        caseSummaryContainer.empty();\n        renderedTemplate.remove();\n        $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n      };\n\n      caseSummaryDialog.dialog({\n        modal: true,\n        title: data.process,\n        width: 1000,\n        height: 600,\n        draggable: true,\n        resizable: true,\n        buttons: buttons,\n        close: function close() {\n          caseSummaryContainer.empty();\n          renderedTemplate.remove();\n          $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n        } });\n\n\n    });\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription(data, summary) {\n    var self = this;\n    var width = 720;\n    var taskDescriptionParams = {\n      classNeedsModal: \"task_description_needs_modal\",\n      width: width };\n\n    new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams).renderManyTasksDescription(data.currentState, summary);\n  },\n\n\n  /*\r\n     *   Renders the summary form inside a given container\r\n     */\n  renderSummaryForm: function renderSummaryForm(container) {\n    var self = this;\n\n    var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ?\n    self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      // Load render page\n      var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n      // Executes rendering into render container\n      rendering.execute({\n        canvas: container,\n        summaryForm: true,\n        idCase: self.idCase });\n\n\n      // Keep reference to rendering facade\n      self.renderingFacade = rendering;\n\n      // Resize layout\n      setTimeout(function () {\n        self.resizeLayout();\n      }, 1000);\n    });\n  },\n\n  /**\r\n      * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n      */\n  isAvailableTimelineByProcessType: function isAvailableTimelineByProcessType(isAdhocProcess) {\n    return !isAdhocProcess ||\n    isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}\n/*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Workportal Render Widget Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base class to to define the render widget\r\n                                                                                                                                                                                                                                                                                                                                                                                *       the rendering module is loaded here\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.renderform\", {}, {\n\n  /*\r\n                                                                                       *   Returns the widget name\r\n                                                                                       */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM;\n  },\n\n  /*\r\n      *   Constructor\r\n      */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(params.idForm)) {\n\n      if (!bizagi.util.isEmpty(window.location.hash)) {\n        // Check in the hash\n        var hashParams = bizagi.util.getHashParams();\n\n        // Set the first hash param as the idCase\n        if (hashParams.length > 1) {\n          params.idCase = hashParams[1];\n          self.isConfiguredFromHash = true;\n        }\n\n        // Set the second hash param as the idWorkitem\n        if (hashParams.length > 2) {\n          params.idWorkitem = hashParams[2];\n        }\n      } else if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n\n        // Set idCase param from query string\n        if (queryString[\"idEntity\"]) {\n          params.idEntity = queryString[\"idEntity\"];\n          self.isConfiguredFromHash = true;\n        }\n\n        // Set idWorkitem param from query string\n        if (queryString[\"surrogateKey\"]) {\n          params.surrogateKey = queryString[\"surrogateKey\"];\n        }\n      }\n    }\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /*\r\n      *   Renders the content for the current controller\r\n      *   Returns a deferred because it has to load the current user\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"renderform\");\n    var summaryDeferred = new $.Deferred();\n\n    // Check if the required params are filled\n    if (bizagi.util.isEmpty(self.params.idForm)) {\n      self.changeWidget(bizagi.workportal.currentInboxView);\n      return null;\n    }\n\n    // Render base template\n    self.content = $.tmpl(template);\n\n    // Check if the content is already in dom\n    var includedInDom = self.content.parents(\"body\").length > 0;\n    if (includedInDom) {\n      self.renderForm();\n    } else {\n      // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\n      // (grids and uploads)\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\n\n        // Load render page\n        self.renderForm({\n          idEntity: self.params.idEntity,\n          surrogateKey: self.params.surrogateKey });\n\n      });\n    }\n  },\n\n  /*\r\n      *   Renders the form component of the widget\r\n      */\n  renderForm: function renderForm(params) {\n    var self = this;\n\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n    // Load render page\n    var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n    var renderContainer = self.getComponentContainer(\"render\");\n\n    // Executes rendering into render container\n    rendering.execute($.extend(params, {\n      canvas: renderContainer }));\n\n\n    // Attach handler to render container to subscribe for routing events\n    renderContainer.bind(\"routing\", function () {\n      // Executes routing action\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        onClose: function onClose() {\n          // If the user closes the dialog we need to redirect to inbox widget\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.currentInboxView });\n\n        } });\n\n    });\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Desktop Print Version Widget Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Edward Morales\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will provide desktop overrides to implement the print version\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Auto extend\nbizagi.workportal.widgets.print.extend(\"bizagi.workportal.widgets.print\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"print\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\").concat(\"#bz-wp-widget-print\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n    // Load render page\n    var facade = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n    //Print all grid rows\n    var configParams = { p_all_rows: 1000000 };\n\n    $.when(facade.execute($.extend({\n      canvas: content,\n      printversion: true },\n    $.extend(self.params.params, configParams)))).done(function () {\n\n      // Remove Tabs elements\n      self.formatTabs();\n\n      // Remove Group elements\n      self.formatGroups();\n\n      // Add case details only of idCase is available\n      if (self.params.params.idCase) {\n        self.appendCaseDetails();\n      }\n\n      // Remove events to ECM control\n      self.formatECM();\n\n      // Remove events to button control\n      self.formatButton();\n\n      // format grid\n      self.formatGrid();\n\n      // format renders\n      self.formatRenderContainer();\n\n      // Remove bottons save and next\n      $(\".ui-bizagi-button-container\", content).remove();\n\n    });\n  },\n\n  formatTabs: function formatTabs() {\n    var self = this,\n    i = 0,\n    control = self.getContent(),\n    tabElement = $('.ui-tabs', control);\n\n    // Destroy tabs\n    $.each(tabElement, function (ind, element) {\n\n      // Reorder tabs content\n      var ul = $('>ul', $(element)); // header elements\n      var labels = $('>div', $(element)); // page elements\n\n      var formatContent = $(\"<div>\");\n      $.each($('li', ul), function (i) {\n        // Select all tabs element to force the content loading\n        $(element).tabs(\"option\", \"active\", i);\n\n        // add header to final content\n\n        $(formatContent).append('<h3>' + $(this).text() + '</h3>');\n\n        // Add content to final content\n        $(formatContent).append(labels[i++]);\n      });\n\n      // Empty old content and append formated\n      $(element).empty();\n      $(element).append(formatContent);\n      $(element).tabs(\"destroy\");\n    });\n  },\n\n  /* APPEND CASE DETAILS\r\n     =====================================================*/\n  appendCaseDetails: function appendCaseDetails() {\n    var self = this;\n    var control = self.getContent();\n\n    self.dataService.summaryCaseDetails({\n      idCase: self.params.params.idCase }).\n    done(function (data) {\n\n      var getState = function getState(idWorkItem, currentState) {\n        var state = \"\";\n        $.each(currentState, function (key, value) {\n          if (value.idWorkItem == idWorkItem) {\n            state = value.state || value.displayName;\n          }\n        });\n        return state;\n      };\n      // Process Metadata\n      var $caseDetails = $('<ul></ul>').addClass('ui-bz-print-case-details');\n\n      // Case Number\n      $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-case-number') + ' ' + data.caseNumber).appendTo($caseDetails);\n\n      // task\n      if (self.params && self.params.params && self.params.params.idWorkitem != 0) {\n        $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-activities-name') + ' ' + getState(self.params.params.idWorkitem, data.currentState)).appendTo($caseDetails);\n      }\n      // Created by\n      $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-created-by') + ' ' + data.createdBy.Name).appendTo($caseDetails);\n\n      // Creation date\n      $('<li></li>').html(self.resources.getResource('workportal-widget-inboxcommon-creation-date') + '<span class=\\\"formatDate\\\">' + data.creationDate + \"</span>\").appendTo($caseDetails);\n\n      // State expires on\n      if (typeof data.estimatedSolutionDate != \"undefined\") {\n        $('<li></li>').html(self.resources.getResource('workportal-widget-inboxcommon-state-expires-on') + '<span class=\\\"formatDate\\\">' + data.estimatedSolutionDate + \"</span>\").appendTo($caseDetails);\n      }\n\n      function setProcess(process) {\n        $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-process') + ' ' + process).appendTo($caseDetails);\n      }\n      // Process\n      if (data.idPlan) {\n        $.when(self.dataService.getPlan({ idPlan: data.idPlan })).done(function (responsePlan) {\n          setProcess(responsePlan.name);\n        });\n      } else\n      {\n        setProcess(data.process);\n      }\n\n      // Process path\n      if (data.processPath && data.processPath !== \"undefined\") {\n        $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-process-path') + ' ' + data.processPath).appendTo($caseDetails);\n      }\n\n      // Append data\n      $('.ui-bizagi-container:first', control).prepend($caseDetails);\n\n      //Format dates\n      bizagi.util.formatInvariantDate(control, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n    });\n  },\n\n  formatGroups: function formatGroups() {\n    var self = this,\n    control = self.getContent(),\n    container = $('h3.ui-bizagi-container-group-header', control);\n\n    $.each(container, function () {\n      var containerText = $(this).text();\n\n      // Get html to container and convert to plain text\n      $(this).empty();\n      $(this).append(containerText);\n    });\n  },\n\n\n  /**\r\n     * Format ECM control\r\n     */\n  formatECM: function formatECM() {\n    var self = this,\n    control = self.getContent(),\n    container = $('.ui-bizagi-render-upload', control);\n\n    $(container).bind('ecmLoaded', function (cont) {\n      var image = $('img', cont.container);\n      var file = $(\".filename a:last\", cont.container);\n      var value = $(file).parent('li').text().replace(/^\\s+|\\s+$/g, \"\");\n\n      // Remove click event to image\n      image.unbind('click');\n\n      // Remove click event to link an parse value\n      file.unbind('click');\n      $(file).parent('li').text(value);\n\n    });\n  },\n\n  /**\r\n     * Format Button Control\r\n     */\n  formatButton: function formatButton() {\n    var self = this,\n    control = self.getContent(),\n    buttons = $('.ui-bizagi-render-button', control);\n\n    $.each(buttons, function (k, button) {\n      var value = $(button).val();\n      var parentContainer = $(button).parent();\n      $(parentContainer).empty();\n      $(parentContainer).append(\"<div class='ui-bizagi-render-button'>\" + value + \"</div>\");\n    });\n  },\n\n  /**\r\n     *  Format Grid Control\r\n     */\n  formatGrid: function formatGrid() {\n    var self = this,\n    control = self.getContent(),\n    tableControl = $('.ui-bizagi-grid-table', control);\n    pageContent = $('.ui-pg-table', control),\n    closeButton = $('.ui-jqgrid-titlebar-close', control);\n\n    // Clean paginator\n    /*$.each(pageContent, function () {\r\n    $(\"td:not[align='left'],td:not[align='center']\", $(this)).remove();\r\n    });*/\n\n    $(\"th.ui-bizagi-column-hidden, td.ui-bizagi-column-hidden, th.ui-bizagi-grid-key, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother\", control).remove();\n\n    //Remove click event\n    $(\"[data-action], ul li, .ui-bizagi-grid-column, tr, th\", tableControl).unbind(\"click\");\n    // Remove close button\n    $(closeButton).remove();\n  },\n\n  /**\r\n     *   Format Render Style\r\n     */\n\n  formatRenderContainer: function formatRenderContainer() {\n    var self = this,\n    control = self.getContent();\n    $('.ui-bizagi-notifications-container', control).remove();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: Bizagi Workportal Desktop HomePortal Controller\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Manuel Mejia\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n/**\r\n                                                                                                                                                                                                                                                                                                                                                                                   *  CD: Case Dashboard, example: toLeftSidebarCD: To left sidebar Case dashboard\r\n                                                                                                                                                                                                                                                                                                                                                                                   */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.homeportal\", {\n  contexts: {\n    \"HOME\": {\n      widgets: {\n        \"dashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.dashboard\" },\n\n        \"stuff\": {\n          \"layout\": \"dashboard\",\n          \"name\": \"bizagi.workportal.widgets.stuff\",\n          \"canvas\": \"stuff\" },\n\n        \"plans\": {\n          \"layout\": \"dashboard\",\n          \"name\": \"bizagi.workportal.widgets.decontextualized.plans\",\n          \"canvas\": \"plans\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebarhome\" },\n\n        \"usersummary\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.usersummary\",\n          \"canvas\": \"content1\" },\n\n        \"myshortcuts\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.shortcuts\",\n          \"canvas\": \"content2\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"TEMPLATEENGINE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.templates\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"paginator\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"canvas\": \"paginator\" },\n\n        \"sortbar\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.sortbar\",\n          \"canvas\": \"sortbar\" },\n\n        \"mysearchfilter\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.mysearchfilter\",\n          \"canvas\": \"mysearchfilter\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"stuff\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.stuff\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"ENTITY-ENGINE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.templates\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"stuff\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.stuff\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"SEARCH-ENGINE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.templates\" },\n\n        \"paginator\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"canvas\": \"paginator\" },\n\n        \"sortbar\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.sortbar\",\n          \"canvas\": \"sortbar\" },\n\n        \"mysearchfilter\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.mysearchfilter\",\n          \"canvas\": \"mysearchfilter\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"mysearchcriteria\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.mysearchcriteria\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n\n    \"CASES-TEMPLATE-VIEW\": {\n      widgets: {\n        \"templates\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.casestemplate\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"paginator\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"canvas\": \"paginator\" },\n\n        \"sortbar\": {\n          \"layout\": \"templates\",\n          \"name\": \"bizagi.workportal.widgets.sortbar\",\n          \"canvas\": \"sortbar\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"proccesseslist\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.processeslist\",\n          \"canvas\": \"content1\" },\n\n        \"filtercases\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.filtercases\",\n          \"canvas\": \"sidebarfooter\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n    \"PLANS-VIEW\": {\n      widgets: {\n        \"topmenu\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.plans.topmenu\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"manager\": {\n          \"layout\": \"topmenu\",\n          \"name\": \"bizagi.workportal.widgets.plans.manager\",\n          \"canvas\": \"plansList\" },\n\n        \"sidebar\": {\n          \"layout\": \"leftsidebar\",\n          \"name\": \"bizagi.workportal.widgets.sidebar\" },\n\n        \"filters\": {\n          \"layout\": \"sidebar\",\n          \"name\": \"bizagi.workportal.widgets.plans.filters\",\n          \"canvas\": \"content1\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false } },\n\n    //CONTEXTS CASE DASHBOARD\n    \"ACTIVITY\": {\n      widgets: {\n        activity: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.activity\",\n          canvas: \"contentprincipal\" },\n\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent1\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent3\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent4\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent5\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent6\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontent7\" },\n\n        relatedPlan: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"OVERVIEW\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        overview: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.overview\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent1\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent3\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent4\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent5\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent6\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontent7\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"COMMENTS\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        discussions: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.discussions\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        discussionSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent3\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent4\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent5\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent6\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent7\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"FILES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        files: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.files\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        filesPreview: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.filesPreview\",\n          canvas: \"sidebarcontent1\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent3\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent4\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent5\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent6\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent7\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"TIMELINE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"timeline\": {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.timeline\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        \"timelineSidebar\": {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.timeline.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent3\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent4\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent5\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent6\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent7\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontentextra\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    //CONTEXTS FOR PLAN\n    \"PLANCREATE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        plan: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        caseState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.caseState\",\n          canvas: \"sidebarcontent1\" },\n\n        activityState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activityState\",\n          canvas: \"sidebarcontent2\" },\n\n        activityDescription: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.description\",\n          canvas: \"sidebarcontent3\" },\n\n        processState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.processState\",\n          canvas: \"sidebarcontent4\" },\n\n        users: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.users\",\n          canvas: \"sidebarcontent5\" },\n\n        events: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.events\",\n          canvas: \"sidebarcontent6\" },\n\n        subprocesses: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.subprocesses\",\n          canvas: \"sidebarcontent7\" },\n\n        \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true } },\n\n    \"PLANOVERVIEW\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        planActivities: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan.activities\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANACTIVITIES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        planActivities: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan.activities\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANFILES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        files: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.files\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        filesPreview: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.filesPreview\",\n          canvas: \"sidebarcontent1\" },\n\n        empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\n        empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\n        empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\n        empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" },\n        empty7: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANCOMMENTS\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        discussions: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.discussions\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        discussionSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent3\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent4\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent5\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANTIMELINE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"timeline\": {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.timeline\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        empty1: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\n        empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\n        empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\n        empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\n        empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" },\n        empty7: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" } },\n\n      nav: { level: 1 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"PLANSIDEBAR\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"EDITACTIVITY\": {\n      widgets: {\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitiesForm: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.desktop.widgets.project.plan.activities.form\",\n          canvas: \"sidebarcontent1\" },\n\n        empty1: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" },\n        empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\n        empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\n        empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\n        empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" } },\n\n      nav: { level: 0, refreshLastItemBreadcrumb: false },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    //CONTEXTS FOR ACTIVITY PLAN\n    \"ACTIVITYPLAN\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        activity: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.activity\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent1\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent3\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent5\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent6\" },\n\n        relatedPlan: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.activity.plan.sidebar\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANCREATE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        plan: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent1\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent3\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent5\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent6\" },\n\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" } },\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANOVERVIEW\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        overview: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.plan.activities\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        planSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        planAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.action\",\n          canvas: \"sidebarcontent1\" },\n\n        planState: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.state\",\n          canvas: \"sidebarcontent3\" },\n\n        planProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        planTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.time\",\n          canvas: \"sidebarcontent5\" },\n\n        planParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        planUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANCOMMENTS\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        discussions: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.discussions\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        discussionSidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\n          canvas: \"sidebarcontent1\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent3\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent4\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent5\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANFILES\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        files: {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.files\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        filesPreview: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.filesPreview\",\n          canvas: \"sidebarcontent1\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent3\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent4\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent5\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent6\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent7\" } },\n\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"ACTIVITYPLANTIMELINE\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.left.sidebar\" },\n\n        \"menu\": {\n          layout: \"leftSidebar\",\n          name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\n          canvas: \"contentsidebar\" },\n\n        \"contentDashboard\": {\n          \"layout\": \"content\",\n          \"name\": \"bizagi.workportal.widgets.project.content.dashboard\" },\n\n        \"timeline\": {\n          layout: \"contentDashboard\",\n          name: \"bizagi.workportal.widgets.project.timeline\",\n          canvas: \"contentprincipal\" },\n\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.right.sidebar\" },\n\n        activitySidebar: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\n          canvas: \"sidebarcontentextra\" },\n\n        activityAction: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.action\",\n          canvas: \"sidebarcontent1\" },\n\n        activityTime: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.time\",\n          canvas: \"sidebarcontent3\" },\n\n        activityProgress: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\n          canvas: \"sidebarcontent4\" },\n\n        activityParent: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\n          canvas: \"sidebarcontent5\" },\n\n        activityUsers: {\n          layout: \"rightSidebar\",\n          name: \"bizagi.workportal.widgets.project.plan.activity.users\",\n          canvas: \"sidebarcontent6\" },\n\n        empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" } },\n\n      nav: { level: 0 },\n      belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false } },\n\n    \"REFRESHALL\": {\n      widgets: {\n        \"leftSidebar\": {\n          layout: \"leftsidebar\",\n          name: \"bizagi.workportal.widgets.dummy\" },\n\n        \"contentDashboard\": { layout: \"content\", name: \"bizagi.workportal.widgets.dummy\" },\n        \"rightSidebar\": {\n          \"layout\": \"contentrightsidebar\",\n          \"name\": \"bizagi.workportal.widgets.dummy\" } },\n\n\n      nav: { level: 0 } } } },\n\n\n{\n\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.CONTEXT_HOME = \"HOME\";\n\n    params = params || {};\n    params.supportNav = true;\n\n    self.setContextsByNotifyEvents();\n    //Load templates\n    self.loadTemplates({\n      \"homeportal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.homeportal\").concat(\"#homeportal-frame\") });\n\n\n    if (params.widgetName == \"homeportal\") {\n      if (!bizagi.referrerParams) bizagi.referrerParams = {};\n\n      bizagi.referrerParams.referrer = self.getWidgetName();\n    }\n\n    self.manager = bizagi.injector.get(\"widgetManager\", params);\n    self.manager.sub(\"notifyChange\", $.proxy(self.onNotifyChange, self));\n    self.sub(\"notify\", $.proxy(self.onNotifyChange, self));\n\n    bizagi.injector.registerInstance(\"homeportal\", self);\n\n    //Load smartinbox modal according to the params\n    if (self.params.widget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX && self.params.action === \"create\") {\n      self.publish(\"showDialogWidget\", {\n        selectedInboxData: {\n          smartInboxId: self.params.id,\n          owner: self.params.owner,\n          actionName: self.params.action },\n\n        modalParameters: {\n          title: bizagi.localization.getResource(\"workportal-widget-smartinbox-title-new\", \"New Smart Inbox\"),\n          width: \"800px\",\n          showCloseButton: false,\n          refreshInbox: false },\n\n        showBackButton: false,\n        closeVisible: false,\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX,\n        buttons: {} });\n\n    }\n  },\n  /**\r\n      * Set context by behaviors sidebars\r\n      */\n  setContextsByNotifyEvents: function setContextsByNotifyEvents() {\n    var self = this;\n    self.params = self.params || {};\n    self.params.contextsSidebarActivity = [];\n    self.params.contextsWithoutLeftSidebarCaseDashboard = [];\n    self.params.contextsLeftSidebarCaseDashboard = [];\n    self.params.contextsWithoutRightSidebarCaseDashboard = [];\n    self.params.contextsRightSidebarCaseDashboard = [];\n\n\n    for (var context in this.Class.contexts) {\n      if (this.Class.contexts.hasOwnProperty(context)) {\n        if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toTaskSidebarCD) {\n          self.params.contextsSidebarActivity.push(context);\n        }\n\n        if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toLeftSidebarCD) {\n          self.params.contextsLeftSidebarCaseDashboard.push(context);\n        } else\n        {\n          self.params.contextsWithoutLeftSidebarCaseDashboard.push(context);\n        }\n\n        if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toRightSidebarCD) {\n          self.params.contextsRightSidebarCaseDashboard.push(context);\n        } else\n        {\n          self.params.contextsWithoutRightSidebarCaseDashboard.push(context);\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Returns the widget name\r\n      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n  },\n\n  /*\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var d = $.Deferred();\n\n    var template = self.getTemplate(\"homeportal\");\n    self.content = template.render({});\n\n    d.resolve(self.content);\n\n    return d.promise();\n  },\n\n  /*\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.manager.necesaryClean();\n    self.manager.setLayout(self.getContent());\n    var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\n    $.when(servicesPD.getContextToShow(self.params)).done(function (dataPD) {\n\n      // User doesn't have permision to access this case\n      if (dataPD.responseGetCaseSummaryDetails && dataPD.responseGetCaseSummaryDetails.hasAccessToCase === false) {\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED });\n\n        return;\n      }\n\n      var currentContext = dataPD.contextToShow.toLowerCase();\n\n      if (currentContext === \"home\") {\n        if (!bizagiConfig.themesEnabled) {\n          self.loadContext(currentContext, self, dataPD);\n        } else\n        {\n          servicesPD.getCurrentTheme().done(function (theme) {\n            if (theme.name == \"classic\") {\n              self.loadContext(currentContext, self, dataPD);\n            } else\n            {\n              servicesPD.setCurrentTheme(theme);\n              self.setWidgetReady();\n            }\n          });\n        }\n      } else\n      {\n        self.loadContext(currentContext, self, dataPD);\n      }\n\n\n    });\n\n    self.subscribe(\"openCloseSidebar\", function () {\n      $(\".content-scroll\", self.getContent()).trigger(\"resize\");\n    });\n  },\n\n  loadContext: function loadContext(currentContext, self, dataPD) {\n    var contexts = self.Class.contexts;\n    var histName;\n    var level;\n\n    bizagi.loader.startAndThen(currentContext).then(function () {\n      if (dataPD.contextToShow !== self.CONTEXT_HOME) {\n        //Summary case return differnet result to get workitems.\n        dataPD.responseGetCaseSummaryDetails.hasGlobalForm = undefined;\n        $.extend(self.params, dataPD.responseGetCaseSummaryDetails, dataPD.params);\n        //histName = dataPD.nameWorkItem;\n      } else\n      {\n        level = 0;\n        histName = bizagi.localization.getResource(\"workportal-widget-home-title\");\n      }\n\n      $(\"#ui-bizagi-wp-project-homeportal-main\").show();\n\n      $.when(self.manager.updateView({\n        context: dataPD.contextToShow,\n        data: contexts[dataPD.contextToShow],\n        args: $.extend(self.params, {\n          histName: histName,\n          level: level,\n          showContextByMenuDashboard: dataPD.contextToShow }) })).\n\n      done(function () {\n        self.publish(\"showMainMenu\");\n        self.setWidgetReady();\n        self.manager.pub(\"homeportalReady\");\n      });\n    });\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyChange: function onNotifyChange(ev, params) {\n    var self = this,\n    context = params.type;\n\n    if (self.isValidContext(context)) {\n      //load the module\n      return bizagi.loader.startAndThen(context.toLowerCase()).then(function () {\n        var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\n        servicesPD.removeCurrentTheme();\n\n        $.when(self.manager.updateView($.extend({\n          context: context,\n          data: self.Class.contexts[context] },\n        params))).done(function () {\n          $(\"#ui-bizagi-wp-project-homeportal-main\").show();\n          self.publish(\"showMainMenu\");\n        });\n      });\n    }\n\n    return self.manager.emit($.extend(params, { context: context }));\n  },\n\n  /**\r\n      * Returns true if the context is valid\r\n      */\n  isValidContext: function isValidContext(context) {\n    return this.Class.contexts[context] !== null &&\n    _typeof(this.Class.contexts[context]) == \"object\";\n  },\n\n  /**\r\n      * Override base dispose method\r\n      */\n  dispose: function dispose() {\n    var self = this;\n\n    self.manager.dispose();\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Workportal Desktop HomePortal Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Danny Gonzlez\r\n                                                                                                                                                                                                                                                                                                                                                                                */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dialognav\", {\n  contexts: {\n    \"TEMPLATEENGINE-VIEW\": {\n      widgets: {\n        \"navigator\": {\n          \"layout\": \"navigator\",\n          \"name\": \"bizagi.workportal.widgets.navigator\",\n          \"refresh\": false,\n          \"newInstance\": true },\n\n        \"template\": {\n          \"layout\": \"template\",\n          \"name\": \"bizagi.workportal.widgets.templates\",\n          \"newInstance\": true },\n\n        \"paginator\": {\n          \"layout\": \"paginator\",\n          \"name\": \"bizagi.workportal.widgets.paginator\",\n          \"newInstance\": true } },\n\n\n      nav: { level: 1 } } } },\n\n\n{\n\n  /**\r\n   * Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    params = params || {};\n    params.supportNav = true;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"dialognavdata\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.dialognav\").concat(\"#dialognavdata-frame\") });\n\n\n    self.manager = new bizagi.workportal.widgets.manager(self.workportalFacade, self.dataService, '', params);\n    self.manager.sub(\"notifyChange\", $.proxy(self.onNotifyChange, self));\n\n    self.sub(\"notify\", $.proxy(self.onNotifyChange, self));\n  },\n\n  /**\r\n      *   Returns the widget name\r\n      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_DIALOGNAV;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"dialognavdata\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var paramsData = self.params.data.data || {};\n    var eventType = self.params.data.eventType || \"\";\n    var args = {\n      fromActionLauncher: true,\n      guidEntityCurrent: paramsData.guidEntityCurrent,\n      histName: paramsData.displayName,\n      level: 1,\n      page: 1,\n      reference: paramsData.reference,\n      referenceType: paramsData.referenceType,\n      showDateNavigator: false,\n      surrogateKey: paramsData.surrogateKey,\n      xpath: paramsData.xpath,\n      eventType: eventType };\n\n\n    self.manager.setLayout(self.getContent());\n    self.manager.updateView({\n      context: \"TEMPLATEENGINE-VIEW\",\n      data: self.Class.contexts[\"TEMPLATEENGINE-VIEW\"],\n      args: args,\n      skipRefresh: self.params.data.skipRefresh });\n\n  },\n\n  /**\r\n      * Notifies when an event is raised\r\n      */\n  onNotifyChange: function onNotifyChange(ev, params) {\n    var self = this;\n    var context = params.type;\n\n    if (self.isValidContext(context)) {\n      return self.manager.updateView($.extend({\n        context: context,\n        data: self.Class.contexts[context] },\n      params));\n    }\n    self.manager = self.manager || bizagi.injector.get(\"widgetManager\");\n    return self.manager.emit($.extend(params, { context: context }));\n  },\n\n  /**\r\n      * Returns true if the context is valid\r\n      */\n  isValidContext: function isValidContext(context) {\n    var self = this;\n    var classContext = self.Class.contexts;\n\n    return classContext[context] !== null && _typeof(classContext[context]) == \"object\";\n  },\n\n  unsubscribeEvents: function unsubscribeEvents() {\n    var self = this;\n    self.manager.unsub(\"notifyChange\");\n    self.unsub(\"notify\");\n  },\n\n  /**\r\n      * Override base dispose method\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    self.unsubscribeEvents();\n    self.manager.dispose();\n    self._super();\n  } });","if (!$.bizagi) {\n  $.bizagi = { ui: {} };\n}\n\n$.bizagi.ui = {\n  controls: {\n    uitable: {\n      namespace: 'bizagi.ui.controls.uitable',\n      availableComponents: ['uicombo', 'uiradio', 'uicheckbox'],\n      css: 'biz-ui-controls-table',\n      tmpl: 'bizagi.ui.controls.table.template',\n      tmpl2: 'bizagi.ui.controls.table.tr.template',\n      tmpl3: 'bizagi.ui.controls.table.list.template' },\n\n    uicombo: {\n      namespace: 'bizagi.ui.controls.uicombo',\n      css: 'biz-ui-controls-combo',\n      tmpl: 'bizagi.ui.controls.combo.template',\n      tmpl2: 'bizagi.ui.controls.combo.list.template' },\n\n    uicheckbox: {\n      namespace: 'bizagi.ui.controls.uicheckbox',\n      css: 'biz-ui-controls-checkbox',\n      tmpl: 'bizagi.ui.controls.checkbox.template' },\n\n    uiradio: {\n      namespace: 'bizagi.ui.controls.uiradio',\n      css: 'biz-ui-controls-radio',\n      tmpl: 'bizagi.ui.controls.radio.template' },\n\n    uitreeview: {\n      namespace: 'bizagi.ui.controls.uitreeview',\n      css: 'biz-ui-controls-treeview',\n      tmpl: 'bizagi.ui.controls.treeview.template' },\n\n    uimultiselect: {\n      namespace: 'bizagi.ui.controls.multiselect',\n      css: 'biz-ui-controls-multiselect',\n      tmpl: 'bizagi.ui.controls.multiselect.template' } } };","/*\r\n*   Name: BizAgi Workportal Security Command\r\n*   Author: David Andres Nio\r\n*   Comments:\r\n*   -   This script will define a common class to print forms, and edit mode forms\r\n*/\n\n\n$.Class(\"bizagi.workportal.command.printform\", {}, {\n\n  init: function init(renderFactory) {\n    var self = this;\n\n    self.renderFactory = renderFactory;\n  },\n\n  print: function print(properties) {\n\n    var self = this;\n\n    var printParams = $.extend({}, properties);\n\n    $(document).triggerHandler(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"render-actions-print\"),\n        refreshInbox: false },\n\n      params: printParams,\n      referrer: bizagi.hasOwnProperty('referrerParams') && bizagi.referrerParams.hasOwnProperty('referrer') ? bizagi.referrerParams.referrer : \"inboxGrid\",\n      buttons: [\n      {\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\n        click: function click() {\n          var selfButton = $(this);\n\n          var frameTemplate = self.renderFactory.getTemplate(\"print-frame\");\n          var headerTemplate = self.renderFactory.getTemplate(\"print-frame-header\");\n\n          var executePrintWidgetAction = function executePrintWidgetAction() {\n\n            /**/\n            // Create a random name for the print frame.\n            var strFrameName = \"printer-\" + new Date().getTime();\n\n            var jFrame = $.tmpl(frameTemplate, { printID: strFrameName });\n            var jFrameHeader = $.tmpl(headerTemplate, { environment: bizagi.loader.environment, productBuild: bizagi.loader.productBuildToAbout, build: bizagi.loader.productBuild });\n\n            if (!printParams.fileName) {\n              printParams.fileName = window.parent.document.title;\n            }\n\n            jFrame.appendTo($(\"body:first\"));\n\n            // Get a FRAMES reference to the new frame.\n            var objFrame;\n\n            if (bizagi.util.isIE()) {\n              objFrame = window.frames[strFrameName];\n              if (!objFrame) {\n                var i = 0;\n                var length = window.frames.length;\n                for (; i < length; i++) {\n                  if (window.frames[i] && window.frames[i].name == strFrameName) {\n                    objFrame = window.frames[i];\n                    break;\n                  }\n                }\n              }\n            } else {\n              objFrame = window.frames[strFrameName];\n            }\n\n            // Get a reference to the DOM in the new frame.\n            var objDoc = objFrame.document || objFrame.contentWindow.document;\n\n            // Write the HTML for the document. In this, we will\n            // write out the HTML of the current element.\n            objDoc.open();\n            var objDocStr = \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\";\n\n            objDocStr += \"<html style='overflow: visible !important'> <head> <title>\" + printParams.fileName + \"</title>\";\n\n            objDocStr += jFrameHeader[0].innerHTML;\n\n            objDocStr += \"</head> <body class='bz-wp-widget-print bz-wp-widget-print-load' style='overflow: visible !important'>\";\n\n            objDocStr += $(\".bz-wp-widget-print\").html();\n\n            objDocStr += \"</body></html>\";\n\n\n            objDoc.write(objDocStr);\n\n            objDoc.close();\n            $(\".ui-bizagi-cell-readonly\", objDoc).css(\"maxHeight\", \"100%\");\n            if (bizagi.util.isIE()) {\n              var win = window.open(\"\", \"\", \"top=0,left=0,width=10,height=10\");\n\n              var styleLoading = '';\n              styleLoading += '<style>';\n              styleLoading += 'html{background:#293f55; color:#fff; text-align:center;}';\n              styleLoading += '</style>';\n\n              var textStyle = 'padding:10px auto; width:100%; text-align:center; font-family:Arial; font-size:12px;';\n\n              win.document.open();\n              win.document.write(styleLoading + '<div id=\"loading-emp\" style=\"' + textStyle + '\">' + bizagi.localization.getResource(\"webpart-render-loading\") + '</div>');\n              win.document.close();\n\n              win.document.open();\n              win.document.write(objDocStr);\n              win.document.close();\n\n              win.print();\n              var timeoutClose = setTimeout(function () {\n                win.close();\n                clearTimeout(timeoutClose);\n              }, 10000);\n            } else\n            {\n              objFrame.focus();\n              var tmpWindowTitle = window.parent.document.title;\n              window.parent.document.title = printParams.fileName;\n\n              var timeoutPrint = setTimeout(function () {\n                objFrame.print();\n                window.parent.document.title = tmpWindowTitle;\n                clearTimeout(timeoutPrint);\n              }, 500);\n            }\n\n            // Have the frame remove itself in about a minute so that\n            // we don't build up too many of these frames.\n            var timeoutRemove = setTimeout(function () {\n              jFrame.remove();\n              clearTimeout(timeoutRemove);\n            }, 1000);\n\n            selfButton.removeAttr('disabled');\n          };\n\n          selfButton.attr('disabled', 'disabled');\n\n\n          if ($('#bz-wp-widget-print').length === 0) {\n            var timeoutWidgetAction = setTimeout(function () {\n              executePrintWidgetAction();\n              clearTimeout(timeoutWidgetAction);\n            }, 1000);\n          } else {\n            executePrintWidgetAction();\n          }\n        } }] });\n\n\n\n  } });","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*/\n\n$.Class.extend(\"bizagi.workportal.controllers.controller\", {}, {\n\n  /**\r\n                                                                 *   Constructor\r\n                                                                 */\n  init: function init(workportalFacade, dataService) {\n    // Set workportal facade\n    this.workportalFacade = workportalFacade;\n\n    // Set data service\n    this.dataService = dataService;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set a component container hash to use with templates\n    this.componentContainers = {};\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n\n    // Flag to check if the element is disposed\n    this.disposed = false;\n\n    // Define an object to hold the templates used in the widget\n    this.tmpl = {};\n\n    //Define deferred to know if the templates were loaded\n    this.templatesDeferred = null;\n  },\n\n  /*\r\n     *   Returns the current workportal\r\n     */\n  getWorkportal: function getWorkportal() {\n    return this.workportalFacade.workportal;\n  },\n\n  /**\r\n     *   Publish an event so any controller can subscribe to it\r\n     */\n  publish: function publish(eventName, params) {\n    if (this.disposed) return null;\n    return $(document).triggerHandler(eventName, params);\n  },\n\n  /**\r\n     *   Subscribe to an event that any controller could trigger\r\n     */\n  subscribe: function subscribe(eventName, callback) {\n    if (this.disposed) return null;\n    $(document).bind(eventName, callback);\n    this.subscribers.push({ event: eventName });\n  },\n\n  /**\r\n     *   Subscribe to one time event that any controller could trigger\r\n     */\n  subscribeOneTime: function subscribeOneTime(eventName, callback) {\n    if (this.disposed) return null;\n    $(document).one(eventName, callback);\n    this.subscribers.push({ event: eventName });\n  },\n\n  /**\r\n     *   Un Subscribe to an event that any controller could trigger in this document\r\n     */\n  unsubscribe: function unsubscribe(eventName, callback) {\n    if (this.disposed) return null;\n    if (callback) {\n      $(document).unbind(eventName, callback);\n    } else\n    {$(document).unbind(eventName);}\n  },\n\n  /**\r\n     *   Makes the base processing of the layout (mix templates + data)\r\n     *   after all that processing will call a post-render method to\r\n     *   be implemented in each device to apply custom plugins\r\n     *   Returns a promise because the rendering could be asynchronous\r\n     */\n  render: function render() {\n    var self = this;\n    var defer = new $.Deferred();\n    self.renderingDeferred = new $.Deferred();\n\n    // Render content\n    $.when(self.areTemplatedLoaded()).\n    pipe(function () {\n      return self.renderContent();\n    }).\n    done(function () {\n\n      // Call post-render method\n      self.postRender();\n\n      // Resolve deferred\n      defer.resolve(self.getContent());\n      self.renderingDeferred.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Returs the rendered content\r\n     */\n  getContent: function getContent() {\n    return this.content;\n  },\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key, defaultValue) {\n    return this.resources.getResource(key, defaultValue);\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *\r\n     */\n  renderContent: function renderContent() {\n    // Override on implementations\n    return \"\";\n  },\n\n\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {},\n\n  /*\r\n                                        *   Returns the component replaced tag selector\r\n                                        */\n  getComponentSelector: function getComponentSelector(component) {\n    return \"[data-bizagi-component=\" + component + \"]\";\n  },\n\n  /*\r\n     *   Returns the component replaced tag selector\r\n     */\n  getComponentContainer: function getComponentContainer(component) {\n    var self = this;\n    var content = self.getContent();\n    if (!content || content.length == 0) return null;\n\n    // Find component parent and cache it\n    //var componentElement = self.componentContainers[component];\n    //if (componentElement == null) {\n    // Find the component inside the main content\n    //componentElement = $(self.getComponentSelector(component), content);\n\n    // If still not found, try to check if content element is the component\n    //  if (componentElement.length == 0 && content.is(self.getComponentSelector(component))) {\n    //      componentElement = content;\n    //  }\n\n    // Cache the component\n    // self.componentContainers[component] = componentElement;\n    //}\n    //return self.componentContainers[component];\n    return $(self.getComponentSelector(component), content);\n  },\n\n  /*\r\n     *   Asks for a full resize\r\n     */\n  resizeLayout: function resizeLayout() {\n    this.publish(\"resizeLayout\");\n  },\n\n  /*\r\n     * Do stuff when a resize has been triggered\r\n     */\n  performResizeLayout: function performResizeLayout() {},\n\n  /*\r\n                                                          *   Disposes the widget\r\n                                                          */\n  dispose: function dispose() {\n    var self = this;\n\n    if (self.subscribers != null) {\n      // Remove all subcriptions\n      $.each(self.subscribers, function (i, item) {\n        self.unsubscribe(item.event);\n      });\n    }\n\n    setTimeout(function () {\n      bizagi.util.dispose(self);\n      self.disposed = true;\n    }, bizagi.override.disposeTime || 50);\n  },\n\n\n  /*\r\n     * Loads dinamically a set of templates\r\n     */\n  loadTemplates: function loadTemplates(templates) {\n    var self = this,\n    def = self.templatesDeferred = new $.Deferred(),\n    tmplPromises = [];\n\n    var useNewEngine = templates.useNewEngine != undefined ? templates.useNewEngine : true;\n\n    for (var name in templates) {\n      if (name != \"useNewEngine\") {\n        tmplPromises.push(\n        self.loadTemplate({\n          \"name\": name,\n          \"path\": templates[name],\n          \"useNewEngine\": useNewEngine }));\n\n\n      }\n    }\n\n    $.when.apply($, tmplPromises).\n    done(function () {\n      def.resolve();\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Loads template \r\n     */\n  loadTemplate: function loadTemplate(data) {\n    var self = this;\n\n    if (self.tmpl[data.name]) {\n      return self.tmpl[data.name];\n    } else {\n      if (data.useNewEngine) {\n        return bizagi.templateService.getTemplateWidget(data.path).\n        done(function (tmpl) {\n          self.tmpl[data.name] = tmpl;\n        });\n      }\n\n      return bizagi.templateService.getTemplate(data.path).\n      done(function (tmpl) {\n        self.tmpl[data.name] = tmpl;\n      });\n\n    }\n  },\n\n  /*\r\n     * Gets template \r\n     */\n  getTemplate: function getTemplate(name) {\n    if (this.tmpl.hasOwnProperty(name)) {\n      return this.tmpl[name];\n    }\n    return null;\n\n  },\n\n  /*\r\n     * Returns a promise, it is resoved when the widget is rendered\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n\n  /*\r\n     *\r\n     */\n  areTemplatedLoaded: function areTemplatedLoaded() {\n    return this.templatesDeferred;\n  } });","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*   -   This layout must contain a menu and widget container placeholders\r\n*/\n\n\n// Defines the main controller\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.main\", {}, {\n\n  /*\r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(workportalFacade, dataService) {\n    var self = this;\n\n    // Define regex to apply to templates\n    self.componentRegex = /{{component (\\w+)}}/g;\n\n    // Call base\n    this._super(workportalFacade, dataService);\n\n    // Subscribe to change widget event\n    this.subscribe(\"changeWidget\", function (e, params) {\n\n      bizagi[\"currentWidget\"] = params.widgetName;\n\n      var def = new $.Deferred();\n\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function (e, p) {\n        def.resolve();\n      });\n\n      // $.when(bizagi.util.autoSave()).done(function () {\n      $.when(bizagi.util.liveSave(params.widgetName), bizagi.util.autoSave()).done(function () {\n\n        $(document).data('auto-save', '');\n        bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = null;\n\n        if (params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID ||\n        params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX) {\n          bizagi.util.defaultWidget(params.widgetName);\n        }\n\n        bizagi.util.setContext({\n          widget: params.widgetName });\n\n        self.publish('cleanAllWidgets');\n        self.setWidget(params);\n\n      });\n\n      return def.promise();\n    });\n\n    // Subscribe to add dialog to stack dialogs\n    this.subscribe(\"addDialogToDialogStack\", function (e, params) {\n      // Add dialog to stack\n      self.addDialogToDialogStack(params);\n    });\n\n    // Subscribe to dialog widget event\n    this.subscribe(\"showDialogWidget\", function (e, params) {\n      // Shows a dialog a widget                \n      return self.showDialogWidget(params);\n    });\n\n    // Subscribe to clsoe current dialog\n    this.subscribe(\"closeCurrentDialog\", function (e, params) {\n      // Close the current dialog widget\n      return self.closeCurrentDialog(params);\n    });\n\n    // Subscribe to close all dialogs\n    this.subscribe(\"closeAllDialogs\", function (e, params) {\n      // Close all dialogs\n      self.closeAllDialogs();\n    });\n\n    // Subscribe to popup widget event\n    this.subscribe(\"popupWidget\", function (e, params) {\n      // Shows a popup a widget\n      self.popupWidget(params);\n    });\n\n    // Subscribe to pop widget event\n    this.subscribe(\"popWidget\", function (e, params) {\n      // Shows a pop a widget\n      self.popWidget(params);\n    });\n\n    // Subscribe to push widget event\n    this.subscribe(\"pushWidget\", function (e, params) {\n      // Shows a push a widget\n      self.pushWidget(params);\n    });\n\n\n    // Subscribe to execute action event\n    this.subscribe(\"executeAction\", function (e, params) {\n      // Executes the action\n      self.executeAction(params);\n    });\n\n    // Subscribe to resize layout event\n    this.subscribe(\"resizeLayout\", function () {\n      // Resize all the layout\n      self.performResizeLayout();\n    });\n\n    // Subscribe to dispose Widget event\n    this.subscribe(\"disposeWidget\", function () {\n      // Resize all the layout\n      self.disposeWidget();\n    });\n\n    // Subscribe to 'append Widget to' event\n    this.subscribe(\"appendWidgetTo\", function (e, params) {\n      // attach the widget to a given element\n      return self.appendWidgetTo(params);\n    });\n\n    // Subscribe to Notifications event\n    /**\r\n           * @param params {notification, type}\r\n           */\n    this.subscribe(\"notification\", function (e, params) {\n      NotificationDispatcher.dispatch(params.notification, params.type);\n    });\n\n    // Subscribe to 'refreshQueryFormShortCut' event\n    this.subscribe(\"refreshQueryFormShortCut\", function (e, params) {\n      // attach the widget to a given element\n      return self.refreshQueryFormShortCut(params);\n    });\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"workportal\");\n\n    // Render content\n    var content = self.content = $.tmpl(template, {});\n\n    // Add workarea\n    self.workarea = self.workportalFacade.getWorkareaController();\n\n    // Add menu\n    var menu = self.menu = self.workportalFacade.getMenuController();\n    $.when(menu.render()).\n    done(function () {\n      // Build menu\n      menu.getContent().appendTo(self.getComponentContainer(\"menu\"));\n    });\n\n    // Set resize layout event\n    $(window).resize(function () {\n      self.resizeLayout();\n    });\n\n    return content;\n  },\n\n  /*\r\n     *   Sets the current working widget\r\n     */\n  setWidget: function setWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for changeWidget call\");\n\n    // Renders the workarea again\n    self.renderWorkarea();\n  },\n\n  /*\r\n     *   Executes the desired action\r\n     */\n  executeAction: function executeAction(params) {\n    var self = this;\n\n    if (params.action == bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING) {\n      bizagi.loader.start(\"activity\").then(function () {\n        var actionController = self.workportalFacade.getAction(params.action);\n\n        // Executes the action\n        actionController.execute(params);\n      });\n    } else\n    if (params.action == bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH) {\n      bizagi.loader.start(\"inbox\").then(function () {\n        var actionController = self.workportalFacade.getAction(params.action);\n\n        // Executes the action\n        actionController.execute(params);\n      });\n    }\n  },\n\n  /*\r\n     *   Renders the workarea based on the current widget\r\n     */\n  renderWorkarea: function renderWorkarea() {\n    var self = this;\n\n    var workarea = self.workarea;\n\n    if (workarea) {\n      var workareaContainer = self.getComponentContainer(\"workarea\");\n\n      // clean widgets\n      self.cleanWidgets();\n\n      // Clean workarea\n      workareaContainer.empty();\n\n      //Prepare first load. If inboxGrid, first: load module inbox\n      if (!bizagi.util.isEmpty(self.currentWidget) && self.currentWidget != \"none\") {\n        self.currentWidgetParams = $.extend({}, self.currentWidgetParams, { menu: self.getMenu() });\n        if (self.currentWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID ||\n        self.currentWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX) {\n          bizagi.loader.start(\"inbox\").then(function () {\n            self.loadWidgetFromFacade(workarea, workareaContainer);\n          });\n        } else\n        {\n          self.loadWidgetFromFacade(workarea, workareaContainer);\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Load widget from facade\r\n      */\n  loadWidgetFromFacade: function loadWidgetFromFacade(workarea, workareaContainer) {\n    var self = this;\n    // Load widget from facade\n    $.when(\n    self.workportalFacade.getWidget(self.currentWidget, self.currentWidgetParams)).\n    pipe(function (widgetController) {\n      // Set into workarea\n      workarea.setWidget(widgetController);\n      return workarea.render();\n\n    }).done(function () {\n\n      var renderedContent = workarea.getContent();\n      if (renderedContent) {\n        // Replace workarea\n        renderedContent.appendTo(workareaContainer);\n\n        //Resize layout on workarea\n        self.resizeLayout();\n\n        // Trigger \"widget included in dom\" event\n        self.publish(\"onWidgetIncludedInDOM\");\n      }\n    });\n  },\n\n  /*\r\n     *   Shows a widget inside a modal dialog\r\n     *   Implement on each device\r\n     */\n  showDialogWidget: function showDialogWidget(params) {},\n\n  /*\r\n                                                          *   Close the current modal dialog\r\n                                                          *   Implement on each device\r\n                                                          */\n  closeCurrentDialog: function closeCurrentDialog(params) {},\n\n  /*\r\n                                                              *   Popup a widget\r\n                                                              *   Implement on each device\r\n                                                              */\n  popupWidget: function popupWidget(params) {},\n\n  /*\r\n                                                 *   Add dialog to dialogStack\r\n                                                 */\n  addDialogToDialogStack: function addDialogToDialogStack(dialog) {},\n\n  /**\r\n                                                                      *   Close all modal dialogs\r\n                                                                      *   Implement on each device\r\n                                                                      */\n  closeAllDialogs: function closeAllDialogs() {},\n\n  /*\r\n                                                  *   push a widget\r\n                                                  *   Implement on each device\r\n                                                  */\n  pushWidget: function pushWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for pushWidget call\");\n  },\n\n  /*\r\n     *   pop a widget\r\n     *   Implement on each device\r\n     */\n  popWidget: function popWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for popupWidget call\");\n\n\n  },\n\n  disposeWidget: function disposeWidget(params) {\n    var self = this;\n    self.currentWidget = params.widgetName;\n    self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\n    // Set assertion to avoid calls without widget name\n    bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for disposeWidget call\");\n\n\n  },\n\n  /*\r\n     *   Shows a widget inside a given element\r\n     *   paramms: widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_***,\r\n     *            appendToElement: \"#elementid\" or \".elementClass\"\r\n     *   Implement on each device\r\n     */\n  appendWidgetTo: function appendWidgetTo(params) {},\n\n  /*\r\n                                                      *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n                                                      *   Override when needed  \r\n                                                      */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    var content = self.getContent();\n\n    // Resize content\n    self.resizeContainer(content, $(window).height());\n\n    // Call menu, and workarea resize layout\n    if (self.menu) self.menu.performResizeLayout();\n    if (self.workarea) self.workarea.performResizeLayout();\n  },\n\n  /*\r\n     *   Resizes a container according its rules\r\n     */\n  resizeContainer: function resizeContainer(container, containerHeight) {\n    var self = this;\n\n    // Only perform layout resize if the container has adjustable elements\n    var adjustableChildren = container.children(\".ui-bizagi-component-adjustable\");\n    var adjustableContainersHeight = containerHeight;\n\n    if (adjustableChildren.length > 0) {\n      // Sum fixed content\n      var fixedContentHeight = 0;\n      $.each(container.children(), function (i, element) {\n        if (!$(element).hasClass(\"ui-bizagi-component-adjustable\") && $(element).css('display') !== 'none') fixedContentHeight += $(element).height();\n      });\n\n      // Resize adjustable elements\n      adjustableContainersHeight = containerHeight - fixedContentHeight;\n\n      var overflowY = \"\";\n      $.each(adjustableChildren, function (i, element) {\n\n        overflowY = $(element).css(\"overflow-y\") != \"\" ? $(element).css(\"overflow-y\") : \"hidden\";\n        if (overflowY == \"visible\") overflowY = \"hidden\";\n        $(element).addClass(\"ui-bizagi-adjustable\");\n        var marginTop = $(element).css(\"margin-top\") === \"auto\" ? 0 : Number($(element).css(\"margin-top\").replace(\"px\", \"\"));\n        var finalHeight = adjustableContainersHeight - marginTop;\n\n        $(element).css({\n          \"height\": finalHeight,\n          \"overflow-y\": overflowY });\n\n\n      });\n    }\n\n    // Resize inner containers if it has any adjustable inner containers\n    $.each(container.children(), function (i, element) {\n      if ($(element).find(\".ui-bizagi-component-adjustable\").length > 0) {\n        $(element).addClass(\"ui-bizagi-component-adjustable\");\n        self.resizeContainer($(element), adjustableContainersHeight);\n      }\n    });\n  },\n\n  /*\r\n     *   Return the menu component\r\n     */\n  getMenu: function getMenu() {\n    return this.menu;\n  },\n\n  refreshQueryFormShortCut: function refreshQueryFormShortCut(params) {} });","/*\r\n *   Name: BizAgi Workportal Menu Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to handle manu layouts for any device\r\n */\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.menu\", {}, {\n  init: function init(workportalFacade, dataService) {\n    var self = this;\n    self._super(workportalFacade, dataService);\n\n    // Subscribe to change widget event\n    this.subscribe(\"showMainMenu\", function (e, params) {\n      var def = new $.Deferred();\n      $(self.getContent()).closest(\"#ui-bizagi-wp-menu\").show();\n      return def.promise();\n    });\n  },\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"menu\");\n    var defer = new $.Deferred();\n    var defaultImg = \"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////////VXz1bAAAAAJ0Uk5T/wDltzBKAAAA+0lEQVR42uzaSxLCMAwE0c79L82SFMXHJpKHhJ59at4utmS2cBAgQMCBT3dZDuBJ1gF4mSUA3qYfALUCauvnCZT3Twqo758T0NA/JaCjf0ZwIgC0COjpHxecBgBNAgF09Y8KBAgQIECAAAFnAXgiEiDAq5mA8wEuOCERIMBBpYAfAMTH9QLygPjOSEB+b5gHxFe3I4Lt4oD0+v4HAPEXFAIECBDw70+58oDw7zh7JMteTrPTcr5MDYBDOQqgIAcAFOU7AKWZBlCeKQAtGQXQmAEAzfkAYEHeAWC5gOX1DwQS/XsBkf6dgEz/XSBAgAABAgQIECBAQBxwE2AAjnkjnL/SDJsAAAAASUVORK5CYII=\";\n\n\n    self.customPreferencesObj = new bizagi.services.preferences();\n    self.customFormats = new bizagi.services.preferences.customFormats();\n    var customPreferencesValues = self.customPreferencesObj.getPreferences();\n\n    /** Manage windows maintenance **/\n    var windowMaintenance = new bizagi.workportal.services.windowMaintenance(self.dataService);\n\n    $.datepicker.setDefaults(bizagi.localization.getResource(\"datePickerRegional\"));\n\n    //symbol from Rest/Users/CurrentUser, in server : bizagi.currentUser.symbol =  Business/Localization/Currency Symbol  || {language}.numericFormat.symbol\n    var currencyInfo = bizagi.localization.getResource('numericFormat');\n    if (currencyInfo) {\n      currencyInfo.decimalSymbol = customPreferencesValues.decimalSeparator || bizagi.currentUser.decimalSeparator || currencyInfo.decimalSymbol;\n      currencyInfo.symbol = customPreferencesValues.symbol || bizagi.currentUser.symbol || currencyInfo.symbol;\n      currencyInfo.digitGroupSymbol = customPreferencesValues.thousandSeparator || bizagi.currentUser.groupSeparator || currencyInfo.digitGroupSymbol;\n\n      bizagi.localization.setResource('numericFormat', currencyInfo);\n      if (BIZAGI_DEFAULT_CURRENCY_INFO) {\n        BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits = bizagi.currentUser.decimalDigits;\n        BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator = currencyInfo.decimalSymbol;\n        BIZAGI_DEFAULT_CURRENCY_INFO.symbol = currencyInfo.symbol;\n        BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator = currencyInfo.digitGroupSymbol;\n      }\n    }\n\n    if (bizagi.currentUser.uploadMaxFileSize) {\n      BIZAGI_SETTINGS.UploadMaxFileSize = bizagi.currentUser.uploadMaxFileSize;\n      bizagi.util.changeData({ uploadMaxFileSize: BIZAGI_SETTINGS.UploadMaxFileSize });\n    }\n\n    self.overrideUserPreferences();\n\n    self.security = new bizagi.workportal.command.security(self.dataService);\n    $.when(self.security.getSecurity()).\n    done(function (security) {\n      // Checking for DisplayOptions into security(response)\n      if (bizagi.override.enableFeatureDisplayOptions === false) {\n        security.DisplayOptions = false;\n      }\n      // Render content\n      var content = self.content = $.tmpl(template, $.extend(bizagi.currentUser, {\n        environment: bizagi.loader.environment || \"\",\n        build: bizagi.loader.build,\n        base64image: bizagi.themeLogo || \"img/img/barra/logo-bizagi.svg\",\n        photo: \"data:image/png;base64,\" + (bizagi.currentUser.userPicture ? bizagi.currentUser.userPicture : defaultImg),\n        hasPicture: bizagi.currentUser.userPicture ? true : false,\n        initials: bizagi.currentUser.userFullName ? bizagi.currentUser.userFullName.getInitials() : \"\",\n        security: security,\n        showQrMobileMenu: bizagi.override.showQrMobileMenu !== false }));\n\n      defer.resolve(content);\n    });\n\n    return defer.promise();\n  },\n\n  overrideUserPreferences: function overrideUserPreferences() {\n    var self = this;\n    self.customFormats.overrideLocalization();\n  },\n\n  /**\r\n      *   Helper method to change the current widget in the workportal\r\n      * @param params\r\n      */\n  changeWidget: function changeWidget(params) {\n    var self = this;\n    self.publish(\"changeWidget\", params);\n  },\n\n  /**\r\n      *   Helper method to show a widget inside a dialog in the wokportal\r\n      * @param params\r\n      */\n  showDialogWidget: function showDialogWidget(params) {\n    var self = this;\n    return self.publish(\"showDialogWidget\", params);\n  },\n\n  /**\r\n      *\r\n      */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    self.adjustMenuWP();\n  },\n\n  adjustMenuWP: function adjustMenuWP() {\n    var buttonMenuContainer = $(\"#ui-bizagi-wp-app-menu-bt-container\"),\n    /**\r\n                                                                         * add tolerance of an element and after calculate everything restore original size\r\n                                                                         */\n    toleranceFor = function toleranceFor(Jelement) {\n      var changeWidth = function changeWidth(sign) {\n        Jelement.css(\"width\", sign + \"=10\");\n      };\n      return {\n        start: changeWidth.bind(null, \"-\"),\n        end: changeWidth.bind(null, \"+\") };\n\n    };\n    if (buttonMenuContainer.length === 1) {\n      // Define width for elements with responsive\n      var elementsMargin = 70, //jquery does not get the margin width with outerWidth :(\n      searchInputWidth = $(\"#ui-bizagi-wp-widget-searchContainer\").outerWidth() + 10;\n      toleranceFor(buttonMenuContainer).start();\n      var widthComponentsWithoutResponsive = searchInputWidth + $(\"#user\").outerWidth() +\n      $(\"#ui-bizagi-wp-app-menu-logo-container\").outerWidth() + elementsMargin;\n\n      // Define maximum width of menu\n      var limitWidth = $(\"#ui-bizagi-wp-app-menu-container\").width() - widthComponentsWithoutResponsive;\n      buttonMenuContainer.width(limitWidth);\n\n      //restart visible buttons\n      $(\"span.text\", selectorMenuButtons).show();\n\n      // hide button text by button text until all buttons and text is ok.\n      var selectorMenuButtons = $(\"#ui-bizagi-wp-app-menu-bt-container li\");\n      var indexButtonToHide = indexLastButton = selectorMenuButtons.length - 1;\n      var thereIsAButtonOverlaped = true;\n\n      while (thereIsAButtonOverlaped) {\n        if (indexButtonToHide < 0) {\n          break;\n        }\n        if (buttonMenuContainer.position().top > 0 || selectorMenuButtons.eq(indexLastButton).position().top > 0) {\n          $(\"span.text\", selectorMenuButtons).eq(indexButtonToHide).hide();\n          indexButtonToHide -= 1;\n        } else\n        {\n          toleranceFor(buttonMenuContainer).end();\n          thereIsAButtonOverlaped = false;\n        }\n      }\n    }\n  } });","/*\r\n*   Name: BizAgi Workportal Workarea Controller \r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle all the workarea of the application\r\n*/\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.workarea\", {}, {\n\n  /*\r\n                                                                                                *   This method sets the internal widget to be rendered\r\n                                                                                                */\n  setWidget: function setWidget(widget) {\n    var self = this;\n    self.widget = widget;\n  },\n\n  disposeWidget: function disposeWidget() {\n    var self = this;\n    if (self.widget) {\n      self.widget.dispose();\n      delete self.widget;\n    }\n  },\n\n  cleanWidgets: function cleanWidgets() {\n    var self = this;\n\n    if (self.widget) {\n      self.widget.clean();\n    }\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    if (self.widget) {\n      // Renders the widget\n      $.when(self.widget.render()).\n      done(function () {\n        self.content = self.widget.getContent();\n        defer.resolve(self.content);\n      });\n\n    } else {\n      self.content = $(\"<div/>\");\n      defer.resolve(self.content);\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Resizes layout for controller\r\n     */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n\n    // Call internal widget resize\n    if (self.widget) self.widget.performResizeLayout();\n  } });","/*\r\n *   Name: BizAgi Workportal Webpart Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to all widgets\r\n */\n\n/* Asegura que el namespace este creado*/\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.webpart = typeof bizagi.webpart !== \"undefined\" ? bizagi.webpart : {};\nbizagi.webpart.subscribe = function (eventName, callback) {\n  $(document).bind(eventName, callback);\n};\nbizagi.webpart.publish = function (eventName, params) {\n  return $(document).triggerHandler(eventName, params);\n};\n\nbizagi.webpart.whenCreated = function (webpartName, callback) {\n  bizagi.webpart.subscribe(\"bizagi-webpart-created\", function (params) {\n    if (params.webpart.Class.fullname == \"bizagi.workportal.webparts.\" + webpartName) {\n      if (callback) callback(params);\n    }\n  });\n};\n\nbizagi.webpart.whenExecuted = function (webpartName, callback) {\n  bizagi.webpart.subscribe(\"bizagi-webpart-executed\", function (params) {\n    if (params.webpart.Class.fullname == \"bizagi.workportal.webparts.\" + webpartName) {\n      if (callback) callback(params);\n    }\n  });\n};\n\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.webparts.webpart\", {},\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    // Set helper\n    this.helper = new bizagi.workportal.webpart.helper(this);\n\n    this.canvas = params.canvas;\n\n    // Set project\n    this.project = params.project;\n    this.sharepointProxyPrefix = params.sharepointProxyPrefix;\n\n    // Set namespace\n    this.namespace = params.namespace;\n    // visible\n    this.isVisible = true;\n    this.isWebpartInIFrame = typeof params.isWebpartInIFrame != 'undefined' ? params.isWebpartInIFrame : self.helper.isWebpartInIFrame();\n    this.adjustButtonsToContent = params.adjustButtonsToContent;\n    this.remoteServer = params.remoteServer;\n\n    if (this.remoteServer) {\n\n      //postmessage object definition\n      self.postmessageSocket = new bizagi.postmessage({\n        remoteServer: this.remoteServer,\n        destination: window.parent,\n        origin: window });\n\n      self.postmessageSocket.iframeidentifier = BIZAGI_IFRAME_IDENTIFIER;\n      self.postmessageSocket.receive = function (msg) {\n        var params = msg.data;\n\n        // Auto-discard self messages\n        if (params.message) {\n          if (params.message.iframeidentifier == BIZAGI_IFRAME_IDENTIFIER) {\n            return;\n          }\n        }\n\n        if (params.event) {\n          switch (params.event) {\n            case \"postmessage-bizagi-canCloseIFramePopUp\":\n\n              if (self.canHide && self.Class.shortName == params.message.webPartDestine) {\n                $.when(self.canHide()).\n                done(function () {\n                  var iframeclosemsg = {};\n                  iframeclosemsg.event = \"postmessage-bizagi-closeIFramePopUp\";\n                  iframeclosemsg.message = {};\n                  iframeclosemsg.message.iframeidentifier = BIZAGI_IFRAME_IDENTIFIER;\n                  self.postmessageSocket.send(iframeclosemsg);\n                  var showCasesMSG = {\n                    message: {} };\n\n                  showCasesMSG.event = \"ui-bizagi-reload-cases\";\n                  self.postmessageSocket.send(showCasesMSG);\n                });\n              }\n              break;\n            case \"postmessage-bizagi-openParentPopUp\":\n              //Do nothing this message is for parent\n              break;\n            default:\n              //re send message to other webparts\n              self.publish(params.event, params.message, true);\n              break;}\n\n        } else {\n          //set iframe height and width\n\n        }\n      };\n      self.postmessageSocket.startReceiving();\n      self.sendDimensionsiFrame();\n    }\n  },\n  sendDimensionsiFrame: function sendDimensionsiFrame(mandatorysend) {\n    var self = this;\n    //If webpart is put in iFrame resize the iframe with content height\n    //else if iframe show in popUp FixButtons, is desirable\n    //If namespace is defined this is a chil webpart\n    //delay wait for finish render\n    if (self.remoteServer) {\n      if (!!!self.adjustButtonsToContent && (!!!self.namespace || mandatorysend)) {\n        if (self.isWebpartInIFrame) {\n          if (self.canvas[0]) {\n            //send dimensions in resize event \n            var canvasobject = self.canvas[0];\n            if (canvasobject.attachEvent) {\n              canvasobject.onresize = function () {\n                self.sendDimensionsiFramePostMessage();\n              };\n            } else {\n              bizagi.addResizeListener(canvasobject, function (e) {\n                self.sendDimensionsiFramePostMessage();\n              });\n            }\n          }\n        }\n      }\n    }\n  },\n\n\n  sendDimensionsiFramePostMessage: function sendDimensionsiFramePostMessage() {\n    var self = this;\n    var iframeDimentions = {\n      message: {} };\n\n    iframeDimentions.message.iframeName = BIZAGI_IFRAME_IDENTIFIER;\n    iframeDimentions.message.iframeHeight = $('body').height();\n    if (self.Class.shortName == \"newcaselist\") {\n    } else {\n      iframeDimentions.message.iframeWidth = undefined;\n    }\n    self.postmessageSocket.send(iframeDimentions);\n  },\n\n  /**\r\n      *   Publish an event so any controller can subscribe to it\r\n      */\n  publish: function publish(eventName, params, notFireToIframe) {\n    var self = this;\n    eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\n    //publish event to iframe\n    if (!!!notFireToIframe && eventName.indexOf(\"bizagi-webpart-created\") == -1 && eventName.indexOf(\"bizagi-webpart-executed\") == -1 && self.postmessageSocket) {\n      var msg = {};\n      msg.event = eventName;\n      //By iFrame messages it can not transmit the canvas object or object workportal\n      if (params) {\n        params.canvas = null;\n        params.workportal = null;\n      }\n\n      msg.message = {};\n      msg.message = $.extend(params, {\n        project: this.project,\n        iframeidentifier: BIZAGI_IFRAME_IDENTIFIER });\n\n      msg.message.whenInitialized = null;\n      self.postmessageSocket.send(msg);\n    }\n    //publish event localy in webparts\n    return this._super(eventName, $.extend(params, {\n      project: this.project }));\n\n  },\n\n  /**\r\n      *   Subscribe to an event that any controller could trigger\r\n      */\n  subscribe: function subscribe(eventName, callback) {\n    var self = this;\n    eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\n    this._super(eventName, function (e, params) {\n      if (self.project == params.project && self.isVisible)\n      return callback(e, params);\n    });\n  },\n\n  /**\r\n      *   UnSubscribe to an event that any controller could trigger\r\n      */\n  unsubscribe: function unsubscribe(eventName, callback) {\n    var self = this;\n    eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\n    this._super(eventName, callback);\n  },\n\n  /*\r\n      *   Re-draw the webpart\r\n      */\n  refresh: function refresh(params) {\n    var self = this;\n    var content = this.getContent();\n\n    // Clear content\n    content.empty();\n\n    // Dispose stuff\n    self.prepareForRefresh();\n\n    // Re-draw content;\n    $.when(self.render(params)).\n    done(function (newContent) {\n      if ($.contains(window.document, content[0])) {\n        bizagi.util.replaceSelector($(\"body\", window.document), content, newContent);\n      } else {\n        $(\"#\" + content.attr(\"id\"), window.document).empty();\n        bizagi.util.replaceSelector($(\"body\", window.document), \"#\" + content.attr(\"id\"), newContent);\n      }\n    });\n  },\n\n  /*\r\n      *   Renders the web part\r\n      *   Also ensures that templates are loaded\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Set params in webpart variable\n    self.params = params;\n\n    if (params.creating) {\n      self.content = self.empty();\n\n      // Trigger webpart created event\n      self.publish(\"bizagi-webpart-created\", {\n        webpart: self });\n\n\n      return self.content;\n    }\n\n    // Load templates\n    return $.when(self.renderContent(params)).\n    pipe(function (content) {\n      // Then customize in current device\n      // if you use fastTmpl the object string is transformed to object html -jquery\n      if (typeof content == \"string\") content = $(content);\n\n      self.content = content;\n      self.postRender(params);\n\n      // Trigger webpart executed event\n      self.publish(\"bizagi-webpart-executed\", {\n        webpart: self });\n\n      self.sendDimensionsiFrame();\n      return self.getContent();\n    });\n  },\n\n  /*\r\n      *   Renders the web part, override this method in each webpart\r\n      */\n  renderContent: function renderContent(params) {},\n\n  /*\r\n                                                     *   Customize the web part in each device\r\n                                                     */\n  postRender: function postRender(params) {},\n\n  /*\r\n                                               *   Return the rendered content\r\n                                               */\n  getContent: function getContent() {\n    return this.content;\n  },\n\n  /*\r\n      *   Creates an empty content\r\n      */\n  empty: function empty() {\n    return $(\"<div/>\");\n  },\n\n  /*  \r\n      *   Return a specified template\r\n      */\n  getTemplate: function getTemplate(template) {\n    return this.workportalFacade.getTemplate(template);\n  },\n\n  /*  \r\n      *   Create webpart\r\n      */\n  createWebpart: function createWebpart(params) {\n    return this.workportalFacade.workportal.createWebpart(params);\n  },\n\n  /*  \r\n      *   Execute webpart\r\n      */\n  executeWebpart: function executeWebpart(params) {\n    return this.workportalFacade.workportal.executeWebpart(params);\n  },\n  /**\r\n      *   Manage the error in base class\r\n      */\n  manageError: function manageError(msg, defer, canvasError) {\n    var self = this;\n    var errorMsg = '';\n    if (msg.responseText) {\n      errorMsg = msg.responseText;\n    } else {\n      errorMsg = msg;\n    }\n    if (errorMsg.indexOf(\"AUTHENTICATION_ERROR\") == -1) {\n      self.helper.getFailServerErrorDeferred({\n        message: errorMsg,\n        sharepointProxyPrefix: self.sharepointProxyPrefix },\n      defer);\n      self.endWaiting();\n      //en caso de no tener un canvasError el error se despliega en todo el content\n      if (canvasError) {\n        defer.done(function (value) {\n          canvasError.append(value);\n          self.endWaiting();\n        });\n      }\n      if (bizagi.iframeCommunicator) {\n        bizagi.iframeCommunicator.trigger(\"authorization-internal-error\");\n      }\n      //defer.resolve(msg);\n    } else {\n      //when it's generate autentication error, cannot load the template\n      var content = self.content = \"<div class='ui-bizagi-webpart-error-message'>The current user does not exist as a registered user in the bizagi project</div>\";\n      if (canvasError) {\n        canvasError.append(content);\n      }\n      self.endWaiting();\n      defer.resolve(content);\n    }\n  },\n  /**\r\n      *   On waiting. En el area del webpart agrega un div del mismo tamanio y de las mismas coordenadas que el content.\r\n      */\n  onWaiting: function onWaiting() {\n    var self = this;\n    bizagi.startWaiting(document.getElementById(self.canvas[0].id));\n  },\n  /**\r\n      *   Off waiting. \r\n      */\n  endWaiting: function endWaiting() {\n    var self = this;\n    self.canvas.children(\".ui-bizagi-sharepoint-loading-container\").remove();\n  },\n\n  /**\r\n      *   Hide WebPart\r\n      */\n  hide: function hide(hideParent) {\n    var self = this;\n    self.canvas.hide();\n    if (hideParent) {\n      self.canvas.parent().hide();\n    }\n    self.isVisible = false;\n  },\n  /**\r\n      *    Show WebPart\r\n      */\n  show: function show() {\n    var self = this;\n    self.canvas.show();\n    self.canvas.parent().show();\n    self.isVisible = true;\n  },\n  /**\r\n      *    visible flat\r\n      */\n  isVisible: function isVisible() {\n    var self = this;\n    return self.isVisible;\n  },\n\n  destroy: function destroy() {\n\n  },\n\n  prepareForRefresh: function prepareForRefresh() {\n\n  } });","\n/*\r\n *   Name: BizAgi Workportal Action\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to process workportal actions in order to take decisions\r\n */\n\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.actions.action\", {\n  BIZAGI_WORKPORTAL_ACTION_ROUTING: \"routing\",\n  BIZAGI_WORKPORTAL_ACTION_SEARCH: \"search\" },\n{\n\n  /*\r\n   *   Makes the base processing of the layout (mix templates + data)\r\n   *   after all that processing will call a post-render method to\r\n   *   be implemented in each device to apply custom plugins\r\n   *   Returns a promise because the rendering could be asynchronous\r\n   */\n  render: function render() {\n    bizagi.assert(false, \"An action can't be rendered because it has no view\");\n  },\n\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    bizagi.assert(false, \"An action can't be rendered because it has no view\");\n  },\n\n  /*\r\n      *   Executes the action\r\n      *   Could return a deferred\r\n      */\n  execute: function execute() {\n    // Override in implementations\n  } });","/*\r\n *   Name: BizAgi Workportal Routing Action\r\n *   Author: Diego Parra && Edward Morales\r\n *   Comments:\r\n *   - This script will execute the routing action to determine what to do in the workportal\r\n *   - This class has been refactored based on jira story DRAGON-4943\r\n */\n\nbizagi.workportal.actions.action.extend(\"bizagi.workportal.actions.routing\", {}, {\n\n  /*\r\n                                                                                   *   Executes the action\r\n                                                                                   *   Could return a deferred\r\n                                                                                   */\n  execute: function execute(params) {\n    var self = this;\n    self.params = params || {};\n    /* New implementation of routing*/\n\n    $.when(self.dataService.routing.getRoute(params)).done(function (route) {\n      var deferredDialogOpened = $.Deferred();\n      route = route || {};\n      if (self.params.isOfflineForm != \"undefined\" && self.params.isOfflineForm == true) {\n        route.moduleParams = $.extend(route.moduleParams, { formsRenderVersion: self.params.formsRenderVersion, isOfflineForm: self.params.isOfflineForm, idCase: self.params.idCase, idWorkitem: self.params.idWorkitem, guid: self.params.guid }) || {};\n      } else\n      {\n        route.moduleParams = route.moduleParams || {};\n      }\n\n      switch (route.module) {\n\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER:\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC:\n          self.publish(\"changeWidget\", route.moduleParams);\n          self.publish(\"closeAllDialogs\");\n          break;\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:\n\n          /**\r\n                                                                                           * TODO: To improvement when enable workportal menu from live processes\r\n                                                                                           */\n          bizagi.util.enableWorkPortalMenu();\n          self.publish(\"closeAllDialogs\");\n          self._executeWidgetProjectDashboard(params, route.moduleParams);\n          break;\n\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM:\n          var parameters = {\n            title: self.getResource(\"workportal-widget-newcase-title\"),\n            width: 850,\n            height: 750,\n            refreshInbox: false,\n            onClose: route.moduleParams.onClose,\n            dialogOpened: deferredDialogOpened };\n\n\n          self.publish(\"showDialogWidget\", {\n            widgetName: route.module,\n            data: route.moduleParams.data,\n            modalParameters: parameters,\n            closeVisible: false,\n            dialogClass: \"ui-bizagi-start-form-dialog\" });\n\n\n          deferredDialogOpened.promise().done(function (response) {\n            self.publish(\"onWidgetIncludedInDOM\");\n            response.widgetReference.postRender();\n          });\n\n          break;\n        case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING:\n          var parameters = {\n            title: self.getResource(\"workportal-widget-routing-window-selector\"),\n            width: 670,\n            height: 450,\n            refreshInbox: false,\n            onClose: route.moduleParams.onClose };\n\n\n          if (self.isThereAsync(route.moduleParams.data)) {\n            self.asyncWidget(route.moduleParams);\n          } else {\n            self.publish(\"showDialogWidget\", {\n              widgetName: route.module,\n              data: route.moduleParams.data,\n              modalParameters: parameters,\n              onClose: parameters.onClose });\n\n          }\n\n          break;}\n\n\n    });\n  },\n\n  /**\r\n      * execute the inbox or the noHavePendingActions in this case\r\n      * @overridable\r\n      * @param {JSON} params \r\n      * @param {JSON} moduleParams \r\n      */\n  _executeWidgetProjectDashboard: function _executeWidgetProjectDashboard(params, moduleParams) {\n    var self = this;\n\n    if (self.validateGoToLastSection(\n    bizagi.services.preferences().getPreference(\"goToInboxOnActivityExit\"),\n    moduleParams.referrer,\n    moduleParams.hasWorkItems))\n    {\n      self.goToInbox(moduleParams);\n    } else {\n      var data = $.extend(params, moduleParams);\n      bizagi.util.setContext(data);\n      self.publish(\"changeWidget\", moduleParams);\n    }\n  },\n\n  /*\r\n     * Go to inbox when an activity ends\r\n     */\n  goToInbox: function goToInbox(routeModuleParams) {\n    var self = this;\n    self.publish(\"changeWidget\", {\n      widgetName: self.workportalFacade.workportal.getWidgetByCookie(true) });\n\n\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    var messageWhenGoToInbox = routeModuleParams.messageForm ? routeModuleParams.messageForm : bizagi.localization.getResource(\"render-without-globalform\");\n\n    self.notifier.showSucessMessage(messageWhenGoToInbox, \"\", \"\");\n  },\n\n  validateGoToLastSection: function validateGoToLastSection(goToInboxPreference, widgetReferrer, hasWorkItems) {\n    return goToInboxPreference &&\n    widgetReferrer === \"bizagi.workportal.widgets.project.activity\" &&\n    hasWorkItems === false;\n  },\n\n  /*\r\n     * Search for async workitems\r\n     */\n  isThereAsync: function isThereAsync(data) {\n    var workitems = data.workItems,wi,index = 0;\n    var length = workitems.length,result = false;\n    if (length > 0) {\n      for (; index < length;) {\n        wi = workitems[index++];\n        if (wi.isAsynch === \"true\") {\n          result = result || [];\n          result.push(wi);\n        }\n      }\n    }\n    return result;\n  },\n\n  asyncWidget: function asyncWidget(params) {\n    var self = this;\n    params.widgetName = \"async\";\n    self.publish(\"changeWidget\", params);\n  } });","/*\r\n *   Name: BizAgi Workportal Routing Action Desktop\r\n *   Author: Kvn Alvarado\r\n *   Comments:\r\n *   - This script was created for Desktop version\r\n */\n\nbizagi.workportal.actions.routing.extend(\"bizagi.workportal.actions.routing\", {\n\n  /**\r\n                                                                                 * sections to return when the user finish a case\r\n                                                                                 */\n  RETURN_TO: {\n    INBOX: \"inbox\",\n    INBOX_GRID: \"inboxGrid\",\n    HOME_PORTAL: \"homeportal\",\n    LAST_INBOX: \"lastInbox\",\n    QUERIES: \"queryform\",\n    BAM: \"reports\",\n    NONE: \"none\" },\n\n\n  /**\r\n                     * \r\n                     */\n  LAUNCH_NOTIFICATION: function LAUNCH_NOTIFICATION() {} },\n\n{\n\n  /**\r\n   * @override\r\n   */\n  _executeWidgetProjectDashboard: function _executeWidgetProjectDashboard(params, moduleParams) {\n    var self = this,\n    _calcResult = self._calcOnFinishWhere2Go(moduleParams);\n\n    self._returnTo(_calcResult.goBack, _calcResult.where, moduleParams);\n    self._changeWidgetTo(_calcResult.executeChangeWidget, _calcResult.where, params, moduleParams);\n\n  },\n\n\n  _showToastMessage: function _showToastMessage(moduleParams) {\n    var self = this;\n    self.Class.LAUNCH_NOTIFICATION = function () {\n      self._clearLaunchNotification();\n      notifier = bizagi.injector.get(\"notifier\");\n      var messageWhenGoToInbox = moduleParams.messageForm ? moduleParams.messageForm : bizagi.localization.getResource(\"render-without-globalform\");\n      notifier.showSucessMessage(messageWhenGoToInbox, \"\", \"\");\n    };\n  },\n\n  _clearLaunchNotification: function _clearLaunchNotification() {\n    var self = this;\n    self.Class.LAUNCH_NOTIFICATION = function () {};\n  },\n\n  /**\r\n      * review if is necessary to return back or continue with the activity\r\n      * @param {JSON} moduleParams for changeWidget\r\n      */\n  _calcOnFinishWhere2Go: function _calcOnFinishWhere2Go(moduleParams) {\n    var self = this,\n    _to = self.Class.RETURN_TO,\n    _referrer = bizagi.util.tryCatch(function () {return bizagi.referrerParams.referrer;}, _to.NONE),\n    _isQueriesReferrer = _referrer === _to.QUERIES,\n    _preferGo2Inbox = bizagi.services.preferences().getPreference(\"goToInboxOnActivityExit\"),\n    _go2LastSection = self.validateGoToLastSection(_preferGo2Inbox, moduleParams.referrer, moduleParams.hasWorkItems),\n    _execute = !_go2LastSection || _go2LastSection && _isQueriesReferrer,\n    _where = function _where() {\n      var res;\n      switch (_referrer) {\n        case _to.INBOX_GRID:\n          res = _to.INBOX;\n          break;\n        case _to.HOME_PORTAL: // not supporting goBack when implement please remove this line\n        case undefined:\n          res = _to.NONE;\n          break;\n        default:\n          res = _referrer;\n          break;}\n\n      return res;\n    };\n\n    return {\n      where: _where(),\n      goBack: _go2LastSection,\n      executeChangeWidget: _execute };\n\n  },\n\n  /**\r\n      * if execute then continue changeWidget\r\n      * @param {Boolean} execute the changeWidget\r\n      * @param {Class.RETURN_TO} where the referrer is\r\n      * @param {JSON} params for setContext\r\n      * @param {JSON} moduleParams for changeWidget\r\n      */\n  _changeWidgetTo: function _changeWidgetTo(execute, where, params, moduleParams) {\n    var self = this,\n    data = $.extend(params, moduleParams),\n    _moduleParams = bizagi.clone(moduleParams),\n    _show = function _show() {\n      bizagi.util.setContext(data);\n      _moduleParams.where = where;\n      self.publish(\"changeWidget\", _moduleParams);\n    };\n    if (execute)\n    _show();\n  },\n\n  /**\r\n      * when the user goBack, execute goBack to the where site\r\n      * if where site is NONE return to inbox\r\n      * @param {Boolean} goBack \r\n      * @param {Class.RETURN_TO} where the referrer is\r\n      * @param {JSON} moduleParams for goToInbox\r\n      */\n  _returnTo: function _returnTo(goBack, where, moduleParams) {\n    var self = this,\n    _to = self.Class.RETURN_TO,\n    _return = function _return(where) {\n      where === _to.NONE ? self.goToInbox(moduleParams) : self._goBack(moduleParams);\n    };\n\n    if (goBack)\n    _return(where);\n  },\n\n  /**\r\n      * \r\n      */\n  _goBack: function _goBack(moduleParams) {\n    var self = this;\n    var navigator = bizagi.injector.get(\"bizagi.workportal.widgets.navigator\");\n    self._showToastMessage(moduleParams);\n    navigator.goToBack();\n  } });","\n/*\r\n*   Name: BizAgi Workportal Webpart Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a wrapper class to to load custom webparts\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.webpart\", {}, {\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_WEBPART;\n  },\n\n\n  /*\r\n     *   Constructor\r\n     */\n  init: function init(workportalFacade, dataService, params) {\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    // Set webpart \n    this.webpartName = params.webpart;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var content = self.content = $(\"<div />\");\n    var workportal = self.getWorkportal();\n\n    // Execute webpart\n    workportal.executeWebpart($.extend(self.params, {\n      canvas: content,\n      webpart: self.webpartName }));\n\n\n    return content;\n  } });","/*\r\n *   Name: BizAgi Workportal Print Version Widget Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script will define a base class to to define the print version widget\r\n *       the rendering module is loaded here\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.print\", {}, {\n  /*\r\n                                                                                 *   Returns the widget name\r\n                                                                                 */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"print\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","\n/*\n*   Name: BizAgi Workportal Search Controller\n*   Author: Jair Cardenas\n*   Comments:\n*   -   Base library for fontsize \n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.fontsize\", {}, {\n  /*\n                                                                                    *   Returns the widget name\n                                                                                    */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE;\n  },\n\n  /*\n     *   Renders the content for the current controller\n     *   Returns a deferred because it has to load the current user\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"fontsize\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/*\r\n*   Name: BizAgi Workportal Routing Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to to define the routing widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.routing\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"routing\");\n    var def = new $.Deferred();\n    //check subprocess\n    if (self.params.data.checkProcess || self.params.data.checkWorkItems) {\n      $.when(\n      self.dataService.getCaseSubprocesses({\n        idCase: self.params.data.idCase })).\n\n      done(function (process) {\n        self.params.data.subProcessPersonalized = process[\"subProcesses\"];\n\n        //Validate in workitems have property idtask. Scenario when workitem is activity from plan\n        self.params.data.workItems.forEach(function (workitem) {\n          if (!workitem.idTask) {\n            workitem.idTask = \"\";\n          }\n        });\n\n        // Loads case workitems\n        // Solve QA-2197\n        var content = self.content = $.tmpl(\n        template,\n        self.params.data,\n        {\n          formatDate: self.formatDate });\n\n\n        def.resolve(content);\n\n      });\n    }\n    return def.promise();\n  },\n\n  formatDate: function formatDate(item) {\n    return bizagi.util.formatDateFromInvariantStringDate(item.estimatedSolutionDate);\n  } });","/*\r\n*   Name: Start Form Widget Controller\r\n*   Author: Fabian Moreno (based on Diego Parra version)\r\n*   Comments:\r\n*   -   This script will provide start form widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.startForm\", {}, {\n\n  /*\r\n                                                                                     *   Returns the widget name\r\n                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM;\n  },\n\n  /*\r\n     *   Constructor\r\n     */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.idProcess = params.data.idProcess;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"startForm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.startForm\").concat(\"#ui-bizagi-workportal-widget-start-form\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"startForm\");\n\n    // Render base template\n    self.content = $.tmpl(template);\n\n    // Check if the content is already in dom\n    var includedInDom = self.content.parents(\"body\").length > 0;\n    if (includedInDom) {\n      self.renderForm();\n    } else {\n      // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\n      // (grids and uploads)\n      self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\n\n        // Load render page\n        self.renderForm({\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          withOutGlobalForm: self.params.withOutGlobalForm || false,\n          isOfflineForm: self.params.isOfflineForm || false,\n          messageForm: self.params.messageForm || \"\" });\n\n      });\n    }\n\n  },\n\n\n  /*\r\n     *   Renders the form component of the widget\r\n     */\n  renderForm: function renderForm(params) {\n    var self = this,resultRender;\n\n    var renderContainer = self.getComponentContainer(\"render\");\n    if (!params.withOutGlobalForm) {\n      // it has't activities and global form\n      var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ? self.dataService.serviceLocator.proxyPrefix : \"\";\n      var database = typeof self.dataService.database !== \"undefined\" ? self.dataService.database : \"\";\n\n\n      // Load render page\n      var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\n      // Executes rendering into render container\n\n      params.action = \"LOADSTARTFORM\";\n      params.idProcess = self.idProcess;\n\n      resultRender = rendering.execute($.extend(params, {\n        canvas: renderContainer,\n        menu: self.menu }));\n\n\n      // Attach handler to render container to subscribe for routing events\n      renderContainer.bind(\"routing\", function (context, triggerparams) {\n        //Close de startForm dialog and executes the routing action\n        self.publish(\"closeCurrentDialog\");\n\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase || triggerparams.idCase,\n          fromTask: self.params.fromTask || self.params.idTask,\n          fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\n          isOfflineForm: self.params.isOfflineForm,\n          formsRenderVersion: self.params.formsRenderVersion,\n          onClose: function onClose() {\n            // If the user closes the dialog we need to redirect to inbox widget\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.currentInboxView });\n\n          } };\n\n        params = $.extend(params, triggerparams);\n        self.publish(\"executeAction\", params);\n      });\n\n      //\n      renderContainer.bind(\"oldrenderintegration\", function () {\n        if (bizagi.oldrenderevent === undefined) {\n          bizagi.oldrenderevent = true; // has been loaded\n          var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n          var eventer = window[eventMethod];\n          var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n          // Listen to message from child window\n          eventer(messageEvent, function (e) {\n            e.stopPropagation();\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n              idCase: e.data });\n\n          }, false);\n        }\n\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,\n          idCase: self.params.idCase,\n          idWorkitem: self.params.idWorkitem,\n          idTask: self.params.idTask,\n          onlyUserWorkItems: self.params.onlyUserWorkItems,\n          referrer: self.params.referrer,\n          eventAsTasks: self.params.eventAsTasks });\n\n\n      });\n    } else {\n      var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\n      var message = params.messageForm !== \"\" ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\n\n      if (typeof self.params !== \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm === true) {\n        message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\n      }\n\n      var errorHtml = $.tmpl(errorTemplate, {\n        message: message });\n\n      // Remove loading icon from summary container\n      errorHtml.appendTo(renderContainer);\n\n      resultRender = $.Deferred();\n      resultRender.fail();\n    }\n\n    // Keep reference to rendering facade\n    self.renderingFacade = rendering;\n\n    // Resize layout\n    self.resizeLayout();\n\n    return resultRender;\n  },\n\n\n  routingExecute: function routingExecute(element) {\n    // Executes routing action\n    if (element === undefined) {\n      return false;\n    }\n\n    var self = this;\n\n    var idCase = element.find(\"#idCase\").val() || self.params.idCase;\n    var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\n    var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\n    var idTask = element.find(\"#idTask\").val();\n    var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkflow: idWorkflow,\n      idWorkItem: idWorkItem,\n      idTask: idTask,\n      eventAsTasks: eventAsTasks });\n\n\n    return true;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Dispose the rendering binds\n    if (self.rendering) {\n      var renderContainer = self.rendering.canvas;\n      renderContainer.off();\n\n      if (self.rendering.form) {\n        self.rendering.form.dispose();\n      }\n\n      if (this.IsDisposed)\n      return;\n    }\n\n    // Call base\n    self._super();\n  } });","/*\r\n*   Name: BizAgi Workportal my search search lists Widget Controller\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define a base class to to define the \"my search search lists\" widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mySearchList\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"mySearchListWrapper\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.loadForm\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    this.workportalFacade = workportalFacade;\n    this.dataService = dataService;\n    this.params = params || {};\n    this.form;\n    this.searchCriteriasApplied = params.searchCriteriasApplied || [];\n  },\n\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM;\n  },\n\n  preProcessValue: function preProcessValue(value, control) {\n    if (control.properties.type == \"combo\" || control.properties.type == \"radio\") {\n      value = { \"id\": value[0] };\n    }\n\n    return value;\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"loadForm\");\n\n    self.content = $.tmpl(template);\n\n    bizagi.loader.start(\"rendering\").then(function () {\n\n      var renderFacade = bizagi.rendering.facade.extend({\n        processForm: function processForm(data, renderFactory, params) {\n          var containerParams = $.extend(params, {\n            renderFactory: renderFactory,\n            dataService: params.dataService || this.dataService,\n            data: data });\n\n          var form = new bizagi.rendering.desktop.form(containerParams);\n\n          //set default data\n          if (self.searchCriteriasApplied.length > 0) {\n            $.each(self.searchCriteriasApplied, function (key, value) {\n              var control = form.getRenderById(value.id);\n              if (control) {\n                control.setValue(self.preProcessValue(value.value, control));\n              }\n            });\n          }\n\n          // Render the full form\n          form.render();\n\n          return form;\n        } });\n\n\n      var render = new renderFacade();\n\n      var queryFormParams = {\n        h_action: \"QUERYFORM\",\n        h_contexttype: \"entity\",\n        h_idForm: self.params.guidForm,\n        dataType: \"text\" };\n\n\n\n      //request to queryForm definition service\n      self.dataService.getQueryForm(queryFormParams).done(function (data) {\n        //convert the form json\n        var regexTypeString = /\\\"type\\\"\\s*:\\s*\\\"([':.,-\\[\\]\\w\\s]*)\\\"/g;\n        var regexIncludedInResultString = /\\\"includedInResult\\\"\\s*:\\s*(true)/g;\n\n        var processedForm = data.replace(regexTypeString, function (match, g1, offset, string) {\n          return match.replace(g1, g1.replace(/query/i, \"\").toLowerCase());\n        });\n        processedForm = processedForm.replace(regexIncludedInResultString, '\"includedInResult\":false');\n\n        var form = JSON.parse(processedForm);\n        form.form.buttons = [];\n        form.form.properties.isSearchesQueryForm = true;\n\n        // For searches of Rubik the \"metadata\" field is required\n        form.form.contextType = form.form.contextType || \"metadata\";\n\n        var renderingParams = { canvas: $(self.content), data: form };\n\n        render.execute(renderingParams).done(function (form) {\n          self.form = form;\n        });\n\n        return self.content;\n      });\n    });\n  } });","/*\r\n*   Name: BizAgi Workportal New Case Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a base class to to define the sub menu widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.subMenu\", {}, {\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"menu.submenu\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/*\r\n *   Name: BizAgi Workportal Search Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   Base library for search cases\r\n */\n\nbizagi.workportal.widgets.listCases.extend(\"bizagi.workportal.widgets.search\", {}, {\n  /*\r\n                                                                                      *   Returns the widget name\r\n                                                                                      */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;\n  },\n  /*\r\n      *   Renders the content for the current controller\r\n      *   Returns a deferred because it has to load the current user\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"search\");\n\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  },\n  routingExecute: function routingExecute(element) {\n    // Executes routing action\n    if (element == undefined) {\n      return false;\n    }\n\n    var self = this;\n\n    var idCase = element.find(\"#idCase\").val();\n    var idWorkItem = element.find(\"#idWorkItem\").val();\n    var idTask = element.find(\"#idTask\").val();\n    var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\n\n    self.publish(\"executeAction\", {\n      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      idCase: idCase,\n      idWorkItem: idWorkItem,\n      idTask: idTask,\n      eventAsTasks: eventAsTasks });\n\n  } });","/*\r\n*   Name: BizAgi Generic Page Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*/\n\n\n// Extends itself\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.page\", {}, {\n  /*\r\n                                                                                *   Returns the widget name\r\n                                                                                */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"page\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.page\").concat(\"#ui-bizagi-workportal-widget-page\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"page\");\n    var content = self.content = $.tmpl(template, {});\n\n    self.renderStaticForm(self.params);\n\n    // Return content\n    return content;\n  },\n\n  renderStaticForm: function renderStaticForm(params) {\n    var self = this;\n    var canvas = self.getComponentContainer(\"render\");\n    var rendering = new bizagi.rendering.facade(params.context);\n\n    // Executes rendering into render container\n    params = params || {};\n    $.extend(params, {\n      canvas: canvas });\n\n\n    rendering.execute(params);\n\n    canvas.bind(\"close\", function () {\n      self.publish(\"closeCurrentDialog\");\n    });\n  } });","/*\r\n*   Name: BizAgi Desktop Queries Dialog implementation\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   ???\r\n*/\n\n\n// Extends itself\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.genericiframe\", {}, {\n  /*\r\n                                                                                         *   Returns the widget name\r\n                                                                                         */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME;\n  },\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"genericiframe\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.genericiframe\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    var template = self.getTemplate(\"genericiframe\");\n    var data = {\n      widgetURL: self.params.widgetURL };\n\n    var content = self.content = $.tmpl(template, data);\n\n    // Return content\n    return content;\n  } });","/*\r\n*   Name: BizAgi Workportal Integration old render within new look and feel\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script define base controller to integrate old render within new workportal\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.oldrenderintegration\", {}, {\n\n  /*\r\n                                                                                                *   Returns the widget name\r\n                                                                                                */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"integration-old-render\");\n\n    var data = {};\n    data.url = self.params.url || \"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase=\" + self.params.idCase + \"&idWorkitem=\" + self.params.idWorkitem + \"&idTask=\" + self.params.idTask;\n\n    // Render content\n    var content = self.content = $.tmpl(template, data);\n\n    // Set inbox view variable\n    bizagi.workportal.currentInboxView = self.getWidgetName();\n\n    return content;\n  } });","\n/*\r\n *   Name: BizAgi Workportal Fontsize Controller\r\n *   Author: Jair Cardenas\r\n *   Comments:\r\n *   -\tThis script will provide base library for fontsize\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.fontsize.extend(\"bizagi.workportal.widgets.fontsize\", {}, {\n\n  /*\r\n                                                                                       *\t Constructor\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"fontsize\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.fontsize\"),\n      useNewEngine: false });\n\n  },\n  /*\r\n      *\t To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var sizeSelected = $('body').data('sizeselected') || 'font-large';\n\n    // Set templates\n    self.fontsizeTemplate = self.getTemplate(\"fontsize\");\n\n    // Set focus\n    $('.ui-bizagi-wp-font-content a', content).removeClass('active');\n    $('.ui-bizagi-wp-font-content .' + sizeSelected + ' a', content).addClass('active');\n\n    var fontButton = $('.font-switcher', content);\n    $(fontButton).click(function () {\n      var textSize = $(this).parent().attr('class');\n      $('body').data('sizeselected', textSize);\n      $('.ui-bizagi-wp-font-content a', content).removeClass('active');\n      $('.ui-bizagi-wp-font-content .' + textSize + ' a', content).addClass('active');\n\n      $('html, body').removeClass('font-medium font-large font-x-large').addClass(textSize);\n      return true;\n    });\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Main Controller\r\n*   Author: Diego Parra (based on  Edward Morales version)\r\n*   Comments:\r\n*   -   This script will override main controller class to apply custom stuff just for desktop device\r\n*/\n\n// Auto extend\nbizagi.workportal.controllers.main.extend(\"bizagi.workportal.controllers.main\", {}, {\n\n  /*\r\n                                                                                         *   Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService);\n\n    // Subscribe to show old window event\n    this.subscribe(\"showOldWindow\", function (e, params) {\n      self.showOldWindow(params);\n    });\n    self.sessionTimeOut();\n  },\n\n  /*\r\n        * call session time out service\r\n        */\n  sessionTimeOut: function sessionTimeOut() {\n    var self = this;\n\n    // Instantiate the sessionTimeOut Service\n    bizagi.injector.get('sessionTimeOutService');\n    self.loadTemplates({\n      \"session-timeout\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeout\").concat(\"#session-timeout\") });\n\n    self.loadTemplates({\n      \"session-timeout-expired\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeoutExpired\").concat(\"#session-timeout-expired\") });\n\n    $().dialog();\n  },\n\n  /*\r\n        *   Renders the content for the current controller\r\n        *\r\n        */\n  renderContent: function renderContent() {\n    var self = this;\n\n    // Check navigator compatibility\n    if (bizagi.util.isIE()) {\n      var version = bizagi.util.getIEVersion();\n      if (version < 9) {\n        return self.renderIENotCompatibleTemplate();\n      }\n    }\n\n    return self._super();\n  },\n\n  /*\r\n     *   Render not compatible template\r\n     */\n  renderIENotCompatibleTemplate: function renderIENotCompatibleTemplate() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"workportal.notCompatibleIE\");\n\n    // Render content\n    var content = self.content = $.tmpl(template, { url: BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx\" });\n\n    // Set resize layout event\n    $(window).resize(function () {\n      self.resizeLayout();\n    });\n\n    return content;\n  },\n\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    // TODO: Apply logic here\n  },\n\n  /*\r\n      *   Add dialog to dialogStack\r\n      */\n  addDialogToDialogStack: function addDialogToDialogStack(dialog) {\n    var self = this;\n    // Add to stack\n    bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\n    bizagi.workportal.desktop.dialogStack.push(dialog);\n  },\n\n  /*\r\n     *   Shows a widget inside a modal dialog\r\n     *   Implement on each device\r\n     */\n  showDialogWidget: function showDialogWidget(data) {\n    var self = this;\n    var dialog = new bizagi.workportal.desktop.widgets.dialog(self.dataService, self.workportalFacade);\n    dialog.renderWidget(data);\n\n    self.addDialogToDialogStack(dialog);\n\n    return dialog;\n  },\n\n  /*\r\n     *   Close the current modal dialog\r\n     *   Implement on each device\r\n     */\n  closeCurrentDialog: function closeCurrentDialog(params) {\n    // Remove from\n    bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\n    if (bizagi.workportal.desktop.dialogStack.length > 0) {\n      var dialog = bizagi.workportal.desktop.dialogStack.pop();\n      try {\n        dialog.close();\n      } catch (e) {\n        //\n      }\n    }\n\n    // Close a quirks mode popup if opened\n    bizagi.closeQuirksModePopup();\n  },\n\n  /**\r\n      *   Close all modal dialogs\r\n      *   Implement on each device\r\n      */\n  closeAllDialogs: function closeAllDialogs() {\n    var self = this;\n    bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\n    if (bizagi.workportal.desktop.dialogStack.length > 0) {\n      for (iDialog = 0, iTotalDialog = bizagi.workportal.desktop.dialogStack.length; iDialog < iTotalDialog; iDialog++) {\n        var dialog = bizagi.workportal.desktop.dialogStack.pop();\n        try {\n          dialog.close();\n        } catch (e) {\n          //\n        }\n      }\n    }\n    /**\r\n       * this try catch was added for this error: TM09197\r\n       * Uncaught Error: cannot call methods on dialog prior to initialization; attempted to call method 'close'\r\n       */\n    try {\n      self.closeContentDialog($(\".ui-dialog-content\")); //Close the dialogs that were created with jquery UI and couldn't be closed with dialog.close()\n\n    } catch (e) {\n      //\n    }\n  },\n\n  /**\r\n      * close dialog content\r\n      * @param {*} dialogContent \r\n      */\n  closeContentDialog: function closeContentDialog(dialogContent) {\n    dialogContent.dialog(\"close\");\n  },\n\n  /*\r\n     *   Popup a widget\r\n     *   Implement on each device\r\n     */\n  popupWidget: function popupWidget(params) {\n    var self = this;\n    var popup = new bizagi.workportal.desktop.widgets.popup(self.dataService, self.workportalFacade, params.options);\n    popup.renderWidget(params);\n\n    // Attach closed handler if present\n    if (params.options && params.options.closed) {\n      $.when(popup.closed()).\n      done(function () {\n        // Executes callback\n        params.options.closed();\n      });\n    }\n  },\n\n  /*\r\n     *   Shows an url inside a window popup\r\n     */\n  showOldWindow: function showOldWindow(params) {\n    // Call bizagi internal function\n    var url = bizagi.util.extendQueryString(params.url, { referrer: \"workportal\" });\n    bizagi.showQuirksModePopup(url, params.windowParameters);\n  },\n\n  cleanWidgets: function cleanWidgets() {\n\n    this.workarea.cleanWidgets();\n\n    if (bizagi.workportal.desktop.popup) {\n      if (bizagi.workportal.desktop.popup.instance) {\n        if (bizagi.workportal.desktop.popup.instance.dontClose !== undefined) {\n          bizagi.workportal.desktop.popup.instance.dontClose = false;\n          bizagi.workportal.desktop.popup.instance.close();\n        }\n      } else {\n        var innerDialog = $(\".modal .complex-frame\");\n        if (innerDialog.length > 0) {\n          innerDialog.closest(\".modal\").remove();\n        }\n      }\n    }\n  },\n\n  refreshQueryFormShortCut: function refreshQueryFormShortCut() {\n    if (bizagi.workportal.widgets.queries.shortcut.instance)\n    bizagi.workportal.widgets.queries.shortcut.instance.renderStoredQueries();\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Menu Controller\r\n *   Author: Diego Parra (based on  Edward Morales version)\r\n *   Comments:\r\n *   -   This script will override menu controller class to apply custom stuff just for desktop device\r\n */\n\n\nbizagi.workportal.controllers.menu.extend(\"bizagi.workportal.controllers.menu\", {}, {\n\n  /**\r\n                                                                                       * same click on inbox menu option\r\n                                                                                       */\n  goToInbox: function goToInbox() {\n    var self = this;\n    var inbox = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX;\n    var grid = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n    var homeportal = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n    var actualWidget;\n    var storeWidget;\n    if ($.isFunction(bizagi.cookie) && bizagi.util.defaultWidget() !== homeportal) {\n      storeWidget = bizagi.util.defaultWidget();\n    } else\n    {\n      storeWidget = grid;\n    }\n\n    bizagi.loader.start(\"inbox\").then(function () {\n      switch (storeWidget) {\n        case inbox:\n          actualWidget = inbox;\n          break;\n        case grid:\n          actualWidget = grid;\n          break;\n        case homeportal:\n          actualWidget = homeportal;\n          break;\n        default:\n          actualWidget = grid;\n          break;}\n\n      self.publish(\"changeWidget\", {\n        widgetName: actualWidget });\n\n\n    });\n    self.resetNavigatorInfo();\n  },\n\n  /**\r\n      *\r\n      * @return {*}\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var defer = new $.Deferred();\n    var content = self.getContent();\n    var searchContent = $(\"#ui-bizagi-wp-widget-searchContainer\", content);\n    var iconsTemplate = self.workportalFacade.getTemplate(\"menu.security\");\n    var menuContent = $(\"#main_menu\", content);\n\n\n    /**\r\n                                                 * Define security fo actual stakeholder\r\n                                                 * @type {bizagi.workportal.controllers.menu.security}\r\n                                                 */\n\n    var sec = bizagi.menuSecurity;\n\n    /**\r\n                                    * Draw menu with allowed sections\r\n                                    */\n    $.tmpl(iconsTemplate, sec, {\n      reportsSecurity: function reportsSecurity() {\n        return sec.AnalysisReports;\n      } }).\n    appendTo(menuContent);\n\n    /**\r\n                            * Set highlight item menu\r\n                            */\n    switch (self.workportalFacade.workportal.getWidgetByDataUser()) {\n      case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:\n        $(\"#menuListHome\", menuContent).addClass(\"activeMenu\").siblings().removeClass(\"activeMenu\");\n        break;\n      case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:\n      case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:\n        $('#menuListInbox', menuContent).addClass(\"activeMenu\").siblings().removeClass(\"activeMenu\");\n        break;}\n\n\n    // Fix logout button\n    if (!sec.LogOut) {\n      //Hide it\n      $(\"#logout\", content).hide();\n    }\n    //Prevent event beforeunload to be trigger by clicking the menu\n    $(\"#main_menu a\", content).click(function (event) {\n      event.preventDefault();\n    });\n\n    // Fix search field\n    if (!sec.Search) {\n      $(\"#ui-bizagi-wp-widget-searchContainer\", content).remove();\n    }\n\n    $(\"#main_menu li\", content).on(\"click\", self.setActiveSection);\n\n    //To add the style to know the item is selected after go to inbox from decontextualized plan\n    self.subscribe(\"changeWidget\", function () {\n      if (arguments[1].widgetName === self.workportalFacade.workportal.getWidgetByCookie(true)) {\n        self.setActiveSection.apply($(\"#main_menu li#menuListInbox\")[0]);\n      }\n    });\n\n    if (!sec.Inbox) {\n      $(\"#menuListInbox\", content).hide();\n    }\n\n    // Bind Widgets button\n    $(\"#main_menu li#menuListWidget\", content).click(function () {\n      self.showWidgetsPopup();\n    });\n\n    // Bind New Case button\n    $(\"#main_menu li#menuListNew\", content).click(function () {\n      bizagi.loader.start(\"newcase\").then(function () {\n        self.showNewCasePopup();\n      });\n    });\n\n    // Bind my Search\n    if (bizagi.util.parseBoolean(bizagi.override.enableMySearch) &&\n    bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0) {\n      $(\"#ui-bizagi-wp-widget-searchContainer\", content).click(function () {\n        self.showMySearchPopup();\n      });\n    }\n\n    $(\"#main_menu li#menuListHome\", content).click(function () {\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n    });\n\n    //  Bind inbox button\n    $(\"#main_menu li#menuListInbox\", content).click(self.goToInbox.bind(self));\n\n    // Bind New Case button\n    $(\"#main_menu li#menuListQueries\", content).click(function () {\n      self.showQueriesPopup();\n    });\n\n    $(\"#tempEntities\", content).click(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES,\n        modalParameters: {\n          title: self.getResource(\"workportal-menu-preferences\"),\n          width: \"1020px\",\n          showCloseButton: false } });\n\n\n    });\n\n    // Bind admin menu\n    $(\"#menuListAdmin\", content).click(function () {\n      self.renderAdminMenu();\n    });\n\n    $(\"#menuListQuickProcess\", content).click(function () {\n      self.renderQuickProcessMenu();\n      self.validateUrlInQuickProcess();\n    });\n\n    $(\"#menuListReports\", content).click(function () {\n\n      self.renderReportsMenu();\n    });\n\n    $(\"#menuUserPrivacy\", content).click(function () {\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY,\n        closeVisible: false,\n        maximize: false,\n        modalParameters: {\n          title: self.getResource(\"workportal-project-discussion-privacy\"),\n          width: 600,\n          height: \"auto\" } });\n\n\n    });\n\n    $(\"#menuListPreferences\", content).click(function () {\n      var url = self.dataService.getUrl({\n        \"endPoint\": \"ListPreferences\" });\n\n\n      var widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES;\n      bizagi.loader.start(\"admin\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: widgetName,\n          widgetURL: url,\n          closeVisible: false,\n          maximize: true,\n          modalParameters: {\n            title: self.getResource(\"workportal-menu-preferences\"),\n            width: 600,\n            height: 710 } });\n\n\n      });\n    });\n    $(\"#displayOptions\", content).click(function () {\n\n      var widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS;\n      bizagi.loader.start(\"admin\").then(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: widgetName,\n          closeVisible: false,\n          maximize: false,\n          modalParameters: {\n            title: self.getResource(\"workportal-menu-display-options\"),\n            width: 600,\n            height: 280 } });\n\n\n      });\n    });\n    $(\"#user\", content).click(function () {\n      self.showUserProfileMenu();\n    });\n    $(\"#qr\", content).click(function () {\n      self.showQRCodePopup();\n    });\n    defer.resolve(content);\n\n\n    // Bind Search field\n    var inputSearchField = $(\"#menuQuery\", searchContent);\n\n    // Bind Font Size\n    $(\".ui-bizagi-wp-bt-font\", content).click(function () {\n      self.renderFontMenu();\n    });\n\n    //TODO: Remove this variable, It is used for mocking the service\n    window.CURRENT_THEME_REMOVE_IT = \"theme1\";\n    $(\".ui-bizagi-wp-bt-classic-theme,.ui-bizagi-wp-bt-modern-theme,.ui-bizagi-wp-bt-booking-theme\", content).hide();\n\n    $(\".ui-bizagi-wp-bt-classic-theme\", content).click(function () {\n      $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\n      $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\n\n      //change to classic theme\n      window.CURRENT_THEME_REMOVE_IT = \"theme1\";\n\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n\n      $(\".ui-bizagi-wp-bt-modern-theme\").show();\n      $(\".ui-bizagi-wp-bt-booking-theme\").show();\n      $(\".ui-bizagi-wp-bt-classic-theme\").hide();\n      $(\"#user-profile\").hide(\"fast\");\n    });\n\n    $(\".ui-bizagi-wp-bt-modern-theme\", content).click(function () {\n      $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\n      $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\n\n      //change to modern theme\n      window.CURRENT_THEME_REMOVE_IT = \"theme2\";\n\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n\n      $(\".ui-bizagi-wp-bt-modern-theme\").hide();\n      $(\".ui-bizagi-wp-bt-classic-theme\").show();\n      $(\".ui-bizagi-wp-bt-booking-theme\").show();\n      $(\"#user-profile\").hide(\"fast\");\n    });\n\n    $(\".ui-bizagi-wp-bt-booking-theme\", content).click(function () {\n      $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\n      $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\n\n      //change to booking theme\n      window.CURRENT_THEME_REMOVE_IT = \"theme3\";\n\n      var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\n\n      self.publish(\"changeWidget\", {\n        widgetName: home });\n\n\n      $(\".ui-bizagi-wp-bt-booking-theme\").hide();\n      $(\".ui-bizagi-wp-bt-classic-theme\").show();\n      $(\".ui-bizagi-wp-bt-modern-theme\").show();\n      $(\"#user-profile\").hide(\"fast\");\n    });\n\n    $(\"#logout\", content).click(function () {\n\n      $.when(bizagi.util.autoSave()).done(function () {\n        $(document).data('auto-save', '');\n        self.dataService.logout();\n      });\n    });\n\n    $(\"#about\", content).click(function () {\n      self.showAboutPopup();\n    });\n\n    /**\r\n         * Binding for search field\r\n         */\n    $(inputSearchField).bind('keypress', function (e) {\n      if (e.keyCode == 13) {\n        var searchValue = inputSearchField.val();\n        if (searchValue != \"\" && searchValue != self.getResource(\"workportal-menu-search\")) {\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: inputSearchField.val(),\n            onlyUserWorkItems: false });\n\n        }\n        self.resetNavigatorInfo();\n      }\n    });\n\n    $(window).trigger(\"resize\");\n\n    return defer.promise();\n  },\n\n  resetNavigatorInfo: function resetNavigatorInfo() {\n    bizagi.util.emptyNavigatorInfo();\n  },\n\n  /**\r\n      *\tHighligth for active menu\r\n      */\n  setActiveSection: function setActiveSection() {\n    var self = this;\n\n    $(self).parent().find('li').removeClass('activeMenu');\n    $(self).addClass('activeMenu');\n  },\n\n  /**\r\n      * Show User profile menu\r\n      */\n  showUserProfileMenu: function showUserProfileMenu() {\n    var self = this;\n    var content = self.getContent();\n    var $userProfile = $(\"div#user-profile\", content);\n\n    $userProfile.show(\"fast\", function () {\n      $userProfile.click(function (e) {\n        e.stopPropagation();\n      });\n\n    });\n\n    $(document).on(\"click\", function (e) {\n\n      if (!$(e.target).is(\"#user-profile\") && $(e.target).closest(\"#user\").length === 0) {\n        $userProfile.hide(\"fast\");\n      }\n\n      e.stopPropagation();\n    });\n  },\n  /*\r\n     * Show QR mobile authentication popup\r\n     */\n  showQRCodePopup: function showQRCodePopup() {\n    var self = this;\n    var url = this.dataService.serviceLocator.getUrl(\"login-qr-image64\");\n\n    $.ajax({\n      url: url,\n      success: function success(data) {\n        var template = self.workportalFacade.getTemplate(\"menu.modal.qr\");\n        var popupContent = $.tmpl(template, {});\n\n        $(popupContent).find(\"#QRCode\").attr(\"src\", \"data:image/png;base64,\" + data);\n        $(popupContent).dialog({\n          width: 590,\n          modal: true,\n          title: null,\n          dialogClass: \"qr-dialog\",\n          allowmaximize: false,\n          maximized: false,\n          resizable: false,\n          draggable: false });\n\n      } });\n\n  },\n  /**\r\n      * Creates a generic menu popup\r\n      * @param options\r\n      */\n  showMenuPopup: function showMenuPopup(options) {\n    var self = this;\n    var content = self.getContent();\n    var popup = new bizagi.workportal.desktop.popup(self.dataService, self.workportalFacade, {\n      sourceElement: options.buttonSelector,\n      my: options.my || \"center top\",\n      at: options.at || \"center bottom\",\n      offset: options.offset,\n      height: options.height,\n      width: options.width });\n\n\n    // If the same popup is opened close it\n    if (self.currentPopup == options.buttonSelector) {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows the popup\n    self.currentPopup = options.buttonSelector;\n    var popupContent = self.workportalFacade.getTemplate(options.template);\n    popup.render(popupContent);\n\n    // Adds the active class for buttons\n    $(options.buttonSelector, content).addClass(\"active\");\n\n    // Checks for close signal to change the class again\n    $.when(popup.closed()).\n    done(function () {\n      self.currentPopup = null;\n      $(options.buttonSelector, content).removeClass(\"active\");\n    });\n  },\n\n  /**\r\n      * Shows the user popup to access more options\r\n      */\n  showUserPopup: function showUserPopup() {\n    var self = this;\n    self.showMenuPopup({\n      buttonSelector: \"#ui-bizagi-wp-menu-username\",\n      template: \"menu.modal.user\",\n      offset: \"0 0\",\n      height: 80,\n      width: 90 });\n\n  },\n\n  /**\r\n      *  Shows the widgets popup to access all dynamic content\r\n      * @param options\r\n      */\n  showWidgetsPopup: function showWidgetsPopup(options) {\n    options = options || {};\n    var self = this;\n    self.showMenuPopup({\n      buttonSelector: options[\"buttonSelector\"] || \"#main_menu li#menuListWidget\",\n      template: options[\"template\"] || \"menu.modal.widgets\",\n      offset: options[\"offset\"] || \"18 -34\",\n      height: options[\"height\"] || 160,\n      width: options[\"width\"] || 175 });\n\n  },\n\n  /**\r\n      * Show new case popup to create a case\r\n      */\n  showNewCasePopup: function showNewCasePopup() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListNew\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"newCase\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"newCase\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE,\n      options: {\n        sourceElement: \"#main_menu li#menuListNew\",\n        'max-height': '746',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\", //x y\n        activeScroll: false,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#main_menu li#menuListNew\", content).removeClass(\"active\");\n        } } });\n\n\n  },\n\n  /**\r\n        *   Show new case popup to create a case\r\n        */\n  showMySearchPopup: function showMySearchPopup() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\"#ui-bizagi-wp-widget-searchContainer\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"mySearch\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"mySearch\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST,\n      options: {\n        sourceElement: \"#ui-bizagi-wp-widget-searchContainer\",\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        top: '52',\n        offset: \"18 10\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#ui-bizagi-wp-widget-searchContainer\", content).removeClass(\"active\");\n        } } });\n\n\n  },\n\n  /**\r\n      * Show new case popup to create a case\r\n      */\n  showQueriesPopup: function showQueriesPopup() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListQueries\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"queries\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n    var widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES;\n    if (bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) == true) {\n      widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION;\n    }\n\n    bizagi.loader.start(\"queries\").then(function () {\n      // Shows a popup widget\n      self.currentPopup = \"queries\";\n      self.publish(\"popupWidget\", {\n        widgetName: widgetName,\n        options: {\n          sourceElement: \"#main_menu li#menuListQueries\",\n          'max-height': '346',\n          height: 'auto',\n          width: '339',\n          offset: \"18 -4\",\n          activeScroll: true,\n          closed: function closed() {\n            self.currentPopup = null;\n            $(\"#main_menu li#menuListQueries\", content).removeClass(\"active\");\n          } } });\n\n\n    });\n  },\n\n  /**\r\n      * Show popup with information about the product\r\n      */\n  showAboutPopup: function showAboutPopup() {\n    var self = this;\n    var template = self.workportalFacade.getTemplate(\"menu.modal.about\");\n\n    var argsTemplate = {\n      build: bizagi.loader.productBuildToAbout,\n      currentYear: bizagi.loader.currentYearVersion,\n      hostName: bizagiConfig.hostName || \"\" };\n\n\n    var popupContent = $.tmpl(template, argsTemplate);\n    $(popupContent).dialog({\n      width: 430,\n      height: 200,\n      modal: true,\n      title: bizagi.localization.getResource('workportal-menu-about'),\n      allowmaximize: false,\n      maximized: false,\n      resizable: false,\n      draggable: false });\n\n  },\n\n  /**\r\n      * Check permisions for category\r\n      * @param data\r\n      * @param key\r\n      * @return {boolean}\r\n      */\n  checkRootCategory: function checkRootCategory(data, key) {\n    if (data[\"permissions\"] != undefined) {\n      for (var i = 0; i < data[\"permissions\"].length; i++) {\n        if (data[\"permissions\"][i][key] != undefined) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      *\tGet root category\r\n      * @param data\r\n      * @param key\r\n      * @return {*}\r\n      */\n  getsRootCategory: function getsRootCategory(data, key) {\n    for (var i = 0; i < data[\"permissions\"].length; i++) {\n      if (data[\"permissions\"][i][key] != undefined) {\n        return data[\"permissions\"][i][key];\n      }\n    }\n    return {};\n  },\n\n  /**\r\n      * Get data for a category menu\r\n      * @param data\r\n      * @param category\r\n      * @return {Array}\r\n      */\n  getSubMenuData: function getSubMenuData(data, category) {\n    var self = this;\n    var result = [];\n    var prefix = \"workportal-menu-submenu-\";\n    data = data || self.security.getRawData() || {};\n\n    if (self.checkRootCategory(data, category)) {\n      $.each(self.getsRootCategory(data, category), function (k, v) {\n        if (v !== \"MultilanguageEntities\") {//To avoid add in the menu an option that not exists\n          result.push(\n          {\n            \"categoryKey\": v,\n            \"categoryName\": self.getResource(prefix + v),\n            \"categoryUrl\": self.dataService.getUrl({\n              \"endPoint\": v }) });\n\n\n        }\n\n      });\n    }\n\n    return result;\n  },\n  /**\r\n      * Render a submenu trough  BIZAGI_WORKPORTAL_WIDGET_SUBMENU\r\n      */\n  renderAdminMenu: function renderAdminMenu() {\n    var self = this;\n    var content = self.getContent();\n    var menuData = self.getSubMenuData(self.jsonSecurityList, \"Admin\");\n\n\n    //TODO: Remove this code when authorization services return a smartfolders value\n    menuData.push({\n      categoryKey: \"SmartFolders\",\n      categoryName: bizagi.localization.getResource(\"workportal-widget-smartfolders\"),\n      categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTFOLDERS });\n\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListAdmin\", content).addClass(\"active\");\n    // If the same popup is opened close it\n    if (self.currentPopup == \"subMenu\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      self.currentPopup = null;\n      return;\n    }\n    // Shows a popup widget\n    self.currentPopup = \"subMenu\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\n      options: {\n        sourceElement: \"#main_menu li#menuListAdmin\",\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#main_menu li#menuListAdmin\", content).removeClass(\"active\");\n        },\n        menuData: menuData } });\n\n\n  },\n\n  /**\r\n      * Render Quick Process Menu\r\n      */\n\n  renderQuickProcessMenu: function renderQuickProcessMenu() {\n    var self = this;\n    var content = self.getContent();\n\n    var menuData = self.getSubMenuData(self.jsonSecurityList, \"AdhocProcess\");\n    var menuValidator = {\n      AdhocProcessAdmin: -1,\n      AdhocUserGroupAdmin: -1 };\n\n    for (var i = 0; i < menuData.length; i += 1) {\n      // Verify which permissions exist\n      menuValidator[menuData[i].categoryKey] = i;\n    }\n    if (menuValidator.AdhocProcessAdmin > -1) {\n      // Add the Create Process control\n      menuData.push({\n        \"categoryKey\": \"AdhocCreateProcess\",\n        \"categoryName\": self.getResource(\"workportal-menu-submenu-AdhocCreateProcess\"),\n        \"categoryUrl\": undefined });\n\n    }\n\n    // Switch buttonstyle\n    $(\"#main_menu li#menuListQuickProcess\", content).addClass(\"active\");\n    // If the same popup is opened close it\n    if (self.currentPopup == \"subMenu\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      self.currentPopup = null;\n      return;\n    }\n    // Shows a popup widget\n    self.currentPopup = \"subMenu\";\n\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\n      options: {\n        sourceElement: \"#main_menu li#menuListQuickProcess\",\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\"#main_menu li#menuListQuickProcess\", content).removeClass(\"active\");\n        },\n        menuData: menuData } });\n\n\n  },\n\n  /**\r\n      * Validate current url and bizagiConfig applicationUrl\r\n      */\n  validateUrlInQuickProcess: function validateUrlInQuickProcess() {\n    if (bizagiConfig.applicationUrl != undefined &&\n    window.location.href != bizagiConfig.applicationUrl) {\n      var alertMessage = \".:ERROR:. Please verify the key <app key='ApplicationURL'> in the web.config for Engine.\";\n      console.error(alertMessage + ' Current Url: ' + window.location.href + ' and BizagiBPM Url: ' + bizagiConfig.applicationUrl);\n    }\n  },\n\n  /**\r\n      * Render BAM Reports\r\n      */\n  renderReportsMenu: function renderReportsMenu() {\n    var self = this;\n    var content = self.getContent();\n\n    bizagi.loader.start(\"reports\").then(function () {\n      var widget = !bizagi.util.isIE8() ? bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS;\n      // Switch buttonstyle\n      $(\"#main_menu li#menuListReports\", content).addClass(\"active\");\n\n      // If the same popup is opened close it\n      if (self.currentPopup == \"subMenu\") {\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        return;\n      }\n\n      // Shows a popup widget\n      self.currentPopup = \"subMenu\";\n      self.publish(\"popupWidget\", {\n        widgetName: widget,\n        options: {\n          sourceElement: \"#main_menu li#menuListReports\",\n          'max-height': '346',\n          height: 'auto',\n          width: '339',\n          offset: \"18 -4\",\n          activeScroll: true,\n          closed: function closed() {\n            self.currentPopup = null;\n            $(\"#main_menu li#menuListReports\", content).removeClass(\"active\");\n          },\n\n          menuData: self.getSubMenuData(self.jsonSecurityList, \"AnalysisReports\") } });\n\n\n    });\n  },\n\n  /**\r\n      * Shows the options for font size\r\n      */\n  renderFontMenu: function renderFontMenu() {\n    var self = this;\n    var content = self.getContent();\n\n    // Switch buttonstyle\n    $(\".ui-bizagi-wp-bt-font\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"fontsize\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"fontsize\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE,\n      options: {\n        sourceElement: \".ui-bizagi-wp-bt-font\",\n        offset: \"0 16\",\n        closed: function closed() {\n          self.currentPopup = null;\n          $(\".ui-bizagi-wp-bt-font\", content).removeClass(\"active\");\n        } } });\n\n\n\n  },\n\n  /**\r\n      * Renders a custom sub-menu\r\n      * @param menuButton\r\n      * @param submenu\r\n      * @param callback\r\n      */\n  renderSubMenu: function renderSubMenu(menuButton, submenu, callback) {\n    var self = this;\n    var content = self.getContent();\n    var menuData = [];\n\n    // Transform menu data\n    for (i in submenu) {\n      if (submenu.hasOwnProperty(i)) {\n        menuData.push({\n          categoryKey: submenu[i].id,\n          categoryName: submenu[i].text,\n          categoryClassName: submenu[i].className });\n\n      }\n    }\n\n    // Switch buttonstyle\n    menuButton.addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"subMenu\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"subMenu\";\n    self.publish(\"popupWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\n      options: {\n        sourceElement: menuButton,\n        'max-height': '346',\n        height: 'auto',\n        width: '339',\n        offset: \"18 -4\",\n        activeScroll: true,\n        closed: function closed() {\n          self.currentPopup = null;\n          menuButton.removeClass(\"active\");\n        },\n        menuData: menuData,\n        customClickHandler: function customClickHandler(id) {\n          if (callback)\n          callback(self, id);\n        } } });\n\n\n  },\n\n  /**\r\n      * Show popup for entities\r\n      * @param url\r\n      * @todo Check if this method has any active dependency\r\n      */\n  showEntitiesPopup: function showEntitiesPopup(url) {\n    var self = this;\n    var content = self.getContent();\n\n\n    // Switch buttonstyle\n    $(\"#main_menu li#temp\", content).addClass(\"active\");\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"genericiframe\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"genericiframe\";\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n      widgetURL: url });\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop Workarea Controller\r\n*   Author: Diego Parra \r\n*   Comments:\r\n*   -   This script will override workarea controller class to apply custom stuff just for desktop device\r\n*/\n\n// Auto extend\nbizagi.workportal.controllers.main.extend(\"bizagi.workportal.controllers.main\", {}, {});","/*\r\n*   Name: BizAgi Desktop Popup Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a widget inside a popup box\r\n*/\n\n// Bind resize window\n$(window).bind(\"resize\", function () {\n  bizagi.workportal.desktop.popup.closePopupInstance();\n});\n\n// Extends itself\n$.Class.extend(\"bizagi.workportal.desktop.popup\", {\n\n  /*\r\n                                                    *   Static method that will return the current popup instance\r\n                                                    */\n  closePopupInstance: function closePopupInstance() {\n    if (bizagi.workportal.desktop.popup.instance) {\n      bizagi.workportal.desktop.popup.instance.close();\n    }\n  } },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(dataService, workportalFacade, options) {\n    this.dataService = dataService;\n    this.workportalFacade = workportalFacade;\n\n    // Set display options\n    options = options || {};\n    this.sourceElement = options.sourceElement;\n    this.my = options.my || \"center top\";\n    this.at = options.at || \"center bottom\";\n    this.offset = options.offset || \"18 -20\";\n    this.activeScroll = options.activeScroll || false;\n    this.arrowPosition = options.arrowPosition || false;\n    if (options.position) {\n      this.position = options.position;\n    }\n    if (options.insertAfter) {\n      this.insertAfter = options.insertAfter;\n    }\n\n    // This option is only to help graphics designers on dummy pages\n    this.dontClose = options.dontClose || false;\n\n    // TODO: implement scroll for personalised container\n    this.scrollElement = options.scrollElement || \".content\";\n  },\n\n  /*\r\n     *   Renders some content inside a popup\r\n     *   Return a deferred to check when the popup closes\r\n     */\n  render: function render(content, params) {\n    var self = this;\n    var doc = window.document;\n    var template = self.workportalFacade.getTemplate(\"popup\");\n\n    params = params || {};\n\n    // Creates an instance deferred to be resolved when the popup closes\n    self.closeDeferred = new $.Deferred();\n\n    // Check if there are any popup open so we close first those instances\n    self.Class.closePopupInstance();\n\n    // Add to popup instances\n    bizagi.workportal.desktop.popup.instance = this;\n\n    // Extend Parameters\n    $.extend(params, params, { activeScroll: self.activeScroll });\n\n    // Append content into a div\n    self.popup = $.tmpl(template, params);\n    $(\".content\", self.popup).append(content);\n\n    if (self.insertAfter) {\n      $(self.insertAfter).after(self.popup);\n    } else {\n      self.popup.appendTo(\"body\", doc);\n    }\n\n    // Create popup box\n    self.showPopup(self.popup);\n  },\n\n  /*\r\n     *   Shows the popup box in the browser\r\n     */\n  showPopup: function showPopup(popup) {\n    var doc = window.document;\n    var self = this;\n\n    // Set width and height\n    if (self.popupWidth) popup.width(self.popupWidth);\n    if (self.popupHeight) popup.height(self.popupHeight);\n\n    // Locate over element\n    if (self.sourceElement) {\n      if (self.insertAfter) {\n        popup.find(\".selectarrow\").hide();\n        popup.css({\n          display: \"inline-block\",\n          \"float\": \"left\",\n          position: \"relative\",\n          left: \"37%\",\n          top: \"20px\",\n          \"z-index\": 1 });\n\n      } else {\n        popup.position({\n          my: self.my,\n          at: self.at,\n          of: $(self.sourceElement),\n          collision: \"none\",\n          offset: self.offset });\n\n        if (self.position) {\n          popup.css(\"position\", self.position);\n        }\n      }\n    } else {\n      popup.css(\"left\", ($(window).width() - popup.width()) / 2);\n      popup.css(\"top\", ($(window).height() - popup.height()) / 2);\n    }\n\n    // Move arrow\n    if (self.arrowPosition) {\n      var arrow = $(\".selectarrow\", popup);\n      arrow.css(self.arrowPosition);\n    }\n\n    // Define handler to close the item\n    setTimeout(function () {\n      // Capture all click elements inside the popup\n      popup.click(function (e) {\n        if (!bizagi.workportal.desktop.popup.instance) {\n          self.close();\n        }\n        e.stopPropagation();\n      });\n\n      // Make a document click, if the event bubbles up to here then the click was made outside popup boundaries\n      $(doc).one(\"click\", function () {\n        self.close();\n      });\n    }, 100);\n  },\n\n  /*\r\n     *   Returns the instance deferred to hold executions until \r\n     *   the popup is closed\r\n     */\n  closed: function closed() {\n    var self = this;\n    return self.closeDeferred;\n  },\n\n  /*\r\n     *   Forces to close the popup\r\n     */\n  close: function close() {\n    var doc = window.document;\n    var self = this;\n\n    // Just for testing purposes - used in complexgateway\n    if (this.dontClose) return;\n\n    //$(doc).unbind(\"click\"); Comment for prevent disable others click event\n\n    // Removes element\n    self.popup.remove();\n    bizagi.workportal.desktop.popup.instance = null;\n\n    // Resolve deferred\n    self.closeDeferred.resolve();\n  },\n\n  /*\r\n     *   Returns the popup content\r\n     */\n  getContent: function getContent() {\n    var self = this;\n    return self.popup;\n  } });","/*\r\n*   Name: BizAgi Desktop Popup Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a widget inside a popup box\r\n*/\n\n// Extends itself\nbizagi.workportal.desktop.popup.extend(\"bizagi.workportal.desktop.widgets.popup\", {}, {\n\n  /*\r\n                                                                                        *   Render the Widget\r\n                                                                                        *   Returns a deferred\r\n                                                                                        */\n  renderWidget: function renderWidget(params) {\n    var self = this;\n    var widget;\n    // Creates widget\n    $.when(\n    self.workportalFacade.getWidget(params.widgetName, params)).\n\n    pipe(function (result) {\n      // Renders widget\n      widget = result;\n      // register\n      self.register(widget);\n      return widget.render();\n\n    }).done(function () {\n      var content = widget.getContent();\n\n      // Renders content\n      self.render(content, params.options);\n    });\n  },\n\n  register: function register(widget) {\n    var self = this;\n    if (widget.registerCallback) {\n      widget.registerCallback(self);\n    }\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Render Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the render widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.routing.extend(\"bizagi.workportal.widgets.routing\", {}, {\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"routing\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.routing\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    var workOnITActivitySelector = $(\"#ui-bizagi-wp-app-routing-activity-wf tbody tr\", content);\n    var workOnITProcessSelector = $(\"#ui-bizagi-wp-app-routing-process-wf tbody tr\", content);\n\n    var onlyUserWorkItems = self.params.data.fromSearchWidget ? \"false\" : \"true\";\n    var eventAsTasks = self.params.data.fromSearchWidget ? \"true\" : \"false\";\n\n    // Assing even style\n    $(\"tr:nth-child(even)\", content).addClass(\"event\");\n\n    $(\".workonitRow\", content).button();\n\n    $(workOnITActivitySelector).click(function () {\n      self.showWorkitem({\n        idCase: $(this).children(\":first\").children(\"#idCase\").val(),\n        idWorkitem: $(this).children(\":first\").children(\"#idWorkItem\").val(),\n        idTask: $(this).children(\":first\").children(\"#idTask\").val(),\n        idWorkflow: $(this).children(\":first\").children(\"#idWorkflow\").val(),\n        onlyUserWorkItems: onlyUserWorkItems,\n        eventAsTasks: eventAsTasks });\n\n    });\n\n\n    $(workOnITProcessSelector).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this).children(\":first\").children(\"#idCase\").val(),\n        onlyUserWorkItems: onlyUserWorkItems,\n        eventAsTasks: eventAsTasks });\n\n\n      // close dialog\n      self.publish(\"closeCurrentDialog\");\n    });\n  },\n  /*\r\n      *   Shows the rendering widget\r\n      */\n  showWorkitem: function showWorkitem(params) {\n    var self = this;\n    var referrer = self.params.referrer;\n    // Shows render widget\n    $.when(bizagi.util.autoSave()).done(function () {\n      $(document).data('auto-save', '');\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: params.idCase,\n        idWorkItem: params.idWorkitem,\n        idWorkflow: params.idWorkflow,\n        idTask: params.idTask,\n        referrer: referrer });\n\n      // close dialog\n      self.publish(\"closeCurrentDialog\");\n    });\n  },\n  /**\r\n      * Show Async widget\r\n      */\n  showAsyncWidget: function showAsyncWidget(params) {\n    var self = this;\n\n    // Shows dialog widget with async template           \n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC,\n      data: data,\n      modalParameters: parameters });\n\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Routing Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the routing widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.render.extend(\"bizagi.workportal.widgets.render\", {}, {\n\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\n      \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\n      \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\n      \"inbox-common-case-summary-activities\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-activities\"),\n      \"render-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.render\").concat(\"#ui-bizagi-workportal-widget-render-case-description\"),\n      useNewEngine: false });\n\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n\n    // Set sub-templates\t\t\n    self.caseSummaryTemplate = self.getTemplate(\"render-case-summary\");\n    self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\n    self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\n    self.caseSummaryTemplateActivities = self.getTemplate(\"inbox-common-case-summary-activities\");\n    self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\n    self.paginationTemplate = self.workportalFacade.getTemplate(\"inbox-common-pagination-inbox\");\n\n    var result = self._super();\n    return result;\n  },\n\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    self.params.referrerParams = self.params.referrerParams || {};\n\n    // Set instance variables\n    self.summaryDisplayed = true;\n\n    // Set scrollbars\n    $(\"#ui-bizagi-wp-app-render-desc-panel\", content).bizagiScrollbar();\n    $(\".scrollRender\", content).bizagiScrollbar({\n      autohide: false });\n\n\n    // Attach panel slide event\n    self.configureSlider();\n\n    // Configure header buttons\n    self.configureHeader();\n\n    // Resize layout\n    self.resizeLayout();\n\n\n    //self.renderSummaryTab.scrollabletab();\n    // jQuery-ui tabs\n    window.setTimeout(function () {\n      if (!bizagi.util.identicalObjects($(\"#ui-bizagi-details-tabs\", content).find('.ui-tabs-nav').offset(), { top: 0, left: 0 })) {\n        $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\n          tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\n          tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\") });\n\n      }\n\n    }, 500);\n\n    // Add click to view workflow\n    $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n      self.showGraphicQuery({ idCase: self.params.idCase, idWorkflow: self.params.idWorkflow });\n    });\n\n    // Bind navigation bar\n    // Set idcase data\n    $(\".back\", content).data(\"idCase\", self.getBackCase());\n    $(\".next\", content).data(\"idCase\", self.getNextCase());\n\n    // Bind for click event on back and next botton\n    $(\".back, .next\", content).click(function () {\n      var idCase = $(this).data(\"idCase\");\n      if (idCase > 0) {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      }\n    });\n\n    // Bind for click event on refresh botton\n    $(\".refresh\", content).click(function () {\n      var options = {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkflow: self.params.idWorkflow,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" };\n\n\n      self.publish(\"executeAction\", options);\n    });\n\n    // Bind for click event on return botton\n    $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2\", content).click(function () {\n      if (bizagi)\n      if (bizagi.referrerParams)\n      var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\n      if (widget == \"queryform\") widget = bizagi.workportal.currentInboxView || \"inboxGrid\";\n\n      // switch referer widget \n      switch (widget) {\n        case \"inbox\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"inboxGrid\":\n\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"search\":\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          break;\n        case \"queryform\":\n          self.publish(\"showDialogWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: \"loadPrevious\" });\n\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(self.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        default:\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\n            restoreStatus: true });\n\n          break;}\n\n    });\n\n    // Bind for hover event on refresh and return botton\n    $(\".refresh,.return\", content).hover(function () {\n      $(this).addClass(\"active\");\n    }, function () {\n      $(this).removeClass(\"active\");\n    });\n\n    // Bind for hover event on next and back botton\n    $(\".next,.back\", content).hover(\n    function () {\n      if ($(this).data(\"idCase\") > 0) {\n        $(this).addClass(\"active\");\n      }\n    },\n    function () {\n      $(this).removeClass(\"active\");\n    });\n\n    if (self.dataService.lastQueryFullKey != null) {\n      $(\"#bt-case-action-showquery\", content).click(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n          queryFormAction: \"loadPrevious\" });\n\n\n      });\n    }\n\n    // Bind botton summary actions\n    $(\"#bt-case-action-log\", content).click(function () {\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG,\n        data: { \"idCase\": self.params.idCase, \"idWorkflow\": self.params.idWorkflow },\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-log\") } });\n\n\n\n    });\n\n    $(\"#bt-case-action-reassing\", content).click(function () {\n      var idCase = self.params.idCase;\n      var idWorkItem = self.params.idWorkitem;\n      var idtask = self.params.idtask;\n      $.when(self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,\n        data: { \"idCase\": idCase,\n          \"idWorkItem\": idWorkItem },\n\n        closeVisible: false,\n        maximize: true,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\"),\n          width: \"910px\",\n          id: \"CaseAdmin\" } }));\n\n\n\n\n\n    });\n\n    self.printFormCommand = new bizagi.workportal.command.printform(self.workportalFacade);\n\n    $(\"#bt-case-action-print\", content).click(function () {\n\n      var printParams = { idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        idTask: self.params.idTask };\n\n\n      self.printFormCommand.print(printParams);\n\n    });\n\n    $(\"#bt-case-action-help\", content).click(function () {\n      var url = $(this).find(\"#helpUrl\").val();\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-help\") } });\n\n\n    });\n  },\n  /*\r\n     *   configures the slide event\r\n     */\n  configureSlider: function configureSlider() {\n    var self = this;\n    var content = self.getContent();\n    if (!content) {\n      return;\n    }\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n\n    sliderPanel.click(function () {\n      if (summaryContainer.is(\":visible\")) {\n        // Hide left panel\n        self.hideSummary();\n\n      } else {\n        // Show left panel\n        self.showSummary();\n      }\n    });\n  },\n  /*\r\n     *   Hides the summary component\r\n     */\n  hideSummary: function hideSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) {\n      return;\n    }\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n    animate = typeof animate !== \"undefined\" ? animate : false;\n\n    if (!self.summaryDisplayed) {\n      return;\n    }\n\n    if (animate) {\n      // Hide description panel\n      summaryContainer.parent().hide('drop', {}, 300);\n\n      // Run animation\n      $.when(sliderPanel.animate({\n        left: \"0px\" },\n      300)).\n      done(function () {\n        renderPanel.addClass(\"ui-bizagi-state-extended\");\n        $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n      });\n\n    } else {\n      // Hide description panel\n      summaryContainer.parent().hide();\n      sliderPanel.css(\"left\", \"0px\");\n      renderPanel.addClass(\"ui-bizagi-state-extended\");\n      $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n    }\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowLeft\");\n    panelArrow.addClass(\"panelArrowRight\");\n\n    // Turn off flag\n    self.summaryDisplayed = false;\n\n    // Trigger render resize\n    if (self.renderingFacade) {\n      self.renderingFacade.resize({\n        forceResize: true });\n\n    }\n  },\n  /*\r\n     *   Show the summary component\r\n     */\n  showSummary: function showSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) {\n      return;\n    }\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n    animate = typeof animate !== \"undefined\" ? animate : false;\n\n    if (self.summaryDisplayed) {\n      return;\n    }\n\n    // Show description panel\n    summaryContainer.parent().show();\n    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\n    sliderPanel.css(\"left\", \"380px\");\n    renderPanel.removeClass(\"ui-bizagi-state-extended\");\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowRight\");\n    panelArrow.addClass(\"panelArrowLeft\");\n\n    // Turn on flag\n    self.summaryDisplayed = true;\n\n\n    // jQuery-ui tabs scrollable\n    if (!($(\"#ui-bizagi-details-tabs\", content).closest(\"#stTabswrapper\").length > 0)) {\n      $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\n        tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\n        tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\") });\n\n    }\n\n    // Trigger render resize\n    if (self.renderingFacade) {\n      self.renderingFacade.resize({\n        forceResize: true });\n\n    }\n\n  },\n  /*\r\n     *   Configure header for the widget\r\n     */\n  configureHeader: function configureHeader() {\n    var self = this;\n    var content = self.getContent();\n\n    // Configure back button\n    //        $(\"#ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\n    //            self.publish(\"changeWidget\", {\n    //                widgetName: bizagi.workportal.currentInboxView\n    //            });\n    //        });\n  },\n  /*\r\n     *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n     *   Override when needed\r\n     */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    var windowWidth = $(window).width();\n\n    // Call base\n    this._super();\n\n    // If window width is less or equals 1366 hide the summary\n    if (windowWidth <= 1366) {\n      if (self.summaryDisplayed) {\n        self.hideSummary(false);\n      } else {\n        // Trigger render resize\n        if (self.renderingFacade) {\n          self.renderingFacade.resize({\n            forceResize: true });\n\n        }\n      }\n\n    } else {\n      if (!self.summaryDisplayed) {\n        self.showSummary(false);\n      } else\n      {\n        // Trigger render resize\n        if (self.renderingFacade) {\n          self.renderingFacade.resize({\n            forceResize: true });\n\n        }\n      }\n    }\n  },\n  /*\r\n     *   Opens the workportal old form in a window\r\n     */\n  openOldWorkportalForm: function openOldWorkportalForm() {\n    var self = this;\n    //var url = BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase=\" + self.params.idCase;\n    var url = BIZAGI_PATH_TO_BASE + \"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase=\" + self.params.idCase;\n    if (typeof self.params.idWorkitem != 'undefined') {\n      url = url + \"&idWorkitem=\" + self.params.idWorkitem;\n    }\n    if (typeof self.params.idTask != 'undefined') {\n      url = url + \"&idTask=\" + self.params.idTask;\n    }\n    if (false) {\n      url = url + \"&isSummary=1\";\n\n    }\n\n    alert(url);\n    window.open(url, \"oldStyleBizAgi\", \"width=1024,height=768, Menubar=NO, Location=NO, Status=NO\");\n  },\n  /*\r\n     *  Navigation options\r\n     */\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element\n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element\n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1] || -1;\n    }\n\n    return prevIdCase;\n  } });","/*\r\n *   Name: Start Form Widget Controller\r\n *   Author: Fabian Moreno (based on Diego Parra version)\r\n *   Comments:\r\n *   -   This script will provide start form widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.startForm.extend(\"bizagi.workportal.widgets.startForm\", {}, {\n  /*\r\n                                                                                        *   To be overriden in each device to apply layouts\r\n                                                                                        */\n\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    self.params.referrerParams = self.params.referrerParams || {};\n\n    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n    $('.renderNavigation .back,.renderNavigation .next', content).hide();\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Routing Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the routing widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.renderform.extend(\"bizagi.workportal.widgets.renderform\", {}, {\n\n  /*\r\n                                                                                           *   Constructor\r\n                                                                                           */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"renderform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.renderform\").concat(\"#ui-bizagi-workportal-widget-renderform\"),\n      useNewEngine: false });\n\n  },\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n\n    self.params.referrerParams = self.params.referrerParams || {};\n\n    // Set instance variables\n    self.summaryDisplayed = true;-\n\n    // Set scrollbars\n    $(\"#ui-bizagi-wp-app-render-desc-panel\", content).bizagiScrollbar();\n    $(\".scrollRender\", content).bizagiScrollbar({\n      autohide: false });\n\n\n    // Attach panel slide event\n    self.configureSlider();\n\n    // Configure header buttons\n    self.configureHeader();\n\n    // Resize layout\n    self.resizeLayout();\n\n\n    //self.renderSummaryTab.scrollabletab();\n    // jQuery-ui tabs\n    $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\n      tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\n      tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\") });\n\n\n\n    // Add click to view workflow\n    $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n      var baseUrl = \"App/Cockpit/graphicquery.aspx?analysisType=2&CaseId=\";\n      window.open(baseUrl + self.params.idCase);\n    });\n\n    // Bind navigation bar\n    // Set idcase data\n    $(\".back\", content).data(\"idCase\", self.getBackCase());\n    $(\".next\", content).data(\"idCase\", self.getNextCase());\n\n    // Bind for click event on back and bext botton\n    $(\".back, .next\", content).click(function () {\n      var idCase = $(this).data(\"idCase\");\n      if (idCase > 0) {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      }\n    });\n\n    // Bind for click event on refresh botton\n    $(\".refresh\", content).click(function () {\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        idTask: self.params.idTask,\n        referrer: bizagi.referrerParams.referrer });\n\n    });\n\n    // Bind for click event on return botton\n    $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2\", content).click(function () {\n      var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\n      // switch referer widget\n      switch (widget) {\n        case \"inbox\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"inboxGrid\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"search\":\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          break;\n        case \"queryform\":\n          self.publish(\"showDialogWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: \"loadPrevious\" });\n\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(self.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        default:\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n            restoreStatus: true });\n\n          break;}\n\n    });\n\n    // Bind for hover event on refresh and return botton\n    $(\".refresh,.return\", content).hover(function () {\n      $(this).addClass(\"active\");\n    }, function () {\n      $(this).removeClass(\"active\");\n    });\n\n    // Bind for hover event on next and back botton\n    $(\".next,.back\", content).hover(\n    function () {\n      if ($(this).data(\"idCase\") > 0) {\n        $(this).addClass(\"active\");\n      }\n    },\n    function () {\n      $(this).removeClass(\"active\");\n    });\n\n    if (self.dataService.lastQueryFullKey != null) {\n      $(\"#bt-case-action-showquery\", content).click(function () {\n        self.publish(\"showDialogWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n          queryFormAction: \"loadPrevious\" });\n\n\n      });\n    }\n\n    // Bind botton summary actions\n    $(\"#bt-case-action-log\", content).click(function () {\n      var url = \"App/Log/log.aspx?idCase=\" + self.params.idCase + \"&logtype=s\";\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-log\") },\n\n        afterLoad: function afterLoad(params) {\n          // This script will execute inside the iframe context\n\n          // Hack this method because it will try to change iframe location\n          // instead of this we will for to close the current dialog\n          this.backURL = function () {\n            // Close current dialog\n            params.controller.publish(\"closeCurrentDialog\");\n          };\n        } });\n\n    });\n\n    $(\"#bt-case-action-reassing\", content).click(function () {\n      var url = \"App/Admin/ListUsers.aspx?WorkItemAdmin=\" + self.params.idCase + \"|\" + self.params.idWorkitem + \"|&UserAdminAction=2\";\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\") },\n\n        onClose: function onClose() {\n          self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem,\n            idTask: self.params.idTask });\n\n        } });\n\n    });\n\n    //        $(\"#bt-case-action-print\",content).click(function(){\n    //            var url =\"App/ListaDetalle/PrintVersion.aspx?PostBack=1&idCase=\"+self.params.idCase+\"&idWorkitem=\"+self.params.idWorkitem+\"&idTask=\"+self.params.idTask;\n    //\n    //\n    //\n    //            self.publish(\"showDialogWidget\", {\n    //                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n    //                widgetURL: url,\n    //                modalParameters: {\n    //                    title: bizagi.localization.getResource(\"render-actions-print\")\n    //                },\n    //                buttons: [\n    //                    {\n    //                        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\n    //                        click: function() {\n    //                            $(window.frames[\"iframe\"]).focus();\n    //                            window.frames[\"iframe\"].print();\n    //                        }\n    //                    }\n    //                ]\n    //            });\n    //        });\n    $(\"#bt-case-action-print\", content).click(function () {\n      var url = \"App/Admin/ListUsers.aspx?WorkItemAdmin=\" + self.params.idCase + \"|\" + self.params.idWorkitem + \"|&UserAdminAction=2\";\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-reassign\") },\n\n        onClose: function onClose() {\n          self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem,\n            idTask: self.params.idTask });\n\n        } });\n\n    });\n\n\n\n\n\n    $(\"#bt-case-action-help\", content).click(function () {\n      var url = $(this).find(\"#helpUrl\").val();\n\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        modalParameters: {\n          title: bizagi.localization.getResource(\"render-actions-help\") } });\n\n\n    });\n  },\n\n  /*\r\n      *   configures the slide event\r\n      */\n  configureSlider: function configureSlider() {\n    var self = this;\n    var content = self.getContent();\n    if (!content) return;\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n\n    sliderPanel.click(function () {\n      if (summaryContainer.is(\":visible\")) {\n        // Hide left panel\n        self.hideSummary();\n\n      } else {\n        // Show left panel\n        self.showSummary();\n      }\n    });\n  },\n\n  /*\r\n      *   Hides the summary component\r\n      */\n  hideSummary: function hideSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) return;\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n\n    if (!self.summaryDisplayed) return;\n\n    // Hide description panel\n    summaryContainer.parent().hide();\n    sliderPanel.css(\"left\", \"0px\");\n    renderPanel.addClass(\"ui-bizagi-state-extended\");\n    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowLeft\");\n    panelArrow.addClass(\"panelArrowRight\");\n\n    // Turn off flag\n    self.summaryDisplayed = false;\n\n    // Trigger render resize\n    if (self.renderingFacade) self.renderingFacade.resize({\n      forceResize: true });\n\n  },\n\n  /*\r\n      *   Show the summary component\r\n      */\n  showSummary: function showSummary(animate) {\n    var self = this;\n    var content = self.getContent();\n    if (!content) return;\n\n    var summaryContainer = self.getComponentContainer(\"summary\");\n    var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\n    var sliderPanel = $(\"#panelArrowContainer\", content);\n    var panelArrow = $(\"#panelArrow\", content);\n    animate = typeof animate !== \"undefined\" ? animate : false;\n\n    if (self.summaryDisplayed) return;\n\n    if (animate) {\n      // Show description panel\n      summaryContainer.parent().show('drop', {}, 500);\n\n      // Resize render layout to set padding 400px\n      $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\n\n      // Run animation\n      $.when(sliderPanel.animate({\n        left: \"380px\" },\n      300)).\n      done(function () {\n        renderPanel.removeClass(\"ui-bizagi-state-extended\");\n      });\n\n    } else {\n      // Show description panel\n      summaryContainer.parent().show();\n      $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\n      sliderPanel.css(\"left\", \"380px\");\n      renderPanel.removeClass(\"ui-bizagi-state-extended\");\n    }\n\n    // Change arrows\n    panelArrow.removeClass(\"panelArrowRight\");\n    panelArrow.addClass(\"panelArrowLeft\");\n\n    // Turn on flag\n    self.summaryDisplayed = true;\n\n    // Trigger render resize\n    if (self.renderingFacade) self.renderingFacade.resize({\n      forceResize: true });\n\n  },\n\n  /*\r\n      *   Configure header for the widget\r\n      */\n  configureHeader: function configureHeader() {\n    var self = this;\n    var content = self.getContent();\n\n    // Configure back button\n    //        $(\"#ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\n    //            self.publish(\"changeWidget\", {\n    //                widgetName: bizagi.workportal.currentInboxView\n    //            });\n    //        });\n  },\n\n\n  /*\r\n      *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n      *   Override when needed  \r\n      */\n  performResizeLayout: function performResizeLayout() {\n    var self = this;\n    var windowWidth = $(window).width();\n\n    // Call base\n    this._super();\n\n    // If window width is less or equals 1024 hide the summary\n    if (windowWidth <= 1024) {\n      if (self.summaryDisplayed) {\n        self.hideSummary(false);\n      } else {\n        // Trigger render resize\n        if (self.renderingFacade) self.renderingFacade.resize({\n          forceResize: true });\n\n      }\n\n    } else {\n      if (!self.summaryDisplayed) {\n        self.showSummary(false);\n      } else\n      {\n        // Trigger render resize\n        if (self.renderingFacade) self.renderingFacade.resize({\n          forceResize: true });\n\n      }\n    }\n  },\n\n  /*\r\n      *   Opens the workportal old form in a window\r\n      */\n  openOldWorkportalForm: function openOldWorkportalForm() {\n    var self = this;\n    var url = BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase=\" + self.params.idCase;\n    window.open(url, \"oldStyleBizAgi\", \"width=1024,height=768, Menubar=NO, Location=NO, Status=NO\");\n  },\n\n  /*\r\n      *  Navigation options\r\n      */\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element \n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element \n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1];\n    }\n\n    return prevIdCase;\n  } });","var smartInboxModel = function smartInboxModel() {\n  /**\r\n                                                  * Smart Inbox Data Model\r\n                                                  */\n  var _smartInboxModel = {\n    \"id\": Math.guid(),\n    \"ownerType\": \"user\",\n    \"name\": \"\",\n    \"resultsPerPage\": 50,\n    \"order\": 0,\n    \"pinned\": false,\n    \"processes\": [],\n    \"columns\": [],\n    \"filter\": {},\n    \"sort\": [],\n    \"access\": [] };\n\n\n  var _getModel = function _getModel() {\n    return _smartInboxModel;\n  };\n\n  var _setModel = function _setModel(model) {\n    if (model == null || model === undefined) return;\n    _smartInboxModel = model;\n  };\n  var _getProperty = function _getProperty(property) {\n    return _smartInboxModel[property];\n  };\n  var _setProperty = function _setProperty(property, value) {\n    _smartInboxModel[property] = value;\n  };\n\n  var _addColumn = function _addColumn() {\n    _smartInboxModel.columns.push({\n      \"name\": \"\",\n      \"displayName\": \"\",\n      \"type\": \"\",\n      \"from\": [\n      {\n        \"process\": \"\",\n        \"column\": \"\" }] });\n\n\n\n  };\n\n  var _removeColumn = function _removeColumn(index) {\n    _smartInboxModel.columns.splice(index, 1);\n  };\n\n  var _updateColumn = function _updateColumn(index, column) {\n    _smartInboxModel.columns[index] = column;\n  };\n\n  var _moveColumn = function _moveColumn(fromIndex, toIndex) {\n    if (_smartInboxModel.columns[fromIndex] === undefined)\n    return;else\n    if (_smartInboxModel.columns[toIndex] === undefined) {\n      var column = _smartInboxModel.columns[fromIndex];\n      _smartInboxModel.columns.splice(fromIndex, 1);\n      _smartInboxModel.columns[toIndex] = column;\n    } else\n    {\n      var column = _smartInboxModel.columns.splice(fromIndex, 1)[0];\n      _smartInboxModel.columns.splice(toIndex, 0, column);\n    }\n  };\n\n  var _getColumns = function _getColumns() {\n    return _smartInboxModel.columns;\n  };\n\n  var _addAccess = function _addAccess() {\n    _smartInboxModel.access.push({\n      \"type\": \"\", //usergroup|role|stakeholder\n      \"value\": \"\", //guid       \n      \"displayName\": \"\" });\n\n  };\n\n  var _removeAccess = function _removeAccess(index) {\n    _smartInboxModel.access.splice(index, 1);\n  };\n\n  var _updateAccess = function _updateAccess(index, access) {\n    _smartInboxModel.access[index] = access;\n  };\n\n  var _getAccess = function _getAccess() {\n    return _smartInboxModel.access;\n  };\n\n  var _resetAccess = function _resetAccess() {\n    _smartInboxModel.access = [];\n  };\n\n  return {\n    getModel: _getModel,\n    setModel: _setModel,\n    get: _getProperty,\n    set: _setProperty,\n    addColumn: _addColumn,\n    removeColumn: _removeColumn,\n    updateColumn: _updateColumn,\n    moveColumn: _moveColumn,\n    getColumns: _getColumns,\n    addAccess: _addAccess,\n    removeAccess: _removeAccess,\n    updateAccess: _updateAccess,\n    getAccess: _getAccess,\n    resetAccess: _resetAccess };\n\n\n};\n\n\n// Auto extend\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.smartinbox\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n    self.context = params.context || \"workportal\";\n    self.dataModel = new smartInboxModel();\n    self.processesAvailable = null;\n    self.currentStep = 1;\n    self.numberOfSteps = params.numberOfSteps || 3;\n    self.customizedColumnsAvailable = null;\n    self.notifier = bizagi.injector.get('notifier');\n    self.loadDataDef = new $.Deferred();\n    self.sortOptions = [\n    { id: \"ascending\", text: bizagi.localization.getResource(\"workportal-widget-smartinbox-ascending\", \"Ascending\") },\n    { id: \"descending\", text: bizagi.localization.getResource(\"workportal-widget-smartinbox-descending\", \"Descending\") }];\n\n    self.pageSizeOptions = [\n    { id: \"10\", text: \"10\" },\n    { id: \"20\", text: \"20\" },\n    { id: \"30\", text: \"30\" },\n    { id: \"40\", text: \"40\" },\n    { id: \"50\", text: \"50\" },\n    { id: \"100\", text: \"100\" }];\n\n    self.maxColumns = 20;\n    // Define editor modes\n    if (params.selectedInboxData && params.selectedInboxData.smartInboxId && self.context == \"workportal\") {\n      if (!bizagi.util.isEmpty(params.selectedInboxData.owner)) {\n        self.cloning = params.cloning = true;\n      } else {\n        self.editing = params.editing = true;\n      }\n    }\n\n    self.filterWidget = new bizagi.workportal.widgets.smartinbox.filter(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"smartinbox-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-wizard\"),\n      \"smartinbox-columns\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-columns\"),\n      \"smartinbox-share\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-share\"),\n      \"smartinbox-shared-inbox-not-found\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.smartinbox\").concat(\"#ui-bizagi-workportal-widget-smartinbox-sharedinbox-not-found\"),\n\n      useNewEngine: false });\n\n\n    // Load smart inbox\n    if (params.selectedInboxData && params.selectedInboxData.smartInboxId) {\n      $.when(self.dataService.getSpecificSmartInbox({\n        settingName: params.selectedInboxData.settingName,\n        owner: params.selectedInboxData.owner,\n        smartInboxId: params.selectedInboxData.smartInboxId })).\n      done(function (data) {\n\n        if (!bizagi.util.isEmpty(params.selectedInboxData.owner)) data.id = Math.guid();\n        if (!bizagi.util.isEmpty(data.filter)) self.filterWidget.setModel(data.filter);\n        if (bizagi.util.isEmpty(data) || data.ownerType !== \"user\" && data.ownerType !== \"default\") data.ownerType = \"user\";\n\n        self.dataModel.setModel(data);\n        self.loadDataDef.resolve();\n      }).fail(function (err) {\n        if (err.status) {\n          self.sharedInboxNotFound = true;\n          self.loadDataDef.resolve();\n        }\n      });\n    } else {\n      self.loadDataDef.resolve();\n    }\n\n    self.renderContent();\n  },\n\n  /*\r\n     *   Returns the widget name\r\n     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTINBOX;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    // var template = self.getTemplate(\"smartinbox\");\n    var content = self.content = $(\"<div>\");\n\n    return content;\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var postRenderDef = new $.Deferred();\n    var callback;\n\n    $.when(self.loadDataDef).done(function () {\n      if (self.sharedInboxNotFound) {\n        $.tmpl(self.getTemplate(\"smartinbox-shared-inbox-not-found\")).appendTo(content);\n        postRenderDef.resolve();\n        $(\"#bz-btn-smartinbox-close\", content).bind(\"click\", $.proxy(self.closeWizard, self));\n        return;\n      }\n\n      if (self.params.shareMode !== undefined) {\n        self.renderShareMode();\n        postRenderDef.resolve();\n      } else\n      {\n        callback = self.renderWizardMode();\n      }\n\n      $.when(callback).done(function () {\n        postRenderDef.resolve();\n      });\n    });\n    return postRenderDef.promise();\n  },\n\n  onResize: function onResize() {\n    var self = this;\n    self.adjustStep2Height();\n    self.adjustStep3Height();\n  },\n\n  renderWizardMode: function renderWizardMode() {\n    var self = this;\n    var content = self.getContent();\n    var def = new $.Deferred();\n\n    self.mainTemplate = self.getTemplate(\"smartinbox-main\");\n    self.columnsTemplate = self.getTemplate(\"smartinbox-columns\");\n\n    $.when(self.loadDataDef).then(function () {\n\n      // Render wizard\n      $.tmpl(self.mainTemplate, {\n        dataModel: self.dataModel,\n        action: typeof self.params.selectedInboxData != \"undefined\" ? self.params.selectedInboxData : \"new\",\n        editing: self.editing,\n        adminMode: self.adminMode,\n        numberOfSteps: self.numberOfSteps }).\n      appendTo(content);\n\n      // Set rtl\n      if (bizagi.localization.isRTL)\n      content.addClass(\"bz-smartinbox-rtl\");\n\n      // Load available processes\n      $.when(self.dataService.getAllProcessesSmartInbox()).\n      then(function (data) {\n        self.processesAvailable = data;\n        if (self.processesAvailable == null || self.processesAvailable.length == 0) {\n          $(\"#bz-smartinbox-label-warning-processes-notfound\").css(\"display\", \"block\");\n          if (self.editing) {\n            $(\"#bz-btn-smartinbox-create\").hide();\n            $(\"#bz-btn-smartinbox-cancel\").removeClass(\"bz-btn--secondary\");\n            $(\"#bz-smartinbox-label-warning-processes\").css(\"display\", \"none\");\n          } else {\n            $(\"#bz-btn-smartinbox-next\").hide();\n            $(\"#bz-btn-smartinbox-cancel\").show();\n          }\n        }\n        self.loadProcesses(self.processesAvailable);\n      });\n\n      self.checkCurrentStep();\n      self.validateMode();\n\n      // Render filters\n      $.when(self.filterWidget.render()).\n      then(function (filterContent) {\n        $(\".bz-container-filters\", self.content).append(filterContent);\n        def.resolve();\n      });\n\n      // Configure buttons\n      $(\"#bz-btn-smartinbox-back\", self.content).bind(\"click\", $.proxy(self.movePrevious, self));\n      $(\"#bz-btn-smartinbox-next\", self.content).bind(\"click\", $.proxy(self.moveNext, self));\n      $(\"#bz-btn-smartinbox-cancel\", self.content).bind(\"click\", $.proxy(self.closeWizard, self));\n      $(\"#bz-btn-smartinbox-create\", self.content).bind(\"click\", $.proxy(self.saveSmartInbox, self));\n      $(\"#bz-smartinbox-label-warning-filters\", self.content).bind(\"click\", function () {$(this).hide();});\n      $(\"#bz-smartinbox-label-warning-processes\", self.content).bind(\"click\", function () {$(this).hide();});\n      $(\"#bz-smartinbox-label-warning-order\", self.content).bind(\"click\", function () {$(this).hide();});\n      // Add column handler\n      self.content.on(\"click\", \"#bz-smartinbox-step-2-add-column\", function (e) {\n        e.stopPropagation();\n        var $form = $(\"#bz-smartinbox-step2 > form\", content);\n        //Create a new combo element\n        if ($(\"#bz-smartinbox-step2\", content).find(\".bz-columns-options\").length < self.maxColumns) {\n          self.createColumn($form);\n        } else\n        {\n          self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-error-columns-limit\", \"You have reached the maximum number of columns\"));\n        }\n      });\n\n      if (self.editing) {\n        $(\"#bz-smartinbox-label-warning-processes\").css(\"display\", \"block\");\n      }\n\n      self.configureHandlers();\n    });\n\n    return def.promise();\n  },\n\n  movePrevious: function movePrevious() {\n    var self = this;\n    if (self.validateWizardAction(self.currentStep, self.currentStep - 1))\n    self.moveStepWizard(self.currentStep - 1);\n    if (self.currentStep == 1)\n    $(\"#bz-smartinbox-label-warning-processes\").css(\"display\", \"block\");\n  },\n\n  moveNext: function moveNext() {\n    var self = this;\n    if (self.validateWizardAction(self.currentStep, self.currentStep + 1))\n    self.moveStepWizard(self.currentStep + 1);\n  },\n\n  closeWizard: function closeWizard() {\n    var self = this;\n    self.params.dialogBox.dialog(\"close\");\n  },\n\n  saveSmartInbox: function saveSmartInbox() {\n    var self = this;\n\n    // Wait to onchage events set a parsed data\n    window.setTimeout(function () {\n      self.dataModel.set(\"filter\", self.filterWidget.getPersistenceModel());\n      var model = self.dataModel.getModel();\n\n      if (self.editing) {\n        if (!self.validateWizardAction(1)) {self.moveStepWizard(1);return;};\n        if (!self.validateWizardAction(2)) {self.moveStepWizard(2);return;};\n        if (!self.validateWizardAction(3)) {self.moveStepWizard(3);return;};\n        if (self.adminMode) {\n          if (!self.validateWizardAction(4)) {self.moveStepWizard(4);return;};\n        }\n      } else {\n        if (!self.validateWizardAction(self.currentStep)) return;\n      }\n      var service;\n      if (self.params.selectedInboxData && !self.cloning) {\n        service = self.dataService.updateSmartInbox(self.params.selectedInboxData, model);\n      } else if (model.ownerType == \"user\") {\n        service = self.dataService.createSmartInbox(model);\n      } else {\n        service = self.dataService.createAdminSmartInbox(model);\n      }\n\n      service.done(function (response) {\n        if (response && response.errorCode) {\n          if (response.errorCode == \"exceededLimit\")\n          self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-error-exceeded-limit\", \"This Smart folder cannot be created. You have exceeded the maximum number of Smart folders allowed.\"));else\n          if (response.errorCode == \"existingName\")\n          self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-error-existing-name\", \"A smart inbox already exists with the name\") + \" '\" + model.name + \"'\");\n        } else\n        {\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.inboxWidget || bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\n            selectedSmartInboxId: model.id });\n\n          try {\n            self.closeWizard();\n          } catch (e) {\n            $(\".ui-dialog-content\").dialog(\"close\");\n          }\n        }\n      });\n    }, 300);\n  },\n\n  moveStepWizard: function moveStepWizard(stepNumber) {\n    var self = this;\n    self.currentStep = stepNumber;\n    self.checkCurrentStep();\n  },\n\n  validateMode: function validateMode() {\n    var self = this;\n    if (self.params.selectedInboxData !== undefined && self.params.selectedInboxData.actionName !== undefined) {\n      if (self.params.selectedInboxData.actionName == \"create\" || self.params.selectedInboxData.actionName == \"edit\") {\n        $(\"#bz-smartinbox-name\", self.content).parent().removeClass('control-required');\n        if (self.params.selectedInboxData.actionName == \"create\")\n        $(\"#bz-smartinbox-name\", self.content).val($(\"#bz-smartinbox-name\", self.content).val());\n      }\n    }\n  },\n\n  checkCurrentStep: function checkCurrentStep() {\n    var self = this;\n\n    $('#bz-smartinbox-current-step-label', self.content).text(self.currentStep);\n    if (self.currentStep == 1) self.checkStepOne();else\n    if (self.currentStep == 2) self.checkStepTwo();else\n    if (self.currentStep == 3) self.checkStepThree();\n  },\n\n  checkStepOne: function checkStepOne() {\n    var self = this;\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', 'none');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', 'none');\n      $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-inactive-done');\n      $(\"#bz-smartinbox-navigate-label1 > span\", self.content).html('1');\n    }\n    $(\"#bz-smartinbox-step1\", self.content).css('display', '');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-active');\n\n    self.updateFilterModel();\n  },\n\n  checkStepTwo: function checkStepTwo() {\n    var self = this;\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', 'none');\n      $(\"#bz-smartinbox-navigate-label1 > span\", self.content).html('<svg style=\"width:16px;height:16px\" xmlns=\"http://www.w3.org/2000/svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#check-mark\" /></svg>');\n      $(\"#bz-smartinbox-navigate-label2 > span\", self.content).html('2');\n      $(\"#bz-smartinbox-navigate-label1\", self.content).addClass('bz-inactive-done');\n      $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-inactive-done');\n    }\n\n    $(\"#bz-smartinbox-step1\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', '');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-inactive');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-active');\n    self.adjustStep2Height();\n\n    self.loadCustomizedColumns();\n    self.updateFilterModel();\n  },\n\n  checkStepThree: function checkStepThree() {\n    var self = this;\n\n    if (!self.editing) {\n      $(\"#bz-btn-smartinbox-back\", self.content).css('display', '');\n      $(\"#bz-btn-smartinbox-next\", self.content).css('display', 'none');\n      $(\"#bz-btn-smartinbox-create\", self.content).css('display', '');\n      $(\"#bz-smartinbox-navigate-label2 > span\", self.content).html('<svg style=\"width:16px;height:16px\" xmlns=\"http://www.w3.org/2000/svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#check-mark\" /></svg>');\n      $(\"#bz-smartinbox-navigate-label2\", self.content).addClass('bz-inactive-done');\n    }\n\n    $(\"#bz-smartinbox-step1\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step2\", self.content).css('display', 'none');\n    $(\"#bz-smartinbox-step3\", self.content).css('display', '');\n    $(\"#bz-smartinbox-navigate-label1\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label2\", self.content).removeClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).addClass('bz-active');\n    $(\"#bz-smartinbox-navigate-label3\", self.content).removeClass('bz-inactive');\n    self.adjustStep3Height();\n\n    self.getAllCustomizedColumnsSmartInbox().\n    then(function () {\n      var filterModel = self.dataModel.get(\"filter\");\n      self.updateFilterModel();\n      self.filterWidget.setWFClassList(self.dataModel.get(\"processes\"));\n      if (!bizagi.util.isEmpty(self.dataModel.get(\"processes\")) && self.dataModel.get(\"processes\").length > 1) {\n        $(\"#bz-smartinbox-label-warning-filters\", self.content).css(\"display\", \"block\");\n        self.filterWidget.setCustomizedColumns(self.buildColumnsForFilterModel(self.customizedColumnsAvailable));\n      } else {\n        self.filterWidget.setCustomizedColumns(self.customizedColumnsAvailable);\n      }\n\n      self.filterWidget.setModel(filterModel);\n      self.loadSortingOptions();\n    });\n  },\n\n  adjustStep2Height: function adjustStep2Height() {\n    var self = this;\n    var dialogBox = self.params.dialogBox || self.params.masterEditor.params.dialogBox;\n    var warningOrder = $(\"#bz-smartinbox-label-warning-order\", self.content).outerHeight(true) || 0;\n    $(\"#bz-smartinbox-step2 form\", self.content).css('max-height', dialogBox.height() - 240 - warningOrder + 'px');\n  },\n\n  adjustStep3Height: function adjustStep3Height() {\n    var self = this;\n    var dialogBox = self.params.dialogBox || self.params.masterEditor.params.dialogBox;\n    $(\".bz-smartfilters-content\", self.content).css('max-height', dialogBox.height() - 350 + 'px');\n  },\n\n  buildColumnsForFilterModel: function buildColumnsForFilterModel(columns) {\n    var self = this;\n    return $.grep(columns, function (column) {return !column.from || column.from.length == self.dataModel.get(\"processes\").length;});\n  },\n\n  updateFilterModel: function updateFilterModel() {\n    var self = this;\n\n    var filterModel = self.filterWidget.getModel();\n    if (filterModel != null) {\n      self.dataModel.set(\"filter\", filterModel);\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#bz-smartinbox-name\", content).on(\"change\", function (e) {\n      self.dataModel.set(\"name\", e.target.value);\n\n      if (e.target.value.trim() == \"\")\n      $(this).parent().addClass('control-required');else\n\n      $(this).parent().removeClass('control-required');\n    });\n\n    // For editing mode, configure tabs\n    if (self.editing) {\n      $(\"#bz-smartinbox-navigate-label1\", self.content).bind(\"click\", function () {self.changeStepWizard(1);});\n      $(\"#bz-smartinbox-navigate-label2\", self.content).bind(\"click\", function () {self.changeStepWizard(2);});\n      $(\"#bz-smartinbox-navigate-label3\", self.content).bind(\"click\", function () {self.changeStepWizard(3);});\n    }\n  },\n\n  changeStepWizard: function changeStepWizard(newStep) {\n    var self = this;\n\n    if (self.validateWizardAction(self.currentStep, newStep)) {\n      self.moveStepWizard(newStep);\n    }\n  },\n\n  loadProcesses: function loadProcesses(processesAvailable) {\n    var self = this;\n    var $search = $(\"#bz-processes-search\", self.content);\n\n    $search.bizagi_multiSelect({\n      list: processesAvailable,\n      itemValue: function itemValue(obj) {\n        return obj.guid;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onChange: function onChange(data) {\n        self.customizedColumnsAvailable = null;\n        var processes = [];\n        for (var i = 0; i < data.length; i++) {\n          processes.push(data[i].value);\n        }\n\n        var columns = self.dataModel.get(\"columns\");\n        var defaultColumns = $.grep(columns, function (item) {return item != null && item.isDefault;});\n\n        self.dataModel.set(\"processes\", processes);\n        self.dataModel.set(\"columns\", defaultColumns);\n        self.dataModel.set(\"filter\", {});\n        self.filterWidget.setModel({});\n        self.dataModel.set(\"sort\", []);\n      },\n      label: \"\",\n      iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n      parentPositionElement: \"#bz-processes-search > ul\",\n      parentElementToFitWidth: \"#bz-processes-search\",\n      parentElementToBorder: \"#bz-processes-search > ul\",\n      classOpenedList: \"bz-processes-search-border-open-list\",\n      classOpenedParent: \"bz-opened\",\n      classItem: \"theme-navigation-border\",\n      SEARCH_MIN_LENGTH: 0,\n      openOnFocus: true,\n      customRenderItem: function customRenderItem(ul, item) {\n        return $(\"<li>\").\n        append(\n        $(\"<a>\").\n        append(\"<span class='bz-processes-name'>\" + item.value.displayName + \"</span>\").\n        append(\"<span class='bz-processes-category'>\" + item.value.application + \" - \" + item.value.category + \"</span>\")).\n\n        appendTo(ul);\n      } });\n\n\n    $search.bizagi_multiSelect(\"setDataItems\", self.convertProcessesFromModelToMultiSelect(self.processesAvailable, self.dataModel.get(\"processes\")));\n  },\n\n  convertProcessesFromModelToMultiSelect: function convertProcessesFromModelToMultiSelect(allProcess, selectedProcess) {\n    var data = [];\n    allProcess = allProcess || [];\n    selectedProcess = selectedProcess || [];\n\n    for (var i = 0, l = allProcess.length; i < l; i++) {\n      if (selectedProcess.indexOf(allProcess[i].guid) > -1) {\n        data.push({\n          displayName: allProcess[i].displayName,\n          guid: allProcess[i].guid });\n\n      }\n    }\n    return data;\n  },\n\n  /**\r\n      * STEP 2: SELECT COLUMNS\r\n      */\n  getSelectedProcessesId: function getSelectedProcessesId() {\n    var self = this;\n    var $search = $(\"#bz-processes-search\", self.content);\n    var processesId = [];\n    $.each($search.bizagi_multiSelect(\"getDataItems\"), function (_, item) {\n      processesId.push(item.value);\n    });\n\n    return processesId;\n  },\n\n  loadCustomizedColumns: function loadCustomizedColumns() {\n    var self = this;\n    var content = self.content;\n    var processesId = self.getSelectedProcessesId();\n    var $form = $(\"#bz-smartinbox-step2 > form\", content);\n\n    $form.sortable({\n      items: \"> div\",\n      handle: \".bz-drag\",\n      start: function start(e, ui) {\n        $(this).attr('data-previndex', ui.item.index());\n      },\n      update: function update(e, ui) {\n        var toIndex = ui.item.index();\n        var fromIndex = $(this).attr('data-previndex');\n        $(this).removeAttr('data-previndex');\n        self.dataModel.moveColumn(fromIndex, toIndex);\n      } });\n\n\n    // Invoke service\n    self.getAllCustomizedColumnsSmartInbox().\n    then(function () {\n      var columns = self.dataModel.get(\"columns\");\n      var updatedColumns = [];\n      if ($form.data(\"rendered\") == \"true\") $form.empty();\n\n      if (columns.length == 0 || !$.any(columns, function (item) {return item != null && item.alwaysVisible;})) {\n        var defaultColumns = $.grep(self.customizedColumnsAvailable, function (item) {return item.isDefault && !item.isOptional;});\n        columns = defaultColumns.concat(columns);\n      }\n\n      // Add previously configured columns\n      for (var i = 0, l = columns.length; i < l; i++) {\n        var column = columns[i];\n        if (column) {\n          if (self.isColumnValid(column, processesId, updatedColumns)) {\n            self.createColumn($form, column);\n          }\n        } else {\n          self.createColumn($form);\n          updatedColumns.push(null);\n        }\n      }\n      self.dataModel.set(\"columns\", updatedColumns);\n\n      if (updatedColumns.length == 0) {\n        if (!self.cloning) {\n          // Add first column\n          setTimeout(function () {self.createColumn($form);}, 100);\n        }\n      }\n\n      $form.data(\"rendered\", \"true\");\n      $form.scroll(function (e) {\n        $(\".ui-select-dropdown.open\", $form).remove();\n      });\n    });\n  },\n\n  getAllCustomizedColumnsSmartInbox: function getAllCustomizedColumnsSmartInbox(processesId) {\n    var self = this;\n    if (!bizagi.util.isEmpty(self.customizedColumnsAvailable)) {\n      return $.Deferred().resolve(self.customizedColumnsAvailable).promise();\n    }\n\n    var processesId = self.getSelectedProcessesId();\n    return $.when(self.dataService.getAllCustomizedColumnsSmartInbox(processesId)).\n    then(function (data) {\n      self.customizedColumnsAvailable = data;\n      return data;\n    });\n  },\n\n\n  isColumnValid: function isColumnValid(column, processesId, updatedColumns) {\n    var self = this;\n    var result = column.isDefault || $.any(column.from, function (item) {return processesId.indexOf(item.process) != -1;});\n    if (result) {\n      var index = self.customizedColumnsAvailable.findIndex(function (obj) {return obj.name == column.name;});\n      if (index > -1) {\n        var customizedColumn = self.customizedColumnsAvailable[index];\n        column.displayName = customizedColumn.displayName;\n        updatedColumns.push(customizedColumn);\n      } else {\n        result = false;\n      }\n    }\n    return result;\n  },\n\n  /**\r\n     * Create a new column \r\n     */\n  createColumn: function createColumn($form, value) {\n    var self = this;\n    value = value || \"\";\n    var guid = Math.guid();\n    var $content = $.tmpl(self.columnsTemplate, {\n      guid: guid, alwaysVisible: value.alwaysVisible, displayName: value.displayName });\n\n\n    if (!value.alwaysVisible) {\n      var values = $.grep(self.customizedColumnsAvailable, function (item) {return !item.alwaysVisible;});\n\n      $(\"#\" + guid, $content).uicombo({\n        data: { combo: values },\n        initValue: value,\n        itemValue: function itemValue(obj) {\n          return obj.name;\n        },\n        itemText: function itemText(obj) {\n          return obj.displayName;\n        },\n        onChange: function onChange(obj) {\n          var value = obj.ui.data('value');\n          var column = $.first(self.customizedColumnsAvailable, function (item) {return item.name == value;});\n          if (column != null) {\n            var index = $(\".bz-columns-options\").index($(obj.element).closest(\".bz-columns-options\"));\n            self.dataModel.updateColumn(index, column);\n          }\n        } });\n\n\n      $(\".bz-delete-column\", $content).bind(\"click\", function (e) {\n        var index = $(\".bz-delete-column\").index(this);\n        self.dataModel.removeColumn(index);\n        $(e.srcElement).closest(\".bz-columns-options\").remove();\n      });\n    } else\n    {\n      $(\".bz-delete-column\", $content).hide();\n    }\n\n    $content.appendTo($form);\n    $content[0].scrollIntoView();\n\n    //Add empty column to the model\n    if (value === \"\") {\n      var index = $(\".bz-columns-options\").index($(\"#\" + guid, $form).closest(\".bz-columns-options\"));\n      self.dataModel.updateColumn(index, null);\n    }\n  },\n\n  /**\r\n      * STEP 3: DEFINE FILTERS / SORT\r\n      */\n\n  loadSortingOptions: function loadSortingOptions() {\n    var self = this;\n    $(\".column-combo-sort\", self.content).empty();\n    $(\".column-combo-order\", self.content).empty();\n    var selectedValue = null;\n    var sort = self.dataModel.get(\"sort\");\n\n    if (sort != null && sort.length > 0 && sort[0].column !== undefined) selectedValue = sort[0];\n\n    self.createComboSortCustomizedColumns($(\".column-combo-sort\", self.content), selectedValue);\n\n    if (selectedValue == null || !self.isSortColumnValid(selectedValue.column)) {\n      self.dataModel.set(\"sort\", []);\n      self.createComboEmptySortOptions($(\".column-combo-order\", self.content));\n    } else {\n      self.createComboSortOptions($(\".column-combo-order\", self.content), selectedValue);\n    }\n  },\n\n  createComboSortCustomizedColumns: function createComboSortCustomizedColumns(customizedColumnItem, sort) {\n    var self = this;\n\n    var columns = bizagi.clone(self.dataModel.get(\"columns\"));\n    columns.unshift({ name: \"\", displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") });\n\n    var initialValue = columns[0];\n    if (sort != null) {\n      var search = $.grep(columns, function (item) {return item.name == sort.column;});\n      if (search.length > 0) initialValue = search[0];\n    }\n\n    $(customizedColumnItem).uicombo({\n      data: { combo: columns },\n      initValue: initialValue,\n      itemValue: function itemValue(obj) {\n        return obj.name;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onChange: function onChange(obj) {\n        if (obj.value == \"\") {\n          $(\".column-combo-order\", self.content).empty();\n          self.createComboEmptySortOptions($(\".column-combo-order\", self.content));\n          self.dataModel.set(\"sort\", []);\n        } else\n        {\n          $(\".column-combo-order\", self.content).empty();\n          self.createComboSortOptions($(\".column-combo-order\", self.content), sort);\n          self.dataModel.set(\"sort\", [{\n            \"priority\": 1,\n            \"column\": obj.value,\n            \"type\": sort ? sort.type : \"ascending\" }]);\n\n        }\n      } });\n\n  },\n\n  createComboSortOptions: function createComboSortOptions(element, sort) {\n    var self = this;\n    var initialValue = self.sortOptions[0];\n    if (sort != null) {\n      var search = $.grep(self.sortOptions, function (item) {return item.id == sort.type;});\n      if (search.length > 0) initialValue = search[0];\n    }\n\n    $(element).uicombo({\n      data: { combo: self.sortOptions },\n      initValue: initialValue,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.text;\n      },\n      onChange: function onChange(obj) {\n        self.dataModel.set(\"sort\", [{\n          \"priority\": self.dataModel.get(\"sort\")[0].priority,\n          \"column\": self.dataModel.get(\"sort\")[0].column,\n          \"type\": obj.value }]);\n\n      } });\n\n  },\n\n  createComboEmptySortOptions: function createComboEmptySortOptions(object) {\n    var sortOptions = [\n    { id: \"\", text: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") }];\n\n\n    $(object).uicombo({\n      data: { combo: sortOptions },\n      initValue: sortOptions[0],\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.text;\n      } });\n\n  },\n\n\n  validateWizardAction: function validateWizardAction(currentStep, nextStep) {\n    var self = this;\n    var duplicatedColumns = [];\n\n    if (currentStep > nextStep) {\n      return true;\n    } else {\n      var arrayMessagesErrors = [];\n      if (currentStep == 1) {\n        if (self.dataModel.get(\"name\").trim() === \"\") {\n          $(\"#bz-smartinbox-name\", self.content).val(\"\");\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-name-cannot-be-empty\", \"Name field cannot be empty\"));\n        }\n        if (self.dataModel.get(\"processes\").length == 0) {\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-at-least-one-process\", \"At least select one process\"));\n        }\n      } else if (currentStep == 2) {\n        // Check if exists empty columns\n        var emptyColumns = self.dataModel.get(\"columns\").filter(function (x) {return x === null;});\n        if (emptyColumns.length > 0) {\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-empty-columns\", \"Can not contain empty columns\"));\n        } else\n        if (self.hasDuplicatedColumns(duplicatedColumns)) {\n          arrayMessagesErrors.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-duplicated-columns\", \"Can not contain duplicate columns\") + \": \" + duplicatedColumns.join(\", \"));\n        }\n      } else if (currentStep == 3) {\n        self.filterWidget.validateFilterForSave(arrayMessagesErrors);\n      }\n      // Check if exists any error message\n      if (arrayMessagesErrors.length > 0) {\n        $.each(arrayMessagesErrors, function (ind, elem) {\n          self.notifier.showErrorMessage(elem);\n        });\n        return false;\n      } else\n      {\n        return true;\n      }\n    }\n  },\n\n  validateEmail: function validateEmail(email) {\n    var regexEmail = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return regexEmail.test(email);\n  },\n\n  isSortColumnValid: function isSortColumnValid(columnName) {\n    var self = this;\n    var columns = self.dataModel.get(\"columns\");\n    return $.any(columns, function (item) {return item.name == columnName;});\n  },\n\n  hasDuplicatedColumns: function hasDuplicatedColumns(duplicatedColumns) {\n    var self = this;\n    var columns = self.dataModel.get(\"columns\");\n    var result = $.any(bizagi.util.objectValues($.groupBy(columns, \"name\")), function (item) {\n      if (item.length > 1) {\n        if (duplicatedColumns.indexOf(item[0].displayName) == -1) {\n          duplicatedColumns.push(item[0].displayName);\n        }\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return result;\n  },\n\n  /*  SHARE FOLDER WIZARD*/\n  renderShareMode: function renderShareMode() {\n    var self = this;\n    var content = self.getContent();\n\n    self.mainTemplate = self.getTemplate(\"smartinbox-share\");\n    $.tmpl(self.mainTemplate).appendTo(content);\n\n    // Set rtl\n    if (bizagi.localization.isRTL)\n    content.addClass(\"bz-smartinbox-rtl\");\n\n    var tagInputEmails = $(\"#bz-users-search > input\", self.content);\n    tagInputEmails.tagsinput(\"items\", { allowDuplicates: false, trimValue: true, confirmKeys: [13, 59, 44], delimiter: \";\" });\n    tagInputEmails.on('beforeItemAdd', $.proxy(self.validateEmailAddress, self));\n    $(\"#bz-users-search\", self.content).bind(\"click\", function () {$(this).parent().find('.bootstrap-tagsinput input').focus();});\n    $(\"#bz-btn-smartinbox-share\", self.content).bind(\"click\", function () {self.shareSmartInbox(tagInputEmails);});\n    $(\"#bz-btn-smartinbox-cancel-share\", self.content).bind(\"click\", function () {self.closeWizard();});\n  },\n\n  validateEmailAddress: function validateEmailAddress(event) {\n    var self = this;\n\n    if (!self.validateEmail(event.item)) {\n      self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-invalid-email-address\", \"Please insert a valid email address\"));\n      var _this = this;\n      setTimeout(function () {\n        $(_this).parent().find('.bootstrap-tagsinput input').val(event.item);\n        $(_this).parent().find('.bootstrap-tagsinput input').attr(\"size\", event.item.length);\n      }, 5);\n      event.cancel = true;\n    }\n  },\n\n  shareSmartInbox: function shareSmartInbox(tagInputEmails) {\n    var self = this;\n    if (tagInputEmails.tagsinput('items').length > 0) {\n      self.dataService.shareSmartInbox(self.params.selectedInboxData, tagInputEmails.tagsinput('items')).done(function (response) {\n        if (response === undefined) {\n          self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-success-message\", \"Smart Inbox was shared successfully\"));\n          self.params.dialogBox.dialog(\"close\");\n        } else\n        {\n          if (response.usersNotFound)\n          self.notifier.showWarningMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-usersnotfound\", \"The following email addresses don't exist:\") + \" \" + response.usersNotFound.join(\",\"));\n          if (response.disabledUsers)\n          self.notifier.showWarningMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-disabledusers\", \"The following email addresses belong to disabled users:\") + \" \" + response.disabledUsers.join(\",\"));\n          if (response.currentUser)\n          self.notifier.showWarningMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-currentUser\", \"Cannot share a smart inbox with itself\"));\n        }\n      });\n    } else\n    {\n      self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-share-message-insert-at-least-one\", \"Please insert at least one email address\"));\n    }\n  } });","var smartInboxFilterModel = function smartInboxFilterModel() {\n  /**\r\n                                                              * Smart Inbox Filter Data Model\r\n                                                              */\n  var _filters = {};\n\n  var _getModel = function _getModel() {\n    return bizagi.util.objectValues(_filters);\n  };\n\n  var _getInternalModel = function _getInternalModel() {\n    return _filters;\n  };\n\n  var _setModel = function _setModel(model) {\n    if (model === undefined || model == null) return;\n    _filters = {};\n    var date = Date.now();\n    $.each(model, function (i, item) {\n      _filters[date] = item;\n      date++;\n    });\n  };\n\n  var _addRow = function _addRow() {\n    var row = { column: undefined, operator: undefined, type: undefined };\n    var id = Date.now();\n    _filters[id] = row;\n    return id;\n  };\n\n  var _getRow = function _getRow(id) {\n    return _filters[id];\n  };\n\n  var _removeRow = function _removeRow(id) {\n    delete _filters[id];\n  };\n\n  var _setRowProperty = function _setRowProperty(id, property, value) {\n    _filters[id][property] = value;\n  };\n\n  var _deleteRowProperty = function _deleteRowProperty(id, property) {\n    delete _filters[id][property];\n  };\n\n  return {\n    getModel: _getModel,\n    getInternalModel: _getInternalModel,\n    setModel: _setModel,\n    addRow: _addRow,\n    getRow: _getRow,\n    removeRow: _removeRow,\n    setRowProperty: _setRowProperty,\n    deleteRowProperty: _deleteRowProperty };\n\n};\n\n// Auto extend\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.smartinbox.filter\", {}, {\n  MAX_DECIMALS: 2,\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n    self.model = new smartInboxFilterModel();\n    self.processesAvailable = null;\n    self.currentStep = 1;\n    self.customizedColumnsAvailable = null;\n    self.loadDataDef = new $.Deferred();\n    self.maxFilters = 15;\n    self.maxInValues = 20;\n    self.notifier = bizagi.injector.get('notifier');\n    self.entityValuesCache = {};\n    self.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : \".\";\n\n    //Load templates\n    self.loadTemplates({\n      \"smartinbox-filter-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter\"),\n      \"smartinbox-filter-field-boolean\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-boolean\"),\n      \"smartinbox-filter-field-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-text\"),\n      \"smartinbox-filter-field-number\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-number\"),\n      \"smartinbox-filter-field-datetime\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-datetime\"),\n      \"smartinbox-filter-field-on-operator\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-on-operator\"),\n      \"smartinbox-filter-field-in-operator-combo\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-in-operator-combo\"),\n      \"smartinbox-filter-field-in-operator-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.smartinbox.filter\").concat(\"#ui-bizagi-workportal-smartinbox-filter-value-field-in-operator-text\"),\n\n      useNewEngine: false });\n\n  },\n\n  setCustomizedColumns: function setCustomizedColumns(columns) {\n    var self = this;\n    self.customizedColumnsAvailable = columns;\n  },\n\n  setWFClassList: function setWFClassList(wfClassList) {\n    var self = this;\n    self.userTasksCache = null;\n    self.wfClassList = wfClassList;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"smartinbox-filter-main\");\n    self.content = $.tmpl(template, {});\n    return self.content;\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.booleanFieldTemplate = self.getTemplate(\"smartinbox-filter-field-boolean\");\n    self.textFieldTemplate = self.getTemplate(\"smartinbox-filter-field-text\");\n    self.numberFieldTemplate = self.getTemplate(\"smartinbox-filter-field-number\");\n    self.dateTimeFieldTemplate = self.getTemplate(\"smartinbox-filter-field-datetime\");\n    self.onOperatorTemplate = self.getTemplate(\"smartinbox-filter-field-on-operator\");\n    self.inOperatorComboTemplate = self.getTemplate(\"smartinbox-filter-field-in-operator-combo\");\n    self.inOperatorTextTemplate = self.getTemplate(\"smartinbox-filter-field-in-operator-text\");\n\n    self.content.on(\"click\", \".bz-filter-add-container i\", $.proxy(self.addRow, self));\n    self.content.on(\"click\", \".bz-filter-add-container label\", $.proxy(self.addRow, self));\n    self.content.on(\"click\", \".bz-smartfilters-row-icons .bz-smartfilters-add\", $.proxy(self.addRow, self));\n    // Set rtl\n    if (bizagi.localization.isRTL)\n    self.content.addClass(\"bz-smartfilters-rtl\");\n\n    self.renderFilters();\n  },\n\n  addRow: function addRow() {\n    var self = this;\n\n    if ($(\".bz-smartfilters-content\", self.content).find(\".bz-smartfilters-row-real\").length < self.maxFilters) {\n      var container = $(\".bz-smartfilters-content\", self.content);\n      var row = self.createFilterRow();\n      container.append(row);\n      row[0].scrollIntoView();\n    } else\n    {\n      self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-error-filters-limit\", \"You have reached the maximum number of filterssss\"));\n    }\n  },\n\n  renderFilters: function renderFilters() {\n    var self = this;\n    var internalModel = self.model.getInternalModel();\n    var container = $(\".bz-smartfilters-content\", self.content);\n\n    $.each(Object.keys(internalModel), function (_, id) {\n      var item = self.model.getRow(id);\n      if (self.isColumnValid(item)) {\n        var row = self.createFilterRow(item, id);\n        container.append(row);\n        row[0].scrollIntoView();\n      }\n    });\n  },\n\n  isColumnValid: function isColumnValid(item) {\n    var self = this;\n    if (item.column === undefined) return true;\n    return $.any(self.customizedColumnsAvailable, function (c) {return c.name == item.column;});\n  },\n\n  /* PUBLIC METHODS */\n\n  setModel: function setModel(model) {\n    var self = this;\n    self.model.setModel(model);\n\n    // Update view\n    $(\".bz-smartfilters-row-real\", self.content).remove();\n    if (!bizagi.util.isEmpty(self.customizedColumnsAvailable))\n    self.renderFilters();\n  },\n\n  getModel: function getModel() {\n    var self = this;\n    return self.model.getModel();\n  },\n\n  getPersistenceModel: function getPersistenceModel() {\n    var self = this;\n    var result = $.grep(self.model.getModel(), function (item) {return item.column !== undefined && item.operator !== undefined;});\n    if (result.length == 0) result = undefined;\n    return result;\n  },\n\n  validateFilterForSave: function validateFilterForSave(messages) {\n    var self = this;\n    var model = self.model.getModel();\n    var result = true;\n    var rowsRender = $(\".bz-smartfilters-row-real\", self.content);\n    $.each(model, function (i, item) {\n      /* validate column selection*/\n      if (item.column === undefined || bizagi.util.isEmpty(item.column)) {\n        result = false;\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-column\").find(\".biz-wp-combo-input\").addClass(\"bz-filter-not-valid\");\n      } else\n      {\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-column\").find(\".biz-wp-combo-input\").removeClass(\"bz-filter-not-valid\");\n      }\n      /* validate operator selection*/\n      if (item.operator === undefined || bizagi.util.isEmpty(item.operator)) {\n        result = false;\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-operator\").find(\".biz-wp-combo-input\").addClass(\"bz-filter-not-valid\");\n      } else\n      {\n        $(rowsRender[i]).find(\".bz-smartfilters-row-select-operator\").find(\".biz-wp-combo-input\").removeClass(\"bz-filter-not-valid\");\n        /* validate value*/\n        if (item.operator != 'is-empty' && item.operator != 'is-not-empty') {\n          if (item.operator == 'between') {\n            if (item.from === undefined || item.to === undefined) {\n              result = false;\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").addClass(\"bz-filter-not-valid\");\n            } else\n            {\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").removeClass(\"bz-filter-not-valid\");\n            }\n          } else\n          {\n            if (item.value === undefined) {\n              result = false;\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").addClass(\"bz-filter-not-valid\");\n            } else\n            {\n              $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").removeClass(\"bz-filter-not-valid\");\n            }\n          }\n        } else\n        {\n          $(rowsRender[i]).find(\".bz-smartfilters-row-select-value\").removeClass(\"bz-filter-not-valid\");\n        }\n      }\n    });\n    if (!result) {\n      messages.push(bizagi.localization.getResource(\"workportal-widget-smartinbox-filter-error\", \"Please fill all controls in the filter section\"));\n    }\n\n    return result;\n  },\n\n  /* PRIVATE METHODS */\n  createFilterRow: function createFilterRow(item, id) {\n    var self = this;\n\n    //Update model\n    if (!item) {\n      var id = self.model.addRow();\n    }\n\n    $(\".bz-smartfilters-header\", self.content).css(\"display\", \"flex\");\n    $newRow = $(\".bz-smartfilters-row-model\", self.content).clone().removeClass('bz-smartfilters-row-model').removeClass('bz-smartfilters-hidden').addClass('bz-smartfilters-row-real');\n    $newRow.data(\"row-id\", id);\n\n    var params = {\n      id: id,\n      row: $newRow,\n      item: item };\n\n\n    self.createComboCustomizedColumns(params);\n    self.createComboOperatorFilters(params);\n\n    $newRow.find('.bz-smartfilters-add').bind(\"click\", function () {\n      self.createFilterRow(this.closest('.bz-smartfilters-row'));\n    });\n\n    $newRow.find('.bz-smartfilters-remove').bind(\"click\", function () {\n      self.removeFilterRow(this);\n    });\n\n    $(\".bz-container-filters\").scrollTop($(\".bz-container-filters\").prop(\"scrollHeight\"));\n    return $newRow;\n  },\n\n  removeFilterRow: function removeFilterRow(el) {\n    var self = this;\n    var $row = $(el).closest(\".bz-smartfilters-row-real\");\n    //Update model\n    self.model.removeRow($row.data(\"row-id\"));\n\n    $row.closest('.bz-smartfilters-row').remove();\n  },\n\n  removeValidationValue: function removeValidationValue(params) {\n    params.row.find('.bz-smartfilters-row-select-value').removeClass(\"bz-filter-not-valid\");\n  },\n\n  createComboCustomizedColumns: function createComboCustomizedColumns(params) {\n    var self = this;\n    var columnItem = params.row.find('.column-combo');\n    var columns = bizagi.clone(self.customizedColumnsAvailable);\n    if (bizagi.util.isEmpty(columns)) columns = [];\n    columns.sort(function (a, b) {\n      return a.displayName > b.displayName ? 1 : b.displayName > a.displayName ? -1 : 0;\n    });\n    columns.unshift({ displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\"), name: \"\", type: \"\" });\n\n    // Set initial value\n    var initialValue = columns[0];\n    if (params.item) {\n      var elements = $.grep(columns, function (item) {return item.name == params.item.column;});\n      if (elements.length > 0) {\n        initialValue = elements[0];\n        params.item.entity = initialValue.entity;\n      }\n    }\n\n    columnItem.uicombo({\n      data: { combo: columns },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {\n        return obj.name;\n      },\n      itemText: function itemText(obj) {\n        return obj.displayName;\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data('value');\n        if (obj.text == undefined && obj.value == undefined) return;\n        var column = $.grep(columns, function (item) {return item.name == value;});\n        if (column.length > 0) {\n          $column = column[0];\n          self.createComboOperatorFilters($.extend({}, params, { item: { column: $column.name, type: $column.type, entity: $column.entity } }));\n\n          //Update model\n          self.model.setRowProperty(params.id, \"column\", value);\n          self.model.setRowProperty(params.id, \"type\", $column.type);\n\n          //Clean operator\n          self.cleanOperator(params.id);\n          //Clean value in model and render\n          self.cleanValueField(params.id);\n          params.row.find('.bz-smartfilters-row-select-column').find('.biz-wp-combo-input').removeClass(\"bz-filter-not-valid\");\n          self.removeValidationValue(params);\n          if (!bizagi.util.isEmpty(params.valueField))\n          params.valueField.empty();\n        }\n      } });\n\n  },\n\n\n  createComboOperatorFilters: function createComboOperatorFilters(params) {\n    var self = this;\n    var operatorItem = params.row.find('.operator-combo');\n    var operators = self.buildOperatorValues(params.item ? params.item.type : null);\n    var isValid = operatorItem.find(\".bz-filter-not-valid\").length !== undefined && operatorItem.find(\".bz-filter-not-valid\").length > 0 ? false : true;\n\n    if (operatorItem.attr(\"role\") == \"bizagi.ui.controls.uicombo\") {\n      // Reset plugin\n      operatorItem.uicombo(\"destroy\");\n    }\n\n    var initialValue = operators[0];\n    if (params.item) {\n      var elements = $.grep(operators, function (item) {return item.id == params.item.operator;});\n      if (elements.length > 0) initialValue = elements[0];\n    }\n\n    operatorItem.uicombo({\n      data: { combo: operators },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onChange: function onChange(obj) {\n        var $operator = obj.ui.data('value');\n        if (obj.text == undefined && obj.value == undefined) return;\n        self.createValueField($.extend({}, params, { item: { column: params.item.column, operator: $operator, type: params.item.type, entity: params.item.entity } }));\n\n        //Update model\n        self.model.setRowProperty(params.id, \"operator\", $operator == \"0\" ? undefined : $operator);\n        self.cleanValueField(params.id);\n        params.row.find('.biz-wp-combo-input').removeClass(\"bz-filter-not-valid\");\n        self.removeValidationValue(params);\n        if ($operator == \"0\")\n        params.valueField.empty();\n      } });\n\n\n    if (!isValid)\n    operatorItem.find(\".biz-wp-combo-input\").addClass(\"bz-filter-not-valid\");\n\n    // Render value field if present\n    if (params.item) {\n      self.createValueField(params);\n    }\n  },\n\n  createValueField: function createValueField(params) {\n    var self = this;\n    var dataType = params.item.type;\n    var operator = params.item.operator;\n    params.valueField = params.row.find('.bz-smartfilters-value-field');\n    params.valueField.empty();\n    if (bizagi.util.isEmpty(params.item.operator)) return;\n\n    if (operator == 'is-empty' || operator == 'is-not-empty') {\n      // these special cases doesn't show any value field, so we need to hide it\n    } else if (operator == 'between') {\n      // special case because there should be two editors\n      if (self.isDateTimeDataType(dataType)) {\n        // show double datetime editor\n        self.buildDateTimeBetweenField(params);\n      } else if (self.isNumberDataType(dataType)) {\n        // show double number editor\n        self.buildNumberBetweenField(params);\n      }\n    } else if (operator == 'in' || operator == 'not-in') {\n      // special case because there should be a combo editor or a multientry depending on datatype\n      if (params.item.type == \"entity\") {\n        self.buildInOperatorComboValueField(params);\n      } else if (params.item.column == \"IdTask\" || params.item.column == \"Activity\") {\n        self.buildInOperatorComboForActivityField(params);\n      } else if (self.isNumberDataType(dataType)) {\n        self.buildInOperatorNotEntityValueField($.extend(params, { isNumber: true }));\n      } else {\n        self.buildInOperatorNotEntityValueField(params);\n      }\n    } else if (operator == 'starts-with' || operator == 'ends-with' || operator == 'contains') {\n      self.buildInOperatorNotEntityValueField(params);\n    } else if (operator == 'on') {\n      // this special case shows a combo of values\n      self.buildOnOperatorValueField(params);\n    } else if (self.isTextDataType(dataType) || params.item.type == \"entity\") {\n      // show a text editor\n      self.buildTextValueField(params);\n    } else if (self.isNumberDataType(dataType)) {\n      // show a number editor\n      self.buildNumberValueField(params);\n    } else if (self.isBooleanDataType(dataType)) {\n      // show a combo editor\n      self.buildBooleanValueField(params);\n    } else if (self.isDateTimeDataType(dataType)) {\n      // show a datetime editor\n      self.buildDateTimeValueField(params);\n    }\n  },\n\n  setValueField: function setValueField(id, property, value) {\n    var self = this;\n    self.model.setRowProperty(id, property, value);\n  },\n\n  cleanValueField: function cleanValueField(id, property) {\n    var self = this;\n    if (property) {\n      self.model.deleteRowProperty(id, property);\n    } else {\n      self.model.deleteRowProperty(id, \"value\");\n      self.model.deleteRowProperty(id, \"from\");\n      self.model.deleteRowProperty(id, \"to\");\n    }\n  },\n\n  cleanOperator: function cleanOperator(id) {\n    var self = this;\n    self.model.deleteRowProperty(id, \"operator\");\n  },\n\n  /* CONTROL BUILD METHODS*/\n\n\n  buildBooleanValueField: function buildBooleanValueField(params) {\n    var self = this;\n    var combo = $.tmpl(self.booleanFieldTemplate, {}).appendTo(params.valueField);\n    var booleanComboValues = [{ id: 0, displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") },\n    { id: 'true', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-true-label\", \"True\") },\n    { id: 'false', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-false-label\", \"False\") }];\n    var initialValue = booleanComboValues[0];\n    if (params.item) {\n      var elements = $.grep(booleanComboValues, function (item) {return item.id == params.item.value;});\n      if (elements.length > 0) initialValue = elements[0];\n    }\n\n    combo.uicombo({\n      data: { combo: booleanComboValues },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {return obj.id;},\n      itemText: function itemText(obj) {return obj.displayName;},\n      onChange: function onChange(obj) {\n        if (obj.ui.data('value') !== \"0\") {\n          self.setValueField(params.id, \"value\", obj.ui.data('value'));\n          self.removeValidationValue(params);\n        } else\n        {\n          self.cleanValueField(params.id);\n        }\n      } });\n\n  },\n\n  buildTextValueField: function buildTextValueField(params) {\n    var self = this;\n    var maxAllowedLength = 100;\n    var text = $.tmpl(self.textFieldTemplate, {}).appendTo(params.valueField);\n\n    var validate = function validate(text) {\n      text = text || \"\";\n      // Length validation\n      text = text.substr(0, maxAllowedLength);\n\n      //Trim content\n      text = text.trim();\n\n      return text;\n    };\n\n    text.change(function () {\n      var value = validate(text.val());\n\n      if (value != \"\") {\n        self.setValueField(params.id, \"value\", value);\n        self.removeValidationValue(params);\n      } else {\n        self.cleanValueField(params.id);\n      }\n    });\n\n    if (params.item && params.item.value) {\n      var value = validate(params.item.value);\n      text.val(value);\n      self.setValueField(params.id, \"value\", value);\n    }\n  },\n\n  buildNumberValueField: function buildNumberValueField(params) {\n    var self = this;\n    params.propertyToUpdate = params.propertyToUpdate || \"value\";\n    params.placeholder = params.placeholder || \"\";\n    var number = $.tmpl(self.numberFieldTemplate, params).appendTo(params.valueField);\n    number.numeric(self.decimalSymbol);\n    number.change(function () {\n      var value = number.val();\n      if (value.length && self.isInvalidNumber(value, params.item.type)) {\n        number.val(\"\");\n        number.data(\"value\", \"\");\n        self.cleanValueField(params.id, params.propertyToUpdate);\n        return;\n      }\n\n      if (number.val().trim() != \"\") {\n        number.setValue(value);\n      } else {\n        number.data(\"value\", \"\");\n        self.cleanValueField(params.id, params.propertyToUpdate);\n      }\n\n      if (params.onChange) {\n        params.onChange(this);\n      }\n    });\n    number.focus(function () {\n      if (params.item.type == \"Money\") {\n        var originalValue = number.data(\"value\");\n        if (!bizagi.util.isEmpty(originalValue)) {\n          originalValue = originalValue.replaceAll(\".\", self.decimalSymbol);\n          originalValue = originalValue.replaceAll(\",\", self.decimalSymbol);\n        }\n        number.val(originalValue);\n      }\n    });\n    number.focusout(function () {\n      if (params.item.type == \"Money\") {\n        var value = number.val();\n        number.val(self.formatCurrency(value));\n      }\n    });\n\n    number.getValue = function () {\n      return Number(params.item.type == \"Money\" ? number.data(\"value\") : number.val());\n    };\n\n    number.setValue = function (value) {\n      // Convert always to . decimal separator for persistence\n      value = value.toString().replaceAll(\",\", \".\");\n      self.setValueField(params.id, params.propertyToUpdate, value);\n      self.removeValidationValue(params);\n      if (params.item.type == \"Money\") {\n        var originalValue = self.removeMoneyExtraDecimals(value);\n        val = self.formatCurrency(originalValue);\n        number.data(\"value\", originalValue);\n        number.val(val);\n      } else {\n        number.val(value);\n      }\n    };\n\n    if (params.item && params.item[params.propertyToUpdate] !== undefined) {\n      var value = params.item[params.propertyToUpdate];\n      var originalValue = self.removeMoneyExtraDecimals(value);\n      if (!bizagi.util.isEmpty(originalValue)) {\n        originalValue = originalValue.replaceAll(\".\", self.decimalSymbol);\n        originalValue = originalValue.replaceAll(\",\", self.decimalSymbol);\n      }\n\n      if (params.item.type == \"Money\") {\n        number.data(\"value\", originalValue);\n        number.val(self.formatCurrency(originalValue));\n      } else {\n        number.val(originalValue);\n      }\n    }\n    return number;\n  },\n\n  buildNumberBetweenField: function buildNumberBetweenField(params) {\n    var self = this;\n    var numberFrom = self.buildNumberValueField($.extend({}, params, {\n      propertyToUpdate: \"from\",\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-from-label\", \"From\"),\n      onChange: function onChange(element) {\n        if (bizagi.util.isEmpty(numberFrom.val())) return;\n        var value = numberFrom.getValue();\n        var valueTo = numberTo.getValue();\n        if (value > valueTo && valueTo !== \"\") {\n          numberTo.setValue(value);\n        }\n      } }));\n\n    var numberTo = self.buildNumberValueField($.extend({}, params, {\n      propertyToUpdate: \"to\",\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-to-label\", \"To\"),\n      onChange: function onChange(element) {\n        if (bizagi.util.isEmpty(numberTo.val())) return;\n        var value = numberTo.getValue();\n        var valueFrom = numberFrom.getValue();\n        if (valueFrom > value) {\n          numberFrom.setValue(value);\n        }\n      } }));\n\n\n    numberFrom.parent().wrapInner(\"<div class='bz-smartfilters-value-field-between' />\");\n  },\n\n  buildDateTimeValueField: function buildDateTimeValueField(params) {\n    var self = this;\n    params.propertyToUpdate = params.propertyToUpdate || \"value\";\n    params.placeholder = params.placeholder || bizagi.localization.getResource(\"dateFormat\");\n    var datetime = $.tmpl(self.dateTimeFieldTemplate, { placeholder: params.placeholder }).appendTo(params.valueField);\n    var options = {\n      firstDay: bizagi.override.firstDay || 0,\n      dateFormat: self.getDateFormat(BIZAGI_DEFAULT_DATETIME_INFO.shortDateFormat),\n      changeYear: true,\n      changeMonth: true,\n      shortYearCutoff: typeof BIZAGI_DEFAULT_DATETIME_INFO != \"undefined\" && typeof BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta != \"undefined\" ? \"+\" + BIZAGI_DEFAULT_DATETIME_INFO.twoDigitYearMaxDelta : \"+50\",\n      yearRange: \"c-100:c+20\" };\n\n\n    datetime.datepicker(options);\n    datetime.change(function () {\n      // Validate format of the value \n      var sValue = datetime.val();\n      if (bizagi.util.dateFormatter.getDateFromFormat(sValue, bizagi.localization.defaultDatetimeInfo.shortDateFormat) == 0) {\n        datetime.val(\"\");\n        datetime.setValue(undefined);\n        return;\n      }\n\n      if (datetime.val().trim() != \"\") {\n        var value = bizagi.util.dateFormatter.formatInvariant(datetime.datepicker(\"getDate\"), false);\n        self.setValueField(params.id, params.propertyToUpdate, value);\n        if (typeof params.onChange == \"function\") {\n          params.onChange(this);\n        }\n        self.removeValidationValue(params);\n      } else\n      {\n        self.cleanValueField(params.id);\n      }\n    });\n\n    datetime.setValue = function (value) {\n      self.setValueField(params.id, params.propertyToUpdate, value);\n    };\n\n    if (params.item && params.item[params.propertyToUpdate] !== undefined) {\n      datetime.datepicker().datepicker(\"setDate\", new Date(params.item[params.propertyToUpdate]));\n    }\n\n    return datetime;\n  },\n\n  buildDateTimeBetweenField: function buildDateTimeBetweenField(params) {\n    var self = this;\n\n    var getDate = function getDate(element) {\n      var date;\n      try {\n        date = $.datepicker.parseDate(self.getDateFormat(BIZAGI_DEFAULT_DATETIME_INFO.shortDateFormat), element.value);\n      } catch (error) {\n        date = null;\n      }\n      return date;\n    };\n\n    var dateFrom = self.buildDateTimeValueField($.extend({}, params, {\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-from-label\", \"From\") + \": \" + bizagi.localization.getResource(\"dateFormat\"),\n      propertyToUpdate: \"from\",\n      onChange: function onChange(element) {\n        // Validate valid range\n        var fromValue = dateFrom.datepicker(\"getDate\");\n        var toValue = dateTo.datepicker(\"getDate\");\n        if (toValue < fromValue) {\n          dateTo.setValue(bizagi.util.dateFormatter.formatInvariant(fromValue, false));\n        }\n        dateTo.datepicker(\"option\", \"minDate\", getDate(element));;\n      } }));\n\n\n\n    var dateTo = self.buildDateTimeValueField($.extend({}, params, {\n      placeholder: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-to-label\", \"To\") + \": \" + bizagi.localization.getResource(\"dateFormat\"),\n      propertyToUpdate: \"to\",\n      onChange: function onChange(element) {\n        // Validate valid range\n        var fromValue = dateFrom.datepicker(\"getDate\");\n        var toValue = dateTo.datepicker(\"getDate\");\n        if (toValue < fromValue) {\n          dateFrom.setValue(bizagi.util.dateFormatter.formatInvariant(toValue, false));\n        }\n        dateFrom.datepicker(\"option\", \"maxDate\", getDate(element));\n      } }));\n\n\n\n    dateFrom.parent().wrapInner(\"<div class='bz-smartfilters-value-field-between' />\");\n  },\n\n  buildOnOperatorValueField: function buildOnOperatorValueField(params) {\n    var self = this;\n    var combo = $.tmpl(self.onOperatorTemplate, {}).appendTo(params.valueField);\n    var onOperatorValues = [{ id: 0, displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") },\n    { id: 'today', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-today-label\", \"Today\") },\n    { id: 'this-week', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-thisweek-label\", \"This week\") },\n    { id: 'this-month', displayName: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-thismonth-label\", \"This month\") }];\n\n    var initialValue = onOperatorValues[0];\n    if (params.item) {\n      var elements = $.grep(onOperatorValues, function (item) {return item.id == params.item.value;});\n      if (elements.length > 0) initialValue = elements[0];\n    }\n\n    combo.uicombo({\n      data: { combo: onOperatorValues },\n      initValue: initialValue,\n      isEditable: true,\n      itemValue: function itemValue(obj) {return obj.id;},\n      itemText: function itemText(obj) {return obj.displayName;},\n      onChange: function onChange(obj) {\n        if (obj.ui.data('value') !== \"0\") {\n          self.setValueField(params.id, \"value\", obj.ui.data('value'));\n          self.removeValidationValue(params);\n        } else\n        {\n          self.cleanValueField(params.id);\n        }\n      } });\n\n  },\n\n  buildInOperatorComboValueField: function buildInOperatorComboValueField(params) {\n    var self = this;\n    params.guidElement = Math.guid();\n    var multiselectCombo = $.tmpl(self.inOperatorComboTemplate, { guidElement: params.guidElement }).appendTo(params.valueField);\n\n    setTimeout(function () {\n      multiselectCombo.bizagi_searchMultiSelect({\n        scope: { entityGuid: params.item.entity, dataService: self.dataService },\n        asyncList: self.getEntityValues,\n        list: {},\n        itemValue: function itemValue(obj) {\n          return obj.id || obj.value;\n        },\n        itemText: function itemText(obj) {\n          return obj.label || obj.displayName;\n        },\n        onChange: function onChange(data) {\n          var values = [];\n          for (var i = 0; i < data.length; i++) {\n            values.push({ id: data[i].value, displayName: data[i].text });\n          }\n          if (values.length > 0) {\n            self.setValueField(params.id, \"value\", values);\n            self.removeValidationValue(params);\n          } else\n          {\n            self.cleanValueField(params.id);\n          }\n        },\n        label: \"\",\n        iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n        parentPositionElement: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        parentElementToFitWidth: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"']\",\n        parentElementToBorder: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        classOpenedList: \"bz-processes-search-border-open-list\",\n        classOpenedParent: \"bz-opened\",\n        classItem: \"theme-navigation-border\",\n        SEARCH_MIN_LENGTH: 0,\n        openOnFocus: true,\n        customRenderItem: function customRenderItem(ul, item) {\n          return $(\"<li>\").\n          append(\n          $(\"<a>\").\n          append(\"<span class='bz-combo-in-operator-combo-values-name'>\" + (item.label || item.displayName) + \"</span>\")).\n\n          appendTo(ul);\n        } });\n\n\n      if (params.item && params.item.value) {\n        multiselectCombo.bizagi_searchMultiSelect('setDataItems', params.item.value);\n      }\n    }, 100);\n  },\n\n  buildInOperatorComboForActivityField: function buildInOperatorComboForActivityField(params) {\n    var self = this;\n    params.guidElement = Math.guid();\n    var multiselectCombo = $.tmpl(self.inOperatorComboTemplate, { guidElement: params.guidElement }).appendTo(params.valueField);\n    self.loadUserTasks();\n\n    setTimeout(function () {\n      multiselectCombo.bizagi_multiSelect({\n        list: self.userTasksCache,\n        itemValue: function itemValue(obj) {\n          return obj.id || obj.value;\n        },\n        itemText: function itemText(obj) {\n          return obj.label || obj.displayName;\n        },\n        onChange: function onChange(data) {\n          var values = [];\n          for (var i = 0; i < data.length; i++) {\n            var val = $.grep(self.userTasksCache, function (item) {return item.id == data[i].value;})[0];\n            values.push({ id: data[i].value, displayName: data[i].text, internalId: val.internalId, processName: val.processName });\n          }\n          if (values.length > 0) {\n            self.setValueField(params.id, \"value\", values);\n            self.removeValidationValue(params);\n          } else\n          {\n            self.cleanValueField(params.id);\n          }\n        },\n        label: \"\",\n        iconClass: \"bz-icon bz-icon-search-outline bz-icon-16\",\n        parentPositionElement: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        parentElementToFitWidth: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"']\",\n        parentElementToBorder: \".bz-smartfilters-value-field-combo-in-operator-combo-values[data-guid='\" + params.guidElement + \"'] > ul\",\n        classOpenedList: \"bz-processes-search-border-open-list\",\n        classOpenedParent: \"bz-opened\",\n        classItem: \"theme-navigation-border\",\n        SEARCH_MIN_LENGTH: 0,\n        openOnFocus: true,\n        customRenderItem: function customRenderItem(ul, item) {\n          return $(\"<li>\").\n          append(\n          $(\"<a>\").\n          append(\"<span class='bz-combo-in-operator-combo-values-name'>\" + (typeof item.label === 'string') ? item.label : item.displayName || \"\" + \"</span>\")).\n\n          appendTo(ul);\n        } });\n\n\n      if (params.item && params.item.value) {\n        multiselectCombo.bizagi_multiSelect('setDataItems', params.item.value);\n      }\n    }, 100);\n  },\n\n  /**\r\n      * Get entity values from server\r\n      * \r\n      * @param {*} request \r\n      * @param {*} response \r\n      * @param {*} scope \r\n      */\n  getEntityValues: function getEntityValues(request, response, scope) {\n    scope.entityValuesCache = scope.entityValuesCache || [];\n\n    if (request.term in scope.entityValuesCache) {\n      response(scope.entityValuesCache[request.term]);\n      return;\n    }\n\n    var entityValues = [];\n    $.when(scope.dataService.getEntityValuesForInboxFilter({ entityGuid: scope.entityGuid, wildcard: request.term })).done(function (data) {\n      $.grep(data, function (item) {\n        entityValues.push({\n          label: item.displayName,\n          value: item.displayName,\n          id: item.id });\n\n      });\n      scope.entityValuesCache[request.term] = entityValues;\n      response(entityValues);\n    });\n  },\n\n  loadUserTasks: function loadUserTasks() {\n    var self = this;\n    if (self.userTasksCache) {\n      return self.userTasksCache;\n    }\n\n    var values = [];\n    if (self.wfClassList) {\n      $.when(self.dataService.getUserTasksByWFClass(self.wfClassList)).done(function (data) {\n        $.grep(data, function (item) {\n          values.push({\n            label: item.displayName,\n            value: item.displayName,\n            internalId: item.internalId,\n            processName: item.processName,\n            id: item.id });\n\n        });\n        self.userTasksCache = values;\n      });\n    } else\n    {\n      var smartInboxId = self.params.selectedInboxData ? self.params.selectedInboxData.smartInboxId : undefined;\n      var id = self.params.workflowId ? self.params.workflowId : self.params.smartInboxId || smartInboxId;\n      var isSmartInbox = self.params.smartInboxId || smartInboxId !== undefined;\n      $.when(self.dataService.getUserTasksForInboxFilter({ id: id, isSmartInbox: isSmartInbox })).done(function (data) {\n        $.grep(data, function (item) {\n          values.push({\n            label: item.displayName,\n            value: item.displayName,\n            internalId: item.internalId,\n            processName: item.processName,\n            id: item.id });\n\n        });\n        self.userTasksCache = values;\n      });\n    }\n  },\n\n  buildInOperatorNotEntityValueField: function buildInOperatorNotEntityValueField(params) {\n    var self = this;\n    var template = self.inOperatorTextTemplate;\n    var multiselectText = $.tmpl(template, {}).appendTo(params.valueField);\n    multiselectText.tagsinput(\"items\", {\n      allowDuplicates: false,\n      itemText: function itemText(item) {\n        if (params.item.type == \"Money\") {\n          var item = self.removeMoneyExtraDecimals(item);\n          return self.formatCurrency(item);\n        }\n        return this.itemValue(item);\n      },\n      confirmKeys: [13],\n      delimiter: null });\n\n    multiselectText.on('beforeItemAdd', function (event) {\n      var values = multiselectText.tagsinput(\"items\");\n\n      if (params.isNumber) {\n        if (event.item.length > 0 && self.isInvalidNumber(event.item, params.item.type)) {\n          event.cancel = true;\n          return;\n        }\n      }\n\n      if (values.length >= self.maxInValues) {\n        self.notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-error-in-values-limit\", \"You have reached the maximum number of values\"));\n        event.cancel = true;\n      }\n    });\n    multiselectText.on('itemAdded itemRemoved', function (event) {\n      var values = multiselectText.tagsinput(\"items\");\n\n      if (params.isNumber) {\n        values = $.map(values, function (value) {\n          // Convert always to . decimal separator for persistence\n          value = value.replaceAll(\",\", \".\");\n          return self.removeMoneyExtraDecimals(value);\n        });\n      }\n\n      if (values.length > 0) {\n        self.setValueField(params.id, \"value\", values);\n        self.removeValidationValue(params);\n      } else\n      {\n        self.cleanValueField(params.id);\n      }\n    });\n\n\n    if (params.isNumber) {\n      multiselectText.tagsinput(\"input\").numeric(self.decimalSymbol);\n    }\n    if (params.item && params.item.value) {\n      $.each(params.item.value, function (_, val) {\n        multiselectText.tagsinput('add', val);\n      });\n    }\n  },\n\n  /* MISC METHODS*/\n  /**\r\n                     * \r\n                     * @param {*} type \r\n                     */\n  buildOperatorValues: function buildOperatorValues(type) {\n    var operators = [{ id: 0, name: bizagi.localization.getResource(\"workportal-widget-smartinbox-please-select-a-value\", \"Please select a value\") }];\n    var possibleOperators = [\n    { id: \"is-empty\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-is-empty-label\", \"is empty\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"datetime\", \"smalldatetime\", \"entity\"] },\n    { id: \"is-not-empty\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-is-not-empty-label\", \"is not empty\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"datetime\", \"entity\"] },\n    { id: \"equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-equals-label\", \"equals\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-equals-label\", \"not equals\"),\n      appliesTo: [\"boolean\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"starts-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-starts-with-label\", \"starts with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-starts-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-starts-with-label\", \"not starts with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"ends-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-ends-with-label\", \"ends with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-ends-with\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-ends-with-label\", \"not ends with\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"contains\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-contains-label\", \"contains\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"not-contains\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-contains-label\", \"not contains\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\", \"entity\"] },\n    { id: \"greater-than\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-greater-than-label\", \"greater than\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"greater-than-or-equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-greater-than-or-equals-label\", \"greater than or equals\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"less-than\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-less-than-label\", \"less than\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"less-than-or-equals\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-less-than-or-equals-label\", \"less than or equals\"),\n      appliesTo: [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"datetime\"] },\n    { id: \"on\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-on-label\", \"on\"),\n      appliesTo: [\"datetime\"] },\n    { id: \"between\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-between-label\", \"between\"),\n      appliesTo: [\"datetime\", \"int\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"bigint\"] },\n    { id: \"in\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-in-label\", \"in\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"entity\"] },\n    { id: \"not-in\", name: bizagi.localization.getResource(\"workportal-widget-smartinbox-filters-not-in-label\", \"not in\"),\n      appliesTo: [\"varchar\", \"char\", \"text\", \"nchar\", \"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\", \"entity\"] }];\n\n\n    if (type) {\n      type = type.toLowerCase();\n      var operatorsToAdd = $.grep(possibleOperators, function (item) {\n        return item.appliesTo.indexOf(type) >= 0;\n      });\n      Array.prototype.push.apply(operators, operatorsToAdd);\n    }\n\n    return operators;\n  },\n\n  isTextDataType: function isTextDataType(dataType) {\n    var charDataType = [\"varchar\", \"char\", \"text\", \"nchar\", \"nvarchar\", \"ntext\"];\n    dataType = dataType.toLowerCase();\n    return charDataType.indexOf(dataType) > -1;\n  },\n\n  isNumberDataType: function isNumberDataType(dataType) {\n    var numberDataType = [\"int\", \"bigint\", \"smallint\", \"tinyint\", \"decimal\", \"numeric\", \"money\", \"float\", \"real\"];\n    dataType = dataType.toLowerCase();\n    return numberDataType.indexOf(dataType) > -1;\n  },\n\n  isBooleanDataType: function isBooleanDataType(dataType) {\n    dataType = dataType.toLowerCase();\n    return dataType == \"boolean\";\n  },\n\n  isDateTimeDataType: function isDateTimeDataType(dataType) {\n    var dateDataType = [\"datetime\", \"smalldatetime\"];\n    dataType = dataType.toLowerCase();\n    return dateDataType.indexOf(dataType) > -1;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      *\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return datePickerFormat;\n  },\n\n  isInvalidNumber: function isInvalidNumber(value, type) {\n    var self = this;\n    if (value == \".\") return true;\n    if (value.match(\"[#$%'()]\")) return true;\n    value = self.decimalSymbol == \".\" ? value.replaceAll(\",\", \".\") : value.replaceAll(\".\", \",\");\n    if (Number(value) > self.calculateMaxValue(type)) return true;\n    if (Number(value) < self.calculateMinValue(type)) return true;\n    return value.replace(new RegExp(\"[^\" + self.decimalSymbol + \"]\", \"g\"), \"\").length > 1;\n  },\n\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === \"TinyInt\") {\n      return 0; // tinyint\n    } else\n    if (dataType === \"SmallInt\") {\n      return -32768; // smallint\n    } else\n    if (dataType === \"Int\") {\n      return -2147483648; // int\n    } else\n    if (dataType === \"BigInt\") {\n      return -999999999999999; // bigint\n    } else\n    {\n      return -922337203685477; // Money | Float | Real | Decimal\n    }\n  },\n\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === \"TinyInt\") {\n      return 255; // tinyint\n    } else\n    if (dataType === \"SmallInt\") {\n      return 32767; // smallint\n    } else\n    if (dataType === \"Int\") {\n      return 2147483647; // int\n    } else\n    if (dataType === \"BigInt\") {\n      return 999999999999999; // bigint\n    } else\n    {\n      return 922337203685477; // Money | Float | Real | Decimal\n    }\n\n  },\n\n  removeMoneyExtraDecimals: function removeMoneyExtraDecimals(value) {\n    var self = this;\n    var originalValue = value + \"\";\n    var dotIndex = originalValue.indexOf(self.decimalSymbol);\n    if (dotIndex > 0 && dotIndex + self.MAX_DECIMALS + 1 < originalValue.length) {\n      originalValue = originalValue.substring(0, dotIndex + self.MAX_DECIMALS + 1);\n    }\n    return originalValue;\n  },\n\n  formatCurrency: function formatCurrency(value) {\n    var self = this;\n    var groupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : \",\";\n    var decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : \".\";\n    var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : \"$\";\n\n    $test = $(\"<input type='text' value='\" + value + \"'>\");\n    $test.formatCurrency({\n      symbol: symbol,\n      decimalSymbol: decimalSymbol,\n      digitGroupSymbol: groupSymbol,\n      groupDigits: \"3\",\n      roundToDecimalPlace: self.MAX_DECIMALS });\n\n    return $test.val();\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /*\r\n                                                                                                                                                                                                            *   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n                                                                                                                                                                                                            *   Author: Edward Morales\r\n                                                                                                                                                                                                            *   Comments:\r\n                                                                                                                                                                                                            *   -   This script will provide sub menu widget\r\n                                                                                                                                                                                                            */\n\n// Auto extend\nbizagi.workportal.widgets.subMenu.extend(\"bizagi.workportal.widgets.subMenu\", {}, {\n  /**\r\n                                                                                     *   To be overriden in each device to apply layouts\r\n                                                                                     */\n  postRender: function postRender() {\n    var self = this;\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    // render sub menu content\n    self.renderSubMenuContent();\n\n    self.scrollVertical({\n      \"autohide\": false });\n\n  },\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#categories\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n  /*\r\n      *   Show content for sub menu item\r\n      */\n\n  renderSubMenuContent: function renderSubMenuContent() {\n    var self = this;\n    var content = self.getContent();\n    var listTemplate = self.workportalFacade.getTemplate(self.isAdminMenu() ? \"menu.submenu.cathegories.list\" : \"menu.submenu.list\");\n    var listContainer = $(\"#categories\", content);\n    var data = {};\n    var callBack = {\n      \"ThemeBuilder\": function ThemeBuilder(args) {\n        args = args || {};\n        if (args.url) {\n          args.windowOpenBlank.location; //Prevent security message browsers open popups. Reason: window.open after callbacks.\n        }\n      },\n      \"asyncECMUpload\": function asyncECMUpload(args) {\n        args = args || {};\n        self.showWidgetPopup({\n          widget: args.url,\n          title: args.title,\n          id: args.id });\n\n      },\n\n      \"AdminSmartInbox\": function AdminSmartInbox(args) {\n        args = args || {};\n        args.width = 1000;\n        args.height = 400;\n        self.showWidgetPopup({\n          widget: args.url,\n          title: args.title,\n          id: args.id,\n          width: 850,\n          height: 800 });\n\n      } };\n\n\n    // TODO: SNAKE-1296 remove these lines\n    try {\n      if (bizagi.override.enableMultipleCasesReassigment) {\n        self.params.options.menuData.push({\n          categoryKey: \"CaseAdmin\",\n          categoryName: self.getResource(\"workportal-menu-submenu-adminReassignCases\"),\n          categoryUrl: \"adminReassignCases\" });\n\n\n        callBack.CaseAdmin = function (args) {\n          args = args || {};\n          self.showWidgetPopup({\n            widget: args.url,\n            title: args.title,\n            id: args.id });\n\n        };\n      }\n    } catch (e) {\n\n    } // Nothing todo, just skip this option in menu\n\n    //DRAGON-152 Adidas - Async ECM\n    try {\n      if (bizagi.override.enableAsyncECMUploadJobs) {\n        self.params.options.menuData.push({\n          categoryKey: \"asyncECMUpload\",\n          categoryName: self.getResource(\"workportal-menu-submenu-asyncECMUpload\"),\n          categoryUrl: \"asyncECMUpload\" });\n\n      }\n    } catch (e) {\n      // Nothing todo, just skip this option in menu\n    }\n\n\n    try {\n\n      //delete frankenstein implementations\n      // revisar el contenido de self.params.options.menuData para tener en cuenta los sub menus   autorizados\n      var authorized = self.getSubItemsAuthorized();\n\n      self.deleteMenuOption(\"UserAdmin\");\n      self.deleteMenuOption(\"Stakeholder\");\n      self.deleteMenuOption(\"AuthenticationLogQuery\");\n      self.deleteMenuOption(\"EncryptionAdmin\");\n      self.deleteMenuOption(\"UserPendingRequests\");\n      self.deleteMenuOption(\"CaseAdmin\");\n      self.deleteMenuOption(\"AsynchronousWorkitemRetries\");\n      self.deleteMenuOption(\"UserDefaultAssignation\");\n      self.deleteMenuOption(\"Profiles\");\n      self.deleteMenuOption(\"AlarmAdmin\");\n      self.deleteMenuOption(\"Licenses\");\n      self.deleteMenuOption(\"UnlockFormsAdmin\");\n      self.deleteMenuOption(\"GRDimensionAdmin\");\n      self.deleteMenuOption(\"DocumentTemplates\");\n      self.deleteMenuOption(\"ProcessAdmin\");\n      self.deleteMenuOption(\"Multilanguage\");\n      self.deleteMenuOption(\"EntityAdmin\");\n      self.deleteMenuOption(\"Holidays\");\n      self.deleteMenuOption(\"ProjectName\");\n      self.deleteMenuOption(\"OAuthApplications\");\n      self.deleteMenuOption(\"AdhocProcessAdmin\");\n      self.deleteMenuOption(\"AdhocEntityAdmin\");\n      self.deleteMenuOption(\"AdhocUserGroupAdmin\");\n      self.deleteMenuOption(\"AdhocCreateProcess\");\n      self.deleteMenuOption(\"UserDelegates\");\n      self.deleteMenuOption(\"AdhocUserGroupReport\");\n      self.deleteMenuOption(\"UserPermissionReport\");\n      self.deleteMenuOption(\"ErrorLogs\");\n      self.deleteMenuOption(\"AdminSmartInbox\");\n\n      $.each(self.params.options.menuData, function (key, value) {\n\n        if (value.categoryKey == \"BusinessPolicies\") {\n          self.params.options.menuData[key].categoryClassName = \"bz-icon-policy-outline\";\n        }\n\n        if (value.categoryKey == \"ThemeBuilder\") {\n          self.params.options.menuData[key].categoryClassName = \"bz-icon-paint-outline\";\n        }\n\n        if (value.categoryKey == \"AdminSmartInbox\") {\n          self.params.options.menuData[key].categoryClassName = \"bz-icon-folder-add-outline\";\n        }\n      });\n      if ($.inArray(\"BusinessPolicies\", authorized) == -1 || !bizagi.features.enableOldBusinessPoliciesAdministration) {\n        self.deleteMenuOption(\"BusinessPolicies\");\n      }\n\n      if ($.inArray(\"BusinessPolicies\", authorized) !== -1 && bizagi.features.enableNewBusinessPoliciesAdministration) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"Vocabularies\",\n          categoryClassName: \"icon-vocabulary\",\n          categoryName: self.getResource(\"workportal-widget-admin-business-policies-vocabulary\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES,\n          typeIcon: \"svg\" });\n\n      }\n\n      if (bizagi.util.isEnableFeature(\"enableUserPermissionsReportDownload\") && $.inArray(\"Userpermissionsreport\", authorized) !== -1) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"UserPermissionReport\",\n          categoryClassName: \"icon-user-report\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserPermissionReport\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT,\n          typeIcon: \"svg\" });\n\n      }\n\n      if ($.inArray(\"UserAdmin\", authorized) !== -1) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"UserAdmin\",\n          categoryClassName: \"bz-icon-users-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION });\n\n      }\n\n      if ($.inArray(\"Stakeholder\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"StakeholderAdmin\",\n          categoryClassName: \"bz-icon-stakeholders-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-StakeholderAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS });\n\n      }\n\n      if ($.inArray(\"EntityAdmin\", authorized) != -1) {\n        self.params.options.menuData.unshift({\n          categoryKey: \"EntityAdmin\",\n          categoryClassName: \"bz-icon-database-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-EntityAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES });\n\n      }\n\n      //create the new menu option using the old categoryKey\n      if ($.inArray(\"AuthenticationLogQuery\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AuthenticationLogQuery\",\n          categoryClassName: \"bz-icon-authentication-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AuthenticationLogQuery\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG });\n\n      }\n\n      if ($.inArray(\"EncryptionAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"EncryptionAdmin\",\n          categoryClassName: \"bz-icon-lock-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-EncryptionAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS });\n\n      }\n\n      if ($.inArray(\"UserPendingRequests\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UserPendingRequests\",\n          categoryClassName: \"bz-icon-unlock-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserPendingRequests\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS });\n\n      }\n\n      if ($.inArray(\"CaseAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"CaseAdmin\",\n          categoryClassName: \"bz-icon-case-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-CaseAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH });\n\n      }\n\n      if ($.inArray(\"UnlockFormsAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UnlockFormsAdmin\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UnlockFormsAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS });\n\n      }\n\n      if ($.inArray(\"AsynchronousWorkitemRetries\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AsynchronousWorkitemRetries\",\n          categoryClassName: \"bz-icon-asynchronous-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AsynchronousWorkitemRetries\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES });\n\n      }\n\n      if ($.inArray(\"UserDefaultAssignation\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UserDefaultAssignation\",\n          categoryClassName: \"bz-icon-user-manage-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserDefaultAssignation\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER });\n\n\n      }\n\n      if ($.inArray(\"Profiles\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"Profiles\",\n          categoryClassName: \"bz-icon-user-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-Profiles\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES });\n\n\n      }\n\n      if ($.inArray(\"AlarmAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AlarmAdmin\",\n          categoryClassName: \"bz-icon-alarm-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AlarmAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS });\n\n      }\n\n      if ($.inArray(\"Licenses\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"Licenses\",\n          categoryClassName: \"bz-icon-license-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-Licenses\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES });\n\n      }\n\n      if ($.inArray(\"GRDimensionAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"GRDimensionAdmin\",\n          categoryClassName: \"bz-icon-dimension-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-GRDimensionAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS });\n\n      }\n\n      if ($.inArray(\"DocumentTemplates\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"DocumentTemplates\",\n          categoryClassName: \"bz-icon-admin-template-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-DocumentTemplates\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES });\n\n      }\n\n      if ($.inArray(\"ProcessAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"ProcessAdmin\",\n          categoryClassName: \"bz-icon-case-time-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-ProcessAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES });\n\n      }\n\n      if ($.inArray(\"Holidays\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"Holidays\",\n          categoryName: self.getResource(\"workportal-menu-submenu-holidays\"), //\"Holidays Calendar\",\n          categoryClassName: \"bz-icon-holidays-outline\",\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS });\n\n      }\n\n      if ($.inArray(\"ProjectName\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"ProjectName\",\n          categoryName: self.getResource(\"workportal-menu-submenu-ProjectName\"),\n          categoryClassName: \"bz-icon-project-name-outline\",\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME });\n\n      }\n\n      if ($.inArray(\"OAuthApplications\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"OAuthApplications\",\n          categoryName: self.getResource(\"workportal-menu-submenu-OAuth2Applications\"),\n          categoryClassName: \"bz-icon-admin-template-outline\",\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS });\n\n      }\n\n      if ($.inArray(\"Multilanguage\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"LanguageAdmin\",\n          categoryClassName: \"bz-icon-world-outline\",\n          categoryName: self.getResource(\"workportal-menu-submenu-LanguageAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE });\n\n      }\n\n      if ($.inArray(\"AdhocProcessAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocProcessAdmin\",\n          categoryClassName: \"bz-icon-bz-light-box\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocProcessAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES });\n\n      }\n\n      if ($.inArray(\"AdhocEntityAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocEntityAdmin\",\n          categoryClassName: \"bz-icon-bz-edit-entity\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocEntityAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES });\n\n      }\n\n      if ($.inArray(\"AdhocCreateProcess\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocCreateProcess\",\n          categoryClassName: \"bz-icon bz-icon-reload\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocCreateProcess\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS });\n\n      }\n\n      if ($.inArray(\"AdhocUserGroupAdmin\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdhocUserGroupAdmin\",\n          categoryClassName: \"bz-icon-bz-user-jobs\",\n          categoryName: self.getResource(\"workportal-menu-submenu-AdhocUserGroupAdmin\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS });\n\n      }\n\n      if ($.inArray(\"UserDelegates\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"UsersDelegation\",\n          categoryClassName: \"bz-icon bz-icon-group\",\n          categoryName: self.getResource(\"workportal-menu-submenu-UserDelegation\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION });\n\n      }\n\n\n      if ($.inArray(\"ErrorLogs\", authorized) != -1) {\n        self.params.options.menuData.push({\n          categoryKey: \"ErrorLogs\",\n          categoryClassName: \"icon-error-logs\",\n          categoryName: self.getResource(\"workportal-menu-submenu-ErrorLogs\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ERROR_LOGS,\n          typeIcon: \"svg\" });\n\n      }\n\n      if ($.inArray(\"AdminSmartInbox\", authorized) != -1 && bizagi.util.isEnableFeature(\"enableSmartInbox\")) {\n        self.params.options.menuData.push({\n          categoryKey: \"AdminSmartInbox\",\n          categoryClassName: \"bz-icon bz-icon-group\",\n          categoryName: self.getResource(\"workportal-menu-submenu-adminsmartinbox\", \"Smart Inbox\"),\n          categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_SMARTINBOX });\n\n      }\n\n\n      //add the callback for each new widget\n      callBack.UserAdmin =\n      callBack.StakeholderAdmin =\n      callBack.AuthenticationLogQuery =\n      callBack.EncryptionAdmin =\n      callBack.UserPendingRequests =\n      callBack.UnlockFormsAdmin =\n      callBack.AsynchronousWorkitemRetries =\n      callBack.UserDefaultAssignation =\n      callBack.Profiles =\n      callBack.AlarmAdmin =\n      callBack.Licenses =\n      callBack.GRDimensionAdmin =\n      callBack.DocumentTemplates =\n      callBack.ProcessAdmin =\n      callBack.LanguageAdmin =\n      callBack.EntityAdmin =\n      callBack.AdhocProcessAdmin =\n      callBack.AdhocEntityAdmin =\n      callBack.AdhocUserGroupAdmin =\n      callBack.AdhocCreateProcess =\n      function (args) {\n        args = args || {};\n\n        $.extend(args, {\n          showCloseButton: false });\n\n\n        if (args.id === \"Licenses\" || args.id === \"AdhocProcessAdmin\") {\n          $.extend(args, {\n            maximize: false });\n\n        }\n\n        self.showCustomWidgetPopup(args);\n      };\n      callBack.CaseAdmin = function (args) {var _$$extend;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-CaseAdmin\"),\n          height: 780 }, _defineProperty(_$$extend, \"showCloseButton\",\n        false), _defineProperty(_$$extend, \"id\",\n        \"CaseAdmin\"), _$$extend));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n      callBack.UserPermissionReport = function (args) {\n        args = args || {};\n        args = $.extend(true, args, {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-UserPermissionReport\"),\n          height: 410,\n          width: \"650px\",\n          maximize: false,\n          id: \"UserPermissionReport\" });\n\n\n        self.showCustomWidgetPopup(args);\n      };\n      callBack.Holidays = function (args) {var _$$extend2;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend2 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-holidays\"),\n          width: \"1080px\",\n          height: 910 }, _defineProperty(_$$extend2, \"showCloseButton\",\n        false), _defineProperty(_$$extend2, \"id\",\n        \"Holidays\"), _$$extend2));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.OAuthApplications = function (args) {var _$$extend3;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend3 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-OAuth2Applications\"),\n          width: \"980px\",\n          height: 700 }, _defineProperty(_$$extend3, \"showCloseButton\",\n        false), _defineProperty(_$$extend3, \"id\",\n        \"OAuthApplications\"), _$$extend3));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.ProjectName = function (args) {var _$$extend4;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend4 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-ProjectName\"),\n          width: \"600px\",\n          height: 400 }, _defineProperty(_$$extend4, \"showCloseButton\",\n        false), _defineProperty(_$$extend4, \"id\",\n        \"ProjectName\"), _$$extend4));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n\n      callBack.UsersDelegation = function (args) {var _$$extend5;\n        args = args || {};\n        args = $.extend(true, args, (_$$extend5 = {\n          showCloseButton: false,\n          title: self.getResource(\"workportal-menu-submenu-UserDelegation\"),\n          width: \"740px\",\n          height: 910 }, _defineProperty(_$$extend5, \"showCloseButton\",\n        false), _defineProperty(_$$extend5, \"id\",\n        \"UsersDelegation\"), _$$extend5));\n\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.ErrorLogs = function (args) {\n        args = args || {};\n\n        var options = {};\n        options.showCloseButton = false;\n        options.title = self.getResource(\"workportal-menu-submenu-ErrorLogs\");\n        options.id = \"ErrorLogs\";\n        options.maximize = true;\n\n        if (window.innerWidth > 1200) {\n          options.width = 1000;\n        } else {\n          options.maximized = true;\n        }\n\n        args = $.extend(true, args, options);\n\n        self.showCustomWidgetPopup(args);\n      };\n\n      callBack.BusinessPolicies = function (args) {\n        self.showContentPopup(args.url, args.title, args.id, true);\n\n      };\n      callBack.Vocabularies = function (args) {\n        self.loadBusinessPolicesWidget();\n      };\n\n    } catch (e) {\n\n    } // Nothing todo, just skip this option in menu\n\n    //Get List with categories\n    data[\"listmenu\"] = self.getCathegoriesMenuList();\n\n    var render = $.tmpl(listTemplate, data);\n\n    listContainer.append(render);\n    self.showBreadCrumb(listContainer);\n    self.eventHandlerGoBackBreadCrumb(listContainer.parent().parent());\n\n    // Bind sub menu\n    if (!self.params.options.customClickHandler) {\n      $(\"li\", listContainer).click(function (event) {\n        //---- Click on the items of the list of parents of category groups\n        if ($(this).hasClass(\"ui-bizagi-workportal-widget-menu-parent-item-li\")) {\n          event.preventDefault();\n          event.stopPropagation();\n          self.eventHandlerCategoryGroupsParent($(this));\n\n        } else {//---- Click on the items of the list of childs of category groups\n\n          var url = $(this).find(\"#categoryUrl\").val();\n          var title = $(this).find(\".title\").text();\n          var id = $(this).data('id') || '';\n          self.eventHandlerCategoryGroupsChildrenWithoutCustomClick(url, title, id, callBack);\n\n        }\n\n        //-----\n      });\n\n    } else {\n\n      self.checkIsAlive();\n      $(\"li\", listContainer).click(function () {\n        //---- Click on the items of the list of parents of category groups\n        if ($(this).hasClass(\"ui-bizagi-workportal-widget-menu-parent-item-li\")) {\n          self.eventHandlerCategoryGroupsParent($(this));\n\n        } else {//---- Click on the items of the list of childs of category groups\n          var id = $(this).data(\"id\");\n          bizagi.loader.start(\"admin\").then(function () {\n            bizagi.workportal.desktop.popup.closePopupInstance();\n            self.params.options.customClickHandler(id);\n          });\n        }\n      });\n\n    }\n\n  },\n  /**\r\n      * show the child breadCrumb and show the display name of the parent\r\n      * @param {Jquery Element} Jparent \r\n      */\n  eventHandlerCategoryGroupsParent: function eventHandlerCategoryGroupsParent(Jparent) {\n    var categoryName = Jparent.data(\"id\");\n    var categoryDisplayName = Jparent.find(\".title\").text();\n    var container = Jparent.parent().parent();\n    $(\".ui-bizagi-workportal-widget-menu-child-item.child_of_\" + categoryName, container).show();\n    $(\".modalMenuBt .breadCrumb .breadCrumb_child\").css(\"display\", \"inline-block\").text(\"> \" + categoryDisplayName);\n    $(\".ui-bizagi-workportal-widget-menu-parent-item\").hide();\n  },\n\n  /**\r\n      * return the List with categories or not\r\n      */\n  getCathegoriesMenuList: function getCathegoriesMenuList() {\n    var self = this;\n    var menuList = self.params.options.menuData;\n    //menuListAdmin has cathegories\n    if ($(self.params.options.sourceElement).attr(\"id\") == \"menuListAdmin\") {\n      var categoriesGroupsChildrenList = self.getCategoriesGroupsChildren(self.params.options.menuData);\n      menuList = self.getMenuList(categoriesGroupsChildrenList);\n    }\n    return menuList;\n  },\n\n  /**\r\n      * if the menu has breadCrumb shows it\r\n      */\n  showBreadCrumb: function showBreadCrumb() {\n    var self = this;\n    if (self.isAdminMenu())\n    $(\"#categoryTree.categoryTree.breadCrumb\", self.content).show();\n  },\n\n  /**\r\n      * return true if the menu to show is admin\r\n      */\n  isAdminMenu: function isAdminMenu() {\n    var self = this;\n    return $(self.params.options.sourceElement).attr(\"id\") == \"menuListAdmin\";\n  },\n\n  eventHandlerGoBackBreadCrumb: function eventHandlerGoBackBreadCrumb(container) {\n    $(\".breadCrumb .breadCrumb_admin_parent\", container).click(function () {\n      $(\".ui-bizagi-workportal-widget-menu-child-item\", container).hide();\n      $(\".breadCrumb .breadCrumb_child\", container).hide();\n      $(\".ui-bizagi-workportal-widget-menu-parent-item\", container).show();\n    });\n  },\n  eventHandlerCategoryGroupsChildrenWithoutCustomClick: function eventHandlerCategoryGroupsChildrenWithoutCustomClick(url, title, id, callBack) {\n    var self = this;\n    self.checkIsAlive();\n\n    if (bizagi.util.isIE11() || bizagi.util.isEdge()) {\n      localStorage.setItem('auxBizagiAuthentication', window.sessionStorage.bizagiAuthentication);\n    }\n    //prevent message open popup on browser\n    var windowOpenBlank;\n    if (url.indexOf('ThemeBuilder') !== -1) {\n      windowOpenBlank = window.open(url, '_blank');\n      return;\n    }\n\n    if (url.toLowerCase().indexOf('adhoc') !== -1) {\n      self.loadDashboardQuickProcess(url);\n      return;\n    }\n    bizagi.util.startLoading();\n    bizagi.loader.start(\"admin\").then(function () {\n      // Find call back\n      if (callBack[id]) {\n        callBack[id]({\n          windowOpenBlank: windowOpenBlank,\n          url: url,\n          title: title,\n          id: id });\n\n      } else {\n        self.showContentPopup(url, title, id, true);\n      }\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    });\n  },\n\n  getCategoriesGroupsChildren: function getCategoriesGroupsChildren(menuList) {\n    var self = this;\n    var childrenList = [];\n    var groupCategoryChildren1 = [];\n    var groupCategoryChildren2 = [];\n    var groupCategoryChildren3 = [];\n    var groupCategoryChildren4 = [];\n    var groupCategoryChildren5 = [];\n    for (var i = 0; i < menuList.length; i++) {\n      if (menuList[i].categoryKey === \"AlarmAdmin\" ||\n      menuList[i].categoryKey === \"AsynchronousWorkitemRetries\" ||\n      menuList[i].categoryKey === \"CaseAdmin\" ||\n      menuList[i].categoryKey === \"GRDimensionAdmin\" ||\n      menuList[i].categoryKey === \"EntityAdmin\" ||\n      menuList[i].categoryKey === \"BusinessPolicies\" ||\n      menuList[i].categoryKey === \"Vocabularies\" ||\n      menuList[i].categoryKey === \"ProcessAdmin\") {\n        groupCategoryChildren1.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"AuthenticationLogQuery\" ||\n      menuList[i].categoryKey === \"Holidays\" ||\n      menuList[i].categoryKey === \"UserPendingRequests\" ||\n      menuList[i].categoryKey === \"Licenses\" ||\n      menuList[i].categoryKey === \"UserDefaultAssignation\" ||\n      menuList[i].categoryKey === \"Profiles\" ||\n      menuList[i].categoryKey === \"StakeholderAdmin\" ||\n      menuList[i].categoryKey === \"UserAdmin\") {\n        groupCategoryChildren2.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"LanguageAdmin\" ||\n      menuList[i].categoryKey === \"ProjectName\" ||\n      menuList[i].categoryKey === \"ThemeBuilder\" ||\n      menuList[i].categoryKey === \"AdminSmartInbox\") {\n        groupCategoryChildren3.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"OAuthApplications\" ||\n      menuList[i].categoryKey === \"EncryptionAdmin\" ||\n      menuList[i].categoryKey === \"UserPermissionReport\") {\n        groupCategoryChildren4.push(menuList[i]);\n      }\n\n      if (menuList[i].categoryKey === \"ErrorLogs\") {\n        groupCategoryChildren5.push(menuList[i]);\n      }\n    }\n\n    childrenList.push(self.sortChildList(groupCategoryChildren1));\n    childrenList.push(self.sortChildList(groupCategoryChildren2));\n    childrenList.push(self.sortChildList(groupCategoryChildren3));\n    childrenList.push(self.sortChildList(groupCategoryChildren4));\n    childrenList.push(self.sortChildList(groupCategoryChildren5));\n\n    return childrenList;\n  },\n  sortChildList: function sortChildList(list) {\n    var sortList = list.sort(function (a, b) {\n      return a.categoryName > b.categoryName ? 1 : -1;\n    });\n\n    return sortList;\n  },\n  sortParentList: function sortParentList(list) {\n    var sortList = list.sort(function (a, b) {\n      return a.displayName > b.displayName ? 1 : -1;\n    });\n\n    return sortList;\n  },\n  getMenuList: function getMenuList(childrenList) {\n    var self = this;\n    var menulist = [];\n\n    if (childrenList[0].length > 0) {\n      var groupCategory1 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-ProcessManagement\"),\n      \"groupCategory1\", false, \"icon-process-management\", true, childrenList[0]);\n      menulist.push(groupCategory1);\n    }\n\n    if (childrenList[1].length > 0) {\n      var groupCategory2 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-UserManagement\"),\n      \"groupCategory2\", false, \"icon-user-configuration\", true, childrenList[1]);\n      menulist.push(groupCategory2);\n    }\n\n    if (childrenList[2].length > 0) {\n      var groupCategory3 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-Customization\"),\n      \"groupCategory3\", false, \"icon-customization\", true, childrenList[2]);\n      menulist.push(groupCategory3);\n    }\n\n    if (childrenList[3].length > 0) {\n      var groupCategory4 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-Security\"),\n      \"groupCategory4\", false, \"icon-security\", true, childrenList[3]);\n      menulist.push(groupCategory4);\n    }\n\n    if (childrenList[4].length > 0) {\n      var groupCategory5 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-System\"),\n      \"groupCategory5\", false, \"icon-system\", true, childrenList[4]);\n      menulist.push(groupCategory5);\n    }\n    return self.sortParentList(menulist);\n  },\n\n  getItemMenuList: function getItemMenuList(displayName, name, typeIcon, className, categoryClassName, listmenu_children) {\n    var groupCategory = [];\n    groupCategory.displayName = displayName;\n    groupCategory.name = name;\n    groupCategory.typeIcon = typeIcon;\n    groupCategory.className = className;\n    groupCategory.categoryClassName = categoryClassName;\n    groupCategory.listmenu_children = listmenu_children;\n    return groupCategory;\n  },\n\n  loadDashboardQuickProcess: function loadDashboardQuickProcess(url) {\n    var self = this;\n    bizagi.workportal.desktop.popup.closePopupInstance();\n    if (url === \"adhocUserGroups\") {\n      if ($(document).find('iframe').length > 0 && $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1) {\n        bizagi.util.liveProcessesEvents.routeEvents.route = '/manage-groups';\n        document.dispatchEvent(bizagi.util.liveProcessesEvents.routeEvents);\n      } else {\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n          data: {\n            route: \"manage-groups\",\n            params: { module: \"none\" } } });\n\n\n      }\n    } else if (url === \"adhocProcesses\") {\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY });\n\n    } else if (url === \"adhocCreateProcess\") {\n      if ($(document).find('iframe').length > 0 && ($(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1 || $(document).find('iframe')[0].contentWindow.location.href.indexOf('quick-process') !== -1)) {\n        document.dispatchEvent(bizagi.util.liveProcessesEvents.newLiveProcess);\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      } else {\n        var widgetParameters = {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS,\n          closeVisible: false,\n          maximize: false,\n          modalParameters: {\n            height: 310,\n            title: bizagi.localization.getResource(\"workportal-quickprocess-create-qp\"),\n            width: 400 } };\n\n\n        self.publish(\"showDialogWidget\", widgetParameters);\n      }\n    }\n  },\n\n  /**\r\n      * Load Business Polices Widget\r\n      */\n  loadBusinessPolicesWidget: function loadBusinessPolicesWidget() {\n    var self = this;\n    self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES });\n\n  },\n  /*\r\n      *   Determines if a window must be show always in quirks mode for IE\r\n      */\n  needsQuicksMode: function needsQuicksMode(url) {\n\n    // If an old url is not working ok, put the url in the following filters\n    if (url.toLowerCase().indexOf(\"businesspoliciesselector.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"bamprocess.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"bamtask.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"analyticsprocess.aspx\") >= 0)\n    return true;\n    if (url.toLowerCase().indexOf(\"analyticssensor.aspx\") >= 0)\n    return true;\n\n    return false;\n  },\n  /*\r\n      *   Get the page hacks in order to work properly in each case\r\n      */\n  getPageHacks: function getPageHacks(url, title) {\n    var self = this;\n    var callback;\n    var hackParams = {\n      title: title };\n\n\n    //if (url.toLowerCase().indexOf(\"casesearch.aspx\") > 0 || url.toLowerCase().indexOf(\"AsynchDisabledWorkitems.aspx\") > 0) {\n    // Hack for  Admin / Processes\n    callback = function callback(params) {\n      // This script will execute inside the iframe context\n      this.openBACase = function (idCase, sHref) {\n        var workitem = null;\n        if (sHref.indexOf(\"idWorkitem=\") > -1) {\n          workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n          workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n        }\n        // Executes the act on\n        params.controller.publish(\"executeAction\", {\n          action: params.routingAction,\n          idCase: idCase,\n          idWorkItem: workitem });\n\n\n        // close dialog\n        params.controller.publish(\"closeCurrentDialog\");\n      };\n\n      this.changeToWidget = function (widget) {\n        params.controller.publish(\"changeWidget\", {\n          widgetName: widget || params.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID });\n\n\n        // close dialog\n        params.controller.publish(\"closeCurrentDialog\");\n      };\n    };\n\n    // Set hack params\n    hackParams = $.extend(hackParams, {\n      routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n      bizagi: bizagi });\n\n    // }\n\n    return {\n      callback: callback,\n      params: hackParams };\n\n  },\n  /*\r\n      *  Show modal window with static url\r\n      **/\n  showContentPopup: function showContentPopup(url, title, id, maximized) {\n    var self = this;\n    id = id || \"\";\n    var defer = $.Deferred();\n    defer.done(function () {\n      bizagi.util.stopLoading();\n    });\n    // Define hacks for each page\n    var hack = self.getPageHacks(url, title);\n\n    if (bizagi.util.isIE() && bizagi.util.getInternetExplorerVersion() < 10 && self.needsQuicksMode(url)) {\n      // Shows a popup window\n      self.publish(\"showOldWindow\", {\n        url: url,\n        windowParameters: $.extend(hack.params, {\n          controller: self,\n          afterLoad: hack.callback }) });\n\n\n      bizagi.util.stopLoading();\n    } else {\n      // Show a normal popup\n\n      // If the same popup is opened close it\n      if (self.currentPopup == \"genericiframe\") {\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        return;\n      }\n\n      // Shows a popup widget\n      self.currentPopup = \"genericiframe\";\n      self.publish(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n        widgetURL: url,\n        injectCss: [\".ui-bizagi-old-render*\", \".\" + title, \"@font-face\"],\n        modalParameters: {\n          refreshInbox: false,\n          id: id,\n          title: title,\n          dialogOpened: defer },\n\n        maximized: maximized,\n        afterLoad: hack.callback,\n        afterLoadParams: hack.params });\n\n    }\n  },\n\n  /**\r\n      * Open dialog\r\n      * \r\n      * @param {*} args {widget, title, id, width, height}\r\n      */\n  showWidgetPopup: function showWidgetPopup(args) {\n    var self = this;\n    args = args || {};\n    var defer = $.Deferred();\n    var settings = {\n      widget: args.widget,\n      title: args.title,\n      id: args.id,\n      width: args.width,\n      height: args.height };\n\n\n    defer.done(function () {\n      bizagi.util.stopLoading();\n    });\n    self.publish(\"showDialogWidget\", {\n      widgetName: settings.widget,\n      closeVisible: false,\n      modalParameters: {\n        title: settings.title,\n        width: settings.width,\n        height: settings.height,\n        showCloseButton: false,\n        dialogOpened: defer } });\n\n\n  },\n  showCustomWidgetPopup: function showCustomWidgetPopup(params) {\n    var self = this;\n    var defer = $.Deferred();\n    defer.done(function () {\n      bizagi.util.stopLoading();\n    });\n    var defaultWidth = $(window).width() - $(window).width() * 15 / 100 + \"px\";\n    var widgetParameters = {\n      widgetName: params.url,\n      data: { \"idCase\": params.id },\n      closeVisible: params.showCloseButton,\n      modalParameters: {\n        title: params.title,\n        width: params.width || defaultWidth,\n        height: params.height,\n        id: params.id,\n        dialogOpened: defer },\n\n      maximize: typeof params.maximize !== \"undefined\" ? params.maximize : true,\n      maximized: typeof params.maximized !== \"undefined\" ? params.maximized : false };\n\n\n    if (params.buttons) {\n      widgetParameters.buttons = params.buttons;\n    }\n\n    self.publish(\"showDialogWidget\", widgetParameters);\n  },\n  deleteMenuOption: function deleteMenuOption(categoryKey) {\n    var self = this;\n    var menuData = self.params.options.menuData;\n\n    for (var i = 0; i < menuData.length; i++) {\n      if (menuData[i].categoryKey == categoryKey) {\n        self.params.options.menuData.splice(i, 1);\n      }\n    }\n  },\n\n  /*\r\n      * Regresa un arreglo con los submenu autorizados\r\n      */\n  getSubItemsAuthorized: function getSubItemsAuthorized() {\n    var self = this;\n    var result = [];\n    $.each(self.params.options.menuData, function (k, v) {\n      result.push(v.categoryKey);\n    });\n    return result;\n  },\n\n  checkIsAlive: function checkIsAlive() {\n    var self = this,\n    params = {\n      idUser: bizagi.currentUser.idUser,\n      fromDate: Date.now(),\n      toDate: Date.now() };\n\n    self.dataService.ping(params);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Desktop Queries Dialog implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Juan Pablo Crossley\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   ???\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.workportal.widgets.genericiframe.extend(\"bizagi.workportal.widgets.genericiframe\", {}, {\n\n  /*\r\n                                                                                                *   To be overriden in each device to apply layouts\r\n                                                                                                */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var iframe = $(\"iframe\", content);\n    var injectCss = self.params.injectCss ? self.params.injectCss : [\".ui-bizagi-old-render*\", \"@font-face\"];\n\n    iframe.parent().addClass('loading-iframe');\n    iframe.hide();\n\n\n    iframe.load(function () {\n      iframe.parent().removeClass('loading-iframe');\n      iframe.fadeIn();\n    });\n\n    if (self.params.afterLoad && self.params.afterLoad != null) {\n      iframe.load(function () {\n        iframe.callInside(\n        self.params.afterLoad,\n        $.extend(self.params.afterLoadParams, {\n          controller: self }));\n\n\n      });\n    }\n\n    if (injectCss != undefined) {\n      var css = \"\";\n      var cssList = \"\";\n\n      if (_typeof(injectCss) == \"object\") {\n        $.each(injectCss, function (key, value) {\n          css += bizagi.getStyle(value);\n          cssList += value.replace(\".\", \"\") + \" \";\n        });\n      } else {\n        css += bizagi.getStyle(injectCss);\n        cssList += injectCss.replace(\".\", \"\");\n      }\n\n      // Inject css within iframe\n      iframe.load(function () {\n        // inject css\n        var iframeContent = $(this).contents();\n\n        // Append css\n        $('head', iframeContent).append(\"<style type='text/css'>\" + css + \"</style>\");\n        $('body', iframeContent).addClass(cssList.replace(\"*\", \"\"));\n\n        // Hack position fixed for IE8 in quirks mode\n        /*if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {\r\n            var fixWizard = '<!--[if lte IE 8]> <style type=\"text/css\"> #floater1Div { position: absolute; bottom: auto; right: auto; top: expression( ( -10 - floater1Div.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + \"px\" ); left: expression( ( -20 - floater1Div.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + \"px\" ); } #divClose { bottom: -3px; left: 0; } </style> <![endif]--><!--[if lte IE 7]> <link href=\"../../css/estilos.css\" type=\"text/css\" rel=\"stylesheet\" /> <![endif]-->';\r\n            $('head', iframeContent).append(fixWizard);\r\n        }*/\n\n        // Add classes for IE8 in quirks mode\n        $('body input', iframeContent).each(function () {\n          var $self = $(this),\n          inputType = $self.attr('type') ? 'ui-' + $self.attr('type') : '',\n          inputName = $self.attr('name') ? 'ui-' + $self.attr('name').replace(/_\\d+$/, '') : '',\n          inputClasses = inputType + ' ' + inputName;\n\n          $self.addClass(inputClasses);\n        });\n\n        // Remove borders for buttons\n        $('body img[src$=\"Button.gif\"]', iframeContent).parent().remove();\n      }).attr('frameborder', '0');\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Workportal Search Controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra (based on Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -\tThis script will provide base library for search cases\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Auto extend\nbizagi.workportal.widgets.search.extend(\"bizagi.workportal.widgets.search\", {}, {\n\n  /*\r\n                                                                                   *\t Constructor\r\n                                                                                   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Define variables\n    self.radNumber = params.referrerParams.radNumber || params.radNumber || \"\";\n    self.isAdhocProcess = true;\n    self.adhocIds = [];\n    //Load templates\n    self.loadTemplates({\n      \"inbox-grid-cases\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.grid\").concat(\"#ui-bizagi-workportal-widget-inbox-grid-cases\"),\n      \"inbox-common-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description\"),\n      \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\n      \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\n      \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\n      \"inbox-common-case-summary-oldrender\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-oldrender\"),\n      \"search-details\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.search\").concat(\"#ui-bizagi-workportal-widget-search-details\"),\n      useNewEngine: false });\n\n\n    self._startQuickActions();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    // Set templates\n    self.searchTemplate = self.workportalFacade.getTemplate(\"search\");\n    self.searchDetailsTemplate = self.getTemplate(\"search-details\");\n    self.searchPagination = self.workportalFacade.getTemplate(\"inbox-common-pagination-grid\");\n    self.caseSummaryTemplate = self.getTemplate(\"inbox-common-case-summary\");\n    self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\n    self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\n    self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\n    self.paginationTemplate = self.workportalFacade.getTemplate(\"inbox-common-pagination-inbox\");\n\n    self.renderSearch();\n  },\n\n  renderSearch: function renderSearch() {\n    var self = this;\n    var content = self.getContent();\n    var contentDetails = $(\"#searchDetails\", content);\n    var pdata = {};\n    var pageSelector = $(\"#casesPagination\", content);\n    var nElemToShow = 14;\n    var totalPages = self.params.data.cases.totalPages;\n    var actualPage = self.params.data.cases.page;\n    var AdhocProcessId = null;\n\n\n    $(self.params.data.cases.rows).each(function (key, value) {\n      if (!value.isAdhocProcess) value.isAdhocProcess = false;\n      if (value.isAdhocProcess) {\n        self.adhocIds.push({ 'caseId': value.id, 'processId': value.idAdhocProcess });\n      }\n      value.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(value.isAdhocProcess);\n    });\n    contentDetails.empty();\n\n    // Define title of module\n    self.params.data.title = self.params.data.title || bizagi.localization.getResource(\"workportal-widget-search\");\n\n    // Set title\n    $(\".title\", content).html(self.params.data.title);\n\n    // Convert null to empty \"\" fields\n    for (i = 0; i < self.params.data.cases.rows.length; i++) {\n      for (j = 0; j < self.params.data.cases.rows[i].fields.length; j++) {\n        self.params.data.cases.rows[i].fields[j] = self.params.data.cases.rows[i].fields[j] == null ? \"\" : self.params.data.cases.rows[i].fields[j];\n      }\n      // when user search a case\n      self.params.data.cases.rows[i].graphicQuery = bizagi.menuSecurity.GraphicQuery;\n      self.params.data.cases.rows[i].timeLine = bizagi.menuSecurity.TimeLine && bizagi.override.enableFeatureShowTimelineButton;\n    }\n\n    self.params.data.cases.groupByCaseNumber = bizagiConfig.groupByCaseNumber;\n    self.params.data.cases.haveQuickActions = self.params.data.cases.quickActions && self.params.data.cases.quickActions.length > 0;\n\n    $.when(\n    $.tmpl(self.searchDetailsTemplate, self.params.data.cases, {\n      setFormat: self.formatValue,\n      isArray: self.isArray,\n      formatCategories: self.formatCategories,\n      isDate: bizagi.util.isDate,\n      getRadNumberColumnIndex: function getRadNumberColumnIndex() {\n        var data = this.data;\n        var index = -1;\n        for (var i = 0, l = data.columnTitle.length; i < l; i++) {\n          if (data.columnTitle[i].fieldName == \"I_RadNumber\") {\n            index = i;\n          }\n        }\n        return index;\n      },\n      showColumn: function showColumn(columnIndex) {\n        var index = this.getRadNumberColumnIndex();\n        return this.data.groupByCaseNumber && index == columnIndex ? \" style=display:none; \" : \"\";\n      },\n      createGroupedHeader: function createGroupedHeader(rowIndex) {\n        var data = this.data;\n        var result = false;\n        var radNumber = this.getRadNumber(data.rows[rowIndex]);\n        if (data.groupByCaseNumber) {\n          if (rowIndex == 0) {\n            result = true;\n          } else {\n            var previousRadNumber = this.getRadNumber(data.rows[rowIndex - 1]);\n            if (radNumber != previousRadNumber) {\n              result = true;\n            }\n          }\n        }\n        return result;\n      },\n      getRadNumber: function getRadNumber(row) {\n        var index = this.getRadNumberColumnIndex();\n        return index >= 0 ? row.fields[index] : \"\";\n      } }).\n    appendTo(contentDetails)).done(function () {\n\n      var _dataCases = self.params.data.cases;\n      if (_dataCases.haveQuickActions) {\n        var workItemsInfo = self._getWorkItemsInfo(_dataCases.columnTitle, _dataCases.rows);\n        self._QuickActionsRenderIn(contentDetails, workItemsInfo, _dataCases.quickActions);\n      }\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n      // bind activities and process\n      $(\".ui-bizagi-wp-app-inbox-activity-name\", contentDetails).click(function () {\n        var idCase = $(this).find(\"#idCase\").val() || \"\";\n        var idWorkItem = $(this).find(\"#idWorkItem\").val() || \"\";\n        var idTask = $(this).find(\"#idTask\").val() || \"\";\n        var idWorkflow = $(this).closest('tr').data(\"idworkflow\");\n\n        if (idWorkItem === \"0\" || idTask === \"0\") {\n          return;\n        }\n\n        // fix for SUITE-8792\n        if (idWorkItem != \"\" && idTask != \"\") {\n          if (bizagi.cache === undefined) {\n            bizagi.cache = {};\n          } else {\n            if (bizagi.cache[idCase] !== undefined) {\n              if (bizagi.cache[idCase].idWorkitem == parseInt(idWorkItem) && bizagi.cache[idCase].idTask == parseInt(idTask) && bizagi.cache[idCase].isComplex !== undefined) {\n                idWorkItem = \"\";\n              }\n            }\n          }\n        }\n\n        // Executes routing action\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase,\n          idWorkItem: idWorkItem,\n          idTask: idTask,\n          idWorkflow: idWorkflow,\n          eventAsTasks: true,\n          onlyUserWorkItems: \"true\" });\n\n      });\n\n\n      $(\".ui-bizagi-wp-app-inbox-grouped\", contentDetails).bind(\"click\", function () {\n        var radNumber = $(this).data(\"radnumber\");\n        var referrerParams = {\n          taskState: self.params.taskState,\n          idWorkItem: $(this).find(\"#idWorkItem\").val(),\n          idCase: $(this).find(\"#idCase\").val(),\n          idTask: $(this).find(\"#idTask\").val(),\n          onlyFavorites: self.onlyFavorites,\n          idWorkflow: self.idWorkflow,\n          referrer: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID };\n\n\n        $.extend(bizagi.referrerParams, bizagi.referrerParams, referrerParams);\n\n        var idCase = $(this).find(\"#idCase\").val();\n\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      });\n\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", contentDetails).click(function (event) {\n        var idCase = $(this).parent().find(\"#idCase\").val();\n        var caseNumber = $.trim($(this).closest(\"tr\").find(\".I_RadNumber\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Add click to view workflow\n      $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", contentDetails).click(function () {\n        var idCase = $(this).parent().find(\"#idCase\").val();\n        var idWorkflow = $(this).closest(\"tr\").data(\"idworkflow\");\n        var isAdhoc = $(this).closest(\"tr\").data(\"isadhoc\");\n        if (isAdhoc) {\n          for (var i = 0; i < self.adhocIds.length; i++) {\n            if (parseInt(idCase) == self.adhocIds[i].caseId) {\n              processId = self.adhocIds[i].processId;\n              self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: processId });\n              break;\n            }\n          }\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n        return false;\n      });\n      $(\".inbox-grid-tooltip-button\", content).tooltip();\n      // show case summary\n      $(\".workonitRow\", content).click(function () {\n        // Call routing action\n        var idCase = $(this).parents(\"td\").first().find(\"#idCase\").val();\n        var idWorkflow = $(this).closest(\"tr\").data(\"idworkflow\");\n        $(\".inbox-grid-tooltip-button\", content).tooltip(\"close\");\n        self.showCase(idCase, idWorkflow);\n      });\n      /* End lines by CAAA */\n\n      // Bind favorites start\n      $(contentDetails).delegate(\".ui-bizagi-wp-app-inbox-cases-start\", \"click\", function (e) {\n        e.stopPropagation();\n        var options = {};\n        var elmnt = this;\n        $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start\").addClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\");\n\n        // check if its favorite\n        if ($(elmnt).parent().find(\"#isFavorite\").val() == \"false\") {\n          options = {\n            idObject: $(elmnt).parent().find(\"#idCase\").val(),\n            favoriteType: \"CASES\" };\n\n          $.when(\n          self.dataService.addFavorite(options)).\n          done(function (data) {\n            $(elmnt).parent().find(\"#guidFavorite\").val(data[\"idFavorites\"]);\n            $(elmnt).removeClass(\"bz-icon-star-outline\").addClass(\"bz-icon-star\");\n            $(elmnt).parent().find(\"#isFavorite\").val(\"true\");\n            $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\").addClass(\"ui-bizagi-wp-app-inbox-cases-start\");\n          });\n        } else {\n          options = {\n            idObject: $(elmnt).parent().find(\"#guidFavorite\").val(),\n            favoriteType: \"CASES\" };\n\n          $.when(\n          self.dataService.delFavorite(options)).\n          done(function (data) {\n            if (data[\"deleted\"] == \"true\" || data[\"deleted\"] == true) {\n              $(elmnt).parent().find(\"#guidFavorite\").val(\"\");\n              $(elmnt).removeClass(\"bz-icon-star\").addClass(\"bz-icon-star-outline\");\n              $(elmnt).parent().find(\"#isFavorite\").val(\"false\");\n              $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\").addClass(\"ui-bizagi-wp-app-inbox-cases-start\");\n            }\n          });\n        }\n      });\n\n      // Bind action to ungroup cases from folders\n      $('.folders-case-ungroup', contentDetails).click(function () {\n\n        // Used to remove the row later on\n        var itemSelector = this;\n\n        var options = {\n          idFolder: $(this).data('folder-id'),\n          idCase: $(this).data('case-id') };\n\n\n        var confirmationMsg = bizagi.localization.getResource('workportal-search-desasociate-case');\n\n        $.when(bizagi.showConfirmationBox(confirmationMsg, null, false)).\n        done(function () {\n          // This is supposed to be the \"trutsy\" part of the confirmation however the concept is\n          // not properly used, anyways is done like this because Diego likes deferreds\n          // for a lot of things - Andres Valencia\n\n          // Call service to ungroup case from folders\n          $.when(\n          self.dataService.dissasociateCaseFromFolder(options)).\n          done(function (data) {\n\n            // Whilst this is not the most elegant solution to remove the desasociated case from the current folder\n            // it can act as a temporary \"hack\" to avoid the search widget to refresh and lose context as it is happening so far\n\n            $(itemSelector).closest('tr').remove();\n\n            // Confirm that case has been removed from folder\n          });\n        }).\n        fail(function () {\n          // And this is supposed to be the \"falsy\" part of the confirmation dialog\n          // also a misused true/false concept - Andres Valencia\n        });\n      });\n\n      $(\".ui-bizagi-wp-app-inbox-bt-back\", content).click(function () {\n        var widget = bizagi.referrerParams.referrerBackButton || bizagi.cookie('bizagiDefaultWidget');\n        // switch referer widget \n        switch (widget) {\n          case \"inbox\":\n            self.publish(\"changeWidget\", {\n              widgetName: widget,\n              restoreStatus: true });\n\n            break;\n          case \"inboxGrid\":\n\n            self.publish(\"changeWidget\", {\n              widgetName: widget,\n              restoreStatus: true });\n\n            break;\n          case \"search\":\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n              radNumber: bizagi.referrerParams.radNumber || \"\",\n              page: bizagi.referrerParams.page || 1,\n              onlyUserWorkItems: false });\n\n            break;\n          case \"queryform\":\n            self.publish(\"showDialogWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n              queryFormAction: \"loadPrevious\" });\n\n            break;\n          case \"folders\":\n            var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n            $.when(self.dataService.getCasesByFolder(url)).\n            done(function (data) {\n              data.customized = true;\n              data.urlParameters = bizagi.referrerParams.urlParameters;\n\n              // Define title of widget\n              data.title = bizagi.referrerParams.name;\n\n              // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n              data.casesGroupedByFolder = true;\n              data.idFolder = bizagi.referrerParams.id;\n\n              self.publish(\"changeWidget\", {\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n                data: data,\n                referrerParams: {} });\n\n            });\n            break;\n          case \"activityform\":\n            self.publish(\"executeAction\", {\n              action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n              idCase: bizagi.referrerParams.idCase || undefined,\n              idWorkItem: bizagi.referrerParams.idWorkItem || undefined,\n              idTask: bizagi.referrerParams.idTask || undefined,\n              eventAsTasks: true,\n              onlyUserWorkItems: \"true\" });\n\n            break;\n          default:\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n              restoreStatus: true });\n\n            break;}\n\n      });\n\n      // sort columns\n      $(\".sortColumnsData\", contentDetails).click(function () {\n        var params = {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n          radNumber: $(this).find(\"#radNumber\").val(),\n          orderFieldName: $(this).find(\"#orderFieldName\").val(),\n          orderType: $(this).find(\"#orderType\").val() == 0 ? 1 : 0,\n          order: $(this).find(\"#order\").val(),\n          onlyUserWorkItems: false };\n\n        self.publish(\"executeAction\", params);\n      });\n\n      // Define Pagination\n\n\n      // Show/hide pagination\n      pdata.pagination = totalPages > 1 ? true : false;\n      pdata.page = self.params.referrerParams.page || actualPage;\n\n      // set total pages\n      pdata.pages = {};\n      var pageToshow = nElemToShow > totalPages ? totalPages : nElemToShow;\n      for (var i = 1; i <= pageToshow; i++) {\n        pdata.pages[i] = {\n          \"pageNumber\": i };\n\n      }\n\n      // Set style pagination\n      pdata[\"gridPagination\"] = \"gridCasePagination\";\n      pdata.previousPage = actualPage > 1 ? actualPage - 1 : 1;\n      pdata.nextPage = actualPage < totalPages ? actualPage + 1 : totalPages;\n      pdata.totalPages = totalPages;\n\n      var paginationHtml = $.tmpl(self.searchPagination, pdata).html();\n\n      // Get template\n      $(pageSelector).append(paginationHtml);\n\n      // Crate pagination control\n      $(\"ul\").bizagiPagination({\n        maxElemShow: 50,\n        totalPages: pdata.totalPages,\n        actualPage: pdata.page,\n        listElement: $(\"ul\", pageSelector),\n        clickCallBack: self.changeProcess.bind(self) });\n\n\n      contentDetails.bizagiScrollbar({\n        autohide: false });\n\n    });\n  },\n\n  /**\r\n      * Update the data showed in search\r\n      * @param {*} options \r\n      */\n  changeProcess: function changeProcess(options) {\n    var self = this;\n    var page = options && options.page ? options.page : 1;\n    // Check if action from search or folders\n    if (self.params.data.customized != undefined && self.params.data.customized) {\n      var url = self.params.data.urlParameters + \"&page=\" + page;\n      $.when(self.dataService.getCustomizedColumnsData({\n        smartfoldersParameters: url })).\n\n      done(function (data) {\n        // Define widget customized for pagination purposes\n        data.customized = true;\n        data.urlParameters = self.params.data.urlParameters;\n\n        // Define title of widget\n        data.title = self.params.data.title;\n\n        bizagi.referrerParams.page = page;\n\n        // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n        data.casesGroupedByFolder = true;\n        data.idFolder = self.params.data.id;\n        self.publish(\"changeWidget\", {\n          widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n          data: data,\n          referrerParams: {} });\n\n      });\n    } else {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n        radNumber: self.params.referrerParams.radNumber,\n        page: page,\n        onlyUserWorkItems: false });\n\n    }\n  },\n\n  /**\r\n       * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n       */\n  isAvailableTimelineByProcessType: function isAvailableTimelineByProcessType(isAdhocProcess) {\n    return !isAdhocProcess ||\n    isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\");\n  },\n\n  /*\r\n      *   Shows a popup with the case information\r\n      */\n  showCase: function showCase(idCase, idWorkflow) {\n    var self = this;\n    var content = self.getContent();\n    var caseSummaryContainer = $(\"#contentDesc\", content);\n    var cache = {};\n    var htmlContent = \"\";\n    // Update internal variable\n    self.idCase = idCase;\n    caseSummaryContainer.empty();\n    // Don't search data when there is no case\n    if (self.idCase == 0) {\n      return;\n    }\n    // Render Form Tab\n    $.when(\n    self.dataService.summaryCaseDetails({\n      idCase: self.idCase })).\n\n    done(function (data) {\n      data.hasComments = data.hasComments == 'true' ? true : false;\n\n      // Get security\n      var security = new bizagi.workportal.command.security(self.dataService);\n      data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\n\n      data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\n      data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\n\n      if (data.currentState && data.currentState.length > 0) {\n        data.currentState.forEach(function (currentState) {\n          if (!currentState.idTask) {\n            currentState.idTask = 0;\n          }\n          if (!currentState.state) {\n            currentState.state = currentState.displayName || \" \";\n          }\n        });\n      }\n\n      if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\n        data.process = false;\n      }\n\n      if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\n        data.processPath = false;\n      }\n\n      var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\n      self.callTaskDescription(data, renderedTemplate);\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n      // Delegate events for parent process\n      $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n        caseSummaryDialog.dialog('close');\n      });\n      var caseSummaryDialog = renderedTemplate;\n      // Fix for tab height\n      $('.scrollSummary', caseSummaryDialog).css({ 'height': '', 'overflow-y': 'visible' });\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        \"activate\": function activate(event, ui) {\n\n          var panel = ui == undefined ? \"formSummary\" : ui.newPanel.attr('id');\n          switch (panel) {\n            /* 0 = details\r\n                           * 1 = formSummary\r\n                           * 2 = subprocess\r\n                           * 3 = assigness\r\n                           * 4 = events\r\n                           * 5 = activities\r\n                           **/\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\");\n                data.readOnly = true;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"formSummary\":\n              if (cache[\"formSummary\"] == undefined) {\n                var canvas = $(\"#formSummary\", caseSummaryContainer);\n\n                // Define action when render form has not been migrated\n                canvas.bind(\"oldrenderintegration\", function (e) {\n                  if (e.isPropagationStopped()) {\n                    return;\n                  }\n                  e.stopPropagation();\n\n                  var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\n                  var data = {};\n\n                  bizagi.oldrenderevent = true; // has been loaded\n                  var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                  var eventer = window[eventMethod];\n                  var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n                  // Listen to message from child window\n                  eventer(messageEvent, function (e) {\n                    e.stopPropagation();\n                    self.publish(\"executeAction\", {\n                      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                      idCase: e.data });\n\n                  }, false);\n\n                  // Define workitem and idtask\n                  $.when(self.dataService.getWorkitems({\n                    idCase: self.idCase,\n                    onlyUserWorkItems: true,\n                    eventAsTasks: true })).\n                  done(function (getWorkitems) {\n                    // verify workitem, in some cases these variables are not available\n                    if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n                      // Case Open\n                      var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n                      var idTask = getWorkitems.workItems[0]['idTask'];\n                      var idCase = getWorkitems.workItems[0]['idCase'];\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n                    } else {\n                      // Case closed\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n                    }\n\n                    // Render content\n                    canvas.empty();\n                    $.tmpl(template, data).appendTo(canvas);\n                    //Set styles\n                    self.iframeOldRender($(\"iframe\", canvas));\n                  });\n                });\n\n                var params = {\n                  idCase: self.idCase };\n\n\n                $.when(self.dataService.getCaseFormsRenderVersion(params)).\n                done(function (formsVersion) {\n                  if (formsVersion.formsRenderVersion == 1) {\n                    canvas.trigger(\"oldrenderintegration\");\n                  } else {\n                    $.when(\n                    self.renderSummaryForm($(\"#formSummary\", renderedTemplate))).\n                    done(function () {\n                      htmlContent = $(\"#formSummary\", renderedTemplate).html();\n                      cache[\"formSummary\"] = htmlContent;\n                    });\n                  }\n                });\n              }\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.idCase })).\n\n                done(function (subprocess) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\n                  cache[\"subprocess\"] = htmlContent;\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;\n            case \"assignees\":\n\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.idCase,\n                  preview: true })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  // Generates  lists of unique assignees for activities\n                  var activitiesUniqueList = [];\n                  $.each(assignees.activities.split(\", \"), function (i, el) {\n                    if ($.inArray(el, activitiesUniqueList) === -1) activitiesUniqueList.push(el);\n                  });\n                  assignees.activities = activitiesUniqueList.join(\", \");\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", renderedTemplate));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", renderedTemplate));\n                  cache[\"events\"] = htmlContent;\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n\n      $(\".workonitRow\", renderedTemplate).button();\n      $(\".inbox-grid-tooltip-button\", content).tooltip();\n      // Add click to view workflow\n      $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n        if (self.adhocIds.length > 0) {\n          for (var i = 0; i < self.adhocIds.length; i++) {\n            if (idCase == self.adhocIds[i].caseId) {\n              self.showGraphicQuery({\n                idCase: idCase,\n                idWorkflow: idWorkflow,\n                isAdhoc: true,\n                idProcess: self.adhocIds[i].processId });\n\n            } else {\n              self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n            }\n          }\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n\n      });\n      // Bind events for events and process on summary case\n      $(\".workonitRow\", renderedTemplate).click(function () {\n        var currentWorkitemId = $(this).parent().find(\"#idWorkItem\").val();\n\n        var referrerParams = {\n          taskState: self.params.taskState,\n          idWorkItem: currentWorkitemId,\n          idCase: data.idCase,\n          onlyFavorites: self.onlyFavorites,\n          idWorkflow: self.idWorkflow,\n          referrer: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID };\n\n        $.extend(bizagi.referrerParams, bizagi.referrerParams, referrerParams);\n        // Executes routing action\n        caseSummaryDialog.dialog('close');\n\n        var workitem = $.grep(data.currentState, function (item, i) {\n          return item.idWorkItem == currentWorkitemId;\n        })[0];\n\n        var workitemCaseId;\n        if (workitem && workitem.idCase)\n        workitemCaseId = workitem.idCase; //Only to access a Subprocess from parent.\n        else\n          workitemCaseId = data.idCase;\n\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: workitemCaseId,\n          idWorkflow: idWorkflow,\n          idWorkItem: currentWorkitemId });\n\n      });\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", renderedTemplate).click(function (event) {\n        var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Set buttons\n      var buttons = {};\n      buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function () {\n        caseSummaryContainer.empty();\n        renderedTemplate.remove();\n        $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n      };\n      // Show dialog\n      caseSummaryDialog.dialog({\n        modal: true,\n        title: data.process,\n        width: 1000,\n        height: 600,\n        draggable: true,\n        resizable: true,\n        buttons: buttons,\n        close: function close() {\n          caseSummaryContainer.empty();\n          renderedTemplate.remove();\n          $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n        } });\n\n      //$(\"\").add(\"workonitRow\")\n    });\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription(data, summary) {\n    var self = this;\n    var width = 720;\n    var taskDescriptionParams = {\n      classNeedsModal: \"task_description_needs_modal\",\n      width: width };\n\n    new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams).renderManyTasksDescription(data.currentState, summary);\n  },\n\n  /*\r\n      *   Misc method to format cell values\r\n      */\n  formatRequest: function formatRequest(value) {\n    return value;\n  },\n  /**\r\n      * Misc method to render categories\r\n      */\n  formatCategories: function formatCategories(value) {\n    return value;\n  },\n  isArray: function isArray(value) {\n    if (_typeof(value) == 'object') {\n      return true;\n    } else {\n      return false;\n    }\n  },\n  /*\r\n      *   Renders the summary form inside a given container\r\n      */\n  renderSummaryForm: function renderSummaryForm(container) {\n    var self = this;\n\n    var proxyPrefix = _typeof(self.dataService.serviceLocator.proxyPrefix) != undefined ? self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      // Load render page\n      var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n      // Executes rendering into render container\n      rendering.execute({\n        canvas: container,\n        summaryForm: true,\n        idCase: self.idCase });\n\n\n      // Keep reference to rendering facade\n      self.renderingFacade = rendering;\n\n      // Resize layout\n      setTimeout(function () {\n        self.resizeLayout();\n      }, 1000);\n    });\n  },\n  /**\r\n      * Inject styles and js into the iframe\r\n      */\n  iframeOldRender: function iframeOldRender(canvas) {\n    var self = this;\n    var iframe;\n    var content = self.getContent();\n    var theme = \"bizagiDefault\";\n    var queryString = bizagi.readQueryString();\n\n    $.each(canvas, function () {\n      if ($(this).is(\"iframe\")) {\n        iframe = $(this);\n      }\n    });\n\n    iframe.load(function () {\n      // inject css\n      var content = $(this).contents();\n\n      // Fixed problem with relative path across the different browsers\n      var cssLocation = $.browser.mozilla || $.browser.webkit ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\n\n      // Define theme\n      cssLocation = cssLocation.replace(\"%theme%\", queryString[\"theme\"] || theme);\n\n      // Append css\n      $('body', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\n\n      // Append javascript\n      //\t$('head',content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\t\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                * jsGrid v1.5.1 (http://js-grid.com)\r\n                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016 Artem Tabalin\r\n                                                                                                                                                                                                                                                                                                                                                                                * Licensed under MIT (https://github.com/tabalinas/jsgrid/blob/master/LICENSE)\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n(function (window, $, undefined) {\n\n  var JSGRID = \"JSGrid\",\n  JSGRID_DATA_KEY = JSGRID,\n  JSGRID_ROW_DATA_KEY = \"JSGridItem\",\n  JSGRID_EDIT_ROW_DATA_KEY = \"JSGridEditRow\",\n\n  SORT_ORDER_ASC = \"asc\",\n  SORT_ORDER_DESC = \"desc\",\n\n  FIRST_PAGE_PLACEHOLDER = \"{first}\",\n  PAGES_PLACEHOLDER = \"{pages}\",\n  PREV_PAGE_PLACEHOLDER = \"{prev}\",\n  NEXT_PAGE_PLACEHOLDER = \"{next}\",\n  LAST_PAGE_PLACEHOLDER = \"{last}\",\n  PAGE_INDEX_PLACEHOLDER = \"{pageIndex}\",\n  PAGE_COUNT_PLACEHOLDER = \"{pageCount}\",\n  ITEM_COUNT_PLACEHOLDER = \"{itemCount}\",\n\n  EMPTY_HREF = \"javascript:void(0);\";\n\n  var getOrApply = function getOrApply(value, context) {\n    if ($.isFunction(value)) {\n      return value.apply(context, $.makeArray(arguments).slice(2));\n    }\n    return value;\n  };\n\n  var normalizePromise = function normalizePromise(promise) {\n    var d = $.Deferred();\n\n    if (promise && promise.then) {\n      promise.then(function () {\n        d.resolve.apply(d, arguments);\n      }, function () {\n        d.reject.apply(d, arguments);\n      });\n    } else {\n      d.resolve(promise);\n    }\n\n    return d.promise();\n  };\n\n  var defaultController = {\n    loadData: $.noop,\n    insertItem: $.noop,\n    updateItem: $.noop,\n    deleteItem: $.noop };\n\n\n\n  function Grid(element, config) {\n    var $element = $(element);\n\n    $element.data(JSGRID_DATA_KEY, this);\n\n    this._container = $element;\n\n    this.data = [];\n    this.fields = [];\n\n    this._editingRow = null;\n    this._sortField = null;\n    this._sortOrder = SORT_ORDER_ASC;\n    this._firstDisplayingPage = 1;\n\n    this._init(config);\n    this.render();\n  }\n\n  Grid.prototype = {\n    width: \"auto\",\n    height: \"auto\",\n    updateOnResize: true,\n\n    rowClass: $.noop,\n    rowRenderer: null,\n\n    rowClick: function rowClick(args) {\n      if (this.editing) {\n        this.editItem($(args.event.target).closest(\"tr\"));\n      }\n    },\n    rowDoubleClick: $.noop,\n\n    noDataContent: \"Not found\",\n    noDataRowClass: \"jsgrid-nodata-row\",\n\n    heading: true,\n    headerRowRenderer: null,\n    headerRowClass: \"jsgrid-header-row\",\n    headerCellClass: \"jsgrid-header-cell\",\n\n    filtering: false,\n    filterRowRenderer: null,\n    filterRowClass: \"jsgrid-filter-row\",\n\n    inserting: false,\n    insertRowRenderer: null,\n    insertRowClass: \"jsgrid-insert-row\",\n\n    editing: false,\n    editRowRenderer: null,\n    editRowClass: \"jsgrid-edit-row\",\n\n    confirmDeleting: true,\n    deleteConfirm: \"Are you sure?\",\n\n    selecting: true,\n    selectedRowClass: \"jsgrid-selected-row\",\n    oddRowClass: \"jsgrid-row\",\n    evenRowClass: \"jsgrid-alt-row\",\n    cellClass: \"jsgrid-cell\",\n\n    sorting: false,\n    sortableClass: \"jsgrid-header-sortable\",\n    sortAscClass: \"jsgrid-header-sort jsgrid-header-sort-asc\",\n    sortDescClass: \"jsgrid-header-sort jsgrid-header-sort-desc\",\n\n    paging: false,\n    pagerContainer: null,\n    pageIndex: 1,\n    pageSize: 20,\n    pageButtonCount: 15,\n    pagerFormat: \"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}\",\n    pagePrevText: \"Prev\",\n    pageNextText: \"Next\",\n    pageFirstText: \"First\",\n    pageLastText: \"Last\",\n    pageNavigatorNextText: \"...\",\n    pageNavigatorPrevText: \"...\",\n    pagerContainerClass: \"jsgrid-pager-container\",\n    pagerClass: \"jsgrid-pager\",\n    pagerNavButtonClass: \"jsgrid-pager-nav-button\",\n    pagerNavButtonInactiveClass: \"jsgrid-pager-nav-inactive-button\",\n    pageClass: \"jsgrid-pager-page\",\n    currentPageClass: \"jsgrid-pager-current-page\",\n\n    customLoading: false,\n    pageLoading: false,\n\n    autoload: false,\n    controller: defaultController,\n\n    loadIndication: true,\n    loadIndicationDelay: 500,\n    loadMessage: \"Please, wait...\",\n    loadShading: true,\n\n    invalidMessage: \"Invalid data entered!\",\n\n    invalidNotify: function invalidNotify(args) {\n      var messages = $.map(args.errors, function (error) {\n        return error.message || null;\n      });\n\n      window.alert([this.invalidMessage].concat(messages).join(\"\\n\"));\n    },\n\n    onInit: $.noop,\n    onRefreshing: $.noop,\n    onRefreshed: $.noop,\n    onPageChanged: $.noop,\n    onItemDeleting: $.noop,\n    onItemDeleted: $.noop,\n    onItemInserting: $.noop,\n    onItemInserted: $.noop,\n    onItemEditing: $.noop,\n    onItemUpdating: $.noop,\n    onItemUpdated: $.noop,\n    onItemInvalid: $.noop,\n    onDataLoading: $.noop,\n    onDataLoaded: $.noop,\n    onOptionChanging: $.noop,\n    onOptionChanged: $.noop,\n    onError: $.noop,\n\n    invalidClass: \"jsgrid-invalid\",\n\n    containerClass: \"jsgrid\",\n    tableClass: \"jsgrid-table\",\n    gridHeaderClass: \"jsgrid-grid-header\",\n    gridBodyClass: \"jsgrid-grid-body\",\n\n    _init: function _init(config) {\n      $.extend(this, config);\n      this._initLoadStrategy();\n      this._initController();\n      this._initFields();\n      this._attachWindowLoadResize();\n      this._attachWindowResizeCallback();\n      this._callEventHandler(this.onInit);\n    },\n\n    loadStrategy: function loadStrategy() {\n      return this.pageLoading ?\n      new jsGrid.loadStrategies.PageLoadingStrategy(this) :\n      new jsGrid.loadStrategies.DirectLoadingStrategy(this);\n    },\n\n    _initLoadStrategy: function _initLoadStrategy() {\n      this._loadStrategy = getOrApply(this.loadStrategy, this);\n    },\n\n    _initController: function _initController() {\n      this._controller = $.extend({}, defaultController, getOrApply(this.controller, this));\n    },\n\n    renderTemplate: function renderTemplate(source, context, config) {\n      args = [];\n      for (var key in config) {\n        args.push(config[key]);\n      }\n\n      args.unshift(source, context);\n\n      source = getOrApply.apply(null, args);\n      return source === undefined || source === null ? \"\" : source;\n    },\n\n    loadIndicator: function loadIndicator(config) {\n      return new jsGrid.LoadIndicator(config);\n    },\n\n    validation: function validation(config) {\n      return jsGrid.Validation && new jsGrid.Validation(config);\n    },\n\n    _initFields: function _initFields() {\n      var self = this;\n      self.fields = $.map(self.fields, function (field) {\n        if ($.isPlainObject(field)) {\n          var fieldConstructor = field.type && jsGrid.fields[field.type] || jsGrid.Field;\n          field = new fieldConstructor(field);\n        }\n        field._grid = self;\n        return field;\n      });\n    },\n\n    _attachWindowLoadResize: function _attachWindowLoadResize() {\n      $(window).on(\"load\", $.proxy(this._refreshSize, this));\n    },\n\n    _attachWindowResizeCallback: function _attachWindowResizeCallback() {\n      if (this.updateOnResize) {\n        $(window).on(\"resize\", $.proxy(this._refreshSize, this));\n      }\n    },\n\n    _detachWindowResizeCallback: function _detachWindowResizeCallback() {\n      $(window).off(\"resize\", this._refreshSize);\n    },\n\n    option: function option(key, value) {\n      var optionChangingEventArgs,\n      optionChangedEventArgs;\n\n      if (arguments.length === 1)\n      return this[key];\n\n      optionChangingEventArgs = {\n        option: key,\n        oldValue: this[key],\n        newValue: value };\n\n      this._callEventHandler(this.onOptionChanging, optionChangingEventArgs);\n\n      this._handleOptionChange(optionChangingEventArgs.option, optionChangingEventArgs.newValue);\n\n      optionChangedEventArgs = {\n        option: optionChangingEventArgs.option,\n        value: optionChangingEventArgs.newValue };\n\n      this._callEventHandler(this.onOptionChanged, optionChangedEventArgs);\n    },\n\n    fieldOption: function fieldOption(field, key, value) {\n      field = this._normalizeField(field);\n\n      if (arguments.length === 2)\n      return field[key];\n\n      field[key] = value;\n      this._renderGrid();\n    },\n\n    _handleOptionChange: function _handleOptionChange(name, value) {\n      this[name] = value;\n\n      switch (name) {\n        case \"width\":\n        case \"height\":\n          this._refreshSize();\n          break;\n        case \"rowClass\":\n        case \"rowRenderer\":\n        case \"rowClick\":\n        case \"rowDoubleClick\":\n        case \"noDataRowClass\":\n        case \"noDataContent\":\n        case \"selecting\":\n        case \"selectedRowClass\":\n        case \"oddRowClass\":\n        case \"evenRowClass\":\n          this._refreshContent();\n          break;\n        case \"pageButtonCount\":\n        case \"pagerFormat\":\n        case \"pagePrevText\":\n        case \"pageNextText\":\n        case \"pageFirstText\":\n        case \"pageLastText\":\n        case \"pageNavigatorNextText\":\n        case \"pageNavigatorPrevText\":\n        case \"pagerClass\":\n        case \"pagerNavButtonClass\":\n        case \"pageClass\":\n        case \"currentPageClass\":\n        case \"pagerRenderer\":\n          this._refreshPager();\n          break;\n        case \"fields\":\n          this._initFields();\n          this.render();\n          break;\n        case \"data\":\n        case \"editing\":\n        case \"heading\":\n        case \"filtering\":\n        case \"inserting\":\n        case \"paging\":\n          this.refresh();\n          break;\n        case \"loadStrategy\":\n        case \"pageLoading\":\n          this._initLoadStrategy();\n          this.search();\n          break;\n        case \"pageIndex\":\n          this.openPage(value);\n          break;\n        case \"pageSize\":\n          this.refresh();\n          this.search();\n          break;\n        case \"editRowRenderer\":\n        case \"editRowClass\":\n          this.cancelEdit();\n          break;\n        case \"updateOnResize\":\n          this._detachWindowResizeCallback();\n          this._attachWindowResizeCallback();\n          break;\n        case \"invalidNotify\":\n        case \"invalidMessage\":\n          break;\n        default:\n          this.render();\n          break;}\n\n    },\n\n    destroy: function destroy() {\n      this._detachWindowResizeCallback();\n      this._clear();\n      this._container.removeData(JSGRID_DATA_KEY);\n    },\n\n    render: function render() {\n      this._renderGrid();\n      return this.autoload ? this.loadData() : $.Deferred().resolve().promise();\n    },\n\n    _renderGrid: function _renderGrid() {\n      this._clear();\n\n      this._container.addClass(this.containerClass).\n      css(\"position\", \"relative\").\n      append(this._createHeader()).\n      append(this._createBody());\n\n      this._pagerContainer = this._createPagerContainer();\n      this._loadIndicator = this._createLoadIndicator();\n      this._validation = this._createValidation();\n\n      this.refresh();\n    },\n\n    _createLoadIndicator: function _createLoadIndicator() {\n      return getOrApply(this.loadIndicator, this, {\n        message: this.loadMessage,\n        shading: this.loadShading,\n        container: this._container });\n\n    },\n\n    _createValidation: function _createValidation() {\n      return getOrApply(this.validation, this);\n    },\n\n    _clear: function _clear() {\n      this.cancelEdit();\n\n      clearTimeout(this._loadingTimer);\n\n      this._pagerContainer && this._pagerContainer.empty();\n\n      this._container.empty().\n      css({ position: \"\", width: \"\", height: \"\" });\n    },\n\n    _createHeader: function _createHeader() {\n      var $headerRow = this._headerRow = this._createHeaderRow(),\n      $filterRow = this._filterRow = this._createFilterRow(),\n      $insertRow = this._insertRow = this._createInsertRow();\n\n      var $headerGrid = this._headerGrid = $(\"<table>\").addClass(this.tableClass).\n      append($headerRow).\n      append($filterRow).\n      append($insertRow);\n\n      var $header = this._header = $(\"<div>\").addClass(this.gridHeaderClass).\n      addClass(this._scrollBarWidth() ? \"jsgrid-header-scrollbar\" : \"\").\n      append($headerGrid);\n\n      return $header;\n    },\n\n    _createBody: function _createBody() {\n      var $content = this._content = $(\"<tbody>\");\n\n      var $bodyGrid = this._bodyGrid = $(\"<table>\").addClass(this.tableClass).\n      append($content);\n\n      var $body = this._body = $(\"<div>\").addClass(this.gridBodyClass).\n      append($bodyGrid).\n      on(\"scroll\", $.proxy(function (e) {\n        this._header.scrollLeft(e.target.scrollLeft);\n      }, this));\n\n      return $body;\n    },\n\n    _createPagerContainer: function _createPagerContainer() {\n      var pagerContainer = this.pagerContainer || $(\"<div>\").appendTo(this._container);\n      return $(pagerContainer).addClass(this.pagerContainerClass);\n    },\n\n    _eachField: function _eachField(callBack) {\n      var self = this;\n      $.each(this.fields, function (index, field) {\n        if (field.visible) {\n          callBack.call(self, field, index);\n        }\n      });\n    },\n\n    _createHeaderRow: function _createHeaderRow() {\n      if ($.isFunction(this.headerRowRenderer))\n      return $(this.renderTemplate(this.headerRowRenderer, this));\n\n      var $result = $(\"<tr>\").addClass(this.headerRowClass);\n\n      this._eachField(function (field, index) {\n        var $th = this._prepareCell(\"<th>\", field, \"headercss\", this.headerCellClass).\n        append(this.renderTemplate(field.headerTemplate, field)).\n        appendTo($result);\n\n        if (this.sorting && field.sorting) {\n          $th.addClass(this.sortableClass).\n          on(\"click\", $.proxy(function () {\n            this.sort(index);\n          }, this));\n        }\n      });\n\n      return $result;\n    },\n\n    _prepareCell: function _prepareCell(cell, field, cssprop, cellClass) {\n      return $(cell).css(\"width\", field.width).\n      addClass(cellClass || this.cellClass).\n      addClass(cssprop && field[cssprop] || field.css).\n      addClass(field.align ? \"jsgrid-align-\" + field.align : \"\");\n    },\n\n    _createFilterRow: function _createFilterRow() {\n      if ($.isFunction(this.filterRowRenderer))\n      return $(this.renderTemplate(this.filterRowRenderer, this));\n\n      var $result = $(\"<tr>\").addClass(this.filterRowClass);\n\n      this._eachField(function (field) {\n        this._prepareCell(\"<td>\", field, \"filtercss\").\n        append(this.renderTemplate(field.filterTemplate, field)).\n        appendTo($result);\n      });\n\n      return $result;\n    },\n\n    _createInsertRow: function _createInsertRow() {\n      if ($.isFunction(this.insertRowRenderer))\n      return $(this.renderTemplate(this.insertRowRenderer, this));\n\n      var $result = $(\"<tr>\").addClass(this.insertRowClass);\n\n      this._eachField(function (field) {\n        this._prepareCell(\"<td>\", field, \"insertcss\").\n        append(this.renderTemplate(field.insertTemplate, field)).\n        appendTo($result);\n      });\n\n      return $result;\n    },\n\n    _callEventHandler: function _callEventHandler(handler, eventParams) {\n      handler.call(this, $.extend(eventParams, {\n        grid: this }));\n\n\n      return eventParams;\n    },\n\n    reset: function reset() {\n      this._resetSorting();\n      this._resetPager();\n      return this._loadStrategy.reset();\n    },\n\n    _resetPager: function _resetPager() {\n      this._firstDisplayingPage = 1;\n      this._setPage(1);\n    },\n\n    _resetSorting: function _resetSorting() {\n      this._sortField = null;\n      this._sortOrder = SORT_ORDER_ASC;\n      this._clearSortingCss();\n    },\n\n    refresh: function refresh() {\n      this._callEventHandler(this.onRefreshing);\n\n      this.cancelEdit();\n\n      this._refreshHeading();\n      this._refreshFiltering();\n      this._refreshInserting();\n      this._refreshContent();\n      this._refreshPager();\n      this._refreshSize();\n\n      this._callEventHandler(this.onRefreshed);\n    },\n\n    _refreshHeading: function _refreshHeading() {\n      this._headerRow.toggle(this.heading);\n    },\n\n    _refreshFiltering: function _refreshFiltering() {\n      this._filterRow.toggle(this.filtering);\n    },\n\n    _refreshInserting: function _refreshInserting() {\n      this._insertRow.toggle(this.inserting);\n    },\n\n    _refreshContent: function _refreshContent() {\n      var $content = this._content;\n      $content.empty();\n\n      if (!this.data.length) {\n        $content.append(this._createNoDataRow());\n        return this;\n      }\n\n      var indexFrom = this._loadStrategy.firstDisplayIndex();\n      var indexTo = this._loadStrategy.lastDisplayIndex();\n\n      for (var itemIndex = indexFrom; itemIndex < indexTo; itemIndex++) {\n        var item = this.data[itemIndex];\n        $content.append(this._createRow(item, itemIndex));\n      }\n    },\n\n    _createNoDataRow: function _createNoDataRow() {\n      var amountOfFields = 0;\n      this._eachField(function () {\n        amountOfFields++;\n      });\n\n      return $(\"<tr>\").addClass(this.noDataRowClass).\n      append($(\"<td>\").attr(\"colspan\", amountOfFields).\n      append(this.renderTemplate(this.noDataContent, this)));\n    },\n\n    _createRow: function _createRow(item, itemIndex) {\n      var $result;\n\n      if ($.isFunction(this.rowRenderer)) {\n        $result = this.renderTemplate(this.rowRenderer, this, { item: item, itemIndex: itemIndex });\n      } else {\n        $result = $(\"<tr>\");\n        this._renderCells($result, item);\n      }\n\n      $result.addClass(this._getRowClasses(item, itemIndex)).\n      data(JSGRID_ROW_DATA_KEY, item).\n      on(\"click\", $.proxy(function (e) {\n        this.rowClick({\n          item: item,\n          itemIndex: itemIndex,\n          event: e });\n\n      }, this)).\n      on(\"dblclick\", $.proxy(function (e) {\n        this.rowDoubleClick({\n          item: item,\n          itemIndex: itemIndex,\n          event: e });\n\n      }, this));\n\n      if (this.selecting) {\n        this._attachRowHover($result);\n      }\n\n      return $result;\n    },\n\n    _getRowClasses: function _getRowClasses(item, itemIndex) {\n      var classes = [];\n      classes.push((itemIndex + 1) % 2 ? this.oddRowClass : this.evenRowClass);\n      classes.push(getOrApply(this.rowClass, this, item, itemIndex));\n      return classes.join(\" \");\n    },\n\n    _attachRowHover: function _attachRowHover($row) {\n      var selectedRowClass = this.selectedRowClass;\n      $row.hover(function () {\n        $(this).addClass(selectedRowClass);\n      },\n      function () {\n        $(this).removeClass(selectedRowClass);\n      });\n\n    },\n\n    _renderCells: function _renderCells($row, item) {\n      this._eachField(function (field) {\n        $row.append(this._createCell(item, field));\n      });\n      return this;\n    },\n\n    _createCell: function _createCell(item, field) {\n      var $result;\n      var fieldValue = this._getItemFieldValue(item, field);\n\n      var args = { value: fieldValue, item: item };\n      if ($.isFunction(field.cellRenderer)) {\n        $result = this.renderTemplate(field.cellRenderer, field, args);\n      } else {\n        $result = $(\"<td>\").append(this.renderTemplate(field.itemTemplate || fieldValue, field, args));\n      }\n\n      return this._prepareCell($result, field);\n    },\n\n    _getItemFieldValue: function _getItemFieldValue(item, field) {\n      var props = field.name.split('.');\n      var result = item[props.shift()];\n\n      while (result && props.length) {\n        result = result[props.shift()];\n      }\n\n      return result;\n    },\n\n    _setItemFieldValue: function _setItemFieldValue(item, field, value) {\n      var props = field.name.split('.');\n      var current = item;\n      var prop = props[0];\n\n      while (current && props.length) {\n        item = current;\n        prop = props.shift();\n        current = item[prop];\n      }\n\n      if (!current) {\n        while (props.length) {\n          item = item[prop] = {};\n          prop = props.shift();\n        }\n      }\n\n      item[prop] = value;\n    },\n\n    sort: function sort(field, order) {\n      if ($.isPlainObject(field)) {\n        order = field.order;\n        field = field.field;\n      }\n\n      this._clearSortingCss();\n      this._setSortingParams(field, order);\n      this._setSortingCss();\n      return this._loadStrategy.sort();\n    },\n\n    _clearSortingCss: function _clearSortingCss() {\n      this._headerRow.find(\"th\").\n      removeClass(this.sortAscClass).\n      removeClass(this.sortDescClass);\n    },\n\n    _setSortingParams: function _setSortingParams(field, order) {\n      field = this._normalizeField(field);\n      order = order || (this._sortField === field ? this._reversedSortOrder(this._sortOrder) : SORT_ORDER_ASC);\n\n      this._sortField = field;\n      this._sortOrder = order;\n    },\n\n    _normalizeField: function _normalizeField(field) {\n      if ($.isNumeric(field)) {\n        return this.fields[field];\n      }\n\n      if (typeof field === \"string\") {\n        return $.grep(this.fields, function (f) {\n          return f.name === field;\n        })[0];\n      }\n\n      return field;\n    },\n\n    _reversedSortOrder: function _reversedSortOrder(order) {\n      return order === SORT_ORDER_ASC ? SORT_ORDER_DESC : SORT_ORDER_ASC;\n    },\n\n    _setSortingCss: function _setSortingCss() {\n      var fieldIndex = this._visibleFieldIndex(this._sortField);\n\n      this._headerRow.find(\"th\").eq(fieldIndex).\n      addClass(this._sortOrder === SORT_ORDER_ASC ? this.sortAscClass : this.sortDescClass);\n    },\n\n    _visibleFieldIndex: function _visibleFieldIndex(field) {\n      return $.inArray(field, $.grep(this.fields, function (f) {return f.visible;}));\n    },\n\n    _sortData: function _sortData() {\n      var sortFactor = this._sortFactor(),\n      sortField = this._sortField;\n\n      if (sortField) {\n        this.data.sort(function (item1, item2) {\n          return sortFactor * sortField.sortingFunc(item1[sortField.name], item2[sortField.name]);\n        });\n      }\n    },\n\n    _sortFactor: function _sortFactor() {\n      return this._sortOrder === SORT_ORDER_ASC ? 1 : -1;\n    },\n\n    _itemsCount: function _itemsCount() {\n      return this._loadStrategy.itemsCount();\n    },\n\n    _pagesCount: function _pagesCount() {\n      var itemsCount = this._itemsCount(),\n      pageSize = this.pageSize;\n      return Math.floor(itemsCount / pageSize) + (itemsCount % pageSize ? 1 : 0);\n    },\n\n    _refreshPager: function _refreshPager() {\n      var $pagerContainer = this._pagerContainer;\n      $pagerContainer.empty();\n\n      if (this.paging) {\n        $pagerContainer.append(this._createPager());\n      }\n\n      var showPager = this.paging && this._pagesCount() > 1;\n      $pagerContainer.toggle(showPager);\n    },\n\n    _createPager: function _createPager() {\n      var $result;\n\n      if ($.isFunction(this.pagerRenderer)) {\n        $result = $(this.pagerRenderer({\n          pageIndex: this.pageIndex,\n          pageCount: this._pagesCount() }));\n\n      } else {\n        $result = $(\"<div>\").append(this._createPagerByFormat());\n      }\n\n      $result.addClass(this.pagerClass);\n\n      return $result;\n    },\n\n    _createPagerByFormat: function _createPagerByFormat() {\n      var pageIndex = this.pageIndex,\n      pageCount = this._pagesCount(),\n      itemCount = this._itemsCount(),\n      pagerParts = this.pagerFormat.split(\" \");\n\n      return $.map(pagerParts, $.proxy(function (pagerPart) {\n        var result = pagerPart;\n\n        if (pagerPart === PAGES_PLACEHOLDER) {\n          result = this._createPages();\n        } else if (pagerPart === FIRST_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageFirstText, 1, pageIndex > 1);\n        } else if (pagerPart === PREV_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pagePrevText, pageIndex - 1, pageIndex > 1);\n        } else if (pagerPart === NEXT_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageNextText, pageIndex + 1, pageIndex < pageCount);\n        } else if (pagerPart === LAST_PAGE_PLACEHOLDER) {\n          result = this._createPagerNavButton(this.pageLastText, pageCount, pageIndex < pageCount);\n        } else if (pagerPart === PAGE_INDEX_PLACEHOLDER) {\n          result = pageIndex;\n        } else if (pagerPart === PAGE_COUNT_PLACEHOLDER) {\n          result = pageCount;\n        } else if (pagerPart === ITEM_COUNT_PLACEHOLDER) {\n          result = itemCount;\n        }\n\n        return $.isArray(result) ? result.concat([\" \"]) : [result, \" \"];\n      }, this));\n    },\n\n    _createPages: function _createPages() {\n      var pageCount = this._pagesCount(),\n      pageButtonCount = this.pageButtonCount,\n      firstDisplayingPage = this._firstDisplayingPage,\n      pages = [];\n\n      if (firstDisplayingPage > 1) {\n        pages.push(this._createPagerPageNavButton(this.pageNavigatorPrevText, this.showPrevPages));\n      }\n\n      for (var i = 0, pageNumber = firstDisplayingPage; i < pageButtonCount && pageNumber <= pageCount; i++, pageNumber++) {\n        pages.push(pageNumber === this.pageIndex ?\n        this._createPagerCurrentPage() :\n        this._createPagerPage(pageNumber));\n      }\n\n      if (firstDisplayingPage + pageButtonCount - 1 < pageCount) {\n        pages.push(this._createPagerPageNavButton(this.pageNavigatorNextText, this.showNextPages));\n      }\n\n      return pages;\n    },\n\n    _createPagerNavButton: function _createPagerNavButton(text, pageIndex, isActive) {\n      return this._createPagerButton(text, this.pagerNavButtonClass + (isActive ? \"\" : \" \" + this.pagerNavButtonInactiveClass),\n      isActive ? function () {this.openPage(pageIndex);} : $.noop);\n    },\n\n    _createPagerPageNavButton: function _createPagerPageNavButton(text, handler) {\n      return this._createPagerButton(text, this.pagerNavButtonClass, handler);\n    },\n\n    _createPagerPage: function _createPagerPage(pageIndex) {\n      return this._createPagerButton(pageIndex, this.pageClass, function () {\n        this.openPage(pageIndex);\n      });\n    },\n\n    _createPagerButton: function _createPagerButton(text, css, handler) {\n      var $link = $(\"<a>\").attr(\"href\", EMPTY_HREF).\n      html(text).\n      on(\"click\", $.proxy(handler, this));\n\n      return $(\"<span>\").addClass(css).append($link);\n    },\n\n    _createPagerCurrentPage: function _createPagerCurrentPage() {\n      return $(\"<span>\").\n      addClass(this.pageClass).\n      addClass(this.currentPageClass).\n      text(this.pageIndex);\n    },\n\n    _refreshSize: function _refreshSize() {\n      this._refreshHeight();\n      this._refreshWidth();\n    },\n\n    _refreshWidth: function _refreshWidth() {\n      var $headerGrid = this._headerGrid,\n      $bodyGrid = this._bodyGrid,\n      width = this.width;\n\n      if (width === \"auto\") {\n        $headerGrid.width(\"auto\");\n        width = $headerGrid.outerWidth();\n      }\n\n      $headerGrid.width(\"\");\n      $bodyGrid.width(\"\");\n      this._container.width(width);\n      width = $headerGrid.outerWidth();\n      $bodyGrid.width(width);\n    },\n\n    _scrollBarWidth: function () {\n      var result;\n\n      return function () {\n        if (result === undefined) {\n          var $ghostContainer = $(\"<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>\");\n          var $ghostContent = $(\"<div style='height:100px;'></div>\");\n          $ghostContainer.append($ghostContent).appendTo(\"body\");\n          var width = $ghostContent.innerWidth();\n          $ghostContainer.css(\"overflow-y\", \"auto\");\n          var widthExcludingScrollBar = $ghostContent.innerWidth();\n          $ghostContainer.remove();\n          result = width - widthExcludingScrollBar;\n        }\n        return result;\n      };\n    }(),\n\n    _refreshHeight: function _refreshHeight() {\n      var container = this._container,\n      pagerContainer = this._pagerContainer,\n      height = this.height,\n      nonBodyHeight;\n\n      container.height(height);\n\n      if (height !== \"auto\") {\n        height = container.height();\n\n        nonBodyHeight = this._header.outerHeight(true);\n        if (pagerContainer.parents(container).length) {\n          nonBodyHeight += pagerContainer.outerHeight(true);\n        }\n        if (nonBodyHeight === 0) {\n          nonBodyHeight = 41; //Bug: Subtract header height the first time.\n          if (pagerContainer.style(\"display\") !== \"none\") {\n            nonBodyHeight += 29; //Bug: Subtract pageContainer height the first time.\n          }\n        }\n\n        this._body.outerHeight(height - nonBodyHeight);\n      }\n    },\n\n    showPrevPages: function showPrevPages() {\n      var firstDisplayingPage = this._firstDisplayingPage,\n      pageButtonCount = this.pageButtonCount;\n\n      this._firstDisplayingPage = firstDisplayingPage > pageButtonCount ? firstDisplayingPage - pageButtonCount : 1;\n\n      this._refreshPager();\n    },\n\n    showNextPages: function showNextPages() {\n      var firstDisplayingPage = this._firstDisplayingPage,\n      pageButtonCount = this.pageButtonCount,\n      pageCount = this._pagesCount();\n\n      this._firstDisplayingPage = firstDisplayingPage + 2 * pageButtonCount > pageCount ?\n      pageCount - pageButtonCount + 1 :\n      firstDisplayingPage + pageButtonCount;\n\n      this._refreshPager();\n    },\n\n    openPage: function openPage(pageIndex) {\n      if (pageIndex < 1 || pageIndex > this._pagesCount())\n      return;\n\n      this._setPage(pageIndex);\n      this._loadStrategy.openPage(pageIndex);\n    },\n\n    _setPage: function _setPage(pageIndex) {\n      var firstDisplayingPage = this._firstDisplayingPage,\n      pageButtonCount = this.pageButtonCount;\n\n      this.pageIndex = pageIndex;\n\n      if (pageIndex < firstDisplayingPage) {\n        this._firstDisplayingPage = pageIndex;\n      }\n\n      if (pageIndex > firstDisplayingPage + pageButtonCount - 1) {\n        this._firstDisplayingPage = pageIndex - pageButtonCount + 1;\n      }\n\n      this._callEventHandler(this.onPageChanged, {\n        pageIndex: pageIndex });\n\n    },\n\n    _controllerCall: function _controllerCall(method, param, isCanceled, doneCallback) {\n      if (isCanceled)\n      return $.Deferred().reject().promise();\n\n      this._showLoading();\n\n      var controller = this._controller;\n      if (!controller || !controller[method]) {\n        throw Error(\"controller has no method '\" + method + \"'\");\n      }\n\n      return normalizePromise(controller[method](param)).\n      done($.proxy(doneCallback, this)).\n      fail($.proxy(this._errorHandler, this)).\n      always($.proxy(this._hideLoading, this));\n    },\n\n    _errorHandler: function _errorHandler() {\n      this._callEventHandler(this.onError, {\n        args: $.makeArray(arguments) });\n\n    },\n\n    _showLoading: function _showLoading() {\n      if (!this.loadIndication)\n      return;\n\n      clearTimeout(this._loadingTimer);\n\n      this._loadingTimer = setTimeout($.proxy(function () {\n        this._loadIndicator.show();\n      }, this), this.loadIndicationDelay);\n    },\n\n    _hideLoading: function _hideLoading() {\n      if (!this.loadIndication)\n      return;\n\n      clearTimeout(this._loadingTimer);\n      this._loadIndicator.hide();\n    },\n\n    search: function search(filter) {\n      this._resetSorting();\n      this._resetPager();\n      return this.loadData(filter);\n    },\n\n    loadData: function loadData(filter) {\n      filter = filter || (this.filtering ? this.getFilter() : {});\n\n      $.extend(filter, this._loadStrategy.loadParams(), this._sortingParams());\n\n      var args = this._callEventHandler(this.onDataLoading, {\n        filter: filter });\n\n\n      return this._controllerCall(\"loadData\", filter, args.cancel, function (loadedData) {\n        if (!loadedData)\n        return;\n\n        this._loadStrategy.finishLoad(loadedData);\n\n        this._callEventHandler(this.onDataLoaded, {\n          data: loadedData });\n\n      });\n    },\n\n    getFilter: function getFilter() {\n      var result = {};\n      this._eachField(function (field) {\n        if (field.filtering) {\n          this._setItemFieldValue(result, field, field.filterValue());\n        }\n      });\n      return result;\n    },\n\n    _sortingParams: function _sortingParams() {\n      if (this.sorting && this._sortField) {\n        return {\n          sortField: this._sortField.name,\n          sortOrder: this._sortOrder };\n\n      }\n      return {};\n    },\n\n    getSorting: function getSorting() {\n      var sortingParams = this._sortingParams();\n      return {\n        field: sortingParams.sortField,\n        order: sortingParams.sortOrder };\n\n    },\n\n    clearFilter: function clearFilter() {\n      var $filterRow = this._createFilterRow();\n      this._filterRow.replaceWith($filterRow);\n      this._filterRow = $filterRow;\n      return this.search();\n    },\n\n    insertItem: function insertItem(item) {\n      var insertingItem = item || this._getValidatedInsertItem();\n\n      if (!insertingItem)\n      return $.Deferred().reject().promise();\n\n      var args = this._callEventHandler(this.onItemInserting, {\n        item: insertingItem });\n\n\n      return this._controllerCall(\"insertItem\", insertingItem, args.cancel, function (insertedItem) {\n        insertedItem = insertedItem || insertingItem;\n        this._loadStrategy.finishInsert(insertedItem);\n\n        this._callEventHandler(this.onItemInserted, {\n          item: insertedItem });\n\n      });\n    },\n\n    _getValidatedInsertItem: function _getValidatedInsertItem() {\n      var item = this._getInsertItem();\n      return this._validateItem(item, this._insertRow) ? item : null;\n    },\n\n    _getInsertItem: function _getInsertItem() {\n      var result = {};\n      this._eachField(function (field) {\n        if (field.inserting) {\n          this._setItemFieldValue(result, field, field.insertValue());\n        }\n      });\n      return result;\n    },\n\n    _validateItem: function _validateItem(item, $row) {\n      var validationErrors = [];\n\n      var args = {\n        item: item,\n        itemIndex: this._rowIndex($row),\n        row: $row };\n\n\n      this._eachField(function (field) {\n        if (!field.validate)\n        return;\n\n        var fieldValue = this._getItemFieldValue(item, field);\n\n        if (fieldValue === undefined)\n        return;\n\n        var errors = this._validation.validate($.extend({\n          value: fieldValue,\n          rules: field.validate },\n        args));\n\n        this._setCellValidity($row.children().eq(this._visibleFieldIndex(field)), errors);\n\n        if (!errors.length)\n        return;\n\n        validationErrors.push.apply(validationErrors,\n        $.map(errors, function (message) {\n          return { field: field, message: message };\n        }));\n      });\n\n      if (!validationErrors.length)\n      return true;\n\n      var invalidArgs = $.extend({\n        errors: validationErrors },\n      args);\n      this._callEventHandler(this.onItemInvalid, invalidArgs);\n      this.invalidNotify(invalidArgs);\n\n      return false;\n    },\n\n    _setCellValidity: function _setCellValidity($cell, errors) {\n      $cell.\n      toggleClass(this.invalidClass, !!errors.length).\n      attr(\"title\", errors.join(\"\\n\"));\n    },\n\n    clearInsert: function clearInsert() {\n      var insertRow = this._createInsertRow();\n      this._insertRow.replaceWith(insertRow);\n      this._insertRow = insertRow;\n      this.refresh();\n    },\n\n    editItem: function editItem(item) {\n      var $row = this.rowByItem(item);\n      if ($row.length) {\n        this._editRow($row);\n      }\n    },\n\n    rowByItem: function rowByItem(item) {\n      if (item.jquery || item.nodeType)\n      return $(item);\n\n      return this._content.find(\"tr\").filter(function () {\n        return $.data(this, JSGRID_ROW_DATA_KEY) === item;\n      });\n    },\n\n    _editRow: function _editRow($row) {\n      if (!this.editing)\n      return;\n\n      var item = $row.data(JSGRID_ROW_DATA_KEY);\n\n      var args = this._callEventHandler(this.onItemEditing, {\n        row: $row,\n        item: item,\n        itemIndex: this._itemIndex(item) });\n\n\n      if (args.cancel)\n      return;\n\n      if (this._editingRow) {\n        this.cancelEdit();\n      }\n\n      var $editRow = this._createEditRow(item);\n\n      this._editingRow = $row;\n      $row.hide();\n      $editRow.insertBefore($row);\n      $row.data(JSGRID_EDIT_ROW_DATA_KEY, $editRow);\n    },\n\n    _createEditRow: function _createEditRow(item) {\n      if ($.isFunction(this.editRowRenderer)) {\n        return $(this.renderTemplate(field.editRowRenderer, field, { item: item, itemIndex: this._itemIndex(item) }));\n      }\n\n      var $result = $(\"<tr>\").addClass(this.editRowClass);\n\n      this._eachField(function (field) {\n        var fieldValue = this._getItemFieldValue(item, field);\n\n        this._prepareCell(\"<td>\", field, \"editcss\").\n        append(this.renderTemplate(field.editTemplate || \"\", field, { value: fieldValue, item: item })).\n        appendTo($result);\n      });\n\n      return $result;\n    },\n\n    updateItem: function updateItem(item, editedItem) {\n      if (arguments.length === 1) {\n        editedItem = item;\n      }\n\n      var $row = item ? this.rowByItem(item) : this._editingRow;\n      editedItem = editedItem || this._getValidatedEditedItem();\n\n      if (!editedItem)\n      return;\n\n      return this._updateRow($row, editedItem);\n    },\n\n    _getValidatedEditedItem: function _getValidatedEditedItem() {\n      var item = this._getEditedItem();\n      return this._validateItem(item, this._getEditRow()) ? item : null;\n    },\n\n    _updateRow: function _updateRow($updatingRow, editedItem) {\n      var updatingItem = $updatingRow.data(JSGRID_ROW_DATA_KEY),\n      updatingItemIndex = this._itemIndex(updatingItem),\n      previousItem = $.extend(true, {}, updatingItem);\n\n      $.extend(true, updatingItem, editedItem);\n\n      var args = this._callEventHandler(this.onItemUpdating, {\n        row: $updatingRow,\n        item: updatingItem,\n        itemIndex: updatingItemIndex,\n        previousItem: previousItem });\n\n\n      return this._controllerCall(\"updateItem\", updatingItem, args.cancel, function (updatedItem) {\n        updatedItem = updatedItem || updatingItem;\n        var $updatedRow = this._finishUpdate($updatingRow, updatedItem, updatingItemIndex);\n\n        this._callEventHandler(this.onItemUpdated, {\n          row: $updatedRow,\n          item: updatedItem,\n          itemIndex: updatingItemIndex,\n          previousItem: previousItem });\n\n      });\n    },\n\n    _rowIndex: function _rowIndex(row) {\n      return this._content.children().index($(row));\n    },\n\n    _itemIndex: function _itemIndex(item) {\n      return $.inArray(item, this.data);\n    },\n\n    _finishUpdate: function _finishUpdate($updatingRow, updatedItem, updatedItemIndex) {\n      this.cancelEdit();\n      this.data[updatedItemIndex] = updatedItem;\n\n      var $updatedRow = this._createRow(updatedItem, updatedItemIndex);\n      $updatingRow.replaceWith($updatedRow);\n      return $updatedRow;\n    },\n\n    _getEditedItem: function _getEditedItem() {\n      var result = {};\n      this._eachField(function (field) {\n        if (field.editing) {\n          this._setItemFieldValue(result, field, field.editValue());\n        }\n      });\n      return result;\n    },\n\n    cancelEdit: function cancelEdit() {\n      if (!this._editingRow)\n      return;\n\n      this._getEditRow().remove();\n      this._editingRow.show();\n      this._editingRow = null;\n    },\n\n    _getEditRow: function _getEditRow() {\n      return this._editingRow.data(JSGRID_EDIT_ROW_DATA_KEY);\n    },\n\n    deleteItem: function deleteItem(item) {\n      var $row = this.rowByItem(item);\n\n      if (!$row.length)\n      return;\n\n      if (this.confirmDeleting && !window.confirm(getOrApply(this.deleteConfirm, this, $row.data(JSGRID_ROW_DATA_KEY))))\n      return;\n\n      return this._deleteRow($row);\n    },\n\n    _deleteRow: function _deleteRow($row) {\n      var deletingItem = $row.data(JSGRID_ROW_DATA_KEY),\n      deletingItemIndex = this._itemIndex(deletingItem);\n\n      var args = this._callEventHandler(this.onItemDeleting, {\n        row: $row,\n        item: deletingItem,\n        itemIndex: deletingItemIndex });\n\n\n      return this._controllerCall(\"deleteItem\", deletingItem, args.cancel, function () {\n        this._loadStrategy.finishDelete(deletingItem, deletingItemIndex);\n\n        this._callEventHandler(this.onItemDeleted, {\n          row: $row,\n          item: deletingItem,\n          itemIndex: deletingItemIndex });\n\n      });\n    } };\n\n\n  $.fn.jsGrid = function (config) {\n    var args = $.makeArray(arguments),\n    methodArgs = args.slice(1),\n    result = this;\n\n    this.each(function () {\n      var $element = $(this),\n      instance = $element.data(JSGRID_DATA_KEY),\n      methodResult;\n\n      if (instance) {\n        if (typeof config === \"string\") {\n          methodResult = instance[config].apply(instance, methodArgs);\n          if (methodResult !== undefined && methodResult !== instance) {\n            result = methodResult;\n            return false;\n          }\n        } else {\n          instance._detachWindowResizeCallback();\n          instance._init(config);\n          instance.render();\n        }\n      } else {\n        new Grid($element, config);\n      }\n    });\n\n    return result;\n  };\n\n  var fields = {};\n\n  var setDefaults = function setDefaults(config) {\n    var componentPrototype;\n\n    if ($.isPlainObject(config)) {\n      componentPrototype = Grid.prototype;\n    } else {\n      componentPrototype = fields[config].prototype;\n      config = arguments[1] || {};\n    }\n\n    $.extend(componentPrototype, config);\n  };\n\n  var locales = {};\n\n  var locale = function locale(lang) {\n    var localeConfig = $.isPlainObject(lang) ? lang : locales[lang];\n\n    if (!localeConfig)\n    throw Error(\"unknown locale \" + lang);\n\n    setLocale(jsGrid, localeConfig);\n  };\n\n  var setLocale = function setLocale(obj, localeConfig) {\n    $.each(localeConfig, function (field, value) {\n      if ($.isPlainObject(value)) {\n        setLocale(obj[field] || obj[field[0].toUpperCase() + field.slice(1)], value);\n        return;\n      }\n\n      if (obj.hasOwnProperty(field)) {\n        obj[field] = value;\n      } else {\n        obj.prototype[field] = value;\n      }\n    });\n  };\n\n  window.jsGrid = {\n    Grid: Grid,\n    fields: fields,\n    setDefaults: setDefaults,\n    locales: locales,\n    locale: locale,\n    version: '1.5.1' };\n\n\n})(window, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function LoadIndicator(config) {\n    this._init(config);\n  }\n\n  LoadIndicator.prototype = {\n\n    container: \"body\",\n    message: \"Loading...\",\n    shading: true,\n\n    zIndex: 1000,\n    shaderClass: \"jsgrid-load-shader\",\n    loadPanelClass: \"jsgrid-load-panel\",\n\n    _init: function _init(config) {\n      $.extend(true, this, config);\n\n      this._initContainer();\n      this._initShader();\n      this._initLoadPanel();\n    },\n\n    _initContainer: function _initContainer() {\n      this._container = $(this.container);\n    },\n\n    _initShader: function _initShader() {\n      if (!this.shading)\n      return;\n\n      this._shader = $(\"<div>\").addClass(this.shaderClass).\n      hide().\n      css({\n        position: \"absolute\",\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        zIndex: this.zIndex }).\n\n      appendTo(this._container);\n    },\n\n    _initLoadPanel: function _initLoadPanel() {\n      this._loadPanel = $(\"<div>\").addClass(this.loadPanelClass).\n      text(this.message).\n      hide().\n      css({\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        zIndex: this.zIndex }).\n\n      appendTo(this._container);\n    },\n\n    show: function show() {\n      var $loadPanel = this._loadPanel.show();\n\n      var actualWidth = $loadPanel.outerWidth();\n      var actualHeight = $loadPanel.outerHeight();\n\n      $loadPanel.css({\n        marginTop: -actualHeight / 2,\n        marginLeft: -actualWidth / 2 });\n\n\n      this._shader.show();\n    },\n\n    hide: function hide() {\n      this._loadPanel.hide();\n      this._shader.hide();\n    } };\n\n\n\n  jsGrid.LoadIndicator = LoadIndicator;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function DirectLoadingStrategy(grid) {\n    this._grid = grid;\n  }\n\n  DirectLoadingStrategy.prototype = {\n\n    firstDisplayIndex: function firstDisplayIndex() {\n      var grid = this._grid;\n      return grid.option(\"paging\") ? (grid.option(\"pageIndex\") - 1) * grid.option(\"pageSize\") : 0;\n    },\n\n    lastDisplayIndex: function lastDisplayIndex() {\n      var grid = this._grid;\n      var itemsCount = grid.option(\"data\").length;\n\n      return grid.option(\"paging\") ?\n      Math.min(grid.option(\"pageIndex\") * grid.option(\"pageSize\"), itemsCount) :\n      itemsCount;\n    },\n\n    itemsCount: function itemsCount() {\n      return this._grid.option(\"data\").length;\n    },\n\n    openPage: function openPage(index) {\n      this._grid.refresh();\n    },\n\n    loadParams: function loadParams() {\n      return {};\n    },\n\n    sort: function sort() {\n      this._grid._sortData();\n      this._grid.refresh();\n      return $.Deferred().resolve().promise();\n    },\n\n    reset: function reset() {\n      this._grid.refresh();\n      return $.Deferred().resolve().promise();\n    },\n\n    finishLoad: function finishLoad(loadedData) {\n      this._grid.option(\"data\", loadedData);\n    },\n\n    finishInsert: function finishInsert(insertedItem) {\n      var grid = this._grid;\n      grid.option(\"data\").push(insertedItem);\n      grid.refresh();\n    },\n\n    finishDelete: function finishDelete(deletedItem, deletedItemIndex) {\n      var grid = this._grid;\n      grid.option(\"data\").splice(deletedItemIndex, 1);\n      grid.reset();\n    } };\n\n\n\n  function PageLoadingStrategy(grid) {\n    this._grid = grid;\n    this._itemsCount = 0;\n  }\n\n  PageLoadingStrategy.prototype = {\n\n    firstDisplayIndex: function firstDisplayIndex() {\n      return 0;\n    },\n\n    lastDisplayIndex: function lastDisplayIndex() {\n      return this._grid.option(\"data\").length;\n    },\n\n    itemsCount: function itemsCount() {\n      return this._itemsCount;\n    },\n\n    openPage: function openPage(index) {\n      this._grid.loadData();\n    },\n\n    loadParams: function loadParams() {\n      var grid = this._grid;\n      return {\n        pageIndex: grid.option(\"pageIndex\"),\n        pageSize: grid.option(\"pageSize\") };\n\n    },\n\n    reset: function reset() {\n      return this._grid.loadData();\n    },\n\n    sort: function sort() {\n      return this._grid.loadData();\n    },\n\n    finishLoad: function finishLoad(loadedData) {\n      this._itemsCount = loadedData.itemsCount;\n      this._grid.option(\"data\", loadedData.data);\n    },\n\n    finishInsert: function finishInsert(insertedItem) {\n      this._grid.search();\n    },\n\n    finishDelete: function finishDelete(deletedItem, deletedItemIndex) {\n      this._grid.search();\n    } };\n\n\n  jsGrid.loadStrategies = {\n    DirectLoadingStrategy: DirectLoadingStrategy,\n    PageLoadingStrategy: PageLoadingStrategy };\n\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var isDefined = function isDefined(val) {\n    return typeof val !== \"undefined\" && val !== null;\n  };\n\n  var sortStrategies = {\n    string: function string(str1, str2) {\n      if (!isDefined(str1) && !isDefined(str2))\n      return 0;\n\n      if (!isDefined(str1))\n      return -1;\n\n      if (!isDefined(str2))\n      return 1;\n\n      return (\"\" + str1).localeCompare(\"\" + str2);\n    },\n\n    number: function number(n1, n2) {\n      return n1 - n2;\n    },\n\n    date: function date(dt1, dt2) {\n      return dt1 - dt2;\n    },\n\n    numberAsString: function numberAsString(n1, n2) {\n      return parseFloat(n1) - parseFloat(n2);\n    } };\n\n\n  jsGrid.sortStrategies = sortStrategies;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function Validation(config) {\n    this._init(config);\n  }\n\n  Validation.prototype = {\n\n    _init: function _init(config) {\n      $.extend(true, this, config);\n    },\n\n    validate: function validate(args) {\n      var errors = [];\n\n      $.each(this._normalizeRules(args.rules), function (_, rule) {\n        if (rule.validator(args.value, args.item, rule.param))\n        return;\n\n        var errorMessage = $.isFunction(rule.message) ? rule.message(args.value, args.item) : rule.message;\n        errors.push(errorMessage);\n      });\n\n      return errors;\n    },\n\n    _normalizeRules: function _normalizeRules(rules) {\n      if (!$.isArray(rules))\n      rules = [rules];\n\n      return $.map(rules, $.proxy(function (rule) {\n        return this._normalizeRule(rule);\n      }, this));\n    },\n\n    _normalizeRule: function _normalizeRule(rule) {\n      if (typeof rule === \"string\")\n      rule = { validator: rule };\n\n      if ($.isFunction(rule))\n      rule = { validator: rule };\n\n      if ($.isPlainObject(rule))\n      rule = $.extend({}, rule);else\n\n      throw Error(\"wrong validation config specified\");\n\n      if ($.isFunction(rule.validator))\n      return rule;\n\n      return this._applyNamedValidator(rule, rule.validator);\n    },\n\n    _applyNamedValidator: function _applyNamedValidator(rule, validatorName) {\n      delete rule.validator;\n\n      var validator = validators[validatorName];\n      if (!validator)\n      throw Error(\"unknown validator \\\"\" + validatorName + \"\\\"\");\n\n      if ($.isFunction(validator)) {\n        validator = { validator: validator };\n      }\n\n      return $.extend({}, validator, rule);\n    } };\n\n\n  jsGrid.Validation = Validation;\n\n\n  var validators = {\n    required: {\n      message: \"Field is required\",\n      validator: function validator(value) {\n        return value !== undefined && value !== null && value !== \"\";\n      } },\n\n\n    rangeLength: {\n      message: \"Field value length is out of the defined range\",\n      validator: function validator(value, _, param) {\n        return value.length >= param[0] && value.length <= param[1];\n      } },\n\n\n    minLength: {\n      message: \"Field value is too short\",\n      validator: function validator(value, _, param) {\n        return value.length >= param;\n      } },\n\n\n    maxLength: {\n      message: \"Field value is too long\",\n      validator: function validator(value, _, param) {\n        return value.length <= param;\n      } },\n\n\n    pattern: {\n      message: \"Field value is not matching the defined pattern\",\n      validator: function validator(value, _, param) {\n        if (typeof param === \"string\") {\n          param = new RegExp(\"^(?:\" + param + \")$\");\n        }\n        return param.test(value);\n      } },\n\n\n    range: {\n      message: \"Field value is out of the defined range\",\n      validator: function validator(value, _, param) {\n        return value >= param[0] && value <= param[1];\n      } },\n\n\n    min: {\n      message: \"Field value is too small\",\n      validator: function validator(value, _, param) {\n        return value >= param;\n      } },\n\n\n    max: {\n      message: \"Field value is too large\",\n      validator: function validator(value, _, param) {\n        return value <= param;\n      } } };\n\n\n\n  jsGrid.validators = validators;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  function Field(config) {\n    $.extend(true, this, config);\n    this.sortingFunc = this._getSortingFunc();\n  }\n\n  Field.prototype = {\n    name: \"\",\n    title: null,\n    css: \"\",\n    align: \"\",\n    width: 100,\n\n    visible: true,\n    filtering: true,\n    inserting: true,\n    editing: true,\n    sorting: true,\n    sorter: \"string\", // name of SortStrategy or function to compare elements\n\n    headerTemplate: function headerTemplate() {\n      return this.title === undefined || this.title === null ? this.name : this.title;\n    },\n\n    itemTemplate: function itemTemplate(value, item) {\n      return value;\n    },\n\n    filterTemplate: function filterTemplate() {\n      return \"\";\n    },\n\n    insertTemplate: function insertTemplate() {\n      return \"\";\n    },\n\n    editTemplate: function editTemplate(value, item) {\n      this._value = value;\n      return this.itemTemplate(value, item);\n    },\n\n    filterValue: function filterValue() {\n      return \"\";\n    },\n\n    insertValue: function insertValue() {\n      return \"\";\n    },\n\n    editValue: function editValue() {\n      return this._value;\n    },\n\n    _getSortingFunc: function _getSortingFunc() {\n      var sorter = this.sorter;\n\n      if ($.isFunction(sorter)) {\n        return sorter;\n      }\n\n      if (typeof sorter === \"string\") {\n        return jsGrid.sortStrategies[sorter];\n      }\n\n      throw Error(\"wrong sorter for the field \\\"\" + this.name + \"\\\"!\");\n    } };\n\n\n  jsGrid.Field = Field;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var Field = jsGrid.Field;\n\n  function TextField(config) {\n    Field.call(this, config);\n  }\n\n  TextField.prototype = new Field({\n\n    autosearch: true,\n    readOnly: false,\n\n    filterTemplate: function filterTemplate() {\n      if (!this.filtering)\n      return \"\";\n\n      var grid = this._grid,\n      $result = this.filterControl = this._createTextBox();\n\n      if (this.autosearch) {\n        $result.on(\"keypress\", function (e) {\n          if (e.which === 13) {\n            grid.search();\n            e.preventDefault();\n          }\n        });\n      }\n\n      return $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createTextBox();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createTextBox();\n      $result.val(value);\n      return $result;\n    },\n\n    filterValue: function filterValue() {\n      return this.filterControl.val();\n    },\n\n    insertValue: function insertValue() {\n      return this.insertControl.val();\n    },\n\n    editValue: function editValue() {\n      return this.editControl.val();\n    },\n\n    _createTextBox: function _createTextBox() {\n      return $(\"<input>\").attr(\"type\", \"text\").\n      prop(\"readonly\", !!this.readOnly);\n    } });\n\n\n  jsGrid.fields.text = jsGrid.TextField = TextField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var TextField = jsGrid.TextField;\n\n  function NumberField(config) {\n    TextField.call(this, config);\n  }\n\n  NumberField.prototype = new TextField({\n\n    sorter: \"number\",\n    align: \"right\",\n    readOnly: false,\n\n    filterValue: function filterValue() {\n      return parseInt(this.filterControl.val() || 0, 10);\n    },\n\n    insertValue: function insertValue() {\n      return parseInt(this.insertControl.val() || 0, 10);\n    },\n\n    editValue: function editValue() {\n      return parseInt(this.editControl.val() || 0, 10);\n    },\n\n    _createTextBox: function _createTextBox() {\n      return $(\"<input>\").attr(\"type\", \"number\").\n      prop(\"readonly\", !!this.readOnly);\n    } });\n\n\n  jsGrid.fields.number = jsGrid.NumberField = NumberField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var TextField = jsGrid.TextField;\n\n  function TextAreaField(config) {\n    TextField.call(this, config);\n  }\n\n  TextAreaField.prototype = new TextField({\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createTextArea();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createTextArea();\n      $result.val(value);\n      return $result;\n    },\n\n    _createTextArea: function _createTextArea() {\n      return $(\"<textarea>\").prop(\"readonly\", !!this.readOnly);\n    } });\n\n\n  jsGrid.fields.textarea = jsGrid.TextAreaField = TextAreaField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var NumberField = jsGrid.NumberField;\n  var numberValueType = \"number\";\n  var stringValueType = \"string\";\n\n  function SelectField(config) {\n    this.items = [];\n    this.selectedIndex = -1;\n    this.valueField = \"\";\n    this.textField = \"\";\n\n    if (config.valueField && config.items.length) {\n      var firstItemValue = config.items[0][config.valueField];\n      this.valueType = _typeof(firstItemValue) === numberValueType ? numberValueType : stringValueType;\n    }\n\n    this.sorter = this.valueType;\n\n    NumberField.call(this, config);\n  }\n\n  SelectField.prototype = new NumberField({\n\n    align: \"center\",\n    valueType: numberValueType,\n\n    itemTemplate: function itemTemplate(value) {\n      var items = this.items,\n      valueField = this.valueField,\n      textField = this.textField,\n      resultItem;\n\n      if (valueField) {\n        resultItem = $.grep(items, function (item, index) {\n          return item[valueField] === value;\n        })[0] || {};\n      } else\n      {\n        resultItem = items[value];\n      }\n\n      var result = textField ? resultItem[textField] : resultItem;\n\n      return result === undefined || result === null ? \"\" : result;\n    },\n\n    filterTemplate: function filterTemplate() {\n      if (!this.filtering)\n      return \"\";\n\n      var grid = this._grid,\n      $result = this.filterControl = this._createSelect();\n\n      if (this.autosearch) {\n        $result.on(\"change\", function (e) {\n          grid.search();\n        });\n      }\n\n      return $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createSelect();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createSelect();\n      value !== undefined && $result.val(value);\n      return $result;\n    },\n\n    filterValue: function filterValue() {\n      var val = this.filterControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n\n    insertValue: function insertValue() {\n      var val = this.insertControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n\n    editValue: function editValue() {\n      var val = this.editControl.val();\n      return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n    },\n\n    _createSelect: function _createSelect() {\n      var $result = $(\"<select>\"),\n      valueField = this.valueField,\n      textField = this.textField,\n      selectedIndex = this.selectedIndex;\n\n      $.each(this.items, function (index, item) {\n        var value = valueField ? item[valueField] : index,\n        text = textField ? item[textField] : item;\n\n        var $option = $(\"<option>\").\n        attr(\"value\", value).\n        text(text).\n        appendTo($result);\n\n        $option.prop(\"selected\", selectedIndex === index);\n      });\n\n      $result.prop(\"disabled\", !!this.readOnly);\n\n      return $result;\n    } });\n\n\n  jsGrid.fields.select = jsGrid.SelectField = SelectField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var Field = jsGrid.Field;\n\n  function CheckboxField(config) {\n    Field.call(this, config);\n  }\n\n  CheckboxField.prototype = new Field({\n\n    sorter: \"number\",\n    align: \"center\",\n    autosearch: true,\n\n    itemTemplate: function itemTemplate(value) {\n      return this._createCheckbox().prop({\n        checked: value,\n        disabled: true });\n\n    },\n\n    filterTemplate: function filterTemplate() {\n      if (!this.filtering)\n      return \"\";\n\n      var grid = this._grid,\n      $result = this.filterControl = this._createCheckbox();\n\n      $result.prop({\n        readOnly: true,\n        indeterminate: true });\n\n\n      $result.on(\"click\", function () {\n        var $cb = $(this);\n\n        if ($cb.prop(\"readOnly\")) {\n          $cb.prop({\n            checked: false,\n            readOnly: false });\n\n        } else\n        if (!$cb.prop(\"checked\")) {\n          $cb.prop({\n            readOnly: true,\n            indeterminate: true });\n\n        }\n      });\n\n      if (this.autosearch) {\n        $result.on(\"click\", function () {\n          grid.search();\n        });\n      }\n\n      return $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      if (!this.inserting)\n      return \"\";\n\n      return this.insertControl = this._createCheckbox();\n    },\n\n    editTemplate: function editTemplate(value) {\n      if (!this.editing)\n      return this.itemTemplate(value);\n\n      var $result = this.editControl = this._createCheckbox();\n      $result.prop(\"checked\", value);\n      return $result;\n    },\n\n    filterValue: function filterValue() {\n      return this.filterControl.get(0).indeterminate ?\n      undefined :\n      this.filterControl.is(\":checked\");\n    },\n\n    insertValue: function insertValue() {\n      return this.insertControl.is(\":checked\");\n    },\n\n    editValue: function editValue() {\n      return this.editControl.is(\":checked\");\n    },\n\n    _createCheckbox: function _createCheckbox() {\n      return $(\"<input>\").attr(\"type\", \"checkbox\");\n    } });\n\n\n  jsGrid.fields.checkbox = jsGrid.CheckboxField = CheckboxField;\n\n})(jsGrid, jQuery);\n\n(function (jsGrid, $, undefined) {\n\n  var Field = jsGrid.Field;\n\n  function ControlField(config) {\n    Field.call(this, config);\n    this._configInitialized = false;\n  }\n\n  ControlField.prototype = new Field({\n    css: \"jsgrid-control-field\",\n    align: \"center\",\n    width: 50,\n    filtering: false,\n    inserting: false,\n    editing: false,\n    sorting: false,\n\n    buttonClass: \"jsgrid-button\",\n    modeButtonClass: \"jsgrid-mode-button\",\n\n    modeOnButtonClass: \"jsgrid-mode-on-button\",\n    searchModeButtonClass: \"jsgrid-search-mode-button\",\n    insertModeButtonClass: \"jsgrid-insert-mode-button\",\n    editButtonClass: \"jsgrid-edit-button\",\n    deleteButtonClass: \"jsgrid-delete-button\",\n    searchButtonClass: \"jsgrid-search-button\",\n    clearFilterButtonClass: \"jsgrid-clear-filter-button\",\n    insertButtonClass: \"jsgrid-insert-button\",\n    updateButtonClass: \"jsgrid-update-button\",\n    cancelEditButtonClass: \"jsgrid-cancel-edit-button\",\n\n    searchModeButtonTooltip: \"Switch to searching\",\n    insertModeButtonTooltip: \"Switch to inserting\",\n    editButtonTooltip: \"Edit\",\n    deleteButtonTooltip: \"Delete\",\n    searchButtonTooltip: \"Search\",\n    clearFilterButtonTooltip: \"Clear filter\",\n    insertButtonTooltip: \"Insert\",\n    updateButtonTooltip: \"Update\",\n    cancelEditButtonTooltip: \"Cancel edit\",\n\n    editButton: true,\n    deleteButton: true,\n    clearFilterButton: true,\n    modeSwitchButton: true,\n\n    _initConfig: function _initConfig() {\n      this._hasFiltering = this._grid.filtering;\n      this._hasInserting = this._grid.inserting;\n\n      if (this._hasInserting && this.modeSwitchButton) {\n        this._grid.inserting = false;\n      }\n\n      this._configInitialized = true;\n    },\n\n    headerTemplate: function headerTemplate() {\n      if (!this._configInitialized) {\n        this._initConfig();\n      }\n\n      var hasFiltering = this._hasFiltering;\n      var hasInserting = this._hasInserting;\n\n      if (!this.modeSwitchButton || !hasFiltering && !hasInserting)\n      return \"\";\n\n      if (hasFiltering && !hasInserting)\n      return this._createFilterSwitchButton();\n\n      if (hasInserting && !hasFiltering)\n      return this._createInsertSwitchButton();\n\n      return this._createModeSwitchButton();\n    },\n\n    itemTemplate: function itemTemplate(value, item) {\n      var $result = $([]);\n\n      if (this.editButton) {\n        $result = $result.add(this._createEditButton(item));\n      }\n\n      if (this.deleteButton) {\n        $result = $result.add(this._createDeleteButton(item));\n      }\n\n      return $result;\n    },\n\n    filterTemplate: function filterTemplate() {\n      var $result = this._createSearchButton();\n      return this.clearFilterButton ? $result.add(this._createClearFilterButton()) : $result;\n    },\n\n    insertTemplate: function insertTemplate() {\n      return this._createInsertButton();\n    },\n\n    editTemplate: function editTemplate() {\n      return this._createUpdateButton().add(this._createCancelEditButton());\n    },\n\n    _createFilterSwitchButton: function _createFilterSwitchButton() {\n      return this._createOnOffSwitchButton(\"filtering\", this.searchModeButtonClass, true);\n    },\n\n    _createInsertSwitchButton: function _createInsertSwitchButton() {\n      return this._createOnOffSwitchButton(\"inserting\", this.insertModeButtonClass, false);\n    },\n\n    _createOnOffSwitchButton: function _createOnOffSwitchButton(option, cssClass, isOnInitially) {\n      var isOn = isOnInitially;\n\n      var updateButtonState = $.proxy(function () {\n        $button.toggleClass(this.modeOnButtonClass, isOn);\n      }, this);\n\n      var $button = this._createGridButton(this.modeButtonClass + \" \" + cssClass, \"\", function (grid) {\n        isOn = !isOn;\n        grid.option(option, isOn);\n        updateButtonState();\n      });\n\n      updateButtonState();\n\n      return $button;\n    },\n\n    _createModeSwitchButton: function _createModeSwitchButton() {\n      var isInserting = false;\n\n      var updateButtonState = $.proxy(function () {\n        $button.attr(\"title\", isInserting ? this.searchModeButtonTooltip : this.insertModeButtonTooltip).\n        toggleClass(this.insertModeButtonClass, !isInserting).\n        toggleClass(this.searchModeButtonClass, isInserting);\n      }, this);\n\n      var $button = this._createGridButton(this.modeButtonClass, \"\", function (grid) {\n        isInserting = !isInserting;\n        grid.option(\"inserting\", isInserting);\n        grid.option(\"filtering\", !isInserting);\n        updateButtonState();\n      });\n\n      updateButtonState();\n\n      return $button;\n    },\n\n    _createEditButton: function _createEditButton(item) {\n      return this._createGridButton(this.editButtonClass, this.editButtonTooltip, function (grid, e) {\n        grid.editItem(item);\n        e.stopPropagation();\n      });\n    },\n\n    _createDeleteButton: function _createDeleteButton(item) {\n      return this._createGridButton(this.deleteButtonClass, this.deleteButtonTooltip, function (grid, e) {\n        grid.deleteItem(item);\n        e.stopPropagation();\n      });\n    },\n\n    _createSearchButton: function _createSearchButton() {\n      return this._createGridButton(this.searchButtonClass, this.searchButtonTooltip, function (grid) {\n        grid.search();\n      });\n    },\n\n    _createClearFilterButton: function _createClearFilterButton() {\n      return this._createGridButton(this.clearFilterButtonClass, this.clearFilterButtonTooltip, function (grid) {\n        grid.clearFilter();\n      });\n    },\n\n    _createInsertButton: function _createInsertButton() {\n      return this._createGridButton(this.insertButtonClass, this.insertButtonTooltip, function (grid) {\n        grid.insertItem().done(function () {\n          grid.clearInsert();\n        });\n      });\n    },\n\n    _createUpdateButton: function _createUpdateButton() {\n      return this._createGridButton(this.updateButtonClass, this.updateButtonTooltip, function (grid, e) {\n        grid.updateItem();\n        e.stopPropagation();\n      });\n    },\n\n    _createCancelEditButton: function _createCancelEditButton() {\n      return this._createGridButton(this.cancelEditButtonClass, this.cancelEditButtonTooltip, function (grid, e) {\n        grid.cancelEdit();\n        e.stopPropagation();\n      });\n    },\n\n    _createGridButton: function _createGridButton(cls, tooltip, clickHandler) {\n      var grid = this._grid;\n\n      return $(\"<input>\").addClass(this.buttonClass).\n      addClass(cls).\n      attr({\n        type: \"button\",\n        title: tooltip }).\n\n      on(\"click\", function (e) {\n        clickHandler(grid, e);\n      });\n    },\n\n    editValue: function editValue() {\n      return \"\";\n    } });\n\n\n\n  jsGrid.fields.control = jsGrid.ControlField = ControlField;\n\n})(jsGrid, jQuery);","/*\r\n *   Name: BizAgi Workportal Desktop my search search lists Widget Controller\r\n *   Author: Andres Fernando Munoz\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the my search search lists widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.mySearchList.extend(\"bizagi.workportal.widgets.mySearchList\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"mySearchListWrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mySearchList\").concat(\"#ui-bizagi-workportal-widget-mysearchlist-searchlists-wrapper\"),\n      \"mySearchList\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mySearchList\").concat(\"#ui-bizagi-workportal-widget-mysearchlist-searchlists\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.loadtemplates();\n    self.renderSearchLists();\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n\n    self.mySearchListTmpl = self.getTemplate(\"mySearchList\");\n  },\n\n  renderSearchLists: function renderSearchLists() {\n    var self = this;\n    var content = self.getContent();\n\n    $.when(self.dataService.getSearchLists()).done(function (data) {\n      var searchLists = data;\n      var $searchLists = $.tmpl(self.mySearchListTmpl, { searchLists: searchLists });\n\n      content.append($searchLists);\n      self.configureHandlers();\n    });\n  },\n\n  closeModal: function closeModal() {\n    var self = this;\n    var modal = $(self.content).closest('.modal');\n\n    modal.hide();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\".ui-bizagi-wp-widget-my-search-list-item\", content).on('click', $.proxy(self.onListItemClick, self));\n    $(\"#menuQuery\").keypress(function () {//Hides the widget when the user types something\n      self.closeModal();\n    });\n  },\n\n  onListItemClick: function onListItemClick(ev) {\n    var self = this;\n    self.closeModal(); //Hides the widget when the user selects any item on the list\n    var $target = $(ev.currentTarget);\n    var guidform = $target.data(\"guidform\");\n    var id = $target.data(\"id\");\n    var displayname = $target.data(\"displayname\");\n    var guidEntity = $target.data(\"guidentity\");\n\n    var publishParams = {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM,\n      summaryDecorator: false,\n      guidForm: guidform,\n      displayname: displayname,\n      guidEntity: guidEntity,\n      closeVisible: false,\n      buttons: [\n      {\n        text: bizagi.localization.getResource('workportal-menu-search'),\n        click: function click(e) {\n          var that = this;\n          var widget = $(this).dialog(\"option\", \"widget\");\n          var form = widget.form || {};\n\n          if (Object.keys(form).length !== 0) {\n\n            if (form && form.validateForm()) {\n              var renderValues = [];\n              $.forceCollectData = true;\n              form.collectRenderValuesQueryForm(renderValues);\n              $.forceCollectData = false;\n\n              var filterObject = [];\n              var metadataFilters = [];\n\n              $.each(renderValues, function (i, item) {\n                if (typeof item.value !== 'function') {\n                  var controls = form.getRenders(item.xpath);\n                  var control = self.getFilterControl(controls, item);\n\n                  var newValue = control.value;\n                  var searchType = control.properties.rangeQuery;\n                  if (item && item.advancedQuery) {\n                    newValue = item.value;\n                    searchType = item.searchType || control.properties.rangeQuery || \"NONE\";\n                  }\n\n                  self.dataService.defineFilterObject({\n                    properties: control.properties,\n                    value: newValue },\n                  filterObject, function (filter) {\n                    metadataFilters.push($.extend(filter, {\n                      id: control.properties.id,\n                      rangeQuery: searchType,\n                      displayValue: control.getDisplayValue(),\n                      displayName: control.properties.displayName,\n                      editable: !!control.properties.editable }));\n\n                  });\n                }\n              });\n\n              self.performQuery({ guidSearch: id, guidForm: guidform, guidEntity: guidEntity, displayname: displayname, metadataFilters: metadataFilters, filters: filterObject, page: 1, pageSize: 10, calculateFilters: true, histName: displayname, onlyLocalResults: true });\n              self.cleanContext();\n              $(that).dialog('close');\n            }\n\n          }\n        } },\n\n      {\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click() {\n          $(this).dialog('close');\n        } }],\n\n\n      modalParameters: {\n        title: displayname } };\n\n\n\n    self.publish(\"showDialogWidget\", publishParams);\n    self.publish(\"onWidgetIncludedInDOM\");\n  },\n\n  performQuery: function performQuery(params) {\n    var self = this;\n    var dataParams = {\n      \"type\": \"SEARCH-ENGINE-VIEW\",\n      \"args\": params };\n\n\n    $.when(self.publish(\"changeWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL })).\n    done(function () {\n      var homeportalInstance = bizagi.injector.get('homeportal');\n      var widgetManager = bizagi.injector.get('widgetManager');\n      widgetManager._context = \"home\";\n\n      $.when(homeportalInstance.isReady()).done(function () {\n        homeportalInstance.pub(\"notify\", dataParams);\n      });\n    });\n  },\n\n  getFilterControl: function getFilterControl(controls, itemFilter) {\n    if (controls.length === 1) {\n      return controls[0];\n    } else {\n      var searchTypeFilter = itemFilter.searchType.toUpperCase();\n\n      for (var index = 0; index < controls.length; index++) {\n        var properties = controls[index].properties;\n        var searchType = properties.typeSearch || properties.rangeQuery || \"NONE\";\n        searchType = searchType.toUpperCase();\n\n        if (searchType === searchTypeFilter && !bizagi.util.isEmpty(controls[index].value)) {\n          return controls[index];\n        }\n      }\n\n    }\n  },\n  /**\r\n      * Initialize the context each time a search is done\r\n      */\n  cleanContext: function cleanContext() {\n    var context = bizagi.injector.get(\"accumulatedcontext\");\n    context.clean();\n  } });","/**\r\n *\r\n */\nbizagi.workportal.widgets.loadForm.extend(\"bizagi.workportal.widgets.loadForm\", {\n  postRender: function postRender() {\n    var self = this;\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop Integration old render within new look and feel\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script define base controller to integrate old render within new workportal\r\n */\n\n// Extends itself\nbizagi.workportal.widgets.oldrenderintegration.extend(\"bizagi.workportal.widgets.oldrenderintegration\", {}, {\n  /*\r\n                                                                                                              *   Constructor\r\n                                                                                                              */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    this._super(workportalFacade, dataService, params);\n\n    // Declare widget variables\n    self.taskState = \"all\"; // general taskState from tabs\n    self.icoTaskState = \"\"; // real staskState from list cases\n    self.idWorkflow = 0;\n    self.idCase = 0;\n\n    //Load templates\n    self.loadTemplates({\n      \"integration-old-render\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.oldrenderintegration\").concat(\"#ui-bizagi-workportal-widget-oldrender\"),\n      useNewEngine: false });\n\n  },\n  /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this,\n    content = self.getContent();\n\n    if (self.params.restoreStatus) {\n      bizagi.referrerParams = bizagi.referrerParams || {};\n    } else {\n      bizagi.referrerParams = bizagi.referrerParams ? { page: bizagi.referrerParams.page } : {};\n    }\n\n    self.params.taskState = self.params.taskState || bizagi.referrerParams.taskState || \"all\";\n\n\n    // Bind navigation bar\n    // Set idcase data\n    $(\".back\", content).data(\"idCase\", self.getBackCase());\n    $(\".next\", content).data(\"idCase\", self.getNextCase());\n\n    // Bind for click event on back and bext botton\n    $(\".back, .next\", content).click(function () {\n      var idCase = $(this).data(\"idCase\");\n      if (idCase > 0) {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: idCase });\n\n      }\n    });\n\n    // Bind for click event on refresh botton\n    $(\".refresh\", content).click(function () {\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: self.params.idCase,\n        idTask: self.params.idTask,\n        idWorkItem: self.params.idWorkitem,\n        referrer: self.params.referrer || \"inboxGrid\" });\n\n    });\n\n    // Bind for click event on return botton\n    $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox > h2\", content).click(function () {\n      var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\n      // switch referer widget\n      switch (widget) {\n        case \"inbox\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"inboxGrid\":\n          self.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          break;\n        case \"search\":\n          self.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          break;\n        case \"queryform\":\n          self.publish(\"showDialogWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: \"loadPrevious\" });\n\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(self.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n\n            self.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        default:\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n            restoreStatus: true });\n\n          break;}\n\n    });\n\n    // Bind for hover event on refresh and return botton\n    $(\".refresh,.return\", content).hover(function () {\n      $(this).addClass(\"active\");\n    }, function () {\n      $(this).removeClass(\"active\");\n    });\n\n    // Bind for hover event on next and back botton\n    $(\".next,.back\", content).hover(\n    function () {\n      if ($(this).data(\"idCase\") > 0) {\n        $(this).addClass(\"active\");\n      }\n    },\n    function () {\n      $(this).removeClass(\"active\");\n    });\n\n\n    // Insert iframe with old render\n    self.insertIframeOldRender();\n  },\n  getInjectJavaScript: function getInjectJavaScript(params) {\n\n    var args = {};\n    var callback = function callback(args) {\n      this.changeToWidget = function (widget) {\n        args.controller.publish(\"changeWidget\", {\n          widgetName: args.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID });\n\n      };\n\n      this.openBACase = function (idCase, sHref) {\n        var workitem = null;\n        if (sHref.indexOf(\"idWorkitem=\") > -1) {\n          workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n          workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n        }\n        // Executes the act on\n        args.controller.publish(\"executeAction\", {\n          action: args.routingAction,\n          idCase: idCase,\n          idWorkItem: workitem });\n\n\n        // close dialog\n        params.controller.publish(\"closeCurrentDialog\");\n      };\n    };\n\n\n    return {\n      callback: callback,\n      args: {\n        routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        bizagi: bizagi } };\n\n\n\n  },\n  insertIframeOldRender: function insertIframeOldRender() {\n    var self = this;\n    var content = self.getContent();\n    var iframe;\n    var theme = \"bizagiDefault\";\n    var queryString = bizagi.readQueryString();\n\n    $.each(content, function () {\n      if ($(this).is(\"iframe\")) {\n        iframe = $(this);\n      }\n    });\n\n    iframe.load(function () {\n      // inject css\n      var content = $(this).contents();\n      var getInjectJS = self.getInjectJavaScript();\n\n      // Fixed problem with relative path across the different browsers\n      var cssLocation = $.browser.mozilla || $.browser.webkit ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\n\n      // Define theme\n      cssLocation = cssLocation.replace(\"%theme%\", queryString[\"theme\"] || theme);\n\n      // Append css\n      $('head', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\n\n      iframe.callInside(\n      getInjectJS.callback,\n      $.extend(getInjectJS.args, {\n        controller: self }));\n\n\n\n      content.bind('click', function () {\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      });\n\n      // Append javascript\n      $('head', content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\n\n      // Hack position fixed for IE8 in quirks mode\n      /*if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {\r\n          var fixWizard = '<!--[if lte IE 8]> <style type=\"text/css\"> #floater1Div { position: absolute; bottom: auto; right: auto; top: expression( ( -10 - floater1Div.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + \"px\" ); left: expression( ( -20 - floater1Div.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + \"px\" ); } #divClose { bottom: -3px; left: 0; } </style> <![endif]--><!--[if lte IE 7]> <link href=\"../../css/estilos.css\" type=\"text/css\" rel=\"stylesheet\" /> <![endif]-->';\r\n          $('head', content).append(fixWizard);\r\n      }*/\n\n      // Remove all the old elements than doesn't look well\n      var $oldElements = $('body img[src*=\"Button.gif\"], body td[style*=\"CellShadow.gif\"], body img[src*=\"tab_active\"], body img[src*=\"tab_inactive\"]', content);\n\n      // Remove elements\n      $oldElements.parent().remove();\n\n      // Fix scroll bug in FF\n      iframe.css('overflow-y', 'auto');\n\n    });\n  },\n  /*\r\n     *  Navigation options\r\n     */\n  getListKey: function getListKey() {\n    var self = this;\n    bizagi.lstIdCases = bizagi.lstIdCases || {};\n    if (bizagi.lstIdCases.length > 1) {\n      for (var i = 0; i < bizagi.lstIdCases.length; i++) {\n        if (self.params.idCase == bizagi.lstIdCases[i]) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  },\n  getNextCase: function getNextCase() {\n    var self = this;\n    var nextIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if last element\n    if (bizagi.lstIdCases.length == key + 1 || bizagi.lstIdCases.length == 1) {\n      nextIdCase = -1;\n    } else {\n      nextIdCase = bizagi.lstIdCases[key + 1];\n    }\n\n    return nextIdCase;\n  },\n  getBackCase: function getBackCase() {\n    var self = this;\n    var prevIdCase = 0;\n    var key = self.getListKey();\n\n    // Check if first element\n    if (key == 0) {\n      prevIdCase = -1;\n    } else {\n      prevIdCase = bizagi.lstIdCases[key - 1];\n    }\n\n    return prevIdCase;\n  } });","/**\r\n *   Name: Bizagi Workportal Desktop Create Case Controller\r\n *   Author: Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.createcase\", {}, {\n  /**\r\n                                                                                       *   Constructor\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Private fields\n    self._processId = params.idObject;\n    self._mapping = params.mapping || [];\n    self._idParentCase = params.idParentCase;\n    self._mappingstakeholders = params.mappingstakeholders;\n    self._guidprocess = params.guidprocess;\n\n    //Load templates\n    self.loadTemplates({\n      \"createcase\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.createcase\").concat(\"#createcase-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"createcase\");\n    self.content = template.render();\n\n    return self.content;\n  },\n\n  /**\r\n      * Process widget\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    defer = new $.Deferred(),\n    $content = self.getContent();\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      $.when(self.dataService.getStartForm(self._getServiceParams())).then(function (data) {\n        return self._getRenderingFacade().execute({ canvas: self._getCanvasForm(), data: data, type: \"\" });\n      }).done(function (form) {\n        self.startForm = form;\n        $content.find('#createcase-content').append(form.container);\n        defer.resolve($content);\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns an instance of rendering facade\r\n      */\n  _getRenderingFacade: function _getRenderingFacade() {\n    var self = this;\n\n    if (!self._rendering) {\n      self._rendering = new bizagi.rendering.facade({ \"proxyPrefix\": bizagi.RPproxyPrefix, \"database\": \"\" });\n    }\n\n    return self._rendering;\n  },\n\n  /**\r\n      * Returns an object with the parameters available to gets the start form\r\n      */\n  _getServiceParams: function _getServiceParams() {\n    var self = this,\n    params = self.getMapping();\n\n    params[\"h_action\"] = \"LOADSTARTFORM\";\n\n    if (self._idParentCase) {\n      params[\"h_idParentCase\"] = self._idParentCase;\n    }\n    if (self._mappingstakeholders) {\n      params[\"h_mappingstakeholders\"] = self._mappingstakeholders;\n    }\n    if (self._guidprocess) {\n      params[\"h_guidprocess\"] = self._guidprocess;\n    } else\n    {\n      params[\"h_idProcess\"] = self._processId;\n    }\n    return params;\n  },\n\n  /**\r\n      * Builds the mapping to send at LOADSTARTFORM action\r\n      */\n  getMapping: function getMapping() {\n    var self = this,\n    params = {};\n\n    for (var i = 0, l = self._mapping.length; i < l; i++) {\n      var map = self._mapping[i];\n      if (map.surrogateKey) {\n        params[map.xpath] = JSON.stringify(map.surrogateKey);\n      }\n    }\n\n    return params;\n  },\n\n  /**\r\n      * returns the canvas used renderize the start form, also the\r\n      * routing event is attach al canvas.\r\n      * after the case is created succesfully, the form trigger the routing event\r\n      */\n  _getCanvasForm: function _getCanvasForm() {\n    var self = this,\n    $content = self.getContent();\n    var $canvas = $content.find('#createcase-content');\n\n    // When the case is created, rendering module trigger the routing event\n    $canvas.on('routing', $.proxy(self.onCaseCreated, self));\n    return $canvas;\n  },\n\n  /**\r\n      * This handler is called when the create button is clicked in\r\n      * the start form\r\n      */\n  onCaseCreated: function onCaseCreated(ev, params) {\n    var self = this;\n    self.pub('closeDialog', params);\n  },\n\n  /**\r\n      * Dispose widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    if (self.startForm) {\n      self.pub('createCaseDisposed');\n      self.startForm.dispose();\n    }\n    // Call base\n    self._super();\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.createcase', ['workportalFacade', 'dataService', bizagi.workportal.widgets.createcase], true);","/**\r\n * Name: Bizagi Workportal Desktop Update Form Controller\r\n * Author: Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.updateform\", {}, {\n  /**\r\n                                                                                       *   Constructor\r\n                                                                                       */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    // Private fields\n    self._guidForm = params.guidForm;\n    self._entityGuid = params.entityGuid;\n    self._surrogateKey = params.surrogateKey;\n    self._mapping = params.mapping;\n    self._readonlyform = params.readonlyform;\n    //Load templates\n    self.loadTemplates({\n      \"updateform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.updateform\").concat(\"#updateform-wrapper\"),\n      \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.updateform\").concat(\"#form-content\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"updateform\");\n    self.content = template.render();\n\n    return self.content;\n  },\n\n  /**\r\n      * Process widget\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    defer = new $.Deferred(),\n    $content = self.getContent();\n\n    self.dataService.getEntityForm(self._getServiceParams()).then(function (data) {\n      return self._getRenderingFacade().execute({ canvas: $content.find('#updateform-content'), data: data, type: \"\" });\n    }).done(function (form) {\n      $content.find('#updateform-content').append(form.container);\n      defer.resolve($content);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns an instance of rendering facade\r\n      * */\n  _getRenderingFacade: function _getRenderingFacade() {\n    var self = this;\n\n    if (!self._rendering) {\n      self._rendering = new bizagi.rendering.facade({ \"proxyPrefix\": bizagi.RPproxyPrefix, \"database\": \"\" });\n    }\n    self._rendering.subscribe('rendering-formRendered', $.proxy(self._overrideHandlers, self));\n\n    return self._rendering;\n  },\n\n  /**\r\n      * Returns an object with the parameters available to gets the start form\r\n      * */\n  _getServiceParams: function _getServiceParams() {\n    var self = this,\n    params = {};\n\n    params[\"h_action\"] = \"LOADENTITYFORM\";\n    params[\"h_contexttype\"] = \"entity\";\n    params[\"h_guidForm\"] = self._guidForm;\n    params[\"h_showDisabled\"] = false;\n    params[\"h_guidEntity\"] = self._entityGuid;\n    params[\"h_readonlyform\"] = self._readonlyform;\n\n    if (self._mapping) {\n      params[\"h_mapping\"] = JSON.stringify(self._mapping);\n    }\n\n    if (self._surrogateKey) {\n      params[\"h_surrogateKey\"] = self._surrogateKey;\n    }\n\n    return params;\n  },\n\n  /**\r\n      * returns the canvas used renderize the start form, also the\r\n      * routing event is attach al canvas.\r\n      * after the case is created succesfully, the form trigger the routing event\r\n      */\n  _getCanvasForm: function _getCanvasForm() {\n    var self = this;\n    var formTemplate = self.getTemplate('content');\n\n    return formTemplate.render();\n  },\n\n  /**\r\n      *\r\n      * @private\r\n      */\n  _overrideHandlers: function _overrideHandlers() {\n    var self = this,\n    form = typeof self._rendering === \"undefined\" ? null : self._rendering.form;\n\n    if (form) {\n      self.idPageCache = self.idPageCache || form.idPageCache;\n      var properties = form.properties;\n      var originalProcessButton = form.processButton;\n\n      form.processButton = function (buttonProperties) {\n        var action = buttonProperties.action;\n\n        if (action == \"cancel\") {\n          form.endLoading();\n          self.pub('closeDialog', { refresh: false });\n          form.dispose();\n        } else\n        {\n          properties.surrogateKey = self._surrogateKey;\n          properties.contextType = \"entity\";\n\n          form.bind('refresh', function () {\n            form.endLoading();\n            self.pub('closeDialog', { refresh: true });\n            form.dispose();\n          });\n\n          return originalProcessButton.apply(form, arguments);\n        }\n      };\n\n    }\n  },\n\n  /**\r\n      * Dispose\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    if (self._rendering && self._rendering.form) {\n      self._rendering.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  } });\n\nbizagi.injector.register('bizagi.workportal.widgets.updateform', ['workportalFacade', 'dataService', bizagi.workportal.widgets.updateform], true);","/**\r\n * This widget show information of entities using Template engine\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.templates\", {}, {\n  /**\r\n                                                                                      * Constructor\r\n                                                                                      * @param workportalFacade\r\n                                                                                      * @param dataService\r\n                                                                                      * @param actionService\r\n                                                                                      * @param accumulatedcontext\r\n                                                                                      * @param processActionService\r\n                                                                                      * @param params\r\n                                                                                      * @param casetoolbar\r\n                                                                                      * @param usersCasesService\r\n                                                                                      * @param actionsEventsService\r\n                                                                                      */\n  init: function init(workportalFacade, dataService, actionService, casetoolbar, usersCasesService, actionsEventsService, accumulatedcontext, processActionService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"templateEngine\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper\"),\n      \"templateEngineElement\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper-element\"),\n      \"templateEngineTooltip\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper-tooltip\"),\n      \"templateEmptyData\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-empty-message\") });\n\n\n    //Private fields\n    self.selectorCheckboxItems = \".template-box-header input:checkbox\";\n    self.actionService = actionService;\n    self.casetoolbar = casetoolbar;\n    self.usersCasesService = usersCasesService;\n    self.actionsEventsService = actionsEventsService;\n    self.processActionService = processActionService;\n    self.accumulatedcontext = accumulatedcontext;\n    self._currentPage = 1;\n    self.entitiesSelected = {};\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"templateEngine\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.configureHandlers();\n  },\n\n  /**\r\n      * configure Handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var $content = self.getContent();\n\n    $content.find(\"#template-dataviewer-list\").on(\"click\", self.selectorCheckboxItems, $.proxy(self.onEntityChecked, self));\n\n    self.sub(\"GET-COMMON-ACTIONS\", $.proxy(self.getCommonActions, self));\n\n    self.sub(\"TEMPLATEENGINE-VIEW\", function (ev, params) {\n      self.params.event = \"TEMPLATEENGINE-VIEW\";\n      return self.updateData(params);\n    });\n\n    self.sub(\"SEARCH-ENGINE-VIEW\", function (ev, params) {\n      self.params.event = \"SEARCH-ENGINE-VIEW\";\n      return self.updateData(params);\n    });\n\n    self.sub(\"UPDATE-DATATEMPLATE-VIEW\", function (ev, params) {\n      return self.updateData(params);\n    });\n\n    self.sub(\"SET-VALUES\", function (ev, params) {\n      return self.setValues(params);\n    });\n\n    self.actionService.subscribe(\"onFormActionExecuted\", $.proxy(self.onFormActionExecuted, self));\n    self.processActionService.subscribe(\"onFormRuleExecuted\", $.proxy(self.onFormRuleExecuted, self));\n    self.processActionService.subscribe(\"onFormExecuted\", $.proxy(self.onFormExecuted, self));\n  },\n\n  /**\r\n      * Gets entity data and inject it in the defined template\r\n      * @param params\r\n      * @return {*}\r\n      */\n  updateData: function updateData(params) {\n    var self = this;\n    var args = params.args || {};\n    var defer = new $.Deferred();\n\n    // Clean the displayed data before getting the new one\n    var $dataViewList = $(\"#template-dataviewer-list\", self.getContent());\n    $dataViewList.empty();\n\n    self.actionService.init();\n    self.entitiesSelected = {};\n\n    self._referrer = args.guidSearch ? \"search\" : args.referenceType ? \"dataNavigation\" : self._referrer;\n    self._page = args.page || self._page;\n    self._totalRecords = args.totalRecords;\n    self._filters = args.filters || self._filters;\n    self._defaultFilterApplied = typeof args.defaultFilterApplied !== \"undefined\" ? args.defaultFilterApplied : typeof self._defaultFilterApplied !== \"undefined\" ? self._defaultFilterApplied : true;\n    self._guidSearch = args.guidSearch || self._guidSearch;\n    self._fromActionLauncher = typeof args.fromActionLauncher !== \"undefined\" ? args.fromActionLauncher : self._fromActionLauncher;\n    self._reference = args.reference || self._reference || \"\";\n    self._surrogateKey = args.surrogateKey || self._surrogateKey;\n    self._referenceType = args.referenceType || self._referenceType;\n    self._xpath = args.xpath || self._xpath;\n    self._guidEntityCurrent = args.guidEntityCurrent || self._guidEntityCurrent;\n    self._pageSize = args.pageSize || self._pageSize;\n    self._onlyLocalResults = args.onlyLocalResults || self._onlyLocalResults;\n\n    // Get entity data\n    var entityDataParams = {\n      guidSearch: self._guidSearch,\n      fromActionLauncher: self._fromActionLauncher,\n      reference: self._reference,\n      surrogateKey: self._surrogateKey,\n      referenceType: self._referenceType,\n      page: self._page,\n      filters: self._filters,\n      filtersAppliedCounter: args.filtersAppliedCounter,\n      totalRecords: self._totalRecords,\n      calculateFilters: typeof args.calculateFilters === \"undefined\" ? true : args.calculateFilters,\n      defaultFilterApplied: self._defaultFilterApplied,\n      xpath: self._xpath,\n      guidEntityCurrent: self._guidEntityCurrent,\n      pageSize: self._pageSize,\n      onlyLocalResults: self._onlyLocalResults };\n\n\n    $.when(self.getEntityData(entityDataParams)).then(function (data) {\n      var deferProcessEntities = $.Deferred();\n      if (data && data.reference === self._reference) {\n        //clone args, because bizagi.navigator.info is referenced to args\n        self.pub(\"notify\", { type: \"PAGINATOR-UPDATE\", args: $.extend(bizagi.clone(args), data, { event: params.type }) });\n        $.when(self.processEntities($.extend(data, { referenceType: self._referenceType }))).done(function (response) {\n          deferProcessEntities.resolve(response, data.reference);\n        });\n      } else\n      {\n        deferProcessEntities.reject();\n      }\n      return deferProcessEntities.promise();\n\n    }).done(function (entitiesData, reference) {\n      if (reference === self._reference) {\n        self.checkAll = false; //When updateData always uncheck all\n        $.when(self.renderEntities(entitiesData, args)).done(function () {\n          self.pub(\"notify\", {\n            type: \"ENABLE-BATCHS-ACTIONS\",\n            args: { commonActions: self.setValues({ args: { value: self.checkAll } }) } });\n\n          defer.resolve(entitiesData);\n        });\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * returns an instance of  the template engine\r\n      * @return {*}\r\n      */\n  getTemplateEngine: function getTemplateEngine() {\n    var self = this;\n\n    if (self.templateEngine) {\n      return self.templateEngine;\n    }\n\n    var renderDataService = new bizagi.render.services.service({ proxyPrefix: bizagi.RPproxyPrefix });\n    var renderFactory = new bizagi.rendering.desktop.factory(renderDataService);\n    var defer = new $.Deferred();\n\n    $.when(renderFactory.initAsyncStuff()).done(function () {\n      self.templateEngine = new bizagi.templateEngine({\n        renderFactory: renderFactory,\n        cache: true,\n        router: self.router });\n\n\n      self.templateEngine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n        var data = params.data || {};\n        var args = {\n          reference: data.reference,\n          surrogateKey: data.surrogateKey,\n          referenceType: data.referenceType,\n          histName: data.displayName,\n          guidEntityCurrent: data.guidEntityCurrent,\n          filters: [],\n          page: 1,\n          calculateFilters: true };\n\n\n        if (typeof data.xpath !== \"undefined\" && data.xpath) {\n          args.xpath = data.xpath;\n        }\n\n        self.accumulatedcontext.addContext({ \"entityGuid\": params.data.guidEntityCurrent, \"surrogateKey\": [params.data.surrogateKey] });\n\n        var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\n        var currentLevelNavigator = getLevelNavigator && getLevelNavigator.length > 0 ? parseInt(getLevelNavigator[0]) : 1;\n\n        self.pub(\"notify\", {\n          type: data.contextEvent,\n          args: $.extend(args, { level: currentLevelNavigator + 1 }) });\n\n      });\n      defer.resolve(self.templateEngine);\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * match in a json the cells columns with headerMapper\r\n      * @param {JSON} data \r\n      */\n  _matchHeaderWithColumns: function _matchHeaderWithColumns(data) {\n    var ERROR_STR = \"_matchHeaderWithColumns: property \",\n    onError = function onError(str, response) {\n      console.error(ERROR_STR + str + \" does not exist\");\n      return response;\n    },\n    validArray = function validArray(value) {\n      var isArray = Array.isArray(value);\n      if (!isArray)\n      console.error(ERROR_STR + \" value is not an array\");\n      return isArray ? value : [];\n    },\n    columns = bizagi.util.tryCatch(\n    function () {return validArray(data.cells[0].columns);},\n    onError.bind(null, \"data.cells[0].columns\", [])),\n\n    headerMapper = bizagi.util.tryCatch(\n    function () {return validArray(data.cells[0].headerMapper);},\n    onError.bind(null, \"data.cells[0].headerMapper\", columns)),\n\n    xpathMatch = columns.reduce(function (xPaths, col, i) {\n      var _exists = headerMapper[i] !== undefined;\n      xPaths[col] = _exists ? headerMapper[i] : col;\n      return xPaths;\n    }, {});\n\n    return xpathMatch;\n  },\n\n  /**\r\n      * Gets the data related to entity\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getEntityData: function getEntityData(params) {\n    var self = this;\n    var appliedFilters = params.filters;\n    var filtersAppliedCounter = params.filtersAppliedCounter;\n    var calculateFilters = params.calculateFilters,\n    _matchDataHeaders = function _matchDataHeaders(data) {\n      var extra = {\n        columnsXPaths: self._matchHeaderWithColumns(data) };\n\n      return $.extend(data, extra);\n    };\n\n    if (self._referrer === \"search\") {\n      return self.dataService.getSearchData(params).\n      pipe(_matchDataHeaders).\n      then(function (data) {\n        self.setFiltersData(data.filters, appliedFilters, filtersAppliedCounter, data.totalRecords, calculateFilters, null);\n        return $.extend(data, { reference: params.reference });\n      });\n    } else\n    {\n      return self.dataService.getCollectionEntityData(params).\n      pipe(_matchDataHeaders).\n      then(function (data) {\n        if (self._reference === data.reference) {\n          var totalRecords = data.totalRecords;\n\n          if (totalRecords > 0) {\n            var referenceType = params.referenceType;\n            if (referenceType === \"FACT\") {\n              self.dataService.getFiltersEntityData(params).then(function (filtersData) {\n                if (self._reference === filtersData.reference) {\n                  self.processFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, params.defaultFilterApplied);\n                  self.updateCounterFiltersApplied(appliedFilters);\n                }\n              }).fail(function () {\n                self.hideSortBar();\n              });\n            } else\n            {\n              self.hideSortBar();\n            }\n          }\n          // There is no data but there is an applied filter\n          else if (filtersAppliedCounter > 0) {\n              self.setFiltersData([], appliedFilters, filtersAppliedCounter, totalRecords, false, null);\n              self.updateCounterFiltersApplied(appliedFilters);\n            } else\n            {\n              self.hideSortBar();\n            }\n          return $.extend(data, { reference: params.reference });\n        }\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  hideSortBar: function hideSortBar() {\n    var self = this;\n\n    self.pub(\"notify\", { type: \"HIDE-SORT-BUTTONS\", args: {} });\n    self.pub(\"notify\", { type: \"HIDE-FILTER-BUTTONANDBAR\", args: {} });\n  },\n\n  /**\r\n      *\r\n      * @param filtersData\r\n      * @param appliedFilters\r\n      * @param filtersAppliedCounter\r\n      * @param totalRecords\r\n      * @param calculateFilters\r\n      * @param defaultFilterApplied\r\n      */\n  processFiltersData: function processFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied) {\n    var self = this;\n\n    if (defaultFilterApplied) {\n      var appliedFilter = {\n        properties: { xpath: \"\", type: \"entity\", typeSearch: \"exact\" },\n        value: [] };\n\n      var a,i = -1,count = 0;\n      while (a = filtersData[++i]) {\n        var data = a.data;\n        if (a.type === \"Entity\") {\n          var b,j = -1;\n          while (b = data.defaultValues[++j]) {\n            if (b.applied) {\n              appliedFilter.properties.xpath = a.attribute;\n              appliedFilter.value.push({ \"id\": b.id });\n              count++;\n            }\n          }\n        }\n      }\n      if (count > 0) {\n        appliedFilters.push(appliedFilter);\n      }\n      filtersAppliedCounter = typeof filtersAppliedCounter !== \"undefined\" ? filtersAppliedCounter + count : count;\n      self.setFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied);\n    } else\n    {\n      self.setFiltersData(filtersData, [], filtersAppliedCounter, totalRecords, calculateFilters, null);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param filters\r\n      * @param filtersApplied\r\n      * @param filtersAppliedCounter\r\n      * @param totalRecords\r\n      * @param calculateFilters\r\n      * @param defaultFilterApplied\r\n      */\n  setFiltersData: function setFiltersData(filters, filtersApplied, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied) {\n    var self = this;\n    var args = {\n      filters: filters || [],\n      filtersApplied: filtersApplied,\n      filtersAppliedCounter: filtersAppliedCounter || 0,\n      totalRecords: totalRecords || 0,\n      calculateFilters: calculateFilters || false };\n\n\n    if (defaultFilterApplied) {\n      args.defaultFilterApplied = defaultFilterApplied;\n    }\n\n    self.pub(\"notify\", {\n      type: \"SET-FILTERS-DATA\",\n      args: args });\n\n  },\n\n  /**\r\n      * Renders each entity and return a promise, it will be resolved when all entities has been procesed\r\n      * @param data\r\n      * @return {*}\r\n      */\n  processEntities: function processEntities(data) {\n    var self = this;\n    var result = [];\n    var processEntities = [];\n    var defer = new $.Deferred();\n    var templateType = data.referenceType === \"ENTITY\" ? \"Content\" : \"List\";\n\n    if (data.reference === self._reference) {\n      bizagi.loader.start(\"rendering\").then(function () {\n        $.when(self.getTemplateEngine()).then(\n        $.proxy(function (engine) {\n          return $.when.apply($, $.map(data.entities, $.proxy(function (entity) {\n            processEntities.push({ surrogateKey: entity.surrogateKey, entityId: entity.guid });\n\n            var entityData = $.extend(entity, { isDefaultTemplate: entity.guidTemplate === null, templateType: templateType }),\n            entityDataForRender = $.extend({}, entityData, { columnsXPaths: data.columnsXPaths });\n            var paramsRender = { contextEvent: this.params.event };\n            return engine.render(entityDataForRender, paramsRender);\n          }, this)));\n        }, self)).\n        done(function () {\n          var templates = $.makeArray(arguments);\n          var tmpl;\n\n          for (var i = 0, l = data.entities.length; i < l; i++) {\n            tmpl = l === 1 ? templates[i] : templates[i][0];\n            result.push({ tmpl: tmpl, data: data.entities[i] });\n          }\n\n          //dont repeat request with the same params\n          var requestRepeat = false;\n          if (typeof self.idCasesOfProcessEntitiesPromise !== \"undefined\" &&\n          self.idCasesOfProcessEntitiesPromise.state() === \"pending\" &&\n          self.lastParamsSendit &&\n          JSON.stringify(processEntities) === self.lastParamsSendit)\n          {\n            defer.reject();\n            requestRepeat = true;\n          }\n\n          if (!requestRepeat) {\n            // Promesa que retorna id de casos (cuando la entidad es una entidad de proceso) y sera utilizada despus\n            // al renderizar el TMPL - ver renderEntities\n            self.lastParamsSendit = JSON.stringify(processEntities);\n            self.idCasesOfProcessEntitiesPromise = self.dataService.getIdCasesOfProcessEntities(processEntities);\n            $.when(self.idCasesOfProcessEntitiesPromise).done(function () {\n              defer.resolve(result);\n            });\n          }\n        });\n      });\n    } else\n    {\n      defer.reject();\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Gets entity data and inject it in the defined template\r\n      * @param entitiesData\r\n      * @param args\r\n      */\n  renderEntities: function renderEntities(entitiesData, args) {\n    var self = this;\n    var generalDefer = $.Deferred();\n    var collectionDeferreds = [];\n    var $dataViewList = $(\"#template-dataviewer-list\", self.getContent());\n    var entitiesLength = self.entitiesLength = entitiesData.length;\n    var $elementsTmpl = $();\n\n    for (var i = 0; i < entitiesLength; i++) {\n      var $template = self.renderTemplate(entitiesData[i], false, args);\n      $elementsTmpl.push.apply($elementsTmpl, $template);\n    }\n\n    if ($elementsTmpl.length > 0) {\n      $dataViewList.append($elementsTmpl);\n      // Dado que la respuesta de este servicio se puede demorar, primero se renderiza todas las entidades\n      // y despues se busca cuales de ellas son entidades de proceso\n      collectionDeferreds.push(self.getIdCasesOfProcessEntities(entitiesData, args.fromActionLauncher, $dataViewList));\n      $.when.apply($, collectionDeferreds).done(function () {\n        generalDefer.resolve();\n      });\n    } else\n    {\n      $dataViewList.append(self.getEmptyDataMessage());\n      generalDefer.resolve();\n    }\n\n    return generalDefer.promise();\n  },\n\n  /**\r\n      * returns the template for the current entity\r\n      * @param entity\r\n      * @param isRefresh\r\n      * @param params\r\n      * @return {*}\r\n      */\n  renderTemplate: function renderTemplate(entity, isRefresh, params) {\n    var self = this;\n    var entityData = entity.data || {};\n    var surrogateKey = entityData.surrogateKey;\n    var guidEntity = entityData.guid;\n    var fromActionLauncher = params.fromActionLauncher;\n\n    //Render card tmpl with data\n    var $templateData = self.getTemplate(\"templateEngineElement\").render({\n      fromActionLauncher: fromActionLauncher,\n      guidEntity: guidEntity,\n      isChecked: self.checkAll,\n      surrogateKey: surrogateKey });\n\n    //Render entity tmpl in card tmpl\n    $templateData.find(\"#template\").append(entity.tmpl);\n\n    return $templateData;\n  },\n\n  /**\r\n      * Get IdCases Of Process Entities and get actions and events\r\n      */\n  getIdCasesOfProcessEntities: function getIdCasesOfProcessEntities(entitiesData, fromActionLauncher, content) {\n    var self = this;\n    var generalDefer = $.Deferred();\n\n    if (typeof self.collectionGetActionsDeferred === \"undefined\") {\n      self.collectionGetActionsDeferred = [];\n    }\n\n    self.idCasesOfProcessEntitiesPromise.then(function (response) {\n      var idCases = [];\n      var a,i = -1;\n      while (a = response[++i]) {\n        var idCase = a.caseId;\n        if (typeof idCase !== \"undefined\" && idCase > 0) {\n          var entity = entitiesData.find(function (el) {\n            return el.data.surrogateKey === a.surrogateKey;\n          });\n\n          if (typeof entity !== \"undefined\" && typeof idCase !== \"undefined\") {\n\n            var data = entity.data || {};\n            var $cardWrapper = $(\"#template-box-wrapper-\" + data.surrogateKey, content);\n            var $casetoolbar = self.casetoolbar.getCaseToolbar({ casetoolbarData: { idcase: idCase, referrer: \"RenderTemplate\" } });\n\n            $(\".template-box-header .casetoolbar\", $cardWrapper).append($casetoolbar);\n            $(self.selectorCheckboxItems, $cardWrapper).data(\"caseid\", idCase);\n            idCases.push(idCase);\n            $.extend(data, { idCase: idCase });\n\n          }\n        }\n      }\n      self.actionsEventsService.render(idCases);\n    }).always(function () {\n      var i = -1,e;\n      var countRequest = Object.keys(entitiesData).length;\n      if (self.collectionGetActionsDeferred.length > 0) {\n        self.collectionGetActionsDeferred = [];\n      }\n      while (e = entitiesData[++i]) {\n        var data = e.data || {};\n        self.collectionGetActionsDeferred.push(self.getEntityActionsAndEvents(fromActionLauncher, false, data.guidEntity, data.surrogateKey, data.idCase));\n      }\n      $.when.apply($, self.collectionGetActionsDeferred).done(function () {\n        generalDefer.resolve();\n        self.collectionGetActionsDeferred = [];\n      });\n\n\n    });\n    return generalDefer.promise();\n  },\n\n  /**\r\n      * Get Entity Actions and Events\r\n      * @param fromActionLauncher\r\n      * @param guidEntity\r\n      * @param surrogateKey\r\n      * @param idCase\r\n      * @param isRefresh\r\n      */\n  getEntityActionsAndEvents: function getEntityActionsAndEvents(fromActionLauncher, isRefresh, guidEntity, surrogateKey, idCase) {\n    var self = this;\n    var defer = $.Deferred();\n    var content = self.getContent();\n\n    // Get Actions and Events only if it does not come from actionlauncher\n    if (!fromActionLauncher) {\n      setTimeout(function () {\n        var $footer = content.find(\"#template-box-wrapper-\" + surrogateKey + \" .template-box-footer\");\n        var params = {\n          actionData: {\n            guidEntity: guidEntity,\n            surrogateKey: surrogateKey },\n\n          loadEvents: false,\n          isRefresh: isRefresh };\n\n\n        // If there is idCase then loadEvents\n        if (typeof idCase !== \"undefined\" && idCase > 0) {\n          params.actionData.idCase = idCase;\n          params.loadEvents = true;\n        }\n        // Render loading\n        $footer.startLoading({ delay: 0, overlay: true });\n        // Get actions and events\n        $.when(self.actionService.getActionsView(params)).done($.proxy(function (reference, responseActions) {\n          var $actionsView = responseActions.actionsView;\n          var actionsData = responseActions.actionsData;\n\n          if (reference === self._reference) {\n            var $item = content.find(\"#template-box-wrapper-\" + surrogateKey + \" .template-box-element .template-box-footer\");\n            if ($actionsView) {\n              $item.empty().append($actionsView);\n\n              if (actionsData.length > 0 && self.getCheckBox($item).data(\"surrogatekey\") != -1) {\n                self.showCheckItem($item);\n                self.pub(\"notify\", {\n                  type: \"SOME-ITEM-ALLOW-SELECT\",\n                  args: {} });\n\n              } else\n              {\n                self.removeCheckItem($item);\n              }\n            } else\n            {\n              self.removeCheckItem($item);\n            }\n            $footer.endLoading();\n            defer.resolve();\n          }\n        }, self, bizagi.clone(self._reference)));\n      }, 0);\n    }\n    return defer.promise();\n  },\n\n  /**\r\n      * Get check item by case\r\n      * @param $item\r\n      */\n  getCheckBox: function getCheckBox($item) {\n    var self = this;\n    return $item.closest(\".template-box-element\").find(self.selectorCheckboxItems);\n  },\n\n  /**\r\n      * Hide check item\r\n      * @param $item\r\n      */\n  removeCheckItem: function removeCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).after(\"<div></div>\").remove(); //Add div because CSS with flex\n  },\n\n  /**\r\n      * Show checkbox\r\n      * @param $item\r\n      */\n  showCheckItem: function showCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).show();\n  },\n\n  /**\r\n      * Returns the model\r\n      * @return {{}}\r\n      */\n  getCommonActions: function getCommonActions() {\n    var self = this;\n    var model = {};\n\n    model.actions = self.actionService.getCommonActions(self.entitiesSelected);\n    model.surrogateKeys = [];\n    model.checkAll = undefined;\n\n    for (var surrogateKey in self.entitiesSelected) {\n      model.surrogateKeys.push(typeof surrogateKey === \"string\" ? parseInt(surrogateKey) : surrogateKey);\n    }\n    model.guidEntity = surrogateKey !== undefined ? self.entitiesSelected[surrogateKey].guidEntity : \"\";\n\n    if (model.surrogateKeys.length === 0) {\n      self.checkAll = false;\n      model.checkAll = false;\n    } else\n    if (model.surrogateKeys.length == self.entitiesLength) {\n      self.checkAll = true;\n      model.checkAll = true;\n    } else\n    if (model.surrogateKeys.length !== self.entitiesLength) {\n      self.checkAll = false;\n      model.checkAll = false;\n    }\n\n    model.itemsSelected = self.entitiesSelected;\n\n    return model;\n  },\n\n  /**\r\n      * Handler to hold the entities selected\r\n      * @param ev\r\n      */\n  onEntityChecked: function onEntityChecked(ev) {\n    var self = this;\n    var $target = $(ev.target);\n    var surrogateKey = $target.data(\"surrogatekey\");\n    var guidentity = $target.data(\"guidentity\");\n    var isChecked = $target.is(\":checked\");\n    var caseId = $target.data(\"caseid\");\n    var params = {\n      surrogateKey: surrogateKey,\n      guidEntity: guidentity };\n\n\n    if (typeof caseId !== \"undefined\" && caseId > 0) {\n      params.idCase = caseId;\n    }\n\n    self.entitiesSelected[surrogateKey] = params;\n\n    if (!isChecked) {\n      delete self.entitiesSelected[surrogateKey];\n    }\n\n    self.pub(\"notify\", { type: \"ENABLE-BATCHS-ACTIONS\", args: { commonActions: self.getCommonActions() } });\n  },\n\n  /**\r\n      * Set current value\r\n      * @param params\r\n      * @return {*}\r\n      */\n  setValues: function setValues(params) {\n    var self = this;\n    var $content = self.getContent();\n    var args = params.args || {};\n    var isChecked = args.value;\n\n    if ($content) {\n      self.entitiesSelected = {};\n      var $inputs = $content.find(self.selectorCheckboxItems);\n\n      $.map($inputs, function (input) {\n        $(input).prop(\"checked\", isChecked);\n\n        if (isChecked) {\n          var surrogateKey = $(input).data(\"surrogatekey\"),\n          guidentity = $(input).data(\"guidentity\"),\n          idCase = $(input).data(\"caseid\");\n\n          self.entitiesSelected[surrogateKey] = {\n            surrogateKey: surrogateKey,\n            guidEntity: guidentity,\n            idCase: idCase };\n\n        }\n      });\n\n      self.checkAll = isChecked;\n\n      return self.getCommonActions();\n    }\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  onFormActionExecuted: function onFormActionExecuted(ev, params) {\n    var self = this;\n\n    if (params.refresh) {\n      self.refreshRegister(params);\n    }\n  },\n\n  /**\r\n      *\r\n      * @param ev\r\n      * @param params\r\n      */\n  onFormRuleExecuted: function onFormRuleExecuted(ev, params) {\n    var self = this;\n\n    if (params.refresh) {\n      self.refreshRegister(params.action);\n    }\n  },\n\n  onFormExecuted: function onFormExecuted(ev, params) {\n    var self = this;\n\n    if (params.refresh) {\n      self.refreshRegister(params.action);\n    }\n  },\n\n  /**\r\n      * Gets data of current register and update it\r\n      * @param params\r\n      */\n  refreshRegister: function refreshRegister(params) {\n    var self = this;\n    if (self._referrer == \"search\") {\n      self.updateData({ args: { calculateFilters: false } });\n    } else\n    if (self._referrer == \"dataNavigation\") {\n      // It is necessary to send calculateFilters = true so when the data is modified the min and max of\n      // each filter is recalculated\n      self.updateData({ args: {\n          calculateFilters: true } });\n\n    } else\n    {\n      // Get element to refresh\n      var idBox = \"#template-box-wrapper-\" + params.surrogateKey;\n      var $templateBox = $(idBox);\n      var isChecked = $templateBox.find(\".template-box-header > input:checkbox\").is(\":checked\");\n\n      var filters = {\n        operator: \"\",\n        filters: [{\n          key: \"id\",\n          value: params.surrogateKey }] };\n\n\n\n      $templateBox.startLoading({ delay: 250, overlay: true });\n\n      $.when(self.getEntityData({\n        reference: params.reference,\n        surrogateKey: params.surrogateKey,\n        referenceType: params.referenceType,\n        xpath: params.xpath,\n        guidEntityCurrent: params.guidEntityCurrent,\n        page: self._page,\n        filters: filters })).\n      then(function (data) {\n        return self.processEntities(data);\n      }).done(function (result) {\n        var renderedTemplate = self.renderTemplate(result[0], true, params);\n        $templateBox.replaceWith(renderedTemplate);\n        $templateBox.endLoading();\n        // Restore checked value\n        if (isChecked) {\n          $templateBox = $(idBox);\n          $templateBox.find(\".template-box-header > input\").prop(\"checked\", true);\n        }\n      }).always(function () {\n        $templateBox.endLoading();\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      */\n  router: function router() {\n  },\n\n  /**\r\n      * Gets Message when there aren't data\r\n      * @return {*}\r\n      */\n  getEmptyDataMessage: function getEmptyDataMessage() {\n    var self = this;\n    var emptyTemplate = self.getTemplate(\"templateEmptyData\");\n\n    return emptyTemplate.render()[0].outerHTML;\n  },\n\n  /**\r\n      *\r\n      * @param filtersApplied\r\n      */\n  updateCounterFiltersApplied: function updateCounterFiltersApplied(filtersApplied) {\n    var self = this;\n    var counterFilterParams = {\n      type: \"UPDATE-COUNTER-FILTERS-APPLIED\",\n      args: {\n        filtersApplied: filtersApplied } };\n\n\n    self.pub(\"notify\", counterFilterParams);\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    self._currentPage = 1;\n    self._pageSize = 10;\n    self.checkAll = false;\n\n    if ($content) {\n      $content.find(\"#template-dataviewer-list\").off(\"click\", self.selectorCheckboxItems);\n      self.unsub(\"TEMPLATEENGINE-VIEW\");\n      self.unsub(\"SEARCH-ENGINE-VIEW\");\n      self.unsub(\"UPDATE-DATATEMPLATE-VIEW\");\n      self.unsub(\"GET-COMMON-ACTIONS\");\n      self.unsub(\"SET-VALUES\");\n      self.actionService.unsubscribe(\"onFormActionExecuted\");\n      self.processActionService.unsubscribe(\"onFormRuleExecuted\");\n      self.processActionService.unsubscribe(\"onFormExecuted\");\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.templates\", [\"workportalFacade\", \"dataService\", \"actionService\", \"casetoolbar\", \"usersCasesService\", \"actionsEventsService\", \"accumulatedcontext\", \"processActionService\", bizagi.workportal.widgets.templates]);","/*\r\n*   Name: BizAgi Workportal\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define helper functions so the projects can customize via javascript some aspects for the UI appearance and some behaviours\r\n*/\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.override = typeof bizagi.override !== \"undefined\" ? bizagi.override : {};\n\n/*\r\n                                                                                 *   Allow to customize an url in the workportal\r\n                                                                                 */\nbizagi.override.customWorkportalHandlers = {};\nbizagi.override.customizeWorkportalHandler = function (handler, newUrl) {\n\n  // Redefine a handler to allow customization\n  bizagi.override.customWorkportalHandlers[handler] = newUrl;\n};\n\nif (bizagi.workportal.services.context) {\n  bizagi.workportal.services.context.original = $.extend(true, {}, bizagi.workportal.services.context.prototype);\n  $.extend(bizagi.workportal.services.context.prototype, {\n    getUrl: function getUrl(service) {\n      if (this.context == \"workportal\" && bizagi.override.customWorkportalHandlers[service]) {\n        return bizagi.override.customWorkportalHandlers[service];\n      }\n      return bizagi.workportal.services.context.original.getUrl.apply(this, arguments);\n    } });\n\n}\n\n/*\r\n  *   Allows to extend widget features by extending the postRender method and calling a custom calllback\r\n  */\nbizagi.override.customizeWorkportalWidget = function (widget, extensionMethod) {\n  var widgetImplementation = bizagi.workportal.desktop.facade.getWidgetImplementation(widget);\n\n  if (widgetImplementation) {\n\n    // Prototype modification\n    eval(widgetImplementation).extend(widgetImplementation, {}, {\n      /*\r\n                                                                        *   Override postRender\r\n                                                                        */\n      postRender: function postRender() {\n        var self = this;\n\n        // Call bizagi implementation\n        self._super();\n\n        // Call custom implementation\n        var content = self.getContent();\n        if (extensionMethod) extensionMethod(this, content);\n      } });\n\n  }\n};\n\n/*\r\n   *   Allows to add custom menus to the main menu bar\r\n   */\nbizagi.override.customButtons = [];\nbizagi.override.addCustomMenuButton = function (button) {\n  bizagi.override.customButtons.push(button);\n};\n// Set an override to menu\nif (bizagi.workportal.controllers.menu) {\n  bizagi.workportal.controllers.menu.original = $.extend(true, {}, bizagi.workportal.controllers.menu.prototype);\n  $.extend(bizagi.workportal.controllers.menu.prototype, {\n    postRender: function postRender() {\n      var self = this;\n      var customButtonTemplate = self.workportalFacade.getTemplate(\"menu.custom-button\");\n\n      // Render the menu\n      return $.when(bizagi.workportal.controllers.menu.original.postRender.apply(this, arguments)).\n      pipe(function (result) {\n        var menuButtonContainer = $(\"[data-bizagi-component=menuItems]\", result);\n\n        $.each(bizagi.override.customButtons, function (i, button) {\n\n          if (typeof button.isAvailable == \"function\") {\n            if (!button.isAvailable()) return;\n          }\n          var customButton = $.tmpl(customButtonTemplate, button);\n\n          // Bind click handler\n          if (button.submenu == null) {\n            customButton.click(function () {\n              if (button.click) button.click(self);\n            });\n          } else {\n            customButton.click(function () {\n              // Pops up the submenu\n              self.renderSubMenu(customButton, button.submenu, button.click);\n            });\n          }\n\n          menuButtonContainer.append(customButton);\n        });\n\n        return result;\n      });\n    } });\n\n}\n\n/*\r\n  *   Allows to add custom services\r\n  */\nbizagi.override.addDataService = function (functionName, fn) {\n  if (bizagi.workportal.services.service) {\n    bizagi.workportal.services.service.original = $.extend(true, {}, bizagi.workportal.services.service.prototype);\n\n    // Create an extension object\n    var extensionObject = {};\n    extensionObject[functionName] = fn;\n\n    // Extend data service\n    $.extend(bizagi.workportal.services.service.prototype, extensionObject);\n  }\n};\n\n//TODO: How to customize project aspx or ashx without compilation","$.Class.extend(\"bizagi.ui.controls.tmplloader\", {}, {\n\n  init: function init() {\n    this.templates = [];\n  },\n\n  loadTemplates: function loadTemplates(tmpls) {\n\n    var self = this;\n    var templatesMap = tmpls || {};\n\n    var defer = new $.Deferred();\n    var arrPromises = [];\n\n    $.each(templatesMap, function (key, template) {\n      var promise = self.loadTemplate(key, template);\n      arrPromises.push(promise);\n    });\n\n    $.when.apply($, arrPromises).\n    done(function () {\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  loadTemplate: function loadTemplate(name, path) {\n\n    var self = this;\n    var templates = self.templates;\n    var defer = new $.Deferred();\n\n    if (templates[name]) {\n      defer.resolve();\n    } else {\n      return bizagi.templateService.getTemplate(path).\n      done(function (tmpl) {\n        templates[name] = tmpl;\n      });\n    }\n    return defer.promise();\n  },\n\n  getTemplate: function getTemplate(name) {\n\n    var self = this;\n    var templates = self.templates;\n\n    if (templates[name]) {\n      return templates[name];\n    } else {\n      return null;\n    }\n  } });","/**\r\n * Zoom plugin creates a drag and scroll control\r\n *\r\n * @author Andrs Fernando Muoz\r\n */\n(function ($) {\n\n  $.widget(\"diagram.dragScroll\", {\n    options: {},\n\n\n    _create: function _create() {\n      var self = this;\n      var options = this.options;\n      var clicked = false;\n      self.curYPos = 0;\n      self.curXPos = 0;\n\n      $(self.element).css({\n        'cursor': 'move' });\n\n\n      $(self.element).bind(\"mousedown\", function (e) {\n        clicked = true;\n\n        self.options.$scrollable.data({\n          \"clicked\": clicked });\n\n\n        self.curYPos = e.pageY;\n        self.curXPos = e.pageX;\n        self.scrollLeft = self.options.$scrollable.scrollLeft();\n        self.scrollTop = self.options.$scrollable.scrollTop();\n        options.$scrollable.bind(\"mousemove\", function (e) {\n          if (clicked) {\n            self._move(e.pageX, e.pageY);\n          }\n        });\n      });\n\n      $(self.element).bind(\"mouseup\", function (e) {\n        clicked = false;\n        self.options.$scrollable.data({\n          \"clicked\": clicked });\n\n        options.$scrollable.unbind(\"mousemove\");\n      });\n\n\n    },\n    /**\r\n        * Moves the element\r\n        * @param x, x axis differential\r\n        * @param y, y axis differential\r\n        * @private\r\n        */\n    _move: function _move(x, y) {\n      var self = this;\n      var moveX = self.scrollLeft + self.curXPos - x;\n      var moveY = self.scrollTop + self.curYPos - y;\n      if (moveX != 0 && moveY != 0) {\n        self.options.$scrollable.scrollTop(moveY);\n        self.options.$scrollable.scrollLeft(moveX);\n      }\n\n    },\n\n\n    destroy: function destroy() {\n      // Call the base destroy function.\n      $.Widget.prototype.destroy.call(this);\n    } });\n\n})(jQuery);","/**\r\n * This file contains all keys that can be change the default functionality\r\n * of Bizagi, please use it carefully.\r\n *\r\n * @author Edward J Morales\r\n */\n\n\n// TODO: Please make a documentation for each override\n\n/**\r\n * Active folders functionality that is used in workportal inbox to create\r\n * categories of process\r\n *\r\n * @type {boolean}\r\n */\nbizagi.override.enableFolder = false;\n\n/**\r\n                                       * Smart Folders are case repositories that meet certain filters.\r\n                                       * Each smart folder can be associated with a filter, for example,\r\n                                       * all files that have been registered as of a determined date.\r\n                                       *\r\n                                       * @type {boolean}\r\n                                       */\nbizagi.override.enableSmartFolders = false;\n\n/**\r\n                                             * This functionality allow a new tap within modal window of new case,\r\n                                             * that create a shortcut to most used process\r\n                                             *\r\n                                             * @type {boolean}\r\n                                             */\nbizagi.override.enableListOfRecentProcesses = false;\n\n\n/**\r\n                                                      * Unused key. The Author must be define what can do\r\n                                                      *\r\n                                                      * @type {boolean}\r\n                                                      */\nbizagi.override.enableCustomizeReports = false;\n\n/**\r\n                                                 * This key enable within admin menu a new item that will\r\n                                                 * open \"Multiple case reassigment\" module\r\n                                                 *\r\n                                                 * SNAKE-1296\r\n                                                 * @type {boolean}\r\n                                                 */\nbizagi.override.enableMultipleCasesReassigment = false;\n\n/**\r\n                                                         * This key enable within admin menu a new item thah will\r\n                                                         * open \"Async ECM Upload\" module\r\n                                                         *\r\n                                                         * DRAGON-152 Adidas\r\n                                                         * @type {boolean}\r\n                                                         */\nbizagi.override.enableAsyncECMUploadJobs = false;\n\n/**\r\n                                                   * This key enable the capability to print an edit form of a grid\r\n                                                   * @type {boolean}\r\n                                                   */\nbizagi.override.enablePrintFromEditForm = false;\n\n/**\r\n                                                  * This key can be allow debug window in release environments\r\n                                                  * @type {boolean}\r\n                                                  */\nbizagi.enableDebug = false;\n\n/**\r\n                             * This key disable old windows and enable new REST development\r\n                             * @type {boolean}\r\n                             */\n//bizagi.override.disableFrankenstein = (typeof BIZAGI_SERVICE_ACTIVATION !== \"undefined\" && BIZAGI_SERVICE_ACTIVATION) ? true : false;\n\n\n/**\r\n * Disable old query forms and enable new tier using REST services\r\n * @type {boolean}\r\n */\nbizagi.override.disableFrankensteinQueryForms = true;\n\n/**\r\n                                                       * Change default behavior of grid column sort\r\n                                                       * @type String\r\n                                                       * @example desc || asc\r\n                                                       */\n//bizagi.override.gridDefaultSortBy= \"desc\";\n\n/**\r\n * Expose interface to access to DOM elements\r\n * @type {boolean}\r\n */\nbizagi.override.enableE2EInterface = true;\n\n/**\r\n                                            * Disable old inbox\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.disableOldInbox = true;\n\n/**\r\n                                         * Time out to remove elements that not will be used anymore\r\n                                         * @type {number} Milliseconds\r\n                                         */\nbizagi.override.disposeTime = 50;\n\n/**\r\n                                   * Enable REST batch request functionality\r\n                                   * @type {boolean}\r\n                                   */\nbizagi.override.enableBatchRequest = true;\n\n/**\r\n                                            * force all request that consume a REST through Web API will be sending in a batch request\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.forceBatchRequest = false;\n\n/**\r\n                                            * Security option to enable visualization of current assignee\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.showAssignees = true;\n\n/**\r\n                                       *\r\n                                       * @type {boolean}\r\n                                       */\nbizagi.override.enableMySearch = true;\n\n/**\r\n                                        *\r\n                                        * @type {boolean}\r\n                                        */\nbizagi.override.enableSecurityCaseDashBoard = false;\n\n/**\r\n                                                      * Show classic view(Sub levels of application and entities)\r\n                                                      * @type {boolean}\r\n                                                      */\nbizagi.override.enableQueriesClassicMenu = false;\n\n/**\r\n                                                   * disable cancel cases functionality in manage cases and hide the Cancel cases tab in Admin cases\r\n                                                   * @type {boolean}\r\n                                                   */\nbizagi.override.disableAbortCases = false;\n\n\n\n/**\r\n                                            * Enable \"plus icon\" on inbox, and load Adhoc Process module\r\n                                            * @type {boolean}\r\n                                            */\nbizagi.override.enableAdhocProcess = false;\n\n/**\r\n                                             * Enable \"BCC/CC\" feature for Notification Task on Live Processes\r\n                                             * @type {boolean}\r\n                                             */\nbizagi.override.enableCCBCCFeatureOnLiveProcesses = true;\n\n/**\r\n                                                           * Enable \"Review Mode\" feature on Live Processes\r\n                                                           * @type {boolean}\r\n                                                           */\nbizagi.override.enableReviewModeFeatureOnLiveProcesses = true;\n\n/**\r\n                                                                * Enable \"Filter by process grouo\" feature on Live Processes\r\n                                                                * @type {boolean}\r\n                                                                */\nbizagi.override.enableFilterByProcessGroupOnLiveProcesses = false;\n\n/**\r\n                                                                    * Enable \"Support localization in the process modeler\" feature on Live Processes\r\n                                                                    * @type {boolean}\r\n                                                                    */\nbizagi.override.enableLocalizationInModelerOnLiveProcesses = true;\n\n/**\r\n                                                                    * Enable \"Support predefined performers in the process modeler\" feature on Live Processes\r\n                                                                    * @type {boolean}\r\n                                                                    */\nbizagi.override.enablePredefinedPerformersOnLiveProcesses = true;\n\n\n/**\r\n                                                                   * Enable \"Show timeline icon in inbox\" feature on Workportal\r\n                                                                   * @type {boolean}\r\n                                                                   */\nbizagi.override.enableFeatureShowTimelineButton = true;\n\n/**\r\n                                                         * Enable \"Display Options\" feature on Workportal\r\n                                                         * @type {boolean}\r\n                                                         */\nbizagi.override.enableFeatureDisplayOptions = false;\n\n/**\r\n                                                      * Enable \"Mazimize Modals\" option inside  \"Display Options\" feature on Workportal\r\n                                                      * @type {boolean}\r\n                                                      */\nbizagi.override.enableMaximizeModalsOption = false;\n\n/**\r\n                                                     * Enable \"Start Page\" option inside  \"Display Options\" feature on Workportal\r\n                                                     * @type {boolean}\r\n                                                     */\nbizagi.override.enableStartPageDisplayOption = false;\n\n/**\r\n                                                       * Enable \"Ping to Server\" feature on Workportal\r\n                                                       * @type {boolean}\r\n                                                       */\nbizagi.override.enablePing = false;\n\n/**\r\n                                    * Use multiaction implementation for get ECM metadata\r\n                                    * @type {boolean}\r\n                                    */\nbizagi.override.enableECMMetadataMultiaction = true;\n\n/* Validate the form before than buttons' actions\r\n                                                     */\nbizagi.override.validateGridsOnButtonClick = false;\n\n/* Enable custom formats form\r\n                                                     */\nbizagi.override.enableCustomFormats = false;\n\n/* Enable share activity\r\n                                              */\nbizagi.override.enableShareActivity = true;\n\n/* \r\n                                             * Enable format in Money type column in the queries results\r\n                                             */\nbizagi.override.enableFormatMoneyColumnQueryResult = true;\n\n/* \r\n                                                            * Enable symbol in Money type column in the queries results\r\n                                                            */\nbizagi.override.enableSymbolMoneyColumnQueryResult = true;\n\n/*\r\n                                                            * Refresh grid parent of cell when there are expressions on visible property\r\n                                                            */\nbizagi.override.enableGridRefreshAfterCellRefresh = false;\n\n/**\r\n                                                            * Show the QR mobile in user menu\r\n                                                            */\nbizagi.override.showQrMobileMenu = true;\n\n/**\r\n                                          * Restore control's appearance after refresh\r\n                                          * @type {boolean}\r\n                                          */\nbizagi.override.restoreAppearanceAfterRefresh = true;\n\n/**\r\n                                                       * Maximum number of button in the form\r\n                                                       * @type {number} Milliseconds\r\n                                                       */\nbizagi.override.maxButtonForQuickActions = 6;\n\n/**\r\n                                               * hide time when hour, minutes, seconds and milliseconds are 0\r\n                                               * @type {boolean}\r\n                                               */\nbizagi.override.hideTimeWhenHourMinutesSecondsAreZero = true;\n\n/*\r\n                                                               * Enable new changed action\r\n                                                               */\nbizagi.override.enableActionIsChangedSupport = true;","\n/**\r\n *   Name: Bizagi Workportal Desktop Dashboard Controller\r\n *   Author: Mauricio Snchez - Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dashboard\", {\n\n  data: {\n    \"home\": [{\n      type: \"cases\",\n      title: \"workportal-widget-dashboard-cases\",\n      items: [{\n        \"title\": \"workportal-widget-dashboard-pendings-title\",\n        \"iconclass\": \"pendings-ico\",\n        \"icon\": \"watch-pending-outline\",\n        \"data\": \"pendings\" },\n      {\n        \"title\": \"workportal-widget-dashboard-favorites-title\",\n        \"iconclass\": \"star-ico\",\n        \"icon\": \"star\",\n        \"data\": \"following\" }] }] } },\n\n\n\n\n{\n  /**\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.dashboard\").concat(\"#dashboard-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template;\n\n    template = self.getTemplate(\"dashboard\");\n    self.content = template.render(self.getData());\n\n    return self.content;\n\n  },\n\n  /**\r\n      * returns data\r\n      */\n  getData: function getData() {\n    var self = this,\n    result = {},\n    data = self.Class.data;\n\n\n    var content = data.home.slice(0);\n\n    result.home = $.map(content, function (item) {\n      item.title = bizagi.localization.getResource(item.title);\n      for (var i = 0, l = item.items.length; i < l; i++) {\n        item.items[i].title = bizagi.localization.getResource(item.items[i].title);\n      }\n      return item;\n    });\n\n    return result;\n\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $content = self.getContent();\n\n    $content.closest(\".wdg-dash-board\").on(\"click\", \".wdg-db-card\", $.proxy(self.onShowCases, self));\n    $(window).trigger(\"resize\");\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n\n    if ($content) {\n      $content.closest(\".wdg-dash-board\").off(\"click\", \".wdg-db-card\");\n    }\n  },\n\n  /**\r\n      * Shows the cases related to action clicked\r\n      */\n  onShowCases: function onShowCases(ev) {\n    var self = this,\n    $target = $(ev.target),\n    $route = $target.closest(\".wdg-db-card\").data(\"route\");\n\n    var $title = $target.closest(\".wdg-db-card\").find(\".wdg-db-title\");\n\n    self.pub(\"notify\", {\n      type: \"CASES-TEMPLATE-VIEW\",\n      args: {\n        histName: $.trim($title.text()),\n        page: 1,\n        level: 2,\n        route: $route,\n        idworkflow: \"\" } });\n\n\n  } });\n\nbizagi.injector.register(\"bizagi.workportal.widgets.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.dashboard]);","/**\r\n * Bizagi Workportal Desktop Stuff Controller\r\n * @author Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.stuff\", {}, {\n  /**\r\n                                                                                  * Constructor\r\n                                                                                  * @param workportalFacade\r\n                                                                                  * @param dataService\r\n                                                                                  * @param accumulatedcontext\r\n                                                                                  * @param params\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, accumulatedcontext, params) {\n    var self = this;\n    self.accumulatedcontext = accumulatedcontext;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"stuff\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.stuff\").concat(\"#stuff-wrapper\") });\n\n  },\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"stuff\");\n\n    return $.when(self.getData()).done(function (data) {\n      self.content = data.collections.length > 0 ? template.render(data) : \"\";\n      return self.content;\n    });\n  },\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $content = self.getContent();\n\n    $('.wdg-stf-card', $content).on(\"click\", $.proxy(self.onClickEntity, self));\n    self.sub('TEMPLATEENGINE-VIEW', $.proxy(self.selectItem, self));\n  },\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    return $.when(self.dataService.getUserStuff({ icon: true })).then(function (data) {\n      data = self.buildModel(data) || {};\n      return {\n        title: bizagi.localization.getResource(\"workportal-widget-dashboard-stuff\"),\n        collections: data };\n\n    });\n  },\n  /**\r\n      * Add style to the selected item\r\n      */\n  selectItem: function selectItem() {\n    var self = this;\n    $('.wdg-stf-card', self.content).removeClass('wdg-stf-selected');\n    $(\"#\" + arguments[1].args.reference, self.content).addClass('wdg-stf-selected');\n  },\n  /**\r\n      * Holds a refence to each collection\r\n      * @param data\r\n      * @return {Array}\r\n      */\n  buildModel: function buildModel(data) {\n    var self = this;\n    var collections = {};\n    var items = [];\n    data = data || {};\n    self.model = {};\n\n    for (var i = 0, lf = data.length; i < lf; i++) {\n      var item = data[i];\n      item.guid = Math.guid();\n      collections[item.guid] = item;\n      items.push(item);\n    }\n\n    self.model.collections = collections;\n\n    return items;\n  },\n  /**\r\n      * Raises the execution of templates for the entity selected\r\n      * @param ev\r\n      */\n  onClickEntity: function onClickEntity(ev) {\n    var self = this;\n    var target = $(ev.target).closest('.wdg-stf-card');\n    var item = self.model.collections[target.data('guid')];\n    var args = {\n      calculateFilters: true,\n      filters: [],\n      fromActionLauncher: false,\n      histName: target.data('title') || item.displayName,\n      level: 1,\n      page: 1,\n      reference: item.reference,\n      referenceType: item.referenceType,\n      surrogateKey: item.surrogateKey };\n\n\n    if (typeof item.entityId !== \"undefined\" && item.entityId) {\n      args.guidEntityCurrent = item.entityId;\n    }\n    if (typeof item.xpath !== \"undefined\" && item.xpath) {\n      args.xpath = item.xpath;\n    }\n\n    self.accumulatedcontext.clean();\n\n    self.pubDeadLockDetection(\"notify\", { type: \"TEMPLATEENGINE-VIEW\", args: args });\n  },\n  /**\r\n      *  Detach events linked\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    if ($content) {\n      $('.wdg-stf-card', $content).off('click');\n      self.unsub('TEMPLATEENGINE-VIEW');\n    }\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.stuff', ['workportalFacade', 'dataService', 'accumulatedcontext', bizagi.workportal.widgets.stuff]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Base\r\n *   Author: David Romero Estrada\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.base\", {}, {\n\n  /*\r\n                                                                                        * Initilize\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n    params = params || {};\n    self.differenceMillisecondsServer = params.differenceMillisecondsServer;\n    self.uploadMaxFilesSize = bizagi.currentUser.uploadMaxFileSize;\n    self.supportFileExt = [\n    \".jpg\",\n    \".pdf\",\n    \".txt\",\n    \".png\",\n    \".pptx\",\n    \".docx\",\n    \".gif\",\n    \".rtfx\",\n    \".xlsx\",\n    \".zip\",\n    \".rar\"];\n\n\n    // Set radNumber\n    self.radNumber = params.radNumber;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n\n    if (!self.differenceMillisecondsServer) {\n      return $.when(self.dataService.getDateServer()).done(function (response) {\n        self.differenceMillisecondsServer = bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date(), new Date(response.date), \"milliseconds\");\n      });\n    }\n  },\n  /*\r\n     * Calculate Server Date\r\n     */\n  getDateServer: function getDateServer() {\n\n    var dateLocal = new Date();\n\n    return dateLocal.getTime() + this.differenceMillisecondsServer;\n  },\n\n  mergePropertiesActivitiesWithWorkitems: function mergePropertiesActivitiesWithWorkitems(activities, workItems) {\n    activities.forEach(function (activity) {\n      var workItemFilter = workItems.filter(function (workItem) {\n        return workItem.guidActivity === activity.id;\n      });\n      if (workItemFilter.length > 0) {\n        $.extend(activity, {\n          startDate: workItemFilter[0].wiEntryDate || null,\n          finishDate: workItemFilter[0].wiSolutionDate || null,\n          idWorkItem: workItemFilter[0].idWorkItem,\n          workItemState: workItemFilter[0].workItemState,\n          idCase: workItemFilter[0].idCase,\n          estimatedFinishDate: workItemFilter[0].wiEstimatedSolutionDate || activity.estimatedFinishDate });\n\n      }\n    });\n  } });\n\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.project.base\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.base], true);","/*\r\n *   Name: Bizagi Workportal Desktop descontextualized plans Controller\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n */\n\nbizagi.workportal.widgets.widget.extend('bizagi.workportal.widgets.decontextualized.plans', {\n  data: {\n    title: 'workportal-widget-dashboard-decontextualized-plans-title',\n    items: [\n    {\n      'title': 'workportal-widget-dashboard-decontextualized-plans-pendings-title',\n      'description': 'workportal-widget-dashboard-decontextualized-plans-pendings-description',\n      'iconclass': 'star-ico',\n      'icon': 'pending',\n      'data': 'PENDING' },\n\n    {\n      'title': 'workportal-widget-dashboard-decontextualized-plans-running-title',\n      'description': 'workportal-widget-dashboard-decontextualized-plans-running-description',\n      'iconclass': 'star-ico',\n      'icon': 'executing',\n      'data': 'EXECUTING' },\n\n    {\n      'title': 'workportal-widget-dashboard-decontextualized-plans-completed-title',\n      'description': 'workportal-widget-dashboard-decontextualized-plans-completed-description',\n      'iconclass': 'star-ico',\n      'icon': 'closed',\n      'data': 'CLOSED' }] } },\n\n\n\n{\n  /**\r\n   *   Constructor\r\n   * @param workportalFacade\r\n   * @param dataService\r\n   * @param params\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      'decontextualized.plans': bizagi.getTemplate('bizagi.workportal.desktop.widget.decontextualized.plans').concat('#plans-wrapper') });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template,\n    data,\n    filteredData = {};\n    template = self.getTemplate(\"decontextualized.plans\");\n\n    if (bizagi.menuSecurity.Plans) {\n      data = self.getData();\n      filteredData.title = data.title;\n      self.content = template.render(data);\n    } else\n    {\n      self.content = $(\"<div></div>\");\n    }\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $content = self.getContent();\n    $.when(self.getServerDateDifference()).then(function (resolveGetDateServer) {});\n    $('.wdg-plans-card', $content).on('click', $.proxy(self.onClickCard, self));\n  },\n\n  /**\r\n      * Gets data, Fact entities related with stakeholders\r\n      * @return {{}}\r\n      */\n  getData: function getData() {\n    var self = this,\n    result = {},\n    data = self.Class.data;\n    result.items = $.map(data.items, function (item) {\n      item.title = bizagi.localization.getResource(item.title);\n      item.description = bizagi.localization.getResource(item.description);\n      return item;\n    });\n    result.title = bizagi.localization.getResource(data.title);\n    return result;\n  },\n\n\n  /**\r\n      * Raises the execution of templates for the entity selected\r\n      * @param ev\r\n      */\n  onClickCard: function onClickCard(ev) {\n    var self = this,\n    target = $(ev.target).closest('.wdg-plans-card'),\n    title = target.data('title'),\n    data = target.data('data');\n    var args = {\n      histName: title,\n      planState: data,\n      flowContext: 'FLOW-DECONTEXTUALIZED-PLANS',\n      isOpen: true, //TODO  fix state for decontextualized plans,\n      level: 1 };\n\n    self.pub('notify', {\n      type: 'PLANS-VIEW',\n      args: $.extend(self.params, args) });\n\n  },\n\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  getServerDateDifference: function getServerDateDifference() {\n    var self = this;\n    return self.dataService.getDateServer().done(function (response) {\n      self.params.differenceMillisecondsServer = bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date(), new Date(response.date), 'milliseconds');\n    });\n  },\n\n  /**\r\n      * Detach events linked\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n\n    if ($content) {\n      $('.wdg-plans-card', $content).off('click');\n    }\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.decontextualized.plans', ['workportalFacade', 'dataService', bizagi.workportal.widgets.decontextualized.plans]);","/**\r\n *   Name: Bizagi Workportal Desktop Navigator Controller\r\n *   Author: Mauricio Snchez - Alexander Mejia\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.navigator\", {\n  CONTEXTS: {\n    ACTIVITY: \"ACTIVITY\",\n    EDIT_ACTIVITY: \"EDITACTIVITY\",\n    ACTIVITY_PLAN: \"ACTIVITYPLAN\",\n    HOME: \"HOME\",\n    TEMPLATE_ENGINE_VIEW: \"TEMPLATEENGINE-VIEW\",\n    PLANS_VIEW: \"PLANS-VIEW\",\n    PLAN_ACTIVITIES: \"PLANACTIVITIES\",\n    CASES_TEMPLATE_VIEW: \"CASES-TEMPLATE-VIEW\" },\n\n  CLASSES: {\n    GRID_CONTAINER: \"ui-bizagi-wp-project-grid-container\" } },\n\n{\n  /**\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, accumulatedcontext, params) {\n    var self = this;\n    // Call base\n    self.workportalFacade = workportalFacade;\n    self.accumulatedcontext = accumulatedcontext;\n    self.dataService = dataService;\n    self._super(workportalFacade, dataService, params);\n\n    // Params\n    self.flagDisplayDate = true;\n    self.printFormCommand = new bizagi.workportal.command.printform(self.workportalFacade);\n    self.fromClickBreadCrumb = false;\n    self.showReleaseButton = false;\n    self.caseLink = params && params.caseLink ? params.caseLink : false;\n    self.taskOptionsWidget = new bizagi.workportal.widgets.task.options(workportalFacade, dataService, params);\n\n    // Used to save parameters from the form\n    self.onRenderFinishParams = null;\n\n    //Load templates\n    self.loadTemplates({\n      \"navigator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-wrapper\"),\n      \"child\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-child\"),\n      \"popup-release\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-popup-release\") });\n\n    self.accumulatedcontext = accumulatedcontext;\n\n    self.releaseDialogBox = {};\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"navigator\");\n    self.content = template.render($.extend(self.getDataObj(), { security: bizagi.menuSecurity }));\n    bizagi.navigator = bizagi.navigator || { info: {} };\n    self.info = bizagi.navigator.info;\n    self._level = Object.keys(self.info).length - 1;\n    $(\".navbar-print\", self.content).on(\"click\", $.proxy(self.printCase, self));\n    $(\".navbar-back\", self.content).on(\"click\", $.proxy(self.goToBack, self));\n    $(\".navbar-assignation-everyone > .ae-action\", self.content).on(\"click\", $.proxy(self.actionButtonEvent, self));\n    self.releaseDialogBox.formContent = self.getTemplate(\"popup-release\").render({});\n\n    return self.content;\n  },\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var content = self.getContent();\n    var $container = content.find(\"ul\");\n    self.sub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\n    self.sub(\"NAVIGATE\", $.proxy(self.refresh, self));\n    self.sub(\"UPDATE_LASTCRUMBPARAMS_INFO\", $.proxy(self.updateLastCrumbParamsInfo, self));\n    self.sub(\"NAVIGATOR_GETLEVEL\", function () {\n      return self.getLevel();\n    });\n    self.sub(\"NAVIGATOR_BACK\", $.proxy(self.goToPreviousCrumb, self));\n    $container.on(\"click\", \"li\", $.proxy(self.crumbEvent, self));\n\n    self.plugins = {};\n    self.plugins.popupRelease = {\n      form: {\n        buttonAccept: $(\"#button-accept-release\", self.releaseDialogBox.formContent),\n        buttonCancel: $(\"#button-cancel-release\", self.releaseDialogBox.formContent) } };\n\n\n\n    self.plugins.popupRelease.form.buttonAccept.on(\"click\", $.proxy(self.onClickAcceptRelease, self));\n    self.plugins.popupRelease.form.buttonCancel.on(\"click\", $.proxy(self.onClickCancelRelease, self));\n    //Notification service\n    self.notifier = bizagi.injector.get('notifier');\n  },\n\n  /**\r\n      * Called from the event when the form is rendered\r\n      * @param {subscription} event \r\n      * @param {form} params \r\n      */\n  onRenderFinish: function onRenderFinish(event, params) {\n    var self = this;\n    self.onRenderFinishParams = params;\n    self.taskOptionsWidget.renderEnds();\n  },\n\n  getBreadCrumbInfo: function getBreadCrumbInfo() {\n    return bizagi.navigator.info;\n  },\n\n  setBreadCrumbInfo: function setBreadCrumbInfo(info) {\n    bizagi.navigator.info = info;\n  },\n\n  drawBreadCrumb: function drawBreadCrumb(breadCrumbInfo, showSteps) {\n    var self = this;\n    $(self.content).find(\"ul\").html('');\n    if (showSteps) {\n      for (var i = -1; i < Object.keys(breadCrumbInfo).length - 1; i += 1) {\n        var crumbItem = breadCrumbInfo[i];\n        crumbItem.surrogateKey = i;\n        var crumbContent = self.drawCrumb(crumbItem);\n        $(self.content).find(\"ul\").append(crumbContent);\n      }\n    }\n  },\n\n  drawCrumb: function drawCrumb(itemCrumb) {\n    var self = this;\n    var name = itemCrumb.args.histName;\n    var isPrincipalHome = false;\n    var template = self.getTemplate(\"child\");\n    var child = template.render({\n      surrogateKey: itemCrumb.surrogateKey,\n      name: name,\n      isPrincipalHome: isPrincipalHome });\n\n    return child;\n  },\n  crumbEvent: function crumbEvent(event) {\n    var self = this;\n    var itemCrumb = self.info[$(event.target).data(\"surrogatekey\")];\n    self.goToCrumb(itemCrumb, event);\n  },\n\n  goToCrumb: function goToCrumb(crumb, event) {\n    var self = this;\n    if (crumb) {\n      var args = crumb.args;\n      var skipRefresh = false;\n      var contextActivity = this.getParentContext(crumb.context);\n      if (contextActivity == \"TEMPLATEENGINE-VIEW\" || contextActivity == \"SEARCH-ENGINE-VIEW\") {\n        skipRefresh = true;\n        if (event && event.target) {\n          var index = parseInt($(event.target).data(\"surrogatekey\"), 10) + 1;\n          self.accumulatedcontext.cutContext(index);\n        }\n      }\n      this.deleteRemainingCrumbs(crumb);\n      self.pub(\"notify\", {\n        skipRefresh: skipRefresh,\n        type: contextActivity,\n        args: $.extend(args, { showContextByMenuDashboard: contextActivity }) });\n\n    }\n  },\n\n  goToPreviousCrumb: function goToPreviousCrumb() {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    var crumbBack = self.info[pathSize - 3];\n    if (!crumbBack) {\n      crumbBack = self.info[pathSize - 2];\n    }\n    self.goToCrumb(crumbBack);\n  },\n\n  deleteRemainingCrumbs: function deleteRemainingCrumbs(itemCrumb) {\n    var self = this;\n    $.each(self.info, function (key) {\n      if (itemCrumb.surrogateKey < parseInt(key, 10)) {\n        delete self.info[key];\n      }\n    });\n  },\n\n  getParentContext: function getParentContext(context) {\n    if (context === \"OVERVIEW\" || context === \"COMMENTS\" || context === \"FILES\" || context === \"TIMELINE\") {\n      return \"ACTIVITY\";\n    } else\n    if (context === \"ACTIVITYPLANOVERVIEW\" || context === \"ACTIVITYPLANCOMMENTS\" || context === \"ACTIVITYPLANFILES\" || context === \"ACTIVITYPLANTIMELINE\") {\n      return \"ACTIVITYPLAN\";\n    } else\n    if (context === \"PLANSIDEBAR\" || context === \"EDITACTIVITY\" || context === \"PLANACTIVITIES\" || context === \"PLANCOMMENTS\" || context === \"PLANFILES\" || context === \"PLANTIMELINE\") {\n      return \"PLANACTIVITIES\";\n    }\n    return context;\n  },\n\n  resetBreadCrumb: function resetBreadCrumb(params) {\n    var self = this;\n    self.info = {};\n    self.info[-1] = self.copyDataObjectWithoutReference(params);\n  },\n\n  updateInfo: function updateInfo(params) {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    if (params.args.level && params.args.level < pathSize && params.args.level > 0) {\n      for (var j = params.args.level - 1; j < pathSize - 1; j += 1) {\n        delete self.info[j];\n      }\n      pathSize = params.args.level;\n    }\n\n    var lastCrumb = self.info[pathSize - 2];\n    var secondLastCrumb = self.info[pathSize - 3];\n    if (params.context == \"HOME\" || params.context === \"SEARCH-ENGINE-VIEW\" && typeof params.args.reference === \"undefined\") {//reset breadCrumb\n      this.resetBreadCrumb(params); //clean breadcrumb and add new item with entity name\n    } else\n    if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\n      if (secondLastCrumb && self.getParentContext(params.context) == self.getParentContext(secondLastCrumb.context)) {\n        self.cleanBreadCumb(secondLastCrumb, params, 3);\n      } else if (lastCrumb && self.getParentContext(params.context) == self.getParentContext(lastCrumb.context)) {\n        self.cleanBreadCumb(lastCrumb, params, 2);\n      } else {\n        self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\n      }\n    } else\n    if (params.context == \"TEMPLATEENGINE-VIEW\" || params.context === \"SEARCH-ENGINE-VIEW\") {\n      var firstCrumb = self.info[-1];\n      if (firstCrumb && firstCrumb.context != \"TEMPLATEENGINE-VIEW\" &&\n      firstCrumb.context != \"SEARCH-ENGINE-VIEW\" &&\n      firstCrumb.context != \"HOME\") {\n        self.info = {};\n        pathSize = Object.keys(self.info).length;\n        lastCrumb = null;\n      }\n      if (params.args.referenceType == \"FACT\" || params.args.referenceType == \"VIRTUAL\") {\n        var factCrumbItem = self.hasGuidEntityInBreadCrumb(params.args.guidEntityCurrent);\n        var newFactCrumbItem = self.copyDataObjectWithoutReference(params);\n        if (params.args.level == 1) {\n          self.info = {};\n          self.info[-1] = newFactCrumbItem;\n        } else\n        if (lastCrumb && lastCrumb.args && lastCrumb.args.level == params.args.level) {\n          self.cleanBreadCumb(lastCrumb, params, 2);\n        } else if (!factCrumbItem) {\n          self.info[pathSize - 1] = newFactCrumbItem;\n        } else {\n          newFactCrumbItem.surrogateKey = factCrumbItem.surrogateKey;\n          self.info[newFactCrumbItem.surrogateKey] = newFactCrumbItem;\n          self.deleteRemainingCrumbs(newFactCrumbItem);\n        }\n      } else if (params.args.referenceType == \"ENTITY\") {\n        if (params.args.eventType != \"DATA-NAVIGATION\" && !self.hasXpathInBreadCrumb(params.args.xpath)) {\n          self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\n        }\n      }\n    } else\n    {\n      if (lastCrumb && self.getParentContext(params.context) == self.getParentContext(lastCrumb.context)) {\n        self.cleanBreadCumb(lastCrumb, params, 2);\n      } else {\n        self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\n      }\n    }\n    self.setBreadCrumbInfo(self.info);\n  },\n\n  updateLastCrumbParamsInfo: function updateLastCrumbParamsInfo(event, params) {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    if (pathSize > 0) {\n      $.extend(self.info[pathSize - 2].args, self.copyDataObjectWithoutReference(params.args));\n    }\n  },\n\n  hasXpathInBreadCrumb: function hasXpathInBreadCrumb(xpath) {\n    var self = this;\n    for (var i = -1; i < Object.keys(bizagi.navigator.info).length - 1; i += 1) {\n      var crumbItem = bizagi.navigator.info[i];\n      if (crumbItem.args.xpath == xpath) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  hasGuidEntityInBreadCrumb: function hasGuidEntityInBreadCrumb(guidEntity) {\n    var self = this;\n    for (var i = -1; i < Object.keys(bizagi.navigator.info).length - 1; i += 1) {\n      var crumbItem = bizagi.navigator.info[i];\n      if (crumbItem.args.guidEntityCurrent == guidEntity) {\n        return crumbItem;\n      }\n    }\n    return false;\n  },\n\n  cleanBreadCumb: function cleanBreadCumb(crumb, params, steps) {\n    var self = this;\n    var pathSize = Object.keys(self.info).length;\n    crumb = self.copyDataObjectWithoutReference(params);\n    self.info[pathSize - steps] = crumb;\n    this.deleteRemainingCrumbs(crumb);\n  },\n\n  drawDateNavigator: function drawDateNavigator(params) {\n    var self = this;\n    var currentLevel = Object.keys(self.info).length;\n    var showDateNavigator = currentLevel == 1;\n    if (params.args.showDateNavigator === false) {\n      showDateNavigator = false;\n    }\n    self.onDisplayDate(showDateNavigator);\n  },\n\n  /**\r\n      * Adjusts for home-navbar (back, print, etc.)\r\n      * @param {JSON} params \r\n      */\n  homeNavBarAdjust: function homeNavBarAdjust(params) {\n    if (params.context == \"HOME\") {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\n      $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\n    }\n  },\n\n  setEnabledLeftSidebar: function setEnabledLeftSidebar(params) {\n    if (params.data && params.data.belongs) {\n      if (params.data.belongs.toLeftSidebarCD) {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabledLeftSidebar\");\n      } else\n      {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabledLeftSidebar\");\n      }\n    }\n  },\n\n  setEnabledRightSidebar: function setEnabledRightSidebar(params) {\n    var self = this;\n    if (params.data && params.data.belongs) {\n      if (params.data.belongs.toRightSidebarCD) {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"disabled-right-sidebar\");\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabled-right-sidebar\");\n      } else\n      {\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\n      }\n    }\n  },\n\n  //Show back button only in activity or plan context\n  setEnabledBreadCrumb: function setEnabledBreadCrumb(params) {\n    var self = this;\n    if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\n      self.setEnabledBackButton();\n      $(\".nav-items-ctn\", self.content).hide();\n      $(\".nav-items-ctn\", self.content).removeClass(\"toLeft\");\n      $(\".nav-items-ctn\", self.content).addClass(\"clearfix\");\n    } else\n    {\n      $(\".navbar-back\", self.content).hide();\n      $(\".nav-items-ctn\", self.content).show();\n      $(\".nav-items-ctn\", self.content).addClass(\"toLeft\");\n      $(\".nav-items-ctn\", self.content).removeClass(\"clearfix\");\n    }\n  },\n\n  /**\r\n      * add or remove the class to content wrapper for navbar\r\n      */\n  _addGridContainerClass: function _addGridContainerClass(toAdd) {\n    var self = this,\n    _$contentWrapper = self.getContent().closest(\"#content-wrapper\");\n\n    if (toAdd) {\n      _$contentWrapper.addClass(self.Class.CLASSES.GRID_CONTAINER);\n    } else {\n      _$contentWrapper.removeClass(self.Class.CLASSES.GRID_CONTAINER);\n    }\n  },\n\n  /**\r\n      * add properties to DOM if the context is TEMPLATEENGINE-VIEW\r\n      * @param {JSON} params \r\n      */\n  setPropertiesForEngineTemplate: function setPropertiesForEngineTemplate(params) {\n    var self = this,\n    _CONTEXTS = self.Class.CONTEXTS,\n    _contextsForProjectGrid = [\n    _CONTEXTS.TEMPLATE_ENGINE_VIEW,\n    _CONTEXTS.CASES_TEMPLATE_VIEW],\n\n    _needsProjectGrid =\n    _contextsForProjectGrid.indexOf(params.context) !== -1;\n\n    self._addGridContainerClass(_needsProjectGrid);\n  },\n\n  /**\r\n      * Hide back button if from caseLink, only one time.\r\n      */\n  setEnabledBackButton: function setEnabledBackButton() {\n    var self = this;\n    if (self.caseLink === true) {\n      self.caseLink = false;\n      $(\".navbar-back\", self.content).hide();\n    } else\n    {\n      $(\".navbar-back\", self.content).show();\n    }\n  },\n\n  /**\r\n      * Return actual level.\r\n      */\n  getLevel: function getLevel() {\n    var self = this;\n    return Object.keys(self.info).length;\n  },\n\n  refresh: function refresh(ev, params) {\n    var self = this;\n    self.params = params.args;\n    this.homeNavBarAdjust(params);\n    this.setEnabledLeftSidebar(params);\n    this.setEnabledRightSidebar(params);\n    this.setEnabledBreadCrumb(params);\n    this.setPropertiesForEngineTemplate(params);\n    if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\n      params.args.histName = self.getActivityName(params);\n    }\n\n    self.setStateBarNavigator(params.context);\n\n    if (!params.skipRefresh) {\n      if (params.args.histName && params.args.histName != \"\") {\n        self.updateInfo(params);\n      }\n    }\n    var showSteps = params.args.eventType != \"DATA-NAVIGATION\";\n    self.drawBreadCrumb(self.info, showSteps);\n    self.drawDateNavigator(params);\n  },\n  goToBack: function goToBack() {\n    var self = this;\n    bizagi.workportal.widgets.backnavigator.GO_TO_BACK(self);\n  },\n\n  getActivityName: function getActivityName(params) {\n    var activityName;\n    var idWorkItem = params.args.idWorkitem;\n    for (var i = 0; i < params.args.currentState.length; i++) {\n      var state = params.args.currentState[i];\n      if (state && state.idWorkItem == idWorkItem) {\n        if (state.displayName) {\n          activityName = state.displayName;\n        } else\n        if (state.state) {\n          activityName = state.state;\n        }\n        break;\n      }\n    }\n    return activityName; //+ '-' + params.args.radNumber;\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      * @param params\r\n      */\n  setStateBarNavigator: function setStateBarNavigator(context) {\n    var self = this;\n    if (context == \"ACTIVITY\") {\n      self.taskOptions();\n    } else {\n      self.getButtonForActivityAction().hide();\n    }\n    if (context == \"ACTIVITY\" || context == \"ACTIVITYPLAN\") {\n      self.showButtonPrintForm(true);\n      self.showUrlHelp(true);\n      self.flagDisplayDate = false;\n      self.onDisplayDate(false);\n    } else\n    {\n      self.showButtonPrintForm(false);\n      self.showUrlHelp(false);\n      self.flagDisplayDate = true;\n      self.onDisplayDate(true);\n    }\n  },\n\n  getDataObj: function getDataObj() {\n    var self = this,\n    regional = self.getResource(\"datePickerRegional\"),\n    currentDate = new Date(),\n    currentDay = regional.dayNames[currentDate.getDay()],\n    currentMonth = regional.monthNames[currentDate.getMonth()];\n\n    return {\n      \"date\": currentDay + \", \" + currentMonth + \" \" + currentDate.getDate() + \", \" + currentDate.getFullYear() };\n\n  },\n\n  /**\r\n      * Copy object by value, not reference\r\n      */\n  copyDataObjectWithoutReference: function copyDataObjectWithoutReference(params) {\n    return $.extend(true, {}, params);\n  },\n  /**\r\n      *\r\n      * @param show\r\n      */\n  showButtonPrintForm: function showButtonPrintForm(show) {\n    var self = this;\n    var $content = self.getContent();\n    var $wrapperButtonPrint = $content.find(\".navbar-print\");\n\n    if (show === true) {\n      $wrapperButtonPrint.show();\n    } else\n    {\n      $wrapperButtonPrint.hide();\n    }\n  },\n  showUrlHelp: function showUrlHelp(show) {\n    var self = this;\n    var $content = self.getContent();\n    var $wrapperUrlHelp = $content.find(\".navbar-help\");\n    if (show === true) {\n      var helpUrl = \"\";\n      for (var i = 0; i < self.params.currentState.length; i++) {\n        if (self.params.currentState[i].idTask === self.params.idTask) {\n          helpUrl = bizagi.util.validateUrlWellFormed(self.params.currentState[i].helpUrl);\n        }\n      }\n      if (!bizagi.util.isEmpty(helpUrl)) {\n        $wrapperUrlHelp.show();\n\n        $(\".navbar-help a\").attr(\"href\", helpUrl);\n      }\n    } else\n    {\n      $wrapperUrlHelp.hide();\n    }\n  },\n  /**\r\n      *\r\n      */\n  printCase: function printCase() {\n    var self = this;\n    var printParams = {\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      idTask: self.params.idTask,\n      fileName: self.params.caseNumber + \"_\" + self.params.process };\n\n\n    self.printFormCommand.print(printParams);\n  },\n\n  /**\r\n      * validate if is necessary to show release or take ownership buttons\r\n      */\n  taskOptions: function taskOptions() {\n    var self = this,\n    buttonOption = self.getButtonForActivityAction(),\n    buttonContainer = buttonOption.parent(),\n    textForButton;\n    $.when(self._taskOptionsRequest()).done(function (data) {\n      buttonContainer.removeClass('nae--loading');\n      textForButton = data.showRelease ? self.getResource('render-actions-release') : self.getResource('render-actions-take-ownership');\n      buttonOption.text(textForButton);\n      self.showReleaseButton = data.showRelease;\n      if (data.showRelease === true || data.showTakeOwnership === true) {\n        buttonOption.show();\n        buttonContainer.show();\n      } else buttonOption.hide();\n    });\n  },\n\n  /**\r\n      * make request for taskOptions\r\n      * and on done resolve _waitShowCancelCase promise with showCancelCase value\r\n      * @returns promise of TaskOptions request\r\n      */\n  _taskOptionsRequest: function _taskOptionsRequest() {\n    var self = this,\n    _done = function _done(result) {\n      if (self._waitShowCancelCase !== undefined)\n      self._waitShowCancelCase.resolve(result.showCancelCase);\n    },\n    _request = self.taskOptionsWidget.getTaskOptions(self.params.idCase, self.params.idWorkitem);\n\n    _request.done(_done);\n    return _request;\n  },\n\n  /***\r\n      * create a new promise for wait the result of endpoint taskOptions\r\n      * @returns promise\r\n      */\n  getShowCancelCase: function getShowCancelCase() {\n    var self = this;\n    self._waitShowCancelCase = new $.Deferred();\n    return self._waitShowCancelCase;\n  },\n\n  /**\r\n      * return the action button for release or takeOwnership\r\n      */\n  getButtonForActivityAction: function getButtonForActivityAction() {\n    var self = this,\n    content = self.getContent(),\n    buttonContainer = $(\".navbar-assignation-everyone\", content);\n    return buttonContainer.find(\".ae-action\");\n  },\n\n  /**\r\n      * trigger release or takeOwnership action\r\n      */\n  actionButtonEvent: function actionButtonEvent() {\n    var self = this,\n    onCloseReleaseDialogBox = function onCloseReleaseDialogBox() {\n      self.destroyReleaseDialogBox();\n    };\n\n    $(\".navbar-assignation-everyone\", self.getContent()).addClass('nae--loading');\n    if (self.showReleaseButton) {\n      self.releaseDialogBox.formContent.dialog({\n        resizable: false,\n        draggable: false,\n        height: \"auto\",\n        width: \"660px\",\n        modal: true,\n        title: self.getResource(\"workportal-widget-dialog-box-release-ok\"),\n        maximize: true,\n        close: onCloseReleaseDialogBox });\n\n    } else {\n      self.actionTakeOwnership();\n    }\n  },\n\n  /**\r\n      * destroy correctly the release confirmation modal\r\n      */\n  destroyReleaseDialogBox: function destroyReleaseDialogBox() {\n    var self = this,\n    modal = self.releaseDialogBox.formContent;\n    $(\".navbar-assignation-everyone\", self.getContent()).removeClass('nae--loading');\n    modal.dialog(\"destroy\");\n    modal.detach();\n  },\n\n  /**\r\n      * Triggered when user click over accept button and validate autoSave\r\n      */\n  onClickAcceptRelease: function onClickAcceptRelease() {\n    var self = this,\n    done = function done() {\n      $(document).data('auto-save', '');\n      self.launchReleaseActivity();\n    },\n    fail = function fail() {\n      self.destroyReleaseDialogBox();\n    };\n    $.when(bizagi.util.autoSave()).done(done).fail(fail);\n  },\n\n  /**\r\n      * method called after autoSave is done\r\n      */\n  launchReleaseActivity: function launchReleaseActivity() {\n    var self = this;\n    var params = {\n      idCase: self.params.idCase,\n      idWorkItem: self.params.idWorkitem };\n\n\n    self.releaseDialogBox.formContent.dialog(\"destroy\");\n    self.releaseDialogBox.formContent.detach();\n\n    self.onRenderFinishParams.args.form.dataService.multiactionService.disableRequests();\n    $.when(self.validateIfRenderingIsCallingAEndpoint()).done(function () {\n      $.when(self.dataService.releaseActivity(params)).done(function (data) {\n        var status = data.status ? data.status : \"\";\n        switch (status) {\n          case \"Success\":\n            self.taskReleased();\n            break;\n\n          case \"ConfigurationError\":\n            self.showMessageAndRefreshContext(\"workportal-widget-dialog-box-release-configuration-error-message\", params);\n            break;\n\n          default:\n            self.showMessageAndRefreshContext(\"workportal-widget-dialog-box-release-error-message\", params);\n            break;}\n\n        self.waitForLoadCompletely();\n      }).fail(function () {\n        self.showMessageAndRefreshContext(\"workportal-widget-dialog-box-release-error-message\", params);\n        self.waitForLoadCompletely();\n      });\n    });\n  },\n\n  /**\r\n      * Show message, when user clicks on ok button, refresh the context\r\n      * @param {string} keyResourceDescriptionMessage \r\n      * @param {object} params \r\n      */\n  showMessageAndRefreshContext: function showMessageAndRefreshContext(keyResourceDescriptionMessage, params) {\n    var self = this;\n    var message = self.getResource(keyResourceDescriptionMessage).replace(\"{0}\", params.idWorkItem);\n    $.when(bizagi.showMessageBox(message, self.getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false)).\n    done(function () {self.refreshActivityContext();});\n  },\n\n  /**\r\n      * Returns always a resolve when the request is successful or not\r\n      * @returns deferred multiaction service in the form \r\n      */\n  validateIfRenderingIsCallingAEndpoint: function validateIfRenderingIsCallingAEndpoint() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.onRenderFinishParams.args.form.dataService.multiactionService.validateIfBatchIsExecuting())\n    // we only need to know when finishing the request with error or not\n    .always(function () {\n      deferred.resolve();\n    });\n    return deferred.promise();\n  },\n\n  /**\r\n      * Refresh the context (all widgets in that context)\r\n      */\n  refreshActivityContext: function refreshActivityContext() {\n    var self = this;\n    self.pub(\"notify\", {\n      type: self.params.showContextByMenuDashboard,\n      args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n  },\n\n  /**\r\n      * Triggered when user click over accept button\r\n      */\n  actionTakeOwnership: function actionTakeOwnership() {\n    var self = this;\n    var params = {\n      idCase: self.params.idCase,\n      idWorkItem: self.params.idWorkitem };\n\n    $.when(self.dataService.takeOwnershipActivity(params)).done(function (data) {\n\n      var status = data.status ? data.status : \"\";\n      switch (status) {\n        case \"Success\":\n          // Refresh case\n          self.pub(\"notify\", {\n            type: self.params.showContextByMenuDashboard,\n            args: $.extend(self.params, { refreshAllWidgets: true }) });\n\n\n          break;\n\n        default:\n          var _defaultMessage = self.getResource(\"workportal-widget-dialog-box-takeownership-error-message\").replace(\"{0}\", params.idWorkItem),\n          _message = data.message ? data.message : _defaultMessage;\n          bizagi.showMessageBox(_message, self.getResource(\"workportal-general-error-page-title\"), \"error\", false);\n          break;}\n\n      self.waitForLoadCompletely();\n\n    }).fail(function () {self.waitForLoadCompletely();});\n  },\n\n  /**\r\n      * on task released send to inbox with toast notification\r\n      */\n  taskReleased: function taskReleased() {\n    var self = this;\n    //go to inbox\n    self.publish(\"changeWidget\", {\n      widgetName: bizagi.util.defaultWidget() });\n\n    var options = {\n      closeButton: true,\n      onclick: function onclick() {\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: self.params.idCase,\n          idWorkItem: self.params.idWorkitem,\n          idWorkflow: self.params.idWorkflow,\n          idTask: self.params.idTask,\n          referrer: undefined });\n\n      },\n      timeOut: 10000 };\n\n    self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-dialog-box-release-configuration-success-message\"), self.params.histName, options);\n  },\n\n  waitForLoadCompletely: function waitForLoadCompletely() {\n    var self = this;\n    var content = self.content;\n    var fn = function fn() {\n      var ol = $('body #loadModuleStatus > *');\n      var il = $(content).closest('.content-portal').find('#home-content').find('.ui-bizagi-loading-message');\n      if (ol.length === 0 && il.length === 0) {\n        $(\".navbar-assignation-everyone\", content).removeClass('nae--loading');\n      } else setTimeout(function () {\n        $(\".navbar-assignation-everyone\", content).addClass('nae--loading');\n        fn();\n      }, 100);\n    };\n    fn();\n  },\n\n  /**\r\n         * Close dialog release case\r\n         */\n  onClickCancelRelease: function onClickCancelRelease() {\n    var self = this;\n    $(\".navbar-assignation-everyone\", self.getContent()).removeClass('nae--loading');\n    self.releaseDialogBox.formContent.dialog(\"destroy\");\n    self.releaseDialogBox.formContent.detach();\n  },\n  /**\r\n      * Hides the date displayed in the widget\r\n      */\n  onDisplayDate: function onDisplayDate(show) {\n    var self = this,\n    $content = self.getContent(),\n    $date = $content.find(\".navbar-date\");\n\n    if (show && self.flagDisplayDate) {\n      $date.show();\n    } else\n    {\n      $date.hide();\n    }\n  },\n\n  /**\r\n      * Clean widget\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n    if ($content) {\n      var $container = $content.find(\"ul\");\n\n      self.unsub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\n      self.unsub(\"UPDATE_LASTCRUMBPARAMS_INFO\");\n      self.unsub(\"NAVIGATE\");\n      self.unsub(\"NAVIGATOR_GETLEVEL\");\n      self.unsub(\"NAVIGATOR_BACK\");\n      $container.off(\"click\", \"li\");\n\n      $(\".navbar-print\", self.content).off(\"click\", $.proxy(self.printCase, self));\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.navigator\", [\"workportalFacade\", \"dataService\", \"accumulatedcontext\", bizagi.workportal.widgets.navigator]);","/**\r\n *   Name: Bizagi Workportal Desktop back Navigator\r\n */\nbizagi.workportal.widgets.navigator.extend(\"bizagi.workportal.widgets.backnavigator\", {\n\n  GO_TO_BACK: function GO_TO_BACK(navigatorInstance) {\n    navigatorInstance.defer = $.Deferred();\n    if (bizagi && bizagi.referrerParams) {\n      var widget = bizagi.referrerParams.referrer || bizagi.util.defaultWidget();\n\n      // switch referer widget\n      switch (widget) {\n        case \"inbox\":\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"inboxGrid\":\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: widget,\n            restoreStatus: true });\n\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"homeportal\":\n          navigatorInstance.goToPreviousCrumb();\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"search\":\n          navigatorInstance.publish(\"executeAction\", {\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\n            radNumber: bizagi.referrerParams.radNumber || \"\",\n            page: bizagi.referrerParams.page || 1,\n            onlyUserWorkItems: false });\n\n          bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          break;\n        case \"queryform\":\n          var params = {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n            queryFormAction: bizagi.referrerParams.queryForm.actionForm,\n            notMigratedUrl: \"\",\n            queryParams: bizagi.referrerParams.queryForm.queryParams,\n            pageToShow: bizagi.referrerParams.queryForm.pageToShow,\n            queryForm: bizagi.referrerParams.queryForm.queryForm };\n\n\n          $.extend(params, bizagi.referrerParams.queryForm.data, {\n            recalculateQueryForm: true });\n\n\n          params.modalParameters.dialogOpened = navigatorInstance.defer;\n          $.when(bizagi.util.autoSave()).done(function () {\n            $(document).data('auto-save', '');\n            navigatorInstance.publish(\"showDialogWidget\", params);\n          });\n\n          navigatorInstance.defer.promise().done(function () {\n            bizagi.workportal.actions.routing.LAUNCH_NOTIFICATION();\n          });\n          break;\n        case \"reports\":\n          var params = {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART,\n            endPoint: bizagi.referrerParams.reports.endPoint,\n            filters: {},\n            tab: bizagi.referrerParams.reports.tab };\n\n          bizagi.referrerParams.reports.fromBackButton = true;\n          params.modalWasOpened = navigatorInstance.defer;\n          navigatorInstance.publish(\"changeWidget\", params);\n          break;\n        case \"folders\":\n          var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\n          $.when(navigatorInstance.dataService.getCasesByFolder(url)).\n          done(function (data) {\n            data.customized = true;\n            data.urlParameters = bizagi.referrerParams.urlParameters;\n            // Define title of widget\n            data.title = bizagi.referrerParams.name;\n            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\n            data.casesGroupedByFolder = true;\n            data.idFolder = bizagi.referrerParams.id;\n            navigatorInstance.publish(\"changeWidget\", {\n              widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\n              data: data,\n              referrerParams: {} });\n\n          });\n          break;\n        case \"LPQueries\":\n          bizagi.referrerParams.sidebarData.isFromQueriesBackButton = true;\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n            data: {\n              route: \"reports\",\n              params: { module: 'none' } } });\n\n\n          break;\n        default:\n          navigatorInstance.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\n            restoreStatus: true });\n\n          break;}\n\n    }\n  } },\n{});\n\nbizagi.injector.register(\"backNavigator\", [bizagi.workportal.widgets.backnavigator]);","/**\r\n * Name: Bizagi Workportal Desktop Sidebar Controller\r\n * Author: Mauricio Snchez  -  Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sidebarhome\", {}, {\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"sidebarhome\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sidebarhome\").concat(\"#sidebarhome-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"sidebarhome\");\n    self.content = $(template.render({}));\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sidebarhome', ['workportalFacade', 'dataService', bizagi.workportal.widgets.sidebarhome], true);","/**\r\n * Name: Bizagi Workportal Desktop Dashboard Controller\r\n * Author: Mauricio Snchez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.usersummary\", {}, {\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.workportalFacade = workportalFacade;\n    self.dataService = dataService;\n    self.params = params;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"usersummary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.usersummary\").concat(\"#usersummary-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"usersummary\");\n\n    return $.when(self.getData()).done(function (data) {\n      self.content = template.render(data);\n    });\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $container = $(\".wdg-usmry-stk-container\", self.getContent());\n\n    $container.on(\"click\", \"div.wdg-usmry-see-more\", $.proxy(self.showStakeholders, self));\n  },\n\n  /**\r\n      * Show the tooltip if the user have more of 3 stakeholder related\r\n      */\n  showStakeholders: function showStakeholders() {\n    var self = this,\n    $tooltip = $(\".wdg-usmry-stk-overlay\", self.getContent());\n\n    $tooltip.show(\"fast\", function () {\n      $tooltip.click(function (e) {\n        e.stopPropagation();\n      });\n      $(document).one(\"click\", function () {\n        $tooltip.hide(\"fast\");\n      });\n    });\n  },\n\n  /**\r\n      * End point service to get User Info\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    if (!bizagi.currentUser) {\n      return self.dataService.getCurrentUser().then(function (data) {\n        bizagi.currentUser = data;\n        return self.getInfoToUser(data);\n      });\n    }\n\n    return this.getInfoToUser(bizagi.currentUser);\n  },\n\n  /**\r\n      * Organize the user info to return the necessary format\r\n      */\n  getInfoToUser: function getInfoToUser(currentUser) {\n    var stakeholders = [];\n    var totalStakeholders = currentUser.associatedStakeholders.length;\n    var stakeholdersToShow = currentUser.associatedStakeholders.slice(0, 2);\n    var stakeholdersHidden = currentUser.associatedStakeholders.slice(2, totalStakeholders);\n    var showMore = totalStakeholders > 2;\n\n    $.each(stakeholdersToShow, function (index, item) {\n      stakeholders.push(item.displayName);\n    });\n\n    var data = {\n      user: currentUser.userName,\n      stakeholders: stakeholders.length > 0 ? stakeholders.join(', ') : '--',\n      stakeholdersHidden: stakeholdersHidden.length > 0 ? stakeholdersHidden : '',\n      showMore: showMore,\n      orgArray: stakeholders,\n      initials: currentUser.initials };\n\n\n    if (currentUser.userPicture) {\n      data.photo = 'data:image/png;base64,' + currentUser.userPicture;\n    }\n\n    return data;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.usersummary', ['workportalFacade', 'dataService', bizagi.workportal.widgets.usersummary]);","/**\r\n * Bizagi Workportal Desktop My Shortcuts list controller\r\n * @author Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.shortcuts\", {}, {\n  /**\r\n                                                                                      * Constructor\r\n                                                                                      * @param workportalFacade instance of facade, mandatory\r\n                                                                                      * @param dataService instance of service tier, mandatory\r\n                                                                                      * @param params extra params, its not mandatory\r\n                                                                                      * @param processActionService\r\n                                                                                      * @param accumulatedcontext\r\n                                                                                      * @param notifier\r\n                                                                                      */\n  init: function init(workportalFacade, dataService, processActionService, accumulatedcontext, notifier, params) {\n    var self = this;\n    self.requestsInProgressProcessGuid = {};\n    self.params = params;\n    self.processActionService = processActionService;\n    self.accumulatedcontext = accumulatedcontext;\n    self.notifier = notifier;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"myshortcuts\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.shortcuts\").concat(\"#shortcuts-wrapper\") });\n\n  },\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {string} html\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"myshortcuts\");\n\n    return $.when(self.getData()).done(function (data) {\n      self.content = data.length > 0 ? template.render({ shortcuts: data }) : '';\n      return self.content;\n    });\n  },\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var $content = self.getContent();\n    $('.wdg-srcts-container', $content).on(\"click\", $.proxy(self.onClickShortcut, self));\n  },\n  /**\r\n      *\r\n      * @returns {*}\r\n      */\n  getData: function getData() {\n    var self = this;\n\n    return self.dataService.getMyShortcutsByCategory({ icon: true }).then(function (data) {\n      self.model = {};\n      var category,i = -1;\n\n      while (category = data[++i]) {\n        var shortcut,j = -1;\n\n        while (shortcut = category.items[++j]) {\n          var id = Math.guid();\n          shortcut.id = id;\n          self.model[id] = shortcut;\n        }\n      }\n      return data;\n    });\n  },\n  /**\r\n      * event listener for each action in the shrotcuts list\r\n      * @param ev\r\n      */\n  onClickShortcut: function onClickShortcut(ev) {\n    var self = this;\n    var $target = $(ev.target).closest('.wdg-srcts-container');\n    var shortcut = self.model[$target.data('id')];\n    self.target = $target;\n\n    if (self.requestsInProgressProcessGuid[shortcut.idProcess])\n    return;\n\n    self.startLoading(self.target, shortcut.idProcess);\n\n    if (shortcut) {\n      self.dataService.actionsHasStartForm({ processId: shortcut.idProcess }).done(function (data, $target) {\n        if (!data.startForm) {\n          self.dataService.actionCreateCase(shortcut).done(function (data) {\n            $.when(self.processActionService.launchActionsAfterCreateCase({\n              idCase: data.caseId,\n              caseNumber: data.caseNumber,\n              includeRadicationPhase: data.includeRadicationPhase,\n              action: shortcut })).\n            done(function () {\n              self.stopLoading(self.target, shortcut.idProcess);\n            });\n\n          }).fail(function () {\n            self.stopLoading(self.target, shortcut.idProcess);\n          });\n        } else\n        {\n          var action = {\n            displayName: shortcut.displayName,\n            hasStartForm: data.startForm,\n            showConfirmation: shortcut.showConfirmation };\n\n\n          $.when(self.processActionService.executeProcessAction({\n            action: action,\n            mappingstakeholders: true,\n            guidprocess: shortcut.idProcess })).\n          done(function () {\n            self.stopLoading(self.target, shortcut.idProcess);\n          });\n        }\n      }).fail(function () {\n        self.notifier.showErrorMessage(\n        printf(\n        bizagi.localization.getResource('workportal-widget-sortbar-execute-error-message'),\n        shortcut.displayName));\n\n\n        self.stopLoading(self.target, shortcut.idProcess);\n      });\n    }\n  },\n  /**\r\n      * Detach handlers\r\n      */\n  clean: function clean() {\n    var self = this;\n    var $content = self.getContent();\n\n    if ($content) {\n      $('.wdg-srcts-container', $content).off('click');\n    }\n  },\n\n  /**\r\n      * Start loading shortcut\r\n      * */\n  startLoading: function startLoading($target, idProcess) {\n    var self = this;\n    $target.prepend(\"<div class=\\\"bz-wp-ls-list-item-loading\\\"><div class=\\\"ui-bizagi-loading-icon\\\"></div></div>\");\n    self.requestsInProgressProcessGuid[idProcess] = true;\n  },\n\n  /**\r\n      * Stop loading shortcut\r\n      * */\n  stopLoading: function stopLoading($target, idProcess) {\n    var self = this;\n    $target.find(\".bz-wp-ls-list-item-loading\").remove();\n    delete self.requestsInProgressProcessGuid[idProcess];\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.shortcuts', ['workportalFacade', 'dataService', 'processActionService', 'accumulatedcontext', 'notifier', bizagi.workportal.widgets.shortcuts]);","/**\r\n *   Name: Bizagi Workportal Right Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.right.sidebar\", {}, {\n\n  /**\r\n                                                                                          *   Constructor\r\n                                                                                          */\n  init: function init(workportalFacade, dataService, behaviorCollapsiblePanels, params) {\n    var self = this;\n    self.behaviorCollapsiblePanels = behaviorCollapsiblePanels;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"right-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.right.sidebar\").concat(\"#rightsidebar-wrapper\") });\n\n\n    if (bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")) {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-rightpanel\");\n      $(\"#right-sidebar-wrapper\").addClass(\"always-collpase\");\n    }\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"right-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    if (self.params && self.params.contextsRightSidebarCaseDashboard) {\n      self.params.contextsRightSidebarCaseDashboard.forEach(function (context) {\n        self.sub(context, $.proxy(self.updateView, self));\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      * @param params\r\n      */\n  updateView: function updateView(event, params) {\n    var self = this;\n\n    self.enableOrDisableRightSidebar(params.context);\n    self.eventsHandler();\n\n    if (params.context === \"ACTIVITY\" || params.context === \"ACTIVITYPLAN\") {\n      self.addBottomPadding();\n    }\n\n  },\n  addBottomPadding: function addBottomPadding() {\n    $('.content-dashboard-right-sidebar .content-right-sidebar').css('padding-bottom', '30px');\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onCollapsePanel: function onCollapsePanel(event) {\n\n    var self = this;\n    var $target = event ? $(event.currentTarget) : $(\"#project-collapse-rightpanel\");\n    var classSuffix = \"-rightpanel\";\n\n    self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, classSuffix, false);\n\n    if ($target.closest(\".ui-bizagi-wp-project-open-rightpanel\").length > 0) {\n      self.pub(\"notify\", {\n        type: \"EXPANDED_RIGHT_SIDEBAR\" });\n\n    }\n    $(\"#right-sidebar-wrapper\").removeClass(\"always-collpase\");\n\n    self.publish(\"openCloseSidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  disableSidebar: function disableSidebar() {\n    $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\n    $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  enableSidebar: function enableSidebar() {\n    $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"disabled-right-sidebar\");\n    $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabled-right-sidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  openRightSidebar: function openRightSidebar() {\n    var self = this;\n    $(\"#right-sidebar-wrapper\").removeClass(\"always-collpase\");\n    self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, \"-rightpanel\", true);\n  },\n\n  closeRightSidebar: function closeRightSidebar() {\n    var self = this;\n    self.behaviorCollapsiblePanels.collapseSideBar(\"-rightpanel\");\n  },\n\n\n  /**\r\n      *\r\n      * @param currentContext\r\n      */\n  enableOrDisableRightSidebar: function enableOrDisableRightSidebar(currentContext) {\n    var self = this;\n\n    var setDisabledSidebar = false;\n    self.params.contextsWithoutRightSidebarCaseDashboard.forEach(function (context) {\n      if (context === currentContext) {\n        self.disableSidebar();\n        setDisabledSidebar = true;\n      }\n    });\n    if (setDisabledSidebar === false) {\n      self.enableSidebar();\n    }\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  eventsHandler: function eventsHandler() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).on(\"click\", $.proxy(self.onCollapsePanel, self));\n\n    self.sub(\"OPEN_RIGHT_SIDEBAR\", $.proxy(self.openRightSidebar, self));\n    self.sub(\"CLOSE_RIGHT_SIDEBAR\", $.proxy(self.closeRightSidebar, self));\n    self.sub(\"DISABLED_RIGHT_SIDEBAR\", $.proxy(self.disableSidebar, self));\n    self.sub(\"ENABLED_RIGHT_SIDEBAR\", $.proxy(self.enableSidebar, self));\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this;\n    if (self.params && self.params.contextsRightSidebarCaseDashboard) {\n      self.params.contextsRightSidebarCaseDashboard.forEach(function (context) {\n        self.unsub(context, $.proxy(self.updateView, self));\n      });\n    }\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\n\n    self.unsub(\"OPEN_RIGHT_SIDEBAR\", $.proxy(self.openRightSidebar, self));\n    self.unsub(\"CLOSE_RIGHT_SIDEBAR\", $.proxy(self.closeRightSidebar, self));\n    self.unsub(\"DISABLED_RIGHT_SIDEBAR\", $.proxy(self.disableSidebar, self));\n    self.unsub(\"ENABLED_RIGHT_SIDEBAR\", $.proxy(self.enableSidebar, self));\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.right.sidebar\", [\"workportalFacade\", \"dataService\", \"behaviorCollapsiblePanels\", bizagi.workportal.widgets.right.sidebar], true);","/**\r\n *   Name: Bizagi Workportal Left Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.left.sidebar\", {}, {\n\n  /**\r\n                                                                                         *   Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, behaviorCollapsiblePanels, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self.behaviorCollapsiblePanels = behaviorCollapsiblePanels;\n    //Load templates\n    self.loadTemplates({\n      \"left-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.left.sidebar\").concat(\"#leftsidebar-wrapper\") });\n\n\n    if (bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")) {\n      $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-leftpanel\");\n      $(\"#left-sidebar-wrapper\").addClass(\"always-collpase\");\n    }\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"left-sidebar\");\n    self.content = template.render({});\n\n    return self.content;\n  },\n\n  /**\r\n      *\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.eventsHandler();\n  },\n\n  /**\r\n      * Configure event handlers\r\n      */\n  eventsHandler: function eventsHandler() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).on(\"click\", $.proxy(self.onCollapsePanel, self));\n\n    self.showTooltip($(\".bz-icon-right-outline\", self.content), bizagi.localization.getResource(\"workportal-sidebar-show-more-tooltip\"));\n    self.showTooltip($(\".bz-icon-left-outline\", self.content), bizagi.localization.getResource(\"workportal-sidebar-show-less-tooltip\"));\n\n  },\n  showTooltip: function showTooltip(classArrow, textTooltip) {\n    classArrow.tooltip({\n      content: textTooltip,\n      tooltipClass: \"custom-tooltip-styling-bottom-bar\",\n      position: {\n        my: \"left+15 center\",\n        at: \"right top+8\",\n        of: classArrow } });\n\n\n  },\n\n  /**\r\n      *\r\n      * @param event\r\n      */\n  onCollapsePanel: function onCollapsePanel(event) {\n    $('.ui-tooltip.custom-tooltip-styling-bottom-bar').hide();\n    var self = this;\n    var $target = event ? $(event.currentTarget) : $(\"#project-collapse-leftpanel\");\n    var classSuffix = $target.prop(\"id\") === \"project-collapse-rightpanel\" ? \"-rightpanel\" : \"-leftpanel\";\n\n    self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, classSuffix, false);\n    $(\"#left-sidebar-wrapper\").removeClass(\"always-collpase\");\n    self.publish(\"openCloseSidebar\");\n  },\n\n  /**\r\n      *\r\n      */\n  clean: function clean() {\n    var self = this;\n    $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\n  } });\n\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.left.sidebar\", [\"workportalFacade\", \"dataService\", \"behaviorCollapsiblePanels\", bizagi.workportal.widgets.left.sidebar], true);","/**\r\n *   Name: Bizagi Workportal Desktop Widget Dummy\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dummy\", {}, {\n  /**\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    self.content = $(\"<div></div>\");\n    return self.content;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.dummy\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.dummy]);","/**\r\n *   Name: Bizagi Workportal Desktop Sidebar Controller\r\n *   Author: Mauricio Snchez  -  Danny Gonzalez\r\n */\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sidebar\", {}, {\n  /**\r\n                                                                                    * Constructor\r\n                                                                                    */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sidebar\").concat(\"#sidebar-wrapper\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"sidebar\");\n    self.content = $(template.render({}));\n\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sidebar', ['workportalFacade', 'dataService', bizagi.workportal.widgets.sidebar], true);","/**\r\n * Admin module to case massively reassign\r\n * \r\n * @author Edward J Morales\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.cases\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC;\n  },\n  /*\r\n      *   Renders the content for the current controller\r\n      */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"admin.cases\");\n    var content = self.content = $.tmpl(template);\n\n    return content;\n  } });","/**\r\n * Admin / Cases Search\r\n * \r\n * @author Christian Collazos\r\n */\n\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.caseSearch\", {}, {\n  /*\r\n                                                                                            *   Returns the widget name\r\n                                                                                            */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     */\n  renderContent: function renderContent() {\n    var self = this,\n    _defer = new $.Deferred();\n    var template = self.getTemplate(\"admin.case.search\");\n    var content;\n\n    content = self.content = $.tmpl(template, {});\n    $.when(self.loadtemplates()).always(function () {\n      _defer.resolve(content);\n    });\n    return _defer.promise();\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {} });","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.adhoc.create.process\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n\n    var self = this;\n\n    self.notifier = bizagi.injector.get(\"notifier\");\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    // Load Templates\n    self.loadTemplates({\n      \"adhoc.create.process\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.adhoc.create.process\").concat(\"#adhoc-create-process\") });\n\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      * @return {*}\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    template = self.getTemplate(\"adhoc.create.process\");\n    self.content = template.render();\n    return self.content;\n  },\n\n  /**\r\n      * Method called after render widget\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self.addEventHandlers();\n  },\n\n  /**\r\n      * Called when change input and validate form\r\n      * @returns {boolean}\r\n      */\n  validateForm: function validateForm() {\n    var self = this;\n    var isValidForm = false;\n    var name = $(\".js-input-name\", self.content);\n    if (name.val() && name.val() !== \"\") {\n      name.next().find(\"span\").html(\"\");\n      isValidForm = true;\n    } else {\n      var nameValidation = bizagi.localization.getResource(\"workportal-general-error-field-required\");\n      nameValidation = nameValidation.replace(\"{0}\", bizagi.localization.getResource(\"workportal-widget-admin-adhoc-processes-name\").toLowerCase());\n      name.next().find(\"span\").html(nameValidation);\n      isValidForm = false;\n    }\n    return isValidForm;\n  },\n\n  /**\r\n      * Trigger when click cancel button\r\n      */\n  onClickCancel: function onClickCancel() {\n    var self = this;\n    self.publish(\"closeCurrentDialog\");\n  },\n\n  /**\r\n      * Trigger when submit form\r\n      * @param event\r\n      */\n  onSubmitFormCreateProcess: function onSubmitFormCreateProcess(event) {\n    event.preventDefault();\n    var self = this;\n    $(\".js-input-name\", self.content).on(\"input\", $.proxy(self.validateForm, self));\n    if (self.validateForm()) {\n      var paramsNewProcess = {\n        displayName: $(\"input\", self.content).val() };\n\n      bizagi.showErrorAlertDialog = false;\n      $.when(self.dataService.createNewAdhocProcess(paramsNewProcess)).done(function (data) {\n        self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-adhoc-process-created\"),\n        bizagi.localization.getResource(\"workportal-quickprocess-notification-process-title\"), \"\");\n        self.publish(\"closeCurrentDialog\");\n        if (bizagi.util.isIE10OrLower()) {// redirect to dashboard, IE10 doesn't support routing in angular app\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY });\n\n\n        } else {\n          self.publish(\"changeWidget\", {\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n            data: {\n              route: 'process-modeler',\n              params: data } });\n\n\n        }\n      }).fail(function (error) {\n        error = JSON.parse(error.responseText);\n        self.notifier.showErrorMessage(error.message, bizagi.localization.getResource(\"workportal-quickprocess-notification-generic-error-title\"), \"\");\n      });\n    }\n  },\n\n  /**\r\n      * Add event handlers to elements\r\n      */\n  addEventHandlers: function addEventHandlers() {\n    var self = this;\n    $(\"#button-cancel-create-adhoc-process\", self.content).on(\"click\", $.proxy(self.onClickCancel, self));\n    $(\"form\", self.content).on(\"submit\", $.proxy(self.onSubmitFormCreateProcess, self));\n  },\n\n  /**\r\n      * Remove event handlers to elements. Dispose widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    $(\".js-input-name\", self.content).off(\"input\", $.proxy(self.validateForm, self));\n    $(\"#button-cancel-create-adhoc-process\", self.content).off(\"click\", $.proxy(self.onClickCancel, self));\n    $(\"form\", self.content).off(\"submit\", $.proxy(self.onSubmitFormCreateProcess, self));\n  } });","/*\r\n *   Name: Bizagi Workportal Desktop Project File Preview\r\n *   Author: David Romero Estrada\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.profly\", {}, {\n  /*\r\n                                                                                  *   Constructor\r\n                                                                                  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"project-filespreview-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.profly\").concat(\"#project-filespreview-wrapper\") });\n\n  },\n\n  /**\r\n     * Renders the template defined in the widget\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    // Define parameters to route angular app\n    var argumentsTemplate = {\n      paramsURL: '' };\n\n    if (self.params.data && self.params.data.route && self.params.data.params.id) {\n      argumentsTemplate.paramsURL =\n      encodeURI('?route=' + self.params.data.route + '&id=' + self.params.data.params.id + '&displayName=' + self.params.data.params.displayName);\n\n    }\n\n    if (self.params.data && self.params.data.route && self.params.data.params.module) {\n      argumentsTemplate.paramsURL =\n      encodeURI('?route=' + self.params.data.route + '&module=' + self.params.data.params.module);\n    }\n\n    var generalTmpl = self.getTemplate(\"project-filespreview-wrapper\");\n    self.content = generalTmpl.render(argumentsTemplate);\n\n    $(self.content).on(\"load\", function (event) {\n      var path = event.currentTarget.contentWindow.location.href;\n      if (path.indexOf('quickprocess') === -1) {\n        location.reload(); // QAF-5934\n      }\n    });\n    return self.content;\n  },\n\n\n  /**\r\n     * links events with handlers\r\n     */\n  postRender: function postRender() {\n    var self = this;\n  },\n\n  clean: function clean() {\n    var self = this;\n    $('#iframe-liveprocesses', self.content).off();\n    self.plugins = {};\n    self.form = {};\n    self.currentFile = {};\n    self.filesNumber = 0;\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.profly\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.profly]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sessionTimeout\", {}, {\n  /**\r\n                                                                                           * Constructor\r\n                                                                                           */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"session-timeout\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeout\").concat(\"#session-timeout\") });\n\n\n    // Have an instance of the session timeout\n    self.sessionTimeoutService = bizagi.injector.get('sessionTimeOutService');\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('session-timeout');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self._onClickMinValue;\n\n    // When the user clicks on the modal button reset the countDown\n    $('button', self.content).click(\n    $.proxy(function () {\n      // Keep the session opened\n      self.sessionTimeoutService.keepSessionOpen();\n      $(this.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');\n    },\n    self));\n\n\n    // Remove the x of the modal\n    self.renderingDeferred.then($.proxy(self.removeXClose, self));\n  },\n\n  /**\r\n      * Remove the x of the modal, whe don't need it here\r\n      * We don't want the possibility to close the modal\r\n      */\n  removeXClose: function removeXClose() {\n    var self = this;\n    setTimeout(function () {\n      $(self.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();\n    }, 0);\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sessionTimeout', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.sessionTimeout]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sessionTimeoutExpired\", {}, {\n  /**\r\n                                                                                                  * Constructor\r\n                                                                                                  */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"session-timeout-expired\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeoutExpired\").concat(\"#session-timeout-expired\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('session-timeout-expired');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self._onClickMinValue;\n\n    // When the user clicks on the modal button reset the countDown\n    $('button', self.content).click(\n    function () {\n      bizagi.services.redirectToLogoutPage();\n    });\n\n\n    // Remove the x of the modal\n    self.renderingDeferred.then($.proxy(self.removeXClose, self));\n  },\n\n  /**\r\n      * Remove the x of the modal, whe don't need it here\r\n      * We don't want the possibility to close the modal\r\n      */\n  removeXClose: function removeXClose() {\n    var self = this;\n    setTimeout(function () {\n      $(self.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();\n    }, 0);\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.sessionTimeoutExpired', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.sessionTimeoutExpired]);","/**\r\n * Name: Bizagi Workportal Desktop Create plan\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.user.privacy\", {}, {\n  /**\r\n                                                                                         * Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, notifier, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    self.notifier = notifier;\n\n    //Load template\n    self.loadTemplates({\n      \"user-privacy\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.user.privacy\").concat(\"#user-privacy\") });\n\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('user-privacy');\n    self.content = template.render({});\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    $('#js-btn-downloadReport', self.content).on('click', $.proxy(self.onDownloadReport, self));\n  },\n\n  onDownloadReport: function onDownloadReport() {\n    var self = this;\n    self.dataService.downloadReportUser(bizagi.currentUser.idUser);\n  },\n\n  clean: function clean() {\n    var self = this;\n    $('#js-btn-downloadReport', self.content).off();\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.user.privacy', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.user.privacy]);","/**\r\n * Name: Bizagi Workportal Users Modal\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.users.modal\", {}, {\n  /**\r\n                                                                                        * Constructor\r\n                                                                                        */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.usuarios = params.data;\n    self.showActivityInfo = params.data.users !== undefined;\n    if (self.showActivityInfo) {\n      self.usuarios = params.data.users;\n      self.isActivity = params.data.isActivity;\n      self.activityName = params.data.activityName;\n    }\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"users-modal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.users.modal\").concat(\"#users-modal\") });\n\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('users-modal');\n    self.content = template.render({\n      usuarios: self.usuarios,\n      isActivity: self.isActivity,\n      activityName: self.activityName,\n      showActivityInfo: self.showActivityInfo });\n\n    self.clickArrow(self.content);\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n  },\n\n  clean: function clean() {\n    var self = this;\n  },\n  clickArrow: function clickArrow(context) {\n    $(\".expand__arrow\", context).click(function (event) {\n      var contentItemSelected = $(this).parent().parent();\n      if ($(\".users_collapse\", contentItemSelected).css('display') == 'none') {\n        $(this).addClass(\"expand__arrow--active\");\n        $(\".users_collapse\", contentItemSelected).show();\n      } else {\n        $(this).removeClass(\"expand__arrow--active\");\n        $(\".users_collapse\", contentItemSelected).hide();\n      }\n\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.users.modal', ['workportalFacade', 'dataService', bizagi.workportal.widgets.users.modal]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.accessDenied\", {}, {\n  /**\r\n                                                                                         * Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"access-denied\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.accessDenied\").concat(\"#access-denied\") });\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('access-denied');\n    self.content = template.render({});\n    return self.content;\n  } });\n\n\nbizagi.injector.register('bizagi.workportal.widgets.accessDenied', ['workportalFacade', 'dataService', bizagi.workportal.widgets.accessDenied]);","var usersAdapter = function () {\n\n  var self = this;\n  /**\r\n                    * Private methods\r\n                    */\n\n  function matchExtendedInfo(list, usersWithExtendedInfo) {\n    list.map(function (uuser) {\n      var u = usersWithExtendedInfo.find(function (e) {\n        return uuser.idUser == e.idUser;\n      });\n      uuser.extendedInfo = u.extendedInfo;\n    });\n  }\n\n\n  /**\r\n     * Public methods\r\n     */\n\n  /**\r\n         * create a json standard for user information\r\n         * (this is used in modals and usertooltip)\r\n         * if the isAssignee and owner are false the user is participant\r\n         * if the isAssignee and owner are null the user is not in (isAssignee, owner and participant)\r\n         * @param {string} userAssigned guid del usuario\r\n         * @param {string} name \r\n         * @param {string} username \r\n         * @param {string} picture \r\n         * @param {string} email \r\n         * @param {string} initials \r\n         * @param {boolean} isAssignee if is true the user shows like assignee\r\n         * @param {boolean} owner if is true the user shows like creator\r\n         * @param {Array} activities \r\n         * @param {Array} events \r\n         */\n  var createJsonUserInfo = function createJsonUserInfo(userAssigned, name, username, picture, email, initials, isAssignee, owner, activities, events) {\n    var participant = owner === false && isAssignee === false;\n    if (owner === null && isAssignee === null)\n    owner = participant = false;\n\n    picture = self.validateDataURIScheme(picture);\n\n    return {\n      userAssigned: userAssigned,\n      name: name,\n      username: username,\n      picture: picture,\n      email: email,\n      initials: initials,\n      isAssignee: isAssignee,\n      isParticipant: participant,\n      owner: owner,\n      activities: activities,\n      events: events,\n      isAnonymized: userAssigned === bizagi.util.anonymizedUserInformation.id };\n\n  };\n\n  /**\r\n      * Ensure the correct data URI Schema in the picture\r\n      * @param {base64} picture \r\n      */\n  self.validateDataURIScheme = function (picture) {\n    var dataURIScheme = \"data:image/png;base64,\";\n    if (picture !== undefined) {\n      if (picture.indexOf(dataURIScheme) === -1) {\n        picture = dataURIScheme + picture;\n      } else {\n        picture = picture.replace(\"data:image/png;base64,data:image/png;base64,\", dataURIScheme);\n      }\n    }\n    return picture;\n  };\n\n  /**\r\n      * let to add extendedInfo to each users,assigned,createdBy\r\n      * @param {*} cases \r\n      * @param {*} usersWithExtendedInfo \r\n      */\n  var matchUsersForExtendedInfoCase = function matchUsersForExtendedInfoCase(cases, usersWithExtendedInfo) {\n    cases.map(function (casee) {\n      if (casee.assignees)\n      matchExtendedInfo(casee.assignees, usersWithExtendedInfo);\n      if (casee.users)\n      matchExtendedInfo(casee.users, usersWithExtendedInfo);\n      if (casee.createdBy) {\n        var u = usersWithExtendedInfo.find(function (e) {\n          return casee.createdBy.idUser == e.idUser;\n        });\n        casee.createdBy.extendedInfo = u.extendedInfo;\n      }\n    });\n  };\n\n  /**\r\n      * return just the assigned users if exists a only creator user this is ommited\r\n      * @param {Array} users \r\n      */\n  var justAssignees = function justAssignees(users) {\n    return users.filter(function (user) {\n      return user.isAssignee === true;\n    });\n  };\n\n  var usersWithoutAnonymized = function usersWithoutAnonymized(users) {\n    return users.filter(function (user) {\n      return user.isAnonymized === false;\n    });\n  };\n\n  return {\n    createJsonUserInfo: createJsonUserInfo,\n    matchUsersForExtendedInfoCase: matchUsersForExtendedInfoCase,\n    justAssignees: justAssignees,\n    usersWithoutAnonymized: usersWithoutAnonymized };\n\n}();","/**\r\n * Name: Bizagi Workportal Task Description\r\n* \r\n* @author Kvn Alvarado\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.task.description\", {}, {\n  /**\r\n                                                                                             * Constructor\r\n                                                                                             */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.fromWebpart = self.params.fromWebpart || false;\n    if (!self.fromWebpart) {\n      //Load template\n      self.loadTemplates({\n        \"task-description\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.task.description\").concat(\"#task-description\") });\n\n    } else {\n      self.template = self.params.template;\n      if (self.template === undefined)\n      throw \"if is from webpart needs template param\";\n    }\n\n  },\n\n  /**\r\n      * render tmpl depends if comes from webpart or not\r\n      */\n  getContentOnRender: function getContentOnRender() {\n    var self = this;\n    var template = self.template || self.getTemplate('task-description'),\n    renderParams = {\n      modalForDescription: self.isNecessaryModal };\n\n    return self.fromWebpart ? $.tmpl(template, renderParams) : template.render(renderParams);\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var width = self.params.width;\n    if (DOMPurify) {\n      self.description = DOMPurify.sanitize(self.params.description);\n    }\n    self.isNecessaryModal = self.isNecessaryModalForDescription(self.description, width);\n    self.content = self.getContentOnRender();\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.params.container.html(self.content);\n    if (self.isNecessaryModal && self.params.classNeedsModal) {\n      self.params.container.addClass(self.params.classNeedsModal);\n    }\n    $(\"#ui-bizagi-wp-project-activity-description-text\", self.content).append(self.description);\n    $(\"#ui-bizagi-wp-project-activity-description-more-button > a\", self.content).click(function () {\n      self.showModalDescription();\n    });\n    var params = {\n      baseUrl: bizagi.util.getPathUrl(''),\n      container: $(\"#ui-bizagi-wp-project-activity-description-text\", self.content)[0],\n      callback: self.showConfirmationMessage };\n\n    bizagi.validateTrustDomains(params);\n  },\n\n  /**\r\n      * show simple modal with task description content\r\n      */\n  showModalDescription: function showModalDescription() {\n    var self = this;\n    var e = $(\"<div id='modalDescription'></div>\");\n    e.append(self.description);\n    e.dialog({\n      show: 'fade',\n      width: 600,\n      height: 500,\n      modal: true,\n      dialogClass: \"\",\n      closeOnEscape: true,\n      draggable: false,\n      title: bizagi.localization.getResource(\"workportal-project-casedashboard-activity-description\"),\n      maximize: true,\n      maximized: false,\n      maximizeOnly: false,\n      buttons: [{\n        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\n        click: function click() {\n          e.dialog('close');\n        } }],\n\n      close: function close() {\n        $(this).dialog('destroy');\n        $(this).detach();\n      },\n      resizable: false });\n\n    var params = {\n      baseUrl: bizagi.util.getPathUrl(''),\n      container: $(\"#modalDescription\")[0],\n      callback: self.showConfirmationMessage };\n\n    bizagi.validateTrustDomains(params);\n  },\n  /**\r\n      * show a confirmation message when user go to another domain\r\n      */\n  showConfirmationMessage: function showConfirmationMessage() {\n    var message = bizagi.localization.getResource(\"workportal-widget-task-description-confirm-message\") + \" <br><strong>\" + bizagi.localization.getResource(\"workportal-widget-task-description-do-you-want-to-continue\") + \"</strong>\",\n    title = bizagi.localization.getResource(\"workportal-widget-task-description-confirm-title\"),\n    buttons = [\n    { label: bizagi.localization.getResource(\"workportal-general-word-cancel\"), action: \"reject\" },\n    { label: bizagi.localization.getResource(\"workportal-general-word-continue\"), action: \"resolve\" }];\n\n    return bizagi.showConfirmationBox(message, title, true, buttons);\n  },\n\n  /**\r\n      * validate if the description is longer to it's container\r\n      * in BizagiModeler is saved in p > span tags each new line so, is necessary to verify between them\r\n      * @param {string} description task description text\r\n      */\n  isNecessaryModalForDescription: function isNecessaryModalForDescription(description, width) {\n    var resp = false;\n    /**\r\n                       * if width is undefined return true to show a modal\r\n                       */\n    if (width == undefined) {\n      console.error(\"width is undefined\");\n      resp = true;\n    }\n    if (description) {\n      var container = $(\"<div id='description' style='border: solid; width:\" + width + \"px; height:200px; box-sizing: border-box; border: hidden;'></div>\");\n      container.append(description);\n      $(\"body\").append(container);\n      if (container[0].scrollWidth > width || container[0].scrollHeight > 200) {\n        resp = true;\n      }\n      container.remove();\n    }\n    return resp;\n  },\n\n  /**\r\n      * render all the bizagi.workportal.widgets.task.description widget in each currentState of case\r\n      * @param {Array} currentStates \r\n      * @param {Jquery Template} renderedTemplate container template\r\n      */\n  renderManyTasksDescription: function renderManyTasksDescription(currentStates, renderedTemplate) {\n    var self = this;\n    var newWidgets = [];\n\n    for (var i = 0; i < currentStates.length; i++) {\n      var taskDescriptionParams = {\n        container: $(\"#ui-bizagi-wp-app-inbox-description-task_description_container_\" + i, renderedTemplate),\n        description: currentStates[i].tskDescription,\n        classNeedsModal: self.params.classNeedsModal,\n        width: self.params.width,\n        idWorkItem: self.params.idWorkItem,\n        fromWebpart: self.fromWebpart,\n        template: self.template };\n\n      newWidgets.push(new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams));\n      newWidgets[i].render();\n    }\n    return newWidgets;\n  },\n\n  clean: function clean() {\n    var self = this;\n    $(\"#ui-bizagi-wp-project-activity-description-more-button > a\", self.content).unbind(\"click\");\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.task.description', ['workportalFacade', 'dataService', bizagi.workportal.widgets.task.description]);","/**\r\n * Name: Bizagi Workportal Task Options\r\n* \r\n* @author Kvn Alvarado\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.task.options\", {}, {\n  /**\r\n                                                                                         * Constructor\r\n                                                                                         */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n  },\n\n  /**\r\n      * return a jquery promise for widgets needs taskOptions call\r\n      * if the idWorkitem is 0 request is not necessary\r\n      * @param {Int} idCase \r\n      * @param {Int} idWorkitem \r\n      */\n  _start: function _start(idCase, idWorkitem) {\n    var self = this,\n    defer;\n    if (idWorkitem === 0) {\n      defer = $.Deferred();\n      defer.resolve(self.pipeResponse({}));\n    } else {\n      defer = self.request(idCase, idWorkitem);\n    }\n    return defer;\n  },\n\n  /**\r\n      * wait for render and start request\r\n      * @param {Int} idCase \r\n      * @param {Int} idWorkitem \r\n      */\n  getTaskOptions: function getTaskOptions(idCase, idWorkitem) {\n    var self = this,\n    _renderDefer = self._wait4Render(true),\n    _defer = new $.Deferred();\n\n    _renderDefer.done(function () {\n      self._start(idCase, idWorkitem).done(_defer.resolve);\n    });\n    return _defer;\n  },\n\n  /**\r\n      * create a promise for wait for render endpoint ends\r\n      * @param {Boolean} start if true the promise is new, false the promise resolves\r\n      */\n  _wait4Render: function _wait4Render(start) {\n    var self = this,\n    _finish = start !== true && self._wait4RenderDefer !== undefined;\n    if (_finish) {\n      self._wait4RenderDefer.resolve();\n    }\n    if (start) {\n      self._wait4RenderDefer = new $.Deferred();\n    }\n    return self._wait4RenderDefer;\n  },\n\n  /**\r\n      * ends to wait for render\r\n      */\n  renderEnds: function renderEnds() {\n    var self = this;\n    self._wait4Render(false);\n  },\n\n  /**\r\n      * make request for get taskOptions\r\n      * @param {Int} idCase\r\n      * @param {Int} idWorkitem \r\n      */\n  request: function request(idCase, idWorkitem) {\n    var self = this,\n    params = {\n      idCase: idCase,\n      idWorkitem: idWorkitem };\n\n    return $.when(self.dataService.getTaskOptions(params)).pipe(function (data) {\n      if (data.allowTakeOwnership === true && data.allowRelease === true) {\n        throw \"can't get both allowTakeOwnership and allowTakeOwnership properties equal true\";\n      }\n      return self.pipeResponse(data);\n    });\n  },\n\n  /**\r\n      * return the correct params or the default\r\n      * @param {JSON} params taskOptions response\r\n      */\n  pipeResponse: function pipeResponse(params) {\n    return {\n      showTakeOwnership: params.allowTakeOwnership || false,\n      showRelease: params.allowRelease || false,\n      showCancelCase: params.allowCaseCancel || false };\n\n  },\n\n  clean: function clean() {\n    var self = this;\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.task.options', ['workportalFacade', 'dataService', bizagi.workportal.widgets.task.options]);","/*\r\n*   Name: Service to handle the requests for Quick Actions\r\n*   Author: Bizagi\r\n*/\n\n$.Class.extend(\"bizagi.workportal.services.quickActionsRequester\", {\n  QUICK_ACTIONS_QUEUE: 'QUICK_ACTIONS_QUEUE' },\n{\n  /*\r\n  *  Constructor\r\n  */\n  init: function init(dataService, params) {\n    var self = this;\n    self.dataService = dataService;\n    self.params = params;\n    self.numberAllActions = 0;\n    self.executedRequests = 0;\n  },\n\n\n  /**\r\n      * Start a request with specific information\r\n      * @param {object} paramsRequest \r\n      */\n  _startRequest: function _startRequest(paramsQuickAction) {\n    var self = this;\n\n    var paramsToBackend = {\n      caseId: paramsQuickAction.caseId,\n      workItemId: paramsQuickAction.workItemId,\n      taskId: paramsQuickAction.taskId,\n      quickActionGuid: paramsQuickAction.quickActionGuid,\n      actions: self._buildParametersByActions(paramsQuickAction) };\n\n\n    // necessary to jquery queue()\n    return function (next) {\n\n      self.executedRequests++;\n\n      self.params.callback({\n        type: 'one-start',\n        response: {\n          paramsRequest: paramsQuickAction } });\n\n\n\n      self.dataService.executeQuickAction(paramsToBackend).done(function (response) {\n        self._finishRequest(paramsQuickAction, response);\n        next();\n      }).fail(function (response) {\n        self._finishRequest(paramsQuickAction, response);\n        next();\n      });\n    };\n  },\n\n  /**\r\n      * \r\n      * Receive the notification when a request is success or fail \r\n      * @param {object} paramsRequest \r\n      * @param {object} response \r\n      */\n  _finishRequest: function _finishRequest(paramsRequest, response) {\n    var self = this;\n\n    self.params.callback({\n      type: 'one-end',\n      response: {\n        paramsRequest: paramsRequest,\n        backResponse: response } });\n\n\n  },\n\n  /**\r\n      * When finish all executions of quick actions\r\n      */\n  _finishAllRequests: function _finishAllRequests() {\n    var self = this;\n    self._clearQueue();\n    self.params.callback({\n      type: 'all' });\n\n  },\n\n  /**\r\n      * When the user stop all, clear the queue\r\n      */\n  _skipPendingRequests: function _skipPendingRequests() {\n    var self = this;\n    self._clearQueue();\n    self.params.callback({\n      type: 'stop-by-user',\n      response: {\n        numberSkipActions: self.numberAllActions - self.executedRequests } });\n\n\n  },\n\n  /**\r\n      * Clear queue\r\n      */\n  _clearQueue: function _clearQueue() {\n    var self = this;\n    $(document).clearQueue(self.Class.QUICK_ACTIONS_QUEUE);\n    $(document).stop();\n  },\n\n  /**\r\n      * Build and execute the queue\r\n      * @param {Array} arrayRequestsInformation \r\n      */\n  _executeQueueRequests: function _executeQueueRequests(arrayRequestsInformation) {\n    var self = this;\n\n    self.numberAllActions = arrayRequestsInformation.length;\n\n    //fill the queue\n    for (var i = 0; i < arrayRequestsInformation.length; i++) {\n      $(document).queue(self.Class.QUICK_ACTIONS_QUEUE, self._startRequest(arrayRequestsInformation[i]));\n    }\n\n    //start the first element\n    $(document).dequeue(self.Class.QUICK_ACTIONS_QUEUE);\n\n    // events\n    $(document).queue(self.Class.QUICK_ACTIONS_QUEUE, function () {\n      self._finishAllRequests();\n    });\n\n  },\n\n  _buildParametersByActions: function _buildParametersByActions(quickAction) {\n    var self = this;\n    var actions = quickAction.actions;\n\n    var response = [];\n    if (quickAction.ruleGuid) {\n      response.push(self._buildRequestSubmitData(quickAction.ruleGuid));\n      response.push(self._buildRequestCheckpoint(quickAction.ruleGuid));\n      response.push(self._buildRequestProcessPropertyValue(quickAction.ruleGuid));\n      response.push(self._buildRequestCommit(quickAction.ruleGuid));\n    }\n\n    //Next \n    if (JSON.stringify(actions) == '[\"next\",\"submitData\",\"validate\"]') {\n      response.push({\n        \"h_action\": \"next\",\n        \"h_tag\": \"performAction\" });\n\n    }\n    // none\n    else if (JSON.stringify(actions) == '[\"submitData\",\"refresh\"]') {\n        response.push({\n          \"h_action\": \"save\",\n          \"h_tag\": \"performAction\" });\n\n      }\n      //next without validation\n      else if (JSON.stringify(actions) == '[\"nextWithoutValidations\",\"submitData\"]') {\n          response.push({\n            \"h_action\": \"nextWithoutValidations\",\n            \"h_tag\": \"performAction\" });\n\n        }\n    return response;\n  },\n\n  _buildRequestSubmitData: function _buildRequestSubmitData() {\n    return {\n      \"h_action\": \"SUBMITDATA\",\n      \"h_tag\": \"submitData\" };\n\n  },\n\n  _buildRequestCheckpoint: function _buildRequestCheckpoint(ruleGuid) {\n    return {\n      \"h_action\": \"CHECKPOINT\",\n      \"h_xpath\": \"\",\n      \"h_idRender\": ruleGuid,\n      \"h_xpathContext\": \"\",\n      \"h_tag\": \"checkpoint\" };\n\n  },\n\n  _buildRequestProcessPropertyValue: function _buildRequestProcessPropertyValue(ruleGuid) {\n    return {\n      \"h_action\": \"PROCESSPROPERTYVALUE\",\n      \"h_idRender\": ruleGuid,\n      \"h_xpathContext\": \"\",\n      \"h_propertyName\": \"buttonRule\",\n      \"h_tag\": \"executeRule\" };\n\n  },\n\n  _buildRequestCommit: function _buildRequestCommit(ruleGuid) {\n    return {\n      \"h_action\": \"COMMIT\",\n      \"h_xpath\": \"\",\n      \"h_idRender\": ruleGuid,\n      \"h_xpathContext\": \"\",\n      \"h_tag\": \"commit\" };\n\n  },\n\n  /**\r\n      * Receive the data, transform, and call execution the queue\r\n      * @param {Array} arrayRequestsInformationRaw \r\n      */\n  startAllRequests: function startAllRequests(arrayRequestsInformationRaw) {\n    var self = this;\n\n    self._executeQueueRequests(arrayRequestsInformationRaw);\n  },\n\n  /**\r\n      * Stop the queue of the requests\r\n      */\n  stopAllRequests: function stopAllRequests() {\n    var self = this;\n    if (self.numberAllActions > self.executedRequests) {\n      self._skipPendingRequests();\n    }\n  } });\n\n\n\n\nbizagi.injector.register('quickActionsRequesterService', ['dataService', bizagi.workportal.services.quickActionsRequester]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.casestemplate\", {}, {\n  /**\r\n                                                                                          * Constructor\r\n                                                                                          */\n  init: function init(workportalFacade, dataService, actionService, casetoolbar, usersCasesService, actionsEventsService, accumulatedcontext, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"casestemplate-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.casestemplate\").concat(\"#casestemplate-wrapper\"),\n      \"casestemplate-item\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.casestemplate\").concat(\"#casestemplate-item\"),\n      \"casestemplate-empty-data\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.casestemplate\").concat(\"#casestemplate-empty-message\") });\n\n\n    self.selectorCheckboxItems = \".casetemplate-box-check-selector input:checkbox\";\n    self.actionService = actionService;\n    self.casetoolbar = casetoolbar;\n    self.usersCasesService = usersCasesService;\n    self.actionsEventsService = actionsEventsService;\n    self.hasBatchActions = false;\n\n    self.sequenceCall = 0;\n    self.accumulatedcontext = accumulatedcontext;\n  },\n\n  /**\r\n      * Renders the template defined in the widget\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    templateContainer = self.getTemplate(\"casestemplate-container\");\n\n    self.content = templateContainer.render({});\n    return self.content;\n  },\n\n  /**\r\n      * links events with handlers\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    $content = self.getContent();\n\n    self.sub(\"CASES-TEMPLATE-VIEW\", $.proxy(self.updateCases, self));\n    self.sub(\"UPDATE-DATATEMPLATE-VIEW\", $.proxy(self.updateCases, self));\n    self.sub(\"GET-COMMON-ACTIONS\", $.proxy(self.getCommonActions, self));\n    self.sub(\"SET-RECORDS\", $.proxy(self.updateCases, self));\n    self.sub(\"SET-VALUES\", function (ev, params) {return self.setValues(params);});\n    self.actionService.subscribe(\"onFormActionExecuted\", $.proxy(self.onFormActionExecuted, self));\n    self.actionService.subscribe(\"onFormRuleExecuted\", $.proxy(self.onFormRuleExecuted, self));\n    $content.find(\"#casestemplate-dataviewer-list\").on(\"click\", self.selectorCheckboxItems, $.proxy(self.onCaseChecked, self));\n  },\n\n  /**\r\n      * Detach events\r\n      */\n  clean: function clean() {\n    var self = this,\n    $content = self.getContent();\n\n    self.checkAll = false;\n    self.sequenceCall = 0;\n\n    if ($content) {\n      self.actionService.unsubscribe(\"onFormActionExecuted\");\n      self.actionService.unsubscribe(\"onFormRuleExecuted\");\n      self.unsub(\"CASES-TEMPLATE-VIEW\");\n      self.unsub(\"UPDATE-DATATEMPLATE-VIEW\");\n      self.unsub(\"GET-COMMON-ACTIONS\");\n      self.sub(\"SET-VALUES\");\n      $content.find(\"#casestemplate-dataviewer-list\").off(\"click\", self.selectorCheckboxItems);\n    }\n  },\n\n\n\n  /**\r\n      * Updates the cases list\r\n      */\n  updateCases: function updateCases(ev, data) {\n    var self = this,\n    args = data.args,\n    defer = new $.Deferred(),\n    $dataViewList = $(\"#casestemplate-dataviewer-list\", self.getContent());\n\n    $dataViewList.empty();\n    self.actionService.init();\n    self.casesSelected = {};\n    self.sequenceCall++;\n\n    self.page = args.page || self.page;\n    self.idworkflow = args.idworkflow == undefined ? self.idworkflow : args.idworkflow;\n    self.route = args.route || self.route;\n    self.filter = args.filter || self.filter;\n    self.pageSize = args.pageSize || self.pageSize;\n\n    (function (sequence) {\n      $.when(self.getCasesData({ page: self.page, idworkflow: self.idworkflow, pageSize: self.pageSize })).\n      pipe(function (casesData) {\n        if (self.sequenceCall !== sequence) {\n          defer.resolve();\n          return null;\n        }\n        self.pub(\"notify\", { type: \"PAGINATOR-UPDATE\", args: $.extend(args, casesData, { event: data.type }) });\n        return self.getCasesTemplates(casesData);\n      }).\n      done(function (templates) {\n        if (templates !== null) {\n          var casesLength = self.casesLength = templates.length,\n          templateString = casesLength > 0 ? \"\" : self.getEmptyDataMessage(),\n          $templateCase = null,\n          $elementsTmpl = $();\n\n          self.hasBatchActions = false;\n          for (var i = 0, l = templates.length; i < l; i++) {\n            if (self.sequenceCall !== sequence) {\n              defer.resolve();\n              return;\n            }\n            $templateCase = self.renderCase(templates[i], false, sequence);\n            $elementsTmpl.push.apply($elementsTmpl, $templateCase);\n          }\n          if (!self.hasBatchActions) {\n            self.pub(\"notify\", {\n              type: \"HIDE-CHECK-ALL\",\n              args: {} });\n\n          }\n\n          if ($elementsTmpl.length > 0) {\n            $dataViewList.append($elementsTmpl);\n          } else\n          {\n            $dataViewList.append(templateString);\n          }\n\n          self.checkAll = false;\n\n          self.pub(\"notify\", { type: \"ENABLE-BATCHS-ACTIONS\", args: { commonActions: self.setValues({ args: { value: self.checkAll } }) } });\n          defer.resolve(templates);\n        }\n\n      });\n    })(self.sequenceCall);\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Renders the case with the decorators related\r\n      * actions events and images\r\n      */\n  renderCase: function renderCase(caseData, isRefresh, sequence) {\n    var self = this,\n    actionData = caseData.actionData,\n    idCase = actionData.idCase,\n    surrogateKey = actionData.surrogateKey,\n    guidEntity = actionData.guidEntity,\n    templateCase = self.getTemplate(\"casestemplate-item\"),\n    security = new bizagi.workportal.command.security(self.dataService);\n    var $templateCase = templateCase.render({\n      idCase: idCase,\n      guidEntity: guidEntity,\n      surrogateKey: surrogateKey });\n\n\n    $templateCase.find(\"#template\").append(caseData.tmpl);\n\n    $.when(security.checkSecurityPerm(\"GraphicQuery\")).done(function (graphicQuery) {\n      caseData.casetoolbarData[\"graphicQuery\"] = graphicQuery;\n      // Set header\n      setTimeout(function () {\n        var $casetoolbar = self.casetoolbar.getCaseToolbar({ casetoolbarData: $.extend(caseData.casetoolbarData, { referrer: \"CasesTemplate\" }) });\n        var $case = self.getContent().find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-element\");\n\n        if (sequence === self.sequenceCall) {\n          $case.append($casetoolbar);\n        }\n      }, 0);\n    });\n\n    // Get Actions and events\n    setTimeout(function () {\n      var $footer = self.getContent().find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-footer\");\n\n      $footer.startLoading({ delay: 0, overlay: true });\n      $.when(self.actionService.getActionsView({\n        actionData: caseData.actionData,\n        loadEvents: true,\n        isRefresh: isRefresh })).\n\n      done(function (responseActions) {\n        var $actionsView = responseActions.actionsView;\n        var actionsData = responseActions.actionsData;\n\n        // Get the batch actions in the actionsData array\n        var batchActions = actionsData.length === 0 ? [] : self.pub(\"notify\", {\n          type: \"BATCH-ACTIONS\",\n          args: { actionsData: actionsData } })[\n        0];\n        var $case = self.getContent().\n        find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-element .casetemplate-box-footer\");\n        if ($actionsView && sequence === self.sequenceCall) {\n          $case.append($actionsView);\n\n          // Show cases checboxes and check all checkbox if there are batch actions\n          if (batchActions.length > 0 && self.getCheckBox($case).data(\"surrogatekey\") != -1) {\n            self.hasBatchActions = true;\n            self.showCheckItem($case);\n            self.pub(\"notify\", {\n              type: \"SOME-ITEM-ALLOW-SELECT\",\n              args: {} });\n\n          } else\n          {\n            self.removeCheckItem($case);\n          }\n        } else\n        {\n          self.removeCheckItem($case);\n        }\n        $footer.endLoading();\n      });\n    }, 0);\n    // Get cases assignees\n    setTimeout(function () {\n      $.when(self.usersCasesService.getAssignees(idCase)).\n      done(function ($assignees) {\n        if ($assignees && sequence === self.sequenceCall) {\n          var $case = self.getContent().\n          find(\"#casetemplate-box-wrapper-\" + idCase + \" .casetemplate-box-element .casetemplate-box-footer\");\n          $case.append($assignees);\n        }\n      });\n    }, 0);\n\n    return $templateCase;\n  },\n\n  /**\r\n      * Get check item by case\r\n      * @param $item\r\n      */\n  getCheckBox: function getCheckBox($item) {\n    var self = this;\n    return $item.closest(\".casetemplate-box-element\").find(self.selectorCheckboxItems);\n  },\n\n  /**\r\n      * Hide check item\r\n      * @param $item\r\n      */\n  removeCheckItem: function removeCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).remove();\n  },\n\n  /**\r\n      * Show checkbox\r\n      * @param $item\r\n      */\n  showCheckItem: function showCheckItem($item) {\n    var self = this;\n    self.getCheckBox($item).show();\n  },\n\n  /**\r\n      * Process action was executed\r\n      */\n  onFormActionExecuted: function onFormActionExecuted(ev, data) {\n    var self = this;\n    data = data || {};\n\n    if (data.refresh) {\n      self.refreshCase(data.idCase);\n    }\n  },\n\n  /**\r\n      * Process action was executed\r\n      */\n  onFormRuleExecuted: function onFormRuleExecuted(ev, data) {\n    var self = this;\n    data = data || {};\n\n    if (data.refresh) {\n      self.refreshCase(data.idCase);\n    }\n  },\n\n  /**\r\n      * Refresh the case with the new data\r\n      */\n  refreshCase: function refreshCase(idCase) {\n    var self = this;\n\n    var idBox = \"#casetemplate-box-wrapper-\" + idCase;\n    var $templateBox = $(idBox);\n    var isChecked = $templateBox.\n    find(\".casetemplate-box-check-selector > input\").\n    is(\":checked\");\n\n    $templateBox.startLoading({ delay: 250, overlay: true });\n\n    $.when(self.getCasesData({ idCase: idCase })).\n    then(function (caseData) {\n      return self.getCasesTemplates(caseData, true);\n    }).\n    done(function (caseTemplate) {\n\n      var $templateCase = null;\n\n      if (caseTemplate[0] != undefined && caseTemplate[0] != null) {\n        $templateCase = self.renderCase(caseTemplate[0], true, self.sequenceCall);\n        $templateBox.replaceWith($templateCase);\n      }\n\n      $templateBox.endLoading();\n\n      // Restore checked value\n      if (isChecked) {\n        $templateBox = $(idBox);\n        $templateBox.find(\".casetemplate-box-check-selector > input\").prop(\"checked\", true);\n      }\n    });\n  },\n\n  /**\r\n      * Gets the data related with the cases\r\n      */\n  getCasesData: function getCasesData(params) {\n    var self = this;\n\n    if (self.route == \"following\") {\n      return self.dataService.getActivitiesData(params);\n    }\n\n    if (self.route == \"pendings\") {\n      return self.dataService.getPendingsData(params);\n    }\n\n    if (self.route == \"Green\" ||\n    self.route == \"Yellow\" ||\n    self.route == \"Red\") {\n      $.extend(params, { taskState: self.route });\n      return self.dataService.getPendingsData(params);\n    }\n  },\n\n  /**\r\n      * Invokes the template engine, to gets the custom columns\r\n      */\n  getCasesTemplates: function getCasesTemplates(casesData, refreshCase) {\n    var self = this,\n    result = [],\n    defer = new $.Deferred();\n\n    $.when(self.getTemplateEngine()).\n    then(function (engine) {\n      return $.when.apply($, $.map(casesData.entities, function (cases) {\n        return engine.render(cases);\n      }));\n    }).\n    done(function () {\n      var casesTemplates = $.makeArray(arguments),\n      idCases = [],\n      cases = casesData.entities.length;\n\n      for (var i = 0; i < cases; i++) {\n        var tmpl = cases === 1 ? casesTemplates[i] : casesTemplates[i][0];\n        var caseData = casesData.entities[i];\n        result.push({\n          tmpl: tmpl,\n          casetoolbarData: {\n            guidFavorite: casesData.entities[i].guidFavorite,\n            idcase: casesData.entities[i].idCase,\n            idWorkflow: casesData.entities[i].idWorkflow,\n            radNumber: casesData.entities[i].radNumber || casesData.entities[i].idCase },\n\n          actionData: {\n            guidEntity: caseData.guid,\n            idCase: caseData.idCase,\n            radNumber: caseData.radNumber,\n            surrogateKey: caseData.surrogateKey } });\n\n\n        idCases.push(caseData.idCase);\n      }\n\n      if (!refreshCase) {\n        self.usersCasesService.render(idCases);\n        self.actionsEventsService.render(idCases);\n      }\n\n      defer.resolve(result);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      *  returns an instance of  the template engine\r\n      */\n  getTemplateEngine: function getTemplateEngine() {\n    var self = this;\n\n    if (self.templateEngine) {\n      return self.templateEngine;\n    }\n\n    var params = {};\n\n    params.proxyPrefix = bizagi.RPproxyPrefix;\n    var renderDataService = new bizagi.render.services.service(params),\n    renderFactory = new bizagi.rendering.desktop.factory(renderDataService),\n    defer = new $.Deferred();\n\n    $.when(renderFactory.initAsyncStuff()).\n    done(function () {\n      self.templateEngine = new bizagi.templateEngine({ renderFactory: renderFactory, cache: true, forcePersonalizedColumns: true });\n      self.templateEngine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n        var data = params.data || {};\n        var args = {\n          reference: data.reference,\n          surrogateKey: data.surrogateKey,\n          referenceType: data.referenceType,\n          fromActionLauncher: false,\n          histName: data.displayName,\n          guidEntityCurrent: data.guidEntityCurrent,\n          page: 1 };\n\n\n        if (typeof data.xpath !== \"undefined\" && data.xpath) {\n          args.xpath = data.xpath;\n        }\n\n        self.accumulatedcontext.clean();\n        self.pubDeadLockDetection(\"notify\", {\n          type: \"TEMPLATEENGINE-VIEW\",\n          args: args });\n\n      });\n      defer.resolve(self.templateEngine);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Gets Message when there aren\"t data\r\n      */\n  getEmptyDataMessage: function getEmptyDataMessage() {\n    var self = this;\n    var casestemplateEmptyData = self.getTemplate(\"casestemplate-empty-data\");\n\n    return casestemplateEmptyData.render()[0].outerHTML;\n  },\n\n  /**\r\n      * Handler to hold the cases selected\r\n      */\n  onCaseChecked: function onCaseChecked(ev) {\n    var self = this,\n    $target = $(ev.target),\n    surrogateKey = $target.data(\"surrogatekey\"),\n    idCase = $target.data(\"idcase\"),\n    guidEntity = $target.data(\"guidentity\"),\n    isChecked = $target.is(\":checked\");\n\n    self.casesSelected[idCase] = {\n      surrogateKey: surrogateKey,\n      guidEntity: guidEntity,\n      idCase: idCase };\n\n\n    if (!isChecked) {\n      delete self.casesSelected[idCase];\n    }\n    self.pub(\"notify\", { type: \"ENABLE-BATCHS-ACTIONS\", args: { commonActions: self.getCommonActions() } });\n\n  },\n\n  /**\r\n      * Returns the common actions in the set of data\r\n      */\n  getCommonActions: function getCommonActions() {\n    var self = this,\n    model = {};\n\n    model.actions = self.actionService.getCommonActions(self.casesSelected);\n    model.surrogateKeys = [];\n    model.parentsid = [];\n\n    for (var idcase in self.casesSelected) {\n      var data = self.casesSelected[idcase];\n      if (data.surrogateKey !== -1) {\n        model.surrogateKeys.push(data.surrogateKey);\n        model.parentsid.push(data.idCase);\n      }\n    }\n\n    model.guidEntity = idcase !== undefined ? self.casesSelected[idcase].guidEntity : \"\";\n\n    if (model.surrogateKeys.length == 0) {\n      self.checkAll = false;\n      model.checkAll = false;\n    } else\n    if (model.surrogateKeys.length == self.casesLength) {\n      self.checkAll = true;\n      model.checkAll = true;\n    }\n\n    model.itemsSelected = self.casesSelected;\n\n    return model;\n  },\n\n  /**\r\n      * Set current value\r\n      */\n  setValues: function setValues(params) {\n    var self = this,\n    $content = self.getContent(),\n    args = params.args || {},\n    isChecked = args.value;\n\n    if ($content) {\n      self.casesSelected = {};\n      var $inputs = $content.find(self.selectorCheckboxItems);\n      $.map($inputs, function (input) {\n        $(input).prop(\"checked\", isChecked);\n\n        if (isChecked) {\n          var surrogateKey = $(input).data(\"surrogatekey\"),\n          idCase = $(input).data(\"idcase\"),\n          guidentity = $(input).data(\"guidentity\");\n\n          self.casesSelected[idCase] = {\n            surrogateKey: surrogateKey,\n            guidEntity: guidentity,\n            idCase: idCase };\n\n        }\n      });\n\n      self.checkAll = isChecked;\n\n      return self.getCommonActions();\n    }\n  } });\n\n\nbizagi.injector.register(\"bizagi.workportal.widgets.casestemplate\", [\"workportalFacade\", \"dataService\", \"actionService\", \"casetoolbar\", \"usersCasesService\", \"actionsEventsService\", \"accumulatedcontext\", bizagi.workportal.widgets.casestemplate]);"]}