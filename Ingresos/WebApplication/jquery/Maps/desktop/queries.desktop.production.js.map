{"version":3,"sources":["jquery/workportal/js/base/widget/bizagi.workportal.widgets.listCases.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queryform.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.quickActions.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.quickActionsExecute.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.collapsible.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.checkboxGroup.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.queries.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.queryform.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queries.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queries.definition.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.queries.shortcut.js","jquery/workportal/desktop/widget/queries.management/bizagi.workportal.desktop.widgets.queries.management.js","jquery/workportal/js/desktop/widget/bizagi.workportal.results.per.page.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","bizagi","workportal","widgets","widget","extend","getWidgetName","BIZAGI_WORKPORTAL_WIDGET_QUERIES","renderContent","template","this","getTemplate","content","$","tmpl","loadtemplates","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","setTableHeadFixed","params","TableElement","floatThead","floatOptions","groupByCaseNumber","util","isIE","find","hide","_startQuickActions","_QActionsStared","undefined","quickActionsInstance","_params","getContainerSelector","getQuickActionContainerSelector","bind","checkAllSelector","getQuickActionCheckAllContainerSelector","refreshShowedResults","updateResults","quickActions","workportalFacade","dataService","tryCatch","referrerParams","changeProcessOptions","changeProcess","_QuickActionsRenderIn","parentTemplate","workItemsInfo","_QActionsContainer","setDataToExecute","renderIn","renderCheckboxGroup","_getWorkItemsInfo","headers","rows","_finalWorkItems","indexWorkItems","_getIndexFromTableColumn","indexCaseNumber","j","length","_rowInfo","fields","_rowWorkItems","workitems","k","_workItem","idCase","id","caseNumber","idWorkItem","columnTitle","columnName","name","findIndex","column","toUpperCase","showCase","idWorkflow","self","getContent","caseSummaryContainer","cache","htmlContent","empty","when","summaryCaseDetails","done","data","adhocProcessId","isAdhoc","isAdhocProcess","idAdhocProcess","hasComments","security","command","graphicQuery","checkSecurityPerm","enableFeatureShowTimelineButton","override","enableTimelineByProcessType","isAvailableTimelineByProcessType","currentState","forEach","idTask","state","displayName","process","processPath","renderedTemplate","caseSummaryTemplate","menuSecurity","appendTo","callTaskDescription","formatInvariantDate","getResource","delegate","routingExecute","caseSummaryDialog","dialog","tabs","active","create","event","ui","activate","newPanel","attr","comments","canvas","readOnly","renderComments","setContext","commentsFocus","e","isPropagationStopped","stopPropagation","oldrenderevent","eventMethod","window","addEventListener","eventer","publish","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","getWorkitems","onlyUserWorkItems","eventAsTasks","workItems","idWorkitem","i","url","serviceLocator","getUrl","iframeOldRender","getCaseFormsRenderVersion","formsVersion","formsRenderVersion","trigger","renderSummaryForm","html","summarySubProcess","subprocess","caseSummaryTemplateSubprocess","summaryAssigness","preview","assignees","eventsUniqueList","each","events","split","el","inArray","push","join","caseSummaryTemplateAssigness","summaryCaseEvents","caseSummaryTemplateEvents","button","click","trim","closest","text","showTimeLine","radNumber","showGraphicQuery","idProcess","parent","val","buttons","localization","remove","modal","title","width","height","draggable","resizable","close","summary","taskDescriptionParams","classNeedsModal","task","description","renderManyTasksDescription","container","proxyPrefix","loader","start","then","rendering","facade","execute","summaryForm","renderingFacade","setTimeout","resizeLayout","isEnableFeature","listCases","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","parseBoolean","disableFrankensteinQueryForms","notMigratedUrl","modifiedRender","frankensteinRenderContent","idQueryForm","idStoredQuery","idCube","queryFormAction","endPoint","lastQueryFullKey","queryFormURL","queries","init","_super","loadTemplates","concat","queries-elements","queries-empty-elements","queries-query-tree","queries-query-confirm","useNewEngine","postRender","configureTreeNavigation","configureBackButton","renderQueries","scrollVertical","autohide","idParentQuery","appendElement","queryContent","mergeData","emptyTemplate","queriesContainer","getQueries","idElement","merge","checkChildNode","configureNavTree","confirm","children","queryId","prefix","nodesLength","queryDisplayName","headerTemplate","categoryTree","idParent","nodes","categoryWithLink","desktop","popup","closePopupInstance","showQueryFormPopup","idQuery","ajax","destroy","btnBack","nextAll","bizagiScrollbar","arg","currentPopup","widgetName","modalParameters","queries-definition-elements","queries-definition-manage-elements","queries-liveprocesses-query-element","queries-flat-list","queries-query-message-error","mainTemplate","mainTemplateManage","mainTemplateLiveProcessesQuery","flatListTemplate","confirmTemplate","messageErrorTemplate","showManageQueries","templateManage","isManageQueries","QueriesPermissionManager","manageContent","getLiveProcessesQuery","hasLiveProcessesQuery","AdhocUserGroupReport","mergeQueryWithLpContent","lpContent","beforeSavedQueriesContent","manage","tmplRendered","validateMenu","append","addEventToMangeQueries","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","maximize","closeVisible","refreshInbox","addEventToLPQuery","document","contentWindow","location","href","indexOf","liveProcessesEvents","routeEvents","route","dispatchEvent","BIZAGI_WORKPORTAL_WIDGET_PROFLY","module","getQueriesDefinitions","securityBizagiQueries","idNode","defer","Deferred","resolve","promise","getStoredQueryFormList","storedQueryForms","BizagiQueries","storedQueryForm","stored","queryType","guidForm","renderStoredQueries","queryNameFormatter","currentName","_resource","replace","toLowerCase","guidContext","guidEntity","confirmContent","confirmContentParams","notMigratedUrlDelete","paramsStoredQuery","guid","result","grep","definition","edit","messageErrorForm","productBuildToAbout","cookie","messageError","get","deleteStoredQueryForm","idStoredQueryForm","maximizeOnly","editQueryForm","showPopUpEditQueryForm","executeQueryForm","showPopUpResultsQueryForm","response","getParamsStoredQuery","queries-shortcut","queries-shortcut-flat-list","queries-shortcut-query-confirm","queries-shortcut-query-message-error","handleEvents","shortcut","instance","show","queryFormShortcut","arrow","is","removeClass","addClass","queryform","SELECTORS","FORM_LOADER","FORM","FORM_BUTTONS","QUERY_FORM_ACTIONS","EDIT","RENDER_QUERY_FORM","SUBMIT_QUERY_FORM","GRAPHICAL_ANALYSIS","EXECUTE","SAVE_QUERY_FORM","queryform-wrapper","queryform-container","queryform-buttons","queryform-graphic-analysis","queryform-result-set","queryform-search-result","queryform-pagination","queryform-admin-result","queryform-share-selection","queryform-select-user","queryform-select-group","queryform-save-as","queryform-message-error","inbox-common-case-summary","inbox-common-case-summary-subprocess","inbox-common-case-summary-assignees","inbox-common-case-summary-events","referrer","lstIdCasesBackup","lstIdCases","Boolean","modifiedPostRender","frankensteinPostRender","comboRowsPerPage","results","per","page","loadResultsOnActionExecute","hasOwnLoader","queryFormParams","h_action","h_contexttype","contextType","h_idForm","getQueryForm","queryFormElements","form","elements","initialSearchParams","numberOfRows","getItemsPerPage","findResults","pageToShow","storeQueryFormParams","additionalParams","actionForm","clone","queryForm","itemsPerPagePreference","getRowValue","reloadDataResults","calculateNewPage","newItemsPerPage","previousItemsPerPage","previousPage","currentFirstItem","newPage","Math","ceil","preservePage","_ACTIONS","Class","itemsPerPage","Number","queryParams","pageNumber","searchParamsOnActionExecute","renderNumberRowsCombo","comboDataSource","combo","comboWrapper","onChange","setPersistCheckboxGroup","setRowValue","preferences","services","getPreferences","storedValue","queriesItemsPerPage","value","modifiedJSON","overridePreferences","graphicalAnalysisContainer","resultSet","searchResult","paginationTmpl","adminResult","selectUser","selectGroup","shareSelection","dialogSaveAsTmpl","_adjustViewLoader","LOADER","BUTTONS","_start","isStart","_noOp","stop","maxElemShow","maxPageToShow","atLeastOneChecked","selectedItemsToShare","users","groups","readyToSave","includeAllUsers","saveAs","sortedField","storedQueryFormParameters","dialogSaveAs","orderType","ASC","DESC","NONE","queryFormContextTypes","CASES","ENTITY","queryFormTypes","htmlMessage","ownerQuery","showSaveResultsForm","prop","entityGuid","queryFormType","type","renderQueryForm","previousValues","parameters","JSON","parse","initSortParameters","actionSubmitQueryForm","queryFormGuid","owner","stringify","values","h_idqueryform","renderContainer","renderingParams","startAndThen","properties","validateRequireField","keyup","css","setXpathValuesToQueryForm","parentName","parentQueryForm","_adjustValueOnRestore","parameter","control","_setValueAndDisplay","_set","normal","_revert","setValue","setDisplayValue","_onRestore4Cascade","_deferCanSet","_parentReady","_parent","getParentCombo","asyncRenderDeferred","wait4MeOnRestore","deff","internalSetInitialValueFlag","searchParameters","key","renderId","getRenderById","getRender","xpath","ready","advancedQuery","setFilter","filterType","console","log","_recalculateShowQueryForm","recalculateQueryForm","pageResultsData","I_PROCESSSTATE","h_idEnt","h_idQueryForm","enableButton","dialogContent","originalHeight","searchParams","request","getSearchParams","submitQueryForm","disableButton","tooltip","createStoredQueryForm","that","updateStoredQueryForm","fromExec","paramsStored","htmlGraphicalAnalysis","h_guidQueryForm","h_idStoredQuery","h_definition","delay","submit","iframe","dialogHeight","calculateHeight","on","sortParameter","sorted","newParameters","item","included","searchType","requestForSearch","refactorParameters","p_sessionId","getQueryFormExportExcel","size","removeAttr","onlyLocalResults","throwMessageAtLeastOneCheck","showMessageBox","validateTypeAndOneCheck","_selectorForCheckboxes","isInShareTab","_checkboxesBase","loadingGetQueryForm","bizagiConfig","group","deferResults","getQueryFormResponse","_formLoader","always","resultList","timeline","_pageExists","enabledIcons","validateSecurityOptionIcons","totalRecords","records","totalPages","total","showSearchResultFrame","fail","error","tmpTL","radNumerIndex","row","header","dataType","splice","checkDisplayedNames","foundDisplayName","getRenderElementDisplayByXpath","searchParameter","storedQueryFormParameter","fullParameterXpath","displayXpath","storedDefinition","displayHeader","l","element","render","includePreference","elementXpath","fullEelementXpath","_checkOverrideAboutRemoveSymbol","formattedValue","enableSymbolMoneyColumnQueryResult","BIZAGI_DEFAULT_CURRENCY_INFO","symbol","_checkOverridesFormatMoneyColumnQueryResults","originalValue","enableFormatMoneyColumnQueryResult","_formatValue","formatValueByDataType","cleanEmptyColorState","haveQuickActions","resultTemplate","enableQueryDetailView","securityGraphicQuery","GraphicQuery","getRadNumberColumnIndex","index","fieldName","showColumn","columnIndex","createGroupedHeader","rowIndex","getRadNumber","formatValue","proxy","isIEAndFirstRowAndGroupCases","getIdCases","initCombo","paginationHtml","pageToshow","summaryWrapper","pagerData","pagination","pages","permissions","canExportData","canAnalizeData","bizagiPagination","actualPage","listElement","clickCallBack","options","target","first","paramXpath","findSortedResults","currentTarget","disposeGoToCase","getAttribute","position","scrollContainer","applyFomatNumbers","elementsDataType","userLocalization","numberHeaders","formatInvariantNumber","_rows","Array","isArray","_findIdCase","itemFounded","map","_valid","filter","_lstIdCasesBackup","goToCase","_closedByCase","col","colorState","clonedParams","buildParametersForSorting","isAddedTableSorting","_parameters","param","_previousValues","String","buildStoredQueryFormParams","deferred","saveStoredQueryForm","has","getWidget","pipe","reject","closeQueryForm","unique","alert","nameSaveAs","nameSave","validationController","validateForm","next","_isInShareTab","initShareSelection","_canGoToForm","change","searchGroupToShare","shareSlection","test","searchUserToShare","removeItem","addItem","searchSavedUser","filterData","userName","domain","fullName","queryFormId","searchUsersSharedQuery","filteredUsers","idUser","toString","showDataToShare","shareType","searchUsersByID","addPrevious","searchProfiles","profileType","filteredGroups","groupsSelected","items","itemSelected","selectData","elementList","replaceWith","Option","auxUsers","toArray","arrayUserValues","userId","HTMLEncodeText","strText","strNew","cssList","injectCss","getStyle","load","iframeContent","contents","siblings","callBack","openBACase","sHref","workitem","workflow","substring","controller","routingAction","getElementById","lstCasesElement","bizagireference","dialogStack","ShowCaseSumary","version","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","widgetURL","resources","afterLoad","afterLoadParams","genericIframe","callInside","jQuery","dispose","selectedUsers","queries-management","queries-management-loader","queries-management-table","setupSearchusersButton","loaderTmpl","fixedHeadTable","fixedHeadTableElement","zIndex","onResizeModalEvent","clean","parents","setupUsersSearchForm","input","user","def","usersTable","userstable","userLinkLabel","parentDef","showBackButton","getApplicationCategoriesList","applicationList","allProcess","haveProcess","showHideClearIcon","showNotifier","message","injector","showSucessMessage","showLoading","endLoading","clearInput","display","guidUser","getManagementQueries","dataTable","renderTable","contentTable","validateUsers","resp","transferQueries","label","showConfirmationBox","dialogClass","minWidth","guidUserSource","guidUserTarget","register","management","bizagiConfigProperty","sort","a","b","v","_findValue","finding","c","initialValueCombo","initValueCombo","preferencesItemsPerPage","defaultValue","lastValue","uicombo","isEditable","itemValue","itemText","onComplete","initValue","CLASS_ACTIVE_MORE_BUTTON","SELECTOR_NUMBER_SELECTED","SELECTOR_BUTTONS_CONTAINER","SELECTOR_BUTTON_LAUNCH","SELECTOR_SUMMARY_EXECUTED_ACTIONS","SELECTOR_HIDDEN_BUTTON_LAUNCH","SELECTOR_MORE_BUTTON","SELECTOR_HIDDEN_BUTTONS_CONTAINER","SELECTOR_INBOX_GRID_TITLE","DATA_PROPERTIES","TOTAL_SELECTED","SHOW","BUTTONS_TO_SHOW","BUTTONS_HIDDEN","WIDTH_BUTTONS_CONTAINER","SHOW_MORE_BUTTON","SHOW_HIDDEN_BUTTONS","callback","callbackCheckboxGroup","checkboxGroup","quick-actions-container","quick-actions-button","quick-actions-modal-confirm","quick-actions-more-button","quick-actions-button-hidden","_setInitialData","_template","_events","_updateView","newValue","persistCheckboxGroup","itemsInfo","setAvailableButtons","itemsSelected","getChecked","_updateButtonsToShow","_setItemsSelected","_buttonsToShow","getButtonsToShow","_showCurrentButtons","_buttons","_labels","Object","keys","quickActionsPerName","_label","_buttonQuickActions","_shouldShowButton","buttonQuickActions","_showButton","_compareFunction","qa","_idWorkItem","_idTask","some","itemsToShow","_newButtons","_addButtons","context","_idWorkItemsToShow","_filterItemsToShowCheckbox","_workItems","idTasksWithQuickActions","addItemToShowCheckbox","_renderButton","hidden","_templeateToUse","_renderMoreButton","off","unsubscribe","_clickOnAction","_clickOnMore","subscribe","_adjustButtonsWidth","_prop","_title","textContent","_num","_getNumberOfSelected","_textToShow","getResourceByElementsNumber","_message","numberActivities","_modalParams","_buildParamsForModalConfirm","_buttonClicked","_setProperty","apply","setInitialDataForModal","showResultDialog","_data","activities","_buttonActions","_itemInfo","_quickAction","_newTask","workItemId","taskId","activityName","TaskName","caseId","icon","quickActionGuid","ruleGuid","guidRule","itemIsChecked","selected","titleModal","class","_showHidden","_getProperty","setOnly","_setOnly","_changed","_valToReturn","_cloneWith","_updateViewSelected","_element","_eContainer","_eFirstButton","_buttons_all","_buttons_shown","_buttons_hidden","_container_width","_newContainer_width","outerWidth","_resized","_isOverLapped","outerHeight","_existsButtonsShown","_lastButtonShown","slice","_buttonsShown_exceptLast","_newButtonsHidden","_updateViewButtons","_buttonsShown","_buttonsHidden","_moreButton","_containerToShow","_containerToHide","_newButton","_updateViewMoreButton","_show","_isActive","toggleClass","_updateViewContainer","_inboxGridTitle","_updateViewHiddenButtons","num","_selectedVal","_showVal","instanceQuickActionsExecute","triggerHandler","BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE","showStopConfirmModal","closeOnEscape","onClose","getRenderWidget","registerDialog","prependTo","SELECTOR_BUTTON_STOP_ALL","SELECTOR_BUTTON_CLOSE","SELECTOR_ONE_RESULT","TYPE_ROW_DEFAULT","TYPE_ROW_ONLY_DEFAULT_TEXT","TYPE_ROW_ONLY_ERROR_TEXT","ACTIVITIES","END_ALL_REQUESTS","STOP_BY_USER","NUMBER_EXECUTED_ACTIONS","DIALOG","RESULT_SUCCESS","RESULT_EXECUTED","RESULT_WARNING","RESULT_ERROR","quickActions-execute","quick-actions-stop-all-modal-confirm","summaryText","_getSummaryText","requesterService","quickActionsRequester","_processResponseOfExecuteQuickActions","startAllRequests","_showDefaultWarningMessageBrowser","_configureHandlers","_updateViewSummaryExecutionActions","_activities","_numberExecutedActions","_onClickFilterButton","_target","correspondingUseElement","$button","filterBy","_showFilterResults","_completeText","_noResultsText","_elementsToShow","dataResponse","_disableBtnStopAll","itemToShow","_addRowToResultsWithType","activityToAdd","activity","paramsRequest","details","status","statusAndDataResponseToShow","_getStatusByBackResponse","backResponse","_setResultToActionRequest","numberSkipActions","_hideBtnStopAllAndShowClose","_manageExecuteModalCloseButton","stopAllRequests","paramsItem","paramsToCreateItem","itemInstance","collapsible","getView","itemContent","_changeProperties","setStatus","setIcon","setDescription","_status","_description","tag","messages","statusText","_getFinalDataResponse","_getIcon","dialogBox","SELECTOR_TITLE","SELECTOR_SUBTITLE","SELECTOR_STATUS","SELECTOR_ICON","SELECTOR_DESCRIPTION","SELECTOR_ARROW","SELECTOR_COLLAPSIBLE_LINK","SELECTOR_COLLAPSIBLE_DESCRIPTION","SELECTOR_COLLAPSIBLE_ITEM","RESULT_IN_PROCESS","TYPE_ROW","ID","TITLE","SUBTITLE","STATUS","ICON","DESCRIPTION","quick-actions-items","quick-actions-item-only-default-text","quick-actions-item-only-error-text","rendered","slideToggle","hasClass","_changeArrow","add","_setId","_text","_selectorStatus","_selectorArrow","newIcon","_selectorIcon","selector","newDescription","_updateViewAll","_subtitle","_icon","_selectorTitle","_selectorSubtitle","_selectorDescription","_defer","CHECKBOX_CLASS","CHECKBOX_CHECKED_CLASS","CHECK_ALL","quick-actions-checkbox","_CHECK_ALL_CHECKBOX_CONTAINER","_CHECK_ALL_CHECKBOX","_getContainerSelector","_onItemsCheckedChange","checkedItems","_checkboxTemplate","checkboxContent","persistCheckbox","_items","_context","_renderCheckbox","_configureCheckAllCheckbox","loadStoredItems","stillChecked","substr","_refreshCheckAllCheckbox","clearCheckedItems","_toggleCheckAllCheckbox","_containerSelector","_checkboxSelector","_content","_updateCheckedItems","_addDataToCheckbox","checkbox","_getDataFormCheckbox","_itemWasChecked","_removeItemChecked","_addItemChecked","_newCheckedAll","_getNumberOfItemsChecked","checkAllNewValue","_checkAll","_newCheckAll","_refreshAllCheckboxes","checkAll","_checkboxNotPrincipal","not","_updateViewCheckAll","_checked"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Desktop List Cases implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Kevin Alvarado\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Used for Search, Queries Result and InboxGrid Desktop\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Because they share show cases as list \r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.listCases\", {}, {\n  /*\r\n                                                                                     *   Returns the widget name\r\n                                                                                     */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LISTCASES;\n  },\n\n  /**\r\n     * Set the table with the fixed thead\r\n     * @param {Json} params TableElement,groupByCaseNumber,floatOptions\r\n     */\n  setTableHeadFixed: function setTableHeadFixed(params) {\n    params.TableElement.floatThead(params.floatOptions);\n\n    if (params.groupByCaseNumber && bizagi.util.isIE()) {\n      params.TableElement.find(\"tbody > tr.ui-bizagi-wp-app-inbox-grouped-trtag-hide\").hide();\n    }\n  },\n  /**\r\n     * create a new instance and start to show the checkboxGroup for each activity\r\n     */\n  _startQuickActions: function _startQuickActions() {\n    var self = this,\n    _QActionsStared = self.quickActionsInstance !== undefined,\n    _params = {\n      getContainerSelector: self.getQuickActionContainerSelector.bind(self),\n      checkAllSelector: self.getQuickActionCheckAllContainerSelector(),\n      refreshShowedResults: self.updateResults.bind(self) };\n\n    if (!_QActionsStared)\n    self.quickActionsInstance = new bizagi.workportal.widgets.quickActions(self.workportalFacade, self.dataService, _params);\n  },\n\n  /**\r\n      * Refresh page results\r\n      */\n  updateResults: function updateResults() {\n    var self = this;\n    var _params = bizagi.util.tryCatch(function () {return bizagi.referrerParams.changeProcessOptions;}, {});\n    self.changeProcess(_params);\n  },\n\n  /**\r\n      * render quickActions in parentTemplate\r\n      * @param {Jquery Template} parentTemplate \r\n      */\n  _QuickActionsRenderIn: function _QuickActionsRenderIn(parentTemplate, workItemsInfo, quickActions) {\n    var self = this,\n    _QActionsContainer = parentTemplate.find(\"#contentQuickActions\");\n\n    self.quickActionsInstance.setDataToExecute(workItemsInfo, quickActions);\n    self.quickActionsInstance.renderIn(_QActionsContainer);\n    self.quickActionsInstance.renderCheckboxGroup(parentTemplate);\n  },\n\n  /**\r\n      * Filter the data from the workItems to send to QuickAction Widget.\r\n      * Return a dictionary by the workItem id as key and its information as value.\r\n      * @param {*} headers\r\n      * @param {*} rows\r\n      */\n  _getWorkItemsInfo: function _getWorkItemsInfo(headers, rows) {\n    var self = this,\n    _finalWorkItems = {};\n\n    var indexWorkItems = self._getIndexFromTableColumn(headers, \"order\", \"T_IDTASK\");\n    var indexCaseNumber = self._getIndexFromTableColumn(headers, \"order\", \"T_RADNUMBER\");\n\n    for (var j = 0; j < rows.length && indexWorkItems !== -1; j++) {\n      var _rowInfo = rows[j].fields,\n      _rowWorkItems = _rowInfo[indexWorkItems].workitems;\n\n      for (var k = 0; k < _rowWorkItems.length && indexCaseNumber !== -1; k++) {\n        var _workItem = _rowWorkItems[k];\n\n        _workItem.idCase = rows[j].id;\n        _workItem.caseNumber = _rowInfo[indexCaseNumber];\n        _finalWorkItems[_workItem.idWorkItem] = _workItem;\n      }\n    }\n\n    return _finalWorkItems;\n  },\n\n  /**\r\n      * Get the index of the column for workItems\r\n      */\n  _getIndexFromTableColumn: function _getIndexFromTableColumn(columnTitle, columnName, name) {\n    return columnTitle.findIndex(function (column) {\n      return column[columnName].toUpperCase() === name;\n    });\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionCheckAllContainerSelector: function getQuickActionCheckAllContainerSelector() {\n    return \"#ui-quickActions-all-processes\";\n  },\n\n  /**\r\n      * Return the selector of the quick action checkbox\r\n      * @param {*} workItem \r\n      */\n  getQuickActionContainerSelector: function getQuickActionContainerSelector(id) {\n    return \"#ui-quickActions-checkbox-\" + id;\n  },\n\n  /*\r\n     *   Shows a popup with the case information\r\n     */\n  showCase: function showCase(idCase, idWorkflow) {\n    var self = this;\n    var content = self.getContent();\n    var caseSummaryContainer = $(\"#contentDesc\", content);\n    var cache = {};\n    var htmlContent = \"\";\n\n    // Update internal variable\n    self.idCase = idCase;\n\n    caseSummaryContainer.empty();\n\n    // Don't search data when there is no case\n    if (self.idCase == 0) {\n      return;\n    }\n\n    // Render Form Tab\n    $.when(self.dataService.summaryCaseDetails({\n      idCase: self.idCase })).\n\n    done(function (data) {\n      var adhocProcessId = null;\n      var isAdhoc = false;\n      if (!data.isAdhocProcess || typeof data.isAdhocProcess === 'undefined') data.isAdhocProcess = false;\n      if (data.isAdhocProcess) {\n        adhocProcessId = data.idAdhocProcess;\n        isAdhoc = true;\n      }\n      data.hasComments = data.hasComments == 'true' ? true : false;\n\n      // Get security\n      var security = new bizagi.workportal.command.security(self.dataService);\n      data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\n\n      data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\n      data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\n\n      if (data.currentState && data.currentState.length > 0) {\n        data.currentState.forEach(function (currentState) {\n          if (!currentState.idTask) {\n            currentState.idTask = 0;\n          }\n          if (!currentState.state) {\n            currentState.state = currentState.displayName || \" \";\n          }\n        });\n      }\n\n      if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\n        data.process = false;\n      }\n\n      if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\n        data.processPath = false;\n      }\n\n\n      var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\n      self.callTaskDescription(data, renderedTemplate);\n\n      // Format invariant dates\n      bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\n\n\n      // Delegate events for parent process\n      $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function () {\n        self.routingExecute($(this));\n        caseSummaryDialog.dialog('close');\n      });\n\n      var caseSummaryDialog = renderedTemplate;\n\n      // jQuery-ui tabs\n      $(\"#ui-bizagi-details-tabs\", content).tabs({\n        active: -1,\n        create: function create(event, ui) {\n          $(this).tabs(\"option\", \"active\", 0);\n        },\n        \"activate\": function activate(event, ui) {\n          var panel = ui == undefined ? \"formSummary\" : ui.newPanel.attr('id');\n          switch (panel) {\n            case \"comments\":\n              if (cache[\"comments\"] == undefined) {\n                // Extend render with comments\n                $.extend(self, {}, bizagi.workportal.comments);\n\n                // Define canvas\n                data.canvas = $(\"#comments\");\n                data.readOnly = true;\n\n                $.when(self.renderComments(data)).\n                done(function (htmlContent) {\n                  cache[\"comments\"] = htmlContent;\n                });\n              }\n              bizagi.util.setContext({\n                commentsFocus: true });\n\n              break;\n            case \"formSummary\":\n              if (cache[\"formSummary\"] == undefined) {\n                var canvas = $(\"#formSummary\", caseSummaryContainer);\n\n                // Define action when render form has not been migrated\n                canvas.bind(\"oldrenderintegration\", function (e) {\n                  if (e.isPropagationStopped()) {\n                    return;\n                  }\n                  e.stopPropagation();\n\n                  var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\n                  var data = {};\n\n                  bizagi.oldrenderevent = true; // has been loaded\n                  var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n                  var eventer = window[eventMethod];\n                  var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\n\n                  // Listen to message from child window\n                  eventer(messageEvent, function (e) {\n                    e.stopPropagation();\n                    self.publish(\"executeAction\", {\n                      action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                      idCase: e.data });\n\n                  }, false);\n\n                  // Define wirkitem and idtask\n                  $.when(self.dataService.getWorkitems({\n                    idCase: self.idCase,\n                    onlyUserWorkItems: true,\n                    eventAsTasks: true })).\n                  done(function (getWorkitems) {\n                    // verify workitem, in some cases these variables are not available\n                    if (_typeof(getWorkitems.workItems) == \"object\" && getWorkitems.workItems.length >= 1) {\n                      // Case Open\n                      var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\n                      var idTask = getWorkitems.workItems[0]['idTask'];\n\n                      for (i = 0; i < getWorkitems.workItems.length; i++) {\n                        if (getWorkitems.workItems[i]['idCase'] == self.idCase) {\n                          idWorkitem = getWorkitems.workItems[i]['idWorkItem'];\n                          idTask = getWorkitems.workItems[i]['idTask'];\n                          break;\n                        }\n                      }\n\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\n                    } else {\n                      // Case closed\n                      data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\n                    }\n\n                    // Render content\n                    canvas.empty();\n                    $.tmpl(template, data).appendTo(canvas);\n                    //Set styles\n                    self.iframeOldRender($(\"iframe\", canvas));\n                  });\n                });\n\n                var params = {\n                  idCase: self.idCase };\n\n\n                $.when(self.dataService.getCaseFormsRenderVersion(params)).\n                done(function (formsVersion) {\n                  if (formsVersion.formsRenderVersion == 1) {\n                    canvas.trigger(\"oldrenderintegration\");\n                  } else {\n                    $.when(\n                    self.renderSummaryForm($(\"#formSummary\", renderedTemplate))).\n                    done(function () {\n                      htmlContent = $(\"#formSummary\", renderedTemplate).html();\n                      cache[\"formSummary\"] = htmlContent;\n                    });\n                  }\n                });\n              }\n              break;\n            case \"subprocess\":\n              if (cache[\"subprocess\"] == undefined) {\n                $.when(\n                self.dataService.summarySubProcess({\n                  idCase: self.idCase })).\n\n                done(function (subprocess) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\n                  htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\n                  cache[\"subprocess\"] = htmlContent;\n\n                  // Define Events for subprocess tab\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;\n            case \"assignees\":\n              if (cache[\"assignees\"] == undefined) {\n                $.when(\n                self.dataService.summaryAssigness({\n                  idCase: self.idCase,\n                  preview: true })).\n\n                done(function (assignees) {\n                  // Generates  lists of unique assignees for Events\n                  var eventsUniqueList = [];\n                  $.each(assignees.events.split(\", \"), function (i, el) {\n                    if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\n                  });\n                  assignees.events = eventsUniqueList.join(\", \");\n\n                  htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\n                  htmlContent.appendTo($(\"#assignees\", renderedTemplate));\n                  cache[\"assignees\"] = htmlContent;\n                });\n              }\n              break;\n            case \"events\":\n              if (cache[\"events\"] == undefined) {\n                $.when(\n                self.dataService.summaryCaseEvents({\n                  idCase: self.idCase })).\n\n                done(function (events) {\n                  htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\n                  htmlContent.appendTo($(\"#events\", renderedTemplate));\n                  cache[\"events\"] = htmlContent;\n\n                  htmlContent.delegate(\".summaryLink\", \"click\", function () {\n                    self.routingExecute($(this));\n                    caseSummaryDialog.dialog('close');\n                  });\n                });\n              }\n              break;}\n\n        } });\n\n\n\n      // jquery UI Button work on it button\n      $(\".workonitRow\", renderedTemplate).button();\n\n      // Add click to timeline icon\n      $(\".js-show-timeline\", renderedTemplate).click(function (event) {\n        var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\n        self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\n      });\n\n      // Add click to view workflow\n      $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\n        if (isAdhoc) {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: adhocProcessId });\n        } else {\n          self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\n        }\n      });\n\n\n\n      // Bind events for events and process on summary case\n      $(\".workonitRow\", renderedTemplate).click(function () {\n        // Executes routing action\n        caseSummaryDialog.dialog('close');\n        self.publish(\"executeAction\", {\n          action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n          idCase: data.idCase,\n          idWorkflow: idWorkflow,\n          idTask: $(this).parent().find(\"#idTask\").val(),\n          idWorkItem: $(this).parent().find(\"#idWorkItem\").val() });\n\n      });\n\n      // Set buttons\n      var buttons = {};\n      buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function () {\n        caseSummaryContainer.empty();\n        renderedTemplate.remove();\n        $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n      };\n\n      caseSummaryDialog.dialog({\n        modal: true,\n        title: data.process,\n        width: 1000,\n        height: 600,\n        draggable: true,\n        resizable: true,\n        buttons: buttons,\n        close: function close() {\n          caseSummaryContainer.empty();\n          renderedTemplate.remove();\n          $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\n        } });\n\n\n    });\n  },\n\n  /**\r\n      * \r\n      * Call task description widget \r\n      */\n\n  callTaskDescription: function callTaskDescription(data, summary) {\n    var self = this;\n    var width = 720;\n    var taskDescriptionParams = {\n      classNeedsModal: \"task_description_needs_modal\",\n      width: width };\n\n    new bizagi.workportal.widgets.task.description(self.workportalFacade, self.dataService, taskDescriptionParams).renderManyTasksDescription(data.currentState, summary);\n  },\n\n\n  /*\r\n     *   Renders the summary form inside a given container\r\n     */\n  renderSummaryForm: function renderSummaryForm(container) {\n    var self = this;\n\n    var proxyPrefix = typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\" ?\n    self.dataService.serviceLocator.proxyPrefix : \"\";\n\n    bizagi.loader.start(\"rendering\").then(function () {\n      // Load render page\n      var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\n\n      // Executes rendering into render container\n      rendering.execute({\n        canvas: container,\n        summaryForm: true,\n        idCase: self.idCase });\n\n\n      // Keep reference to rendering facade\n      self.renderingFacade = rendering;\n\n      // Resize layout\n      setTimeout(function () {\n        self.resizeLayout();\n      }, 1000);\n    });\n  },\n\n  /**\r\n      * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n      */\n  isAvailableTimelineByProcessType: function isAvailableTimelineByProcessType(isAdhocProcess) {\n    return !isAdhocProcess ||\n    isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Desktop Queries Dialog implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Juan Pablo Crossley\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n// Extends itself\nbizagi.workportal.widgets.queryform.extend(\"bizagi.workportal.widgets.queryform\", {\n  SELECTORS: {\n    FORM_LOADER: \"#query-form-loader\",\n    FORM: \"#query-form\",\n    FORM_BUTTONS: \"#query-form-buttons\" },\n\n  QUERY_FORM_ACTIONS: {\n    EDIT: \"edit\",\n    RENDER_QUERY_FORM: \"renderQueryForm\",\n    SUBMIT_QUERY_FORM: \"submitQueryForm\",\n    GRAPHICAL_ANALYSIS: \"graphicalAnalysis\",\n    EXECUTE: \"execute\",\n    SAVE_QUERY_FORM: \"saveQueryForm\" } },\n\n{\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queryform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-frankenstein-queryform-wrapper\"),\n      \"queryform-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-wrapper\"),\n      \"queryform-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-container\"),\n      \"queryform-buttons\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-buttons\"),\n      \"queryform-graphic-analysis\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-graphic-analysis\"),\n      \"queryform-result-set\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-result-set\"),\n      \"queryform-search-result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-search-result\"),\n      \"queryform-pagination\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-pagination\"),\n      \"queryform-admin-result\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-admin-result\"),\n      \"queryform-share-selection\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-share-selection\"),\n      \"queryform-select-user\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-select-user\"),\n      \"queryform-select-group\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-select-group\"),\n      \"queryform-save-as\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform-save-as\"),\n      \"queryform-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queryform\").concat(\"#ui-bizagi-workportal-widget-queryform--message-error\"),\n      \"inbox-common-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description\"),\n      \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\n      \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\n      \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\n      useNewEngine: false });\n\n\n    if (!bizagi.referrerParams)\n    bizagi.referrerParams = {};\n    bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM;\n    self.lstIdCasesBackup(self.lstIdCases());\n  },\n\n  /*\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.caseSummaryTemplate = self.getTemplate(\"inbox-common-case-summary\");\n    self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\n    self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\n    self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\n\n    if (self.params.notMigratedUrl == \"true\") {\n      self.params.notMigratedUrl = Boolean(self.params.notMigratedUrl);\n    }\n\n    //if (bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) == true && (self.params.notMigratedUrl == \"\" || self.params.notMigratedUrl == true)) {\n    if (self.params.notMigratedUrl == \"\" || self.params.notMigratedUrl == true) {\n      self.modifiedPostRender();\n    } else\n    {\n      self.frankensteinPostRender();\n    }\n\n    self.comboRowsPerPage = new bizagi.workportal.results.per.page();\n\n    bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM;\n\n    self._startQuickActions();\n  },\n\n  /**\r\n      * Request to queryForm definition service\r\n      */\n  loadResultsOnActionExecute: function loadResultsOnActionExecute(params, hasOwnLoader) {\n    var self = this;\n\n    //builds the params\n    var queryFormParams = {\n      h_action: \"QUERYFORM\",\n      h_contexttype: self.contextType,\n      h_idForm: self.guidForm };\n\n\n    self.dataService.getQueryForm(queryFormParams).done(function (data) {\n      //stores the elements to check their values later\n      self.queryFormElements = data.form.elements;\n      // Update initial params number of rows\n      if (self.initialSearchParams) {\n        self.initialSearchParams.numberOfRows = self.getItemsPerPage();\n      }\n      //find the results directly, no need to enter any value \n      self.findResults(self.getContent(), params, self.params.pageToShow, hasOwnLoader);\n    });\n  },\n\n  /**\r\n      *  Store data in order to initialize a query form from a render widget            \r\n      */\n  storeQueryFormParams: function storeQueryFormParams(additionalParams) {\n    var self = this;\n    bizagi.referrerParams = bizagi.referrerParams || {};\n    var referrerParams = {\n      actionForm: bizagi.clone(self.params.queryFormAction),\n      data: $.extend({}, self.params) };\n\n    bizagi.referrerParams.queryForm = $.extend(referrerParams, additionalParams);\n  },\n\n  /**\r\n      * Return the expected number of items per page,\r\n      * checking if there is an user preference stored\r\n      */\n  getItemsPerPage: function getItemsPerPage() {\n    var self = this;\n    var itemsPerPagePreference = self.getRowValue();\n    return itemsPerPagePreference ? itemsPerPagePreference : 10;\n  },\n\n  /**\r\n      * @override\r\n      */\n  updateResults: function updateResults() {\n    var self = this;\n    self.reloadDataResults(true);\n  },\n  /**\r\n      * Returns a new page close to the first item above based on the previous page\r\n      * @param {*} newItemsPerPage new value in results per page in search\r\n      * @param {*} previousItemsPerPage previous value in results per page\r\n      * @param {*} previousPage previous value in page number\r\n      */\n  calculateNewPage: function calculateNewPage(newItemsPerPage, previousItemsPerPage, previousPage) {\n    var currentFirstItem = previousItemsPerPage * previousPage - previousItemsPerPage + 1;\n    var newPage = Math.ceil(currentFirstItem / newItemsPerPage);\n    return newPage ? newPage : 1;\n  },\n\n  /**\r\n      * Reload the data showed\r\n      * @param {*} preservePage if should preserve current page\r\n      */\n  reloadDataResults: function reloadDataResults(preservePage) {\n    var self = this,\n    _hasOwnLoader = true,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var itemsPerPage = Number(self.getItemsPerPage());\n    var content = self.getContent();\n    var page = preservePage && self.params.queryParams.pageNumber ? self.params.queryParams.pageNumber : self.calculateNewPage(itemsPerPage, self.params.queryParams.numberOfRows, self.params.queryParams.pageNumber);\n\n    if (self.params.queryFormAction === _ACTIONS.SUBMIT_QUERY_FORM || self.params.queryFormAction === _ACTIONS.RENDER_QUERY_FORM) {\n      self.params.queryParams.numberOfRows = itemsPerPage;\n      self.findResults(content, self.params.queryParams, page, _hasOwnLoader);\n    } else\n    {\n      self.storeQueryFormParams();\n      self.searchParamsOnActionExecute.numberOfRows = itemsPerPage;\n      self.loadResultsOnActionExecute(self.params.queryParams, _hasOwnLoader);\n    }\n  },\n\n  /**\r\n      * Render the combo of results per page\r\n      * @param {*} comboDataSource \r\n      */\n  renderNumberRowsCombo: function renderNumberRowsCombo(comboDataSource, content) {\n    var self = this;\n    return self.comboRowsPerPage.renderNumberRowsCombo({\n      combo: comboDataSource,\n      content: content,\n      comboWrapper: $(\"#select-pagination\", content),\n      onChange: function onChange() {\n        if (self.quickActionsInstance) {\n          self.quickActionsInstance.setPersistCheckboxGroup(true);\n        }\n        self.params.pageToShow = \"1\";\n        self.reloadDataResults(false);\n      },\n      setRowValue: self.setRowValue,\n      getRowValue: self.getRowValue });\n\n  },\n\n  /**\r\n      * Get user preference queriesItemsPerPage value\r\n      */\n  getRowValue: function getRowValue() {\n    var preferences = bizagi.services.preferences().getPreferences();\n    storedValue = preferences && preferences.queriesItemsPerPage ? preferences.queriesItemsPerPage : null;\n    return storedValue;\n  },\n\n  /**\r\n      * Set user preference queriesItemsPerPage value\r\n      * @param {*} value new value\r\n      */\n  setRowValue: function setRowValue(value) {\n    var modifiedJSON = bizagi.services.preferences().getPreferences();\n    modifiedJSON.queriesItemsPerPage = Number(value);\n    bizagi.services.preferences().overridePreferences(modifiedJSON);\n  },\n\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.container = self.getTemplate(\"queryform-container\");\n    self.buttons = self.getTemplate(\"queryform-buttons\");\n    self.graphicalAnalysisContainer = self.getTemplate(\"queryform-graphic-analysis\");\n    self.resultSet = self.getTemplate(\"queryform-result-set\");\n    self.searchResult = self.getTemplate(\"queryform-search-result\");\n    self.paginationTmpl = self.getTemplate(\"queryform-pagination\");\n    self.adminResult = self.getTemplate(\"queryform-admin-result\");\n    self.selectUser = self.getTemplate(\"queryform-select-user\");\n    self.selectGroup = self.getTemplate(\"queryform-select-group\");\n    self.shareSelection = self.getTemplate(\"queryform-share-selection\");\n    self.dialogSaveAsTmpl = self.getTemplate(\"queryform-save-as\");\n  },\n\n  /**\r\n      * return start and stop methods for adjust view and loader correctly\r\n      * @param {Jquery Element} content of widget\r\n      * @param {Boolean} hasOwnLoader \r\n      */\n  _adjustViewLoader: function _adjustViewLoader(content, hasOwnLoader) {\n    var self = this;\n    SELECTORS = self.Class.SELECTORS,\n    LOADER = $(SELECTORS.FORM_LOADER, content),\n    FORM = $(SELECTORS.FORM, content),\n    BUTTONS = $(SELECTORS.FORM_BUTTONS, content),\n    _start = function _start(isStart) {\n      isStart ? LOADER.show() : LOADER.hide();\n      isStart ? FORM.hide() : FORM.show();\n      isStart ? BUTTONS.hide() : BUTTONS.show();\n    },\n    _noOp = function _noOp() {},\n    execute = hasOwnLoader ? _noOp : _start;\n\n    return {\n      start: execute.bind(null, true),\n      stop: execute.bind(null, false) };\n\n  },\n\n  /*\r\n      *  New Query Forms implementation\r\n      */\n  modifiedPostRender: function modifiedPostRender() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    self.maxElemShow = 10;\n    self.maxPageToShow = 5;\n    self.atLeastOneChecked = false;\n    self.selectedItemsToShare = {\n      users: [],\n      groups: [] };\n\n    self.readyToSave = false;\n    self.includeAllUsers = false;\n    self.saveAs = false;\n    self.sortedField = {};\n    self.storedQueryFormParameters = {};\n    self.dialogSaveAs = $.tmpl(self.dialogSaveAsTmpl);\n    self.orderType = {\n      ASC: \"ASC\",\n      DESC: \"DESC\",\n      NONE: \"NONE\" };\n\n    self.queryFormContextTypes = {\n      CASES: \"metadata\",\n      ENTITY: \"entity\" };\n\n    self.queryFormTypes = {\n      CASES: \"CASES\",\n      ENTITY: \"ENTITIES\" };\n\n\n    $(\"#queries-results-per-page\", content).hide();\n\n    if (self.params.notMigratedUrl == true || self.params.paramsStoredQuery.notMigratedUrl == true) {\n      var messageErrorForm = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n      messageErrorForm = messageErrorForm.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n      var htmlMessage = $.tmpl(self.getTemplate(\"queryform-message-error\"), { messageError: messageErrorForm });\n      $(content).html(htmlMessage);\n      return false;\n    }\n\n    var actionEdit = function actionEdit() {\n      if (self.params.queryParams && !self.params.queryParams.ownerQuery) {\n        self.showSaveResultsForm();\n        $(\"#tab_share\", content).hide();\n        $(\"#query-form-buttons\", content).hide();\n        $(\"#query-form\").hide();\n        $(\"#queryFormName\").prop(\"disabled\", true);\n        $(\"#queryFormDescription\").prop(\"disabled\", true);\n        $(\"#input-name-ui-bizagi-input-required\").hide();\n      } else {\n        self.guidEntity = self.params.paramsStoredQuery.definition.entityGuid;\n        self.guidForm = self.params.paramsStoredQuery.guid;\n        self.queryFormType = self.params.paramsStoredQuery.definition.type;\n        self.idQueryForm = self.params.paramsStoredQuery.id;\n        self.renderQueryForm();\n        self.showSaveResultsForm();\n      }\n      self.previousValues(self.params.paramsStoredQuery);\n    };\n\n    var actionRenderQueryForm = function actionRenderQueryForm() {\n      self.guidForm = self.params.guidForm;\n      self.guidEntity = self.params.guidEntity;\n      if (self.params.queryType == 1) {\n        self.queryFormType = self.queryFormTypes.CASES;\n      } else if (self.params.queryType == 2) {\n        self.queryFormType = self.queryFormTypes.ENTITY;\n      }\n      self.renderQueryForm();\n    };\n\n    var actionSubmitQueryForm = function actionSubmitQueryForm() {\n      if (typeof self.params.queryParams.parameters == \"string\") {\n        self.params.queryParams.parameters = JSON.parse(self.params.queryParams.parameters);\n      }\n      self.initialSearchParams = self.params.queryParams;\n      self.initSortParameters();\n      var pageToShow = self.params.pageToShow || 1;\n      self.params.queryParams.numberOfRows = self.getItemsPerPage();\n\n      //builds the params\n      self.contextType = self.params.widget.contextType;\n      self.guidForm = self.params.widget.guidForm;\n      self.guidEntity = self.params.widget.guidEntity;\n      self.queryForm = self.params.queryForm;\n      self.includeAllUsers = self.params.widget.includeAllUsers;\n      self.queryFormType = self.params.widget.queryFormType;\n\n      if (self.params.queryType == 1) {\n        self.queryFormType = self.queryFormTypes.CASES;\n      } else if (self.params.queryType == 2) {\n        self.queryFormType = self.queryFormTypes.ENTITY;\n      }\n\n      self.handleEvents();\n      self.findResults(self.getContent(), self.params.queryParams, pageToShow);\n\n      $(\"#copy-as-new-stored-queryform\", content).hide();\n      $(\"#update-stored-queryform\", content).hide();\n      $('#edit-stored-queryform', content).hide();\n    };\n\n    var actionExecute = function actionExecute() {\n      var _hasOwnLoader = false;\n      self.storeQueryFormParams();\n\n      self.guidEntity = self.params.paramsStoredQuery.definition.entityGuid;\n      self.guidForm = self.params.paramsStoredQuery.guid;\n      self.queryFormType = self.params.paramsStoredQuery.definition.type;\n      self.includeAllUsers = self.params.paramsStoredQuery.definition.includeAllUsers;\n      self.idQueryForm = self.params.paramsStoredQuery.id;\n\n      self.searchParamsOnActionExecute = {\n        \"numberOfRows\": self.getItemsPerPage(),\n        \"pageNumber\": 1,\n        \"queryFormGuid\": self.params.paramsStoredQuery.guid,\n        \"entityGuid\": self.params.paramsStoredQuery.definition.entityGuid,\n        \"type\": self.params.paramsStoredQuery.definition.type,\n        \"parameters\": self.params.paramsStoredQuery.definition.parameters,\n        \"ownerQuery\": self.params.paramsStoredQuery.owner,\n        \"includeAllUsers\": self.params.paramsStoredQuery.definition.includeAllUsers };\n\n\n      if (self.params && self.params.queryParams && self.params.queryParams.parameters) {\n        if (typeof self.params.queryParams.parameters == \"string\") {\n          self.params.queryParams.parameters = JSON.parse(self.params.queryParams.parameters);\n        }\n        self.searchParamsOnActionExecute.parameters = self.params.queryParams.parameters;\n      }\n\n      self.handleEvents();\n      self.initialSearchParams = JSON.parse(JSON.stringify(self.searchParamsOnActionExecute));\n      self.initSortParameters();\n      //parses the type\n      if (self.queryFormType == self.queryFormTypes.CASES) {\n        self.contextType = self.queryFormContextTypes.CASES;\n      } else if (self.queryFormType == self.queryFormTypes.ENTITY) {\n        self.contextType = self.queryFormContextTypes.ENTITY;\n      }\n\n      $(\"#query-form-buttons\", content).hide();\n\n      self.loadResultsOnActionExecute(self.searchParamsOnActionExecute, _hasOwnLoader);\n\n      $(\"#copy-as-new-stored-queryform\", content).hide();\n      $(\"#update-stored-queryform\", content).hide();\n      $('#edit-stored-queryform', content).show();\n    };\n\n    switch (self.params.queryFormAction) {\n      case _ACTIONS.EDIT:\n        actionEdit();\n        break;\n\n      case _ACTIONS.RENDER_QUERY_FORM:\n        actionRenderQueryForm();\n        break;\n\n      case _ACTIONS.SUBMIT_QUERY_FORM:\n      case _ACTIONS.GRAPHICAL_ANALYSIS:\n        actionSubmitQueryForm();\n        break;\n\n      case _ACTIONS.EXECUTE:\n        actionExecute();\n        break;\n      default:\n        break;}\n\n  },\n\n\n  /*\r\n     *  Render queryForm\r\n     * */\n  renderQueryForm: function renderQueryForm(values) {\n    var self = this,\n    _hasOwnLoader = false,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n\n    if (self.queryFormType == self.queryFormTypes.CASES) {\n      self.contextType = self.queryFormContextTypes.CASES;\n    } else if (self.queryFormType == self.queryFormTypes.ENTITY) {\n      self.contextType = self.queryFormContextTypes.ENTITY;\n    }\n\n    var queryFormParams = {\n      h_action: \"QUERYFORM\",\n      h_contexttype: self.contextType,\n      h_idForm: self.guidForm };\n\n    if (self.idQueryForm && self.idQueryForm !== \"\") {\n      queryFormParams.h_idqueryform = self.idQueryForm;\n    }\n\n    var renderContainer = $.tmpl(self.container);\n\n    // Request to queryForm definition service\n    self.dataService.getQueryForm(queryFormParams).done(function (data) {\n      var renderingParams = {\n        canvas: renderContainer,\n        data: data,\n        type: \"queryForm\" };\n\n\n      //stores the elements to validate them later\n      self.queryFormElements = data.form.elements;\n\n      bizagi.loader.startAndThen(\"rendering\").then(function () {\n\n        var rendering = new bizagi.rendering.facade();\n\n        rendering.execute(renderingParams).done(function () {\n          self.queryForm = rendering.form;\n\n          if (self.queryForm.properties && typeof self.queryForm.properties.includeAllUsers != \"undefined\") {\n            self.includeAllUsers = self.queryForm.properties.includeAllUsers;\n          }\n\n          $(\"#query-form\", content).html(renderContainer);\n\n          // To validate if the input contains a value and depends on that show or hide the div that indicates the required field\n          self.validateRequireField();\n\n          $(\"#queryFormName\", content).keyup(function () {\n            self.validateRequireField();\n          });\n\n          self.handleEvents();\n\n          self._adjustViewLoader(content, _hasOwnLoader).stop();\n          $(\"#queries-results-per-page\", content).hide();\n          $(\"#query-form-result\", content).hide();\n          $(\"#mainButtons\", content).css(\"width\", \"100%\");\n          $(\"#exportExcel\", content).hide();\n          $(\"#graphicalAnalysis\", content).hide();\n          $(\"#back-to-queryform\", content).hide();\n          $(\"#save-queryform\", content).hide();\n          $('#queryFormName').prop(\"disabled\", false);\n          $('#queryFormDescription').prop(\"disabled\", false);\n\n          if (values) {\n\n            self.setXpathValuesToQueryForm(self.queryForm, values);\n\n            $(\"#query-form-admin-result\", content).hide();\n            $(\"#copy-as-new-stored-queryform\", content).hide();\n            $(\"#update-stored-queryform\", content).hide();\n            $('#edit-stored-queryform', content).hide();\n          }\n\n          if (self.params.queryFormAction === _ACTIONS.RENDER_QUERY_FORM) {\n\n            $(\"#query-form-admin-result\", content).hide();\n            $(\"#copy-as-new-stored-queryform\", content).hide();\n            $(\"#update-stored-queryform\", content).hide();\n            $('#edit-stored-queryform', content).hide();\n          } else if (self.params.queryFormAction === _ACTIONS.EDIT) {\n\n            var parentName = self.params.paramsStoredQuery.definition.parentQueryForm || self.params.paramsStoredQuery.definition.name;\n\n            $(\"#queryFormFieldsContainerName span\", content).html(parentName);\n            $(\"#queryFormFieldsContainer\", content).html(renderContainer);\n            $(\"#submit-for-search\", content).hide();\n            $(\"#clear-queryform\", content).hide();\n            $(\"#copy-as-new-stored-queryform\", content).show();\n            $(\"#update-stored-queryform\", content).show();\n            $('#edit-stored-queryform', content).hide();\n          }\n        });\n      });\n    });\n  },\n\n  /**\r\n      * if the type es from this list the value array is adjusted\r\n      */\n  _adjustValueOnRestore: function _adjustValueOnRestore(parameter, control) {\n    var typesForAdjustValue = [\n    \"queryCombo\",\n    \"querySuggest\",\n    \"queryCascadingCombo\",\n    \"queryState\",\n    \"queryList\",\n    \"queryRadio\",\n    \"queryCaseState\",\n    \"querySearchUser\"],\n\n    _haveToAdjust = typesForAdjustValue.indexOf(control.properties.type) !== -1;\n\n    if (_haveToAdjust)\n    parameter.value = bizagi.util.tryCatch(\n    function () {return parameter.value[0];},\n    \"\");\n\n    return parameter;\n  },\n\n  /**\r\n      * set the value and displayValue for control\r\n      * @param {Control} control forms\r\n      * @param {JSON|String} value newValue\r\n      */\n  _setValueAndDisplay: function _setValueAndDisplay(control, value) {\n    var self = this,\n    _CASCADE_COMBO = \"queryCascadingCombo\",\n    _SEARCH_USER = \"querySearchUser\",\n    _NORMAL = true,\n    _REVERT = false,\n    _set = function _set(normal) {\n      var _revert = !normal;\n      if (normal)\n      control.setValue(value);\n      control.setDisplayValue(value);\n      if (_revert)\n      control.setValue(value);\n    };\n\n    switch (control.properties.type) {\n      case _CASCADE_COMBO:\n        self._onRestore4Cascade(control).\n        done(_set.bind(null, _NORMAL));\n        break;\n\n      case _SEARCH_USER:\n        _set(_NORMAL);\n        _set(_REVERT);\n        break;\n\n      default:\n        _set(_NORMAL);\n        break;}\n\n  },\n\n  /**\r\n      * review if the parent has been load for continue set value\r\n      * @param {Control} control to review parent\r\n      */\n  _onRestore4Cascade: function _onRestore4Cascade(control) {\n    var _deferCanSet = new $.Deferred();\n    _parentReady = function _parentReady() {\n      var _parent = control.getParentCombo(),\n      _parentDeffer = bizagi.util.tryCatch(\n      function () {\n        return _parent.asyncRenderDeferred ? _parent.asyncRenderDeferred : _parent.wait4MeOnRestore;\n      },\n      function () {\n        //does not have parent\n        var deff = new $.Deferred();\n        deff.resolve();\n        return deff;\n      });\n\n      return _parentDeffer;\n    };\n\n    control.wait4MeOnRestore = new $.Deferred();\n    control.internalSetInitialValueFlag = true;\n    _parentReady().done(function () {\n      _deferCanSet.resolve();\n      control.wait4MeOnRestore.resolve();\n    });\n\n    return _deferCanSet;\n  },\n\n  /**\r\n      * Mapping values to query-forms using xpaths\r\n      * @param form\r\n      * @param values\r\n      */\n  setXpathValuesToQueryForm: function setXpathValuesToQueryForm(form, values) {\n    var self = this;\n    values = values || {};\n\n    try {\n      // Decode parameters\n      var searchParameters;\n      if (typeof values.parameters == \"string\") {\n        searchParameters = JSON.parse(values.parameters);\n      } else {\n        searchParameters = values.parameters;\n      }\n\n      $.each(searchParameters, function (key, parameter) {\n        var control = parameter.renderId ? form.getRenderById(parameter.renderId) : form.getRender(parameter.xpath);\n\n        $.when(control.ready()).\n        done(function () {\n          parameter = self._adjustValueOnRestore(parameter, control);\n          // Repaint to advanced queries\n          if (!!parameter.advancedQuery) {\n            control.setFilter && control.setFilter(parameter.filterType);\n            control.setDisplayValue(parameter.value);\n          } else {\n            self._setValueAndDisplay(control, parameter.value);\n          }\n        });\n\n      });\n    } catch (e) {\n      console.log(\"Error:\", e);\n    }\n  },\n\n  /**\r\n      * validate if need to show and load the queryForm again\r\n      * @returns Boolean\r\n      */\n  _recalculateShowQueryForm: function _recalculateShowQueryForm() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS,\n    _queryFormSections = [\n    _ACTIONS.SUBMIT_QUERY_FORM,\n    _ACTIONS.RENDER_QUERY_FORM],\n\n    _isQueryFormSection = _queryFormSections.indexOf(self.params.queryFormAction) !== -1;\n\n    return _isQueryFormSection && self.params.widget && self.params.recalculateQueryForm;\n  },\n\n  /*\r\n     *  Buttons for query Form actions\r\n     */\n  handleEvents: function handleEvents() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    var pageResultsData = {};\n\n    // PARAMS TO EXPORT EXCEL\n    pageResultsData.I_PROCESSSTATE = \"ALL\";\n    pageResultsData.h_idEnt = 10001;\n    pageResultsData.h_idQueryForm = self.idQueryForm;\n\n    $(\"#query-form-buttons\", content).html($.tmpl(self.buttons, pageResultsData));\n    $(\"#back-to-queryform\", content).click(function () {\n      if (self.params.queryFormAction == _ACTIONS.EXECUTE) {\n        self.renderQueryForm();\n      } else {\n        $(\"#iframeGraphicalAnalysis\", content).hide();\n        $(\"#query-form-admin-result\", content).hide();\n        if (self.params.queryFormAction == _ACTIONS.SAVE_QUERY_FORM) {\n          self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n          $(\"#queries-results-per-page\", content).show();\n          $(\"#query-form-result\", content).show();\n          $(\"#back-to-queryform\", content).show();\n          $(\"#save-queryform\", content).show();\n          $(\"#exportExcel\", content).show();\n          $(\"#graphicalAnalysis\", content).show();\n        } else {\n          self.sortedField = {};\n          $(\"#queries-results-per-page\", content).hide();\n          $(\"#query-form-result\", content).hide();\n          $(\"#query-form\", content).show();\n          self.enableButton($(\"#submit-for-search\", self.getContent()));\n\n          var dialog = $(this).closest(\".ui-dialog\");\n          var dialogContent = dialog.length ? dialog.find(\".ui-dialog-content\") : [];\n\n          if (dialog.height() === dialogContent.height()) {\n            dialogContent.height(440);\n          }\n\n          if (self.originalHeight) {\n            content.parent().height(self.originalHeight);\n          }\n\n          $(\"#back-to-queryform\", content).hide();\n          $(\"#submit-for-search\", content).show();\n          $(\"#clear-queryform\", content).show();\n          $(\"#save-queryform\", content).hide();\n          $(\"#exportExcel\", content).hide();\n          $(\"#graphicalAnalysis\", content).hide();\n\n          if (self._recalculateShowQueryForm()) {\n            // Recalculate only one time, more times generate problems with values on query form controls\n            self.params.recalculateQueryForm = false;\n\n            // get query form and show\n            self.params.widget.searchParams = self.params.widget.searchParams || {};\n            self.renderQueryForm(self.params.widget.searchParams);\n          } else if (self.params.queryFormAction == _ACTIONS.GRAPHICAL_ANALYSIS) {\n            self.params.queryFormAction = _ACTIONS.SUBMIT_QUERY_FORM;\n\n            var request = {\n              \"queryFormGuid\": self.guidForm,\n              \"numberOfRows\": self.getItemsPerPage(),\n              \"pageNumber\": self.params.pageToShow ? self.params.pageToShow : 1,\n              \"entityGuid\": self.guidEntity,\n              \"type\": self.queryFormType,\n              \"includeAllUsers\": self.includeAllUsers,\n              \"parameters\": [] };\n\n            var searchParams = self.queryForm.getSearchParams(request);\n            self.submitQueryForm(searchParams);\n          }\n        }\n      }\n      self.readyToSave = false;\n    });\n    $(\"#clear-queryform\", content).click(function () {\n      self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n      self.renderQueryForm();\n    });\n    $(\"#submit-for-search\", content).click(function () {\n      //collects data in a structure to search Cases Data or Entity Data\n      self.params.queryFormAction = _ACTIONS.SUBMIT_QUERY_FORM;\n      var searchParams = self.getSearchParams();\n      if (searchParams !== null) {\n        self.disableButton($(this));\n        self.submitQueryForm(searchParams);\n      }\n    });\n    $(\".ui-bizagi-render-control-included\", content).tooltip({ content: bizagi.localization.getResource(\"workportal-widget-query-form-included-tooltip\") });\n\n    $(\"#save-queryform\", content).click(function () {\n      if (self.readyToSave) {\n        self.createStoredQueryForm();\n      } else {\n        self.showSaveResultsForm();\n      }\n      self.params.queryFormAction = _ACTIONS.SAVE_QUERY_FORM;\n      $(\"#exportExcel\", content).hide();\n      $(\"#graphicalAnalysis\", content).hide();\n      $(\"#mainButtons\", content).css(\"width\", \"100%\");\n    });\n\n    $(\"#copy-as-new-stored-queryform\", content).click(function () {\n      // Open dialog with confirm message\n      self.saveAs = true;\n      $(self.dialogSaveAs).dialog({\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-query-form-copy-as-new\"),\n        buttons: [\n        {\n          text: self.getResource(\"workportal-general-button-label-ok\"),\n          click: function click() {\n            var that = this;\n            $.when(self.createStoredQueryForm()).done(\n            function () {\n              $(that).dialog(\"destroy\");\n              bizagi.workportal.desktop.popup.closePopupInstance();\n            });\n\n          } },\n\n        {\n          text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n          click: function click() {\n            self.saveAs = false;\n            $(this).dialog(\"destroy\");\n          } }] });\n\n\n\n    });\n\n    $(\"#update-stored-queryform\", content).click(function () {\n      self.updateStoredQueryForm();\n    });\n\n    $(\"#edit-stored-queryform\", content).click(function () {\n      self.publish(\"closeCurrentDialog\");\n      self.params.editQueryForm({ response: self.params.paramsStoredQuery.id,\n        fromExec: true });\n    });\n\n    $(\".biz-wp-form-queryForm-graphicalAnalysisLink\", content).click(function () {\n      self.params.queryFormAction = _ACTIONS.GRAPHICAL_ANALYSIS;\n      if (typeof self.searchParams.parameters == \"string\") {\n        self.searchParams.parameters = JSON.parse(self.searchParams.parameters);\n      }\n      var paramsStored;\n      if (self.params.paramsStoredQuery.definition) {\n        paramsStored = JSON.stringify(self.params.paramsStoredQuery.definition);\n      } else {\n        paramsStored = JSON.stringify({\n          name: \"name\",\n          description: \"desc\",\n          parameters: self.searchParams.parameters,\n          type: self.queryFormType,\n          entityGuid: self.guidEntity,\n          includeAllUsers: self.includeAllUsers,\n          parentQueryForm: self.queryForm.properties.displayName });\n\n      }\n      var guidForm = self.params.paramsStoredQuery.id ? self.params.paramsStoredQuery.guid : self.params.guidForm;\n      var htmlGraphicalAnalysis = $.tmpl(self.graphicalAnalysisContainer, { h_guidQueryForm: guidForm,\n        h_idStoredQuery: self.params.paramsStoredQuery.id,\n        h_definition: paramsStored });\n\n      $(\"#queries-results-per-page\", content).hide();\n      $(\"#query-form-result\", content).html(htmlGraphicalAnalysis);\n      $(\"#exportExcel\", content).hide();\n      $(\"#graphicalAnalysis\", content).hide();\n      $(\"#mainButtons\", content).show();\n      $(\"#mainButtons\", content).css(\"width\", \"99%\");\n      $(\"#save-queryform\", content).hide();\n      self.originalHeight = content.parent().height();\n      content.parent().height(\"auto\");\n      $(\"#formGraphicalAnalysis\").delay(800).submit();\n\n      // adjust iframe height\n      var iframe = $(\"#iframeGraphicalAnalysis\");\n      var dialog = iframe.length ? iframe.closest(\".ui-dialog\") : [];\n      var dialogHeight = dialog.length ? dialog.height() : 0;\n      if (dialogHeight > 550) {\n        iframe.height(dialogHeight - 100);\n      }\n\n      dialog.on(\"dialogmaximize\", calculateHeight);\n      dialog.on(\"dialogunmaximize\", calculateHeight);\n\n      function calculateHeight() {\n        var iframe = $(\"#iframeGraphicalAnalysis\");\n        var dialog = $(this);\n        var dialogHeight = dialog.length ? dialog.height() : 0;\n        if (dialogHeight > 550) {\n          iframe.height(dialogHeight - 100);\n        } else {\n          iframe.height(400);\n          dialog.find(\".ui-dialog-content\").height(\"auto\");\n        }\n      }\n    });\n\n    $(\".biz-wp-form-queryForm-exportExcelLink\", content).click(function () {\n      var request = {\n        \"queryFormGuid\": self.guidForm,\n        \"entityGuid\": self.guidEntity,\n        \"type\": self.queryFormType,\n        \"includeAllUsers\": self.includeAllUsers,\n        \"parameters\": [] };\n\n\n      var sortParameter = self.sortedField.xpath;\n      var orderType = self.sortedField.orderType;\n      var sorted = false;\n\n      var newParameters = JSON.parse(JSON.stringify(self.initialSearchParams.parameters));\n      newParameters = $.type(newParameters) === \"array\" ? newParameters : JSON.parse(newParameters);\n      if (newParameters.length > 0 && typeof sortParameter != \"undefined\") {\n        $.each(newParameters, function (i, item) {\n          var itemXpath = item.xpath;\n          if (itemXpath == sortParameter) {\n            item.orderType = orderType;\n            sorted = true;\n          }\n        });\n      }\n      if (!sorted && sortParameter != \"\" && typeof sortParameter != \"undefined\") {\n        newParameters.push({\n          \"value\": null,\n          \"included\": true,\n          \"xpath\": sortParameter,\n          \"searchType\": \"NONE\",\n          \"orderType\": orderType });\n\n      }\n      request.parameters = newParameters;\n\n      var requestForSearch = self.refactorParameters(request);\n      var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n      if (p_sessionId != null) {\n        requestForSearch.p_sessionId = p_sessionId;\n      }\n      self.dataService.getQueryFormExportExcel(requestForSearch).done(function () {});\n    });\n  },\n\n  disableButton: function disableButton(button) {\n    var self = this,content = self.getContent();\n    var included = $(\".ui-bizagi-render-control-included:checked\", content).size();\n    var atLeastOneChecked = included > 0;\n    if (self.queryFormType == self.queryFormTypes.ENTITY && self.atLeastOneChecked || self.queryFormType == self.queryFormTypes.CASES) {\n      button.attr(\"disabled\", true).addClass(\"ui-button-disabled\");\n    }\n  },\n\n  enableButton: function enableButton(button) {\n    button.removeAttr(\"disabled\").removeClass(\"ui-button-disabled\");\n  },\n\n  /*\r\n      * return default params for search and saved queries\r\n      */\n  getSearchParams: function getSearchParams() {\n    var self = this,\n    request = {\n      \"queryFormGuid\": self.guidForm,\n      \"numberOfRows\": self.getItemsPerPage(),\n      \"pageNumber\": 1,\n      \"entityGuid\": self.guidEntity,\n      \"type\": self.queryFormType,\n      \"includeAllUsers\": self.includeAllUsers,\n      \"parameters\": [],\n      \"onlyLocalResults\": true };\n\n    return self.queryForm.getSearchParams(request);\n  },\n\n  /*\r\n      * throw message exception when the user has not select any checkbox and it's required\r\n      */\n  throwMessageAtLeastOneCheck: function throwMessageAtLeastOneCheck(content) {\n    var self = this;\n    bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-query-form-at-least-one-checked\"), \"Bizagi\", \"warning\");\n    self.enableButton($(\"#submit-for-search\", content));\n  },\n\n  /*\r\n      * validate if the user has not select any checkbox and it's required\r\n      */\n  validateTypeAndOneCheck: function validateTypeAndOneCheck(searchParams) {\n    var self = this,\n    content = self.getContent(),\n    _checkboxesBase = \".ui-bizagi-render-control-included:checked\",\n    _selectorForCheckboxes = self.isInShareTab() ? _checkboxesBase : _checkboxesBase + \":visible\",\n    included = $(_selectorForCheckboxes, content).size();\n    self.atLeastOneChecked = included > 0;\n    return (self.queryFormType == self.queryFormTypes.ENTITY && self.atLeastOneChecked ||\n    self.queryFormType == self.queryFormTypes.CASES) &&\n    searchParams !== null;\n  },\n\n  /*\r\n      * Validation before submit\r\n      */\n  submitQueryForm: function submitQueryForm(searchParams) {\n    var self = this;\n    var content = self.getContent();\n    if (searchParams !== null) {\n      if (self.validateTypeAndOneCheck(searchParams)) {\n        self.initialSearchParams = JSON.parse(JSON.stringify(searchParams));\n        self.findResults(content, searchParams, searchParams.pageNumber);\n      } else\n      {\n        self.throwMessageAtLeastOneCheck(content);\n      }\n    }\n  },\n\n  /*\r\n      * Find cases for App query Form\r\n      */\n  findResults: function findResults(content, params, pageToShow, hasOwnLoader) {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    var loadingGetQueryForm = $(\".js-mini-loading\", content);\n    var buttons = $(\"#save-queryform, #back-to-queryform, #submit-for-search\", content);\n    //Store data in order to initialize a query form from a render widget\n    if (pageToShow) {\n      self.params.pageToShow = pageToShow;\n    }\n    // Override the query params\n    self.params.queryParams = params;\n\n    params.pageNumber = pageToShow ? pageToShow : 1;\n    self.storeQueryFormParams({\n      queryParams: params,\n      pageToShow: pageToShow,\n      queryForm: self.queryForm });\n\n\n    self.searchParams = JSON.parse(JSON.stringify(params));\n    params = self.refactorParameters(bizagi.clone(params));\n    if (bizagiConfig.groupByCaseNumber) {\n      params.group = \"T_RADNUMBER\";\n    }\n\n    loadingGetQueryForm.show();\n    self.disableButton(buttons);\n    var security = new bizagi.workportal.command.security(self.dataService),\n    deferResults = self.dataService.getQueryFormResponse(params),\n    _formLoader = self._adjustViewLoader(content, hasOwnLoader);\n    deferResults.always(self.enableButton.bind(self, buttons));\n    _formLoader.start();\n    $.when(\n    deferResults,\n    security.checkSecurityPerm(\"GraphicQuery\"),\n    security.checkSecurityPerm(\"TimeLine\")).\n    done(function (resultList, graphicQuery, timeline) {\n      var _pageExists = bizagi.util.tryCatch(\n      function () {return resultList[0].rows.length > 0 || resultList[0].page === 1;},\n      true);\n\n\n      loadingGetQueryForm.hide();\n      _formLoader.stop();\n\n      if (_pageExists === false) {\n        self.findResults(content, params, 1);\n        return false;\n      }\n\n      // Mapping Response into result object\n      resultList = resultList[0];\n\n      var enabledIcons = self.validateSecurityOptionIcons(resultList, graphicQuery, timeline);\n\n      //clean old results\n      $(\".biz-wp-table\").remove();\n      $(\"#biz-wp-table-summary-wrapper\").remove();\n\n      //Keep in track the total Records\n      self.totalRecords = resultList.records;\n\n      //keep in track the total pages\n      self.totalPages = resultList.total;\n\n      if (resultList.rows.length > 0) {\n        self.showSearchResultFrame(content, resultList, params, enabledIcons);\n      } else {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-query-form-no-records-found\"), \"Bizagi\", \"warning\");\n        self.enableButton($(\"#submit-for-search\", self.getContent()));\n        if (self.params.queryFormAction === _ACTIONS.EXECUTE) {\n          self.params.queryFormAction = _ACTIONS.EDIT;\n          self.modifiedPostRender();\n        }\n      }\n    }).fail(function (error) {\n      _formLoader.stop();\n      loadingGetQueryForm.hide();\n      bizagi.log(error);\n    });\n  },\n\n  /**\r\n      * Validate if show or not graphic query icon.\r\n      * @param resultList\r\n      */\n  // validateSecurityGraphicQuery: function (resultList){\n  validateSecurityOptionIcons: function validateSecurityOptionIcons(resultList, graphicQuery, timeline) {\n    var tmpTL = bizagi.override.enableFeatureShowTimelineButton && timeline;\n    var radNumerIndex = -1;\n\n    if (!graphicQuery && !tmpTL) {\n      if (resultList.header && resultList.header.length && resultList.header[resultList.header.length - 1].dataType === 0) {\n        resultList.header.splice(-1, 1); //Remove last item\n        resultList.rows.forEach(function (row) {\n          row.splice(-1, 1);\n        });\n      }\n    } else {\n      if (tmpTL && resultList.rows.length > 0) {\n        radNumerIndex = resultList.rows[0].findIndex(function (el) {\n          if (el && _typeof(el) === \"object\" && el.radNumber) {\n            return true;\n          }\n          return false;\n        });\n        if (radNumerIndex > -1) {\n          resultList.rows.forEach(function (row) {\n            if (row[row.length - 1] != null)\n            row[row.length - 1]['radNumber'] = row[radNumerIndex]['radNumber'];\n          });\n        }\n      }\n    }\n\n    return {\n      graphicQuery: graphicQuery,\n      timeline: tmpTL };\n\n  },\n\n  /*\r\n     * Checks that all the header displayed names are the same shown in the form\r\n     */\n  checkDisplayedNames: function checkDisplayedNames(resultList) {\n    var self = this;\n    if (typeof self.initialSearchParams.parameters == \"string\") {\n      self.initialSearchParams.parameters = JSON.parse(self.initialSearchParams.parameters);\n    }\n    if (typeof self.searchParams.parameters == \"string\") {\n      self.searchParams.parameters = JSON.parse(self.searchParams.parameters);\n    }\n    //goes for each item and checks them one by one\n    $.each(resultList.header, function (i, header) {\n\n      //cheks if display name, it should get the display name from the form values\n      if (header.xpath) {\n        var foundDisplayName = self.getRenderElementDisplayByXpath(header.xpath, self.queryFormElements);\n        //if it founds it, it sets the displayName\n        if (foundDisplayName) {\n          if (self.initialSearchParams && self.initialSearchParams.parameters) {\n            for (var i = 0; i < self.initialSearchParams.parameters.length; i++) {\n              var searchParameter = self.initialSearchParams.parameters[i];\n              var storedQueryFormParameter = self.searchParams.parameters[i];\n              var fullParameterXpath = searchParameter.xpath + \".\" + searchParameter.displayXpath;\n              var storedDefinition = bizagi.util.tryCatch(\n              function () {return self.params.paramsStoredQuery.definition.parameters[i];},\n              {});\n\n\n              if (searchParameter.xpath === header.xpath || fullParameterXpath === header.xpath) {\n                storedQueryFormParameter.displayHeader = foundDisplayName;\n                searchParameter.displayHeader = foundDisplayName;\n                storedDefinition.displayHeader = foundDisplayName;\n                self.searchParams.parameters[i].displayName = foundDisplayName;\n                break;\n              }\n            }\n          }\n\n          header.displayName = foundDisplayName;\n        }\n      }\n    });\n\n    return resultList;\n  },\n  /*\r\n      *Gets the display name that the xpath provided should show in the results\r\n      */\n  getRenderElementDisplayByXpath: function getRenderElementDisplayByXpath(xpath, elements) {\n    var self = this;\n    if (elements && elements.length > 0) {\n      for (var i = 0, l = elements.length; i < l; i++) {\n        var element = elements[i];\n        if (typeof element.render !== 'undefined') {\n          var includePreference = typeof element.render.properties.included === 'undefined' || element.render.properties.included;\n          var elementXpath = element.render.properties.xpath;\n          var fullEelementXpath = element.render.properties.xpath + \".\" + element.render.properties.displayXpath;\n\n          if (includePreference && (elementXpath === xpath || fullEelementXpath === xpath)) {\n            return element.render.properties.displayName;\n          }\n        } else if (typeof element.container !== 'undefined') {\n          var result = self.getRenderElementDisplayByXpath(xpath, element.container.elements);\n          if (result != undefined)\n          return result;\n        }\n      }\n    }\n  },\n\n  refactorParameters: function refactorParameters(params) {\n    var parameters = [];\n    if (typeof params.parameters == \"string\") {\n      params.parameters = JSON.parse(params.parameters);\n    }\n    $.each(params.parameters, function (i, item) {\n      if (item.value != null && _typeof(item.value) == \"object\" && item.value[0] && typeof item.value[0].id != \"undefined\") {\n        item.value = item.value[0].id;\n      }\n      parameters.push(item);\n    });\n    params.parameters = JSON.stringify(parameters);\n    return params;\n  },\n\n  /**\r\n      * Check override about remove the symbol\r\n      * @param {any} formattedValue \r\n      */\n  _checkOverrideAboutRemoveSymbol: function _checkOverrideAboutRemoveSymbol(formattedValue) {\n    if (bizagi.override.enableSymbolMoneyColumnQueryResult === false)\n    formattedValue = formattedValue.replace(BIZAGI_DEFAULT_CURRENCY_INFO.symbol, \"\");\n    return formattedValue;\n  },\n\n  /**\r\n      * Check overrides about format in money type for results in QueryForm\r\n      * @param {any} formattedValue \r\n      * @param {any} originalValue \r\n      */\n  _checkOverridesFormatMoneyColumnQueryResults: function _checkOverridesFormatMoneyColumnQueryResults(formattedValue, originalValue) {\n    var self = this;\n    if (bizagi.override.enableFormatMoneyColumnQueryResult === false) {\n      formattedValue = originalValue;\n    } else\n    {\n      formattedValue = self._checkOverrideAboutRemoveSymbol(formattedValue);\n    }\n    return formattedValue !== null ? formattedValue : '';\n  },\n\n  /**\r\n      * format value depend of the type\r\n      * @param {string} value \r\n      * @param {number | string} dataType \r\n      */\n  _formatValue: function _formatValue(value, dataType) {\n    var self = this;\n\n    var formattedValue = bizagi.util.formatValueByDataType(value, dataType);\n\n    if ([8, \"Money\"].indexOf(dataType) !== -1) {\n      formattedValue = self._checkOverridesFormatMoneyColumnQueryResults(formattedValue, value);\n    }\n\n    return formattedValue;\n  },\n  /*\r\n     * Show search result frames\r\n     */\n  showSearchResultFrame: function showSearchResultFrame(content, resultList, params, enabledIcons) {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    self.queryFormElements = self.queryFormElements ? self.queryFormElements : bizagi.referrerParams.queryForm.queryForm.params.data.elements;\n\n    if (bizagi.referrerParams && bizagi.referrerParams.queryForm && bizagi.referrerParams.queryForm.queryForm &&\n    bizagi.referrerParams.queryForm.queryForm.params && bizagi.referrerParams.queryForm.queryForm.params.data) {\n      bizagi.referrerParams.queryForm.queryForm.params.data.elements = self.queryFormElements;\n    }\n\n    //goes for the result list and checks that the displayed names in the grid match with the rendered form\n    resultList = self.checkDisplayedNames(resultList);\n    resultList.rows = self.cleanEmptyColorState(resultList.rows);\n\n    var haveQuickActions = resultList.quickActions && resultList.quickActions.length > 0;\n\n    var resultTemplate = $.tmpl(\n    self.searchResult,\n    {\n      enableQueryDetailView: bizagi.util.isEnableFeature(\"enableQueryDetailView\"),\n      headers: resultList.header,\n      rows: resultList.rows,\n      sortedField: self.sortedField.xpath ? self.sortedField : null,\n      records: resultList.records,\n      groupByCaseNumber: bizagiConfig.groupByCaseNumber,\n      securityGraphicQuery: bizagi.menuSecurity.GraphicQuery,\n      resultList: resultList,\n      enabledIcons: enabledIcons,\n      haveQuickActions: haveQuickActions },\n\n    {\n      getRadNumberColumnIndex: function getRadNumberColumnIndex() {\n        var data = this.data;\n        var index = -1;\n        for (var i = 0, l = data.headers.length; i < l; i++) {\n          if (data.headers[i].fieldName == \"radnumber\") {\n            index = i;\n          }\n        }\n        return index;\n      },\n      showColumn: function showColumn(columnIndex) {\n        var index = this.getRadNumberColumnIndex();\n        return this.data.groupByCaseNumber && index == columnIndex ? ' hidden ' : \"\";\n      },\n      createGroupedHeader: function createGroupedHeader(rowIndex) {\n        var data = this.data.resultList;\n        var result = false;\n        var radNumber = this.getRadNumber(data.rows[rowIndex]);\n        if (this.data.groupByCaseNumber) {\n          if (rowIndex == 0 && radNumber != \"\") {\n            result = true;\n          } else {\n            var previousRadNumber = this.getRadNumber(data.rows[rowIndex - 1]);\n            if (radNumber != previousRadNumber && radNumber != \"\") {\n              result = true;\n            }\n          }\n        }\n        return result;\n      },\n      getRadNumber: function getRadNumber(row) {\n        var index = this.getRadNumberColumnIndex();\n        return index >= 0 ? row[index].radNumber : \"\";\n      },\n      formatValue: $.proxy(self._formatValue, self),\n      /**\r\n                                                      * validate if in the first row and group by cases and if is IE necesary for bug QAF-1883 fixed head table\r\n                                                      * @param {Int} rowIndex row index item of case\r\n                                                      */\n      isIEAndFirstRowAndGroupCases: function isIEAndFirstRowAndGroupCases(rowIndex) {\n        return rowIndex == 0 && this.data.groupByCaseNumber && bizagi.util.isIE();\n      } });\n\n\n\n    self.lstIdCases(self.getIdCases(resultList.rows));\n\n    self.renderNumberRowsCombo(self.comboRowsPerPage.initCombo(), resultTemplate);\n\n    if (haveQuickActions) {\n      var workItemsInfo = self._getWorkItemsInfo(resultList.header, resultList.rows);\n      self._QuickActionsRenderIn(resultTemplate, workItemsInfo, resultList.quickActions);\n    }\n\n    var pageToshow = self.maxPageToShow > self.totalPages ? self.totalPages : self.maxPageToShow;\n    var summaryWrapper = $(\"#biz-wp-table-pager-wrapper\", resultTemplate);\n    var pagerData = {};\n    var paginationHtml;\n\n    // show or hide \"load more\" button\n    pagerData.pagination = self.totalPages > 1 ? true : false;\n    pagerData.page = resultList.page;\n    pagerData.pages = {};\n\n    for (var i = 1; i <= pageToshow; i++) {\n      pagerData.pages[i] = {\n        \"pageNumber\": i };\n\n    }\n\n    //load and append the paginator to the result table\n    paginationHtml = $.tmpl(self.paginationTmpl, pagerData).html();\n    summaryWrapper.append(paginationHtml);\n\n    $(\"#submit-for-search\", content).hide();\n    $(\"#clear-queryform\", content).hide();\n    $(\"#save-queryform\", content).show();\n\n    //checks if user has permissions to see the export button\n    if (resultList.permissions && resultList.permissions.canExportData) {\n      $(\"#exportExcel\", content).show();\n    } else\n    {\n      $(\"#exportExcel\", content).hide();\n    }\n\n    $(\"#mainButtons\", content).css(\"width\", \"100%\");\n    $(\"#query-form\", content).hide();\n    $(\"#queries-results-per-page\", content).show();\n    $(\"#query-form-result\", content).show();\n    $(\"#query-form-result\", content).html(resultTemplate);\n    $(\"#back-to-queryform\", content).show();\n\n    //checks if user has permissions to see the graphical button\n    if (resultList.permissions && resultList.permissions.canAnalizeData) {\n      $(\"#graphicalAnalysis\", content).show();\n    } else\n    {\n      $(\"#graphicalAnalysis\", content).remove();\n    }\n\n    if (self.params.queryFormAction == _ACTIONS.EXECUTE) {\n      $(\"#back-to-queryform\", content).hide();\n      $(\"#save-queryform\", content).hide();\n    }\n\n    if (params.ownerQuery == false) {\n      $(\"#edit-stored-queryform\", content).hide();\n    }\n\n    //add data and behaviour to pager\n    $(\"ul\").bizagiPagination({\n      maxElemShow: self.maxElemShow,\n      totalPages: self.totalPages,\n      actualPage: resultList.page,\n      listElement: $(\"#biz-wp-table-pager-wrapper\"),\n      clickCallBack: function clickCallBack(options) {\n        var target = $('.sortColumnsDataUpIcon, .sortColumnsDataDownIcon').closest(\"th\").first(),\n        _hasOwnLoader = true;\n\n        // Update initial params number of rows\n        if (self.initialSearchParams) {\n          self.initialSearchParams.numberOfRows = self.getItemsPerPage();\n        }\n\n        if (target.length == 0) {\n          self.findResults(content, self.initialSearchParams, options.page, _hasOwnLoader);\n        } else\n\n        {\n          var paramXpath = target.data(\"xpath\");\n          var orderType = null;\n          if (_typeof(self.sortedField.xpath) != undefined && self.sortedField.xpath == paramXpath) {\n            orderType = self.sortedField.orderType;\n          }\n          if (orderType == null || orderType == self.orderType.DESC) {\n            self.findSortedResults(content, paramXpath, self.orderType.DESC, options.page);\n          } else {\n            self.findSortedResults(content, paramXpath, self.orderType.ASC, options.page);\n          }\n        }\n      } });\n\n\n    $(\".cases-column-header\", content).click(function (e) {\n      var target = $(e.currentTarget);\n      var paramXpath = target.data(\"xpath\");\n      var orderType = null;\n      if (_typeof(self.sortedField.xpath) != undefined && self.sortedField.xpath == paramXpath) {\n        orderType = self.sortedField.orderType;\n      }\n      if (orderType == null || orderType == self.orderType.DESC) {\n        self.findSortedResults(content, paramXpath, self.orderType.ASC, params.pageNumber);\n      } else {\n        self.findSortedResults(content, paramXpath, self.orderType.DESC, params.pageNumber);\n      }\n\n    });\n\n    // Add click event to case link\n    $(\".caseClicked\", content).click(function () {\n      self.disposeGoToCase(true);\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: $(this)[0].getAttribute(\"data-idcase\"),\n        idWorkItem: $(this)[0].getAttribute(\"data-idworkitem\"),\n        idTask: $(this)[0].getAttribute(\"data-idtask\"),\n        idWorkflow: $(this)[0].getAttribute(\"data-idworkflow\") });\n\n      self.publish(\"closeCurrentDialog\");\n    });\n\n\n    $(\".ui-bizagi-wp-app-inbox-grouped\", content).bind(\"click\", function () {\n      var idCase = $(this).find(\"#idCase\").val();\n\n      self.publish(\"executeAction\", {\n        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        idCase: idCase });\n\n      self.publish(\"closeCurrentDialog\");\n    });\n\n\n    // Add click event to view workflow\n    $(\".js-show-graphic-query\", content).click(function () {\n      var idCase = $(this).data(\"idcase\");\n      var idWorkflow = $(this).data('idworkflow');\n      self.showGraphicQuery({ idCase: idCase,\n        idWorkflow: idWorkflow });\n    });\n\n    // Add click to timeline icon\n    $(\".js-show-timeline\", content).click(function () {\n      var idCase = $(this).data(\"idcase\");\n      var caseNumber = $(this).data('radnumber');\n      self.showTimeLine({ radNumber: caseNumber,\n        idCase: idCase });\n    });\n\n    // show case summary\n    $(\"i.bz-icon-search-outline\", content).click(function () {\n      // Call routing action\n      var idCase = $(this).data(\"idcase\");\n      var idWorkflow = $(this).data('idworkflow');\n      self.showCase(idCase, idWorkflow);\n    });\n\n    self.setTableHeadFixed({\n      TableElement: $(\"table\", resultTemplate),\n      groupByCaseNumber: bizagiConfig.groupByCaseNumber,\n      floatOptions: {\n        position: 'fixed',\n        scrollContainer: function scrollContainer() {\n          return $(\"#result-set-queryForm\");\n        } } });\n\n\n  },\n  /**\r\n      * Add class to format the number\r\n      * */\n  applyFomatNumbers: function applyFomatNumbers(elementsDataType, resultTemplate, userLocalization) {\n    var numberHeaders = $(\"th[data-type='\" + elementsDataType + \"']\", resultTemplate);\n    $.each(numberHeaders, function (i, item) {\n      var index = item.getAttribute('data-index');\n      $(\".biz-wp-table tr\", resultTemplate).find(\"td:eq(\" + index + \")\").find(\"span\").addClass(\"formatMoney\");\n    });\n    bizagi.util.formatInvariantNumber(resultTemplate, userLocalization);\n  },\n\n  /**\r\n      * return idCases array from rows of the results\r\n      * @param {Array} rows of results\r\n      */\n  getIdCases: function getIdCases(rows) {\n    var _rows = Array.isArray(rows) ? rows : [],\n    _NULL_VALUE = -1,\n    _findIdCase = function _findIdCase(item) {\n      var _hasIdCase = function _hasIdCase(e) {\n        return bizagi.util.tryCatch(\n        function () {return e.idCase !== undefined;},\n        false);\n\n      },\n      itemFounded = item.find(_hasIdCase);\n\n      return itemFounded === undefined ? _NULL_VALUE : itemFounded.idCase;\n    },\n    _valid = function _valid(item) {\n      return Array.isArray(item) && item.length > 0 && _findIdCase(item) !== undefined;\n    },\n    _getIdCase = function _getIdCase(item) {\n      return _valid(item) ? _findIdCase(item) : _NULL_VALUE;\n    };\n    return _rows.map(_getIdCase).filter(function (i) {return i !== _NULL_VALUE;});\n  },\n\n  /**\r\n      * set or get of bizagi.lstIdCases\r\n      * @param {Array} value \r\n      */\n  lstIdCases: function lstIdCases(value) {\n    if (value !== undefined)\n    bizagi.lstIdCases = value;\n    return bizagi.lstIdCases;\n  },\n\n  /**\r\n      * set or get of _lstIdCasesBackup\r\n      * @param {Array} value \r\n      */\n  lstIdCasesBackup: function lstIdCasesBackup(value) {\n    var self = this;\n    if (value !== undefined)\n    self._lstIdCasesBackup = value;\n    return self._lstIdCasesBackup;\n  },\n\n  /**\r\n      * restore the _lstIdCasesBackup only when the user just close the modal\r\n      * @param {Boolean} goToCase true if the user close the modal on click a case\r\n      */\n  disposeGoToCase: function disposeGoToCase(goToCase) {\n    var self = this;\n    self._closedByCase = self._closedByCase === true ? true : goToCase;\n\n    if (self._closedByCase === false)\n    self.lstIdCases(self.lstIdCasesBackup());\n  },\n\n  /**\r\n      * if the column has list items with a json property colorstate empty, the item is removed\r\n      * @param {JSON} rows with columns and with list items with posible colorState\r\n      */\n  cleanEmptyColorState: function cleanEmptyColorState(rows) {\n    return rows.map(function (row) {\n      return row.map(function (col) {\n        if (Array.isArray(col)) {//is a list items\n          return col.filter(function (item) {//remove the item if it has a colorState json property empty\n            return item === undefined || item === null || item.colorState !== \"\";\n          });\n        }\n        return col;\n      });\n    });\n  },\n\n  /**\r\n     * Find sorted results\r\n     * @param {container of results} content \r\n     * @param {xpath} sortParameter \r\n     * @param {ASC or DESC} orderType \r\n     * @param {Number of page to show} pageToShow \r\n     */\n  findSortedResults: function findSortedResults(content, sortParameter, orderType, pageToShow) {\n    var self = this,\n    _hasOwnLoader = true,\n    clonedParams = JSON.parse(JSON.stringify(self.initialSearchParams));\n    if (clonedParams) {\n      clonedParams = self.buildParametersForSorting(clonedParams, sortParameter, orderType);\n      self.findResults(content, clonedParams, pageToShow, _hasOwnLoader);\n    }\n  },\n\n  /**\r\n      * Build the parameters to send request\r\n      * @param {params} clonedParams \r\n      * @param {xpath or similar} sortParameter \r\n      * @param {ASC or DESC} orderType \r\n      */\n  buildParametersForSorting: function buildParametersForSorting(clonedParams, sortParameter, orderType) {\n    var self = this;\n    var sorted = false;\n    var newParameters = clonedParams.parameters;\n    newParameters = $.type(newParameters) === \"array\" ? newParameters : JSON.parse(newParameters);\n    if (newParameters.length > 0) {\n      $.each(newParameters, function (i, item) {\n        var itemXpath = item.xpath;\n\n        if (itemXpath === sortParameter) {\n          item.orderType = orderType;\n          sorted = true;\n        } else {\n          item.orderType = \"NONE\";\n        }\n\n      });\n    }\n    if (!sorted && sortParameter != \"\" && typeof sortParameter != \"undefined\") {\n      newParameters.push({\n        \"value\": null,\n        \"included\": true,\n        \"xpath\": sortParameter,\n        \"searchType\": \"NONE\",\n        \"orderType\": orderType,\n        \"isAddedTableSorting\": true });\n\n    }\n    self.sortedField = { \"xpath\": sortParameter,\n      \"orderType\": orderType };\n    clonedParams.parameters = newParameters;\n    return clonedParams;\n  },\n\n  /**\r\n      * Init sort xpath and field\r\n      */\n  initSortParameters: function initSortParameters() {\n    var self = this,\n    _parameters = self.initialSearchParams.parameters || [];\n    for (var i = 0; i < _parameters.length; i++) {\n      var param = _parameters[i];\n      if (param.orderType !== 'NONE') {\n        self.sortedField = { \"xpath\": param.xpath, \"orderType\": param.orderType };\n        break;\n      }\n    }\n  },\n\n  previousValues: function previousValues(_previousValues) {\n    var self = this;\n    var content = self.getContent();\n    $(\"#queryFormName\", content).val(_previousValues.definition.name);\n    $(\"#queryFormDescription\", content).val(_previousValues.definition.description);\n    self.selectedItemsToShare.users = _previousValues && _previousValues.users ? _previousValues.users.map(String) : [];\n    self.selectedItemsToShare.groups = _previousValues && _previousValues.groups ? _previousValues.groups : [];\n  },\n\n  /*\r\n      *Collect parameters and save query form results\r\n      */\n  createStoredQueryForm: function createStoredQueryForm() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var params = self.buildStoredQueryFormParams();\n    var deferred = new $.Deferred();\n    if (params != null) {\n      $.when(self.dataService.saveStoredQueryForm(params)).done(function (response) {\n        self.publish(\"closeCurrentDialog\");\n        self.readyToSave = false;\n        self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n\n        if ($(\"#queryFormShortcut\").has(\"#modalMenuBtList\").length == 0) {\n          $.when(self.workportalFacade.getWidget(\"queriesShortcut\", {})).\n          pipe(function (result) {\n            widget = result;\n            return widget.render();\n          }).done(function () {\n            try {\n              var content = widget.getContent();\n              $(\"#queryFormShortcut\").html(content);\n              self.params.executeQueryForm(response);\n            } catch (e) {\n              // error\n            }\n          });\n        } else\n        {\n          self.params.executeQueryForm(response);\n        }\n        deferred.resolve();\n      }).fail(function (error) {\n        bizagi.log(error);\n        deferred.reject();\n      });\n    } else {\n      deferred.reject();\n    }\n    return deferred.promise();\n  },\n\n  closeQueryForm: function closeQueryForm() {\n    //$($('.ui-dialog .ui-dialog-titlebar-close')[0]).click();\n  },\n\n  /*\r\n     *Collect parameters and save query form results\r\n     */\n  updateStoredQueryForm: function updateStoredQueryForm() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var params = self.buildStoredQueryFormParams();\n    if (params != null) {\n      if (self.validateTypeAndOneCheck(self.getSearchParams())) {\n        params.id = self.idQueryForm;\n        $.when(self.dataService.updateStoredQueryForm(params)).done(function () {\n          self.readyToSave = false;\n          self.params.queryFormAction = _ACTIONS.RENDER_QUERY_FORM;\n          self.renderQueryForm();\n          self.publish(\"refreshQueryFormShortCut\");\n        }).fail(function (error) {\n          bizagi.log(error);\n        });\n      } else {\n        self.throwMessageAtLeastOneCheck(self.getContent());\n      }\n      return true;\n    }\n    return false;\n  },\n\n  buildStoredQueryFormParams: function buildStoredQueryFormParams() {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    var content = self.getContent();\n    var storedQueryFormParameters = {};\n    storedQueryFormParameters.users = JSON.stringify($.unique(self.selectedItemsToShare.users));\n    storedQueryFormParameters.groups = JSON.stringify($.unique(self.selectedItemsToShare.groups));\n    if (self.params.queryFormAction == _ACTIONS.EDIT) {\n      var request = {\n        \"parameters\": [] };\n\n      self.searchParams = self.queryForm.getSearchParams(request);\n    }\n    storedQueryFormParameters.guid = self.guidForm;\n    var nameSaveAs = $(\"#queryFormNameSaveAs\", self.dialogSaveAs).val();\n    var nameSave = $(\"#queryFormName\", content).val().trim();\n    var alert;\n    if (self.saveAs && (nameSaveAs == null || nameSaveAs == \"\")) {\n      alert = $(\"#queryFormNameSaveAs\").next(\".ui-bizagi-input-icon-error\");\n      alert.show();\n      alert.tooltip({ content: bizagi.localization.getResource(\"workportal-general-error-required\") });\n      return null;\n    }\n\n    // If the text is not set show an error\n    if (!self.saveAs && (nameSave == null || nameSave == \"\")) {\n      alert = $(\"#queryFormName\", content).next(\".ui-bizagi-input-icon-error\");\n      alert.show();\n      alert.tooltip({ content: bizagi.localization.getResource(\"workportal-general-error-required\") });\n      return null;\n    }\n\n    if (self.validationController && self.queryForm.validateForm() || self.queryForm) {\n      if (typeof self.searchParams.parameters == \"string\") {\n        self.searchParams.parameters = JSON.parse(self.searchParams.parameters);\n      }\n      storedQueryFormParameters.definition = JSON.stringify({\n        name: nameSaveAs ? nameSaveAs : nameSave,\n        description: $(\"#queryFormDescriptionSaveAs\", self.dialogSaveAs).val() ? $(\"#queryFormDescriptionSaveAs\", self.dialogSaveAs).val() : $(\"#queryFormDescription\", content).val(),\n        parameters: self.searchParams.parameters,\n        type: self.queryFormType,\n        entityGuid: self.guidEntity,\n        includeAllUsers: self.includeAllUsers,\n        parentQueryForm: self.queryForm.properties.displayName });\n\n      return storedQueryFormParameters;\n    }\n  },\n\n  /**\r\n      * set or get is in share tab\r\n      * @param {Boolean} value \r\n      */\n  isInShareTab: function isInShareTab(value) {\n    var self = this;\n    if (value !== undefined) {\n      self._isInShareTab = value;\n    }\n    return self._isInShareTab;\n  },\n\n  /*\r\n     * saveResults,  show the form to save the current query result\r\n     */\n  showSaveResultsForm: function showSaveResultsForm() {\n    var self = this;\n    var content = self.getContent();\n    self.readyToSave = true;\n    var adminResult = $.tmpl(self.adminResult, {});\n\n    $(\"#tab_share\", adminResult).click(function () {\n      self.initShareSelection();\n      $(\"#query-form\").hide();\n      self.isInShareTab(true);\n    });\n    $(\"#tab_definition\", adminResult).click(function () {\n      self.isInShareTab(false);\n      self._canGoToForm($(\"#query-form\"), self.params.queryFormAction, self.totalRecords);\n    });\n    $(\"input[type=radio][name=shareType]\", adminResult).change(function () {\n      if (this.value == 'users') {\n        self.initShareSelection();\n      } else\n      if (this.value == 'groups') {\n        $.when(self.searchGroupToShare()).\n        done(function () {\n          $(\"#userShare\", self.shareSlection).hide();\n        });\n      }\n    });\n    $(\"#query-form\", content).hide();\n    $(\"#queries-results-per-page\", content).hide();\n    $(\"#query-form-result\", content).hide();\n    $(\"#query-form-admin-result\", content).show();\n    $(\"#query-form-admin-result\", content).html(adminResult);\n    $(\"#admin-stored-query-form-wrapper\", content).tabs();\n\n    //To validate if the input contains a value and depends on that show or hide the div that indicates the required field\n    $(\"#queryFormName\", content).keyup(function () {\n      self.validateRequireField();\n    });\n\n  },\n\n  /**\r\n      * validates if the form can be displayed\r\n      * @param {*} form \r\n      * @param {*} queryFormAction \r\n      * @param {*} totalRecords \r\n      */\n  _canGoToForm: function _canGoToForm(form, queryFormAction, totalRecords) {\n    var self = this,\n    _ACTIONS = self.Class.QUERY_FORM_ACTIONS;\n    if (queryFormAction === _ACTIONS.EDIT && totalRecords > 0) {\n      form.show();\n    }\n  },\n\n  validateRequireField: function validateRequireField() {\n\n    var name = $(\"#queryFormName\").val();\n    if (/([^\\s])/.test(name)) {\n      $(\"#input-name-ui-bizagi-input-required\").hide();\n    } else {\n      $(\"#input-name-ui-bizagi-input-required\").show();\n    }\n\n  },\n\n  initShareSelection: function initShareSelection() {\n    var self = this;\n    var content = self.getContent();\n    var shareSelection = $.tmpl(self.shareSelection, {});\n    var users = self.selectedItemsToShare.users;\n    $(\"#shareUsers\", content).prop('checked', true);\n    $(\"#search_user\", shareSelection).click(function () {\n      self.searchUserToShare();\n    });\n    $(\"#shareSelectionPanel\", content).html(shareSelection);\n    $(\"#move_left\", content).click(function () {\n      self.removeItem();\n    });\n    $(\"#move_right\", content).click(function () {\n      self.addItem();\n    });\n    if (users.length > 0) {\n      self.searchSavedUser();\n    }\n  },\n\n  searchUserToShare: function searchUserToShare() {\n    var self = this;\n    var content = self.getContent();\n    var filterData = {\n      userName: $(\"#userName\", content).val(),\n      domain: $(\"#domain\", content).val(),\n      fullName: $(\"#fullName\", content).val(),\n      queryFormId: self.guidForm };\n\n    $.when(self.dataService.searchUsersSharedQuery(filterData)).done(function (response) {\n      var filteredUsers = [];\n      $.each(response.users, function (index, item) {\n        var dupIndex;\n        if (item) {\n          dupIndex = $.inArray(item.idUser.toString(), self.selectedItemsToShare.users);\n          if (dupIndex < 0) {\n            filteredUsers.push(item);\n          }\n        }\n      });\n      self.showDataToShare(filteredUsers, []);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  searchSavedUser: function searchSavedUser() {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    $.when(self.dataService.searchUsersByID(self.selectedItemsToShare.users)).done(function (response) {\n      $(\"#ListBoxResult\", content).empty();\n      self.addPrevious(response, shareType);\n    }).fail(function (error) {\n      bizagi.log(error);\n    });\n  },\n\n  searchGroupToShare: function searchGroupToShare() {\n    var self = this;\n    var params = { profileType: 11 };\n    return self.dataService.searchProfiles(params).\n    pipe(function (groups) {\n      var filteredGroups = [],groupsSelected = [];\n      $.each(groups.response, function (index, item) {\n        var dupIndex;\n        if (item) {\n          dupIndex = $.inArray(item.id, self.selectedItemsToShare.groups);\n          if (dupIndex < 0) {\n            filteredGroups.push(item);\n          } else\n          {\n            groupsSelected.push(item);\n          }\n        }\n      });\n      self.showDataToShare(filteredGroups, groupsSelected);\n    });\n  },\n\n  showDataToShare: function showDataToShare(items, itemSelected) {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    var selectData;\n    if (shareType == \"users\") {\n      selectData = $.tmpl(self.selectUser, { elementList: items });\n    } else\n    {\n      selectData = $.tmpl(self.selectGroup, { elementList: items });\n\n      $(\"#ListBoxResult\", content).empty();\n      if (itemSelected.length > 0) {\n        self.addPrevious(itemSelected, shareType);\n      }\n    }\n\n    $(\"#ListBoxSource\", content).replaceWith(selectData);\n  },\n\n  addPrevious: function addPrevious(items, shareType) {\n    var self = this;\n    var content = self.getContent();\n    if (shareType == \"users\") {\n      $.each(items.users, function (i, item) {\n        $(\"#ListBoxResult\", content).append(new Option(item.userName, item.idUser));\n      });\n    } else\n    {\n      $.each(items, function (i, item) {\n        $(\"#ListBoxResult\", content).append(new Option(item.displayName, item.id));\n      });\n    }\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    var users = $(\"#ListBoxSource option:selected\", content);\n\n    $.each(users, function (i, item) {\n      if ($.inArray(item.value, self.selectedItemsToShare) == -1) {\n        //Persist user information\n        self.selectedItemsToShare[shareType].push(item.value.toString());\n        $(\"#ListBoxSource option[value='\" + item.value + \"']\", content).appendTo(\"#ListBoxResult\"); //visual behavior\n      } else {\n        //remove only selected users\n        $(\"#ListBoxSource option[value='\" + item.value + \"']\", content).remove(); //visual behavior\n      }\n    });\n    $(\"#ListBoxResult option:selected\").prop(\"selected\", false);\n  },\n\n  removeItem: function removeItem() {\n    var self = this;\n    var content = self.getContent();\n    var shareType = $(\"input[type=radio][name=shareType]:checked\", content).val();\n    var users = $(\"#ListBoxResult option:selected\", content);\n    var auxUsers = $(\"#ListBoxSource option\").toArray();\n    var arrayUserValues = [];\n    $.each(auxUsers, function (i, item) {\n      arrayUserValues.push(item.value);\n    });\n\n    $.each(users, function (i, item) {\n      var userId = item.value;\n      if ($.inArray(userId, arrayUserValues) == -1) {\n        $(\"#ListBoxResult option[value='\" + userId + \"']\", content).appendTo(\"#ListBoxSource\"); //visual behavior\n      } else\n      {\n        $(\"#ListBoxResult option[value='\" + userId + \"']\", content).remove(); //visual behavior\n      }\n      self.selectedItemsToShare[shareType].splice($.inArray(userId, self.selectedItemsToShare[shareType]), 1);\n    });\n    $(\"#ListBoxSource option:selected\").prop(\"selected\", false);\n  },\n\n  HTMLEncodeText: function HTMLEncodeText(strText) {\n    var strNew = strText;\n\n    strNew = strNew.replace(\"\", \"&aacute;\");\n    strNew = strNew.replace(\"\", \"&eacute;\");\n    strNew = strNew.replace(\"\", \"&iacute;\");\n    strNew = strNew.replace(\"\", \"&oacute;\");\n    strNew = strNew.replace(\"\", \"&uacute;\");\n    strNew = strNew.replace(\"\", \"&ntilde;\");\n\n    strNew = strNew.replace(\"\", \"&Aacute;\");\n    strNew = strNew.replace(\"\", \"&Eacute;\");\n    strNew = strNew.replace(\"\", \"&Iacute;\");\n    strNew = strNew.replace(\"\", \"&Oacute;\");\n    strNew = strNew.replace(\"\", \"&Uacute;\");\n    strNew = strNew.replace(\"\", \"&Ntilde;\");\n\n    return strNew;\n  },\n\n\n  /*\r\n     * *********************\r\n     * aspx query forms\r\n     * ********************\r\n     */\n  frankensteinPostRender: function frankensteinPostRender() {\n    var self = this;\n    var content = self.getContent();\n    var iframe = $(\"#queryFormIFrame\", content);\n    var css = \"\";\n    var cssList = \"\";\n    var injectCss = [\".ui-bizagi-old-render*\", \"@font-face\"];\n\n\n    iframe.attr('frameborder', 0);\n\n    if (_typeof(injectCss) == \"object\") {\n      $.each(injectCss, function (key, value) {\n        css += bizagi.getStyle(value);\n        cssList += value.replace(\".\", \"\") + \" \";\n      });\n    } else {\n      css += bizagi.getStyle(injectCss);\n      cssList += injectCss.replace(\".\", \"\");\n    }\n    // Wait until the iframe has been loadedpip\n    iframe.load(function () {\n      // inject css\n      var iframeContent = $(this).contents();\n      var resetCSS = 'body, .ui-bizagi-old-render { overflow-y: visible;};';\n      iframeContent.find('input[name=\"btnReturn\"]').css('display', 'none');\n      // Append css\n      $('head', iframeContent).append(\"<style type='text/css'>\" + css + resetCSS + \"</style>\");\n      $('body', iframeContent).addClass(cssList.replace(\"*\", \"\"));\n      // Remove borders buttons\n      $('body a.WPButton', iframeContent).parent().siblings().remove();\n      var callBack = function callBack(params) {\n        // This script will execute inside the iframe context\n        this.openBACase = function (idCase, sHref) {\n          var workitem = null,workflow = null;\n          if (sHref.indexOf(\"idWorkitem=\") > -1) {\n            workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\n            workitem = workitem.substring(0, workitem.indexOf(\"&\"));\n          }\n          if (sHref.indexOf(\"idWorkflow=\") > -1) {\n            workflow = sHref.substring(sHref.indexOf(\"idWorkflow=\") + 11);\n          }\n          // Executes thepw act on\n          params.controller.publish(\"executeAction\", {\n            action: params.routingAction,\n            idCase: idCase,\n            idWorkItem: workitem,\n            idWorkflow: workflow,\n            referrer: 'queryform' });\n\n\n          var lastQueryFullKey = document.getElementById('h_lastFullKey');\n          var lstCasesElement = document.getElementById('h_lstCases');\n          //bizagi.referrerParams = lastQueryFullKey.value;\n          // Lista de casos bizagi.lstIdCases\n          try {\n            params.controller.dataService.lastQueryFullKey = lastQueryFullKey.value;\n            params.bizagireference.referrerParams.referrer = 'queryform';\n            params.bizagireference.lstIdCases = lstCasesElement.value.split(',');\n            // close dialog\n          } catch (e) {\n            // se produjo un error\n          }\n          for (var i = 0; i < params.bizagireference.workportal.desktop.dialogStack.length; i++) {\n            params.controller.publish(\"closeCurrentDialog\");\n          }\n        };\n\n        this.ShowCaseSumary = function (idCase) {\n          // Verify render version\n          var $ = params.$;\n          $.when(params.controller.dataService.getCaseFormsRenderVersion({ idCase: idCase })).done(function (version) {\n            if (version.formsRenderVersion == 1) {\n              params.controller.publish(\"showDialogWidget\", {\n                widgetName: params.bizagireference.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n                widgetURL: params.controller.dataService.serviceLocator.getUrl(\"old-render\") + \"?idCase=\" + idCase + \"&isSummary=1\",\n                modalParameters: {\n                  title: params.controller.resources.getResource(\"workportal-widget-navigation-summary-case\") },\n\n                afterLoad: params.callBack,\n                afterLoadParams: {\n                  routingAction: params.bizagireference.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n                  genericIframe: params.bizagireference.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\n                  bizagi: params.bizagireference } });\n\n\n            } else {\n              // new version\n              /*var summary = params.bizagireference.workportal.widgets.search.prototype;\r\n              summary.caseSummaryTemplate = params.controller.workportalFacade.getTemplate(\"inbox-common-case-summary\");\r\n              summary.dataService = params.controller.dataService;\r\n              try{\r\n              summary.showCase.apply(summary,[idCase]);\r\n              }catch(e){\r\n              }*/\n            }\n          });\n        };\n      };\n\n      iframe.callInside(callBack, {\n        controller: self,\n        routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n        bizagireference: bizagi,\n        callBack: callBack,\n        $: jQuery });\n\n    });\n\n  },\n\n  /**\r\n      * @override\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    self.disposeGoToCase(false);\n    self._super();\n  },\n\n  _getWorkItemsInfo: function _getWorkItemsInfo(headers, rows) {\n    var self = this,\n    _finalWorkItems = {};\n\n    var indexWorkItems = self._getIndexFromTableColumn(headers, \"fieldName\", \"CURRENTTASK\");\n    var indexCaseNumber = self._getIndexFromTableColumn(headers, \"fieldName\", \"RADNUMBER\");\n\n    for (var j = 0; j < rows.length && indexWorkItems !== -1; j++) {\n      var _rowInfo = rows[j],\n      _rowWorkItems = _rowInfo[indexWorkItems];\n\n      for (var k = 0; k < _rowWorkItems.length && indexCaseNumber !== -1; k++) {\n        var _workItem = _rowWorkItems[k];\n\n        _workItem.idCase = _rowInfo[indexCaseNumber].idCase;\n        _workItem.caseNumber = _rowInfo[indexCaseNumber].radNumber;\n        _finalWorkItems[_workItem.idWorkItem] = _workItem;\n      }\n    }\n    return _finalWorkItems;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal QuickAction principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Kvn Alvarado (based on  Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.quickActions\", {\n\n  /**\r\n                                                                                     * class for more button when is active, showing hidden buttons\r\n                                                                                     */\n  CLASS_ACTIVE_MORE_BUTTON: \"active\",\n\n  /**\r\n                                       * total items selected\r\n                                       */\n  SELECTOR_NUMBER_SELECTED: \"#ui-bizagi-workportal-widget-quick-actions-details > .quick-actions-details-activities-selected\",\n\n  /**\r\n                                                                                                                                * container for quick actions buttons\r\n                                                                                                                                */\n  SELECTOR_BUTTONS_CONTAINER: \"#ui-bizagi-workportal-widget-quick-actions-buttons\",\n\n  /**\r\n                                                                                     * buttons for quick actions\r\n                                                                                     */\n  SELECTOR_BUTTON_LAUNCH: \"button.quick-actions-details-button-launch\",\n\n  /**\r\n                                                                         * selector where the summary is shown\r\n                                                                         */\n  SELECTOR_SUMMARY_EXECUTED_ACTIONS: \".summary-quick-actions-executed\",\n\n  /**  \r\n                                                                         * buttons for quick actions\r\n                                                                         */\n  SELECTOR_HIDDEN_BUTTON_LAUNCH: \"div.quick-actions-details-button-launch-hidden\",\n\n  /**\r\n                                                                                    * button for show more\r\n                                                                                    */\n  SELECTOR_MORE_BUTTON: \"button#quick-actions-details-more-button\",\n\n  /**\r\n                                                                     * button for show more\r\n                                                                     */\n  SELECTOR_HIDDEN_BUTTONS_CONTAINER: \"div#quick-actions-details-buttons-hidden-container\",\n\n  /**\r\n                                                                                            * Title for inbox grid \r\n                                                                                            */\n  SELECTOR_INBOX_GRID_TITLE: \"div#contentInboxName\",\n\n  /**\r\n                                                      * data for widget\r\n                                                      */\n  DATA_PROPERTIES: {\n    // Int : total activities selected for quickActions\n    TOTAL_SELECTED: \"TOTAL_SELECTED\",\n\n    // Boolean : show principal container\n    SHOW: \"SHOW\",\n\n    // Array : list data for all buttons\n    BUTTONS: \"BUTTONS\",\n\n    // Array : list data for buttons to show in top\n    BUTTONS_TO_SHOW: \"BUTTONS_TO_SHOW\",\n\n    // Array : list data for hide for more button\n    BUTTONS_HIDDEN: \"BUTTONS_HIDDEN\",\n\n    // Int : width buttons container\n    WIDTH_BUTTONS_CONTAINER: \"WIDTH_BUTTONS_CONTAINER\",\n\n    // Boolean : if true then show the more button\n    SHOW_MORE_BUTTON: \"SHOW_MORE_BUTTON\",\n\n    // Boolean : if true then show the hidden buttons\n    SHOW_HIDDEN_BUTTONS: \"SHOW_HIDDEN_BUTTONS\" } },\n\n\n{\n  /**\r\n   *   Constructor\r\n   */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this,\n    _params = {\n      callback: self.callbackCheckboxGroup.bind(self),\n      getContainerSelector: params.getContainerSelector,\n      checkAllSelector: params.checkAllSelector };\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    self.checkboxGroup = new bizagi.workportal.widgets.checkboxGroup(self.workportalFacade, self.dataService, _params);\n    self.checkboxGroup.render({});\n\n    self.params = {\n      refreshShowedResults: params.refreshShowedResults };\n\n\n    //Load templates\n    self.loadTemplates({\n      \"quick-actions-container\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions\"),\n      \"quick-actions-button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-button\"),\n      \"quick-actions-modal-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-modal-confirm\"),\n      \"quick-actions-more-button\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-more-button\"),\n      \"quick-actions-button-hidden\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActions\").concat(\"#ui-bizagi-workportal-widget-quick-actions-button-hidden\"),\n      useNewEngine: false });\n\n    self._setInitialData();\n    self.setPersistCheckboxGroup(false);\n  },\n\n  /**\r\n      * @override\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    _template = self.getTemplate(\"quick-actions-container\"),\n    _content = self.content = $.tmpl(_template, {});\n\n    _content.appendTo(self.container);\n    self._events();\n  },\n\n  /**\r\n      * set the container where we have to render in\r\n      * @param {Jquery Element} container parent of this quickAction\r\n      */\n  renderIn: function renderIn(container) {\n    var self = this;\n    self.container = container;\n    self.render();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._updateView();\n  },\n\n  /**\r\n      * Set the persist checkbox property\r\n      * @param {*} newValue\r\n      */\n  setPersistCheckboxGroup: function setPersistCheckboxGroup(newValue) {\n    var self = this;\n    self.persistCheckboxGroup = newValue;\n  },\n\n  /**\r\n      * Set the items information to execute\r\n      * @param {*} itemsInfo a dictionary with the workItems info,\r\n      * where the id workItem is the key and iis information (idTask, idCase, etc) the value\r\n      */\n  setDataToExecute: function setDataToExecute(itemsInfo, quickActions) {\n    var self = this;\n    self.itemsInfo = itemsInfo;\n    self.setAvailableButtons(quickActions);\n  },\n\n  /**\r\n      * Callback when the checked Items change\r\n      */\n  callbackCheckboxGroup: function callbackCheckboxGroup() {\n    var self = this;\n    self.itemsSelected = self.checkboxGroup.getChecked();\n    self._updateButtonsToShow();\n    self._setItemsSelected(self.itemsSelected.length);\n  },\n\n  /**\r\n      * Update the buttons to be showed depending on the selected  items\r\n      */\n  _updateButtonsToShow: function _updateButtonsToShow() {\n    var self = this,\n    _buttonsToShow = self.getButtonsToShow();\n    self._showCurrentButtons(_buttonsToShow);\n  },\n\n  /**\r\n      * Filter the buttons to show depending on selected items\r\n      */\n  getButtonsToShow: function getButtonsToShow() {\n    var self = this,\n    _buttons = [];\n    _labels = Object.keys(self.quickActionsPerName);\n\n    for (var i = 0; i < _labels.length; i++) {\n      var _label = _labels[i],\n      _buttonQuickActions = self.quickActionsPerName[_label],\n      _show = self._shouldShowButton(_buttonQuickActions);\n\n      if (_show) {\n        _buttons.push(_label);\n      }\n    }\n    return _buttons;\n  },\n\n  /**\r\n      * Check if a button should be showed\r\n      * Return true if all the selected items are in the quickActions of the button\r\n      * @param {*} quickActions \r\n      */\n  _shouldShowButton: function _shouldShowButton(buttonQuickActions) {\n    var self = this,\n    _itemsLength = self.itemsSelected.length,\n    _showButton = _itemsLength > 0 ? true : false,\n    _compareFunction = function _compareFunction(qa) {\n      var _idWorkItem = self.itemsSelected[i].id,\n      _idTask = self.itemsInfo[_idWorkItem].idTask;\n      return qa.idTask === _idTask;\n    };\n    for (var i = 0; i < self.itemsSelected.length && _showButton; i++) {\n      if (!buttonQuickActions.some(_compareFunction)) {\n        _showButton = false;\n      }\n    }\n    return _showButton;\n  },\n\n  /**\r\n      * Display the buttons depending on the selected items\r\n      * @param {*} itemsToShow \r\n      */\n  _showCurrentButtons: function _showCurrentButtons(itemsToShow) {\n    var self = this;\n\n    var _newButtons = itemsToShow.map(function (item) {\n      return {\n        id: item,\n        text: item };\n\n    });\n\n    self._addButtons(_newButtons);\n  },\n\n  /**\r\n      * Render the checkboxes group, including the All Processes checkbox\r\n      * @param {*} context in which the checkboxes will be rendered\r\n      */\n  renderCheckboxGroup: function renderCheckboxGroup(context) {\n    var self = this,\n    _idWorkItemsToShow = self._filterItemsToShowCheckbox();\n    self.checkboxGroup.renderCheckboxGroup(context, _idWorkItemsToShow, self.persistCheckboxGroup);\n    self.setPersistCheckboxGroup(false);\n  },\n\n  /**\r\n      * Filter the idWorkItems of the items that have quickActions.\r\n      * It search if the idTask of the workItem have a quickAction.\r\n      */\n  _filterItemsToShowCheckbox: function _filterItemsToShowCheckbox() {\n    var self = this,\n    _idWorkItemsToShow = [];\n    _workItems = Object.keys(self.itemsInfo);\n\n    for (var i = 0; i < _workItems.length; i++) {\n      var _workItem = self.itemsInfo[_workItems[i]];\n\n      if (self.idTasksWithQuickActions.indexOf(_workItem.idTask) !== -1) {\n        _idWorkItemsToShow.push(_workItem.idWorkItem);\n      }\n    }\n    return _idWorkItemsToShow;\n  },\n\n  /**\r\n      * Set the value of buttons available depending on the quick actions\r\n      * It initialize an array with the available quick actions by Name,\r\n      * and an array with the idTask that have an associated quickAction.\r\n      * @param {*} quickActions \r\n      */\n  setAvailableButtons: function setAvailableButtons(quickActions) {\n    var self = this;\n    self.quickActionsPerName = {};\n    self.idTasksWithQuickActions = [];\n\n    for (var i = 0; quickActions && i < quickActions.length; i++) {\n      var label = quickActions[i].label;\n      if (!self.quickActionsPerName[label]) {\n        self.quickActionsPerName[label] = [];\n      }\n      self.quickActionsPerName[label].push(quickActions[i]);\n      self.addItemToShowCheckbox(quickActions[i].idTask);\n    }\n  },\n\n  /**\r\n      * Add an idTask that have quick actions\r\n      * @param {*} id \r\n      */\n  addItemToShowCheckbox: function addItemToShowCheckbox(id) {\n    var self = this;\n    if (self.idTasksWithQuickActions.indexOf(id) === -1) {\n      self.idTasksWithQuickActions.push(id);\n    }\n  },\n\n  /**\r\n      * render the button template for quick actions\r\n      * @param {String} text of the button\r\n      * @param {Boolean} hidden template to use, normal button or hidden\r\n      */\n  _renderButton: function _renderButton(id, text, hidden) {\n    var self = this,\n    _templeateToUse = hidden ? \"quick-actions-button-hidden\" : \"quick-actions-button\",\n    _template = self.getTemplate(_templeateToUse),\n    _params = {\n      text: text,\n      id: id };\n\n\n    return $.tmpl(_template, _params);\n  },\n\n  /**\r\n      * render the more button and return the content\r\n      */\n  _renderMoreButton: function _renderMoreButton() {\n    var self = this,\n    _template = self.getTemplate(\"quick-actions-more-button\"),\n    _params = {};\n\n    return $.tmpl(_template, _params);\n  },\n\n  /**\r\n      * create or remove the events for this widget\r\n      * @param {Boolean} dispose true if want to dispose events\r\n      */\n  _events: function _events(dispose) {\n    var self = this;\n    if (dispose === true) {\n      self.content.off(\"click\", self.Class.SELECTOR_BUTTON_LAUNCH);\n      self.content.off(\"click\", self.Class.SELECTOR_HIDDEN_BUTTON_LAUNCH);\n      self.content.off(\"click\", self.Class.SELECTOR_MORE_BUTTON);\n      self.unsubscribe(\"resizeLayout\");\n    } else {\n      self.content.on(\"click\", self.Class.SELECTOR_BUTTON_LAUNCH, self._clickOnAction.bind(self));\n      self.content.on(\"click\", self.Class.SELECTOR_HIDDEN_BUTTON_LAUNCH, self._clickOnAction.bind(self));\n      self.content.on(\"click\", self.Class.SELECTOR_MORE_BUTTON, self._clickOnMore.bind(self));\n      self.subscribe(\"resizeLayout\", self._adjustButtonsWidth.bind(self));\n    }\n  },\n\n  /**\r\n      * show confirmation message for start quick action selected\r\n      * close the hidden buttons\r\n      */\n  _clickOnAction: function _clickOnAction(e) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _title = e.currentTarget.textContent,\n    _num = self._getNumberOfSelected();\n    _textToShow = bizagi.localization.getResourceByElementsNumber(\"workportal-quick-actions-confirm-execute-detail\", _num).replace(\"{0}\", _num),\n    _message = $.tmpl(self.getTemplate(\"quick-actions-modal-confirm\"), { numberActivities: _textToShow }).html(),\n    _modalParams = self._buildParamsForModalConfirm(_title, _message),\n    _buttonClicked = e.target.id;\n\n    self._setProperty(_prop.SHOW_HIDDEN_BUTTONS, false);\n\n    $.when(bizagi.showConfirmationBox.apply(self, _modalParams)).done(function () {\n      var data = self.setInitialDataForModal(_buttonClicked);\n      self.showResultDialog(_title, data);\n    });\n\n  },\n\n  /**\r\n      * Map the data that modal needs when yes is clicked to start execution\r\n      */\n  setInitialDataForModal: function setInitialDataForModal(button) {\n    var self = this,\n    _data = { activities: [] },\n    _buttonActions = self.quickActionsPerName[button];\n\n    for (var i = 0; i < self.itemsSelected.length; i++) {\n      var _workItem = self.itemsSelected[i].id,\n      _itemInfo = self.itemsInfo[_workItem];\n\n      for (var j = 0; j < _buttonActions.length; j++) {\n        var _quickAction = _buttonActions[j];\n\n        if (_itemInfo.idTask === _quickAction.idTask) {\n          var _newTask = {\n            workItemId: _itemInfo.idWorkItem,\n            taskId: _itemInfo.idTask,\n            activityName: _itemInfo.TaskName,\n            caseNumber: _itemInfo.caseNumber,\n            caseId: _itemInfo.idCase,\n            icon: \"gray\",\n            quickActionGuid: _quickAction.guid,\n            ruleGuid: _quickAction.guidRule,\n            actions: _quickAction.actions };\n\n\n          _data.activities.push(_newTask);\n        }\n      }\n    }\n    return _data;\n  },\n\n  /**\r\n      * Check if the item es checked\r\n      * @param {*} item \r\n      */\n  itemIsChecked: function itemIsChecked(item) {\n    var self = this,\n    _compareFunction = function _compareFunction(selected) {\n      return selected.id === item;\n    };\n    return self.itemsSelected.some(_compareFunction);\n  },\n\n  /**\r\n      * build params for showConfirmationBox\r\n      */\n  _buildParamsForModalConfirm: function _buildParamsForModalConfirm(titleModal, message) {\n    var self = this;\n    return [\n    // message\n    message,\n    // title\n    titleModal,\n    // showIcon\n    false,\n    // buttons\n    [\n    {\n      label: bizagi.localization.getResource('workportal-general-word-no'),\n      action: \"reject\",\n      \"class\": \"biz-wp-btn-secondary-real\" },\n    {\n      label: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n      action: \"resolve\",\n      \"class\": \"biz-wp-btn-warning\" }],\n\n\n    // customOptions\n    {\n      dialogClass: \"ui-quick-action-modal-confirm\",\n      width: 500 }];\n\n\n  },\n\n  /**\r\n      * toggle hidden buttons container\r\n      */\n  _clickOnMore: function _clickOnMore() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _showHidden = self._getProperty(_prop.SHOW_HIDDEN_BUTTONS);\n\n    self._setProperty(_prop.SHOW_HIDDEN_BUTTONS, !_showHidden);\n  },\n\n  /**\r\n      * set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n       * return the value of the property, if exists else throw exception\r\n       * @param {DATA_PROPERTIES} prop \r\n       */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = jQuery.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * default initial data when widget starts\r\n      */\n\n  _setInitialData: function _setInitialData() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.TOTAL_SELECTED] = 0;\n    self.data[_prop.SHOW] = false;\n    self.data[_prop.BUTTONS] = [];\n    self.data[_prop.BUTTONS_TO_SHOW] = [];\n    self.data[_prop.BUTTONS_HIDDEN] = [];\n    self.data[_prop.WIDTH_BUTTONS_CONTAINER] = 0;\n    self.data[_prop.SHOW_MORE_BUTTON] = false;\n    self.data[_prop.SHOW_HIDDEN_BUTTONS] = false;\n  },\n\n  /**\r\n      * set the items number selected in selector\r\n      */\n  _updateViewSelected: function _updateViewSelected() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _num = self._getProperty(_prop.TOTAL_SELECTED),\n    _element = self.content.find(self.Class.SELECTOR_NUMBER_SELECTED);\n    _textToShow = bizagi.localization.getResourceByElementsNumber(\"workportal-quick-actions-selected-activities\", _num).\n    replace(\"{0}\", _num);\n\n    _element.text(_textToShow);\n  },\n\n  /**\r\n      * review if the buttons fill the space then show the more buttons\r\n      * and set the overflow buttons in hidden array (one by call)\r\n      * this method validate if the container has changed the width\r\n      */\n  _adjustButtonsWidth: function _adjustButtonsWidth() {\n    var self = this,\n    _SET_ONLY = true,\n    _prop = self.Class.DATA_PROPERTIES,\n    _eContainer = self.content.find(self.Class.SELECTOR_BUTTONS_CONTAINER),\n    _eFirstButton = self.content.find(self.Class.SELECTOR_BUTTON_LAUNCH + \":first\"),\n    _buttons_all = self._getProperty(_prop.BUTTONS),\n    _buttons_shown = self._getProperty(_prop.BUTTONS_TO_SHOW),\n    _buttons_hidden = self._getProperty(_prop.BUTTONS_HIDDEN),\n    _container_width = self._getProperty(_prop.WIDTH_BUTTONS_CONTAINER),\n    _newContainer_width = _eContainer.outerWidth(),\n    _resized = _container_width !== _newContainer_width,\n    _heightButton = _eFirstButton.outerHeight(),\n    _isOverLapped = _heightButton * 1.5 < _eContainer.outerHeight(),\n    _existsButtonsShown = _buttons_shown.length > 0,\n    _lastButtonShown = _buttons_shown.slice(-1),\n    _buttonsShown_exceptLast = _buttons_shown.slice(0, -1),\n    _newButtonsHidden = _resized ? [] : _lastButtonShown.concat(_buttons_hidden),\n    _start = function _start() {\n      self._setProperty(_prop.SHOW_MORE_BUTTON, false, _SET_ONLY);\n      self._setProperty(_prop.SHOW_HIDDEN_BUTTONS, false, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_HIDDEN, _newButtonsHidden, _SET_ONLY);\n      self._setProperty(_prop.WIDTH_BUTTONS_CONTAINER, _newContainer_width, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_TO_SHOW, _buttons_all);\n    },\n    _removeOneButton = function _removeOneButton() {\n      self._setProperty(_prop.SHOW_MORE_BUTTON, true, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_HIDDEN, _newButtonsHidden, _SET_ONLY);\n      self._setProperty(_prop.BUTTONS_TO_SHOW, _buttonsShown_exceptLast);\n    };\n\n    if (_resized) {\n      _start();\n    } else if (_isOverLapped && _existsButtonsShown) {\n      _removeOneButton();\n    }\n  },\n\n  /**\r\n      * show list buttons saved in data\r\n      */\n  _updateViewButtons: function _updateViewButtons() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _buttonsShown = self._getProperty(_prop.BUTTONS_TO_SHOW),\n    _buttonsHidden = self._getProperty(_prop.BUTTONS_HIDDEN),\n    _moreButton = self._renderMoreButton(),\n    _containerToShow = self.content.find(self.Class.SELECTOR_BUTTONS_CONTAINER),\n    _containerToHide = _moreButton.find(self.Class.SELECTOR_HIDDEN_BUTTONS_CONTAINER),\n    _newButton = function _newButton(hidden, container, b) {\n      var buttonHtml = self._renderButton(b.id, b.text, hidden);\n      buttonHtml.appendTo(container);\n    };\n\n    _containerToShow.empty();\n    _buttonsShown.map(_newButton.bind(null, false, _containerToShow));\n    _moreButton.appendTo(_containerToShow);\n    _buttonsHidden.map(_newButton.bind(null, true, _containerToHide));\n    self._adjustButtonsWidth();\n  },\n\n  /**\r\n      * update active class for more button and its visibility\r\n      */\n  _updateViewMoreButton: function _updateViewMoreButton() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _show = self._getProperty(_prop.SHOW_MORE_BUTTON),\n    _isActive = self._getProperty(_prop.SHOW_HIDDEN_BUTTONS),\n    _moreButton = self.content.find(self.Class.SELECTOR_MORE_BUTTON);\n\n    _moreButton.toggleClass(self.Class.CLASS_ACTIVE_MORE_BUTTON, _isActive);\n    _show ? _moreButton.show() : _moreButton.hide();\n  },\n\n  /**\r\n      * show or hide container\r\n      */\n  _updateViewContainer: function _updateViewContainer() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _show = self._getProperty(_prop.SHOW),\n    _element = self.content,\n    _inboxGridTitle = $(self.Class.SELECTOR_INBOX_GRID_TITLE);\n\n    _show ? _element.css('display', 'grid') : _element.css('display', 'none');\n    _show ? _inboxGridTitle.css('display', 'none') : _inboxGridTitle.css('display', 'inline-block');\n  },\n\n  /**\r\n      * show or hide hidden buttons container\r\n      */\n  _updateViewHiddenButtons: function _updateViewHiddenButtons() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _show = self._getProperty(_prop.SHOW_HIDDEN_BUTTONS),\n    _element = self.content.find(self.Class.SELECTOR_HIDDEN_BUTTONS_CONTAINER);\n\n    _show ? _element.show() : _element.hide();\n  },\n\n  /**\r\n      * principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewContainer();\n    self._updateViewSelected();\n    self._updateViewButtons();\n    self._updateViewMoreButton();\n    self._updateViewHiddenButtons();\n  },\n\n  /**\r\n      * apply the total items selected and the show of container\r\n      * @param {Int} num items selected\r\n       */\n  _setItemsSelected: function _setItemsSelected(num) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _selectedVal = typeof num === \"number\" ? num : 0,\n    _buttons = self._getProperty(_prop.BUTTONS),\n    _showVal = num > 0 && _buttons.length > 0;\n\n    self._setProperty(_prop.SHOW, _showVal, true);\n    self._setProperty(_prop.TOTAL_SELECTED, _selectedVal);\n  },\n\n  /**\r\n      * Get the number of selected items\r\n      */\n  _getNumberOfSelected: function _getNumberOfSelected() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _selectedVal = self._getProperty(_prop.TOTAL_SELECTED);\n    return _selectedVal;\n  },\n\n  /**\r\n      * Change all the buttons\r\n      * @param {*} buttons for button\r\n      */\n  _addButtons: function _addButtons(buttons) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    // Do not update data to avoid overload\n    self._setProperty(_prop.SHOW_MORE_BUTTON, false, true);\n    self._setProperty(_prop.BUTTONS_HIDDEN, [], true);\n    self._setProperty(_prop.BUTTONS_TO_SHOW, buttons, true);\n    self._setProperty(_prop.BUTTONS, buttons, true);\n  },\n\n  /**\r\n      *  show a modal with the quick actions results\r\n      */\n  showResultDialog: function showResultDialog(title, data) {\n    var self = this;\n    bizagi.loader.start(\"entity-engine-view\").then(function () {\n      var instanceQuickActionsExecute;\n      var dialog = $(document).triggerHandler(\"showDialogWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUICKACTIONS_EXECUTE,\n        data: data,\n        dialogClass: \"ui-quick-action-modal-confirm\",\n        modalParameters: {\n          title: title,\n          width: \"900px\" },\n\n        maximizeOnly: false,\n        buttons: [\n        {\n          text: bizagi.localization.getResource('workportal-quick-actions-stop-all'),\n          click: function click() {\n            //TODO: Pending validate if all activities were finished\n            instanceQuickActionsExecute.showStopConfirmModal();\n          },\n          \"class\": \"biz-wp-btn-secondary-real btn-stop-all\" }],\n\n\n        closeOnEscape: false,\n        closeVisible: true,\n        onClose: function onClose() {\n          self.params.refreshShowedResults();\n        } });\n\n\n      $.when(dialog.getRenderWidget()).done(function (instance) {\n        instanceQuickActionsExecute = instance;\n        instanceQuickActionsExecute.registerDialog(dialog);\n        //Move the all element to specific place of the dialog\n        $(self.Class.SELECTOR_SUMMARY_EXECUTED_ACTIONS).prependTo(\".ui-quick-action-modal-confirm .ui-dialog-buttonpane .ui-dialog-buttonset\");\n      });\n    });\n  },\n\n  /**\r\n      *   Disposes the widget\r\n      */\n  dispose: function dispose() {\n    var self = this;\n    // Call base\n    self._super();\n    self._events(true);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal QuickAction principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Nessler Camargo \r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   N/A\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.quickActionsExecute\", {\n\n  /**\r\n                                                                                            * container for quick actions buttons\r\n                                                                                            */\n  SELECTOR_BUTTON_STOP_ALL: \".ui-dialog.ui-quick-action-modal-confirm button.btn-stop-all\",\n\n  /**\r\n                                                                                            * close button selector\r\n                                                                                            */\n  SELECTOR_BUTTON_CLOSE: \".ui-dialog.ui-quick-action-modal-confirm button.bz-dialog-btn-close\",\n\n  /**\r\n                                                                                                 * selector where show the summary the executed actions\r\n                                                                                                 */\n  SELECTOR_SUMMARY_EXECUTED_ACTIONS: \".summary-quick-actions-executed\",\n\n  /**\r\n                                                                         * One specific result of the list of results, identify by id\r\n                                                                         */\n  SELECTOR_ONE_RESULT: \"div[collapsibleitem][id={0}]\",\n\n  /**\r\n                                                        * Type of Row on results\r\n                                                        */\n  TYPE_ROW_DEFAULT: \"TYPE_ROW_DEFAULT\",\n  TYPE_ROW_ONLY_DEFAULT_TEXT: \"TYPE_ROW_ONLY_DEFAULT_TEXT\",\n  TYPE_ROW_ONLY_ERROR_TEXT: \"TYPE_ROW_ONLY_ERROR_TEXT\",\n\n  /**\r\n                                                         * data for widget\r\n                                                         */\n  DATA_PROPERTIES: {\n    // Array : List of activities\n    ACTIVITIES: \"ACTIVITIES\",\n\n    // Boolean : End of all executions\n    END_ALL_REQUESTS: \"END_ALL_REQUESTS\",\n\n    // Boolean : Stop by user\n    STOP_BY_USER: \"STOP_BY_USER\",\n\n    // Number: Executed actions\n    NUMBER_EXECUTED_ACTIONS: \"NUMBER_EXECUTED_ACTIONS\",\n\n    // Object: Dialog\n    DIALOG: \"DIALOG\" },\n\n\n  RESULT_SUCCESS: \"success\",\n  RESULT_EXECUTED: \"executed\",\n  RESULT_WARNING: \"warning\",\n  RESULT_ERROR: \"error\" },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"quickActions-execute\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActionsExecute\").concat(\"#ui-bizagi-workportal-widget-quickActions-execute\"),\n      \"quick-actions-stop-all-modal-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.quickActionsExecute\").concat(\"#ui-bizagi-workportal-widget-quick-actions-stop-all-modal-confirm\"),\n      useNewEngine: false });\n\n\n    self._setInitialData(params.data.activities);\n  },\n\n  /**\r\n      * override\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    _template = self.getTemplate(\"quickActions-execute\");\n    self.content = $.tmpl(_template, { summaryText: self._getSummaryText() });\n\n    return self.content;\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;;\n\n    self.requesterService = new bizagi.workportal.services.quickActionsRequester(self.dataService, {\n      callback: function callback(response) {\n        self._processResponseOfExecuteQuickActions(response);\n      } });\n\n\n    self._updateView();\n    self.requesterService.startAllRequests(self._getProperty(_prop.ACTIVITIES));\n    $(window).on(\"beforeunload\", $.proxy(self._showDefaultWarningMessageBrowser, self));\n\n    self._configureHandlers();\n  },\n\n  /**\r\n      * set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n       * return the value of the property, if exists else throw exception\r\n       * @param {DATA_PROPERTIES} prop \r\n       */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = bizagi.util.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * default initial data when widget starts\r\n      */\n  _setInitialData: function _setInitialData(data) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.END_ALL_REQUESTS] = false;\n    self.data[_prop.STOP_BY_USER] = false;\n    self.data[_prop.ACTIVITIES] = data;\n    self.data[_prop.NUMBER_EXECUTED_ACTIONS] = 0;\n  },\n\n  /**\r\n      * principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewSummaryExecutionActions();\n  },\n\n  /**\r\n      * Update the summary by one execution\r\n      */\n  _updateViewSummaryExecutionActions: function _updateViewSummaryExecutionActions() {\n    var self = this;\n\n    $(self.Class.SELECTOR_SUMMARY_EXECUTED_ACTIONS + \" span\").text(\n    self._getSummaryText());\n\n  },\n\n  /**\r\n      * get summary message\r\n      */\n  _getSummaryText: function _getSummaryText() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _activities = self._getProperty(_prop.ACTIVITIES),\n    _numberExecutedActions = self._getProperty(_prop.NUMBER_EXECUTED_ACTIONS);\n    return bizagi.localization.getResourceByElementsNumber(\n    \"workportal-quick-actions-summary-number-actions-executed\",\n    _activities.length).\n    replace(\"{0}\", _numberExecutedActions).replace(\"{1}\", _activities.length);\n  },\n\n  /**\r\n      * Configure handlers of buttons and other elements\r\n      */\n  _configureHandlers: function _configureHandlers() {\n    var self = this;\n    $(self.content).find('.filter-button').on('click', $.proxy(self._onClickFilterButton, self));\n  },\n\n  /**\r\n      * Click on button filter\r\n      */\n  _onClickFilterButton: function _onClickFilterButton(event) {\n    var self = this,\n    _target = event.target;\n\n    // So the click work on IE svg\n    if (_target.correspondingUseElement) {\n      _target = _target.correspondingUseElement;\n    }\n\n    var $button = $(_target).closest('.filter-button');\n    $button.addClass('selected').siblings().removeClass('selected');\n\n    var filterBy = $button.attr('filter-by');\n    self._showFilterResults(filterBy);\n  },\n\n  /**\r\n      * Filter the results\r\n      * @param {*} filterBy \r\n      */\n  _showFilterResults: function _showFilterResults(filterBy) {\n    var self = this,\n    _completeText = bizagi.localization.getResource(\"workportal-quick-actions-completed-actions\"),\n    _noResultsText = bizagi.localization.getResource(\"workportal-widget-inboxcommon-no-results-found\"),\n    _elementsToShow = $(self.content).find('.filter-row.' + filterBy);\n\n    if (filterBy === \"all\") {\n      $(self.content).find('.filter-row').show();\n      $('.quickActionsContainer .default-text span').text(_completeText);\n    } else\n    {\n      var _textToShow = _elementsToShow.length === 0 ? _noResultsText : _completeText;\n      $(self.content).find('.filter-row').hide();\n      _elementsToShow.show();\n      $('.quickActionsContainer .default-text span').text(_textToShow);\n    }\n  },\n\n  /**\r\n      * Process the response when finish one request or all requests\r\n      * @param {object} response \r\n      */\n  _processResponseOfExecuteQuickActions: function _processResponseOfExecuteQuickActions(dataResponse) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _activities = self._getProperty(_prop.ACTIVITIES);\n\n    if (dataResponse.type === \"all\") {//when finish all executions\n      self._setProperty(_prop.END_ALL_REQUESTS, true);\n      self._disableBtnStopAll();\n      var itemToShow = { title: bizagi.localization.getResource(\"workportal-quick-actions-completed-actions\") };\n      self._addRowToResultsWithType(itemToShow, self.Class.TYPE_ROW_ONLY_DEFAULT_TEXT);\n    } else\n    if (dataResponse.type === \"one-start\") {// when start new execution\n      var activityToAdd = _activities.filter(function (activity) {\n        return activity.workItemId === dataResponse.response.paramsRequest.workItemId;\n      })[0];\n      var itemToShow = {\n        workItemId: activityToAdd.workItemId,\n        activityName: activityToAdd.activityName,\n        caseNumber: activityToAdd.caseNumber,\n        details: activityToAdd.details,\n        icon: 'gray',\n        status: \"inProcess\" };\n\n      self.instance = self._addRowToResultsWithType(itemToShow, self.Class.TYPE_ROW_DEFAULT);\n    } else if (dataResponse.type === \"one-end\") {// when end an execution\n\n      self._setProperty(_prop.NUMBER_EXECUTED_ACTIONS,\n      self._getProperty(_prop.NUMBER_EXECUTED_ACTIONS) + 1);\n\n      var statusAndDataResponseToShow = self._getStatusByBackResponse(dataResponse.response.backResponse);\n      self._setResultToActionRequest(dataResponse.response.paramsRequest.workItemId, statusAndDataResponseToShow, self.instance);\n    } else if (dataResponse.type === \"stop-by-user\") {\n      if (!self._getProperty(_prop.END_ALL_REQUESTS)) {\n        self._setProperty(_prop.STOP_BY_USER, true);\n        var itemToShow = {\n          title: bizagi.localization.getResourceByElementsNumber(\n          \"workportal-quick-actions-confirm-stop-all-message\",\n          dataResponse.response.numberSkipActions).\n          replace(\"{0}\", dataResponse.response.numberSkipActions) };\n        self._addRowToResultsWithType(itemToShow, self.Class.TYPE_ROW_ONLY_ERROR_TEXT);\n      }\n      self._disableBtnStopAll();\n    }\n\n    // Check if everything is finished\n    if (self._getProperty(_prop.NUMBER_EXECUTED_ACTIONS) == self._getProperty(_prop.ACTIVITIES).length) {\n      self._hideBtnStopAllAndShowClose();\n    }\n  },\n\n  /**\r\n      * Control the before close event of Dialog\r\n      */\n  _manageExecuteModalCloseButton: function _manageExecuteModalCloseButton() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    if (self._getProperty(_prop.END_ALL_REQUESTS) || self._getProperty(_prop.STOP_BY_USER)) {\n      return true;\n    } else\n    {\n      self.showStopConfirmModal();\n      return false;\n    }\n  },\n\n  /**\r\n     * Show default warning message when any quick actions is executing\r\n     */\n  _showDefaultWarningMessageBrowser: function _showDefaultWarningMessageBrowser() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    if (!self._getProperty(_prop.END_ALL_REQUESTS)) {\n      return \"\"; // show warning message\n    }\n  },\n\n  /**\r\n      * build params for showConfirmationBox\r\n      */\n  _buildParamsForModalConfirm: function _buildParamsForModalConfirm(titleModal, message, numberActivities) {\n    var self = this;\n    return [\n    // message\n    message,\n    // title\n    titleModal,\n    // showIcon\n    false,\n    // buttons\n    [\n    {\n      label: bizagi.localization.getResource('workportal-general-word-no'),\n      action: \"reject\",\n      \"class\": \"biz-wp-btn-secondary-real\" },\n    {\n      label: bizagi.localization.getResource(\"workportal-general-word-yes\"),\n      action: \"resolve\",\n      \"class\": \"biz-wp-btn-warning\" }],\n\n\n    // customOptions\n    {\n      dialogClass: \"ui-quick-action-modal-confirm\" }];\n\n\n  },\n\n  /**\r\n      * Disable stop all button. The owner is the dialog, and We don't have the reference\r\n      */\n  _disableBtnStopAll: function _disableBtnStopAll() {\n    var self = this,\n    _element = $(document).find(self.Class.SELECTOR_BUTTON_STOP_ALL);\n\n    $(_element).prop(\"disabled\", true);\n  },\n\n  /**\r\n      * Hide stop all button and enables close button\r\n      */\n  _hideBtnStopAllAndShowClose: function _hideBtnStopAllAndShowClose() {\n    var self = this;\n\n    $(document).find(self.Class.SELECTOR_BUTTON_STOP_ALL).hide();\n    $(document).find(self.Class.SELECTOR_BUTTON_CLOSE).show();\n  },\n\n\n  /**\r\n      * Show stop confirmation modal\r\n      */\n  showStopConfirmModal: function showStopConfirmModal() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _message = $.tmpl(self.getTemplate(\"quick-actions-stop-all-modal-confirm\")).html(),\n    _title = bizagi.localization.getResource(\"workportal-general-word-message\"),\n    _modalParams = self._buildParamsForModalConfirm(_title, _message);\n\n    $.when(bizagi.showConfirmationBox.apply(self, _modalParams)).done(function () {\n      self.requesterService.stopAllRequests();\n    });\n  },\n\n  /**\r\n      * Add row to container results\r\n      * @param {object} item \r\n      * @param {string} type \r\n      */\n  _addRowToResultsWithType: function _addRowToResultsWithType(paramsItem, type) {\n    var self = this;\n\n    var paramsToCreateItem = {\n      item: paramsItem,\n      type: type };\n\n\n    var itemInstance = new bizagi.workportal.widgets.collapsible(self.workportalFacade, self.dataService, paramsToCreateItem);\n\n    itemInstance.getView().then(function (itemContent) {\n      itemContent.prependTo(self.content.find(\".quickActionsContainer\"));\n    });\n\n    return itemInstance;\n  },\n\n  /**\r\n      * Change properties of a row\r\n      * @param {instanceRow} instance \r\n      * @param {object} data \r\n      */\n  _changeProperties: function _changeProperties(instance, data) {\n    instance.setStatus(data.status);\n    instance.setIcon(data.icon);\n    instance.setDescription(data.description);\n  },\n\n\n  /**\r\n      * Get the data of the final response to be updated on modal\r\n      * @param {object} backResponse \r\n      */\n  _getStatusByBackResponse: function _getStatusByBackResponse(backResponse) {\n    var self = this,\n    _status = self.Class.RESULT_SUCCESS,\n    _description = \"\";\n\n    for (var i = 0; i < backResponse.length && _status === self.Class.RESULT_SUCCESS; i++) {\n      tag = backResponse[i];\n      if (tag.error) {\n        _status = self.Class.RESULT_ERROR;\n        _description = tag.error.message;\n      } else if (tag.result.type !== self.Class.RESULT_SUCCESS) {\n        _status = self.Class.RESULT_WARNING;\n        _description = tag.result.messages[0];\n      }\n    }\n\n    if (backResponse.status === 0) {\n      _status = self.Class.RESULT_ERROR;\n      _description = backResponse.statusText;\n    }\n\n    return self._getFinalDataResponse(_status, _description);\n  },\n\n  /**\r\n      * Map the final data to change the properties\r\n      * @param {*} status \r\n      * @param {*} description \r\n      */\n  _getFinalDataResponse: function _getFinalDataResponse(status, description) {\n    var self = this;\n\n    status = status === self.Class.RESULT_SUCCESS ? self.Class.RESULT_EXECUTED : status;\n    var response = {\n      status: status,\n      icon: self._getIcon(status),\n      description: description };\n\n\n    return response;\n  },\n\n  /**\r\n      * Get the icon depending on the status of the response\r\n      * @param {*} status \r\n      * @param {*} description \r\n      */\n  _getIcon: function _getIcon(status) {\n    var icon;\n    switch (status) {\n      case 'warning':\n        icon = 'yellow';\n        break;\n      case 'error':\n        icon = 'red';\n        break;\n      case 'executed':\n        icon = 'green';\n        break;\n      default:\n        icon = 'gray';\n        break;}\n\n    return icon;\n  },\n  /**\r\n      * Set result when finish a request\r\n      * @param {number} workItemId \r\n      * @param {object} statusAndDataResponseToShow \r\n      * @param {instanceRow} itemInstance \r\n      */\n  _setResultToActionRequest: function _setResultToActionRequest(workItemId, statusAndDataResponseToShow, itemInstance) {\n    var self = this;\n    var data = statusAndDataResponseToShow;\n    self._changeProperties(itemInstance, data);\n  },\n\n  /**\r\n      * Register dialog because we need to hide or show close button\r\n      * @param {Object Jquery Dialog} dialog \r\n      */\n  registerDialog: function registerDialog(dialog) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self._setProperty(_prop.DIALOG, dialog.dialogBox);\n\n    dialog.dialogBox.bind('dialogbeforeclose', $.proxy(self._manageExecuteModalCloseButton, self));\n  },\n\n  /*\r\n     *   Disposes the widget\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self._super();\n\n    $(window).off(\"beforeunload\", $.proxy(self._showDefaultWarningMessageBrowser, self));\n    $(self.content).find('.filter-button').on('click', $.proxy(self._onClickFilterButton, self));\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal QuickAction principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Nessler Camargo \r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   N/A\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.collapsible\", {\n\n  SELECTOR_TITLE: \".collapsible-title\",\n  SELECTOR_SUBTITLE: \".collapsible-subtitle\",\n  SELECTOR_STATUS: \".collapsible-status\",\n  SELECTOR_ICON: \"div.collapsible-icon > svg\",\n  SELECTOR_DESCRIPTION: \".collapsible-description\",\n  SELECTOR_ARROW: \" div.collapsible-arrow > i\",\n  SELECTOR_COLLAPSIBLE_LINK: \".collapsible-link\",\n  SELECTOR_COLLAPSIBLE_DESCRIPTION: \".collapsible-description\",\n  SELECTOR_COLLAPSIBLE_ITEM: \"div[collapsibleItem]\",\n\n\n  /**\r\n                                                      * Type of results of actions\r\n                                                      */\n  RESULT_EXECUTED: \"executed\",\n  RESULT_WARNING: \"warning\",\n  RESULT_ERROR: \"error\",\n  RESULT_IN_PROCESS: \"inProcess\",\n\n  /**\r\n                                   * Type of row\r\n                                   */\n  TYPE_ROW_DEFAULT: 'TYPE_ROW_DEFAULT',\n  TYPE_ROW_ONLY_DEFAULT_TEXT: 'TYPE_ROW_ONLY_DEFAULT_TEXT',\n  TYPE_ROW_ONLY_ERROR_TEXT: 'TYPE_ROW_ONLY_ERROR_TEXT',\n\n  /**\r\n                                                         * data for widget\r\n                                                         */\n  DATA_PROPERTIES: {\n    // String : title of collapsible\n    TYPE_ROW: \"TYPE_ROW\",\n    ID: \"ID\",\n    TITLE: \"TITLE\",\n    SUBTITLE: \"SUBTITLE\",\n    STATUS: \"STATUS\",\n    ICON: \"ICON\",\n    DESCRIPTION: \"DESCRIPTION\" } },\n\n\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    // Call base\n    self._super(workportalFacade, dataService, params);\n    //Load templates\n    self.loadTemplates({\n      \"quick-actions-items\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.collapsible\").concat(\"#ui-bizagi-workportal-widget-collapsible\"),\n      \"quick-actions-item-only-default-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.collapsible\").concat(\"#ui-bizagi-workportal-widget-collapsible-only-default-text\"),\n      \"quick-actions-item-only-error-text\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.collapsible\").concat(\"#ui-bizagi-workportal-widget-collapsible-only-error-text\"),\n      useNewEngine: false });\n\n\n    self.rendered = new $.Deferred();\n    self._setInitialData(params.item, params.type);\n    self.render();\n  },\n\n  /**\r\n      * override\r\n      */\n  renderContent: function renderContent() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n    var _template;\n    switch (self._getProperty(_prop.TYPE_ROW)) {\n      case self.Class.TYPE_ROW_ONLY_DEFAULT_TEXT:\n        _template = self.getTemplate(\"quick-actions-item-only-default-text\");\n        break;\n      case self.Class.TYPE_ROW_ONLY_ERROR_TEXT:\n        _template = self.getTemplate(\"quick-actions-item-only-error-text\");\n        break;\n      default:\n        _template = self.getTemplate(\"quick-actions-items\");}\n\n\n    self.content = $.tmpl(_template, {});\n    self.rendered.resolve();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._updateView();\n    self._events();\n\n  },\n\n  /**\r\n     * create or remove the events for this widget\r\n     * @param {Boolean} dispose true if want to dispose events\r\n     */\n  _events: function _events(dispose) {\n    var self = this;\n    if (dispose === true) {\n      self.content.off(\"click\", self.Class.SELECTOR_COLLAPSIBLE_LINK);\n    } else {\n      self.content.on(\"click\", self.Class.SELECTOR_COLLAPSIBLE_LINK, function () {\n        $(this).closest(self.Class.SELECTOR_COLLAPSIBLE_ITEM).find(self.Class.SELECTOR_COLLAPSIBLE_DESCRIPTION).slideToggle('slow');\n        var arrow = $(this).find(self.Class.SELECTOR_ARROW);\n        if ($(this).find(self.Class.SELECTOR_ARROW).hasClass('down')) {\n          self._changeArrow(arrow, 'up', 'down');\n          self._changeArrow(arrow.parent(), 'up', 'down');\n        } else {\n          self._changeArrow(arrow, 'down', 'up');\n          self._changeArrow(arrow.parent(), 'down', 'up');\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Allow change the arrow in collapsible element\r\n      * @param {} add \r\n      * @param {*} remove \r\n      */\n  _changeArrow: function _changeArrow(arrow, add, remove) {\n    arrow.addClass(add);\n    arrow.removeClass(remove);\n  },\n\n  /**\r\n      * set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n       * return the value of the property, if exists else throw exception\r\n       * @param {DATA_PROPERTIES} prop \r\n       */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = jQuery.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * default initial data when widget starts\r\n      */\n  _setInitialData: function _setInitialData(data, type) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.ID] = data.workItemId;\n    self.data[_prop.TITLE] = data.activityName || data.title;\n    self.data[_prop.SUBTITLE] = data.caseNumber;\n    self.data[_prop.STATUS] = data.status;\n    self.data[_prop.DESCRIPTION] = data.details;\n    self.data[_prop.ICON] = data.icon;\n    self.data[_prop.TYPE_ROW] = type || self.Class.TYPE_ROW_DEFAULT;\n  },\n\n  /**\r\n      * Set id to collapsable item\r\n      */\n  _setId: function _setId() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    $(self.content).prop('id', self._getProperty(_prop.ID));\n  },\n\n  /**\r\n      * Set or hide the status\r\n      */\n  setStatus: function setStatus(status) {\n    var self = this,\n    _status = status,\n    _text = '',\n    _selectorStatus = self.content.find(self.Class.SELECTOR_STATUS),\n    _selectorArrow = self.content.find(self.Class.SELECTOR_ARROW);\n    _selectorStatus.show();\n\n    switch (_status) {\n      case self.Class.RESULT_IN_PROCESS:\n        _text = bizagi.localization.getResource(\"workportal-general-word-in-process\");\n        _selectorStatus.text(_text + '...');\n        break;\n      case self.Class.RESULT_EXECUTED:\n        _selectorStatus.text(\"\");\n        $(self.content).addClass('filter-row');\n        $(self.content).addClass(self.Class.RESULT_EXECUTED);\n        break;\n      case self.Class.RESULT_WARNING:\n        _text = bizagi.localization.getResource(\"workportal-general-word-details\");\n        _selectorStatus.text(_text);\n        _selectorArrow.addClass(\"down\");\n        $(self.content).addClass('filter-row');\n        $(self.content).addClass(self.Class.RESULT_WARNING);\n        break;\n      case self.Class.RESULT_ERROR:\n        _text = bizagi.localization.getResource(\"workportal-general-word-details\");\n        _selectorStatus.text(_text);\n        _selectorArrow.addClass(\"down\");\n        $(self.content).addClass('filter-row');\n        $(self.content).addClass(self.Class.RESULT_ERROR);\n        break;\n      default:\n        _selectorStatus.hide();}\n\n  },\n  /**\r\n      * Set the icon depending of status\r\n      */\n  setIcon: function setIcon(newIcon) {\n    var self = this,\n    _selectorIcon = self.content.find(self.Class.SELECTOR_ICON);\n    _selectorIcon.hide();\n    self.content.find(_selectorIcon.selector + \".\" + newIcon).show();\n  },\n\n  /**\r\n      * Set the description\r\n      */\n  setDescription: function setDescription(newDescription) {\n    var self = this,\n    _selectorDescription = self.content.find(self.Class.SELECTOR_DESCRIPTION);\n    _selectorDescription.text(newDescription);\n  },\n\n  /**\r\n      * Update all views\r\n      */\n  _updateViewAll: function _updateViewAll() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _title = self._getProperty(_prop.TITLE),\n    _subtitle = self._getProperty(_prop.SUBTITLE),\n    _description = self._getProperty(_prop.DESCRIPTION),\n    _status = self._getProperty(_prop.STATUS),\n    _icon = self._getProperty(_prop.ICON),\n    _selectorTitle = self.content.find(self.Class.SELECTOR_TITLE);\n    _selectorSubtitle = self.content.find(self.Class.SELECTOR_SUBTITLE);\n    _selectorDescription = self.content.find(self.Class.SELECTOR_DESCRIPTION);\n\n    _selectorTitle.text(_title);\n    _selectorSubtitle.text(_subtitle);\n    _selectorDescription.hide();\n\n    self._setId();\n    self.setStatus(_status);\n    self.setIcon(_icon);\n    self.setDescription(_description);\n  },\n  /**\r\n      * Obtain the view\r\n      */\n  getView: function getView() {\n    var self = this,\n    _defer = new $.Deferred();\n\n    self.rendered.then(function () {\n      _defer.resolve(self.getContent());\n    });\n    return _defer;\n  },\n\n\n  /**\r\n      * principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewAll();\n  },\n\n  /*\r\n     *   Disposes the widget\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self._events(true);\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Workportal Checkbox Group principal\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Valeria Vanegas (based on  Edward Morales version)\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.checkboxGroup\", {\n  CHECKBOX_CLASS: \".quick-actions-checkbox\",\n  CHECKBOX_CHECKED_CLASS: \".quick-actions-checkbox-checked\",\n\n  /**\r\n                                                              * data for widget\r\n                                                              */\n  DATA_PROPERTIES: {\n    // Boolean : show checkAll checked\n    CHECK_ALL: \"CHECK_ALL\" } },\n\n{\n  /*\r\n  *  Constructor\r\n  */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self._super(workportalFacade, dataService, params);\n\n    self.loadTemplates({\n      \"quick-actions-checkbox\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.checkboxGroup\").concat(\"#ui-bizagi-quickActions-checkbox\"),\n      useNewEngine: false });\n\n\n    self._CHECK_ALL_CHECKBOX_CONTAINER = params.checkAllSelector;\n    self._CHECK_ALL_CHECKBOX = params.checkAllSelector + \" div\";\n    self._getContainerSelector = params.getContainerSelector;\n    self._onItemsCheckedChange = params.callback;\n\n    self.checkedItems = [];\n    self._setInitialData();\n  },\n\n  /**\r\n      * @override\r\n      */\n  postRender: function postRender() {\n    var self = this,\n    _checkboxTemplate = self.getTemplate(\"quick-actions-checkbox\");\n    self.checkboxContent = $.tmpl(_checkboxTemplate, {});\n  },\n\n  /**\r\n      *  Return the checked items\r\n      */\n  getChecked: function getChecked() {\n    var self = this;\n    return self.checkedItems;\n  },\n\n  /**\r\n      * Render the checkbox group\r\n      * @param {*} context where the checkboxes will be rendered\r\n      * @param {*} cases for which checkbox group is rendered \r\n      */\n  renderCheckboxGroup: function renderCheckboxGroup(context, items, persistCheckbox) {\n    var self = this;\n\n    self._items = items;\n    self._context = context;\n\n    for (var i = 0; i < self._items.length; i++) {\n      self._renderCheckbox(self._items[i]);\n    }\n\n    self._configureCheckAllCheckbox();\n    self.loadStoredItems(persistCheckbox);\n  },\n\n  /**\r\n      * Called when the view is updated and\r\n      * the checkbox could preserve its last state\r\n      */\n  loadStoredItems: function loadStoredItems(persistCheckbox) {\n    var self = this;\n\n    if (self.checkedItems.length > 0 && persistCheckbox) {\n      var stillChecked = [];\n      for (var i = 0; i < self.checkedItems.length; i++) {\n        var item = self.checkedItems[i];\n        var selector = self._getContainerSelector(item.id) + \" div\";\n        var element = $(selector, self._context);\n\n        if (element.length !== 0) {\n          element.toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1), true);\n          stillChecked.push(item);\n        }\n      }\n      self.checkedItems = stillChecked;\n      self._refreshCheckAllCheckbox(true);\n      self._onItemsCheckedChange();\n      self._updateView();\n    } else {\n      self.clearCheckedItems();\n    }\n  },\n\n  /**\r\n      * Clear checked items\r\n      */\n  clearCheckedItems: function clearCheckedItems() {\n    var self = this;\n    self.checkedItems = [];\n    self._toggleCheckAllCheckbox(false);\n  },\n\n  /**\r\n      * Render a checkbox\r\n      * @param {*} containerSelector the container in which the checkbox is rendered\r\n      */\n  _renderCheckbox: function _renderCheckbox(item) {\n    var self = this,\n    _containerSelector = self._getContainerSelector(item),\n    _checkboxSelector = _containerSelector + \" div\",\n    _content = self.checkboxContent.clone();\n\n    $(_containerSelector, self._context).append(_content);\n\n    $(_checkboxSelector, self._context).on(\"click\", function () {\n      var that = this;\n      $(that).toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1));\n      self._updateCheckedItems($(that));\n      self._refreshCheckAllCheckbox(false);\n      self._onItemsCheckedChange();\n    });\n\n    self._addDataToCheckbox(item, _checkboxSelector);\n  },\n  /**\r\n      * Update the checked Items \r\n      * If the item was\r\n      * @param {*} checkbox the clicked checkbox\r\n      */\n  _updateCheckedItems: function _updateCheckedItems(checkbox) {\n    var self = this,\n    _data = self._getDataFormCheckbox(checkbox);\n\n    if (!self._itemWasChecked(_data)) {\n      self._addItemChecked(_data);\n    } else {\n      self._removeItemChecked(_data);\n    }\n  },\n  /**\r\n      * Add an item \r\n      * @param {*} checkbox \r\n      */\n  _addItemChecked: function _addItemChecked(data) {\n    var self = this;\n    self.checkedItems.push(data);\n  },\n  /**\r\n      * Remove an item \r\n      * @param {*} checkbox \r\n      */\n  _removeItemChecked: function _removeItemChecked(data) {\n    var self = this;\n    self.checkedItems = self.checkedItems.filter(function (item) {\n      return JSON.stringify(item) !== JSON.stringify(data);\n    });\n  },\n  /**\r\n      * Add data to a checkbox\r\n      */\n  _addDataToCheckbox: function _addDataToCheckbox(item, selector) {\n    var self = this;\n    $(selector, self._context).data('id', item);\n  },\n  /**\r\n      * Get data from a checkbox\r\n      */\n  _getDataFormCheckbox: function _getDataFormCheckbox(checkbox) {\n    return checkbox.data();\n  },\n  /**\r\n      * Return if an item was checked\r\n      */\n  _itemWasChecked: function _itemWasChecked(data) {\n    var self = this;\n    return self.checkedItems.some(function (item) {\n      return JSON.stringify(item) === JSON.stringify(data);\n    });\n  },\n\n  /**\r\n      * Render and configure the all processes checkbox\r\n      * @param {*} containerSelector the container in which the checkbox is rendered\r\n      */\n  _configureCheckAllCheckbox: function _configureCheckAllCheckbox() {\n    var self = this,\n    _content = self.checkboxContent.clone();\n\n    $(self._CHECK_ALL_CHECKBOX_CONTAINER, self._context).append(_content);\n    $(self._CHECK_ALL_CHECKBOX, self._context).\n    attr('title', self.getResource(\"workportal-widget-query-form-check-all\")).\n    on(\"click\", function (event) {\n      event = event ? event : window.event;\n      event.stopPropagation();\n      self._toggleCheckAllCheckbox();\n    });\n  },\n\n  /**\r\n      * Check if the all processes checkbox should be checked and apply the changes\r\n      */\n  _refreshCheckAllCheckbox: function _refreshCheckAllCheckbox(setOnly) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _newCheckedAll = self._getNumberOfItemsChecked() === self._items.length;\n    self._setProperty(_prop.CHECK_ALL, _newCheckedAll, setOnly);\n  },\n\n  /**\r\n      * Get the number of items checked for the execution of quick actions\r\n      */\n  _getNumberOfItemsChecked: function _getNumberOfItemsChecked() {\n    var self = this;\n    return self.checkedItems.length;\n  },\n\n  /**\r\n      * Toggle the all processes checkbox and depending on its value refresh the other checkboxes\r\n      * @param {*} checkAllNewValue if should refresh all checkboxes or only the all processes. \r\n      * If the parameter is undefined, it toggles the last value\r\n      */\n  _toggleCheckAllCheckbox: function _toggleCheckAllCheckbox(checkAllNewValue) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _checkAll = self._getProperty(_prop.CHECK_ALL),\n    _newCheckAll = checkAllNewValue !== undefined ? checkAllNewValue : !_checkAll;\n\n    self._refreshAllCheckboxes(_newCheckAll);\n    self._setProperty(_prop.CHECK_ALL, _newCheckAll);\n\n    self._onItemsCheckedChange();\n  },\n\n  /**\r\n      * Refresh all checkboxes when the all processes selector change\r\n      */\n  _refreshAllCheckboxes: function _refreshAllCheckboxes(checkAll) {\n    var self = this,\n    _checkboxNotPrincipal = $(self.Class.CHECKBOX_CLASS, self._context).not(self._CHECK_ALL_CHECKBOX);\n\n    _checkboxNotPrincipal.toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1), checkAll);\n\n    self.checkedItems = [];\n\n    if (checkAll) {\n      _checkboxNotPrincipal.each(function () {\n        var that = this,\n        _data = self._getDataFormCheckbox($(that));\n\n        self._addItemChecked(_data);\n      });\n    }\n  },\n\n  /**\r\n      * Set the value of the property and update the view, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      * @param {any} newValue \r\n      * @param {Boolean} setOnly if is true the view is not updated\r\n      */\n  _setProperty: function _setProperty(prop, newValue, setOnly) {\n    var self = this,\n    _setOnly = setOnly !== undefined ? setOnly : false,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _changed = self.data[_prop] !== newValue,\n    _updateView = !_setOnly && _changed;\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n\n    self.data[_prop] = newValue;\n    if (_updateView)\n    self._updateView();\n  },\n\n  /**\r\n      * Return the value of the property, if exists else throw exception\r\n      * @param {DATA_PROPERTIES} prop \r\n      */\n  _getProperty: function _getProperty(prop) {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES[prop],\n    _valToReturn = self.data[_prop],\n    _cloneWith = Array.isArray(_valToReturn) ? [] : {};\n\n    if (_prop === undefined)\n    throw \"Property does not exist: \" + prop;\n    if (_typeof(_valToReturn) === \"object\")\n    _valToReturn = jQuery.extend(_cloneWith, _valToReturn);\n\n    return _valToReturn;\n  },\n\n  /**\r\n      * Default initial data when widget starts\r\n      */\n  _setInitialData: function _setInitialData() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES;\n\n    self.data = {};\n    self.data[_prop.CHECK_ALL] = false;\n  },\n\n  /**\r\n      * Principal method to update all views\r\n      */\n  _updateView: function _updateView() {\n    var self = this;\n    self._updateViewCheckAll();\n  },\n\n  /**\r\n      * Update the checkAll checkbox view\r\n      */\n  _updateViewCheckAll: function _updateViewCheckAll() {\n    var self = this,\n    _prop = self.Class.DATA_PROPERTIES,\n    _checked = self._getProperty(_prop.CHECK_ALL);\n    $(self._CHECK_ALL_CHECKBOX, self._context).toggleClass(self.Class.CHECKBOX_CHECKED_CLASS.substr(1), _checked);\n  } });","/*\r\n*   Name: BizAgi Workportal New Case Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a base class to to define the new case widget\r\n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.queries\", {}, {\n  /*\r\n                                                                                   *   Returns the widget name\r\n                                                                                   */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES;\n  },\n\n  /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate(\"queries\");\n    var content = self.content = $.tmpl(template);\n    self.loadtemplates();\n    return content;\n  },\n  /*\r\n      * this will be implemented on each device\r\n      */\n  loadtemplates: function loadtemplates() {} });","/*\r\n*   Name: BizAgi Desktop Queries Dialog implementation\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   ???\r\n*/\n\n// Extends itself\nbizagi.workportal.widgets.listCases.extend(\"bizagi.workportal.widgets.queryform\", {}, {\n  /*\r\n                                                                                        *   Returns the widget name\r\n                                                                                        */\n  getWidgetName: function getWidgetName() {\n    return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM;\n  },\n\n\n  renderContent: function renderContent() {\n    var self = this;\n    if (bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) && !self.params.notMigratedUrl) {\n      self.modifiedRender();\n    } else\n    {\n      self.frankensteinRenderContent();\n    }\n  },\n\n  modifiedRender: function modifiedRender() {\n    var self = this;\n    var template = self.getTemplate(\"queryform-wrapper\");\n    var content;\n    content = self.content = $.tmpl(template, {});\n    self.loadtemplates();\n    return content;\n  },\n\n  /*\r\n     * this will be implemented on each device\r\n     */\n  loadtemplates: function loadtemplates() {},\n\n  /*\r\n                                              *   Renders the content for the current controller\r\n                                              *   Returns a deferred because it has to load the current user\r\n                                              */\n  frankensteinRenderContent: function frankensteinRenderContent() {\n    var self = this;\n    var template = self.getTemplate(\"queryform\");\n    var url = \"\";\n\n    var idQueryForm = self.params.idQueryForm || \"\";\n    var idStoredQuery = self.params.idStoredQuery || \"\";\n    var idCube = self.params.idCube || \"\";\n\n    // Define actions of queryform\n    switch (self.params.queryFormAction) {\n      case \"edit\":\n        url = self.dataService.getUrl({\n          endPoint: \"query-form-edit\" }) +\n        \"?idStoredQuery=\" + idStoredQuery + \"&idQueryForm=\" + idQueryForm;\n        break;\n\n      case \"loadPrevious\":\n        url = \"App/ListaDetalle/listaitems.aspx?\" + self.dataService.lastQueryFullKey; //bizagi.referrerParams; //\n        break;\n      default:\n        url = self.dataService.getUrl({\n          endPoint: \"query-form\" }) +\n        \"?idQueryForm=\" + idQueryForm;\n        // check children query\n        url = idStoredQuery != \"\" ? url + \"&idStoredQuery=\" + idStoredQuery : url;\n        url = idCube != \"\" ? url + \"&idCube=\" + idCube : url;\n        break;}\n\n    if (self.params.notMigratedUrl) {\n      //url returned by the service with the operations and actions to execute\n      url = 'App/' + self.params.notMigratedUrl;\n    }\n\n    //gets the content template adapted to use an iframe\n    var content = self.content = $.tmpl(template,\n    {\n      queryFormURL: url });\n\n\n    // Return content\n    return content;\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n *   Author: Juan Pablo Crossley\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the new case widget\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.queries.extend(\"bizagi.workportal.widgets.queries\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queries\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries\"),\n      \"queries-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-elements\"),\n      \"queries-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-empty-elements\"),\n      \"queries-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-query-tree\"),\n      \"queries-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-confirm\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  postRender: function postRender() {\n    var self = this;\n\n    // Set bind event for last element\n    self.configureTreeNavigation();\n\n    // Bind back button\n    self.configureBackButton();\n\n    // Render base categories\n    self.renderQueries();\n\n    // set vertical scroll\n    self.scrollVertical({\n      \"autohide\": false });\n\n  },\n\n  /**\r\n     * Render List categories for each idCategory\r\n     */\n  renderQueries: function renderQueries(idParentQuery, appendElement) {\n    var self = this;\n    var content = self.getContent();\n    var template = self.getTemplate(\"queries-elements\");\n    var emptyTemplate = self.getTemplate(\"queries-empty-elements\");\n    var queriesContainer = $(\"#queries\", content);\n    var queryContent;\n    var mergeData;\n\n    $.when(self.dataService.getQueries({\n      idElement: idParentQuery })).\n    done(function (data) {\n\n      queriesContainer.empty();\n\n      // check if service have nodes\n      data = data || {};\n\n      if (data.length >= 1) {\n        // Check if have appendElement\n        if (appendElement != undefined) {\n          mergeData = $.merge(appendElement, data);\n        } else {\n          mergeData = data;\n        }\n\n        queryContent = $.tmpl(template, mergeData, {\n          checkChildNode: self.checkChildNode });\n\n      } else {\n        queryContent = $.tmpl(emptyTemplate, mergeData);\n      }\n      queryContent.appendTo(queriesContainer);\n\n      // set actions to rendered html \n      self.configureNavTree(queriesContainer);\n    });\n  },\n\n\n  configureNavTree: function configureNavTree(queriesContainer) {\n    var self = this;\n    var confirm = self.getTemplate(\"queries-query-confirm\");\n\n    // Bind for list elements\n    $(\"li\", \"#queries\").click(function () {\n      var idCube = $(this).children(\"#idCube\").val();\n      var queryId = $(this).children(\"#queryId\").val();\n      var prefix = $(this).children(\"#prefix\").val();\n      var nodesLength = $(this).children(\"#nodesLength\").val();\n      var idStoredQuery = $(this).children(\"#idStoredQuery\").val();\n      var id = $(this).children(\"#id\").val();\n      var queryDisplayName = $(this).children(\"#queryDisplayName\").val();\n      var headerTemplate = self.getTemplate(\"queries-query-tree\");\n      var categoryTree = $(\"#categoryTree\");\n\n      // If the node is not a query node then render the children            \n      if (queryId == \"-1\") {\n        // Is category\n        // Append query header\n\n        $.tmpl(headerTemplate, {\n          idParentQuery: id,\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n\n        // Set bind event for last element\n        self.configureTreeNavigation();\n\n        // Render sub-categories\n        self.renderQueries(id);\n      } else if (nodesLength > 0) {\n        // Is category with link\n\n        // Add element for tree navigation\n        $.tmpl(headerTemplate, {\n          idParentQuery: id,\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n\n        // Set bind event for last element\n        self.configureTreeNavigation();\n\n        // Append this object to children\n        self.renderQueries(id,\n        [{\n          \"queryDisplayName\": queryDisplayName,\n          \"idStoredQuery\": idStoredQuery,\n          \"id\": id,\n          \"idParent\": '',\n          \"queryId\": queryId,\n          \"prefix\": prefix,\n          \"nodes\": [],\n          \"idCube\": $(this).data(\"idcube\"),\n          \"categoryWithLink\": \"true\" }]);\n\n\n      } else {\n        // Is Process\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        var title = this.data(\"queryDisplayName\");\n        self.showQueryFormPopup({\n          \"idQuery\": queryId,\n          \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n          \"title\": title,\n          \"idCube\": idCube });\n\n      }\n    });\n\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".editButton\", \"#queries\").click(function (e) {\n      e.stopPropagation();\n\n      var queryId = \"-1\";\n      var idStoredQuery = $(this).parent().find(\"#idStoredQuery\").val();\n\n      self.showQueryFormPopup({\n        \"queryFormAction\": \"edit\",\n        \"idQuery\": queryId,\n        \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n        \"title\": $(\"#queryDisplayName\", $(this).parent()).val() });\n\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    });\n\n    $(\".deleteButton\", \"#queries\").click(function (e) {\n      e.stopPropagation();\n\n      var queryId = \"-1\";\n      var idStoredQuery = $(this).parent().find(\"#idStoredQuery\").val();\n      var prefix = $(this).parent().find(\"#prefix\").val();\n      var idCube = $(this).parent().find(\"#idCube\").val();\n      var content = $.tmpl(confirm);\n      var url;\n\n      if (prefix == \"prefix_MyStoredQuery\") {\n        url = self.dataService.getUrl({\n          endPoint: \"query-form-delete\" }) +\n        \"?idStoredQueryDel=\" + idStoredQuery + \"&idQueryForm=\" + queryId;\n      } else if (prefix == \"prefix_Cube\") {\n        url = self.dataService.getUrl({\n          endPoint: \"query-form-delete-cube\" });\n\n      }\n\n      // Open dialog with confirm message\n      $(content).dialog({\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n        buttons: [\n        {\n          text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n          click: function click() {\n            if (prefix == \"prefix_MyStoredQuery\") {\n              $.ajax({\n                url: url });\n\n            } else if (prefix == \"prefix_Cube\") {\n              $.destroy(\n              url,\n              { idCube: idCube });\n\n            }\n\n            $(this).dialog(\"close\");\n            bizagi.workportal.desktop.popup.closePopupInstance();\n          } },\n\n        {\n          text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n          click: function click() {\n            $(this).dialog(\"close\");\n          } }] });\n\n\n\n    });\n  },\n\n  /**\r\n     *   Binds the back buttons so we can navigate back\r\n     */\n  configureBackButton: function configureBackButton() {\n    var self = this;\n    var content = self.getContent();\n    var btnBack = $(\"#bt-back\", content);\n    var categoryTree = $(\"#categoryTree\", content);\n\n    // Bind click\n    btnBack.click(function () {\n      if ($(\"li\", categoryTree).length > 1) {\n        // Removes last child                    \n        $(\"li:last-child\", categoryTree).remove();\n        var idParentQuery = $(\"li:last-child\").children(\"#idParent\").val();\n\n        // Render Querie again\n        self.renderQueries(idParentQuery);\n      }\n    });\n  },\n\n  /**\r\n     * Bind tree navigation\r\n     */\n  configureTreeNavigation: function configureTreeNavigation() {\n    var self = this;\n    var content = self.getContent();\n    var categoryTree = $(\"#categoryTree\", content);\n\n    // Bind header events\n    $(\"li:last-child\", categoryTree).click(function () {\n      // Remove all elements\n      $(this).nextAll().remove();\n      var idParent = $(this).children(\"#idParent\").val();\n      // Render query tree again\n      self.renderQueries(idParent);\n    });\n  },\n\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n\n    $(\"#queries\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n\n  /*\r\n     *   Show new case popup to create a case\r\n     */\n  showQueryFormPopup: function showQueryFormPopup(arg) {\n    var self = this;\n\n    var idQuery = arg.idQuery || \"\";\n    var idStoredQuery = arg.idStoredQuery || \"\";\n    var queryFormAction = arg.queryFormAction || \"\";\n    var title = arg.title || \"\";\n    var idCube = arg.idCube || \"\";\n\n    // If the same popup is opened close it\n    if (self.currentPopup == \"queryform\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n\n    // Shows a popup widget\n    self.currentPopup = \"queryform\";\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n      idQueryForm: idQuery,\n      idStoredQuery: idStoredQuery,\n      queryFormAction: queryFormAction,\n      idCube: idCube,\n      modalParameters: {\n        title: title,\n        id: \"Queries\" } });\n\n\n  } });","/*\r\n*   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   This script will provide desktop overrides to implement the new case widget\r\n*/\n\n// Auto extend\nbizagi.workportal.widgets.queries.extend(\"bizagi.workportal.widgets.queries.definition\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queries\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries\"),\n      \"queries-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-elements\"),\n      \"queries-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-empty-elements\"),\n      \"queries-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-query-tree\"),\n      \"queries-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-confirm\"),\n\n      \"queries-definition-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-elements\"),\n      \"queries-definition-manage-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-manage-menu\"),\n      \"queries-liveprocesses-query-element\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-liveprocesses-menu\"),\n      \"queries-flat-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-flat-list\"),\n      \"queries-query-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-message-error\"),\n\n      useNewEngine: false });\n\n  },\n\n  /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.mainTemplate = self.getTemplate(\"queries-definition-elements\");\n    self.mainTemplateManage = self.getTemplate(\"queries-definition-manage-elements\");\n    self.mainTemplateLiveProcessesQuery = self.getTemplate(\"queries-liveprocesses-query-element\");\n    self.emptyTemplate = self.getTemplate(\"queries-empty-elements\");\n    self.flatListTemplate = self.getTemplate(\"queries-flat-list\");\n    self.confirmTemplate = self.getTemplate(\"queries-query-confirm\");\n    self.messageErrorTemplate = self.getTemplate(\"queries-query-message-error\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    // Set bind event for last element\n    self.configureTreeNavigation(\"#queries\");\n    // Render base categories\n    self.renderQueries();\n    // set vertical scroll\n    self.scrollVertical({\n      \"autohide\": false });\n\n  },\n\n  /**\r\n      * return the new button for manageQueries if the user has permission\r\n      */\n  showManageQueries: function showManageQueries() {\n    var self = this;\n    var templateManage = self.mainTemplateManage;\n    var content;\n    var isManageQueries = bizagi.menuSecurity.QueriesPermissionManager === true && bizagi.util.isEnableFeature(\"enableTransferQueryOwnership\");\n    if (isManageQueries) {\n      content = $.tmpl(templateManage, {});\n    }\n    return {\n      manageContent: content,\n      isManageQueries: isManageQueries };\n\n  },\n\n  /**\r\n      * return the new button for liveProcessesQuery if the user has permission\r\n      */\n  getLiveProcessesQuery: function getLiveProcessesQuery() {\n    var self = this;\n    return self.hasLiveProcessesQuery() ? $.tmpl(self.mainTemplateLiveProcessesQuery, {}) : undefined;\n  },\n\n  /**\r\n      * validate if the user has access to LP query\r\n      */\n  hasLiveProcessesQuery: function hasLiveProcessesQuery() {\n    return bizagi.menuSecurity.AdhocUserGroupReport === true;\n  },\n\n  /**\r\n      * merge templates and verify content undefined\r\n      */\n  mergeQueryWithLpContent: function mergeQueryWithLpContent(queryContent, lpContent) {\n    var content = queryContent;\n    if (queryContent !== undefined && lpContent !== undefined) {\n      content = $.merge(queryContent, lpContent);\n    } else if (lpContent !== undefined) {\n      content = lpContent;\n    }\n    return content;\n  },\n\n  /**\r\n      * return query menu options before saved query\r\n      */\n  beforeSavedQueriesContent: function beforeSavedQueriesContent(data, appendElement, idParentQuery) {\n    var self = this;\n    var manage = self.showManageQueries();\n    var queryContent = manage.manageContent;\n    var mergeData;\n    if (data.length >= 1) {\n      // Check if have appendElement\n      mergeData = appendElement !== undefined ? $.merge(appendElement, data) : data;\n      var tmplRendered = $.tmpl(self.mainTemplate, mergeData, {\n        checkChildNode: self.checkChildNode });\n\n      if (self.validateMenu(queryContent, idParentQuery)) {\n        queryContent = tmplRendered;\n      } else {\n        queryContent.append(tmplRendered);\n      }\n    } else if (!manage.isManageQueries && !self.hasLiveProcessesQuery()) {\n      queryContent = $.tmpl(self.emptyTemplate, mergeData);\n    }\n    return queryContent;\n  },\n\n  /**\r\n      * return the new button for manageQueries if the user has permission\r\n      */\n  addEventToMangeQueries: function addEventToMangeQueries(self) {\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT,\n      data: {},\n      maximize: true,\n      closeVisible: false,\n      modalParameters: {\n        title: bizagi.localization.getResource(\"workportal-widget-queries-management-title\"),\n        width: 790,\n        height: 540,\n        refreshInbox: false } });\n\n\n  },\n\n  /**\r\n      * go to Reports (LP query) in quickprocess\r\n      */\n  addEventToLPQuery: function addEventToLPQuery(self) {\n    if ($(document).find('iframe').length > 0 && $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1) {\n      bizagi.util.liveProcessesEvents.routeEvents.route = '/reports';\n      document.dispatchEvent(bizagi.util.liveProcessesEvents.routeEvents);\n      bizagi.workportal.desktop.popup.closePopupInstance();\n    } else {\n      self.publish(\"changeWidget\", {\n        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\n        data: {\n          route: \"reports\",\n          params: { module: 'none' } } });\n\n\n    }\n  },\n\n  validateMenu: function validateMenu(queryContent, idParentQuery) {\n    var enterToFolder = (queryContent == undefined || idParentQuery !== undefined) && idParentQuery !== \"-1\";\n    var leaveFolder = queryContent == undefined && idParentQuery === \"-1\";\n    return enterToFolder || leaveFolder;\n  },\n\n  /**\r\n      * Check if user has permission to BizagiQueries and do request to obtain QueriesDefinitions\r\n      * If the user do not have permission return an empty array in a promise \r\n      * @param idParentQuery \r\n      * @param securityBizagiQueries flag permission to BizagiQueries\r\n      */\n  getQueriesDefinitions: function getQueriesDefinitions(idParentQuery, securityBizagiQueries) {\n    var self = this,\n    request = function request() {\n      return self.dataService.getQueriesDefinitions({\n        idNode: idParentQuery });\n\n    },\n    noRequest = function noRequest() {\n      var defer = new $.Deferred();\n      defer.resolve([]);\n      return defer.promise();\n    };\n    var call = securityBizagiQueries ? request : noRequest;\n    return call();\n  },\n\n  /**\r\n      * Check if user has permission to BizagiQueries and do request to obtain StoredQueries\r\n      * If the user do not have permission return an empty array in a promise \r\n      * @param securityBizagiQueries flag permission to BizagiQueries\r\n      */\n  getStoredQueryFormList: function getStoredQueryFormList(securityBizagiQueries) {\n    var self = this,\n    request = function request() {\n      return self.dataService.getStoredQueryFormList();\n    },\n    noRequest = function noRequest() {\n      var defer = new $.Deferred();\n      defer.resolve({ storedQueryForms: [] });\n      return defer.promise();\n    };\n    var call = securityBizagiQueries ? request : noRequest;\n    return call();\n  },\n\n  /**\r\n     * Render List categories for each idCategory\r\n     */\n  renderQueries: function renderQueries(idParentQuery, appendElement) {\n    var self = this;\n    var securityBizagiQueries = bizagi.menuSecurity.BizagiQueries;\n    var content = self.getContent();\n    var queriesContainer = $(\"#queries\", content);\n    var queryContent;\n\n    $.when(self.getQueriesDefinitions(idParentQuery, securityBizagiQueries)).done(function (data) {\n      queriesContainer.empty();\n      queryContent = self.beforeSavedQueriesContent(data || [], appendElement, idParentQuery);\n\n      //if ((typeof idParentQuery === \"undefined\" || idParentQuery === \"-1\") && bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms)) {\n      if (typeof idParentQuery === \"undefined\" || idParentQuery === \"-1\") {\n        $.when(self.getStoredQueryFormList(securityBizagiQueries)).done(function (storedQueryForm) {\n          if (storedQueryForm.storedQueryForms.length > 0) {\n            var stored = $.tmpl(self.mainTemplate, {\n              queryType: \"-2\",\n              queryDisplayName: self.getResource(\"workportal-widget-queries-stored-query-forms\"),\n              nodes: [],\n              guidForm: \"stored\" });\n\n            queryContent = $.merge(queryContent, stored);\n            self.storedQueryForm = storedQueryForm.storedQueryForms;\n          }\n          queriesContainer.append(self.mergeQueryWithLpContent(queryContent, self.getLiveProcessesQuery()));\n          self.configureNavTree(queriesContainer);\n        });\n      } else {\n        queryContent.appendTo(queriesContainer);\n      }\n      // set actions to rendered html \n      self.configureNavTree(queriesContainer);\n    });\n  },\n\n  /**\r\n     * Render List stored query Form\r\n     */\n  renderStoredQueries: function renderStoredQueries() {\n    var self = this;\n    var content = self.getContent();\n    var flatListTemplate = self.flatListTemplate;\n    var queriesContainer = $(\"#queries\", content);\n    var storedQueryFormContent;\n    storedQueryFormContent = $.tmpl(flatListTemplate, { storedQueryForm: self.storedQueryForm, queryNameFormatter: self.queryNameFormatter });\n    storedQueryFormContent.appendTo(queriesContainer);\n  },\n\n  /**\r\n      * Format name of a stored query showed when is a shared query form anonymized user\r\n      * @param {*} currentName \r\n      */\n  queryNameFormatter: function queryNameFormatter(currentName) {\n    if (currentName) {\n      var _regex = /UserDeleted_[a-zA-z0-9-]*/gi,\n      _resource = bizagi.localization.getResource(\"workportal-general-word-anonymized\");\n      currentName = currentName.replace(_regex, _resource.toLowerCase());\n    }\n    return currentName;\n  },\n\n  configureNavTree: function configureNavTree(queriesContainer) {\n    var self = this;\n    var confirm = self.getTemplate(\"queries-query-confirm\");\n\n    //Bind for manage queries\n    $(\"li#manageQueries\", queriesContainer).click(function () {\n      self.addEventToMangeQueries(self);\n    });\n\n    //Bind for manage queries\n    $(\"li#manageLiveProcessesQuery\", queriesContainer).click(function () {\n      self.addEventToLPQuery(self);\n    });\n\n    // Bind for list elements\n    $(\"li:not(#manageQueries,#manageLiveProcessesQuery)\", queriesContainer).click(function () {\n      var idNode = $(this).children(\"#idNode\").val();\n      var guidQueryForm = $(this).children(\"#guidQueryForm\").val();\n      var guidForm = $(this).children(\"#guidForm\").val();\n      var guidContext = $(this).children(\"#guidContext\").val();\n      var queryType = $(this).children(\"#queryType\").val();\n      var nodesLength = $(this).children(\"#nodesLength\").val();\n      var queryDisplayName = $(this).children(\"#queryDisplayName\").val();\n      var headerTemplate = self.getTemplate(\"queries-query-tree\");\n      var categoryTree = $(\"#categoryTree\");\n      var notMigratedUrl = $(this).children(\"#notMigratedUrl\").val();\n\n      if (queryType == \"-2\") {\n        self.renderStoredQueries();\n        $.tmpl(headerTemplate, {\n          idParentQuery: \"-2\",\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n        self.configureTreeNavigation(\"#queries\");\n      } else\n      if (nodesLength > 0) {\n        // Is category with link\n        // Add element for tree navigation\n        $.tmpl(headerTemplate, {\n          idParentQuery: idNode,\n          queryDisplayName: queryDisplayName }).\n        appendTo(categoryTree);\n        // Set bind event for last element\n        self.configureTreeNavigation(\"#queries\");\n        self.renderQueries(idNode);\n      } else {\n        // Is Process\n        bizagi.workportal.desktop.popup.closePopupInstance();\n        var title = $(\"#queryDisplayName\", this).val();\n        self.showQueryFormPopup({\n          \"guidForm\": guidForm,\n          \"guidEntity\": guidContext,\n          \"title\": title,\n          \"queryFormAction\": \"renderQueryForm\",\n          \"queryType\": queryType,\n          \"notMigratedUrl\": notMigratedUrl });\n\n      }\n    });\n\n    $(\".deleteGAButton\").click(function (e) {\n      e.stopPropagation();\n      var confirmContent = $.tmpl(self.confirmTemplate);\n      var confirmContentParams = {\n        resizable: true,\n        modal: true,\n        title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n        buttons: [] };\n\n      var notMigratedUrlDelete = $(\"#notMigratedUrlDelete\", $(this).parent()).val();\n\n      confirmContentParams.buttons = [\n      {\n        text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n        click: function click() {\n          $(this).dialog(\"close\");\n          //checks if it should use the url based method to delete the query\n          if (notMigratedUrlDelete) {\n            $.destroy(notMigratedUrlDelete);\n          }\n          bizagi.workportal.desktop.popup.closePopupInstance();\n        } },\n\n      {\n        text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n        click: function click() {\n          $(this).dialog(\"close\");\n        } }];\n\n\n      $(confirmContent).dialog(confirmContentParams);\n\n    });\n  },\n\n  /**\r\n     * Bind tree navigation\r\n     */\n  configureTreeNavigation: function configureTreeNavigation(container) {\n    var self = this;\n    var content = self.getContent();\n    var categoryTree = $(\"#categoryTree\", content);\n    var queriesContainer = $(container, content);\n    // Bind header events\n    $(\"li:last-child\", categoryTree).click(function () {\n      // Remove all elements\n      $(this).nextAll().remove();\n      var idParent = $(this).children(\"#idParent\").val();\n      // Render query tree again\n      if (idParent == \"-2\") {\n        self.renderStoredQueries();\n      } else {\n        self.renderQueries(idParent);\n      }\n    });\n\n    $(\"li.storedQuery\", queriesContainer).click(function () {\n      var guid = $(this).data(\"guid\");\n      var id = $(this).data(\"id\");\n      var idNode = $(this).data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n\n        self.showQueryFormPopup({\n          \"idStoredQuery\": guid,\n          \"idQuery\": 1,\n          \"title\": paramsStoredQuery.definition.name,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"queryFormAction\": \"execute\",\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.execute : \"\" });\n\n      }\n    });\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".editButton\", container).click(function (e) {\n      e.stopPropagation();\n      var queryId = \"-1\";\n      var guid = $(this).parent().data(\"guid\");\n      var idStoredQuery = $(this).parent().data(\"id\");\n      var idNode = $(this).parent().data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n        self.showQueryFormPopup({\n          \"queryFormAction\": \"edit\",\n          \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"title\": paramsStoredQuery.definition.name,\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.edit : \"\" });\n\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      }\n    });\n    $(\".deleteButton\", container).click(function (e) {\n      e.stopPropagation();\n      var queryId = \"-1\";\n      var guid = $(this).parent().data(\"guid\");\n      var idStoredQuery = $(this).parent().data(\"id\");\n      var idNode = $(this).parent().data(\"idnode\");\n      var confirmContent, paramsStoredQuery, confirmContentParams;\n\n      var messageErrorForm = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n      messageErrorForm = messageErrorForm.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n\n        confirmContentParams = {\n          resizable: true,\n          modal: true,\n          title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n          buttons: [] };\n\n        var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n        if (p_sessionId !== null && paramsStoredQuery.notMigratedUrl) {\n          confirmContent = $.tmpl(self.messageErrorTemplate, { messageError: messageErrorForm });\n        } else\n        {\n          confirmContent = $.tmpl(self.confirmTemplate);\n\n          confirmContentParams.buttons = [\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n              //checks if it should use the url based method to delete the query\n              if (paramsStoredQuery.notMigratedUrl && paramsStoredQuery.notMigratedUrl[\"delete\"]) {\n                $.get(\"App/\" + paramsStoredQuery.notMigratedUrl[\"delete\"]);\n              } else {\n                self.dataService.deleteStoredQueryForm({ idStoredQueryForm: idStoredQuery });\n              }\n              bizagi.workportal.desktop.popup.closePopupInstance();\n              self.publish(\"refreshQueryFormShortCut\");\n            } },\n\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n            } }];\n\n\n        }\n\n        // Open dialog with confirm message\n        $(confirmContent).dialog(confirmContentParams);\n      }\n    });\n  },\n\n  scrollVertical: function scrollVertical() {\n    var self = this;\n    var content = self.getContent();\n    $(\"#queries\", content).bizagiScrollbar({\n      \"autohide\": false });\n\n  },\n\n  /*\r\n     *   Show new case popup to create a case\r\n     */\n  showQueryFormPopup: function showQueryFormPopup(arg) {\n    var self = this;\n    var queryFormAction = arg.queryFormAction || \"\";\n    var title = arg.title || \"\";\n    var queryType = arg.queryType || \"\";\n    var guidForm = arg.guidForm || \"\";\n    var guidEntity = arg.guidEntity || \"\";\n    var paramsStoredQuery = arg.paramsStoredQuery || {};\n    // If the same popup is opened close it\n    if (self.currentPopup == \"queryform\") {\n      bizagi.workportal.desktop.popup.closePopupInstance();\n      return;\n    }\n    // Shows a popup widget\n    self.currentPopup = \"queryform\";\n    self.publish(\"showDialogWidget\", {\n      widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\n      queryFormAction: queryFormAction,\n      queryType: queryType,\n      paramsStoredQuery: paramsStoredQuery,\n      modalParameters: {\n        title: title,\n        id: \"Queries\" },\n\n      closeVisible: false,\n      guidForm: guidForm,\n      guidEntity: guidEntity,\n      notMigratedUrl: arg.notMigratedUrl || \"\",\n      maximizeOnly: true,\n      editQueryForm: function editQueryForm(params) {\n        self.currentPopup = undefined;\n        self.showPopUpEditQueryForm(params);\n\n      },\n      executeQueryForm: function executeQueryForm(params) {\n        self.currentPopup = undefined;\n        self.showPopUpResultsQueryForm(params);\n      } });\n\n  },\n\n  showPopUpEditQueryForm: function showPopUpEditQueryForm(params) {\n    var self = this;\n    var content = self.getContent();\n\n    $.when(self.dataService.getStoredQueryFormList()).done(function (storedQueryForm) {\n      self.storedQueryForm = storedQueryForm.storedQueryForms;\n      self.publish(\"refreshQueryFormShortCut\");\n      if (params && params.response) {\n        var idQueryForm = params.response;\n        self.editQueryForm(idQueryForm);\n      }\n    });\n  },\n\n  showPopUpResultsQueryForm: function showPopUpResultsQueryForm(params) {\n    var self = this;\n    var content = self.getContent();\n\n    $.when(self.dataService.getStoredQueryFormList()).done(function (storedQueryForm) {\n      self.storedQueryForm = storedQueryForm.storedQueryForms;\n      self.publish(\"refreshQueryFormShortCut\");\n      if (params && params.response) {\n        var idQueryForm = params.response;\n        self.executeQueryForm(idQueryForm);\n      }\n    });\n  },\n\n  editQueryForm: function editQueryForm(idQueryForm) {\n    var self = this;\n    var paramsStoredQuery = self.getParamsStoredQuery(idQueryForm);\n    if (paramsStoredQuery.length == 1) {\n      paramsStoredQuery = paramsStoredQuery[0];\n      self.showQueryFormPopup({\n        \"queryFormAction\": \"edit\",\n        \"idStoredQuery\": idQueryForm == \"-1\" ? \"\" : idQueryForm,\n        \"paramsStoredQuery\": paramsStoredQuery,\n        \"title\": paramsStoredQuery.definition.name,\n        \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.edit : \"\" });\n\n    }\n  },\n  executeQueryForm: function executeQueryForm(idQueryForm) {\n    var self = this;\n    var paramsStoredQuery = self.getParamsStoredQuery(idQueryForm);\n    if (paramsStoredQuery.length == 1) {\n      paramsStoredQuery = paramsStoredQuery[0];\n      self.showQueryFormPopup({\n        \"idStoredQuery\": paramsStoredQuery.guid,\n        \"idQuery\": 1,\n        \"title\": paramsStoredQuery.definition.name,\n        \"paramsStoredQuery\": paramsStoredQuery,\n        \"queryFormAction\": \"execute\",\n        \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.execute : \"\" });\n\n    }\n  },\n\n  getParamsStoredQuery: function getParamsStoredQuery(idQueryForm) {\n    var self = this;\n    return $.grep(self.storedQueryForm, function (e) {\n      return e.id == idQueryForm;\n    });\n  } });","/*\r\n *   Name: BizAgi Workportal Desktop stored queries shortcut\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will provide behavior to stored queries shortcut\r\n */\n\n// Auto extend\nbizagi.workportal.widgets.queries.definition.extend(\"bizagi.workportal.widgets.queries.shortcut\", {}, {\n\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load templates\n    self.loadTemplates({\n      \"queries\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries\"),\n      \"queries-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-elements\"),\n      \"queries-empty-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-empty-elements\"),\n      \"queries-query-tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-query-tree\"),\n      \"queries-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-confirm\"),\n\n      \"queries-definition-elements\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-definition-elements\"),\n      \"queries-flat-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-flat-list\"),\n      \"queries-query-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries\").concat(\"#ui-bizagi-workportal-widget-queries-message-error\"),\n\n      \"queries-shortcut\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-shortcut\"),\n      \"queries-shortcut-flat-list\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-flat-list-shortcut\"),\n      \"queries-shortcut-query-confirm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-confirm-shortcut\"),\n      \"queries-shortcut-query-message-error\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.queries.shortcut\").concat(\"#ui-bizagi-workportal-widget-queries-message-error-shortcut\"),\n      useNewEngine: false });\n\n  },\n\n  /**\r\n      *   To be overriden in each device to apply layouts\r\n      */\n  loadtemplates: function loadtemplates() {\n    var self = this;\n    self.flatListTemplate = self.getTemplate(\"queries-shortcut-flat-list\");\n    self.confirmTemplate = self.getTemplate(\"queries-shortcut-query-confirm\");\n    self.messageErrorTemplate = self.getTemplate(\"queries-shortcut-query-message-error\");\n  },\n  postRender: function postRender() {\n    var self = this;\n    var template = self.getTemplate(\"queries-shortcut\");\n    var content = self.content = $.tmpl(template);\n    self.handleEvents();\n    bizagi.workportal.widgets.queries.shortcut.instance = this;\n  },\n\n  handleEvents: function handleEvents() {\n    var self = this;\n    $(\"#queryFormShortcutContainer\").show();\n    $(\"#queryFormShortcutContainer\").click(function () {\n      var queryFormShortcut = $(\"#queryFormShortcut\");\n      var arrow = $(this).find(\"span\");\n      var isHidden = queryFormShortcut.is(\":hidden\") ? true : false;\n      if (isHidden) {\n        queryFormShortcut.show();\n        arrow.removeClass(\"Right\");\n        arrow.addClass(\"Down\");\n        self.renderStoredQueries();\n      } else {\n        queryFormShortcut.hide();\n        arrow.removeClass(\"Down\");\n        arrow.addClass(\"Right\");\n      }\n    });\n  },\n\n  /**\r\n      * Bind tree navigation\r\n      */\n  configureTreeNavigation: function configureTreeNavigation() {\n    var self = this;\n    var categoryTree = $(\"#categoryTree\", self.content);\n    var queriesContainer = $(\"#queries-shortcut\", self.content);\n    $(\"li.storedQuery\", queriesContainer).click(function () {\n      var guid = $(this).data(\"guid\");\n      var id = $(this).data(\"id\");\n      var idNode = $(this).data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {return e.idNode == idNode;});\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n        self.showQueryFormPopup({\n          \"idStoredQuery\": guid,\n          \"idQuery\": 1,\n          \"title\": paramsStoredQuery.definition.name,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"queryFormAction\": \"execute\",\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.execute : \"\" });\n\n      }\n      self.currentPopup = undefined;\n      // self.renderQueries();\n    });\n\n    // Bind for action elements (Edit and delete buttons)\n    $(\".bz-icon-pencil-outline\", \"#queries-shortcut\").click(function (e) {\n      var queryId = \"-1\";\n      var guid = $(this).closest(\".storedQuery\").data(\"guid\");\n      var idStoredQuery = $(this).closest(\".storedQuery\").data(\"id\");\n      var idNode = $(this).closest(\".storedQuery\").data(\"idnode\");\n      var paramsStoredQuery;\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n        self.showQueryFormPopup({\n          \"queryFormAction\": \"edit\",\n          \"idStoredQuery\": idStoredQuery == \"-1\" ? \"\" : idStoredQuery,\n          \"paramsStoredQuery\": paramsStoredQuery,\n          \"title\": paramsStoredQuery.definition.name,\n          \"notMigratedUrl\": paramsStoredQuery.notMigratedUrl ? paramsStoredQuery.notMigratedUrl.edit : \"\" });\n\n        bizagi.workportal.desktop.popup.closePopupInstance();\n      }\n    });\n\n    $(\".bz-icon-close\", \"#queries-shortcut .bz-shorcut__icons\").click(function (e) {\n      e.stopPropagation();\n      var queryId = \"-1\";\n      var guid = $(this).closest(\".storedQuery\").data(\"guid\");\n      var idStoredQuery = $(this).closest(\".storedQuery\").data(\"id\");\n      var idNode = $(this).closest(\".storedQuery\").data(\"idnode\");\n      var confirmContent, paramsStoredQuery, confirmContentParams;\n\n      var messageErrorForm = self.getResource(\"workportal-widget-admin-entities-message-migrate\");\n      messageErrorForm = messageErrorForm.replace(\"{build}\", bizagi.loader.productBuildToAbout);\n\n      var result = $.grep(self.storedQueryForm, function (e) {\n        return e.idNode == idNode;\n      });\n      if (result.length == 1) {\n        paramsStoredQuery = result[0];\n\n        confirmContentParams = {\n          resizable: true,\n          modal: true,\n          title: self.getResource(\"workportal-widget-queries-confirm-title\"),\n          buttons: [] };\n\n\n        var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n        if (p_sessionId !== null && paramsStoredQuery.notMigratedUrl) {\n          confirmContent = $.tmpl(self.messageErrorTemplate, { messageError: messageErrorForm });\n        } else\n        {\n          confirmContent = $.tmpl(self.confirmTemplate);\n\n          confirmContentParams.buttons = [\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-delete\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n              if (paramsStoredQuery.notMigratedUrl && paramsStoredQuery.notMigratedUrl[\"delete\"]) {\n                $.get(\"App/\" + paramsStoredQuery.notMigratedUrl[\"delete\"]);\n              } else {\n                $.when(self.dataService.deleteStoredQueryForm({ idStoredQueryForm: idStoredQuery })).done(function () {\n                  bizagi.workportal.desktop.popup.closePopupInstance();\n                  self.renderStoredQueries();\n                });\n              }\n              self.renderStoredQueries();\n              bizagi.workportal.desktop.popup.closePopupInstance();\n            } },\n\n          {\n            text: self.getResource(\"workportal-widget-queries-confirm-cancel\"),\n            click: function click() {\n              $(this).dialog(\"close\");\n            } }];\n\n\n        }\n\n        // Open dialog with confirm message\n        $(confirmContent).dialog(confirmContentParams);\n      }\n    });\n  },\n  renderStoredQueries: function renderStoredQueries(params) {\n    var self = this;\n    var flatListTemplate = self.flatListTemplate;\n    var queriesContainer = $(\"#queries-shortcut\", self.content);\n    var storedQueryFormContent;\n    $.when(self.dataService.getStoredQueryFormList()).done(function (storedQueryForm) {\n      self.storedQueryForm = storedQueryForm.storedQueryForms;\n      storedQueryFormContent = $.tmpl(flatListTemplate, { storedQueryForm: self.storedQueryForm });\n      storedQueryFormContent.appendTo(queriesContainer);\n      self.configureTreeNavigation();\n      if (self.storedQueryForm.length <= 0) {\n        $(\"#queryFormShortcutContainer\").hide();\n      } else {\n        $(\"#queryFormShortcutContainer\").show();\n      }\n    });\n  } });","/**\r\n * Name: Bizagi Workportal Users Modal\r\n */\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.queries.management\", {}, {\n  /**\r\n                                                                                               * Constructor\r\n                                                                                               */\n  init: function init(workportalFacade, dataService, params) {\n    var self = this;\n    self.selectedUsers = [\"\", \"\"];\n\n    // Call base\n    self._super(workportalFacade, dataService, params);\n\n    //Load template\n    self.loadTemplates({\n      \"queries-management\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.queries.management\").concat(\"#queries-management\"),\n      \"queries-management-loader\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.queries.management\").concat(\"#ui-bizagi-workportal-widget-queries-management-loader\"),\n      \"queries-management-table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.queries.management\").concat(\"#ui-bizagi-workportal-widget-queries-management-table\") });\n\n\n  },\n\n  renderContent: function renderContent() {\n    var self = this;\n    var template = self.getTemplate('queries-management');\n    self.content = template.render();\n    return self.content;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    self.setupSearchusersButton();\n    self.loaderTmpl = self.getTemplate(\"queries-management-loader\");\n    self.loader = self.loaderTmpl.render();\n  },\n\n  /**\r\n      * Set the fixed head table of the reporting details\r\n      */\n  fixedHeadTable: function fixedHeadTable() {\n    var self = this;\n    var fixedHeadTableElement = $(\".ui-bizagi-wp-queries-management-content-parent-tableHeadFixed > .ui-bizagi-wp-queries-management-content-tableHeadFixed\", self.content);\n    fixedHeadTableElement.find(\"table:first\").floatThead({\n      position: 'fixed',\n      zIndex: 1,\n      scrollContainer: function scrollContainer() {\n        return fixedHeadTableElement;\n      } });\n\n\n    self.onResizeModalEvent();\n  },\n\n  clean: function clean() {\n    var self = this;\n  },\n\n  /**\r\n      * find the maximize button and when the user clicks it the body trigger resize, this is necesary for fixedHeadTable, and recall again\r\n      */\n  onResizeModalEvent: function onResizeModalEvent() {\n    var self = this;\n    self.getContent().parents(\".ui-dialog\").find(\".ui-dialog-titlebar-maximize\").click(function () {\n      $(\"body\").trigger(\"resize\");\n      self.onResizeModalEvent();\n    });\n  },\n\n  /*\r\n     * initialize the users search form widget\r\n     */\n  setupUsersSearchForm: function setupUsersSearchForm(input, user) {\n    var self = this;\n    var content = self.getContent();\n    var def = $.Deferred();\n    $(\".queries-management-content\", content).hide();\n\n\n    self.usersTable = new bizagi.workportal.widgets.userstable(self.workportalFacade, self.dataService, $.extend(self.params, {\n      canvas: $(\"#dinamicContent\", content),\n      userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\n      parentDef: def,\n      showBackButton: true }));\n\n    self.usersTable.render();\n\n    $.when(def).done(function (userId, userName, guid) {\n      var params = {\n        action: \"Applications\",\n        userId: userId };\n\n      if (user == 0) {\n        self.dataService.getApplicationCategoriesList(params).\n        done(function (applicationList) {\n          if (applicationList.items.length > 0) {\n            self.allProcess = true;\n            self.haveProcess = true;\n            if (guid !== undefined) {\n              self.getQueries(guid);\n            }\n          }\n\n        }).fail(function () {\n        });\n      }\n      $(\"#dinamicContent\", content).html(\"\");\n      $(\".queries-management-content\", content).show();\n      if (userName) {\n        $(input, content).val(userName);\n        self.showHideClearIcon(input, 'block');\n      }\n      if (guid) {\n        self.selectedUsers[user] = guid;\n      }\n    });\n  },\n  showNotifier: function showNotifier(message) {\n    var self = this;\n    var notifier = window.parent.bizagi.injector.get('notifier');\n    notifier.showSucessMessage(message, '');\n  },\n  showLoading: function showLoading() {\n    var self = this;\n    $(\".queries-management-container\").append(self.loader);\n  },\n  endLoading: function endLoading() {\n    var self = this;\n    $(self.loader).remove();\n  },\n  clearInput: function clearInput(input, content) {\n    var self = this;\n    var position = input == \"#txtTextUserSource\" ? 0 : 1;\n    self.showHideClearIcon(input, 'none');\n    $(input, content).val(\"\");\n    self.selectedUsers[position] = \"\";\n  },\n  showHideClearIcon: function showHideClearIcon(id, display) {\n    var self = this;\n    var content = self.getContent();\n    $(id + \" ~ span\", content).css(\"display\", display);\n  },\n  getQueries: function getQueries(guid) {\n    var self = this;\n    var params = {};\n    params.guidUser = guid;\n    self.showLoading();\n    self.dataService.getManagementQueries(params).\n    done(function (response) {\n      self.queries = response.storedQueryForms;\n      self.endLoading();\n      if (self.queries.length > 0) {\n        var dataTable = $.map(response.storedQueryForms, function (value) {\n          var name = value.definition.name;\n          var description = value.definition.description;\n          return {\n            name: name,\n            description: description };\n\n        });\n        $(\".emptyQueries\", self.content).hide();\n        $(\".queries-content\", self.content).show();\n        self.renderTable(dataTable);\n      } else\n      {\n        $(\".emptyQueriesText\").text(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-queries\"));\n      }\n    }).\n    fail(function (error) {\n      self.endLoading();\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-assign-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      bizagi.log(error);\n    });\n  },\n  renderTable: function renderTable(dataTable) {\n\n    var self = this;\n    var template = self.getTemplate('queries-management-table');\n    var data = {\n      data: dataTable };\n\n    var contentTable = template.render(data);\n    $(\".queries-content.ui-bizagi-wp-queries-management-content-tableHeadFixed\").html(contentTable);\n    self.fixedHeadTable();\n  },\n  validateUsers: function validateUsers() {\n    var self = this;\n    var resp = true;\n    if (self.selectedUsers[0] == \"\" || self.selectedUsers[1] == \"\") {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-you-must-select-both-users-to-continue\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      resp = false;\n    } else if (self.selectedUsers[0] == self.selectedUsers[1]) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-admin-transfers-case-security-permissions-fail-users-must-be-different\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      resp = false;\n    } else\n    if (self.queries.length == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-queries\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n      resp = false;\n    }\n    return resp;\n  },\n\n  transferQueries: function transferQueries() {\n    var self = this;\n    if (self.validateUsers()) {\n      var buttons = [\n      {\n        label: bizagi.localization.getResource(\"workportal-widget-queries-management-transfer-confirmation-modal-no-button\"),\n        action: \"reject\" },\n\n      {\n        label: bizagi.localization.getResource(\"workportal-widget-queries-management-transfer-confirmation-modal-button\"),\n        action: \"resolve\" }];\n\n\n      var customOptions = {\n        dialogClass: \"widget-queries-management-transfer-confirm\",\n        width: 400,\n        minWidth: 400 };\n\n\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-widget-queries-management-transfer-confirmation-modal-description\"), bizagi.localization.getResource(\"workportal-general-word-information\"), false, buttons, customOptions)).\n      done(function () {\n        self.showLoading();\n        var params = {\n          guidUserSource: self.selectedUsers[0],\n          guidUserTarget: self.selectedUsers[1] };\n\n        self.dataService.transferQueries(params).\n        done(function () {\n          self.endLoading();\n          $(\".emptyQueriesText\").text(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-queries\"));\n          $(\".queries-content\", self.content).hide();\n          $(\".emptyQueries\", self.content).show();\n          self.queries = [];\n          self.showNotifier(bizagi.localization.getResource(\"workportal-widget-queries-management-queries-transferred-successfully\"));\n        }).\n        fail(function (error) {\n          self.endLoading();\n          bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-queries-management-queries-transferred-fail\"), bizagi.localization.getResource(\"workportal-general-word-information\"), \"warning\");\n          bizagi.log(error);\n        });\n\n      });\n    }\n  },\n\n  /****************** EVENTS ***********************/\n\n\n  setupSearchusersButton: function setupSearchusersButton() {\n    var self = this,\n    content = self.getContent();\n\n    $(\"#btn-searchUserSource\", content).click(function () {\n      self.setupUsersSearchForm(\"#txtTextUserSource\", 0);\n    });\n    $(\"#btn-searchUserTarget\", content).click(function () {\n      self.setupUsersSearchForm(\"#txtTextUserTarget\", 1);\n    });\n\n    $(\"#btn-clearUserSource\", content).click(function () {\n      self.clearInput(\"#txtTextUserSource\", content);\n      $(\".emptyQueriesText\").text(bizagi.localization.getResource(\"workportal-widget-queries-management-list-empty-no-selected-user\"));\n      $(\".queries-content\", self.content).hide();\n      $(\".emptyQueries\", self.content).show();\n    });\n    $(\"#btn-clearUserTarget\", content).click(function () {\n      self.clearInput(\"#txtTextUserTarget\", content);\n    });\n\n    $(\"#btn-transferQueries\", content).click(function () {\n      self.transferQueries();\n    });\n  } });\n\n\n\nbizagi.injector.register('bizagi.workportal.widgets.queries.management', ['workportalFacade', 'dataService', bizagi.workportal.widgets.queries.management]);","/*\r\n*   Name: BizAgi Workportal Rows Per Page (Inbox and Queries)\r\n*   Author: Kevin Alvarado  \r\n*/\n\n// Extends itself\n$.Class.extend(\"bizagi.workportal.results.per.page\", {}, {\n\n  /**\r\n                                                            * Init the class\r\n                                                            * @param {*} bizagiConfigProperty optional parameter if the rows per page property is configured in BizagiConfig\r\n                                                            */\n  init: function init(bizagiConfigProperty) {\n    var self = this;\n    self.bizagiConfigProperty = bizagiConfigProperty;\n  },\n\n  /**\r\n      * Return the combo DataSource with the default values and self.bizagiConfigProperty\r\n      */\n  initCombo: function initCombo() {\n    var self = this;\n    var comboDataSource = {\n      combo: [],\n      id: \"numberRows\" };\n\n    var values = Array(10, 20, 30, 40, 50, 100);\n    if (self.bizagiConfigProperty && values.indexOf(self.bizagiConfigProperty) == -1) {\n      values.push(self.bizagiConfigProperty);\n      values.sort(function (a, b) {return a - b;});\n    }\n    values.map(function (v) {\n      comboDataSource.combo.push({\n        id: v,\n        name: v });\n\n    });\n    return comboDataSource;\n  },\n\n  /**\r\n      * Busca el valor finding en el combo[i].id si no lo encuentra retorna false, de lo contrario retorna el elemento combo[i]\r\n      * @param {Array} combo array de valores del combo\r\n      * @param {Number} finding valor que se busca\r\n      */\n  _findValue: function _findValue(combo, finding) {\n    var value = false;\n    combo.map(function (c) {\n      if (c.id == finding) {\n        value = c;\n      }\n    });\n    return value;\n  },\n\n  /**\r\n      * Revisa el valor inicial que debe tener el combo, revisando preferencias de usuario, web.config y casos null, retorna un elemento del combo\r\n      * @param {JSON} params contenido del comboDataSource\r\n      */\n  initialValueCombo: function initialValueCombo(params) {\n    var self = this;\n    var initValueCombo = params.comboDataSource.combo[0];\n    var preferencesItemsPerPage = params.getRowValue();\n    if (preferencesItemsPerPage || self.bizagiConfigProperty) {\n      var defaultValue = preferencesItemsPerPage && self._findValue(params.comboDataSource.combo, preferencesItemsPerPage) !== false ? preferencesItemsPerPage : self.bizagiConfigProperty;\n      if (defaultValue) {\n        initValueCombo = self._findValue(params.comboDataSource.combo, defaultValue);\n      }\n    }\n    return initValueCombo;\n  },\n\n  /**\r\n      * Agrega la interaccin al comboBox y define los listeners, retorna el deferred\r\n      * @param {*} params combo, content, comboWrapper, onChange\r\n      */\n  renderNumberRowsCombo: function renderNumberRowsCombo(params) {\n    var self = this;\n    var deferred = $.Deferred();\n    params.comboWrapper.empty();\n    var initValueCombo = self.initialValueCombo({\n      comboDataSource: params.combo,\n      getRowValue: params.getRowValue });\n\n    var lastValue = initValueCombo.id;\n    params.comboWrapper.uicombo({\n      isEditable: false,\n      data: params.combo,\n      itemValue: function itemValue(obj) {\n        return obj.id;\n      },\n      itemText: function itemText(obj) {\n        return obj.name;\n      },\n      onComplete: function onComplete() {\n        deferred.resolve();\n      },\n      onChange: function onChange(obj) {\n        var value = obj.ui.data('value');\n        if (value != lastValue) {\n          lastValue = value;\n          params.setRowValue(value);\n          params.onChange();\n        }\n      },\n      initValue: initValueCombo });\n\n    return deferred;\n  } });"]}