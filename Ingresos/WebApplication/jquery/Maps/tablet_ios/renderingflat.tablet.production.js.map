{"version":3,"sources":["jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi/js/bizagi.util.js","jquery/common/bizagi.grid/js/tablet/bizagi.grid.tablet.js","jquery/renderingflat/js/common/bizagi.rendering.util.js","jquery/common/jquery.formatCurrency/jquery.formatCurrency.js","jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.search.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.extendedText.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.date.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.combo.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.grid.offline.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.search.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.ecm.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.searchList.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.combo.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/rendering/js/plugins/common/jquery.mask.js","jquery/rendering/js/plugins/common/jquery.numeric.js","jquery/common/base/js/lib/mobile/jquery.timeago.js","jquery/common/base/js/lib/mobile/jquery.tabs.js","jquery/common/base/js/lib/mobile/jquery.helptext.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/renderingflat/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.container.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.render.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.section.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/container/bizagi.rendering.nestedForm.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.form.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.grid.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.upload.js","jquery/renderingflat/js/tablet/container/slide/bizagi.rendering.tablet.slide.startForm.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.form.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.panel.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.tab.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.tabItem.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.horizontal.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.accordion.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.accordionItem.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.group.js","jquery/renderingflat/js/tablet/container/bizagi.rendering.tablet.searchForm.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.polymorphicLauncher.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.actionLauncher.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.entityTemplate.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.text.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.label.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.number.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.numberScientificNotation.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.yesno.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.check.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.upload.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.upload.offline.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.grid.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.letter.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.button.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.fileprint.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.link.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.checkList.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.activityCheckList.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.image.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.link.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.label.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.text.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.dateTime.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.number.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.money.js","jquery/renderingflat/js/tablet/render/layout/bizagi.rendering.tablet.layout.upload.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.formLink.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.hidden.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.money.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.radio.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.cascadingCombo.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.list.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.multiSelect.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.association.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.userfield.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.image.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.image.native.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.document.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.rangeDate.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.rangeMoney.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.rangeNumber.js","jquery/renderingflat/js/tablet/render/bizagi.rendering.tablet.geolocation.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.column.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.document.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.date.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.text.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.number.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.numberScientificNotation.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.image.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.upload.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.link.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.uploadecm.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.button.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.radio.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.list.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.search.js","jquery/renderingflat/js/tablet/render/column/bizagi.rendering.tablet.columns.exclusiveCheck.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/renderingflat/js/tablet/bizagi.rendering.tablet.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","widget","options","id","columns","sortBy","sortType","showSummary","collapse","collapseState","data","indexedData","maxColumns","buttonsPst","title","tableCssClass","headerStyles","floatingHeader","hasExclusiveCheck","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","actions","add","edit","remove","details","allowMore","enableXlsExport","enablePdfExport","mode","_init","self","this","element","page","changes","totalRows","totalPages","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","each","i","key","label","name","tooltip","index","split","addClass","attr","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","append","fasttmpl","setTimeout","endLoading","clearTimeout","empty","setData","refresh","getData","rows","j","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","is","children","find","html","drawSummaryCell","replaceWith","onCellReady","changeCellValue","value","deleteCellExclusiveValues","orientation","gridRtl","isDesign","drawTable","appendTo","postRender","attachPaginator","attachHandlers","$tableContainer","$table","offset","parseInt","css","replace","stickyTableHeaders","fixedOffset","zIndex","cacheHeaderHeight","bind","trigger","length","hide","_getButton","show","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","columnAlign","isSortable","xpath","initialSortBy","sortActive","controlType","bizagi","util","getColumnType","type","isHorizontalRadio","horizontal","extend","isKey","sortOrder","columnCssClass","headerLabelStyles","flexAlign","mapAlignClassName","drawRow","rowData","isNewRow","newRow","rnd","Math","floor","random","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","hidden","summarizeBy","result","onDrawCell","calculateSummary","undefined","done","state","resolveResult","messageValidation","promise","drawGroupHeader","drawFooter","pages","total","push","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","when","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","getCurrentPage","isValid","sortAttribute","indexOf","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","map","max","min","columnValue","Array","processAction","action","params","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","replaceFirstWithoutPatterns","sortColumnIndex","callback","call","component","foundComponent","button","jQuery","ui","bizagi_grid","_super","isOfflineForm","parseBoolean","pageNumber","totalizer","isiOSDevice","_resizeListener","on","evt","$context","target","parents","hasClass","onRemoveNewRow","closest","stopPropagation","_addColumnActions","totalData","apply","arguments","_showRowButtons","_hideRowButtons","pagination","renderPages","subType","window","document","tr","removeClass","floatingButtons","getNewRowKeys","onSaveAddedRows","onCancelEdition","isNewRecord","addInlineRow","createAddRowData","ceil","inlineAdd","savedRows","detach","keys","newRowKeys","hideHeaderButtons","items","localization","getResource","fn","e","overflowMenu","cancelNewRow","newRows","RegExp","randomNumber","prevWidth","tableComp","intersectionObserver","IntersectionObserver","args","forEach","entry","isIntersecting","_fixHorizontalScroll","off","width","POLL_INTERVAL","observe","get","webkitOverflowScrolling","overflow-x","context","smartphone","tablet","DEVICES","printf","msg","arg","slice","a","val","shift","charCodeAt","round","String","bizagiQueue","async","sync","queue","callbacks","addParallel","execute","starter","Deferred","queueLength","pipe","deferred","resolve","fail","reject","deviceEnum","callInside","fx","tagName","toLowerCase","contentWindow","browser","msie","execScript","toString","webkit","mozilla","eval","callInsidePopup","ready","CSSStyleDeclaration","getPropertyValue","getAttribute","setProperty","styleName","priority","setAttribute","rule","escape","cssText","removeProperty","removeAttribute","getPropertyPriority","test","text","style","nl2br","br2nl","controlValueIsChanged","control","properties","getValue","compareValue","originalValue","forceCollectData","includes","Date","getTime","getMaxZindex","elm","maxZindex","zindex","equalizeHeights","selector","heights","outerHeight","autoSave","deferredSave","detectDevice","_data","anonymizedUserInformation","username","email","domain","picture","isAnonymized","datepickerResource","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","liveProcessesEvents","newLiveProcess","createEvent","initEvent","routeEvents","route","saveEvent","lastWidget","nextWidget","liveSave","widgetName","deferredLiveSave","indeX","location","href","workportal","widgets","BIZAGI_WORKPORTAL_WIDGET_PROFLY","saveLivePromise","dispatchEvent","md5","message","CryptoJS","s","p","m","l","lib","n","r","Base","b","h","mixIn","hasOwnProperty","init","$super","create","clone","q","WordArray","words","sigBytes","t","stringify","concat","clamp","g","v","enc","Hex","k","join","parse","substr","Latin1","fromCharCode","u","Utf8","decodeURIComponent","Error","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_nDataBytes","_append","_process","blockSize","_minBufferSize","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","abs","sin","MD5","_hash","w","x","y","z","A","B","C","D","c","d","f","HmacMD5","multiReplace","mapDataToReplace","reg","replaceAll","pcFrom","pcTo","replaceAllGlobalRegExp","temp","re","capitalize","charAt","toUpperCase","startsWith","str","getInitials","initials","sign","isNaN","JSON","encode","measureString","string","fontSize","trim","endsWith","suffix","isIE7","isIE","documentMode","isIE8","isIE9","isIE10","isIE11","navigator","userAgent","match","isIE11OrLower","isIE10OrLower","isEdge","appName","objectValues","array","Object","itm","values","getIEVersion","sAgent","indexMSIE","version","substring","isChrome","vendor","isFirefox","minVersion","ua","M","tem","exec","appVersion","getBrowser","bw","emptyNavigatorInfo","info","language","setIphoneXOverrides","isNativePluginSupported","bizagiapp","isIphoneX","isString","isObject","isArray","isNull","isBoolean","getInternetExplorerVersion","isNumeric","parseFloat","isFinite","isGUID","mustImplement","notImplementedMethod","console","log","exe","encodeXpath","isEmpty","isEmptyObject","isEmptyCombo","object","property","other","decodeURI","infinityControl","finishDecoded","decodedValue","hasNonVisibleChars","ch","percent2Number","isObjectEmpty","isMapEmpty","replaceSelector","container","elementToReplace","unwrap","hasScroll","el","direction","identicalObjects","obj1","obj2","countProps","count","isScrolledIntoView","elem","layout","scrollTop","elemTop","top","height","centerElementIntoScroll","actualScroll","elementTop","elementHeight","newTop","encodeHtml","decodeHtmlEntities","getHashParams","hash","loadFile","defer","url","src","loader","then","initWebpart","webpart","device","initialized","initializing","loadingDeferred","getQueryString","pairs","pos","argname","extendQueryString","additionalParams","plainUrl","existingParams","newParams","param","getStackTrace","callstack","isCallstackPopulated","dont","exist","stack","len","lines","opera","currentFunction","callee","caller","fname","highLightElement","autoScrollBottom","elScrollHeight","scrollHeight","autoScrollInterval","autoScroll","itemScroll","limitTop","limitBottom","idInterval","outSide","clearInterval","mousemove","event","pageY","autoScrollTopInterval","autoScrollBottomInterval","classCSS","setInterval","valueMaxScrollBottom","innerHeight","removeAutoScroll","unbind","getMaxZIndex","showPopup","callbackFn","left","newWindow","open","BAPopupWindow","BAPopupCallback","BACloseWindow","controls","submitForm","close","showQuirksModePopup","quirksModePage","BIZAGI_PATH_TO_BASE","BAQuirksPopupWindow","windowParams","popupWindow","quirksOnLoad","loadedBody","iframe","afterLoad","userParams","callbackParams","loadingFunction","body","createPopup","popupName","onClose","popupTitle","handleClose","overlay","popup","closeButton","popupContent","additionalClass","center","closeHandler","click","fullPopup","content","createOkCancelPopup","onOk","onCancel","buttonsContainer","buttonOk","buttonCancel","okHandler","cancelHandler","ok","cancel","dialog","modal","closeQuirksModePopup","quirksPopup","getStyle","pathName","getFontFace","getAllChildrens","matchStyles","stringCss","awesomeBrowser","file","styleSheets","rules","cssRules","BIZAGI_ENVIRONMENT","cssTextOriginal","selectorText","lastLevel","styleSheet","suckBrowser","cookie","expires","days","setDate","getDate","raw","toUTCString","path","secure","decode","setContext","reloadCSS","queryString","_name","_call","_params","_singleton","singleton","_timeOut","timeout","_maxIterations","iterations","_context","_killWhenExitContext","killWhenExitContext","timeOut","maxIterations","itsRunning","timeInit","executeTimeOut","now","actualIterations","ieFunction","pointer","timeOutRunning","isDate","dateField","timeField","resultDate","hasTime","resultTime","arrayDate","unicode2htmlencode","input","htmlHex","getHeadElement","hd","getElementsByTagName","docEl","documentElement","createElement","insertBefore","firstChild","loadStyle","styleText","layoutGuid","node","getElementById","createTextNode","childNodes","nodeValue","replaceChild","appendChild","loadIconStyle","icon","userfieldname","innerHTML","formatDecimalAndMoneyCell","tableData","externalMoneyFormat","moneyFormat","decimalFormat","externalDecimalFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","roundToDecimalPlace","decimalDigits","symbol","colorize","groupDigits","negativeFormat","positiveFormat","columnTitle","fields","formatMoney","numberValue","formatDecimal","override","removeTrailingZeros","positive","BIZAGI_DEFAULT_CURRENCY_INFO","formatBoolean","formatInvariantBoolean","htmlContent","not","$element","format","formatCurrency","formatMonetaryCells","tmpResult","intSection","decimalSection","decimalResult","isNegative","decimalDigitPosition","fixDecimalDigits","getOnlyNumbersByString","stringValue","toFixed","formatInvariantMoney","defaultFormat","allowDecimals","formatInvariantNumber","numberFormat","thousands","containsLetter","NaN","formatNumber","percentage","formatInvariantDate","dateTimeFormat","isValidDate","getFormatDate","formatDate","dateFormatter","formatDateFromInvariantStringDate","stringInvariantDate","dateValue","defaultFormatDate","H","getHours","getMinutes","getSeconds","ms","getMilliseconds","hideTimeWhenHourMinutesSecondsAreZero","formatValueByDataType","dataType","replaceLineBreak","formatMonetaryCell","formatDecimalCell","parseDate","valueOf","LZ","getDateFromFormat","getRelativeTime","date","onlyUnitsTime","timeZone","moment","tz","currentUser","timeZoneName","time","kendo","diff","timeDiff","getTimeDiffDescription","unit","timeDivisor","unitAmount","resourceAgo","compareDates","date1","dateformat1","date2","dateformat2","d1","d2","getDifferenceBetweenDates","i18n","token","i_format","getFullYear","getMonth","E","getDay","isValidResource","months","i_val","year","getYear","month","hh","mm","ss","ampm","_getInt","month_name","day_name","ff","_isInteger","_val","minlength","maxlength","_token","preferEuro","generalFormats","monthFirst","dateFirst","checkList","analyzeTimeFormat","timeFormat","returnObj","show24Hours","showSeconds","separator","lastToken","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatInvariant","getDateFromISO","ISO_FORMAT","formatISO","formatISO8601","dateObject","restartTimeToMidnight","isFormatISO8601","stringDate","sleep","delay","start","getDateFormatByDatePickerJqueryUI","sleepUntil","def","internalSleepUntil","sleepFor","browserSupportLocalStorage","setItemLocalStorage","localStorage","setItem","getItemLocalStorage","getItem","removeItemLocalStorage","removeItem","clearLocalStorage","clear","bizagiConfig","showConsoleLog","stopLoading","elementToapply","isEventSupported","eventName","isSupported","needsFallback","circularDependencies","Function","list","lastNodeAdded","addNode","OBJ","foundObjChildNode","_search","_addNode","nodeObj","timeStamp","addChild","resolved","seen","_getFirstNodeWithChilds","_resolve","_resetList","childs","hasObject","error","dependencyFrom","dependencyFromObj","dependencyTo","dependencyToObj","standardError","status","responseText","makeErrorMessage","multiactionError","toSearch","collection","messageTmpl","cssExtended","instance","cssToAdd","cssExtendedApplyChanges","option","$this","attrToAdd","tmpStyle","arrProperties","resultProperties","cssProperty","canvas","parent","sortJSON","way","sort","shortNumber","newNumber","lenghtNumber","escapeHtml","div","formatMonetaryValue","formatDecimalValue","formatDateValue","showNotification","div_sync","fadeIn","stop","fadeOut","isModeOnline","dispose","arrayEach","getStandardNotation","tmp","decimalNumber","exponentialNumber","scientificNotationFormat","sdLimit","expMinLimit","expMaxLimit","sNregex","sNFormat","exp","prefix","originalPointIndex","tempParts","significantDigits","intPart","from","to","significantFlag","firstDigit","restDigits","stripslashes","isHTMLValidText","resetData","sessionStorage","isAuthenticate","changeData","isMobileDevice","isNativeMobileDevice","isTabletDevice","isAndroidTabletDevice","isiOSTabletDevice","isSmartphoneDevice","isAndroidSmartphoneDevice","isiOSSmartphoneDevice","formContainer","getFormContainer","formParams","getParams","detectAndroidVersion","indexAndroid","androidVersion","getPathUrl","solvedUrl","locationParts","pathname","basePath","protocol","host","pathToBaseBackwards","getAndroidVersion","mobileImagePath","image","dataImage","photoSplit","resource","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","Blob","stringToByteArray","hasOfflineFormsEnabled","BIZAGI_ENABLE_OFFLINE_FORMS","isFlatDesignEnabled","BIZAGI_ENABLE_FLAT","isMobileGridEnabled","BIZAGI_ENABLE_MOBILE_GRID","isNativeHeaderEnabled","NATIVE_HEADER_ENABLE","isQuickSearchEnabled","BIZAGI_ENABLE_QUICK_SEARCH","isOAuth2Enabled","BIZAGI_AUTH_TYPE","getNativeComponent","BIZAGI_NATIVE_COMPONENT","isVersionSupported","supported","BIZAGI_SERVER_VERSION","isCordovaSupported","cordova","isTabletNativeSupported","isSmartphoneNativeSupported","plugins","Keyboard","hideKeyboardAccessoryBar","detectRealDevice","settedDevice","BIZAGI_DEFAULT_DEVICE","isAndroid","isAndroidDevice","getChannelType","BIZAGI_SERVER_CHANNEL","channel","isDataUrl","getDataUrl","currentUrl","tempUrl","processFailMessage","getErrorFormatted","code","statusText","errorCode","errorType","tmp_block_header","disableWorkPortalMenu","blockHeight","prependTo","position","background","opacity","z-index","enableWorkPortalMenu","enableMenuSection","idMenu","controllers","menu","setActiveSection","getURLWithASlashAtTheEnd","downloadFile","isCompleteUrl","showModalOnFail","_defer","_showModalOnFail","_urlDownload","applicationUrl","_iframeExists","_onCantDownload","that","defaultMessage","tryCatch","contentDocument","isMaintenanceWindow","jsonResponse","showModal","maintenanceWindows","modalError","_reject","onload","downloadFileByPOST","inputValues","formPOST","contents","showErrorAlertDialog","ajax","submit","executeActionRoutingFromWorkportal","idCase","idWorkItem","publish","BIZAGI_WORKPORTAL_ACTION_ROUTING","getMessageFromNetworkState","sanitizeHTML","sanified","DOMPurify","sanitize","arrayUnique","debounce","func","wait","immediate","later","callNow","debounce2","fire","isNativeImageEditorSupported","enableImageEditor","errorMessage","validateUrlWellFormed","urlWithProtocol","nodeWithUrl","cleanNodeWithUrl","IN_PLACE","urlWithoutSpaces","encodeHtmlText","valueToDisplay","decodedDisplayValue","encodeString","setCaretPosition","ctrl","setSelectionRange","focus","createTextRange","range","moveEnd","moveStart","select","getCaretPosition","oField","iCaretPos","selection","oSel","createRange","selectionStart","escapeRegex","getFeatureObject","arr","featureObjectCache","features","getConfigFeatures","pivot","getFeatureObjectIte","bizagiConfiguration","BIZAGI_MOBILE_FEATURES","resetConfigFeatures","isFailResponse","formatItem","performTermMatches","strValue","term","withoutFormat","highlightMatches","regEx","getDesktopResolution","resolution","devicePixelRatio","screenWidth","screen","screenHeight","deviceXDPI","logicalXDPI","getDeviceCode","BIZAGI_DEVICE_MARKET_NAME","normalizeType","normalizeQueryType","hideOrShowXToCloseDialog","isEnableFeature","feature","isHtml","possibleHtml","_try","_catch","listFunctions","_listFunctions","next","end","variable","reduce","newVar","prop","getComputedStyle","scroll","overflow","scrollerParent","HTMLElement","SVGElement","ps","parentNode","scrollingElement","startkendo","kendoMobileApplication","mobile","Application","skin","browserHistory","progress","started","bizagiNavigate","navigate","isMashupContext","BIZAGI_MASHUP_CONTEXT","isSharepointContext","BIZAGI_SHAREPOINT_CONTEXT","isWebpartContext","isWebpart","startTimeline","showTimeLine","startGraphicquery","showGraphicQuery","startSelectUser","showSelectUser","userId","userName","guid","isEmptyValue","initializeReferrerParams","referrerParams","getLPQueriesParameters","sidebarData","getLPQueriesSelectedItemFromTree","selectedTreeItem","setLPQueriesParameters","parametersSidebar","tree","cleanLPQueriesParameters","setLPQueriesReferrer","referrer","isConnected","connection","Connection","NONE","onLine","isRenderingUrlAllowed","request","endPoint","whiteList","pattern","applyEyeFunction","setShowIcon","after","addEvent","setHideIcon","direct","className","ev","accessibilityEnter","cb","extraEvent","preventDefault","which","recreateNativeButtons","navigation","setNavigationButtons","isOverrideFeatureEnabled","featureName","createDynamicClass","nameClass","renderParams","dynamicFunction","languages","es","es-ES","es-AR","es-BO","es-Cl","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PR","es-PE","es-US","es-UY","es-VE","en","en-AU","en-BZ","en-CA","en-029","en-IN","en-IE","en-JM","en-MY","en-NZ","en-PH","en-SG","en-ZA","en-TT","en-GB","en-US","en-ZW","de","de-AT","de-DE","de-LI","de-LU","de-CH","fr","fr-BE","fr-CA","fr-LU","fr-MC","fr-CH","fr-FR","it","it-IT","it-CH","ja","ja-JA","ja-JP","nl","nl-NL","nl-BE","pt","pt-BR","pt-PT","ru","ru-RU","cs","cs-CZ","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","zh","zh-HK","zh-MO","zh-CN","zh-Hans","zh-SG","zh-TW","zh-Hant","getNormalizedDate","fullFormat","dateTime","setMilliseconds","isFeatureEnabled","getLastProcessInboxKey","lastProcessInboxKey","getUserHash","lastProcessInboxInit","getLastProcessInboxCreate","processInfo","createLastProcessInboxProcess","sortInfo","createLastProcessInboxSort","filterInfo","createLastProcessInboxFilter","processColumnsInfo","createLastProcessInboxColumns","inputTrayInfo","createLastProcessInboxInputTray","processInfoName","idWorkflow","sortDirection","sortFieldName","filterValue","filterFieldName","filterType","processColumns","getLastProcessInbox","lastProcessInbox","setLastProcessInbox","smartInboxId","setLastProcessInboxProcessColumns","getLiveFiltersFromStorage","filters","modelStorage","serialize","setLiveFiltersToStorage","assign","setLastProcessInboxLiveFilter","liveFilters","setLastProcessInboxSort","setLastProcessInboxFilter","setLastProcessInboxInputTray","inputTray","getLastProcessInboxProcessInfo","allProcesses","getLastProcessInboxSmartInboxId","getLastProcessInboxSort","getLastProcessInboxFilter","getLastProcessInboxLiveFilter","getLastProcessInboxProcessColumns","getLastProcessInboxInputTray","removeLastProcessInbox","removeLastProcessInboxSort","removeLastProcessLiveFilters","getSyncTimeStampKey","syncTimeStampKey","storeSyncTimeStamp","currentDate","getSyncTimeStamp","syncTimeStamp","BIZAGI_USER","BIZAGI_PROXY_PREFIX","BIZAGI_DOMAIN","hashCode","defaultWidget","newValueStr","_preferService","services","preferences","_widgets","_mobile","set","newVal","_desktop","_newValueView","changePreference","INBOX_VIEW_TYPE","_actualValue","getPreference","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","_device","isMobile","getMobileFeaturesKey","userKey","mobileFeaturesKey","getMobileFeatures","stringFeatures","storeMobileFeatures","mobileFeatures","storedFeatures","updatedFeatures","getCardviewMaxColumsAllowed","maxColumnsEnabled","enabled","blobTob64","blob","onlyData","reader","FileReader","readAsDataURL","onloadend","base64data","blobToText","readAsText","binaryData","newUrl","deepExtend","out","originalType","align","rigth","justify","default","isMobileErrorTracesEnabled","mobileErrorTracesEnabled","mobileErrorTraces","isMobileSmartInboxEnabled","mobileSmartInboxEnabled","mobileSmartInbox","isMobileLiveFiltersEnabled","mobileLiveFiltersEnabled","mobileLiveFilters","any","grep","first","groupBy","item","getRegionOrCulture","region","regionInfo","regions","culture","generateRegex","settings","destination","defaults","global","eventOnDecimalsEntered","regex","num","multiCeroPattern","search","numParts","isPositive","hasDecimals","decimals","originalDecimals","money","$destination","toNumber","method","asNumber","parseType","validateParseType","scenarioInfo","getFileScenario","category","scenario","BIZAGI_SMARTPHONE_PATH","_defineProperty","defineProperty","enumerable","configurable","writable","b64EncodeUnicode","btoa","p1","pasteEventName","caret","begin","mask","placeholder","_prepareBuffer","_bindEvents","_checkVal","allowPartials","destroy","removeData","res","buffer","tests","formatted","_setData","eventsBound","_escapeMask","defs","definitions","partialPosition","firstNonMaskPos","maskEscaped","ignore","focusText","_writeBuffer","change","keyCode","SHIFT","SPACE","BACKSPACE","DELETE","_clearBuffer","_shiftL","ESCAPE","charCode","ctrlKey","altKey","metaKey","_seekNext","_shiftR","completed","originalPos","allow","lastMatch","literals","replacements","getter","#","*","selectionEnd","duplicate","numeric","decimal","keypress","nodeName","shiftKey","blur","numericSN","timeago","timestamp","$t","refreshMillis","allowFuture","localeTitle","cutoff","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","seconds","minute","minutes","hour","hours","day","years","wordSeparator","numbers","inWords","datetime","distance","distanceMillis","$l","substitute","stringOrFunction","isFunction","iso8601","isTime","bztabs","activeTab","tabNumber","activate","popUp","beforeActivate","tabCountPopup","tabHeader","tabCountReal","widthRow","textContent","prepend","tabCurrent","eq","widthTabSelected","updateTabSize","origin","changeTab","dataRef","currentTarget","tabChildren","toggle","tempTabs","moveAtTheEnd","reorderTabs","domIncluded","headerWidth","innerWidth","totalWidth","outerWidth","pop","last","helpText","dir","useWithBlock","$html","render","endPoints","getEndPoints","renderHandlerPathRest","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","getXSRFToken","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","Class","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","desktop","deviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","serviceType","avoidLoader","response","stopAndLog","form","transformGridDataToReadOnly","allowAdd","allowDelete","allowEdit","allowGrouping","allowSearch","getSearchFormData","idSearchForm","processDataValues","o","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","debug","beforeSend","xhr","renderingService","newName","getPropertyData","extra","sessionId","guidentity","pxpath","prows","ppage","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","getSearchData","getCollapseData","getGridData","order","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","fileUrl","processData","binary_file","readFileAsJSON","getResponseHeader","media","byteArrayToBlob","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","uploadECMFile","fileUpload","fileName","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrintUrl","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","refreshControl","refreshGridCell","typeRender","executeRule","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","getCaseNumber","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportUrl","exportType","sendEmail","subject","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","getConfiguration","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","getParents","fillTree","getChildren","child","displayName","hasConstructor","guidObject","guidConstructor","getEntityImage64","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","disabledRequests","replicateServiceMethods","getService","proxyMethod","originalPrepare","makeCircularDependenciesError","h_action","detectCircularDependencies","batchTimeout","tag","singleAction","resolveDependencies","rejectDeferreds","responses","finalResponse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","getColumn","renderType","isRelatedEntityRender","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","evalGridXpath","evalXpath","gridColumn","cellValue","getCellCurrentValue","display","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","mapValue","isFileUploaded","isValidEmail","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","columnToEval","onDeletedGridRow","rowDeleted","idMatches","showContainerNotFoundError","getCurrentDate","includeTime","invariantDate","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controller","validations","enableDebug","initializeValidations","validationBox","bizagi_notifications","expand","triggerGlobalHandler","itemIcon","minimized","clearEnabled","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showValidationMessage","showAlertMessage","showInfoMessage","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","retype","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","showValidationMessageById","globalDependencies","initialCallFunctions","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","elseCommands","isClientAction","dontExecute","hashes","executeOnlyClientActions","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","gridColumns","searchGridColumns","asyncFn","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","getContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","changeFormButtonVisibility","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","triggerClick","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","refreshContainer","internalQueue","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","setAsActiveContainer","findIndex","getNavigation","isFloatingButtonsEnabled","changeFloatingButtonVisibility","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getElementType","resize","size","effect","eventType","one","getRenderedElement","getMode","getFormType","isReadyToSave","getCustomHandlers","timeOutDispose","disposeTime","isDisposed","validationController","beforeToRefresh","afterToRefresh","getResourceByKey","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","processDuplicateRender","registerRender","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceChildrenTag","replaceChildrenHtml","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","placeHolderConfig","forceApply","Placeholders","enable","childrenElements","childElement","postRenderElement","renderChildrenHtml","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","triggerChildrenActions","restoreChildrenVisualChanges","restoreAppearanceAfterRefresh","restoreContainerAppearance","always","refreshDesignContainer","triggerRenderChange","registerActions","actionController","unregisterRender","getChildById","restoreElementAppearance","childrenVisualChanges","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","layoutType","renderTemplateName","renderTemplate","isFullRender","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","replaceControlHtml","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","hasValue","isQueryForm","filter","messageData","isQuery","columnEditable","bold","changeFontBold","italic","changeFontItalic","underline","changeFontUnderline","strikethru","changeFontStrikethru","changeFontSize","setValue","triggerEvents","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","getLabel","getControlFiller","validationMessage","readOnlyValue","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","baseValue","defaultValue","isStartForm","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","newFontSize","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","readyDeferred","onCellChange","labelElement","controlElement","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","updateOriginalValue","getRenderId","queryValue","searchType","typeSearch","rangeQuery","newParameter","orderType","displayXpath","force","displayOnly","defaultControl","innerControl","timeOutEffect","submitOnChangexpathContext","addSubmitAction","bRefreshForm","notCollect","internalSubmitOnChange","getCacheIdCase","idCaseObject","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","getMainForm","currentForm","fromRender","setInterceptionObserver","pluginInitialized","disconnect","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","configureHelpText","containerHelp","getContainerHelpText","getRTLDisplayType","containerHelpText","bFirstElement","prev","renderedElement","toggleClass","getFormParams","ele","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","displayAsReadOnly","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","caption","ordinal","nextWithoutValidations","back","createnewcase","validate","save","quickAction","routing","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","helptext","queryForm","globalForm","allowQuickActions","complexGatewayContainer","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","checkboxLabel","transitionId","strStyle","getContextType","getEndPointAction","formtype","getButtons","stopImmediatePropagation","buttonProperties","btn","routingDisabled","propagateExternalEvents","timeOutButton","processDefer","contains","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","customHandler","validateForm","saveForm","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","failHandler","partialSubmitFormOffline","animate","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res2","messageType","addValidationMessage","addErrorMessage","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","getOffset","min-height","min-width","getFocusedElement","setFocusedElement","errorJson","setSize","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","tryToExecuteFunction","cancelPreviousRequest","focusIdentifier","IdScope","objMessage","strMessage","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","configureNetworkHandlers","handleConnectionChange","handleOfflineSyncEvent","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","warn","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","formType","contextEvent","processTemplate","processedTemplate","g1","g2","layoutCollection","getCss","layoutguid","getContextEvent","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","inlineAddRecords","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","getRemoteData","dataUrl","validateControls","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","displayAs","sectionContent","renderSectionContent","getBreadcrumb","unshift","getParentDisplayName","getSectionParent","originalParams","getSectionOrientationRTL","panel","renderResult","performSearch","searchParams","refreshResults","collectSearchValues","maxRows","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","getCriteriaOperation","criteriaData","parseAdditionalProperties","tabItems","counter","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","readOnly","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","getPropertiesActionLaucher","actionsLaucher","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","bCurrentDataFound","emptyFound","dataValue","comboData","isExtraItem","escapeValue","validateValue","translated","findDataValueById","showLetters","randomId","getDefaultAllowDecimals","numDecimals","setGroupDigits","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","numericInput","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","messageToShow","isValidRenderMessage","executeFormatCurrencyPlugin","tmpData","clipboardData","originalEvent","totalVal","keydown","keyUnicode","formatTimeout","floatPart","currentPosition","keyup","character","regExp","validMessage","getDefaultGroupDigits","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","timeOutFocus","ud","datePickerRegional","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","uppercaseDatePlaceholder","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","isExclusive","columnRender","singleInstance","totalize","reverse","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","addLabel","editLabel","deleteLabel","exportOptionsLabel","detailLabel","alreadySaved","overrideGetRemoteData","cellOverrides","changeOrderData","rowKey","reverseDataRows","removeRemainingColumns","numColumns","remainingColumns","getGridTemplate","applyTemplate","columnInitializers","initialize","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","saveInlineAddedRows","saveRows","getDepthData","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","showDesignValidations","getFormattedValue","getDesignModeValue","submitOnChangexpathContextRow","runButtonAction","error_obj","filesCount","checkListGroup","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","err","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","isChecked","idRight","checked","removeElement","rightId","removeValue","addElement","leftXpath","rightXpath","leftFactName","rightFactName","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","lockUploadItem","unlockUploadItem","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","getTemplateItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","generateLink","isPropagationStopped","documentTemplateGenerate","showDocumentPreview","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","configured","itemSelected","listSize","normalizeData","getDataValue","idToRemove","markAsChecked","found","canAddMoreItems","$tagsContainer","toArray","acc","getElementWidth","MORE_OPTION_WIDTH","styles","filterList","query","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","getFileDependencies","fileDependencies","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","BASE_IMAGE","isUserPreference","initializeWidthAndHeight","isAutoWidth","isAutoHeight","binaryValue","isValidField","compatibilityVersion","isVersion2OrSuperior","idUser","forceBase64","base64","buildItemUrlOffline","loadImageFromForm","buildOfflineImageId","getOfflineImage","db","AttachmentType","saveImageOffline","getFileService","resolveBlobFromPath","blobImage","operationType","saveOfflineImage","buildFullItemUrl","fileService","decoratedClass","showColumn","readonly","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","setSurrogateKey","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","formattedDate","compositeValue","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","getRenderProperties","typeRangeControl","renderProperties","moneyMin","moneyMax","numberMin","numberMax","slideFormParams","slideContainer","createRenderContainer","configureViewHandlers","goBack","renderSlideForm","formClass","onSave","containerParams","view_container","delegate","errorTemplate","getCommonTemplate","error_message","kendoTmpls","slideFormDeferred","allowGetOriginalFormValues","formValues","showSaveButton","slideForm","buttonContainer","refreshParams","_renderButtons","transformData","allowEdition","transformActions","transformValidations","mapRenderType","additionallabel","gridActions","bDependencyFound","newAction","transformConditions","transformCommands","gridValidations","newValidation","refreshIndex","dfd","slideOptions","renderUploadFile","virtualForm","slideParams","slideDeferred","extraButtons","renderSearchDialog","getSearchContainerData","currentSearchForm","renderAddForm","allowNew","searchResultContainer","searchFormParams","slideBoxDeferred","handleSearchFormZindex","containerSearchCriteria","addContainer","addFormParams","indicator","saveDataAddForm","currentAddForm","dataHasXpath","mapping","setDisplayValueToControl","renderControlSearchForm","addForm","searchFormToLoad","otherElements","searchForm","isDefault","searchFormData","modalViewDisplayed","saveButtonLabel","warnings","errors","configureMediaQueryHandlers","modalViewDidAppear","modalViewDidDisappear","mediaquery","matchMedia","handleOrientationChange","addListener","warningContainer","errorContainer","ekey","autoSaveEvents","newData","saveBox","hasChanges","showSaveBox","nonSupportedMethods","validateFeatureSupport","getPane","pane","handler","saveButton","nextButton","getViewContainer","postRenderEdit","formsRenderVersion","popupResponse","getResponseValues","getResponseValuesParams","dontClose","repaintComplexGateway","isComplex","workItems","taskType","currentPopup","BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY","sourceElement","insertAfter","activeScroll","closed","addWarning","addError","notifier","class_name","sticky","kendoTmpl","VISIBLE_TABS","suscribeMethods","checkPlusVisibility","tabItem","tabReadyDeferred","tabActiveDeferred","headerShow","headerHide","accordion","accordionItem","group","expanded","subscribeOnTouch","isOpen","resultsGrid","searchCriteria","results","criteriaContainer","resultsContainer","polymorphicLauncher","configureQueueVisibility","totalActions","lessActions","templateArguments","treeActionsList","getTreeItems","bindHandlers","level","templateTreeItem","$targetData","onActionClicked","expr","FilterAction","act","executeAction","slide","cancelButtonLabel","pageCache","savedData","editMode","startForm","showConfirmationDialog","actionsToExecuteContainer","removeActionSelector","openActionSelector","$target","actionsToExecuteTitle","actionLauncher","templateData","wrap","actionsContainer","configureTemplateHandlers","multipleSelection","plusBtn","showActions","subscribe","calculateFilters","rewriteContextType","xpathContextWithKey","xpathContextWithoutKey","IdEntity","listOfActions","getMappingAction","extraParams","dataAction","htmlTemplate","extendedText","rowSize","stopAutoAdjustInterval","autoAdjustInterval","autoExtend","autoAdjustExtendedFrame","resolvedValue","hiddenDiv","retypeDouble","numberScientificNotation","inputDisplay","numericIcon","attachFormatSientificNotation","scientificNotationNumber","scientificNotationNumberDisplay","DEFAULT_PROPERTIES","maxYearsToDisplay","initializeDateControl","isValidMinMaxValue","inputControl","controlElements","defaultDateControl","getFormattedDate","minDateControl","maxDateControl","setFullYear","mobiscroll","calendar","lang","BIZAGI_LANGUAGE","inst","timeS","onSet","getVal","is24h","onBeforeShow","onShow","disableScroll","initializer","currentTime","fullDateFormated","setHour","getFullFormatedDate","preprocessDateValue","isClearButton","formatedFullDate","setNewDateValue","fullDate","dateFromFormat","applyDateFormat","initIndexTime","endIndexTime","validateMinAndMaxValue","showMandatoryMessage","isMinValue","vValue","resultValue","formatedDate","yesno","parsedValue","check","initializeCombo","showDisplayValue","parentComboValue","initialValueSet","configureCombo","inputSpan","processComboData","modalViewTemplate","modalView","kendoMobileModalView","useNativeScrolling","configureModalViewHandlers","inputContainer","closeModalViewPromise","setModalViewDisplayValue","selectedElements","_newSelectedElement","$li","actionSave","inputEdition","valueItem","valueObjet","changeCombo","comboValue","getTemplateEditionName","upload","QUALITY_PICTURE","LIMIT","EXTENSIONSIMG","EXTENSIONSFILE","EXTENSIONSVIDEO","EXTENSIONSAUDIO","allow_upload","checkExtensions","validOptions","video","nonSupportedExtension","fileAPISupported","activateUploadNative","activeUploadWebControl","addEventToOpenSlide","executeFormFailHandler","itemAddfile","checkMaxFiles","attachDeleteHandler","uploadTemplate","kendoTemplate","$modalView","ModalView","listOptions","applyPlugin","getBoundingClientRect","coordinates","resolutionUpload","getImageResolutionItems","actionSheet","actionClicked","resolutionButtonHandler","appear","cancelClicked","popover","CameraPopoverOptions","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","popoverOptions","camera","getPicture","extensions","closeModalView","checkMaxSize","getFileDataInfo","checkFileTypes","saveImage","modalResolutionUpload","buttonIndex","onFail","targetWidth","targetHeight","correctOrientation","capture","captureVideo","checkMaxSizeVideo","saveVideo","actionSelected","ResolutionType","ORIGINAL","getImageResolution","transformImageSize","editedImageURL","localUrl","base64Image","errorResponse","isNativeContext","getTemplateEditionMenu","addParams","dataFile","queueID","FileUploadOptions","fileKey","mimeType","uploadKey","getImagePath","uploadFile","onUploadFileCompleted","dataVideo","fullPath","messageError","uploadWrapper","actualFiles","nonSupportedExtensionsArr","uploadfile","itIsMaxNumberFilesReached","checkMaxSizeFile","buildAddFileParams","FormData","atachOpenFileEvent","dataIndex","fileData","fileMimeType","openOfflineFile","getDataUri","fileExtension","uniqueID","onUploadFileCompletedOffline","XMLHttpRequest","responseType","send","resolveLocalFileSystemURL","fileEntry","failReadFile","objectUpload","dataimage","dataUrltoSave","dataMimeType","fileToSave","DataType","objectUri","objectVideo","fileIndex","GRID_PAGE_SIZE","cellMetadata","getRowIndexByKey","initialLoadDone","isPaginatorActive","applyGridPlugin","updateData","pendingActions","buildColumnModel","columnsTotalizers","bizagi_grid_tablet","hasTotalizer","pageRequested","fetchData","sortRequested","cellReady","rowSelected","addRow","editRow","deleteRow","moreRows","showMore","onTotalData","columnModel","columnLabel","dataReady","dataReadyDeferred","loadChanges","idRowLength","columnNumber","alternativePaginator","pageSelected","pageLeftPosition","pagerContentWidth","lastLiElementPosition","pagerMarginAnimate","margin-left","newKeys","saveDeferred","originalEditable","newid","slideView","view","addPage","cleanActionChanges","executeSubmitEditRequest","editInline","editPage","originalrowsPerPage","dataToSend","moreRowsCommon","currentRow","sel","parentPromise","inlineAddPromise","inlineAddDeferred","rowLength","showTotal","columnsModel","operationState","sum","return_value","avg","formatTotalizedResult","showTotals","MAX_ROWS_SUPPORTED","originalRows","isTaskForm","createdOffline","isValidGrid","saveAddedRows","beforeInlineAdd","afterInlineAdd","cancelEdition","removeNewRecords","processChanges","rowsList","sortArray","processRow","collectOfflineTaskData","internalRedersValues","currentChanges","addRowData","isNew","processOldRows","collectChangesWithoutDeleting","collectOfflineStartData","tempRows","col","leng","drawEditableCell","drawReadonlyCell","originalFormat","_value","bRefresh","statusAction","delInfo","errorsMessage","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","SEARCH_MIN_LENGTH","SEARCH_DELAY","MAX_ITEMS","MAX_ITEMS_OFFLINE","searchInput","_simplySuggestOffline","_advanceSearch","_simplySearch","hasMozillaHelpText","applyAutocompletePlugin","showSlideSearch","autoCompleteSearchResults","elemObject","itemautocomplete","processRequest","resp","wrapper","elementUl","searchItem","renderSearchItem","req","suggestions","addToSuggestions","alSuggestions","dataOffline","itemsAttached","current","parseValue","autocomplete","showAddRecordDialog","letter","fileprint","link","isValidValue","encodeURI","getFullyDecodedURI","itemId","onCheckListGroupChange","addButton","newItemName","goalActivity","addEditButton","cancelEditButton","additionalElements","notifyLoadItems","resolvedItems","idActivity","itemsResolved","activityWork","activityFormTitle","activityDescription","prepareNewItem","contentHolder","deleteItem","itemPosition","selectItem","repaintControl","itemSelectedName","itemContent","addSelectedHandlers","addItem","guidItem","checkListHtml","refreshValue","layoutImage","success","urlCreator","URL","webkitURL","imageUrl","createObjectURL","idcase","idworkitem","contextxpath","layoutLink","getContainerRender","proxy","onClickElement","navigateFromRender","reference","referenceType","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getHTMLFiles","formLink","hasentryrule","openLinkRule","openLink","paintFormLink","rollbackForm","dataRuleResp","ex","noAction","hasexitrule","closeExitRule","getFormLinkXpathContext","parentXpathContext","outerHTML","radio","selectedRadio","siblings","comboItem","cascadingCombo","onComboChange","renderEdition","configureListHandlers","modalViewList","multiSelect","base","temporalElements","openModalView","onUnselectElement","onShowSelectedElements","valuesToShow","$listView","showFloatListView","datasource","$tagElements","modalListHandlers","$listContainer","addNewValuesToInput","tempArray","totalValues","elementTemplate","$ChildToAdd","viewMoreTemplate","$viewMore","$floatListContext","checkbox","addTemporalElement","closeFloatView","elementToRemove","$containerControl","$floatList","widthControl","my","at","of","collision","columnData","dataAssociation","addEventControl","showDefaultContainer","defaultHeader","defaultContainer","closeAccordionSection","slideDown","headers","slideUp","contextElement","associateElement","dissociateElement","getLeftName","parentId","itemAdd","itemRemove","ecm","respString","holder","startWaiting","$button","stopWaiting","$inputFile","elementBase","tmpidElement","elementsEvent","lock","unlock","del","elementReference","panelMetadata","btnCancel","btnSave","addEventsEcm","removeEventsEcm","uploadEcmLink","filesLinkElements","itemsUpload","cimage","caudio","cvideo","menuItem","metadata","applyListener","nTimeoutAccordionSection","setMobiscroll","elementsToCheck","isInvalid","metadataelement","tmpElement","oldValue","description","idmetadata","actualValue","idMetadata","metadataValues","valueDate","minDate","valueText","removeListener","captureAudio","mediaFiles","audioUrl","localURL","saveAudio","Filename","dataAudio","enableImage","meta","metadataType","$arrayEcmControls","arrayItems","idfileupload","searchList","initializeList","modalViewTemplates","inputTemplates","configureReadOnly","configureModalView","newElement","showResults","showNoResultsMessage","appendFoundItem","$newElement","lastElement","isModalViewContainer","li","defaultElement","finalValue","basicUserField","defaultUserField","controlName","$addImage","$deleteImage","isNative","showAsyncImage","createModal","imageAdd","adjustSize","imageDelete","baseParams","zoom","img","onPreviewActionBack","originalImage","originalImageWidth","dataUrlToSave","imageTemplate","maxHeight","windowHeightSize","windowWidthSize","listHeight","maxWidth","popupHeight","useCamera","destinationType","DestinationType","FILE_URI","uploadFileCompleted","imageEditorParams","mobileImageEditorParams","openImageEditor","imageMaxSize","imageURL","applyDocumentTemplatesFormat","documentList","previewTooltip","returnType","rangeDate","rangeMoney","rangeNumber","cordinate","updateDisplayValue","onSuccess","coords","onError","originalGetControl","applyColumnStyles","isInlineRow","xpathPath","getImageXpathContext","applyUploadPlugin","nameFile","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","mobileform","formTemplate","usersForm","section","contentPanel","nestedForm","mobilegroup","mobiletext","layoutPlaceholder","layoutBoolean","entityTemplate","userfieldWrapper","getSearchRender","getQueryRender","collectionnavigator","getUser","activityCheckList","columnParams","exclusiveCheck","uploadecm","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","factory","enableMSF","resolvedRemplate","tmplIcons","enableCustomizations","getJavaScript","offline","execution_device","cachedFactory","getRenderFactory","print","getDataService","executionDeferred","deviceFactory","getFactory","unsubscribe","doc","ownerDocument","sendExecutingPostMessageWebparts","process","refreshing","pathProcess","lastWidth","lastHeight","timeoutResize","resizeInPopUpHTML","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","fastEmpty","canvasParent","timeoutTrigger","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","heightButtonContainer","renderBehavior","postMessageSocket","heightCanvas","iframeCommunicator"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This widget will implement a custom grid for bizagi rendering module\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Markup: <div></div>\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Styles:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// TODO: Create templates\n\n(function ($) {\n  $.widget(\"ui.bizagi_grid\", {\n    options: {\n      id: \"no-id\",\n      columns: [],\n      sortBy: \"\",\n      sortType: \"asc\",\n      showSummary: false,\n      collapse: false,\n      collapseState: false,\n      data: {},\n      indexedData: {},\n      maxColumns: 0,\n      buttonsPst: false,\n      title: '',\n      tableCssClass: '', // Style for entire table              \n      headerStyles: '',\n      floatingHeader: false,\n      hasExclusiveCheck: false,\n      template: {\n        grid: \"\",\n        waiting: \"\",\n        table: \"\",\n        emptyTable: \"\",\n        column: \"\",\n        specialColumn: \"\",\n        row: \"\",\n        rowButtons: \"\",\n        cell: \"\",\n        specialCell: \"\",\n        pager: \"\",\n        buttons: \"\",\n        dynamicPager: \"\",\n        summary: \"\",\n        summaryCell: \"\" },\n\n      actions: {\n        add: true,\n        edit: true,\n        remove: true,\n        details: true,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false },\n\n      mode: \"execution\" },\n\n    /*\r\n                           *   Constructor\r\n                           */\n    _init: function _init() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Set object variables\n      self.page = 1;\n      self.changes = {};\n      self.totalRows = 0;\n      self.totalPages = 0;\n      self.data = options.data;\n      self.selectedRow = 0;\n      self.components = {};\n      self.buttons = {};\n      self.asyncCells = {};\n      self.scrollableArea = options.scrollableArea || self;\n\n      // Build column indexes\n      self.columnByIndex = {};\n      self.columnByName = {};\n      self.columnKeyIndex = 0;\n      $.each(options.columns, function (i, column) {\n        // Fix non-present properties\n        column.key = typeof column.key !== \"undefined\" ? column.key : false;\n        column.label = typeof column.label !== \"undefined\" ? column.label : column.name;\n        column.sortType = \"asc\";\n        column.tooltip = typeof column.tooltip !== \"undefined\" ? column.tooltip : \"\";\n\n        // Index the column\n        self.columnByIndex[column.index] = column;\n        self.columnByName[column.name] = column;\n        if (column.key) {\n          self.columnKeyIndex = column.index;\n        }\n      });\n\n      // Set sort options\n      options.sortBy = options.sortBy || self.columnByIndex[0].name;\n      if (self.columnByName[options.sortBy]) {\n        self.columnByName[options.sortBy].sortType = options.sortType;\n      } else {\n        if (self.columnByName[options.sortBy.split(\".\")[0]]) {\n          self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\n        }\n      }\n\n      // Add base classes\n      element.addClass(\"ui-bizagi-grid-wrapper\");\n      element.attr(\"data-bizagi-id\", options.id);\n\n      // Calculate\n      self.calculateKeyIndex();\n\n      //collapse state\n      self.collapseState = options.collapseState;\n\n      // Start waiting signal \n      self.startLoading(false);\n    },\n    /*\r\n       *   Method to start loading for ajax data and update the ui\r\n       */\n    startLoading: function startLoading(bUseTimeout) {\n      var self = this;\n      bUseTimeout = typeof bUseTimeout !== \"undefined\" ? bUseTimeout : true;\n\n      if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Draw the waiting template when the endLoading delays more than 250ms\n      var waitingFn = function waitingFn() {\n        var element = self.element;\n        var options = self.options;\n\n        // Set null to timeout\n        self.waitingTimeout = null;\n\n        element.append($.fasttmpl(options.template.waiting));\n      };\n\n      if (bUseTimeout) {\n        self.waitingTimeout = setTimeout(waitingFn, 250);\n      } else {\n        waitingFn();\n      }\n    },\n\n    /*\r\n       *   Method to remove the loading message\r\n       */\n    endLoading: function endLoading() {\n      var self = this;\n      var element = self.element;\n\n      // Remove waiting timeout\n      if (self.waitingTimeout) {\n        clearTimeout(self.waitingTimeout);\n        self.waitingTimeout = null;\n      }\n\n      // Remove everything\n      element.empty();\n    },\n\n    /*\r\n       *   This method updates the data and refreshes the grid\r\n       */\n    setData: function setData(data) {\n      var self = this;\n\n      // Set internal data\n      self.data = data;\n      self.calculateKeyIndex();\n\n      // Call refresh\n      self.refresh();\n    },\n    /*\r\n       *   This method retrieves the actual data from the grid\r\n       */\n    getData: function getData() {\n      var self = this;\n\n      // Return internal data\n      return self.data;\n    },\n\n    /*\r\n       *   Calculate key index\r\n       */\n    calculateKeyIndex: function calculateKeyIndex() {\n      var self = this;\n      var columns = self.options.columns;\n      var data = self.data;\n\n      indexedData = {};\n\n      if (data.rows) {\n        $.each(data.rows, function (i, row) {\n          var key;\n          var row;\n          $.each(columns, function (j, column) {\n            if (column.key) key = row[j];\n          });\n          indexedData[key] = row;\n        });\n      }\n      self.indexedData = indexedData;\n    },\n\n    /*\r\n       *   This method retrieves the changes made by the user\r\n       */\n    getChanges: function getChanges() {\n    },\n\n    /*\r\n       *   This method refreshes the grid\r\n       */\n    refresh: function refresh() {\n      var self = this;\n\n      // Cleans components\n      self._cleanComponents();\n      self._cleanButtons();\n\n      // Call the draw method\n      self.components = {};\n      self.draw();\n    },\n\n    /*\r\n       *   This method refreshes only the summary\r\n       */\n    refreshSummary: function refreshSummary(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n\n      // Do nothing if the component is drawing or there is no summary\n      if (self.drawing) return;\n      if (!summary) return;\n\n      // Resolve summary\n      if (options.showSummary) {\n\n        if (columnIndex) {\n          // Refresh an specific summary\n          self.refreshSummaryCell(columnIndex);\n\n        } else {\n          // Clean and re-draw summary\n          summary.empty();\n          summary.append(self.drawSummary());\n\n          // Execute post-render\n          self.postRenderSummary(summary);\n        }\n      }\n    },\n\n    /*\r\n       *   Refresh a single summary cell\r\n       */\n    refreshSummaryCell: function refreshSummaryCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n      var getCell = function getCell(summary, columnIndex) {\n        var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n        return $(cells[columnIndex]);\n      };\n      var cell = getCell(summary, columnIndex);\n\n      // Omit index key\n      var column = self.columnByIndex[columnIndex];\n      if (column.key) return; // Omit key column\n\n      // Clean and Execute render\n      var html = self.drawSummaryCell(column);\n      cell.replaceWith(html);\n\n      // Recalculate cell\n      cell = getCell(summary, columnIndex);\n\n      // Execute post-render\n      self.onCellReady(column, \"summary\", cell, false);\n    },\n\n    /*\r\n       *   This method changes a cell value in the grid\r\n       */\n    changeCellValue: function changeCellValue(key, columnIndex, value) {\n      var self = this;\n      if (self.indexedData[key]) {\n        self.indexedData[key][columnIndex] = value;\n      }\n    },\n\n    deleteCellExclusiveValues: function deleteCellExclusiveValues(columnIndex) {\n      var self = this;\n      if (self.indexedData) {\n        $.each(self.indexedData, function (key) {\n          self.indexedData[key][columnIndex] = false;\n        });\n      }\n    },\n\n    /*\r\n       *   This method draws the full grid associated with the data\r\n       */\n    draw: function draw() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Start global drawing flag\n      self.drawing = true;\n\n      // Ends waiting signal\n      self.endLoading();\n\n      if (options.orientation === \"rtl\") {\n\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.gridRtl, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n\n      } else {\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.grid, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n      }\n\n      // Call sub-drawers\n      html = self.drawTable(html);\n      self.grid = $(html).appendTo(element);\n\n      // Post render the grid\n      self.postRender(self.grid);\n\n      if (options.mode !== \"design\") {\n        // Attach paginator desktop\n        self.attachPaginator();\n\n        // Attach handlers\n        self.attachHandlers();\n      }\n\n      if (options.mode === \"execution\" && options.floatingHeader) {\n        var $tableContainer = self._getComponent(\"table\");\n        var $table = $(\"table\", $tableContainer);\n        var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\n\n        $table.stickyTableHeaders({\n          fixedOffset: offset > 0 ? offset - 1 : offset,\n          scrollableArea: self.scrollableArea,\n          zIndex: 1000,\n          cacheHeaderHeight: true });\n\n        $tableContainer.bind(\"scroll\", function () {\n          $table.trigger(\"resize.stickyTableHeaders\");\n        });\n      }\n\n      // Toggle visibility depending from row count\n      if (self.data.rows.length === 0) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"pager\").hide();\n        self._getButton(\"remove\").hide();\n        self._getButton(\"edit\").hide();\n        self._getComponent(\"dynamicPager\").hide();\n        self._getComponent(\"emptyTable\").show();\n\n      } else {\n        self._getComponent(\"table\").show();\n        self._getButton(\"remove\").show();\n        self._getButton(\"edit\").show();\n        self._getComponent(\"emptyTable\").hide();\n\n        if (options.actions.allowMore) {\n          self._getComponent(\"dynamicPager\").show();\n          self._getComponent(\"pager\").hide();\n        } else {\n          self._getComponent(\"pager\").show();\n          self._getComponent(\"dynamicPager\").hide();\n        }\n\n        if (options.actions.edit) {\n          self._getButton(\"edit\").show();\n        }\n\n        if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\n          self._getButton('show-grid-export-options').show();\n        } else {\n          self._getButton('show-grid-export-options').css('display', 'none');\n        }\n\n      }\n\n      // End global drawing flag\n      self.drawing = false;\n    },\n\n    attachPaginator: function attachPaginator() {\n    },\n\n    /*\r\n       *   This method draws the table associated with the data\r\n       */\n    drawTable: function drawTable(html) {\n      var self = this;\n      var options = self.options;\n\n      // Resolve table template\n      var table = $.fasttmpl(options.template.table, {\n        showSummary: options.showSummary,\n        tableCssClass: options.tableCssClass,\n        orientation: options.orientation });\n\n      var emptyTable = $.fasttmpl(options.template.emptyTable);\n\n      // Resolve header\n      table = self._replaceElement(table, \"columns\", self.drawHeader());\n\n      // Resolve body\n      table = self._replaceElement(table, \"rows\", self.drawBody());\n\n      // Resolve summary\n      if (options.showSummary) {\n        table = self._replaceElement(table, \"summary\", self.drawSummary());\n      }\n\n      // Resolve pager\n      html = self._replaceElement(html, \"pager\", self.drawPager());\n\n      // Resolve buttons\n      html = self._replaceElement(html, \"buttons\", self.drawButtons());\n\n      //Resolve export options menu\n      html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\n\n      // Resolve row buttons\n      html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\n\n      // Resolve dynamic Pager\n      html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\n\n      // Perform grid replaces\n      html = self._replaceElement(html, \"table\", table);\n      html = self._replaceElement(html, \"emptyTable\", emptyTable);\n      return html;\n    },\n    /*\r\n       * Find if a column has a exact match for sort it\r\n       */\n    isExactMatch: function isExactMatch() {\n      var self = this;\n      var columns = self.options.columns;\n      var sortBy = self.options.sortBy;\n      var i = 0,length = columns.length;\n      for (; i < length;) {\n        if (sortBy == columns[i++].name) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /*\r\n       *   This method draws the grid header\r\n       */\n    drawHeader: function drawHeader() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve columns\n      var columns = \"\";\n\n      self.exactMatch = self.isExactMatch();\n\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw normal column\n            columns += self.drawColumn(column);\n          }\n        } else {\n          // Draw normal column\n          columns += self.drawColumn(column);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowButtons()) {\n        // Draw special column\n        columns += self.drawSpecialColumn();\n      }\n\n      return columns;\n    },\n\n    /*\r\n       *   This method draws a column header\r\n       */\n    drawColumn: function drawColumn(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var headerStyles = options.headerStyles ? options.headerStyles.header : \"\";\n      headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\n      var columnAlign = columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\";\n      var isSortable = options.isSortable && columnProperties.isSortable && typeof columnProperties.xpath !== \"undefined\";\n      var initialSortBy = options.sortBy.split(\".\")[0];\n      var sortActive = false;\n      if (isSortable && (column.name === options.sortBy || column.name === initialSortBy && !self.exactMatch)) sortActive = true;\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.column, $.extend({}, column, {\n        isKey: column.key,\n        sortActive: sortActive,\n        sortType: options.sortOrder,\n        isSortable: isSortable,\n        tooltip: column.tooltip || \"\",\n        columnCssClass: cssClass,\n        headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\n        headerStyles: headerStyles,\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio,\n        columnAlign: columnAlign,\n        flexAlign: bizagi.util.mapAlignClassName(columnAlign) }));\n\n    },\n    /*\r\n       *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialColumn: function drawSpecialColumn() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.specialColumn);\n    },\n\n    drawDynamicPager: function drawDynamicPager() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.dynamicPager);\n    },\n\n    /*\r\n       *   This method draws the table body\r\n       */\n    drawBody: function drawBody() {\n      var self = this;\n\n      // Resolve rows\n      var rows = \"\";\n      $.each(self.data.rows, function (i, row) {\n        rows += self.drawRow(row);\n      });\n\n      return rows;\n    },\n\n    /*\r\n       *   This method draws a grid row\r\n       */\n    drawRow: function drawRow(rowData, isNewRow) {\n      var self = this;\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n      var row = $.fasttmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      $.each(rowData, function (i, cell) {\n        if (self.options.maxColumns > 0) {\n          if (i < self.options.maxColumns + 1) {\n            // Draw normal cell\n            cells += self.drawCell(i, key, cell, newRow);\n          }\n        } else {\n          // Draw normal cell\n          cells += self.drawCell(i, key, cell, newRow);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowRowButtons()) {\n        // Draw special column\n        cells += self.drawSpecialCell(self.options.maxColumns + 1);\n      }\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws the cells for summary\r\n       */\n    drawSummary: function drawSummary() {\n      var self = this;\n      var options = self.options;\n      var row = $.fasttmpl(options.template.summary);\n      var cells = \"\";\n\n      // Resolve summary cells\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw summary column\n            cells += self.drawSummaryCell(column);\n          }\n        } else {\n          // Draw summary column\n          cells += self.drawSummaryCell(column);\n        }\n      });\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"summary-cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws a single summary cell\r\n       */\n    drawSummaryCell: function drawSummaryCell(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.summaryCell, {\n        hidden: column.hidden || false,\n        summarizeBy: column.summarizeBy,\n        cellAlign: cellAlign });\n\n\n      var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\n      result = result != undefined && typeof result != \"number\" ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\n\n      if (!result) {\n        result = \"\";\n      }\n\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      return cell;\n    },\n\n    /*\r\n       *   This method draws the grid cell\r\n       */\n    drawCell: function drawCell(columnIndex, key, value, isNewRow) {\n      var self = this;\n      var options = self.options;\n      isNewRow = isNewRow || false;\n      var messageValidation = \"\";\n\n      // Ensure that data is mapped into a column\n      if (!self.columnByIndex[columnIndex]) {\n        return \"\";\n      }\n\n      // Get message\n      if (columnIndex > 0) {\n        messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\n      }\n\n      var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.cell, {\n        isKey: self.columnByIndex[columnIndex].key,\n        hidden: options.columns[columnIndex].hidden || false,\n        isDesign: options.mode === \"design\",\n        messageValidation: messageValidation,\n        columnCssClass: cssClass,\n        id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\n        cellAlign: cellAlign,\n        flexAlign: bizagi.util.mapAlignClassName(cellAlign),\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio });\n\n\n      var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\n      if (!result) {\n        result = \"\";\n      }\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      self.columnByIndex[columnIndex]['cell'] = $(cell);\n      return cell;\n    },\n    /*\r\n       *   Returns the resolved result from a promise when the promise has been executed already\r\n       */\n    resolveResult: function resolveResult(promise) {\n      var result;\n\n      promise.done(function (data) {\n        result = data;\n      });\n\n      return result;\n    },\n    /*\r\n       *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialCell: function drawSpecialCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n\n      /* // Ensure that data is mapped into a column\r\n                                  if (!self.columnByIndex[columnIndex]) {\r\n                                      return \"\";\r\n                                  } */\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.specialCell);\n\n      return cell;\n    },\n    /*\r\n       *   This method draws a group header\r\n       */\n    drawGroupHeader: function drawGroupHeader() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a footer\r\n       */\n    drawFooter: function drawFooter() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a grid pager\r\n       */\n    drawPager: function drawPager() {\n      var self = this;\n      var options = self.options;\n\n      // Calculate pages\n      var pages = [];\n      for (var i = 1; i <= self.data.total; i++) {\n        pages.push({\n          number: i,\n          active: i == self.data.page });\n\n      }\n\n      // Resolve pager template\n      return $.fasttmpl(options.template.pager, {\n        page: self.data.page,\n        pages: pages,\n        records: self.data.records });\n\n    },\n    /*\r\n       *   This method draws a grid button actions\r\n       */\n    drawButtons: function drawButtons() {\n      var self = this;\n      var options = self.options;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend(options.actions, tooltips);\n\n      if (self._canShowButtons()) {\n        // Resolve buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.buttonsRtl, parameters);\n        } else {\n          return $.fasttmpl(options.template.buttons, parameters);\n        }\n      } else {\n        return \"\";\n      }\n    },\n\n    /*\r\n       * This method draws the export options menu\r\n       */\n    drawGridExportOptions: function drawGridExportOptions() {\n      var self = this;\n      var options = self.options;\n      var actions = options.actions;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend({\n        orientation: options.orientation,\n        enableXlsExport: actions.enableXlsExport,\n        enablePdfExport: actions.enablePdfExport },\n      tooltips);\n\n      return $.fasttmpl(options.template.exportOptions, parameters);\n    },\n\n    /*\r\n       *   This method draws a row buttons,\r\n       *   those buttons will be invisible, and will be activated when the user selects a row\r\n       */\n    drawRowButtons: function drawRowButtons() {\n      var self = this;\n      var options = self.options;\n\n      if (self._canShowRowButtons()) {\n        // Resolve row buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\n        } else {\n          return $.fasttmpl(options.template.rowButtons, options.actions);\n        }\n      } else {\n        return \"\";\n      }\n    },\n    /*\r\n       *   Execute post-renders in all the grid\r\n       */\n    postRender: function postRender() {\n      var self = this;\n      var options = self.options;\n\n      // Get grid rows\n      var rows = self._getComponent(\"cells\");\n      if (rows) {\n        $.each(rows, function (i, row) {\n          row = $(row);\n          self.postRenderRow(row);\n        });\n      }\n\n      // Get summary row\n      if (options.showSummary) {\n        var summary = self._getComponent(\"summary\");\n        self.postRenderSummary(summary);\n      }\n\n      self._triggerHandler(\"gridControlReady\");\n    },\n\n    /*\r\n       *   Execute post-renders in each cell after the element has been created\r\n       */\n    postRenderRow: function postRenderRow(row) {\n      var self = this;\n      var key = row.attr(\"data-business-key\");\n      var isNewRow = row.attr(\"data-new-row\");\n      var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (typeof column == \"undefined\" || column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, key, cell, isNewRow);\n          });\n        } else {\n          self.onCellReady(column, key, $(cell), isNewRow);\n        }\n      });\n    },\n\n    /*\r\n       *   Execute post-renders in each summary cell after the element has been created\r\n       */\n    postRenderSummary: function postRenderSummary(summary) {\n      var self = this;\n      var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, \"summary\", cell, false);\n          });\n        } else {\n          self.onCellReady(column, \"summary\", $(cell), false);\n        }\n      });\n    },\n\n    /*\r\n       *   Method to attach any handler to the grid\r\n       */\n    attachHandlers: function attachHandlers() {},\n\n    //TODO IMPLEMENTANDO\n    selectDynamicPager: function selectDynamicPager() {\n      this.onDynamicPager();\n    },\n\n    /*\r\n       *   Changes the current page in the grid\r\n       */\n    changePage: function changePage(page) {\n      var self = this;\n      var currentPage = Number(self.data.page);\n      var total = self.data.total;\n      var newPage = page;\n\n      // Process previous page\n      if (page === \"previous\") {\n        if (currentPage > 1) {\n          newPage = currentPage - 1;\n        } else {\n          return;\n        }\n      }\n\n      // Process next page\n      if (page === \"next\") {\n        if (currentPage < total) {\n          newPage = currentPage + 1;\n        } else {\n          return;\n        }\n      }\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Update internal options\n      self.page = Number(newPage);\n\n      // Execute handler\n      self.onPageRequested();\n    },\n\n    /**\r\n        * Get current page of data\r\n        * @returns {*}\r\n        */\n    getCurrentPage: function getCurrentPage() {\n      var data = this.data || {};\n\n      return data.page || 1;\n    },\n\n    /*\r\n       *  Verify cells before sumitonchange\r\n       */\n    isValid: function isValid() {\n      // Trigger handler\n      return this._triggerHandler(\"isValid\");\n    },\n\n    /*\r\n       *   Sort the grid by a column\r\n       */\n    sortBy: function sortBy(columnIndex, sortType) {\n      var self = this;\n      var options = self.options;\n      var column = self.columnByIndex[columnIndex];\n\n      if (typeof options.sortBy === \"undefined\") {\n        return true;\n      }\n\n      // Set new sort type reversed to current, if the sort column has not changed\n      if (typeof column.name === \"undefined\") column.name = column.label;\n      if (column.name == options.sortBy) {\n        sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\n      } else {\n        if (column.name == options.sortBy.split(\".\")[0]) {\n          sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\n        } else {\n          sortType = sortType || options.sortType;\n        }\n      }\n\n      // Update internal options\n      if (options.sortBy.split(\".\").length > 1) {\n        if (options.sortBy.split(\".\")[0] != column.name) {\n          options.sortBy = column.name;\n        } else {\n          options.sortBy = column.name;\n        }\n      } else {\n        options.sortBy = column.name;\n      }\n\n      if (typeof column.bizAgiProperties.sortAttribute !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\n        options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\n      }\n\n      options.sortColumn = column;\n      options.sortType = sortType;\n      options.sortOrder = sortType;\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Execute handler\n      self.onSortRequested();\n    },\n\n    /*\r\n       *   Selects a row in the grid\r\n       */\n    selectRow: function selectRow(key, businessKey) {\n      var self = this;\n\n      if (self.selectedRow == key) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n\n        // Update internal options\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      } else {\n        if (self.selectedRow != 0) {\n          // Invoke un-select handler\n          self.onRowUnselected();\n        }\n\n        // Update internal options\n        self.selectedRow = key;\n        self.selectedBusinessKey = businessKey;\n\n        // Invoke select handler\n        self.onRowSelected();\n      }\n    },\n\n    /*\r\n       *   Unselects a row in the grid\r\n       */\n    unselectRow: function unselectRow() {\n      var self = this;\n\n      if (self.selectedRow != 0) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      }\n    },\n\n    /*\r\n       *   Calculates the summary for a column given the data\r\n       */\n    calculateSummary: function calculateSummary(column) {\n      var self = this;\n      var operation = column.summarizeBy;\n\n      //Consider the default values in the operations\n      $.each(self.data.rows, function (i, value) {\n        if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\n          self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\n        }\n      });\n      var columnValues = $.map(self.data.rows, function (row, i) {return row[column.index];});\n      var result;\n\n      // Don't calculate anything if there are no rows\n      if (columnValues.length == 0) return 0;\n\n      // Resolve operations\n      if (operation === \"sum\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n\n      } else if (operation === \"min\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value < result) result = Number(value);});\n        if (result === Math.max()) result = null;\n\n      } else if (operation === \"max\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value > result) result = Number(value);});\n        if (result === Math.min()) result = null;\n\n      } else if (operation === \"avg\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n        result = result / columnValues.length;\n\n      } else if (operation === \"count\") {\n        result = 0;\n        columnValues = self.data.rows;\n\n        for (i = 0; i < columnValues.length; i++) {\n          var columnValue = columnValues[i][column.index];\n\n          if (columnValue instanceof Array && columnValue.length > 0) {\n            result += 1;\n          } else\n          if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\n            result += 1;\n          }\n        }\n      }\n      return result;\n    },\n\n    /*\r\n       *   Process an action in order to do something with the grid\r\n       */\n    processAction: function processAction(action, params) {\n      var self = this;\n\n      var key = params && params.key ? params.key : self.selectedBusinessKey;\n      if (action === \"edit\") {\n        self.onEditRow(key);\n      }\n      if (action === \"remove\") {\n        self.onDeleteRow(key);\n      }\n      if (action === \"more\") {\n        self.onShowMore(key);\n      }\n      if (action === \"details\") {\n        self.onShowDetails(key);\n      }\n      if (action === \"add\") {\n        self.onAddRow();\n      }\n\n      if (action === \"show-grid-export-options\") {\n        self.onShowExportGridOptions();\n      }\n    },\n    /*\r\n       *   Executes the page requested handler\r\n       */\n    onPageRequested: function onPageRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the sort requested handler\r\n       */\n    onSortRequested: function onSortRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the row selected handler\r\n       */\n    onRowSelected: function onRowSelected() {\n      var self = this;\n\n      return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\n    },\n    /*\r\n       *   Executes the row un-selected handler\r\n       */\n    onRowUnselected: function onRowUnselected() {\n      var self = this;\n      return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       * Executes collapse grid\r\n       */\n    onCollapseGrid: function onCollapseGrid() {\n      var self = this;\n      return self._triggerHandler(\"performCollapseGrid\");\n    },\n\n    //TODO:llamar\n    onDynamicPager: function onDynamicPager() {\n      var self = this;\n      return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       *   Executes the on draw cell handler\r\n       */\n    onDrawCell: function onDrawCell(column, key, value, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"drawCell\", {\n        column: column,\n        key: key,\n        value: value,\n        isNewRow: isNewRow });\n\n    },\n    /*\r\n       *   Executes on cell ready handler\r\n       */\n    onCellReady: function onCellReady(column, key, cell, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"cellReady\", {\n        column: column,\n        key: key,\n        cell: cell,\n        isNewRow: isNewRow });\n\n    },\n\n    /*\r\n       *   Executes the on draw control handler\r\n       */\n    onDrawControl: function onDrawControl() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on draw group header handler\r\n       */\n    onDrawGroupHeader: function onDrawGroupHeader() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on add row handler\r\n       */\n    onAddRow: function onAddRow() {\n      var self = this;\n      return self._triggerHandler(\"addRow\");\n    },\n    /*\r\n       *   Executes the on edit row handler\r\n       */\n    onEditRow: function onEditRow(key) {\n      var self = this;\n      return self._triggerHandler(\"editRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on delete row handler\r\n       */\n    onDeleteRow: function onDeleteRow(key) {\n      var self = this;\n      return self._triggerHandler(\"deleteRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on show more handler\r\n       */\n    onShowMore: function onShowMore(key) {\n      var self = this;\n      return self._triggerHandler(\"showMore\", { key: key });\n    },\n    /*\r\n       *   Executes the on show details handler\r\n       */\n    onShowDetails: function onShowDetails(key) {\n      var self = this;\n      return self._triggerHandler(\"showFormDetails\", { key: key });\n    },\n    /*\r\n       * Executes the on show export grid options \r\n       */\n    onShowExportGridOptions: function onShowExportGridOptions() {\n      var self = this;\n      return self._triggerHandler(\"showGridExportOptions\");\n    },\n\n    /*\r\n       *   Replaces a matched element in the container for the specified \"replace\" element\r\n       */\n    _replaceElement: function _replaceElement(html, element, replace) {\n      return html.replaceFirstWithoutPatterns(\"{{element \" + element + \"}}\", replace);\n    },\n\n    /*\r\n       *   Return the event handler parameters object\r\n       */\n    _buildRefreshParameters: function _buildRefreshParameters() {\n      var self = this;\n      var options = self.options;\n      var sortColumn = options.sortColumn != undefined ? options.sortColumn.index : 1;\n      return {\n        page: self.page,\n        sortBy: options.sortBy,\n        sortType: options.sortOrder,\n        sortColumnIndex: sortColumn };\n\n    },\n    /*\r\n       *   Calls directly to handler callback\r\n       */\n    _triggerHandler: function _triggerHandler(type, data) {\n      var callback = this.options[type];\n      if (!callback) {\n        return null;\n      }\n      return callback.call(this.element[0], data);\n    },\n    /*\r\n       *   Gets the component\r\n       */\n    _getComponent: function _getComponent(component) {\n      var self = this;\n      var element = self.element;\n      if (!self.components[component]) {\n        var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\n        if (foundComponent != null && foundComponent.length > 0) {\n          self.components[component] = foundComponent;\n        }\n      }\n      return self.components[component];\n    },\n    /*\r\n       *   Gets the specific Button\r\n       */\n    _getButton: function _getButton(button) {\n      var self = this;\n      var element = self.element;\n      if (!self.buttons[button])\n      self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\n      return self.buttons[button];\n    },\n    /*\r\n       * Cleans the components \r\n       */\n    _cleanComponents: function _cleanComponents() {\n      var self = this;\n      self.components = {};\n    },\n    /*\r\n       * Cleans the buttons \r\n       */\n    _cleanButtons: function _cleanButtons() {\n      var self = this;\n      self.buttons = {};\n    },\n    /*\r\n       *  Template method to check if buttons component must be rendered\r\n       */\n    _canShowButtons: function _canShowButtons() {\n      return true;\n    },\n    /*\r\n       *  Template method to check if row buttons must be displayed when the row is selected\r\n       */\n    _canShowRowButtons: function _canShowRowButtons() {\n      return true;\n    } });\n\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Utils\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide misc helpers to all modules\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\nbizagi.util.smartphone = typeof bizagi.util.smartphone !== \"undefined\" ? bizagi.util.smartphone : {};\nbizagi.util.tablet = typeof bizagi.util.tablet !== \"undefined\" ? bizagi.util.tablet : {};\n\nvar DEVICES = {};\n\n// Device Type\nDEVICES[DEVICES['desktop'] = 0] = 'desktop';\nDEVICES[DEVICES['smartphone'] = 1] = 'smartphone';\nDEVICES[DEVICES['tablet'] = 2] = 'tablet';\n\n// Add definition\nbizagi.deviceEnum = DEVICES;\n\n/*\r\n                              *   Define mini-plugin to acceess iframe's boundaries\r\n                              */\n(function ($) {\n  $.fn.callInside = function (fx, args) {\n    if ($(this)[0].tagName.toLowerCase() != \"iframe\")\n    return null;\n    // Don't execute the code when the content window is not ready yet    \n    if ($(this)[0].contentWindow == null)\n    return null;\n    // Check if the iframe is cross domain\n    try {\n      // Evals the content\n      $(this)[0].contentWindow.args = args;\n    } catch (e) {\n      // If an exception is thrown here this is a cross domain access\n      return null;\n    }\n\n    if ($.browser.msie) {\n      return $(this)[0].contentWindow.execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    } else if ($.browser.webkit || $.browser.mozilla) {\n      return $(this)[0].contentWindow.eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    }\n  };\n})(jQuery);\n(function ($) {\n  $.fn.callInsidePopup = function (fx, args) {\n    // This is window here\n    var self = this;\n    $(document).ready(function () {\n      // Check if the iframe is cross domain\n      try {\n        // Evals the content\n        $(self)[0].args = args;\n      } catch (e) {\n        // If an exception is thrown here this is a cross domain access\n        return null;\n      }\n\n      if ($.browser.msie) {\n        return $(self)[0].execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      } else if ($.browser.webkit || $.browser.mozilla) {\n        return $(self)[0].eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      }\n\n    });\n  };\n})(jQuery);\n(function ($) {\n\n  // add support for CSS functions for \"setProperty\" in ie8\n  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;\n  if (!isStyleFuncSupported) {\n    CSSStyleDeclaration.prototype.getPropertyValue = function (a) {\n      return this.getAttribute(a);\n    };\n    CSSStyleDeclaration.prototype.setProperty = function (styleName, value, priority) {\n      this.setAttribute(styleName, value);\n      var priority = typeof priority != 'undefined' ? priority : '';\n      if (priority != '') {\n        // Add priority manually\n        var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*' + RegExp.escape(value) + '(\\\\s*;)?', 'gmi');\n        this.cssText = this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');\n      }\n    };\n\n    CSSStyleDeclaration.prototype.removeProperty = function (a) {\n      return this.removeAttribute(a);\n    };\n\n    CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {\n      var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*[^\\\\s]*\\\\s*!important(\\\\s*;)?', 'gmi');\n      return rule.test(this.cssText) ? 'important' : '';\n    };\n  }\n\n  // Escape regex chars with \\\n  RegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n  };\n\n  // The style function\n  jQuery.fn.style = function (styleName, value, priority) {\n    // DOM node\n    var node = this.get(0);\n    // Ensure we have a DOM node \n    if (typeof node == 'undefined') {\n      return;\n    }\n    // CSSStyleDeclaration\n    var style = this.get(0).style;\n    // Getter/Setter\n    if (typeof styleName != 'undefined') {\n      if (typeof value != 'undefined') {\n        // Set style property\n        var priority = typeof priority != 'undefined' ? priority : '';\n        // Hack to IE8\n        if (style.setProperty) {\n          style.setProperty(styleName, value, priority);\n        } else {\n          style.setAttribute(styleName, value, priority);\n        }\n      } else {\n        // Get style property\n\n        return style.getPropertyValue(styleName);\n      }\n    } else {\n      // Get CSSStyleDeclaration\n      return style;\n    }\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.nl2br = function (value) {\n    return value.replace(/(\\r\\n|\\n\\r|\\r|\\n|\\\\r\\\\n|\\\\n\\\\r|\\\\r|\\\\n)/g, \"<br>\");\n  };\n})(jQuery);\n\n\n\n(function ($) {\n  jQuery.br2nl = function (value) {\n    return value.replace(/\\r\\n|\\r|\\n/g, \"\\r\");\n  };\n})(jQuery);\n\n/**\r\n             *   Can be compare control between their intance value and existing value\r\n             */\n//TODO: DEPL- Please move this out of here, this is rendering logic, it must exists as a function for the render, and every erender could override its implementation\n(function ($) {\n  jQuery.controlValueIsChanged = function (control) {\n    var self = control;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (control.properties.type == \"grid\" && control.ready().state() == \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\", \"queryState\"].includes(properties.type) || /^cascadingcombo$/i.test(properties.type)) {\n      if (value && value.length !== undefined)\n      value = value[0];\n      if (compareValue && compareValue.length !== undefined)\n      compareValue = compareValue[0];\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      result = compareValue == value ? false : true;\n    } else if (properties.type == \"boolean\" || properties.type == \"queryBoolean\" || properties.type == \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (properties.type == \"searchNumber\") {\n\n      result = value ? true : false;\n    } else if (properties.type === \"date\") {\n      result = new Date(compareValue).getTime() !== new Date(value).getTime();\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.getMaxZindex = function () {\n    var elm = $(\"*\");\n    var maxZindex = 1;\n\n    $.each(elm, function (key, value) {\n      var zindex = parseInt($(value).css(\"z-index\"));\n      if (zindex > maxZindex) {\n        maxZindex = zindex + 1;\n      }\n\n    });\n\n    return maxZindex;\n  };\n})(jQuery);\n\n/**\r\n             * Set the same max height to multiples divs\r\n             */\n(function ($) {\n  jQuery.equalizeHeights = function (selector) {\n    var heights = new Array();\n    // Loop to get all element heights\n    $(selector).each(function () {\n\n      // Need to let sizes be whatever they want so no overflow on resize\n      $(this).css('min-height', '0');\n      $(this).css('max-height', 'none');\n      $(this).css('height', 'auto');\n\n      // Then add size (no units) to array\n      heights.push($(this).outerHeight());\n    });\n\n    // Find max height of all elements\n    var max = Math.max.apply(Math, heights);\n\n    // Set all heights to max height\n    $(selector).each(function () {\n      $(this).css('height', max + 'px');\n    });\n  };\n})(jQuery);\n\n//TODO: DEPL - Move this to rendering\nbizagi.util.autoSave = function () {\n  var deferredSave = $.Deferred();\n  //if attr data-event exist trigger event auto-save or resolve the deferred\n  if (bizagi.util.detectDevice() !== \"desktop\") {\n    if ($(document).data('auto-save')) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  } else {\n    if ($._data($(document)[0], 'events')[\"save-form\"] && $._data($(document)[0], 'events')[\"save-form\"].length > 0) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  }\n  return deferredSave.promise();\n};\n//--  **Users Deleted** the name will fill on first reques in UsersPictures\nbizagi.util.anonymizedUserInformation = {\n  id: \"00000000-0000-0000-0000-000000000000\",\n  name: \"\",\n  username: \"\",\n  email: \"\",\n  domain: \"\",\n  picture: \"\",\n  isAnonymized: true };\n\n\n//-- **Resources for date picker**\nbizagi.util.datepickerResource = [];\n// taken  from https://github.com/jquery/jquery-ui/tree/master/ui/i18n\nbizagi.util.datepickerResource[\"en\"] = { closeText: \"Done\", prevText: \"Prev\", nextText: \"Next\", currentText: \"Today\", monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], weekHeader: \"Wk\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"es\"] = { closeText: \"Cerrar\", prevText: \"&#x3C;Ant\", nextText: \"Sig&#x3E;\", currentText: \"Hoy\", monthNames: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"], monthNamesShort: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"], dayNames: [\"domingo\", \"lunes\", \"martes\", \"mircoles\", \"jueves\", \"viernes\", \"sbado\"], dayNamesShort: [\"dom\", \"lun\", \"mar\", \"mi\", \"jue\", \"vie\", \"sb\"], dayNamesMin: [\"D\", \"L\", \"M\", \"X\", \"J\", \"V\", \"S\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ar\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"dd/mm/yy\", firstDay: 0, isRTL: true, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"cs\"] = { closeText: \"Zavt\", prevText: \"&#x3C;Dve\", nextText: \"Pozdji&#x3E;\", currentText: \"Nyn\", monthNames: [\"leden\", \"nor\", \"bezen\", \"duben\", \"kvten\", \"erven\", \"ervenec\", \"srpen\", \"z\", \"jen\", \"listopad\", \"prosinec\"], monthNamesShort: [\"led\", \"no\", \"be\", \"dub\", \"kv\", \"er\", \"vc\", \"srp\", \"z\", \"j\", \"lis\", \"pro\"], dayNames: [\"nedle\", \"pondl\", \"ter\", \"steda\", \"tvrtek\", \"ptek\", \"sobota\"], dayNamesShort: [\"ne\", \"po\", \"t\", \"st\", \"t\", \"p\", \"so\"], dayNamesMin: [\"ne\", \"po\", \"t\", \"st\", \"t\", \"p\", \"so\"], weekHeader: \"Td\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"de\"] = { closeText: \"Schlieen\", prevText: \"&#x3C;Zurck\", nextText: \"Vor&#x3E;\", currentText: \"Heute\", monthNames: [\"Januar\", \"Februar\", \"Mrz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"], dayNames: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"], dayNamesShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], dayNamesMin: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], weekHeader: \"KW\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"fr\"] = { closeText: \"Fermer\", prevText: \"Prcdent\", nextText: \"Suivant\", currentText: \"Aujourd'hui\", monthNames: [\"janvier\", \"fvrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"aot\", \"septembre\", \"octobre\", \"novembre\", \"dcembre\"], monthNamesShort: [\"janv.\", \"fvr.\", \"mars\", \"avr.\", \"mai\", \"juin\", \"juil.\", \"aot\", \"sept.\", \"oct.\", \"nov.\", \"dc.\"], dayNames: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"], dayNamesShort: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"], dayNamesMin: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"], weekHeader: \"Sem.\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"it\"] = { closeText: \"Chiudi\", prevText: \"&#x3C;Prec\", nextText: \"Succ&#x3E;\", currentText: \"Oggi\", monthNames: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"], monthNamesShort: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"], dayNames: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"], dayNamesShort: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"], dayNamesMin: [\"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ja\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"yy/mm/dd\", firstDay: 0, isRTL: false, showMonthAfterYear: true, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"nl\"] = { closeText: \"Sluiten\", prevText: \"\", nextText: \"\", currentText: \"Vandaag\", monthNames: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"], monthNamesShort: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"], dayNames: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"], dayNamesShort: [\"zon\", \"maa\", \"din\", \"woe\", \"don\", \"vri\", \"zat\"], dayNamesMin: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"], weekHeader: \"Wk\", dateFormat: \"dd-mm-yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"pt\"] = { closeText: \"Fechar\", prevText: \"Anterior\", nextText: \"Seguinte\", currentText: \"Hoje\", monthNames: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"], monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"], dayNames: [\"Domingo\", \"Segunda-feira\", \"Tera-feira\", \"Quarta-feira\", \"Quinta-feira\", \"Sexta-feira\", \"Sbado\"], dayNamesShort: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"], dayNamesMin: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"], weekHeader: \"Sem\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ru\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"zh\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"yy-mm-dd\", firstDay: 1, isRTL: false, showMonthAfterYear: true, yearSuffix: \"\" };\n\n//--  **Communication between Workportal and LiveProcesses**\n\n// Create new Live Process\nbizagi.util.liveProcessesEvents = bizagi.util.liveProcessesEvents || {};\nbizagi.util.liveProcessesEvents.newLiveProcess = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.newLiveProcess.initEvent('new-live-process', true, true);\n\n// Event for changing route inside LiveProcesses\nbizagi.util.liveProcessesEvents.routeEvents = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.routeEvents.initEvent('parent-route-events', true, true);\nbizagi.util.liveProcessesEvents.routeEvents.route = '/';\n\n// Verify save condition\nbizagi.util.liveProcessesEvents.saveEvent = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.saveEvent.initEvent('save-live', true, true);\nbizagi.util.liveProcessesEvents.saveEvent.lastWidget = '';\nbizagi.util.liveProcessesEvents.saveEvent.nextWidget = '';\n\nbizagi.util.liveSave = function (widgetName) {\n  bizagi.util.liveProcessesEvents.saveEvent.nextWidget = widgetName;\n  var deferredLiveSave = $.Deferred();\n  var indeX = 0;\n  // next try/catch avoids crossdomain messages in the middle of \"Next button\" execution\n  try {\n    indeX = $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess');\n  }\n  catch (e) {\n    indeX = -1;\n  }\n  if (\n  (widgetName !== bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY || widgetName === bizagi.util.liveProcessesEvents.saveEvent.lastWidget) &&\n  $(document).find('iframe').length > 0 && indeX > 0)\n  {\n    bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = deferredLiveSave;\n    document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent);\n  } else {\n    deferredLiveSave.resolve();\n  }\n  $.when(deferredLiveSave).done(function () {bizagi.util.liveProcessesEvents.saveEvent.lastWidget = widgetName;});\n  return deferredLiveSave.promise();\n};\n\n/**\r\n    * CryptoJS MD5\r\n    * @param {} message\r\n    * @returns {}\r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n/**\r\n    * Replace all coincidences in a text, based on key value object\r\n    *  @argument mapDataToReplace = {\"keyTofind\":\"valueToReplace\",...}\r\n    */\nbizagi.util.multiReplace = function (text, mapDataToReplace) {\n  mapDataToReplace = mapDataToReplace || {};\n\n  for (var key in mapDataToReplace) {\n    var reg = new RegExp(key, \"g\");\n    text = text.replace(reg, mapDataToReplace[key]);\n  }\n  return text;\n};\n/*\r\n    *   Creates a replace all method that is left from the String Class\r\n    */\nbizagi.util.replaceAll = function (text, pcFrom, pcTo) {\n  // Call the method located in bizagi.loader\n  return bizagi.replaceAll(text, pcFrom, pcTo);\n};\n/*\r\n    *replaces global expressions regulars\r\n    */\nbizagi.util.replaceAllGlobalRegExp = function (text, pcFrom, pcTo) {\n  var temp = text;\n\n  var re = new RegExp(pcFrom, \"g\");\n  temp = temp.replace(re, pcTo);\n\n  return temp.toString();\n};\n// Also append it to the string class\nString.prototype.replaceAll = function (pcFrom, pcTo) {\n  return bizagi.util.replaceAll(this, pcFrom, pcTo);\n};\n// Capitalize a string\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// Add this (Create an starts with function) to the string prototype\nString.prototype.startsWith = function (str) {\n  return this.slice(0, str.length) == str;\n};\n\n/**\r\n    * get Initials of a string/name and if the name is empty return the anonymized icon\r\n    */\nString.prototype.getInitials = function () {\n  var initials = \"\";\n  if (this.length === 0) {\n    initials = '<svg  class=\"bz-icon bz-icon-24 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-user-deactivated\"></use></svg>';\n  } else {\n    try {\n      var removeRepeatSpaces = this.replace(/  +/g, ' ');\n      var words = removeRepeatSpaces.split(' ');\n      for (var i = 0; i < words.length; i += 1) {\n        initials += words[i][0] || '';\n        if (initials.length == 2) {\n          break;\n        }\n      }\n    } catch (e) {}\n\n    initials = initials.toUpperCase();\n  }\n  return initials;\n};\n\nMath.sign = Math.sign || function (x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n// Add a clone to the object prototype\nbizagi.clone = function (obj) {\n  if (obj == undefined) return undefined;\n  if (obj == null) return null;\n  return JSON.parse(JSON.encode(obj));\n};\n// Measures the pixel size of a string\nbizagi.measureString = function (string, fontSize) {\n  var test = $(\"<span/>\").appendTo(\"body\");\n  test.text(string);\n  if (fontSize)\n  test.css(\"font-size\", fontSize);\n  var width = test.width();\n  test.detach();\n  return width;\n};\n/*\r\n    *   Creates a trim method\r\n    */\nbizagi.util.trim = function (text) {\n  if (typeof text === \"undefined\" || text == null)\n  return text;\n  // Call the method located in bizagi.loader\n  return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n/*\r\n    * Method to detect IE7 visitors\r\n    */\nbizagi.util.isIE7 = function () {\n  return bizagi.util.isIE() && document.documentMode == 7;\n};\n/*\r\n    * Method to detect IE8 visitors\r\n    */\nbizagi.util.isIE8 = function () {\n  return bizagi.util.isIE() && document.documentMode == 8;\n};\n/*\r\n    * Method to detect IE9 visitors\r\n    */\nbizagi.util.isIE9 = function () {\n  return bizagi.util.isIE() && document.documentMode == 9;\n};\n/*\r\n    * Method to detect IE10 visitors\r\n    */\nbizagi.util.isIE10 = function () {\n  return bizagi.util.isIE() && document.documentMode == 10;\n};\n/*\r\n    * Method to detect IE11 visitors\r\n    */\nbizagi.util.isIE11 = function () {\n  return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\n};\n\n/*\r\n    * Method to detect IE11 or lower\r\n    */\nbizagi.util.isIE11OrLower = function () {\n  return bizagi.util.isIE11() || bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE10 or lower\r\n    */\nbizagi.util.isIE10OrLower = function () {\n  return bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE12 or Edge(Windows 10) visitors\r\n    */\nbizagi.util.isEdge = function () {\n  if (/Edge\\/*./i.test(navigator.userAgent)) {\n    return true;\n  }\n  return false;\n};\n/*\r\n    * Method to detect IE visitors\r\n    */\nbizagi.util.isIE = function () {\n  return navigator.appName.indexOf(\"Internet Explorer\") > 0 || !!navigator.userAgent.match(/Trident/);\n};\n/*\r\n    *   Object Values wrapper\r\n    */\nbizagi.util.objectValues = function (array) {\n  if (bizagi.util.isIE())\n  return Object.keys(array).map(function (itm) {return array[itm];});else\n\n  return Object.values(array);\n};\n/*\r\n    * Get the specific version of IE \r\n    */\nbizagi.util.getIEVersion = function () {\n  var sAgent = window.navigator.userAgent;\n  var indexMSIE = sAgent.indexOf(\"MSIE\");\n  var version = 0;\n  if (indexMSIE > 0) {\n    version = parseInt(sAgent.substring(indexMSIE + 5, sAgent.indexOf(\".\", indexMSIE)));\n  } else\n  if (!!navigator.userAgent.match(/Trident/) || window.navigator.userAgent.indexOf(\"Edge\") > -1) {// Condition Check IF IE 11 and or MS Edge\n    version = 11;\n  }\n  return version;\n};\n/*\r\n    * Method to detect is chrome browser\r\n    */\nbizagi.util.isChrome = function () {\n  return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n/*\r\n    * Method to detect is Firefox browser\r\n    */\nbizagi.util.isFirefox = function (minVersion) {\n  function getVersion() {\n    var ua = navigator.userAgent,tem,M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {return { name: 'Opera', version: tem[1] };}\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {M.splice(1, 1, tem[1]);}\n    return {\n      name: M[0],\n      version: M[1] };\n\n  }\n  return /Firefox/.test(navigator.userAgent) && (minVersion === undefined || minVersion <= getVersion().version);\n};\n/*\r\n    * return the browser name this function can be modified if needs more browsers\r\n    */\nbizagi.util.getBrowser = function () {\n  var bw = \"undetected\";\n  if (bizagi.util.isChrome()) {\n    bw = \"chrome\";\n  } else if (bizagi.util.isFirefox()) {\n    bw = \"firefox\";\n  } else if (bizagi.util.isEdge()) {\n    bw = \"edge\";\n  } else if (bizagi.util.isIE11()) {\n    bw = \"ie11\";\n\n  } else if (bizagi.util.isIE10()) {\n    bw = \"ie10\";\n  }\n  return bw;\n};\n\n/**\r\n    * Empty Navigator Info\r\n    */\nbizagi.util.emptyNavigatorInfo = function () {\n  if (bizagi.navigator && bizagi.navigator.info) {\n    bizagi.navigator.info = {};\n  }\n};\n\n/**\r\n    * Auto call setting the browser class for css specific selectors, etc..\r\n    */\n$(document).ready(function () {\n  $(\"html\").\n  addClass(\"browser-\" + bizagi.util.getBrowser()).\n  addClass(\"device-\" + bizagi.detectDevice());\n  if (bizagi.language) {\n    var language = bizagi.language.split(\"-\");\n    if (language && language.length > 0) {\n      $(\"html\").addClass(\"language-\" + language[0]);\n    }\n  }\n});\n\n\n\n\n/**\r\n     * Method to detect iOS version X and apply styles to that device \r\n     */\nbizagi.util.setIphoneXOverrides = function () {\n  if (bizagi.util.isNativePluginSupported() && typeof bizagiapp.isIphoneX !== 'undefined') {\n    bizagiapp.isIphoneX(function (value) {\n      var flagIphoneX = value;\n      var styleIphoneX = \".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}\";\n\n      if (flagIphoneX === 'true') {\n        $('head').append('<style type=\"text/css\" id=\"iphoneXStyle\"></style>');\n        $('#iphoneXStyle').text(styleIphoneX);\n\n      } else if (bizagi.util.isiOSDevice()) {\n        $('head').append('<style type=\"text/css\" id=\"iphoneStyle\"></style>');\n        var paddingStyle = \"#homePortal .bz-home-header > div{padding-top:.8em}\";\n        $('#iphoneStyle').text(paddingStyle);\n      }\n    });\n  }\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isObject = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Object]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Array.isArray(value);\n};\nbizagi.util.isNull = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Null]\";\n};\nbizagi.util.isBoolean = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Boolean]\";\n};\n\n/*\r\n    *   Method to detect IE version\r\n    */\nbizagi.util.getInternetExplorerVersion = function () {\n  if (!bizagi.util.isIE())\n  return -1;\n  return Number(document.documentMode);\n};\n/*  \r\n    *   Detect a device based on the width\r\n    */\nbizagi.util.detectDevice = function () {\n  // Call the method located in bizagi.loader\n  return bizagi.detectDevice();\n};\n\n// Check if a string is number\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n// Check if a string is GUID\nbizagi.util.isGUID = function (n) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);\n};\n// Throw not implemented exception\nbizagi.util.mustImplement = function (notImplementedMethod) {\n  try {\n    console.log(\"Not implemented exception: \" + notImplementedMethod);\n  } catch (exe) {\n  } //IE console variable not exist\n  //throw \"You must implement \" + notImplementedMethod;\n};\n// Encodes the xpath \nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath) || typeof xpath.replaceAll === \"undefined\")\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n// Parses a value to return the correct boolean value\nbizagi.util.parseBoolean = function (value) {\n  if (value === undefined) {\n    return null;\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (value === '') {\n    return null;\n  }\n\n  // Parse true values\n  if (value === true || value === 1 || value.toString() === \"true\" || value === \"1\") {\n    return true;\n  }\n  if (value.toString().toLowerCase() === \"true\") {\n    return true;\n  }\n\n  // Parse false values\n  if (value !== null && value === false || value === 0 || value.toString() === \"false\" || value === \"0\") {\n    return false;\n  }\n  if (value.toString().toLowerCase() === \"false\") {\n    return false;\n  }\n\n  return null;\n};\n/*\r\n    *   Checks if a given string is empty\r\n    */\nbizagi.util.isEmpty = function (value) {\n  if (value === 0)\n  return false;\n\n  if (value === undefined || value === null || value === \"\") {\n    return true;\n  }\n\n  if (typeof value === \"Array\") {\n    return value.length == 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n    return value.length === 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    if ($.isEmptyObject(value)) {\n      return true;\n    } else {\n      return bizagi.util.isEmptyCombo(value);\n    }\n  }\n\n  // Side effect - I can't delete the last item in the multiselect and searchlist\n  /* if (value == \"{\\\"value\\\":[]}\"){\r\n       return true;\r\n   }  */\n\n  return false;\n};\n\nbizagi.util.isEmptyCombo = function (object) {\n  if (Object.prototype.toString.apply(object) === \"[object Object]\") {\n    var property,id = false,\n    value = false,\n    other = false;\n    for (property in object) {\n      if (object.hasOwnProperty(property)) {\n        if (property === \"id\") {\n          id = true;\n        } else {\n          if (property === \"value\") {\n            value = true;\n          } else {\n            other = true;\n          }\n        }\n        if (other) {\n          return false;\n        }\n      }\n    }\n    if (id) {\n      if (object[\"id\"] === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\r\n    * Decode data from encodeURI charset\r\n    */\nbizagi.util.decodeURI = function (value) {\n  value = value || \"\";\n  var finishDecoded = false;\n  var decodedValue = value;\n  var infinityControl;\n\n  // Try to decode data value\n  while (!finishDecoded) {\n    try {\n      infinityControl = decodeURI(decodedValue);\n      if (bizagi.util.hasNonVisibleChars(infinityControl)) {\n        decodedValue = value;\n        break;\n      }\n      if (infinityControl == decodedValue) {\n        finishDecoded = true;\n      } else {\n        decodedValue = infinityControl;\n      }\n    } catch (e) {\n      finishDecoded = true;\n    }\n  }\n\n  return decodedValue;\n};\n\nbizagi.util.hasNonVisibleChars = function (value) {\n  value = value || \"\";\n  var length = value.length;\n  var i = 0,\n  result = false,\n  ch;\n  for (; i < length;) {\n    ch = value.charCodeAt(i++);\n    if (ch < 32 || ch > 126) {\n      result = true;\n      break;\n    }\n  }\n  return result;\n};\n\n/* \r\n    *   Converts a percent into a number\r\n    */\nbizagi.util.percent2Number = function (value) {\n  return Number(String(value).replace(\"%\", \"\"));\n};\n/*\r\n    *   Check if a object is empty\r\n    */\nbizagi.util.isObjectEmpty = function (obj) {\n  if (obj.length > 0)\n  return false;\n  return true;\n};\n/*\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n/*\r\n    *   Replaces a matched selector in the container for the specified \"replace\" element\r\n    */\nbizagi.util.replaceSelector = function (container, selector, replace) {\n  // Replace children tag\n  var elementToReplace = $(selector, container);\n  if (elementToReplace.length > 0) {\n    elementToReplace.append(replace);\n    elementToReplace.children().unwrap();\n  }\n};\n/*\r\n    *   Determines if a control as a scrollbar \r\n    */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n//TODO: DEPL - Rename this to areIdenticalObjects\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n/*\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\nbizagi.util.centerElementIntoScroll = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var actualScroll = layout.scrollTop();\n  var elementTop = $(elem).offset().top;\n  var elementHeight = $(elem).height();\n  var offset = 0;\n  if (elementTop > 0) {\n    offset = elementTop + elementHeight;\n  } else {\n    offset = elementTop - elementHeight;\n  }\n  var newTop = actualScroll + offset;\n  layout.scrollTop(newTop);\n};\n/*\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/*\r\n    *   Encode a string as HTML\r\n    */\nbizagi.util.decodeHtmlEntities = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&apos;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\'');\n  }\n  return text;\n};\n/*\r\n    *   Read the location hash\r\n    */\nbizagi.util.getHashParams = function () {\n  var params = window.location.hash.substring(1).split(\"#\");\n  return params;\n};\n/*\r\n    *   Loads a file on-demand\r\n    */\nbizagi.util.loadFile = function (params) {\n  var defer = new $.Deferred();\n  var url = params && params.src ? params.src : params;\n  var type = params && params.type ? params.type : null;\n\n  bizagi.loader.loadFile({ src: url, type: type }).\n  then(function () {\n    defer.resolve();\n  });\n\n  return defer.promise();\n};\n\n/*\r\n    *   Initializes a webpart on-demand\r\n    */\nbizagi.util.initWebpart = function (webpart, device) {\n  var defer = new $.Deferred();\n\n  device = device || bizagi.detectDevice();\n\n  if (webpart.initialized) {\n    // If already initialized resolve the deferred\n    defer.resolve();\n  } else {\n\n    if (webpart.initializing) {\n      $.when(webpart.loadingDeferred.promise()).\n      done(function () {\n        defer.resolve();\n      });\n    } else {\n\n      webpart.loadingDeferred = new $.Deferred();\n      webpart.initializing = true;\n      bizagi.loader.initWebpart(webpart, device, function () {\n\n        // Resolve deferreds\n        webpart.loadingDeferred.resolve();\n        webpart.initializing = false;\n        defer.resolve();\n      });\n    }\n  }\n\n  return defer.promise();\n};\n/*\r\n    *   Read the query string parameteres\r\n    */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = pairs.length - 1; i >= 0; i--) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n/*\r\n    *   Extend querystring\r\n    */\nbizagi.util.extendQueryString = function (url, additionalParams) {\n  var plainUrl = url.indexOf(\"?\") > 0 ? url.substring(0, url.indexOf(\"?\")) : url;\n  var existingParams = bizagi.util.getQueryString(url);\n  var newParams = $.extend({}, existingParams, additionalParams);\n  return plainUrl + \"?\" + $.param(newParams);\n};\nbizagi.util.getStackTrace = function () {\n  var callstack = [];\n  var isCallstackPopulated = false;\n  try {\n    i.dont.exist += 0; //doesn't exist- that's the point\n  } catch (e) {\n    if (e.stack) {//Firefox\n      var lines = e.stack.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          callstack.push(lines[i]);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    } else if (window.opera && e.message) {//Opera\n      var lines = e.message.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          var entry = lines[i];\n          //Append next line also since it has the file info\n          if (lines[i + 1]) {\n            entry += ' at ' + lines[i + 1];\n            i++;\n          }\n          callstack.push(entry);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    }\n  }\n  if (!isCallstackPopulated) {//IE and Safari\n    var currentFunction = arguments.callee.caller;\n    while (currentFunction) {\n      var fn = currentFunction.toString();\n      var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\n      callstack.push(fname);\n      currentFunction = currentFunction.caller;\n    }\n  }\n  return callstack;\n};\n/*\r\n    *\thighlight elements\r\n    */\nbizagi.util.highLightElement = function (el) {\n  el.addClass('ui-highlight-control');\n  $.when(\n  setTimeout(function () {\n    el.addClass('ui-highlight-off-control');\n  }, 450)).\n  done(\n  setTimeout(function () {\n    el.removeClass('ui-highlight-control ui-highlight-off-control');\n  }, 800));\n};\n/*\r\n    *\tscroll to bottom\r\n    */\nbizagi.util.autoScrollBottom = function (el) {\n  try {\n    var elScrollHeight;\n    elScrollHeight = el[0].scrollHeight;\n    el.scrollTop(elScrollHeight);\n  } catch (e) {}\n};\n\n/*create auto scroll with limit top and limit bottom */\nbizagi.util.autoScrollInterval = { init: false };\nbizagi.util.autoScroll = function (itemScroll, limitTop, limitBottom, idInterval) {\n  var outSide = false;\n  /* prevent a previous interval */\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval[idInterval] = 0;\n  bizagi.util.autoScrollInterval['init'] = true;\n  $('body').addClass('autoscroll');\n  $('body.autoscroll').mousemove(function (event) {\n    if (event.pageY < limitTop) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollTopInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else if (event.pageY > limitBottom) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollBottomInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else {\n      clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      outSide = false;\n    }\n  });\n};\n/*create auto scroll movement top */\nbizagi.util.autoScrollTopInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  if (itemScroll.scrollTop() == 0) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      if (itemScroll.scrollTop() > 0) {\n        itemScroll.scrollTop(itemScroll.scrollTop() - 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n\n/*create auto scroll movement bottom */\nbizagi.util.autoScrollBottomInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  var valueMaxScrollBottom = $(itemScroll)[0].scrollHeight - $(itemScroll).innerHeight();\n  if (itemScroll.scrollTop() >= valueMaxScrollBottom) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      bizagi.util.autoScrollBottom($('html'));\n      if (itemScroll.scrollTop() < valueMaxScrollBottom) {\n        itemScroll.scrollTop(itemScroll.scrollTop() + 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n/*remove auto scroll*/\nbizagi.util.removeAutoScroll = function (classCSS, idInterval) {\n  $('body.' + classCSS).unbind('mousemove').removeClass(classCSS);\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval.init = false;\n};\n\nbizagi.util.getMaxZIndex = function (selector) {\n  selector = selector || $(\"div,span\");\n  return Math.max.apply(null, $(selector).map(function () {\n    var zIndex;\n    return isNaN(zIndex = parseInt($(this).css(\"z-index\"), 10)) ? 0 : zIndex;\n  }));\n};\n\n/*\r\n    * Creates a native popup to open an url\r\n    */\nbizagi.showPopup = function (url, params, callbackFn) {\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(url, \"\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  // Define args to call the function\n  window.BAPopupWindow = newWindow;\n  window.BAPopupCallback = callbackFn;\n  // Define BACLoseWindow in this context, so the external content calls window.opener.BACloseWindow\n  window.BACloseWindow = function (controls, submitForm) {\n    // Close dialog\n    window.BAPopupWindow.close();\n    // Executes the callback to assign values and submit form (if requested)\n    window.BAPopupCallback(controls, submitForm);\n  };\n};\n/**\r\n    * Creates a native popup in quirks mode to open an url\r\n    * \r\n    * @param url string page to open into popup\r\n    * @param params json {width,height,title,afterLoad}\r\n    */\nbizagi.showQuirksModePopup = function (url, params) {\n  var quirksModePage = window.BIZAGI_PATH_TO_BASE + \"quirks.html\";\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(quirksModePage, \"bizagiPopup\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  window.BAQuirksPopupWindow = newWindow;\n  // Attempto to set a window title\n  setTimeout(function () {\n    try {\n      newWindow.document.title = params.title;\n    } catch (e) {}\n  }, 50);\n  // We use a hack to eval content inside the popup\n  $(newWindow).callInsidePopup(function (windowParams) {\n\n    var $ = windowParams.jQuery;\n    var popupWindow = windowParams.popupWindow;\n    popupWindow.quirksOnLoad = function () {\n      var loadedBody = $(\"body\", popupWindow.document);\n      var iframe = $(\"iframe\", loadedBody);\n      // Remove waiting\n      loadedBody.removeClass(\"ui-bizagi-loading-message\");\n      iframe.show();\n      // Hacks the iframe\n      // This event will fire each time the iframe change its location\n      var afterLoad = windowParams.userParams.afterLoad;\n      if (afterLoad && afterLoad != null) {\n        var callbackParams = $.extend(windowParams.userParams, {\n          popupWindow: popupWindow });\n\n        iframe.callInside(afterLoad, callbackParams);\n      }\n    };\n    var loadingFunction = function loadingFunction() {\n      var body = $(\"body\", popupWindow.document);\n      // Create the iframe inside the new window\n      if (body.length > 0) {\n        body.append(\"<iframe scrolling='yes' id='innerFrameContent' src='\" + windowParams.url + \"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>\");\n      } else {\n        // Try again\n        setTimeout(function () {\n          loadingFunction();\n        }, 50);\n      }\n    };\n    // Execute loading function\n    loadingFunction();\n  }, {\n    jQuery: $,\n    userParams: params,\n    popupWindow: newWindow,\n    url: url });\n\n};\n/*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n/*\r\n    *   Creates a popup using overlay style\r\n    */\nbizagi.createPopup = function (params) {\n  var popupName = params.name,\n  onClose = params.onClose,\n  popupHeader;\n  var popupTitle = params.title ? params.title : '';\n  var handleClose = typeof params.handleClose == 'boolean' ? params.handleClose : true;\n  var overlay = $('<div class=\"ui-widget-overlay ' + popupName + '-overlay\" />');\n  var popup = $('<div class=\"' + popupName + '-popup  ui-popup-modal\"/>').appendTo(overlay);\n  var closeButton = $('<div class=\"' + popupName + '-btn-close biz-btn-close\"><i class=\"biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black\"></i></div>').appendTo(popup);\n  if (params.title) {\n    popupHeader = $('<div class=\"' + popupName + '-popup-header ui-popup-header\" ><h3>' + popupTitle + '</h3></div>').appendTo(popup);\n  }\n\n  var popupContent = $('<div class=\"' + popupName + '-popup-content\" />').appendTo(popup);\n  // Add to body\n  popup.hide();\n  if (params.additionalClass)\n  popup.addClass(params.additionalClass);\n  var container = params.container || \"body\";\n  overlay.appendTo($(container, document));\n\n  if (params.center) {\n    // Resize popup to the center\n    popup.css(\"top\", (overlay.height() - popup.height()) / 2);\n    popup.css(\"left\", (overlay.width() - popup.width()) / 2);\n  }\n  popup.show();\n  // Close handler\n  var closeHandler = function closeHandler(params) {\n    overlay.detach();\n    if (onClose)\n    onClose(params);\n  };\n\n  if (handleClose) {\n    closeButton.click(closeHandler);\n  }\n  // Return a full independent object\n  return {\n    fullPopup: popup,\n    overlay: overlay,\n    content: popupContent,\n    close: function close(params) {\n      closeHandler(params);\n    } };\n\n};\n/*\r\n    * Create an Ok, Cancel popup using bizagi.createPopup()\r\n    */\n\nbizagi.createOkCancelPopup = function (params) {\n  params.name = \"popup-ok-cancel\";\n  var onOk = params.onOk,\n  onCancel = params.onCancel;\n  var popup = bizagi.createPopup(params);\n  var container = $(\"<div></div>\").addClass(\"container-okcancel-popup\");\n  var message = $(\"<div></div>\").addClass(\"message-okcancel-popup ui-light-bevel-border biz-gradient-v\");\n  var buttonsContainer = $(\"<div></div>\").addClass(\"buttonsContainer-okcancel-popup biz-actions-bar\");\n  message.text(params.message);\n  message.appendTo(container);\n  var buttonOk = $(\"<span></span>\").addClass(\"ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  var buttonCancel = $(\"<span></span>\").addClass(\"cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  buttonOk.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-ok\"));\n  buttonCancel.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-cancel\"));\n  buttonOk.appendTo(buttonsContainer);\n  buttonCancel.appendTo(buttonsContainer);\n  buttonsContainer.appendTo(container);\n  container.appendTo(popup.content);\n  var okHandler = function okHandler() {\n    popup.close();\n    if (typeof onOk == \"function\") {\n      onOk();\n    }\n  };\n  buttonOk.click(okHandler);\n  var cancelHandler = function cancelHandler() {\n    popup.close();\n    if (typeof onCancel == \"function\") {\n      onCancel();\n    }\n  };\n  buttonCancel.click(cancelHandler);\n  return {\n    close: function close() {\n      popup.close();\n    },\n    ok: function ok() {\n      okHandler();\n    },\n    cancel: function cancel() {\n      cancelHandler();\n    } };\n\n};\n/*\r\n    * Create an generic dialog\r\n    */\nbizagi.dialog = function (params) {\n\n  var dialog = $(\"<div></div>\").addClass(\"biz-dialog\");\n  var msg = $(\"<p></p>\");\n  msg.text(params.message || \"\");\n  msg.appendTo(dialog);\n  dialog.appendTo($(\"body\", document));\n  dialog.dialog({\n    title: params.title,\n    modal: true,\n    buttons: params.buttons,\n    close: function close() {\n      dialog.dialog(\"destroy\");\n    } });\n\n};\n/*\r\n    *   Close the quirks mode popup window\r\n    */\nbizagi.closeQuirksModePopup = function () {\n  var quirksPopup = window.BAQuirksPopupWindow;\n  window.BAQuirksPopupWindow = null;\n  try {\n    if (quirksPopup)\n    quirksPopup.close();\n  } catch (e) {}\n};\n/**\r\n    * Get css class definition to string\r\n    */\nbizagi.getStyle = function (style) {\n  var pathName = location.href.replace(\"/default.aspx\", \"\");\n  var getFontFace = style.match(/@/) ? true : false;\n  var matchFontFace = \"@font-face\";\n  var getAllChildrens = style.match(/\\*/) ? true : false;\n  var matchStyles = new RegExp(style.replace(\"*\", \"\"), \"g\");\n  var stringCss = \"\";\n  var css;\n  if (style == \"\") {\n    return \"\";\n  }\n  var awesomeBrowser = function awesomeBrowser(style) {\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].rules || document.styleSheets[file].cssRules;\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (document.styleSheets[file].href != null && (document.styleSheets[file].href.match(/less.css/g) == null || BIZAGI_ENVIRONMENT == \"release\")) {\n\n            var cssTextOriginal = css[key].cssText ? css[key].cssText : '';\n            // Get all matches\n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n\n                if ($.browser.webkit) {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"\");\n                } else if ($.browser.msie && $.browser.version == \"8.0\") {\n                  stringCss += css[key].style.cssText;\n                } else {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"../../jquery/workportal/css/desktop\");\n                }\n              }\n            } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n              stringCss += css[key].cssText;\n            }\n\n            // Get @font-face\n            if (getFontFace) {\n              if (css[key] != undefined && cssTextOriginal != undefined) {\n                if (cssTextOriginal.indexOf(matchFontFace) != -1) {\n\n                  if ($.browser.webkit) {\n                    stringCss += cssTextOriginal.replace(/jquery\\/workportal\\/css\\/desktop\\//g, \"\").replace(/\\(path\\)/g, \"\");\n                  } else {\n                    stringCss += cssTextOriginal.replace(/\\(path\\)/g, \"../../\");\n                  }\n\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var suckBrowser = function suckBrowser(style) {\n    if ($.browser.version == \"8.0\") {\n      // That is crazy, but it has the same document.styleSheets structure to chrome and mozilla\n      return awesomeBrowser(style);\n    }\n    var lastLevel;\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].cssRules || document.styleSheets[file].rules;\n\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (BIZAGI_ENVIRONMENT == \"release\") {\n            // Get all matches \n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          } else if (css[key].href != null && css[key].href != undefined && css[key].href.match(/less.css/g) == null) {\n            // Get all matches \n            lastLevel = css[key].styleSheet.cssRules || [];\n            for (var n = 0; n < lastLevel.length; n++) {\n              if (getAllChildrens) {\n                if ((lastLevel[n].selectorText != undefined || lastLevel[n].selectorText != null) && lastLevel[n].selectorText.match(matchStyles) != null) {\n                  //stringCss += lastLevel[n].cssText;\n                  stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n                }\n              } else if (lastLevel[n].selectorText != undefined && lastLevel[n].selectorText == style) {\n                // stringCss += lastLevel[n].cssText;\n                stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var result = $.browser.msie ? suckBrowser(style) : awesomeBrowser(style);\n  return result;\n};\n/**\r\n    * Set and retrieve Cookie\r\n    */\nbizagi.cookie = function (key, value, options) {\n  // key and at least value given, set cookie...\n  if (arguments.length > 1 && String(value) !== \"[object Object]\") {\n    options = $.extend({}, options);\n    if (value === null || value === undefined) {\n      options.expires = -1;\n    }\n\n    if (typeof options.expires === 'number') {\n      var days = options.expires,\n      t = options.expires = new Date();\n      t.setDate(t.getDate() + days);\n    }\n\n    value = String(value);\n    return document.cookie = [\n    encodeURIComponent(key), '=',\n    options.raw ? value : encodeURIComponent(value),\n    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n    options.path ? '; path=' + options.path : '',\n    options.domain ? '; domain=' + options.domain : '',\n    options.secure ? '; secure' : ''].\n    join('');\n  }\n\n  // key and possibly options given, get cookie...\n  options = value || {};\n  var result,decode = options.raw ? function (s) {\n    return s;\n  } : decodeURIComponent;\n  return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;\n};\n/**\r\n    * Returns a random integer between min and max\r\n    */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    * Set global context values\r\n    * @param params onject\r\n    * @param reset boolean\r\n    */\nbizagi.util.setContext = function (params, reset) {\n  params = params || {};\n  reset = reset || false;\n  if (reset) {\n    bizagi.context = {};\n  }\n  $.each(params, function (key, value) {\n    bizagi.context[key] = value;\n  });\n\n  // Fix camel case in idWorkItem Property\n  bizagi.context[\"idWorkItem\"] = bizagi.context[\"idWorkitem\"];\n};\n\nbizagi.util.reloadCSS = function () {\n  var queryString = '?reload=' + new Date().getTime();\n  $('link[rel=\"stylesheet\"]').each(function () {\n    this.href = this.href.replace(/\\?.*|$/, queryString);\n  });\n};\n\n/**\r\n    * Control recursive calls of setTimeout\r\n    * @param params json {name:name of call,call: function call}\r\n    * @return void\r\n    */\nbizagi.util.setInterval = function (params) {\n  var _name = params.name || 'default';\n  var _call = params.call || function () {};\n  var _params = params.params || {};\n  var _singleton = params.singleton || false;\n  var _timeOut = params.timeout || 5000;\n  var _maxIterations = params.iterations || 1000;\n  var _context = params.context || \"true;\";\n  // If callback its diferent to context, remove from hash\n  var _killWhenExitContext = params.hasOwnProperty('killWhenExitContext') ? params.killWhenExitContext : true;\n  bizagi.timeOut = bizagi.timeOut || {};\n  if (bizagi.timeOut[_name] == undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n  // Check if singleton (run once)\n  if (_singleton && bizagi.timeOut[_name] != undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n\n  bizagi.timeOut[_name].push({\n    name: _name,\n    params: _params,\n    call: _call,\n    singleton: _singleton,\n    timeOut: _timeOut,\n    iterations: 0,\n    maxIterations: _maxIterations,\n    context: _context,\n    killWhenExitContext: _killWhenExitContext,\n    itsRunning: false,\n    timeInit: Math.round(new Date().getTime()) });\n\n  var executeTimeOut = function executeTimeOut() {\n    $.each(bizagi.timeOut, function (k, v) {\n      $.each(v, function (key, value) {\n        var now = Math.round(new Date().getTime());\n        var actualIterations = Math.round((now - value.timeInit) / value.timeOut);\n        bizagi.timeOut[value.name][key]['iterations'] = actualIterations;\n        if (actualIterations < value.maxIterations) {\n          // Check context\t\t\t\t\t\n          if (eval(value.context)) {\n            if (!value.itsRunning) {\n              if (value.params)\n                // Create a virtual function to IE\n                if ($.browser.msie) {\n                  var ieFunction = function ieFunction() {\n                    return value.call(value.params);\n                  };\n                }\n\n              bizagi.timeOut[value.name][key]['pointer'] = $.browser.msie ? setInterval(ieFunction, value.timeOut, 'JavaScript') : setInterval(value.call, value.timeOut, value.params);\n              bizagi.timeOut[value.name][key]['itsRunning'] = true;\n            }\n          } else if (value.killWhenExitContext) {\n            bizagi.timeOut[value.name].splice(key, 1);\n            clearTimeout(value.pointer);\n          } else {\n            bizagi.timeOut[value.name][key]['itsRunning'] = false;\n            clearTimeout(value.pointer);\n          }\n        } else {\n          // Cancel timeout and remove call from hash\n          clearTimeout(value.pointer);\n          bizagi.timeOut[value.name].splice(key, 1);\n        }\n      });\n    });\n  };\n\n  if (!bizagi.timeOutRunning) {\n    bizagi.timeOutRunning = true;\n    setInterval(executeTimeOut, 1000);\n  }\n};\nbizagi.util.isDate = function (value) {\n  // type A) dd/mm/aaaa \n  // type B) aaaa/mm/dd\n  // type C) aa/mm/dd\n\n  var dateRegEx_typeA = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n  dateRegEx_typeB = /^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/,\n  dateRegEx_typeC = /^\\d{1,2}\\/\\d{1,2}\\/\\d{1,2}$/,\n  timeRegEx = /^\\d{1,2}:\\d{2}(:\\d{2})?(\\s[aApP][mM])?$/,\n  result = false,\n  resultDate = false,\n  hasTime = false,\n  resultTime = false;\n\n  value = value || '';\n\n  var arrayDate = value.toString().split(\" \"),\n  dateField,\n  timeField;\n\n  dateField = arrayDate[0];\n\n  if (dateRegEx_typeA.test(dateField) || dateRegEx_typeB.test(dateField) || dateRegEx_typeC.test(dateField)) {\n    resultDate = true;\n  }\n\n  if (arrayDate.length > 1) {\n\n    timeField = arrayDate[1];\n\n    hasTime = true;\n\n    //Checks if AM/PM included in the time element\n    if (arrayDate.length == 3)\n    timeField = timeField + ' ' + arrayDate[2];\n\n    if (timeRegEx.test(timeField))\n    resultTime = true;\n  }\n\n  if (hasTime)\n  result = resultDate && resultTime;else\n\n  result = resultDate;\n\n  return result;\n};\n/*\r\n    *   Encodes unicode characters into html\r\n    */\nbizagi.util.unicode2htmlencode = function (input) {\n  // Shorten\n  var natCCA = 'charCodeAt';\n  input = input.replace(/\\r\\n/g, '\\n');\n  var i,b1,hex,\n  len = input.length,\n  htmlHex = '';\n  for (i = 0; i < len; i++) {\n    b1 = input[natCCA](i);\n    hex = b1.toString(16);\n    htmlHex += '&#x' + hex + ';';\n  }\n  return htmlHex;\n};\n/*\r\n    *   Gets the head element from the DOM\r\n    */\nbizagi.util.getHeadElement = function () {\n  var hd = document.getElementsByTagName(\"head\")[0];\n  var docEl = document && document.documentElement;\n  if (!hd) {\n    hd = document.createElement(\"head\");\n    docEl.insertBefore(hd, docEl.firstChild);\n  }\n  // replace head so it runs fast next time.\n  bizagi.util.getHeadElement = function () {\n    return hd;\n  };\n  return hd;\n};\n/*\r\n    *   Loads a css text into the current document\r\n    */\nbizagi.util.loadStyle = function (styleText, layoutGuid) {\n\n  var element = document.getElementById(layoutGuid);\n\n  if (styleText && !element) {// less\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.id = layoutGuid;\n    if (css.styleSheet) {// IE\n      css.styleSheet.cssText = styleText;\n    } else {\n      (function (node) {\n        if (css.childNodes.length) {\n          if (css.firstChild.nodeValue !== node.nodeValue) {\n            css.replaceChild(node, css.firstChild);\n          }\n        } else {\n          css.appendChild(node);\n        }\n      })(document.createTextNode(styleText));\n    }\n    bizagi.util.getHeadElement().appendChild(css);\n  }\n};\n\n/*\r\n    *   Loads a css text of the icon widget into the current document\r\n    */\nbizagi.util.loadIconStyle = function (icon, userfieldname) {\n  bizagi.log(\"bizagi.util.loadIconStyle\");\n  var css = document.createElement(\"style\");\n  css.type = \"text/css\";\n\n  var cssText = \".mtool-item-image-\" + userfieldname + \" { background:url(data:image/png;base64,\" + icon + \"); }\";\n  css.innerHTML = cssText;\n\n  bizagi.util.getHeadElement().appendChild(css);\n};\n\nbizagi.util.formatDecimalAndMoneyCell = function (tableData, externalMoneyFormat) {\n  var moneyFormat, decimalFormat, i, j;\n  var externalDecimalFormat = {\n    decimalSymbol: externalMoneyFormat.decimalSeparator,\n    digitGroupSymbol: externalMoneyFormat.groupSeparator,\n    roundToDecimalPlace: externalMoneyFormat.decimalDigits };\n\n  var defaultMoneyFormat = {\n    symbol: \"\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n\n  moneyFormat = $.extend(defaultMoneyFormat, externalMoneyFormat);\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n\n  for (i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n    if (tableData.columnTitle[i].type.toUpperCase() == \"FLOAT\" || tableData.columnTitle[i].type.toUpperCase() == \"REAL\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        var numberValue = bizagi.util.formatDecimal(tableData.rows[j].fields[i], decimalFormat);\n        //Gets rids of unnecessary zeros\n        if (bizagi.override.removeTrailingZeros === true) {\n          var positive = true;\n          if (numberValue.toString().indexOf(\")\") != -1) {\n            positive = false;\n            numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n          }\n          var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"$1\");\n          re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"\");\n\n          if (!positive) numberValue = \"(\" + numberValue + \")\";\n        }\n        tableData.rows[j].fields[i] = numberValue;\n      }\n    }\n  }\n\n  return tableData;\n};\n\n\nbizagi.util.formatBoolean = function (value) {\n  if (bizagi.util.parseBoolean(value) == true) {\n    return bizagi.localization.getResource(\"render-boolean-yes\");\n  } else if (bizagi.util.parseBoolean(value) == false) {\n    return bizagi.localization.getResource(\"render-boolean-no\");\n  } else {\n    return \"\";\n  }\n};\n\nbizagi.util.formatInvariantBoolean = function (htmlContent) {\n  htmlContent = htmlContent || \"\";\n  $(\".formatBoolean\", htmlContent).not(\".formatted\").each(function (index, element) {\n    var $element = $(element);\n    var content = $element.html();\n    $element.addClass(\"formatted\");\n    try {\n      var formatBoolean = bizagi.util.formatBoolean(content);\n      $element.html(formatBoolean);\n    } catch (e) {\n      $element.html(content);\n    }\n  });\n};\n\nbizagi.util.formatDecimal = function (value, format) {\n  var i = $(\"<i/>\").text(value);\n  if (i.formatCurrency) {i.formatCurrency(format);}\n  return i.text();\n};\n\n/*\r\n    * Format monetary cells\r\n    */\nbizagi.util.formatMonetaryCells = function (tableData, moneyFormat) {\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n\n  moneyFormat = moneyFormat || defaultFormat;\n\n  for (var i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (var j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n  }\n\n  return tableData;\n\n};\n\n/*\r\n    * Format monetary values, the format must have the structure of the next example:\r\n    *\r\n    * var defaultFormat = {\r\n    *        symbol: \"\",\r\n    *        decimalSeparator: \",\",\r\n    *        groupSeparator: \".\",\r\n    *        decimalDigits: \"2\"\r\n    *    };\r\n    */\nbizagi.util.formatMoney = function (value, format) {\n  var result = \"\",\n  tmpResult = \"\",\n  intSection = \"\",\n  decimalSection = \"\",\n  decimalResult = \"\",\n  isNegative = value < 0;\n\n  if (value == null) {\n    value = \"\";\n  }\n\n  value = value.toString();\n\n  if (value.length >= 1) {\n    var decimalDigitPosition = value.indexOf(\".\");\n\n    if (decimalDigitPosition > 0) {\n      value = bizagi.util.fixDecimalDigits(value, format.decimalDigits);\n      intSection = value.substring(0, decimalDigitPosition).replace(/\\D/g, '');\n    } else {\n      var zeroChar = \"0\";\n\n      for (var i = 0; i < format.decimalDigits; i++) {\n        decimalResult += zeroChar;\n      }\n      intSection = value.replace(/\\D/g, '');\n    }\n\n    //take only the number characters removing other characters\n    value = value.replace(/\\D/g, '');\n    //take the decimal section\n    if (format.decimalDigits > 0) {\n      decimalSection = decimalDigitPosition > 0 ? format.decimalSeparator + value.substring(value.length - format.decimalDigits, value.length) : format.decimalSeparator + decimalResult;\n    } else {\n      decimalSection = \"\";\n    }\n    //insert groupSeparators into int section\n    if (intSection.length > 3) {\n      var count = 0;\n\n      //insert separator from end to begin\n      for (var i = intSection.length - 1; i >= 0; i--) {\n        if (count == 3) {\n          tmpResult += \".\";\n          count = 0;\n        }\n        tmpResult += intSection[i];\n        count += 1;\n      }\n      //revert the string to get the result value\n      for (var i = tmpResult.length - 1; i >= 0; i--) {\n        result += tmpResult[i];\n      }\n    } else {\n      result = intSection;\n    }\n\n    //replace the correct group separator\n    result = result.replaceAll(\".\", format.groupSeparator);\n    //unify all sections and finish format\n    if (isNegative) {\n      var negativeFormat = bizagi.localization.getResource('numericFormat').negativeFormat;\n      result = negativeFormat.replace(\"%s\", format.symbol).replace(\"%n\", result + decimalSection);\n    } else {\n      result = format.symbol + result + decimalSection;\n    }\n\n    return result;\n  } else {\n    return value;\n  }\n\n\n};\n\n/**\r\n    * Remove all characters except numbers\r\n    */\nbizagi.util.getOnlyNumbersByString = function (stringValue) {\n  return stringValue.replace(/\\D/g, '');\n};\n\n/*\r\n       This method was created because the \"toFixed()\" JavaScript method in some cases round the numbers when it is not needed.\r\n       Can return string or number.\r\n   */\nbizagi.util.fixDecimalDigits = function (value, decimalDigits) {\n  var decimalDigitPosition,\n  intSection,\n  decimalSection;\n\n  decimalDigitPosition = value.indexOf('.');\n  intSection = value.substring(0, decimalDigitPosition);\n  decimalSection = value.substring(decimalDigitPosition + 1, value.length);\n\n  if (decimalDigits > decimalSection.length) {\n    for (var i = decimalSection.length; i < decimalDigits; i++) {\n      value += '0';\n    }\n  } else {\n    value = parseFloat(value).toFixed(decimalDigits);\n  }\n\n  return value;\n\n};\n\n/*\r\n    * Format html  money\r\n    */\nbizagi.util.formatInvariantMoney = function (htmlContent, moneyFormat) {\n  htmlContent = htmlContent || \"\";\n  var defaultFormat = {\n    symbol: moneyFormat.symbol,\n    decimalSeparator: moneyFormat.decimalSeparator || \",\",\n    groupSeparator: moneyFormat.groupSeparator || \".\",\n    decimalDigits: moneyFormat.decimalDigits || \"2\" };\n\n  if (moneyFormat.allowDecimals === false) {\n    defaultFormat.decimalDigits = \"0\";\n  }\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = parseFloat(content);\n      if (!isNaN(value)) {\n        var formatMoney = bizagi.util.formatMoney(value, defaultFormat);\n        $(elem).html(formatMoney);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html  number\r\n    */\nbizagi.util.formatInvariantNumber = function (htmlContent, numberFormat) {\n  htmlContent = htmlContent || \"\";\n  var decimalDigits = \"2\";\n  if (numberFormat.decimalDigits == \"0\")\n  decimalDigits = \"0\";else\n\n  decimalDigits = numberFormat.decimalDigits || \"2\";\n\n  var groupSeparator = bizagi.util.isString(numberFormat.groupSeparator) && numberFormat.groupSeparator ? numberFormat.groupSeparator : \".\";\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: numberFormat.decimalSeparator || \",\",\n    groupSeparator: numberFormat.groupSeparator || numberFormat.thousands ? groupSeparator : \"\",\n    decimalDigits: decimalDigits };\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var containsLetter = content.match(/[a-zA-Z]/);\n      var value = containsLetter != null && containsLetter.length > 0 ? NaN : parseFloat(content);\n      if (!isNaN(value)) {\n        var formatNumber = bizagi.util.formatMoney(value, defaultFormat);\n        if (numberFormat.percentage) {\n          formatNumber = formatNumber.toString() + \"%\";\n        }\n        $(elem).html(formatNumber);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html with invariant date\r\n    */\nbizagi.util.formatInvariantDate = function (htmlContent, dateFormat) {\n  htmlContent = htmlContent || \"\";\n  dateFormat = dateFormat || \"MM/dd/yyyy hh:mm:ss\";\n  $(\".formatDate\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = new Date(content);\n      var dateTimeFormat = dateFormat;\n\n      if (bizagi.util.isValidDate(value))\n      dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n      var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat /*self.getResource(\"dateFormat\")*/);\n      $(elem).html(formatDate);\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/**\r\n    * Return format date with resources from string invariant date. It use the format specified\r\n    * @param stringInvariantDate\r\n    */\nbizagi.util.formatDateFromInvariantStringDate = function (stringInvariantDate) {\n  if (bizagi.util.isValidDate(stringInvariantDate)) {\n    var dateTimeFormat = bizagi.localization.getResource(\"dateFormat\") + ' ' + bizagi.localization.getResource(\"timeFormat\");\n    var value = new Date(stringInvariantDate);\n    dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n    var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat);\n    return formatDate;\n  }\n  return stringInvariantDate || \"\";\n};\n\nbizagi.util.getFormatDate = function (dateValue, defaultFormatDate) {\n  var dateTimeFormat = defaultFormatDate;\n\n  var H = dateValue.getHours();\n  var m = dateValue.getMinutes();\n  var s = dateValue.getSeconds();\n  var ms = dateValue.getMilliseconds();\n  var hide = bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;\n\n  //Don't show time when hour, minutes, seconds and milliseconds are 0\n  if (H === 0 && m === 0 && s === 0 && ms === 0 && hide)\n  dateTimeFormat = bizagi.localization.getResource(\"dateFormat\");\n\n  return dateTimeFormat;\n};\n\n/**\r\n    * Format value by dataType\r\n    */\nbizagi.util.formatValueByDataType = function (value, dataType) {\n  /**\r\n                                                                 * Types Definedin Backend\r\n                                                                 * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n                                                                 Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n                                                                 MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n                                                                 Stakeholder = 30,ActivityItems = 31\r\n                                                                 *\r\n                                                                 * */\n  var result = value;\n  switch (dataType) {\n    case \"NText\":\n    case 23:\n    case \"Char\":\n    case 14:\n    case \"VarChar\":\n    case 15:\n    case \"Text\":\n    case 16:\n      if (value && value.length > 30) {\n        result = bizagi.util.replaceLineBreak(value);\n      }\n      break;\n    case \"Boolean\":\n    case 5:\n    case \"Binary\":\n    case 17:\n      result = bizagi.util.formatBoolean(value);\n      break;\n    case \"Int\":\n    case 2:\n    case \"BigInt\":\n    case 1:\n    case \"SmallInt\":\n    case 3:\n    case \"TinyInt\":\n    case 4:\n    case \"Numeric\":\n    case 7:\n      result = value === undefined || value === null ? \"\" : value;\n      break;\n    case \"Money\":\n    case 8:\n      result = bizagi.util.formatMonetaryCell(value);\n      break;\n    case \"Float\":\n    case 10:\n    case \"Real\":\n    case 11:\n    case \"Decimal\":\n    case 6:\n      result = bizagi.util.formatDecimalCell(value);\n      break;\n    case \"DateTime\":\n    case 12:\n    case \"SmallDateTime\":\n    case 13:\n      result = bizagi.util.formatDateFromInvariantStringDate(value);\n      break;}\n\n  if (result == null) {\n    result = \"\";\n  }\n  return result;\n};\n\n/**\r\n    * Check if it is a valid date\r\n    */\nbizagi.util.isValidDate = function (params) {\n  if (typeof params != \"undefined\" && params != null) {\n    var parseDate = new Date(params);\n    return !isNaN(parseDate.valueOf());\n  } else return false;\n};\n\n/*\r\n    *   Defines a date time formatter that will be available globally\r\n    */\nbizagi.util.monthNames = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\nbizagi.util.dayNames = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');\n\nbizagi.util.dateFormatter = new function () {\n  this.LZ = function (x) {\n    return (x < 0 || x > 9 ? \"\" : \"0\") + x;\n  };\n  /*\r\n      *   isDate ( date_string, format_string )\r\n      *   Returns true if date string matches format of format string and\r\n      *   is a valid date. Else returns false.\r\n      *   It is recommended that you trim whitespace around the value before\r\n      *   passing it to this function, as whitespace is NOT ignored!\r\n      */\n  this.isDate = function (val, format) {\n    var date = this.getDateFromFormat(val, format);\n    if (date == 0) {\n      return false;\n    }\n    return true;\n  };\n\n  this.getRelativeTime = function (date, dateFormat, onlyUnitsTime, timeZone) {\n\n    var self = this;\n    var now = timeZone ? new Date(moment().tz(bizagi.currentUser.timeZoneName).format()) : new Date();\n    var time = date instanceof Date ? date : kendo.parseDate(date, dateFormat);\n    var diff = now.getTime() - time.getTime();\n    var timeDiff = getTimeDiffDescription(diff, 'year', 31536000000, onlyUnitsTime);\n\n    if (!timeDiff) {\n      timeDiff = getTimeDiffDescription(diff, 'month', 2628000000, onlyUnitsTime);\n      if (!timeDiff) {\n        timeDiff = getTimeDiffDescription(diff, 'week', 604800000, onlyUnitsTime);\n        if (!timeDiff) {\n          timeDiff = getTimeDiffDescription(diff, 'day', 86400000, onlyUnitsTime);\n          if (!timeDiff) {\n            timeDiff = getTimeDiffDescription(diff, 'hour', 3600000, onlyUnitsTime);\n            if (!timeDiff) {\n              timeDiff = getTimeDiffDescription(diff, 'minute', 60000, onlyUnitsTime);\n              if (!timeDiff) {\n                if (onlyUnitsTime) {\n                  if (diff === 0) {\n                    timeDiff = getTimeDiffDescription(diff + 1, 'minute', 1, onlyUnitsTime);\n                  } else {\n                    timeDiff = getTimeDiffDescription(diff, 'minute', 1, onlyUnitsTime);\n                  }\n                } else {\n                  timeDiff = getTimeDiffDescription(diff, 'second', 2000, onlyUnitsTime);\n                  if (!timeDiff) {\n                    timeDiff = bizagi.localization.getResource(\"workportal-relativetime-momentago\");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return timeDiff;\n\n    /*\r\n                      * Get Time Difference\r\n                      */\n    function getTimeDiffDescription(diff, unit, timeDivisor, onlyUnitsTime) {\n      var unitAmount = (diff / timeDivisor).toFixed(0);\n\n      if (unitAmount > 0) {\n        if (onlyUnitsTime) {\n          return unitAmount == 1 ? bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount) : bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount);\n        } else {\n          var resourceAgo = bizagi.localization.getResource(\"workportal-relativetime-ago\");\n          return unitAmount == 1 ? resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount)) : resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount));\n        }\n\n      } else {\n        return null;\n      }\n    }\n  };\n\n  /*\r\n      *   compareDates(date1,date1format,date2,date2format)\r\n      *   Compare two date strings to see which is greater.\r\n      *   Returns:\r\n      *   1 if date1 is greater than date2\r\n      *   0 if date2 is greater than date1 of if they are the same\r\n      *  -1 if either of the dates is in an invalid format\r\n      */\n  this.compareDates = function (date1, dateformat1, date2, dateformat2) {\n    var d1 = getDateFromFormat(date1, dateformat1);\n    var d2 = getDateFromFormat(date2, dateformat2);\n    if (d1 == 0 || d2 == 0) {\n      return -1;\n    } else if (d1 > d2) {\n      return 1;\n    }\n    return 0;\n  };\n  /*\r\n      *   getDifferenceBetweenDates(date1,date2, unit)\r\n      *   Compare two date objects to see difference between them. The number result by unit specified.\r\n      *\r\n      *   Returns:\r\n      *   Difference value between two dates.\r\n      *   Message string if either of the dates is in an invalid format\r\n      */\n  this.getDifferenceBetweenDates = function (date1, date2, unit) {\n    if (date1 instanceof Date && date1 instanceof Date) {\n      switch (unit) {\n        case \"seconds\":\n          return (date2.getTime() - date1.getTime()) / 1000;\n        case \"milliseconds\":\n          return date2.getTime() - date1.getTime();\n        default:\n          return \"unit is not Defined\";}\n\n    } else {\n      return \"one param not is Date\";\n    }\n\n  };\n  /*\r\n      *   formatDate (date_object, format)\r\n      *   Returns a date in the output format specified.\r\n      *   The format string uses the same abbreviations as in getDateFromFormat()\r\n      */\n  this.formatDate = function (date, format, i18n) {\n    // Check if date is valid\n    if (!bizagi.util.isValidDate(date) || date == 0) {\n      return \"\";\n    }\n\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    format = format + \"\";\n    var result = \"\";\n    var i_format = 0;\n    var c;\n    var token;\n    var y = date.getFullYear() + \"\";\n    var M = date.getMonth() + 1;\n    var d = date.getDate();\n    var E = date.getDay();\n    var H = date.getHours();\n    var m = date.getMinutes();\n    var s = date.getSeconds();\n    var f = date.getMilliseconds();\n    // Convert real date parts into formatted versions\n    var value = new Object();\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    if (y.length < 4 || y.charAt(0) === \"-\" && y.length < 5) {\n      y = \"\" + (y - 0 + 1900);\n    }\n    value[\"y\"] = \"\" + y;\n    value[\"yyyy\"] = y;\n    value[\"yy\"] = y.substring(2, 4);\n    value[\"M\"] = M;\n    value[\"MM\"] = this.LZ(M);\n    value[\"MMM\"] = monthNames[M + 11];\n    value[\"MMMM\"] = monthNames[M - 1];\n    value[\"NNN\"] = monthNames[M + 11];\n    value[\"d\"] = d;\n    value[\"dd\"] = this.LZ(d);\n    value[\"ddd\"] = dayNames[E + 7];\n    value[\"dddd\"] = dayNames[E];\n    value[\"E\"] = dayNames[E + 7];\n    value[\"EE\"] = dayNames[E];\n    value[\"H\"] = H;\n    value[\"HH\"] = this.LZ(H);\n    value[\"tt\"] = H < 12 ? \"am\" : \"pm\";\n    value[\"TT\"] = H < 12 ? \"AM\" : \"PM\";\n\n\n    if (H == 0) {\n      value[\"h\"] = 12;\n    } else if (H > 12) {\n      value[\"h\"] = H - 12;\n    } else {\n      value[\"h\"] = H;\n    }\n    value[\"hh\"] = this.LZ(value[\"h\"]);\n    if (H > 11) {\n      value[\"K\"] = H - 12;\n    } else {\n      value[\"K\"] = H;\n    }\n    value[\"k\"] = H + 1;\n    value[\"KK\"] = this.LZ(value[\"K\"]);\n    value[\"kk\"] = this.LZ(value[\"k\"]);\n    if (H > 11) {\n      value[\"a\"] = \"PM\";\n    } else {\n      value[\"a\"] = \"AM\";\n    }\n    value[\"m\"] = m;\n    value[\"mm\"] = this.LZ(m);\n    value[\"s\"] = s;\n    value[\"ss\"] = this.LZ(s);\n    value[\"FFF\"] = f;\n\n    while (i_format < format.length) {\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      if (value[token] != null) {\n        result = result + value[token];\n      } else {\n        result = result + token;\n      }\n    }\n    return result;\n  };\n  /*\r\n      *   getDateFromFormat( date_string , format_string )\r\n      *\r\n      *   This function takes a date string and a format string. It matches\r\n      *   If the date string matches the format string, it returns the \r\n      *   getTime() of the date. If it does not match, it returns 0.\r\n      */\n  this.getDateFromFormat = function (val, format, i18n) {\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    val = val + \"\";\n    format = format + \"\";\n    var i_val = 0;\n    var i_format = 0;\n    var c;\n    var token;\n    var x = 0,\n    y = 0;\n    var now = new Date();\n    var year = now.getYear();\n    var month = now.getMonth() + 1;\n    var date = 1;\n    var hh = now.getHours();\n    var mm = now.getMinutes();\n    var ss = now.getSeconds();\n    var FFF = now.getMilliseconds();\n    var ampm = \"\";\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    while (i_format < format.length) {\n      // Get next token from format string\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      // Extract contents of value based on format token\n      if (token == \"yyyy\" || token == \"yy\" || token == \"y\") {\n        if (token == \"yyyy\") {\n          x = 4;\n          y = 4;\n        }\n        if (token == \"yy\") {\n          x = 2;\n          y = 2;\n        }\n        if (token == \"y\") {\n          x = 2;\n          y = 4;\n        }\n        year = _getInt(val, i_val, x, y);\n        if (year == null) {\n          return 0;\n        }\n        i_val += year.length;\n        if (year.length == 2) {\n          if (year > 70) {\n            year = 1900 + (year - 0);\n          } else {\n            year = 2000 + (year - 0);\n          }\n        }\n      } else if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\") {\n        month = 0;\n        for (var i = 0; i < monthNames.length; i++) {\n          var month_name = monthNames[i];\n          if (val.substring(i_val, i_val + month_name.length).toLowerCase() == month_name.toLowerCase()) {\n            if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\" && i > 11) {\n              month = i + 1;\n              if (month > 12) {\n                month -= 12;\n              }\n              i_val += month_name.length;\n              break;\n            }\n          }\n        }\n\n        //This is because bizagi assumes MM and M like integers in some cases\n        if (month == 0) {\n          month = _getInt(val, i_val, 1, 2);\n          if (month == null || month < 1 || month > 12) {\n            return 0;\n          }\n          i_val += month.length;\n        }\n\n        if (month < 1 || month > 12) {\n          return 0;\n        }\n      } else if (token == \"dddd\" || token == \"EE\" || token == \"E\") {\n        for (var j = 0; j < dayNames.length; j++) {\n          var day_name = dayNames[j];\n          if (val.substring(i_val, i_val + day_name.length).toLowerCase() == day_name.toLowerCase()) {\n            i_val += day_name.length;\n            break;\n          }\n        }\n      } else if (token == \"MM\" || token == \"M\") {\n        month = _getInt(val, i_val, 1, 2);\n        if (month == null || month < 1 || month > 12) {\n          return 0;\n        }\n        i_val += month.length;\n      } else if (token == \"dd\" || token == \"d\") {\n        date = _getInt(val, i_val, 1, 2);\n        if (date == null || date < 1 || date > 31) {\n          return 0;\n        }\n        i_val += date.length;\n      } else if (token == \"hh\" || token == \"h\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 12) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"HH\" || token == \"H\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 23) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"KK\" || token == \"K\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 11) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"kk\" || token == \"k\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 24) {\n          return 0;\n        }\n        i_val += hh.length;\n        hh--;\n      } else if (token == \"mm\" || token == \"m\") {\n        mm = _getInt(val, i_val, token.length, 2);\n        if (mm == null || mm < 0 || mm > 59) {\n          return 0;\n        }\n        i_val += mm.length;\n      } else if (token == \"ss\" || token == \"s\") {\n        ss = _getInt(val, i_val, token.length, 2);\n        if (ss == null || ss < 0 || ss > 59) {\n          return 0;\n        }\n        i_val += ss.length;\n      } else if (token == \"FFF\") {\n        ff = _getInt(val, i_val, token.length, 3);\n        if (ff == null || ff < 0 || ff > 999) {\n          return 0;\n        }\n        i_val += ff.length;\n      } else if (token == \"a\" || token == \"tt\") {\n        if (val.substring(i_val, i_val + 2).toLowerCase() == \"am\") {\n          ampm = \"AM\";\n        } else if (val.substring(i_val, i_val + 2).toLowerCase() == \"pm\") {\n          ampm = \"PM\";\n        } else {\n          return 0;\n        }\n        i_val += 2;\n      } else {\n        if (val.substring(i_val, i_val + token.length) != token) {\n          return 0;\n        } else {\n          i_val += token.length;\n        }\n      }\n    }\n\n    // Is date valid for month?\n    if (month == 2) {\n      // Check for leap year\n      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {// leap year\n        if (date > 29) {\n          return 0;\n        }\n      } else {\n        if (date > 28) {\n          return 0;\n        }\n      }\n    }\n    if (month == 4 || month == 6 || month == 9 || month == 11) {\n      if (date > 30) {\n        return 0;\n      }\n    }\n    // Correct hours value\n    if (hh < 12 && ampm == \"PM\") {\n      hh = hh - 0 + 12;\n    } else if (hh > 11 && ampm == \"AM\") {\n      hh -= 12;\n    }\n    var newdate = new Date(year, month - 1, date, hh, mm, ss);\n    return newdate;\n\n    /*\r\n                     *   Utility method for parsing in getDateFromFormat()\r\n                     */\n    function _isInteger(_val) {\n      var digits = \"1234567890\";\n      for (var k = 0; k < _val.length; k++) {\n        if (digits.indexOf(_val.charAt(k)) == -1) {\n          return false;\n        }\n      }\n      return true;\n    };\n    /*\r\n        *   Utility method for parsing in getDateFromFormat()\r\n        */\n    function _getInt(str, l, minlength, maxlength) {\n      for (var m = maxlength; m >= minlength; m--) {\n        var _token = str.substring(l, l + m);\n        if (_token.length < minlength) {\n          return null;\n        }\n        if (_isInteger(_token)) {\n          return _token;\n        }\n      }\n      return null;\n    };\n  };\n  /*\r\n      * parseDate( date_string [, prefer_euro_format] )\r\n      *\r\n      * This function takes a date string and tries to match it to a\r\n      * number of possible date formats to get the value. It will try to\r\n      * match against the following international formats, in this order:\r\n      * y-M-d   MMM d, y   MMM d,y   y-MMM-d   d-MMM-y  MMM d\r\n      * M/d/y   M-d-y      M.d.y     MMM-d     M/d      M-d\r\n      * d/M/y   d-M-y      d.M.y     d-MMM     d/M      d-M\r\n      * A second argument may be passed to instruct the method to search\r\n      * for formats like d/M/y (european format) before M/d/y (American).\r\n      * Returns a Date object or null if no patterns match.\r\n      */\n  this.parseDate = function (val) {\n    var preferEuro = arguments.length == 2 ? arguments[1] : false;\n    var generalFormats = new Array('y-M-d', 'MMM d, y', 'MMM d,y', 'y-MMM-d', 'd-MMM-y', 'MMM d');\n    var monthFirst = new Array('M/d/y', 'M-d-y', 'M.d.y', 'MMM-d', 'M/d', 'M-d');\n    var dateFirst = new Array('d/M/y', 'd-M-y', 'd.M.y', 'd-MMM', 'd/M', 'd-M');\n    var checkList = new Array(generalFormats, preferEuro ? dateFirst : monthFirst, preferEuro ? monthFirst : dateFirst);\n    var d;\n    for (var i = 0; i < checkList.length; i++) {\n      var l = window[checkList[i]];\n      for (var j = 0; j < l.length; j++) {\n        d = getDateFromFormat(val, l[j]);\n        if (d != 0) {\n          return new Date(d);\n        }\n      }\n    }\n    return null;\n  };\n  /*\r\n      *   Method to analyze a time format and checks separator, and hour format, and seconds\r\n      */\n  this.analyzeTimeFormat = function (timeFormat) {\n    var i = 0;\n    var c;\n    // Define return object\n    var returnObj = {\n      show24Hours: false,\n      showSeconds: false,\n      separator: \":\" };\n\n    // Analize format\n    var token,lastToken = \"\";\n    while (i < timeFormat.length) {\n      // Get next token from format string\n      c = timeFormat.charAt(i);\n      token = \"\";\n      while (timeFormat.charAt(i) == c && i < timeFormat.length) {\n        token += timeFormat.charAt(i++);\n      }\n\n      // Extract contents of value based on format token\n      if (token == \"hh\" || token == \"h\") {\n        lastToken = token;\n        returnObj.show24Hours = false;\n      } else if (token == \"HH\" || token == \"H\") {\n        lastToken = token;\n        returnObj.show24Hours = true;\n      } else if (token == \"mm\" || token == \"m\") {\n        lastToken = token;\n      } else if (token == \"ss\" || token == \"s\") {\n        lastToken = token;\n        returnObj.showSeconds = true;\n      } else if (token == \"a\") {\n        lastToken = token;\n      } else {\n        if (lastToken.toUpperCase() == \"H\" || lastToken.toUpperCase() == \"HH\") {\n          returnObj.separator = token;\n        }\n      }\n    }\n\n    return returnObj;\n  };\n  this.getDateFromInvariant = function (value, showTime) {\n    value = value == null ? \"\" : value;\n    value = typeof value != \"string\" ? value.toString() : value;\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" H:mm:ss\" : \"\");\n    if (showTime) {\n      if (value && (value.toLowerCase().indexOf(\"am\") > 0 || value.toLowerCase().indexOf(\"pm\") > 0)) {\n        INVARIANT_FORMAT = \"MM/dd/yyyy h:mm:ss a\";\n      }\n    }\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    } else if (date == 0 && showTime && value != null && value != \"\") {\n      INVARIANT_FORMAT = \"MM/dd/yyyy\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n      date.setHours(0, 0, 0, 0);\n    }\n\n    return date;\n  };\n  this.formatInvariant = function (date, showTime) {\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" HH:mm:ss\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, INVARIANT_FORMAT);\n    return formattedDate;\n  };\n  this.getDateFromISO = function (value, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    // If the date could not be parsed, try it out with seconds\n    if (date == 0 && showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm:ss\" : \"\");\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    }\n\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd HH:mm\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      // If the date could not be parsed, try it out with seconds\n      if (date == 0) {\n        ISO_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n        date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      }\n    }\n\n    return date;\n  };\n  this.formatISO = function (date, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, ISO_FORMAT);\n    return formattedDate;\n  };\n\n  this.formatISO8601 = function (dateObject, restartTimeToMidnight) {\n    var restartTimeToMidnight = restartTimeToMidnight || false;\n    var ISO_FORMAT8601 = \"yyyy-MM-ddTHH:mm:ss\";\n    if (restartTimeToMidnight) {\n      dateObject.setHours(0, 0, 0, 0);\n    }\n    return bizagi.util.dateFormatter.formatDate(dateObject, ISO_FORMAT8601);\n  };\n\n  this.isFormatISO8601 = function (stringDate) {\n    var ISO_8601_WITH_TIME = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n    return ISO_8601_WITH_TIME.test(stringDate);\n  };\n\n  this.sleep = function (delay) {\n    // Delay in miliseconds\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay) {\n      // wait\n    }\n  };\n  this.getDateFormatByDatePickerJqueryUI = function () {\n    return bizagi.localization.getResource(\"dateFormat\").replace(\"yyyy\", \"yy\");\n  };\n}();\n\nbizagi.util.sleepUntil = function (callback, delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepUntil() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      var continueWaiting = !callback();\n      if (!continueWaiting) {\n        def.resolve();\n        clearTimeout(timeout);\n        return;\n      } else\n      internalSleepUntil(name);\n    }, delay);\n  }\n  internalSleepUntil();\n  return def.promise();\n};\n\nbizagi.util.sleepFor = function (delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepFor() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      def.resolve();\n      clearTimeout(timeout);\n    }, delay);\n  }\n  internalSleepFor();\n  return def.promise();\n};\n\n\n/*\r\n    * Use localStorage in html5 verfiy supports and operations \r\n    * http://dev.w3.org/html5/webstorage/#dom-storage-setitem\r\n    */\n\nbizagi.util.browserSupportLocalStorage = function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n};\n/*\r\n    *set the item  in the local storage\r\n    */\nbizagi.util.setItemLocalStorage = function (key, value) {\n  if (bizagi.util.browserSupportLocalStorage()) {\n    localStorage.setItem(key, value);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nbizagi.util.getItemLocalStorage = function (key) {\n  return localStorage.getItem(key);\n};\n\nbizagi.util.removeItemLocalStorage = function (key) {\n  localStorage.removeItem(key);\n};\n\nbizagi.util.clearLocalStorage = function () {\n  if (bizagi.util.browserSupportLocalStorage())\n  localStorage.clear();\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n\n// Fix problem with console.log when we forgot to remove it\n(function () {\n  var environment = typeof BIZAGI_ENVIRONMENT != \"undefined\" ? BIZAGI_ENVIRONMENT : \"release\";\n  if (environment == 'debug') {\n    if (_typeof(window.console) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    }\n  } else {\n    if ((typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    } else if (bizagiConfig && !bizagiConfig.showConsoleLog) {\n      console.log = function (a) {/*Nothing to do*/};\n    }\n  }\n})();\n\n\nbizagi.util.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"ui-widget-overlay ui-front\" style=\"z-index: 1001;\"><div class=\"ui-bizagi-loading-message-center\" style=\"position: absolute; top: 48%; left: 48%; display: ;\"><div class=\"ui-bizagi-loading-icon\"></div></div></div>');\n};\nbizagi.util.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".ui-widget-overlay:first\", elementToapply).remove();\n};\n\nbizagi.util.smartphone.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"bz-util-loading-container\"> <div class=\"ui-bizagi-loading-icon bz-util-loading\"></div>  </div>');\n};\nbizagi.util.smartphone.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".bz-util-loading-container\", elementToapply).remove();\n};\n\n\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    * \r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n  var async;\n  var sync;\n\n  self.length = function () {\n    return queue.length;\n  };\n\n  self.add = function (callback) {\n    if (!sync) {\n      sync = true;\n      async = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.addParallel = function (callback) {\n    if (!async) {\n      async = true;\n      sync = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\") {\n            var deferred = $.Deferred();\n            $.when(callback()).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n            return deferred.promise();\n          }\n          // Deferred support\n          return callback;\n        }));\n      });\n    }\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n}\n\n\n/**\r\n   * Calculate circular dependencies \r\n   * \r\n   * @example var a = new bizagi.circularDependencies(); a.addNode('name',obj);\r\n   * a.resolve(node);\r\n   * \r\n   */\n//TODO: DEPL - Check this because we agreed to a much simpler solution\nbizagi.circularDependencies = function () {\n  var circularDependencies = new Function();\n  var self = circularDependencies.prototype;\n  self.list = []; //[{ name: \"root\", obj: {}, nodeObj: {}, childs: {} }];\n  self.lastNodeAdded; // Undefined reference\n\n  self.addNode = function (name, obj) {\n    var OBJ = JSON.encode(obj);\n    var foundObjChildNode = _search(name, OBJ);\n    if (foundObjChildNode) {\n      var lastNode = self.lastNodeAdded || self.list[self.list.length - 1];\n      lastNode.nodeObj.addChild(foundObjChildNode.nodeObj);\n      self.lastNodeAdded = foundObjChildNode;\n    } else {\n      var node = new _addNode(name, OBJ);\n      self.list.push({\n        name: name,\n        obj: OBJ,\n        nodeObj: node,\n        timeStamp: new Date().getTime() });\n\n      return node;\n    }\n  };\n\n  self.resolve = function (node, resolved, seen) {\n    // if dont setted node variable, take the first one -> root\n    node = node || _getFirstNodeWithChilds() || self.list[0].nodeObj;\n    var resolveDependencies = new _resolve(node, resolved, seen);\n    return resolveDependencies;\n  };\n\n  var _resetList = function _resetList() {\n    self.list = [];\n  };\n\n  var _getFirstNodeWithChilds = function _getFirstNodeWithChilds() {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].nodeObj.childs.length > 0) {\n        return self.list[i].nodeObj;\n      }\n    }\n    return self.list.length > 0 ? self.list[0].nodeObj : {};\n  };\n\n  var _search = function _search(name, obj) {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].name == name) {\n        // remove tag element\n        var now = new Date().getTime();\n        var timeToKeep = 1000; //milliseconds\n        if (self.list[i].timeStamp + timeToKeep < now) {\n          //remove element from the list\n          self.list.splice(i, 1);\n        } else if (self.list[i].obj == obj) {\n          return self.list[i];\n        }\n      }\n    }\n    return false;\n  };\n\n  var _addNode = function (name, obj) {\n    name = name || \"\";\n    obj = obj || {};\n    var node = function node(name, obj) {\n      this.name = name;\n      this.obj = obj;\n      this.childs = [];\n    };\n    var self = node.prototype;\n\n    self.addChild = function (node) {\n      this.childs.push(node);\n    };\n\n    return node;\n  }();\n\n  var _resolve = function (node, resolved, seen) {\n    var resolve = function resolve(node, resolved, seen) {\n      this.node = node || {};\n      this.node.childs = this.node.childs || [];\n      this.resolved = resolved || [];\n      this.seen = seen || [];\n\n      this.seen.push(this.node);\n\n      for (var i = 0; i < this.node.childs.length; i++) {\n        if (!self.hasObject(this.node.childs[i], this.resolved)) {\n          if (self.hasObject(this.node.childs[i], this.seen)) {\n            //throw new _error(\"error node:\" + node.name + \" -> \" + node.childs[i].name);\n            _resetList();\n            var error = {\n              dependencyFrom: this.node.name,\n              dependencyFromObj: this.node.obj,\n              dependencyTo: this.node.childs[i].name,\n              dependencyToObj: this.node.childs[i].obj,\n              path: this.seen };\n\n\n            return {\n              error: $.extend({\n                standardError: {\n                  status: \"error\",\n                  responseText: JSON.encode({ message: self.makeErrorMessage(error), type: \"alert\" }) },\n\n                multiactionError: {\n                  message: self.makeErrorMessage(error),\n                  type: \"alert\" } },\n\n              error) };\n\n          } else {\n            return resolve(this.node.childs[i], this.resolved, this.seen);\n          }\n        }\n      }\n      if (this.resolved) {\n        this.resolved.push(this.node);\n      }\n    };\n\n    var self = resolve.prototype;\n\n    self.hasObject = function (toSearch, collection) {\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].name == toSearch.name) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    self.makeErrorMessage = function (error) {\n      var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n      return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n\n      /*  return {\r\n                                                                                  responseText: parsedMessage,\r\n                                                                                  message: parsedMessage,\r\n                                                                                  extraInfo: error\r\n                                                                              };*/\n    };\n\n    return resolve;\n  }();\n\n  return self;\n};\n\n/**\r\n    * Apply css string style (one or more). It works to add or override a specific style even if it has !important\r\n    * \r\n    * @example bizagi.util.cssExtended($('.myClass'), 'display:none!important;color:red');\r\n    * \r\n    */\nbizagi.util.cssExtended = function (instance, options) {\n  var cssToAdd = options.split(\";\");\n\n  for (i = 0; i < cssToAdd.length; i++) {\n    if (cssToAdd[i] != \"\") {\n      bizagi.util.cssExtendedApplyChanges(instance, cssToAdd[i]);\n    }\n  }\n\n};\n\n/**\r\n    * Apply the style change \r\n    * \r\n    */\nbizagi.util.cssExtendedApplyChanges = function (instance, option) {\n\n  for (var i = 0; i < instance.length; i++) {\n    var $this = $(instance[i]);\n    var attrToAdd = option.split(\":\")[0];\n\n    if ($this.attr('style')) {\n      var tmpStyle = $this.attr('style').split(\";\");\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      for (j = 0; j < tmpStyle.length; j++) {\n        var cssProperty = tmpStyle[j].split(\":\");\n\n        if ($.trim(cssProperty[0]) != attrToAdd && $.trim(cssProperty[0]) != \"\") {\n          arrProperties.push(cssProperty[0] + \":\" + cssProperty[1] + \";\");\n        }\n        resultProperties = JSON.stringify(arrProperties).replace(/\\\",\"/g, ' ').replace(/\\[\"/g, ' ').replace(/\\\"]/g, ' ');\n      }\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    } else if ($this.css(attrToAdd)) {\n      var tmpStyle = $this.css(attrToAdd);\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      arrProperties.push(option + \";\");\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    }\n  }\n};\n\n/*\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n    * Sort a JSON array by attribute and order type (ascendant or descendant)\r\n    * example: data = [ {attr1:val1, attr2:val2} , {attr1:val3, attr2:val4 },... ]  , key = \"attr2\" , way = \"asc\"\r\n    */\nbizagi.util.sortJSON = function (data, key, way) {\n  return data.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (way === 'asc') {\n      return x < y ? -1 : x > y ? 1 : 0;\n    }\n    if (way === 'desc') {\n      return x > y ? -1 : x < y ? 1 : 0;\n    }\n  });\n};\n\n/*\r\n    * Reducir formato numrico a notacin abrevidad (K:1000 - M:1000000 - B:1000000000)\r\n    */\nbizagi.util.shortNumber = function (number) {\n  var newNumber = number.toString();\n  var lenghtNumber = newNumber.length;\n\n  if (lenghtNumber >= 4 && lenghtNumber < 7) {\n    newNumber = '+' + newNumber.charAt(0) + 'K';\n  } else if (lenghtNumber >= 7 && lenghtNumber < 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'M';\n  } else if (lenghtNumber >= 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'B';\n  }\n\n  return '&nbsp;&nbsp;&nbsp;' + newNumber;\n};\n\n/*\r\n    * Aplicar formato salto de linea\r\n    */\nbizagi.util.replaceLineBreak = function (string) {\n  return typeof string === \"string\" ? string.replace(/\\r\\n|\\r|\\n|<br>|<br\\/>/g, \"<br/>\") : string;\n};\n\n// http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\nbizagi.util.escapeHtml = function (str) {\n  var div = document.createElement('div');\n  div.appendChild(document.createTextNode(str));\n  return div.innerHTML;\n};\n\n/*\r\n    * Aplicar formato Tipo moneda\r\n    */\nbizagi.util.formatMonetaryCell = function (value) {\n  return bizagi.util.formatMonetaryValue(value);\n};\n\n/*\r\n    * Aplicar formato tipo decimal\r\n    */\nbizagi.util.formatDecimalCell = function (value) {\n  return bizagi.util.formatDecimalValue(value);\n};\n\n/**\r\n    * Add format to date value\r\n    */\nbizagi.util.formatDateValue = function (value) {\n  return bizagi.util.formatDateFromInvariantStringDate(value);\n};\n\n/**\r\n    * Add format to money value\r\n    * @param value\r\n    * @returns {*|string|string}\r\n    */\nbizagi.util.formatMonetaryValue = function (value) {\n  return bizagi.util.formatMoney(value, BIZAGI_DEFAULT_CURRENCY_INFO);\n};\n\n/**\r\n    * Add format for decimal value\r\n    * @param value\r\n    * @returns {*}\r\n    */\nbizagi.util.formatDecimalValue = function (value) {\n  var decimalFormat;\n  var externalDecimalFormat = {\n    decimalSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,\n    digitGroupSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,\n    roundToDecimalPlace: BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n  var numberValue = bizagi.util.formatDecimal(value, decimalFormat);\n  if (bizagi.override.removeTrailingZeros === true) {\n    var positive = true;\n    if (numberValue.toString().indexOf(\")\") != -1) {\n      positive = false;\n      numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n    }\n    var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"$1\");\n    re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"\");\n\n\n    if (!positive) numberValue = \"(\" + numberValue + \")\";\n  }\n  return numberValue;\n};\n\n/*\r\n    * Crea notificacion de corta duracion, principalmente uilizada en para los procesos offline\r\n    */\nbizagi.util.showNotification = function (params) {\n  var params = params || {};\n  var div_sync = $('<div id=\"sync-notification\" class=\"bz-cm-icon\"></div>').text(params.text || \"\");\n  div_sync.appendTo($('body'));\n  div_sync.fadeIn(1500, function () {\n    div_sync.stop();\n  });\n\n  div_sync.fadeOut(2000, function () {\n    div_sync.remove();\n  });\n};\n\n/*\r\n    * Verificar el estado de la conexin\r\n    */\nbizagi.util.isModeOnline = function () {\n  return typeof bizagi.context.isOfflineForm !== \"undefined\" && !bizagi.context.isOfflineForm;\n};\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {\n        significantFlag = true;\n        from = i;\n      } else {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {\n        significantFlag = true;\n        to = j + 1;\n      } else {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n\n    } else {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else {return '';}\n};\n\n/**\r\n    * Remove all backslashes that represent scape of characters\r\n    */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/*\r\n    * Validates if the text is a valid opening and closing tags, including classes\r\n    */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\nbizagi.util.resetData = function () {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, { isAuthenticate: \"false\" });\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\nbizagi.util.changeData = function (params) {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, params);\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR MOBILE DEVICE\n// ------------------------------------------------------------------------\n\nbizagi.util.isMobileDevice = function (device) {\n  device = device || bizagi.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\",\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Check is native mobile device\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeMobileDevice = function (device) {\n  return bizagi.util.isMobileDevice(device) && bizagi.util.isNativePluginSupported();\n};\n\n/** \r\n    * Verify mobile device type\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Tablet android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Tablet iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && !(device.indexOf(\"android\") === -1);\n};\n\n\n/**\r\n    * Verify mobile device type\r\n    * @returns {}\r\n    */\nbizagi.util.isSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Smartphone android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Smartphone iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"ios\") !== -1;\n};\n\n/**\r\n    * Check is offline form\r\n    * @param {} container \r\n    * @returns {} \r\n    */\nbizagi.util.isOfflineForm = function (params) {\n  if (!bizagi.util.isMobileDevice() || typeof params === \"undefined\")\n  return false;\n\n  var context = params.context || null;\n  var container = params.container || null;\n\n  var formContainer = container !== null ?\n  container : context !== null ? context.getFormContainer() : null;\n\n  if (formContainer === null)\n  return false;\n\n  var formParams = formContainer.getParams() || {};\n  var isOfflineForm = typeof formParams.isOfflineForm !== \"undefined\" &&\n  bizagi.util.parseBoolean(formParams.isOfflineForm);\n\n  return isOfflineForm;\n};\n\nbizagi.util.detectAndroidVersion = function () {\n  var indexAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\");\n  var androidVersion = navigator.userAgent.toLowerCase().substring(indexAndroid + 8, indexAndroid + 13);\n  androidVersion = androidVersion.replaceAll(\".\", \"\");\n  return Number(androidVersion);\n};\n\nbizagi.util.getPathUrl = function (url) {\n  var solvedUrl = \"\";\n  var locationParts = location.pathname.split(\"/\");\n  var basePath = location.protocol + \"//\" + location.host;\n\n  if (BIZAGI_PATH_TO_BASE[0] == \"/\") {\n    solvedUrl = basePath + BIZAGI_PATH_TO_BASE + url;\n  } else {\n    var pathToBaseBackwards = BIZAGI_PATH_TO_BASE.split(\"../\").length;\n    for (var i = 0, l = locationParts.length; i < l - pathToBaseBackwards; i++) {\n      basePath += locationParts[i] + \"/\";\n    }\n\n    basePath = basePath[basePath.length - 1] === \"/\" ? basePath : basePath + \"/\";\n    solvedUrl = basePath + url;\n  }\n  return solvedUrl;\n};\n\n/**\r\n    * Get Android version\r\n    * @returns {} \r\n    */\nbizagi.util.getAndroidVersion = function () {\n  var userAgent = navigator.userAgent.toLowerCase();\n  var match = userAgent.match(/android\\s([0-9\\.]*)/);\n\n  return match ? parseFloat(match[1]) : false;\n};\n\n/**\r\n    * Get image path to android device\r\n    * @param {} image \r\n    * @returns {} \r\n    */\nbizagi.util.mobileImagePath = function (image) {\n  var dataImage = image;\n  var version = bizagi.util.getAndroidVersion();\n\n  if (!version)\n  return dataImage;\n\n  if (dataImage.substring(0, 21) === \"content://com.android\" && version <= 4.4) {\n    var photoSplit = dataImage.split(\"%3A\");\n    if (photoSplit.length > 1) {\n      dataImage = \"content://media/external/images/media/\" + photoSplit[1];\n    } else {\n      photoSplit = dataImage.split(\"/\");\n      dataImage = \"content://media/external/images/media/\" + photoSplit[photoSplit.length - 1];\n    }\n  }\n\n  return dataImage;\n};\n\n/**\r\n    * Validate resource \r\n    * @param {} resource resource name\r\n    * @returns {} \r\n    */\nbizagi.util.isValidResource = function (resource) {\n  if (!bizagi.localization) return false;\n  return bizagi.localization.getResource(resource) !== resource;\n};\n\n/***\r\n    * Transform base64 image to blob\r\n    * @b64Data \r\n    * @contentType \r\n    * @sliceSize \r\n    */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\r\n    * Converts an string to a byte array, util in old browsers requests\r\n    * @param str\r\n    */\nbizagi.util.stringToByteArray = function (str) {\n  var byteArray = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    byteArray[i] = str.charCodeAt(i) & 0xff;\n  }\n  return byteArray;\n};\n\n// ------------------------------------------------------------------------\n// NATIVE-HYBRID ENVIRONMENT\n// ------------------------------------------------------------------------\n\n/** \r\n * Verify the offline forms is enabled\r\n * @returns {} \r\n */\nbizagi.util.hasOfflineFormsEnabled = function () {\n  return typeof BIZAGI_ENABLE_OFFLINE_FORMS !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS) === true;\n};\n\n/**\r\n    * \r\n    * Verify the flat design is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isFlatDesignEnabled = function () {\n  return typeof BIZAGI_ENABLE_FLAT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isMobileGridEnabled = function () {\n  return typeof BIZAGI_ENABLE_MOBILE_GRID !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeHeaderEnabled = function () {\n  return typeof NATIVE_HEADER_ENABLE !== \"undefined\" && bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE) === true;\n};\n\n/**\r\n    * Validate the Quick search is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isQuickSearchEnabled = function () {\n  return typeof BIZAGI_ENABLE_QUICK_SEARCH !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH) === true;\n};\n\n/** \r\n    * Verify the OAuth2 is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isOAuth2Enabled = function () {\n  return typeof BIZAGI_AUTH_TYPE !== \"undefined\" && BIZAGI_AUTH_TYPE === \"OAuth\";\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.getNativeComponent = function () {\n  return typeof BIZAGI_NATIVE_COMPONENT !== \"undefined\" ? BIZAGI_NATIVE_COMPONENT : \"\";\n};\n\n/**\r\n    * Check server version\r\n    * @returns {}\r\n    */\nbizagi.util.isVersionSupported = function () {\n  var supported = true;\n\n  if (typeof BIZAGI_SERVER_VERSION !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)) {\n    var version = BIZAGI_SERVER_VERSION.match(/\\d+\\.\\d+/);\n    supported = version ? parseFloat(version.shift()) >= 11.0 : true;\n  }\n\n  return supported;\n};\n\n/**\r\n    * Cordova componet is supported\r\n    * @returns {} \r\n    */\nbizagi.util.isCordovaSupported = function () {\n  return typeof cordova !== \"undefined\";\n};\n\n/**\r\n    * Native plugin of Cordova is supported \r\n    * @returns {} \r\n    */\nbizagi.util.isNativePluginSupported = function () {\n  return typeof bizagiapp !== \"undefined\";\n};\n\n/**\r\n    * Tablet native\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Smartphone native\r\n    * @returns {} \r\n    */\nbizagi.util.isSmartphoneNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isSmartphoneDevice();\n};\n\n/**\r\n    * Enables accesory bar\r\n    */\nif (bizagi.util.isNativePluginSupported() && window.cordova && window.cordova.plugins.Keyboard) {\n  cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n};\n\n/**\r\n    * Verify real device\r\n    * @returns {} \r\n    */\nbizagi.util.detectRealDevice = function () {\n  var settedDevice = typeof BIZAGI_DEFAULT_DEVICE !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE) ?\n  BIZAGI_DEFAULT_DEVICE : null;\n\n  BIZAGI_DEFAULT_DEVICE = \"\";\n  var device = bizagi.detectDevice();\n  BIZAGI_DEFAULT_DEVICE = settedDevice;\n\n  return device;\n};\n\n/**\r\n    * Method to detect Android visitors\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nbizagi.util.isAndroidDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") > -1;\n};\n\nbizagi.util.isiOSDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") === -1;\n};\n\n\n/**\r\n    * Get server channel\r\n    * @returns {}\r\n    */\nbizagi.util.getChannelType = function () {\n  if (typeof BIZAGI_SERVER_CHANNEL !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)) {\n    return BIZAGI_SERVER_CHANNEL;\n  }\n  return bizagi.loader.channel || \"\";\n};\n\n/**\r\n    * Check data url\r\n    * @param {} data \r\n    * @returns {} \r\n    */\nbizagi.util.isDataUrl = function (data) {\n  var regex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i;\n\n  try {\n    return !!data.toString().match(regex);\n  } catch (error) {}\n\n  return false;\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\n/**\r\n    * Get response message of services\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.processFailMessage = function (data) {\n  var message = data || {};\n\n  try {\n    message = typeof message == \"string\" ? JSON.parse(message) : message;\n    message = message.responseText || message.message || message;\n  } catch (e) {\n    message = data;\n  }\n\n  return message;\n};\n\n/**\r\n    * Get object jSON\r\n    */\nbizagi.util.getErrorFormatted = function (str) {\n  var error = str;\n\n  if (!error) return str;\n\n  if (typeof error == \"string\") {\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n      error = {\n        type: \"error\",\n        code: \"code\",\n        message: str };\n\n    }\n  }\n\n  if (_typeof(error) == \"object\" && (error.message || error.statusText)) {\n    return {\n      type: error.type || \"error\",\n      code: error.code || error.errorCode || error.errorType || error.statusText || \"code\",\n      message: error.message };\n\n  } else {\n    if (error && error.length && error.length >= 1) error = error[0];\n    if (error.responseText) error = error.responseText;\n    if (error.error) error = error.error;\n  }\n\n  return bizagi.util.getErrorFormatted(error);\n};\n/**\r\n    * Disable and enable workportal menu from live process\r\n    */\nvar tmp_block_header = \"<div class='blockHeaderByLiveProcess'></div>\";\nbizagi.util.disableWorkPortalMenu = function () {\n  var blockHeight = $(\"body\").find(\"#ui-bizagi-wp-menu\").height();\n  $(tmp_block_header).prependTo(\"body\");\n  $(\"body\").find(\".blockHeaderByLiveProcess\").css({ \"position\": \"absolute\", \"width\": \"100%\", \"height\": blockHeight + \"px\", \"background\": \"gray\", \"opacity\": \"0.9\", \"z-index\": \"101\" });\n};\n\nbizagi.util.enableWorkPortalMenu = function () {\n  $(\"body\").find(\".blockHeaderByLiveProcess\").detach();\n};\n\n/**\r\n    * this method activates the section of the menu that is sent in the idMenu variable\r\n    */\nbizagi.util.enableMenuSection = function (idMenu) {\n  var menu = new bizagi.workportal.controllers.menu();\n  menu.setActiveSection.apply($(\"#main_menu li#\" + idMenu)[0]);\n};\n\nbizagi.util.getURLWithASlashAtTheEnd = function (url) {\n  var getLastChar = function getLastChar(stringValue) {\n    return stringValue.substr(stringValue.length - 1);\n  };\n  return getLastChar(url) === '/' ? url : url + '/';\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a file\r\n    * validate if the Maintenance Window has started and redirect the user\r\n    * validate if an error is returned\r\n    * rejects defer on download fails\r\n    * IMPORTANT: defer never resolves (technical restriction)\r\n    * @param {String} url \r\n    * @param {Boolean} isCompleteUrl \r\n    * @param {Boolean} showModalOnFail \r\n    */\nbizagi.util.downloadFile = function (url, isCompleteUrl, showModalOnFail) {\n  var _defer = new $.Deferred(),\n  _showModalOnFail = showModalOnFail === undefined ? true : showModalOnFail,\n  _firstURlPart = isCompleteUrl ? \"\" : bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl),\n  _urlDownload = _firstURlPart + url,\n  _iframeID = \"iframe-download\",\n  _iframeExists = $('#' + _iframeID).length !== 0,\n  _reject = function _reject(jsonResponse, showModal) {\n    if (showModal)\n    bizagi.modalError.show(jsonResponse.message, undefined, false);\n    _defer.reject(jsonResponse);\n  },\n  _onCantDownload = function _onCantDownload() {\n    var that = $(this)[0],\n    defaultMessage = bizagi.localization.getResource(\"workportal-general-error-message-contact-administrator\"),\n    text = bizagi.util.tryCatch(\n    function () {return $(that.contentDocument).text();},\n    defaultMessage),\n\n    isMaintenanceWindow = text.indexOf(\"HTTP Error 503\") !== -1,\n    jsonResponse = bizagi.util.tryCatch(\n    function () {return JSON.parse(text);},\n    {\n      code: \"error\",\n      status: \"error\",\n      message: text === \"\" ? defaultMessage : text }),\n\n\n    showModal = _showModalOnFail && !isMaintenanceWindow;\n    if (isMaintenanceWindow)\n    bizagiConfig.maintenanceWindows.start();\n    _reject(jsonResponse, showModal);\n  },\n  _createIframe = function _createIframe() {\n    var iframe = $(\"<iframe/>\");\n    iframe.attr({\n      style: \"visibility:hidden;display:none\",\n      id: _iframeID }).\n\n    appendTo('body');\n    iframe[0].onload = _onCantDownload;\n  };\n\n  if (!_iframeExists)\n  _createIframe();\n  $('#' + _iframeID).attr(\"src\", _urlDownload);\n  return _defer;\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a excel file\r\n    * @param {String} url \r\n    * @param {} params \r\n    */\nbizagi.util.downloadFileByPOST = function (url, params) {\n  if ($('#iframe-download').length !== 0) {//If the iframe already exists, remove it\n    $('#iframe-download').remove();\n  }\n\n  $(\"<iframe/>\").attr({\n    style: \"visibility:hidden;display:none\",\n    id: \"iframe-download\" }).\n  appendTo('body');\n\n  var inputValues = \"\";\n  for (var i = 0; i < params.length; i++) {\n    inputValues = inputValues + \"<input type='text' name='\" + params[i].name + \"' value='\" + params[i].value + \"'>\";\n  }\n\n  var formPOST = \"<form id='formPOST' action='\" + url + \"' method='POST'>\" +\n  inputValues +\n  \"</form>\";\n\n  $('#iframe-download').contents().find(\"body\").append(formPOST);\n  if (bizagi.util.isIE11()) {\n    bizagi.showErrorAlertDialog = false;\n    $.ajax({ type: \"POST\",\n      url: url,\n      data: params,\n      dataType: 'text' }).\n    then(function () {\n      $(\"#formPOST\", $('#iframe-download').contents()).submit();\n    });\n  } else {\n    $(\"#formPOST\", $('#iframe-download').contents()).submit();\n  }\n};\n\nbizagi.util.executeActionRoutingFromWorkportal = function (idCase, idWorkItem) {\n  bizagi.workportal.controllers.menu.prototype.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkItem: idWorkItem });\n\n};\n\n/**\r\n   * Gets the final message when the user is offline or online (In Offline forms)\r\n   * @param {} state \r\n   * @returns {} The corresponding message depending on the case\r\n   */\n\nbizagi.util.getMessageFromNetworkState = function (state) {\n  if (state) {\n    return bizagi.localization.getResource(\"render-without-globalform-offline-userOnline\", \"The case has been created successfully, please wait until the server synchronizes\");\n  } else {\n    return bizagi.localization.getResource(\"render-without-globalform-offline\", \"Your offline case has been created successfully. It will synchronized as soon as you go online.\");\n  }\n};\n\n/**\r\n    * DOMPurify sanitizes HTML and prevents XSS attacks\r\n    * @param str\r\n    * @returns {null|*|string}\r\n    */\nbizagi.util.sanitizeHTML = function (str) {\n  var value = typeof str !== \"undefined\" && str !== null ? str.toString() : str;\n  var sanified = DOMPurify.sanitize(value);\n  var decode = document.createElement(\"div\");\n\n  decode.innerHTML = sanified;\n\n  return decode.childNodes.length === 0 ? \"\" : String(decode.childNodes[0].nodeValue);\n};\n\nbizagi.util.arrayUnique = function (array) {\n  var items = array.concat();\n\n  for (var i = 0, length = items.length; i < length; ++i) {\n    for (var j = i + 1; j < length; ++j) {\n      if (items[i] === items[j]) {\n        items.splice(j -= 1, 1);\n      }\n\n    }\n  }\n\n  return items;\n};\n\n\n/**\r\n    * Debounce\r\n    * Taken from https://davidwalsh.name/javascript-debounce-function\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n};\n\n/**\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce2 = function (func, wait, immediate) {\n  var self = this;\n  var timeout;\n  var fn = function fn() {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n  return {\n    timeout: timeout,\n    cancel: function cancel() {\n      clearTimeout(timeout);\n    },\n    fire: function fire() {\n      fn.call(self, arguments);\n    } };\n\n};\n\n/**\r\n    * Validate if the mobile image editor is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeImageEditorSupported = function () {\n  return bizagi.util.isNativePluginSupported() && bizagi.util.isiOSDevice() && bizagi.override.enableImageEditor;\n};\n/**\r\n    * Error Message\r\n    */\nbizagi.util.errorMessage = function (message) {\n  return \"<div class=\\\"admin-stakeholder-message\\\"> \" +\n  \"<i class=\\\"bz-wp-empty__img\\\"></i> \" +\n  \"<p class=\\\"bz-wp-empty__info bz-wp-empty__info--first\\\"> \" +\n  message +\n  \"</p></div>\";\n};\n\n\n/**\r\n    * Validate URL \r\n    */\nbizagi.util.validateUrlWellFormed = function (url) {\n  var patternToValidateUrl = /^((http|https|ftp):\\/\\/)/,\n  urlWithProtocol = patternToValidateUrl.test(url) ? url : \"http://\" + url,\n  nodeWithUrl = document.createElement('a');\n  nodeWithUrl.setAttribute('href', urlWithProtocol);\n  var cleanNodeWithUrl = DOMPurify.sanitize(nodeWithUrl, { IN_PLACE: true }),\n  urlWithoutSpaces = url ? url.replace(/ /g, \"\") : \"\";\n  return bizagi.util.isEmpty(urlWithoutSpaces) ? null : cleanNodeWithUrl.href;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @param data\r\n    * @returns {string}\r\n    */\nbizagi.util.encodeHtmlText = function (data) {\n  var value = data || \"\";\n  var valueToDisplay = \"\";\n\n  if (typeof value === \"string\") {\n    var decodedDisplayValue = bizagi.util.decodeURI(value);\n\n    valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n  }\n\n  return valueToDisplay;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @returns {string}\r\n    * @param str\r\n    */\nbizagi.util.encodeString = function (str) {\n  var result = str || \"\";\n\n  result = result.replaceAll(\"&\", \"&amp;\");\n  result = result.replaceAll(\"$\", \"&#36;\");\n  result = result.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  result = result.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n  result = result.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br />$2\");\n\n  return result;\n};\n\n/**\r\n    * Set Caret position \r\n    * Set the caret in specific position of an element type input\r\n    * @param {} func, position, input element \r\n    * @returns {} The function not return any value.\r\n    */\nbizagi.util.setCaretPosition = function (pos, ctrl) {\n  var self = this;\n\n  // Modern browsers\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n\n    // IE8 and below\n  } else if (ctrl.createTextRange) {\n    var range = ctrl.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', pos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n};\n\n\n/**\r\n    * Get position of caret\r\n    * Get the position of caret in a specific element input\r\n    * @param {} func, input element \r\n    * @returns {} Return the position of caret in an element input\r\n    */\nbizagi.util.getCaretPosition = function (oField) {\n\n  // Initialize\n  var iCaretPos = 0;\n\n  // IE Support\n  if (document.selection) {\n\n    // Set focus on the element\n    oField.focus();\n\n    // To get cursor position, get empty selection range\n    var oSel = document.selection.createRange();\n\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart || oField.selectionStart == '0') // Firefox support\n    iCaretPos = oField.selectionStart;\n\n  // Return results\n  return iCaretPos;\n};\n\n/**\r\n    * To escape values\r\n    * @param {} value \r\n    * @returns {} \r\n    */\nbizagi.util.escapeRegex = function (value) {\n  value = value || \"\";\n\n  return value.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, \"\\\\$1\");\n};\n\n/**\r\n    * Function to get a featureObject by path within the global bizagiConfig.features object. Example: \"userService.v1.enabled\"\r\n    */\nbizagi.util.getFeatureObject = function (path) {\n  var arr = path.split('.');\n  this.featureObjectCache = this.featureObjectCache || {};\n\n  function getFeatureObjectIte(arr) {\n    var features = bizagi.util.getConfigFeatures();\n\n    if (typeof path !== \"string\" || typeof features == \"undefined\") return;\n\n    var pivot = features;\n    for (var i = 0, len = arr.length; i < len; i++) {\n      pivot = pivot[arr[i]];\n      if (typeof pivot === \"undefined\") return;\n    }\n    return pivot;\n  };\n  if (path in this.featureObjectCache) {\n    return this.featureObjectCache[path];\n  } else {\n    return this.featureObjectCache[path] = getFeatureObjectIte(arr);\n  }\n};\n\n/**\r\n    * Load features from mobile\r\n    */\nbizagi.util.getConfigFeatures = function () {\n  var bizagiConfiguration = window.bizagiConfig || bizagiConfig || {};\n\n  if (bizagi.util.isMobileDevice() && typeof BIZAGI_MOBILE_FEATURES !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)) {\n    bizagiConfiguration.features = JSON.parse(BIZAGI_MOBILE_FEATURES || \"{}\");\n  }\n\n  return bizagiConfiguration.features;\n};\n\n/**\r\n    * Reset features flag\r\n    */\nbizagi.util.resetConfigFeatures = function () {\n  bizagi.util.featureObjectCache = undefined;\n};\n\n/**\r\n    * Check fail request\r\n    * @param result\r\n    * @returns {*|boolean}\r\n    */\nbizagi.util.isFailResponse = function (result) {\n  return result && (result.type && result.type === \"error\" || result.status && result.status === \"error\" || result.code && result.code === \"UNKNOWN_ERROR\");\n};\n\n/**\r\n    * Formats value of each item\r\n    * @param {string, boolean or array} value\r\n    * @example\r\n    * value = \"string\" => \"string\"\r\n    * value = true => \"yes\" or \"si\", the localized value\r\n    * value = false => \"no\", the localized value\r\n    * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n    * @returns {string}\r\n    */\nbizagi.util.formatItem = function (value) {\n  if (value !== undefined && value !== null) {\n    if ($.isArray(value)) {\n\n      for (var i = 0, length = value.length; i < length; i++) {\n        if (value[i] != null && typeof value[i] == \"boolean\") {\n          if (bizagi.util.parseBoolean(value[i]) === true) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n\n          } else if (bizagi.util.parseBoolean(value[i]) === false) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n          }\n        }\n        value[i] = bizagi.util.sanitizeHTML(value[i]);\n      }\n\n      return value.join(\" - \");\n    } else {\n      return bizagi.util.sanitizeHTML(value);\n    }\n  } else {\n    return \"\";\n  }\n};\n\n\n/**\r\n    * Process response matches\r\n    * @param {} strValue\r\n    * @param term\r\n    * @param withoutFormat\r\n    * @returns {}\r\n    */\nbizagi.util.performTermMatches = function (strValue, term, withoutFormat) {\n  var parseValue;\n\n  if (_typeof(strValue) === \"object\") {\n    parseValue = bizagi.util.formatItem(strValue);\n  } else if (typeof strValue === \"string\") {\n    if (withoutFormat) {\n      parseValue = bizagi.util.sanitizeHTML(strValue);\n    } else {\n      parseValue = bizagi.util.highlightMatches(strValue, term);\n    }\n  } else {\n    parseValue = strValue;\n  }\n\n  return parseValue;\n};\n\n/**\r\n    * Process response to highlight matches\r\n    * @param strValue\r\n    * @param term\r\n    * @returns {string}\r\n    */\nbizagi.util.highlightMatches = function (strValue, term) {\n  var data = bizagi.util.escapeRegex(term).replaceAll(\"%\", \"\");\n  var regEx = new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + data + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\");\n\n  return bizagi.util.sanitizeHTML(strValue).replace(regEx, \"<strong>$1</strong>\");\n};\n\n/**\r\n    * Calculate window resolution for Desktop\r\n    * @returns {string}\r\n    */\nbizagi.util.getDesktopResolution = function () {\n  var resolution = \"\";\n  var devicePixelRatio = 1;\n  var screenWidth = window.screen.width;\n  var screenHeight = window.screen.height;\n\n  if ('deviceXDPI' in screen) {\n    devicePixelRatio = screen.deviceXDPI / screen.logicalXDPI;\n  } else if ('devicePixelRatio' in window) {\n    devicePixelRatio = window.devicePixelRatio;\n  }\n\n  devicePixelRatio = Number(devicePixelRatio.toFixed(3));\n\n  if (screenWidth && screenWidth > 0 && screenHeight && screenHeight > 0) {\n    resolution = screenWidth * devicePixelRatio + \"x\" + screenHeight * devicePixelRatio;\n  }\n\n  return resolution;\n};\n\n/**\r\n    * Get the market name for device\r\n    * @returns {*|string}\r\n    */\nbizagi.util.getDeviceCode = function () {\n  var deviceCode = \"\";\n\n  if (bizagi.util.isMobileDevice()) {\n    deviceCode = typeof BIZAGI_DEVICE_MARKET_NAME !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME) ? BIZAGI_DEVICE_MARKET_NAME : \"\";\n  } else {\n    deviceCode = bizagi.util.getDesktopResolution();\n  }\n\n  return deviceCode;\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/smartphone/, '').\n  replace(/tablet/, '').\n  replace(/offline/, '');\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeQueryType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/query/, '').\n  toLowerCase();\n};\n\n/**\r\n    * Hide or show the X button in the show dialog method \r\n    * \r\n    */\nbizagi.util.hideOrShowXToCloseDialog = function (dialog, show) {\n  var selector = \".ui-dialog-titlebar-close\";\n  if (show) {\n    $(selector, dialog).show();\n  } else {\n    $(selector, dialog).hide();\n  }\n};\n\n/**\r\n    * review if a feature key is enabled\r\n    * @param {string} feature nombre de la llave del feature\r\n    */\nbizagi.util.isEnableFeature = function (feature) {\n  if (bizagi.features === undefined) bizagi.features = [];\n  return bizagi.features[feature] !== false;\n};\n\n\n/**\r\n    * review if the posibleHtml has html content\r\n    * @param {string} possibleHtml to review\r\n    */\nbizagi.util.isHtml = function (possibleHtml) {\n  return /<[a-z][\\s\\S]*>/i.test(possibleHtml);\n};\n\n/**\r\n    * if the _try function fails the _catch() or _catch value will be executed and returned\r\n    * @param {Function} _try \r\n    * @param {Function | any} _catch \r\n    */\nbizagi.util.tryCatch = function (_try, _catch) {\n  try {\n    return _try();\n  } catch (e) {\n    return typeof _catch === \"function\" ? _catch() : _catch;\n  }\n};\n\n/**\r\n    * keep functions with next and at the end execute all functions are reduced by with method like a pipe using the variable\r\n    */\nbizagi.util.pipe = function (f, listFunctions) {\n  var _listFunctions = listFunctions === undefined ? [] : listFunctions;\n  _listFunctions.push(f);\n\n  return {\n    next: function next(f) {\n      return bizagi.util.pipe(f, _listFunctions);\n    },\n    end: function end(variable) {\n      return _listFunctions.reduce(function (newVar, f) {\n        return f(newVar);\n      }, variable);\n    } };\n\n},\n\n/**\r\n    * A function to get the scrolling parent of an html element.\r\n    */\nfunction ($) {\n\n  var parents = function parents(node, ps) {\n    if (node.parentNode === null) return ps;\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function style(node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function overflow(node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function scroll(node) {\n    return /(auto|scroll)/.test(overflow(node));\n  };\n\n  // Get the closest ancestor element that is scrollable.\n  $.scrollerParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) return ps[i];\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n}(jQuery);\n\nbizagi.util.startkendo = function (params) {\n  if (typeof bizagi.kendoMobileApplication === \"undefined\") {\n    bizagi.kendoMobileApplication = new kendo.mobile.Application($(\"body\"), {\n      skin: \"flat\",\n      browserHistory: false,\n      init: function init(e) {\n        kendo.ui.progress($(\".km-flat\"), true);\n        params.started && params.started();\n      } });\n\n\n    bizagi.kendoMobileApplication.bizagiNavigate = function (e, t) {\n      this.navigate(e, t);\n    };\n  } else {\n    params.started && params.started();\n  }\n};\n\n/**\r\n    * Checks if bizagi is running in mashup.\r\n    */\nbizagi.util.isMashupContext = function () {\n  return typeof BIZAGI_MASHUP_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT) === true;\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.isSharepointContext = function () {\n  return typeof BIZAGI_SHAREPOINT_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT) === true;\n};\n\n/**\r\n    * Checks if bizagi is running in webpart.\r\n    */\nbizagi.util.isWebpartContext = function () {\n  return typeof isWebpart !== \"undefined\" && bizagi.util.parseBoolean(isWebpart) === true;\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number }\r\n    */\nbizagi.util.startTimeline = function (data) {\n  new bizagi.workportal.widgets.widget().showTimeLine(data);\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number, isAdhoc: Boolean, idProcess: Number }\r\n    */\nbizagi.util.startGraphicquery = function (data) {\n  new bizagi.workportal.widgets.widget().showGraphicQuery(data);\n};\n\n/**\r\n    * start select user functionality\r\n    */\nbizagi.util.startSelectUser = function () {\n  return function (resolve, reject) {\n    var defer = $.Deferred();\n    new bizagi.workportal.widgets.widget().showSelectUser(defer);\n    defer.done(function (userId, userName, guid) {\n      resolve({\n        userId: userId,\n        userName: userName,\n        guid: guid });\n\n    }).fail(function () {\n      resolve({});\n    });\n  };\n};\n\n/* Checks if a given value with format {id, value} is empty\r\n   * @param value\r\n   * @returns {boolean}\r\n   */\nbizagi.util.isEmptyValue = function (value) {\n  if (value === 0) return false;\n  if (value === undefined || value === null || value === \"\") return true;\n  if (typeof value === \"Array\") return value.length === 0;\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") return value.length === 0;\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    for (var key in value) {\n      if (value.hasOwnProperty(key) && !bizagi.util.isEmptyValue(value[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR LIVE PROCESSES\n// ------------------------------------------------------------------------\n\n/**\r\n * Init refferer Params as an empty object\r\n */\nbizagi.util.initializeReferrerParams = function () {\n  if (!bizagi.referrerParams) {\n    bizagi.referrerParams = {};\n  }\n};\n\n/**\r\n    * Get data to update sidebar\r\n    */\nbizagi.util.getLPQueriesParameters = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.sidebarData;\n};\n\n/**\r\n    * Get selected tree item (Selected process)\r\n    */\nbizagi.util.getLPQueriesSelectedItemFromTree = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.selectedTreeItem;\n};\n\n/**\r\n    * Set data and save \r\n    */\nbizagi.util.setLPQueriesParameters = function (parametersSidebar, tree) {\n  bizagi.util.initializeReferrerParams();\n  bizagi.referrerParams.sidebarData = parametersSidebar;\n  bizagi.referrerParams.selectedTreeItem = tree;\n};\n\n/**\r\n    * Clean data to reset LP Queries component\r\n    */\nbizagi.util.cleanLPQueriesParameters = function () {\n  if (bizagi.referrerParams) {\n    bizagi.referrerParams.sidebarData = null;\n    bizagi.referrerParams.selectedTreeItem = null;\n  }\n};\n\n/**\r\n    * Set referrerParams referrer \r\n    */\nbizagi.util.setLPQueriesReferrer = function () {\n  bizagi.referrerParams.referrer = \"LPQueries\";\n};\n\n/**\r\n    * Check if there is internet connection\r\n    */\nbizagi.util.isConnected = function () {\n  if (bizagi.util.isNativeMobileDevice()) {\n    if (navigator && typeof navigator.connection !== \"undefined\" && typeof Connection !== \"undefined\")\n    return !(navigator.connection.type == Connection.NONE || navigator.connection.type == \"unknown\");\n    return true;\n  } else if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n    return window.navigator ? window.navigator.onLine : true;\n  }\n\n  return true;\n};\n\n/**\r\n    * Check If rendering url is allowed\r\n    * @param request\r\n    * @returns {boolean}\r\n    */\nbizagi.util.isRenderingUrlAllowed = function (request) {\n  var endPoint;\n  //The url Rest/Processes/RecentProcesses and Rest/Processes/OfflineProcessTree should be excluded from the whitelist\n  var whiteList = [\n  \"Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)\",\n  \"Api/(Authentication|Entities|Users)\"];\n\n  var url = (request || \"\").\n  replaceAll(\"..\\/\", \"\").\n  replaceAll(\".\\/\", \"\");\n\n  while (endPoint = whiteList.shift()) {\n    var pattern = new RegExp(endPoint, \"i\");\n    if (url.match(pattern) !== null) return true;\n  }\n\n  return false;\n};\n\n/**\r\n    * Captura todos los elementos input de tipo contrasea y aade el icono de ver/ocultar el valor (el icono incluye\r\n    * funcionalidad propia).\r\n    *\r\n    * Para mas informacin ver la aplicacin de esta funcin en los widget de login.\r\n    *\r\n    * - Esta funcin requiere jQuery (variable $) globalmente.\r\n    * - Se aplica generalmente en la funcin render de los widget.\r\n    * - Asegurarse que todos los input de contrasea han sido cargados antes de ejecutar esta funcin, de lo contrario los\r\n    *   nuevos inputs no tendran la funcionalidad de ver/ocultar valor.\r\n    *\r\n    * @param {jQuery | HTMLElement} content\r\n    */\nbizagi.util.applyEyeFunction = function (content) {\n  function setShowIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg  class='eye_show_icon'  xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z\\\"/>\\n\" +\n    \"<path d=\\\"M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='text']\").attr(\"type\", \"password\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function setHideIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg class='eye_hide_icon' xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z\\\"/><path d=\\\"M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='password']\").attr(\"type\", \"text\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function addEvent(direct) {\n    return function (element) {\n      if (direct) {\n        var className = $(this).attr('class') || '';\n        var input = $(this).parent().find(\"input\");\n        if (className === 'eye_show_icon') {\n          setHideIcon(input);\n        } else {\n          setShowIcon(input);\n        }\n      } else {\n        $($(element, content).parent().find('svg')[0]).click(function (ev) {\n          var className = $(this).attr('class') || '';\n          var input = $(this).parent().find(\"input\");\n          if (className === 'eye_show_icon') {\n            setHideIcon(input);\n          } else {\n            setShowIcon(input);\n          }\n        });\n      }\n    };\n  }\n\n  $(content).find(\"input[type='password']\").map(function (index, element) {\n    if (index > 0) {\n      setShowIcon(element);\n      addEvent(false)(element);\n    }\n  });\n};\n\n/**\r\n    * Aadir eventos de accessibility a un elemento, el evento consiste en las siguientes teclas:\r\n    * - Enter, Click, Space.\r\n    * Ayuda a que los elementos puedan ser accedidos (activar evento de click) de multiples maneras incluyendo teclado.\r\n    * @param {*} element jQuery element\r\n    * @param {Function} cb Callback\r\n    * @param {string[]} [extraEvent] Array of extra events\r\n    */\nbizagi.util.accessibilityEnter = function (element, cb, extraEvent) {\n  if (typeof cb !== \"function\") {\n    throw new Error('Error in \"accessibilityEnter\" function: You must provide a valid callback');\n  }\n  /**\r\n     * @type {*|jQuery|HTMLElement}\r\n     * @const\r\n     */\n  extraEvent = $.isArray(extraEvent) ? extraEvent : [];\n  extraEvent.indexOf('click') !== -1 ? extraEvent : extraEvent.push('click');\n\n  element.bind(\"keypress\", function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n\n    if (e.which === 13 || e.which === 32) {// Events: enter or space\n      cb(e);\n    }\n  });\n\n  element.bind(extraEvent.join(', '), function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n    cb(e);\n  });\n};\n\n/**\r\n    * Recreate native buttons for iOS\r\n    */\n\nbizagi.util.recreateNativeButtons = function (context) {\n  var params = context.getFormContainer().getParams();\n  if (bizagi.util.isNativePluginSupported() && bizagi.util.isiOSSmartphoneDevice()) {\n    var navigation = params.navigation;\n    if (typeof navigation !== \"undefined\") {\n      navigation.setNavigationButtons(context);\n    }\n  }\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isOverrideFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName] || null;\n\n  return bizagi.util.parseBoolean(feature) === true;\n};\n\n/**\r\n    * Create dynamic class using the name\r\n    */\nbizagi.util.createDynamicClass = function (nameClass, renderParams) {\n  if (nameClass) {\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var dynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new \" + nameClass + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"dynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      return dynamicFunction(renderParams);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // No class supported\n  return null;\n};\n\n/**\r\n    * Mobiscroll languages\r\n    */\nbizagi.util.languages = {\n  \"es\": \"es\", \"es-ES\": \"es\", \"es-AR\": \"es\", \"es-BO\": \"es\", \"es-Cl\": \"es\", \"es-CO\": \"es\", \"es-CR\": \"es\", \"es-DO\": \"es\", \"es-EC\": \"es\", \"es-SV\": \"es\", \"es-GT\": \"es\", \"es-HN\": \"es\", \"es-MX\": \"es\", \"es-NI\": \"es\", \"es-PA\": \"es\", \"es-PY\": \"es\", \"es-PR\": \"es\", \"es-PE\": \"es\", \"es-US\": \"es\", \"es-UY\": \"es\", \"es-VE\": \"es\",\n  \"en\": \"en-US\", \"en-AU\": \"en-US\", \"en-BZ\": \"en-US\", \"en-CA\": \"en-US\", \"en-029\": \"en-US\", \"en-IN\": \"en-US\", \"en-IE\": \"en-US\", \"en-JM\": \"en-US\", \"en-MY\": \"en-US\", \"en-NZ\": \"en-US\", \"en-PH\": \"en-US\", \"en-SG\": \"en-US\", \"en-ZA\": \"en-US\", \"en-TT\": \"en-US\", \"en-GB\": \"en-US\", \"en-US\": \"en-US\", \"en-ZW\": \"en-US\",\n  \"de\": \"de\", \"de-AT\": \"de\", \"de-DE\": \"de\", \"de-LI\": \"de\", \"de-LU\": \"de\", \"de-CH\": \"de\",\n  \"fr\": \"fr\", \"fr-BE\": \"fr\", \"fr-CA\": \"fr\", \"fr-LU\": \"fr\", \"fr-MC\": \"fr\", \"fr-CH\": \"fr\", \"fr-FR\": \"fr\",\n  \"it\": \"it\", \"it-IT\": \"it\", \"it-CH\": \"it\",\n  \"ja\": \"ja\", \"ja-JA\": \"ja\", \"ja-JP\": \"ja\",\n  \"nl\": \"nl\", \"nl-NL\": \"nl\", \"nl-BE\": \"nl\",\n  \"pt\": \"pt-PT\", \"pt-BR\": \"pt-PT\", \"pt-PT\": \"pt-PT\",\n  \"ru\": \"ru\", \"ru-RU\": \"ru\",\n  \"cs\": \"cs\", \"cs-CZ\": \"cs\",\n  \"ar\": \"ar\", \"ar-DZ\": \"ar\", \"ar-BH\": \"ar\", \"ar-EG\": \"ar\", \"ar-IQ\": \"ar\", \"ar-JO\": \"ar\", \"ar-KW\": \"ar\", \"ar-LB\": \"ar\", \"ar-LY\": \"ar\", \"ar-MA\": \"ar\", \"ar-OM\": \"ar\", \"ar-QA\": \"ar\", \"ar-SA\": \"ar\", \"ar-SY\": \"ar\", \"ar-TN\": \"ar\", \"ar-AE\": \"ar\", \"ar-YE\": \"ar\",\n  \"zh\": \"zh\", \"zh-HK\": \"zh\", \"zh-MO\": \"zh\", \"zh-CN\": \"zh\", \"zh-Hans\": \"zh\", \"zh-SG\": \"zh\", \"zh-TW\": \"zh\", \"zh-Hant\": \"zh\" };\n\n\n/**\r\n                                                                                                                              * Sets time to 0 in the date\r\n                                                                                                                              * @param value\r\n                                                                                                                              * @param fullFormat\r\n                                                                                                                              * @param showTime\r\n                                                                                                                              * @returns {Date} date converted with milliseconds 0\r\n                                                                                                                              */\nbizagi.util.getNormalizedDate = function (value, fullFormat, showTime) {\n  var dateTime = value;\n\n  try {\n    if (!!value && typeof value === \"string\") {\n      dateTime = bizagi.util.dateFormatter.getDateFromInvariant(value, showTime);\n    }\n\n    if (dateTime && dateTime !== 0 && dateTime != null) {\n      if (!showTime) {\n        dateTime.setHours(0, 0, 0, 0);\n      } else {\n        dateTime.setMilliseconds(0);\n      }\n\n      dateTime = bizagi.util.dateFormatter.formatDate(dateTime, fullFormat);\n    }\n  } catch (e) {\n  }\n\n  return dateTime;\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName];\n\n  return bizagi.util.parseBoolean(feature);\n};\n\n/**\r\n    * LOCAL STORAGE\r\n    */\n\n/**\r\n        * Last process inbox\r\n        * @returns lastProcessInboxKey string\r\n        */\nbizagi.util.getLastProcessInboxKey = function () {\n  var lastProcessInboxKey = 'lastProcessInbox';\n  lastProcessInboxKey = lastProcessInboxKey.concat(\"_\", bizagi.util.getUserHash());\n  return lastProcessInboxKey;\n};\n\n/**\r\n    * Constructor();\r\n    */\n\n/**\r\n       * Set last process inbox in local storage\r\n       * @returns void()\r\n       */\nbizagi.util.lastProcessInboxInit = function () {\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(bizagi.util.getLastProcessInboxCreate()));\n};\n\n/**\r\n    * Create last process inbox\r\n    * @returns {} lastProcessInbox\r\n    */\nbizagi.util.getLastProcessInboxCreate = function () {\n  return {\n    \"processInfo\": bizagi.util.createLastProcessInboxProcess(),\n    \"sortInfo\": bizagi.util.createLastProcessInboxSort(),\n    \"filterInfo\": bizagi.util.createLastProcessInboxFilter(),\n    \"processColumnsInfo\": bizagi.util.createLastProcessInboxColumns(),\n    \"inputTrayInfo\": bizagi.util.createLastProcessInboxInputTray() };\n\n};\n\n/**\r\n    * Create last process inbox default\r\n    * @returns {} processInfo\r\n    */\nbizagi.util.createLastProcessInboxProcess = function () {\n  return {\n    \"processInfoName\": null,\n    \"idWorkflow\": -1 };\n\n};\n\n/**\r\n    * Create sort info\r\n    * @return {} sortInfo\r\n    */\nbizagi.util.createLastProcessInboxSort = function () {\n  return {\n    \"sortDirection\": \"asc\",\n    \"sortFieldName\": null,\n    \"sortOrder\": null };\n\n};\n\n/**\r\n    * Create filter info\r\n    * filterType (equal, like, startsWith, endsWith )\r\n    * @return {} filterInfo\r\n    */\nbizagi.util.createLastProcessInboxFilter = function () {\n  return {\n    \"filterValue\": null,\n    \"filterFieldName\": null,\n    \"filterType\": \"equal\" };\n\n};\n\n/**\r\n    * Create process columns info\r\n    * @return {} columnsInfo\r\n    */\nbizagi.util.createLastProcessInboxColumns = function () {\n  return {\n    \"processColumns\": [] };\n\n};\n\n/**\r\n    * Create input tray info\r\n    * @return string inputTrayInfo\r\n    */\nbizagi.util.createLastProcessInboxInputTray = function () {\n  return \"inbox\";\n};\n\n/**\r\n    * INIT\r\n    */\n\n/**\r\n        * Init last process inbox\r\n        * @returns lastProcessInbox {}\r\n        */\nbizagi.util.getLastProcessInbox = function () {\n  var lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n\n  if (!lastProcessInbox) {\n    // New object\n    bizagi.util.lastProcessInboxInit();\n    // Get object\n    lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n  }\n\n  return JSON.parse(lastProcessInbox);\n};\n\n/**\r\n    * SET\r\n    */\n\n/**\r\n        * Save current process info\r\n        * @param processName string\r\n        * @param idWorkflow integrer\r\n        * @return void()\r\n        */\nbizagi.util.setLastProcessInbox = function (processInfoName, idWorkflow, smartInboxId) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  if (lastProcessInbox.processInfo) {\n    if (lastProcessInbox.processInfo.idWorkflow != idWorkflow) {\n      lastProcessInbox.processColumnsInfo = null;\n    } else if (!bizagi.util.isEmpty(smartInboxId) && lastProcessInbox.processInfo.smartInboxId != smartInboxId) {\n      lastProcessInbox.processColumnsInfo = null;\n    }\n  }\n\n  // set data\n  lastProcessInbox.processInfo.processInfoName = processInfoName;\n  lastProcessInbox.processInfo.idWorkflow = parseInt(idWorkflow || -1);\n  lastProcessInbox.processInfo.smartInboxId = typeof smartInboxId != \"undefined\" ? smartInboxId : null;\n\n  // When last process inbox change is required to delete Filters\n  if (lastProcessInbox.filterInfo) {\n    lastProcessInbox.filterInfo = bizagi.util.createLastProcessInboxFilter();\n  }\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save process columns info\r\n    * @param processColumns []\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxProcessColumns = function (processColumns) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.processColumnsInfo = lastProcessInbox.processColumnsInfo || {};\n  lastProcessInbox.processColumnsInfo.processColumns = processColumns || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/*\r\n   * Get Live filter from storage\r\n   * @param id object\r\n   * @return object\r\n   */\nbizagi.util.getLiveFiltersFromStorage = function (id) {\n  var filters = [];\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\");\n  try {\n    var serialize = JSON.parse(modelStorage);\n    filters = typeof serialize[id] != \"undefined\" ? JSON.parse(serialize[id]) : filters;\n  } catch (e) {\n    filters = [];\n  }\n\n  return filters;\n};\n\n/*\r\n   * Save Live filter in storage\r\n   * @param id object\r\n   * @param value object\r\n   * @return void()\r\n   */\nbizagi.util.setLiveFiltersToStorage = function (id, value) {\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\") || \"[]\";\n  var serialize = JSON.parse(modelStorage);\n\n  serialize[id] = JSON.stringify(value);\n\n\n  bizagi.util.setItemLocalStorage(\"livefilters\", JSON.encode(Object.assign({}, serialize)));\n};\n\n/**\r\n    * Save sort info\r\n    * @param liveFilters array\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxLiveFilter = function (liveFilters) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.liveFilters = liveFilters || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n\n/**\r\n    * Save sort info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxSort = function (sortFieldName, direction, sortOrder) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.sortInfo.sortFieldName = sortFieldName || null;\n  lastProcessInbox.sortInfo.sortDirection = direction || 'asc';\n  lastProcessInbox.sortInfo.sortOrder = sortOrder || null;\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save filter info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxFilter = function (filterValue, filterFieldName, filterType) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.filterInfo.filterValue = filterValue || null;\n  lastProcessInbox.filterInfo.filterFieldName = filterFieldName || null;\n  lastProcessInbox.filterInfo.filterType = filterType || 'equal';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save input Tray inbox info\r\n    * @param inputTray string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxInputTray = function (inputTray) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.inputTrayInfo = inputTray || '';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * GET\r\n    */\n\n/**\r\n        * Get process info\r\n        * @return {} process info\r\n        */\nbizagi.util.getLastProcessInboxProcessInfo = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // localization / default\n  if (bizagi.localization && lastProcessInbox.processInfo.processInfoName == null) {\n    lastProcessInbox.processInfo.processInfoName = bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\");\n  }\n  lastProcessInbox.processInfo.allProcesses = lastProcessInbox.processInfo.idWorkflow === -1;\n  // response\n  return lastProcessInbox.processInfo;\n};\n\n/**\r\n    * Get smartinbox id\r\n    * @return string smartinbox id\r\n    */\nbizagi.util.getLastProcessInboxSmartInboxId = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processInfo.smartInboxId;\n};\n\n/**\r\n    * Get sort info\r\n    * @return {} sort info\r\n    */\nbizagi.util.getLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.sortInfo;\n};\n\n/**\r\n    * Get filter info\r\n    * @return {} filter info\r\n    */\nbizagi.util.getLastProcessInboxFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.filterInfo;\n};\n\n/**\r\n    * Get live filter info\r\n    * @return {} live filter info\r\n    */\nbizagi.util.getLastProcessInboxLiveFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.liveFilters;\n};\n\n/**\r\n    * Get process columns info\r\n    * @return [] process columns info\r\n    */\nbizagi.util.getLastProcessInboxProcessColumns = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processColumnsInfo;\n};\n\n/**\r\n    * Get input tray info\r\n    * @return string inputTray info\r\n    */\nbizagi.util.getLastProcessInboxInputTray = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.inputTrayInfo;\n};\n\n/**\r\n    * DELETE\r\n    */\n\n/**\r\n        * Remove last process inbox\r\n        * @return void()\r\n        */\nbizagi.util.removeLastProcessInbox = function () {\n  bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.sortInfo) {\n    // set data\n    lastProcessInbox.sortInfo = bizagi.util.createLastProcessInboxSort();\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessLiveFilters = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.liveFilters) {\n    // set data\n    lastProcessInbox.liveFilters = [];\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\nbizagi.util.getSyncTimeStampKey = function () {\n  var syncTimeStampKey = 'syncTimeStamp';\n  syncTimeStampKey = syncTimeStampKey.concat(\"_\", bizagi.util.getUserHash());\n  return syncTimeStampKey;\n};\n\nbizagi.util.storeSyncTimeStamp = function (currentDate) {\n  bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(), currentDate.toString());\n};\n\nbizagi.util.getSyncTimeStamp = function () {\n  var syncTimeStamp = bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());\n  return syncTimeStamp ? new Date(syncTimeStamp) : undefined;\n};\n\nbizagi.util.getUserHash = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  return userKey.hashCode();\n};\n\n/**\r\n    * set or get the value in the defaultWidget\r\n    * if is mobile use cookie\r\n    * if is desktop save the value DETAIL or TABLE\r\n    * if is desktop on get returns inbox or inboxGrid only\r\n    */\nbizagi.util.defaultWidget = function (newValueStr) {\n  var _preferService = bizagi.services.preferences(),\n  _widgets = bizagi.workportal.widgets.widget,\n  _val2Str = function _val2Str(val) {\n    return val === 'DETAIL' ? _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX : _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n  },\n  _str2Val = function _str2Val(str) {\n    return str === 'inbox' ? 'DETAIL' : 'TABLE';\n  },\n  _mobile = {\n    set: function set(newVal) {\n      bizagi.cookie(\"bizagiDefaultWidget\", newVal, { expires: 30 });\n    },\n    get: function get() {\n      return bizagi.cookie(\"bizagiDefaultWidget\");\n    } },\n\n  _desktop = {\n    set: function set(newVal) {\n      var _newValueView = _str2Val(newVal);\n      _preferService.changePreference(_preferService.name.INBOX_VIEW_TYPE, _newValueView);\n    },\n    get: function get() {\n      var _actualValue = _preferService.getPreference(_preferService.name.INBOX_VIEW_TYPE);\n      return _val2Str(_actualValue);\n    } },\n\n  _device = bizagi.util.isMobile ? _mobile : _desktop;\n\n  if (newValueStr !== undefined)\n  _device.set(newValueStr);\n  return _device.get();\n};\n\nbizagi.util.getMobileFeaturesKey = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  var mobileFeaturesKey = 'mobileFeatures';\n  mobileFeaturesKey = mobileFeaturesKey.concat(\"_\", userKey);\n  return mobileFeaturesKey;\n};\n\nbizagi.util.getMobileFeatures = function () {\n  var stringFeatures = bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());\n  var updatedFeatures = $.extend(!bizagi.util.isEmpty(stringFeatures) ? JSON.parse(stringFeatures) : {}, bizagiConfig.features);\n  return updatedFeatures;\n};\n\nbizagi.util.storeMobileFeatures = function (mobileFeatures) {\n  var storedFeatures = bizagi.util.getMobileFeatures();\n  var updatedFeatures = $.extend(storedFeatures, mobileFeatures);\n  bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(), JSON.stringify(updatedFeatures));\n};\n\nbizagi.util.getCardviewMaxColumsAllowed = function () {\n  var maxColumns = 100;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n  if (mobileFeatures && mobileFeatures.maxColumnsEnabled &&\n  mobileFeatures.maxColumnsEnabled.enabled === true) {\n    maxColumns = mobileFeatures.maxColumnsEnabled.value;\n  }\n  return maxColumns;\n};\n\nbizagi.util.blobTob64 = function (blob, onlyData) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsDataURL(blob);\n  reader.onloadend = function () {\n    base64data = reader.result;\n    if (onlyData) {\n      base64data = base64data.split(',')[1];\n    }\n    def.resolve(base64data);\n  };\n  return def;\n};\n/**\r\n    * Convert blob to text\r\n    * @param {*} blob \r\n    */\nbizagi.util.blobToText = function (blob) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsText(blob);\n  reader.onloadend = function () {\n    text = reader.result;\n    def.resolve(text);\n  };\n  return def;\n};\n/**\r\n    * Get valid data url\r\n    * @param {} properties\r\n    * @returns {}\r\n    */\n\n/**\r\n       * Get valid data url\r\n       * @param {} properties\r\n       * @returns {}\r\n       */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.getDataUrl = function (binaryData, url) {\n  var currentUrl;\n\n  try {\n    if (typeof binaryData !== \"undefined\" && !bizagi.util.isEmpty(binaryData)) {\n      var data = binaryData;\n      var newUrl = data.value || data;\n\n      if (Array.isArray(newUrl)) {\n        var tempUrl = newUrl.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = newUrl;\n      }\n    } else {\n      currentUrl = url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.console = {};\nbizagi.util.console.log = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.log(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.log.apply(this, arguments);\n};\n\nbizagi.util.console.error = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.error(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.error.apply(this, arguments);\n};\n\nbizagi.util.deepExtend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n    continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') {\n          if (obj[key] instanceof Array == true)\n          out[key] = obj[key].slice(0);else\n\n          out[key] = deepExtend(out[key], obj[key]);\n        } else\n\n        out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nbizagi.util.extend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n    continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n      out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n/**\r\n    * Get the justify-content property to apply to a control according to the specified \"align\" property\r\n    * @param {string} align - left, right, center, default or justify\r\n    */\nbizagi.util.mapAlignClassName = function (align) {\n  var descs = {\n    'rigth': 'flex-end',\n    'left': 'flex-start',\n    'justify': 'flex-start',\n    'default': 'center',\n    'center': 'center' };\n\n  return descs[align] || \"center\";\n};\n\nbizagi.util.isMobileErrorTracesEnabled = function () {\n  var mobileErrorTracesEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileErrorTraces && mobileFeatures.mobileErrorTraces.enabled === true) {\n    mobileErrorTracesEnabled = true;\n  }\n\n  return mobileErrorTracesEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileSmartInboxEnabled = function () {\n  var mobileSmartInboxEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileSmartInbox && mobileFeatures.mobileSmartInbox.enabled === true) {\n    mobileSmartInboxEnabled = true;\n  }\n\n  return mobileSmartInboxEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileLiveFiltersEnabled = function () {\n  var mobileLiveFiltersEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileLiveFilters && mobileFeatures.mobileLiveFilters.enabled === true) {\n    mobileLiveFiltersEnabled = true;\n  }\n\n  return mobileLiveFiltersEnabled && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n$.any = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return false;\n  var result = $.grep(data, callback);\n  return result != null && result !== undefined && result.length > 0;\n};\n\n$.first = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return null;\n  var result = $.grep(data, callback);\n  return result == null || result === undefined || result.length == 0 ? null : result[0];\n};\n\n$.groupBy = function (data, property) {\n  if (data === undefined || data == null || data.length == 0) return {};\n  var result = {};\n  $.each(data, function (i, item) {\n    if (item === undefined) return;\n    if (result[item[property]] === undefined) result[item[property]] = [];\n    result[item[property]].push(item);\n  });\n  return result;\n};","/*\r\n*   Name: Bizagi Grid for tablet\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This widget will extend the bizagi grid widget to specialize into a tablet view\r\n*\r\n*   Markup: <div></div>\r\n*\r\n*   Styles:\r\n*   - css/bizagi/tablet/controls/bizagi.grid.css\r\n*/\n\n(function ($) {\n  $.widget(\"ui.bizagi_grid_tablet\", $.ui.bizagi_grid, {\n\n    /**\r\n                                                         * Constructor\r\n                                                         * @private\r\n                                                         */\n    _init: function _init() {\n      this._super();\n\n      this.isOfflineForm = typeof this.options.isOfflineForm !== \"undefined\" && bizagi.util.parseBoolean(this.options.isOfflineForm);\n    },\n\n    /**\r\n        * Method to attach any handler to the grid\r\n        * @returns {}\r\n        */\n    attachHandlers: function attachHandlers() {\n      var self = this;\n\n      // Add paging events\n      self._getComponent(\"pager\").find(\"ul li button\").bind(\"click\", function () {\n        var pageNumber = parseInt($(this).attr(\"data-page-number\"));\n\n        if (pageNumber) {\n          self.changePage(pageNumber);\n        }\n      });\n\n      //TODO falta implementar\n      self._getComponent(\"dynamicPager\").find(\"input\").bind(\"click\", function () {\n        self.selectDynamicPager();\n      });\n\n      // Add sort events\n      self._getComponent(\"columns\").find(\".bz-tablet-grid__label.bz-table__column-sort\").bind(\"click\", function () {\n        if (!self.isOfflineForm) {\n          var columnIndex = $(this).attr(\"data-column-index\");\n          self.sortBy(columnIndex);\n        }\n      });\n\n      // Bind button actions\n      self._getComponent(\"buttons\").find(\"[data-action]\").bind(\"click\", function () {\n        if ($(this).attr(\"data-action\") === \"totalizer\") {\n          self.totalizer();\n        } else {\n          self.processAction($(this).attr(\"data-action\"));\n          self.unselectRow();\n        }\n      });\n\n      self._getComponent(\"rowButtons\").find(\"[data-action]\").bind(\"click\", function () {\n        self.processAction($(this).attr(\"data-action\"));\n        self.unselectRow();\n      });\n\n      if (bizagi.util.isiOSDevice()) {\n        //Horizontal scroll issue\n        self._resizeListener();\n      }\n\n      if (this.isOfflineForm) {\n        self._getComponent(\"rows\").on(\"click\", \".bz-tablet-grid__cell-actions [data-action=more]\", function (evt) {\n          var $context = $(evt.target).parents(\"[data-bizagi-component=cells]\");\n\n          if ($context && $context.hasClass(\"bz-tablet-grid__row\")) {\n            var businessKey = $context.attr(\"data-business-key\");\n            var isNewRow = bizagi.util.parseBoolean($context.attr(\"data-new-row\")) || false;\n\n            if (isNewRow) {\n              self.onRemoveNewRow(businessKey);\n            } else {\n              self.processAction(\"remove\", { key: businessKey });\n            }\n          }\n        });\n      } else {\n\n        self._getComponent(\"rows\").find(\"tr\").bind(\"click\", function (evt) {\n          var $context = $(evt.target).closest(\".bz-tablet-grid__cell\");\n\n          evt.stopPropagation();\n\n          if ($context && $context.hasClass(\"bz-tablet-grid__cell\")) {\n            var key = $(this).attr(\"data-key\");\n            var businessKey = $(this).attr(\"data-business-key\");\n\n            self.selectRow(key, businessKey);\n          }\n        });\n\n        // Bind special cell button action\n        self._addColumnActions();\n      }\n    },\n\n    /**\r\n        * Popup Total\r\n        * @returns {}\r\n        */\n    totalizer: function totalizer() {\n      this.options.totalData();\n    },\n    /**\r\n        * Executes the row selected handler\r\n        * @returns {}\r\n        */\n    onRowSelected: function onRowSelected() {\n      // Call base\n      $.ui.bizagi_grid.prototype.onRowSelected.apply(this, arguments);\n\n      // Show row buttons             \n      this._showRowButtons();\n    },\n\n    /**\r\n        * Executes the row un-selected handler\r\n        * @returns {}\r\n        */\n    onRowUnselected: function onRowUnselected() {\n      // Call base\n      $.ui.bizagi_grid.prototype.onRowUnselected.apply(this, arguments);\n\n      // Hide row buttons           \n      this._hideRowButtons();\n    },\n\n    getCell: function getCell(key, xpath, index) {\n      var self = this;\n      var row = self._getComponent(\"rows\").find(\"[data-business-key=\" + key + \"]\");\n      var allVisibleTd,cell = \"\";\n\n      allVisibleTd = $(\"td\", $(row));\n      cell = allVisibleTd[index + 1];\n\n      return $(cell);\n    },\n\n    /**\r\n        * Template method to check if buttons component must be rendered\r\n        * @returns {}\r\n        */\n    _canShowButtons: function _canShowButtons() {\n      var actions = this.options.actions;\n\n      if (this.isOfflineForm) {\n        return actions[\"add\"] || actions[\"remove\"] || actions[\"edit\"] || actions[\"inlineAdd\"];\n      } else {\n        return actions[\"add\"] || actions[\"hasTotalizer\"];\n      }\n    },\n\n    /*\r\n       *   This method draws a grid row\r\n       */\n    drawRow: function drawRow(rowData, isNewRow) {\n      var self = this;\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n      var row = $.fasttmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      $.each(rowData, function (i, cell) {\n        // Draw normal cell\n        cells += self.drawCell(i, key, cell, newRow);\n      });\n\n      if (self._canShowRowButtons()) {\n        // Draw special column\n        cells += self.drawSpecialCell(self.options.columns.length + 1);\n      }\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws a grid pager\r\n       */\n    drawPager: function drawPager() {\n      var self = this;\n      var options = self.options;\n\n      // Calculate pages\n      var pages = [];\n      var renderPages = [];\n\n      for (var i = 1; i <= self.data.total; i++) {\n        pages.push({\n          number: i,\n          active: i == self.data.page });\n\n      }\n\n      if (self.data.page < 3 || self.data.page > self.data.total - 2) {\n        renderPages = [];\n      } else {\n        renderPages = [self.data.page - 1, self.data.page, self.data.page + 1];\n      }\n\n      var pagination = {\n        renderPages: renderPages,\n        pages: pages,\n        pagination: {\n          totalPages: self.data.total,\n          currentPage: self.data.page } };\n\n\n\n      // Resolve pager template\n      return $.fasttmpl(options.template.pager, pagination);\n    },\n\n    /**\r\n        * Template method to check if row buttons must be displayed when the row is selected\r\n        * @returns {}\r\n        */\n    _canShowRowButtons: function _canShowRowButtons() {\n      var actions = this.options.actions;\n\n      if (this.isOfflineForm) {\n        return actions[\"remove\"];\n      } else {\n        return actions[\"edit\"] || actions[\"details\"] || actions[\"remove\"] || this.options.subType == \"adhocGrid\";\n      }\n    },\n\n    /**\r\n        * Show the row buttons\r\n        * @returns {}\r\n        */\n    _showRowButtons: function _showRowButtons() {\n      var self = this;\n      var doc = window.document;\n      var element = self.element;\n\n      // Add selected style to row\n      var tr = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + self.selectedRow + \"]\");\n      tr.addClass(\"ui-bizagi-state-selected\");\n    },\n\n    /**\r\n        * Hide the row buttons\r\n        * @returns {}\r\n        */\n    _hideRowButtons: function _hideRowButtons() {\n      var self = this;\n\n      // Call base\n      $.ui.bizagi_grid.prototype.onRowUnselected.apply(self, arguments);\n\n      var tr = self._getComponent(\"rows\").find(\"tr[data-key=\" + self.selectedRow + \"]\");\n      tr.removeClass(\"ui-bizagi-state-selected\");\n\n      // Hide floating buttons for the row\n      if (!self.isOfflineForm) {\n        var floatingButtons = self._getComponent(\"rowButtons\");\n        floatingButtons.hide();\n      }\n    },\n\n    /**\r\n        * Return the new created ids\r\n        * @param {} rows\r\n        * @returns {}\r\n        */\n    getNewRowKeys: function getNewRowKeys(rows) {\n      var self = this;\n\n      rows = rows || self._getComponent(\"rows\").find(\"[data-new-row=true]\");\n\n      return $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n    },\n\n    /**\r\n        * Process an action in order to do something with the grid\r\n        * @param {} action\r\n        * @returns {}\r\n        */\n    processAction: function processAction(action) {\n      var self = this;\n\n      // Call base\n      $.ui.bizagi_grid.prototype.processAction.apply(self, arguments);\n\n      if (action === \"save\") {\n        self.onSaveAddedRows();\n      }\n      if (action === \"cancel\") {\n        self.onCancelEdition();\n      }\n    },\n\n    /**\r\n        * Check if row its new\r\n        * @param {} businessKey\r\n        * @returns {}\r\n        */\n    isNewRecord: function isNewRecord(businessKey) {\n      var self = this;\n      var row = self._getComponent(\"rows\");\n\n      if (row) {\n        businessKey = row.find(\"[data-business-key='\" + businessKey + \"']\");\n        if ($(businessKey).data(\"new-row\")) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\r\n        * Add inline row\r\n        * @returns {}\r\n        */\n    addInlineRow: function addInlineRow() {\n      var self = this;\n\n      // Draw the new row\n      self._triggerHandler(\"beforeInlineAdd\");\n      var html = self.drawRow(self.createAddRowData(), true);\n      var newRow = $(html);\n\n      // Execute the postrender\n      self.postRenderRow(newRow);\n\n      // Append to rows component\n      self._getComponent(\"rows\").append(newRow);\n\n      var buttons = self._getComponent(\"buttons\");\n\n      if (self.isOfflineForm) {\n        buttons.find(\"[data-action=save]\").removeClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").removeClass(\"bz-tablet-grid__buttons--hidden\");\n      } else {\n        buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\n        buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\n      }\n\n      // Show table component if there are no rows\n      if (self.data.rows.length === 0) {\n        self._getComponent(\"table\").show();\n        self._getComponent(\"emptyTable\").hide();\n      }\n\n      self._triggerHandler(\"afterInlineAdd\", newRow.data());\n    },\n\n    /**\r\n        * Creates a dummy data for the new row\r\n        * @returns {}\r\n        */\n    createAddRowData: function createAddRowData() {\n      var self = this;\n      var options = self.options;\n      var row = [];\n\n      $.each(options.columns, function (i) {\n\n        if (i === self.columnKeyIndex) {\n          // Add random key so we can identify them later\n          var key = Math.ceil(Math.random() * 100000);\n          row.push(key);\n        } else {\n          // Add null value\n          row.push(null);\n        }\n      });\n\n      return row;\n    },\n\n    /**\r\n        * Executes the on add row handler\r\n        * @returns {}\r\n        */\n    onAddRow: function onAddRow() {\n      var self = this;\n\n      // Allow add\n      if (self.options.actions.add) {\n        if (self.options.actions.inlineAdd) {\n          return self.addInlineRow();\n        } else {\n          // Open dialog with addform\n          return self._triggerHandler(\"addRow\");\n        }\n      }\n    },\n\n    /**\r\n        * Executes when the user presses the cancel button, after inline add edition\r\n        * @returns {}\r\n        */\n    onCancelEdition: function onCancelEdition() {\n      var self = this;\n\n      // Remove zero key rows\n      var rows = self._getComponent(\"rows\").find(\"[data-new-row=true]\");\n      var savedRows = self._getComponent(\"rows\").find(\"[data-new-row=false]\");\n      rows.detach();\n\n      // Hide buttons\n      var buttons = self._getComponent(\"buttons\");\n\n      if (self.isOfflineForm) {\n        buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n      } else {\n        buttons.find(\"[data-action=save]\").hide();\n        buttons.find(\"[data-action=cancel]\").hide();\n      }\n\n      // Show table component if there are no rows\n      if (savedRows.length === 0) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"emptyTable\").show();\n      }\n\n      return self._triggerHandler(\"cancelEdition\", { keys: self.getNewRowKeys(rows) });\n    },\n\n    /**\r\n        * Executes when the user presses the save button, after inline add edition\r\n        * @returns {}\r\n        */\n    onSaveAddedRows: function onSaveAddedRows() {\n      var self = this;\n\n      // Retrieve key of added rows\n      var newRowKeys = self.getNewRowKeys();\n      var buttons = self._getComponent(\"buttons\");\n\n      // Hide buttons         \n      if (newRowKeys.length >= 1 && self.isValid()) {\n\n        var row = self._getComponent(\"rows\");\n\n        if (self.isOfflineForm) {\n          $.each(newRowKeys, function (key, value) {\n            var businessKey = row.find(\"[data-business-key='\" + value + \"']\");\n            $(businessKey).attr(\"data-new-row\", 'false');\n          });\n\n          buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n          buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n\n          self._triggerHandler(\"saveAddedRows\", { keys: newRowKeys });\n\n          return true;\n        } else {\n          buttons.find(\"[data-action=save]\").hide();\n          buttons.find(\"[data-action=cancel]\").hide();\n\n          self._triggerHandler(\"saveAddedRows\", { keys: newRowKeys });\n\n          return self._triggerHandler(\"removeNewRecords\", { keys: newRowKeys });\n        }\n\n      } else {\n        return true;\n      }\n    },\n\n    /**\r\n        * Hide buttons\r\n        */\n    hideHeaderButtons: function hideHeaderButtons() {\n      var self = this;\n      var buttons = self._getComponent(\"buttons\");\n\n      if (buttons && buttons.length) {\n        buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n      }\n    },\n\n    /**\r\n        * Add new column actions\r\n        * @private\r\n        */\n    _addColumnActions: function _addColumnActions() {\n      var self = this;\n      var items = [];\n\n      if (self.options.actions.details) {\n        items.push({\n          name: bizagi.localization.getResource(\"render-collection-navigator-details-form\"),\n          fn: function fn(e) {\n            var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\n\n            if (self.options.actions.details) {\n              self.processAction(\"details\", { key: businessKey });\n            } else {\n              self.processAction(\"more\", { key: businessKey });\n            }\n          } });\n\n      }\n\n      if (self.options.actions.edit) {\n        items.push({\n          name: bizagi.localization.getResource(\"render-grid-edit-label\"),\n          fn: function fn(e) {\n            var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\n\n            self.processAction(\"edit\", { key: businessKey });\n          } });\n\n      }\n\n      if (self.options.actions.remove) {\n        items.push({\n          name: bizagi.localization.getResource(\"render-ecm-confirm-bt-delete\"),\n          fn: function fn(e) {\n            var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\n\n            self.processAction(\"remove\", { key: businessKey });\n          } });\n\n      }\n\n      self._getComponent(\"rows\").find(\"[data-action=more]\").overflowMenu({ items: items });\n    },\n\n    /**\r\n        * Executes when the user presses the cancel button, after inline add edition\r\n        * @param key\r\n        * @param businessKey\r\n        */\n    onRemoveNewRow: function onRemoveNewRow(businessKey) {\n      var self = this;\n      var buttons = self._getComponent(\"buttons\");\n\n      // Remove zero key rows\n      var cancelNewRow = self._getComponent(\"rows\").find(\"tr[data-business-key=\" + businessKey + \"]\");\n      var savedRows = self._getComponent(\"rows\").find(\"[data-new-row=false]\");\n      var newRows = self._getComponent(\"rows\").find(\"[data-new-row=true]\");\n\n      cancelNewRow.detach();\n\n      // Hide buttons\n      if (newRows.length === 1) {\n        buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n        buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\n      }\n\n      // Show table component if there are no rows\n      if (savedRows.length === 0 && newRows.length === 1) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"emptyTable\").show();\n      }\n\n      return self._triggerHandler(\"cancelEdition\", { keys: self.getNewRowKeys(cancelNewRow) });\n    },\n\n    /**\r\n        * Replaces a matched element in the container for the specified \"replace\" element\r\n        * @param html\r\n        * @param element\r\n        * @param replace\r\n        * @returns {*}\r\n        * @private\r\n        */\n    _replaceElement: function _replaceElement(html, element, replace) {\n      return html.replace(new RegExp(\"{{element \" + element + \"}}\", 'g'), replace);\n    },\n\n    _resizeListener: function _resizeListener() {\n      var randomNumber = Math.ceil(Math.random() * 100000);\n      var prevWidth = 0;\n      var self = this;\n      var tableComp = self._getComponent(\"table\");\n      var intersectionObserver = new IntersectionObserver(function (args) {\n        args.forEach(function (entry) {\n          if (entry.isIntersecting) {\n            $(window).on(\"resize.\" + randomNumber, self._fixHorizontalScroll.bind(self));\n          } else {\n            $(window).off(\"resize.\" + randomNumber);\n          }\n        });\n        if (prevWidth != tableComp.width()) {\n          prevWidth = tableComp.width();\n          self._fixHorizontalScroll();\n        }\n      });\n      intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n      intersectionObserver.observe(self._getComponent(\"table\").get(0));\n    },\n\n    _fixHorizontalScroll: function _fixHorizontalScroll() {\n      var self = this;\n      var tableComp = self._getComponent(\"table\");\n      tableComp.css({ webkitOverflowScrolling: 'auto', 'overflow-x': 'hidden' });\n      setTimeout(function () {\n        tableComp.css({ webkitOverflowScrolling: 'touch', 'overflow-x': 'auto' });\n      }, 10);\n    } });\n\n\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}bizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\n\n/**\r\n                                                                               * Method to detect iPad visitors\r\n                                                                               */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n\n/**\r\n    *   Returns a boolean if there are two equal objects\r\n    */\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n\n/**\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/**\r\n    *   Encodes the xpath\r\n    */\nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath))\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n\n/**\r\n    *   Add a clone to the object prototype\r\n    */\nbizagi.clone = function (obj) {\n  return JSON.parse(JSON.encode(obj));\n};\n\n/**\r\n    *   Generates a random guid\r\n    */\nMath.guid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    *\r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n\n  self.add = function (callback) {\n    queue.push({ callbacks: [callback] });\n  };\n\n  self.addParallel = function (callback) {\n    if (queue.length == 0)\n    return self.add(callback);\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\")\n          return callback();\n          // Deferred support\n          return callback;\n        }));\n      });\n    };\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n};\n\n/**\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n   *   Read the query string parameteres\r\n   */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = 0; i < pairs.length; i++) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n\n\n/*\r\n   *   Info scenarios\r\n   */\nvar scenarioInfo = function scenarioInfo(params) {\n  var self = this;\n  var _state = {};\n\n  /**\r\n                   * Return url where is located specific scenario\r\n                   *\r\n                   * @param params\r\n                   * @returns {string}\r\n                   */\n  self.getFileScenario = function (params) {\n    params = params || {};\n    var url = \"\";\n    var scenario = params.scenario.split(\".\") || [];\n    var category = scenario[0];\n\n    url = BIZAGI_SMARTPHONE_PATH + \"scenarios/\" + category + \"/\" + params.scenario + \".js\";\n\n    return url;\n  };\n\n  return {\n    getFileScenario: self.getFileScenario };\n\n};\n\n/**\r\n    *   Determines if parameter 'n' is numeric\r\n    */\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n/**\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n/*\r\n    * Method to detect Android visitors\r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\n/**\r\n    * Functions to loading\r\n    */\n(function ($) {\n  $.fn.startLoading = function (params) {\n    bizagi.util.smartphone.startLoading();\n  };\n\n  $.fn.endLoading = function () {\n    bizagi.util.smartphone.stopLoading();\n  };\n})(jQuery);\n\n/***\r\n             * Removes the objects and dispose\r\n             * @param obj\r\n             */\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\n/**\r\n   * Remove all backslashes that represent scape of characters\r\n   */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/**\r\n    * CryptoJS MD5 \r\n    * @param {} message \r\n    * @returns {} \r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n\n/***\r\n   * Transform base64 image to blob\r\n   * @b64Data \r\n   * @contentType \r\n   * @sliceSize \r\n   */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n/*\r\n  * Validates if the text is a valid opening and closing tags, including classes\r\n  */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\n\n/*\r\n   *   Determines if a control as a scrollbar \r\n   */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n/**\r\n    * Convert String to Base64 Unicode\r\n    * @param {} str \r\n    * @returns {} \r\n    */\nbizagi.util.b64EncodeUnicode = function (string) {\n  return btoa(encodeURIComponent(string).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode(\"0x\" + p1);\n  }));\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else\n    if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else\n    if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else\n    if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else\n    {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else\n  if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {significantFlag = true;from = i;} else\n      {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {significantFlag = true;to = j + 1;} else\n      {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else\n      {return '0';}\n\n    } else\n    {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else\n  {return '';}\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Array]\";\n};","//  This file is part of the jQuery formatCurrency Plugin.\n//\n//    The jQuery formatCurrency Plugin is free software: you can redistribute it\n//    and/or modify it under the terms of the GNU General Public License as published \n//    by the Free Software Foundation, either version 3 of the License, or\n//    (at your option) any later version.\n\n//    The jQuery formatCurrency Plugin is distributed in the hope that it will\n//    be useful, but WITHOUT ANY WARRANTY; without even the implied warranty \n//    of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//    GNU General Public License for more details.\n//\n//    You should have received a copy of the GNU General Public License along with \n//    the jQuery formatCurrency Plugin.  If not, see <http://www.gnu.org/licenses/>.\n\n(function ($) {\n\n  $.formatCurrency = {};\n\n  $.formatCurrency.regions = [];\n\n  // default Region is en\n  $.formatCurrency.regions[''] = {\n    symbol: '$',\n    positiveFormat: '%s%n',\n    negativeFormat: '(%s%n)',\n    decimalSymbol: '.',\n    digitGroupSymbol: ',',\n    groupDigits: true };\n\n\n  $.fn.formatCurrency = function (destination, settings) {\n\n    if (arguments.length == 1 && typeof destination !== \"string\") {\n      settings = destination;\n      destination = false;\n    }\n\n    // initialize defaults\n    var defaults = {\n      name: \"formatCurrency\",\n      colorize: false,\n      region: '',\n      global: true,\n      roundToDecimalPlace: 2, // roundToDecimalPlace: -1; for no rounding; 0 to round to the dollar; 1 for one digit cents; 2 for two digit cents; 3 for three digit cents; ...\n      eventOnDecimalsEntered: false };\n\n    // initialize default region\n    defaults = $.extend(defaults, $.formatCurrency.regions['']);\n    // override defaults with settings passed in\n    settings = $.extend(defaults, settings);\n\n    // check for region setting\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var $this = $(this);\n\n      // get number\n      var num = '0';\n      var multiCeroPattern = new RegExp(\"^(0+|-0+)\", \"g\");\n      num = $this[$this.is('input, select, textarea') ? 'val' : 'html']();\n\n      //identify '(123)' as a negative number\n      if (num.search('\\\\(') >= 0) {\n        num = '-' + num;\n      }\n\n      // Identify 0000 and -0000 pattern, and replace to 0\n      if (!num.match(/[1-9]/g)) num = num.replace(multiCeroPattern, 0);\n\n      if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n        return;\n      }\n\n      // if the number is valid use it, otherwise clean it\n      if (isNaN(num)) {\n        // clean number\n        num = num.replace(settings.regex, '');\n\n        if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n          return;\n        }\n\n        if (settings.decimalSymbol != '.') {\n          num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arithmetic\n        }\n        if (isNaN(num)) {\n          num = '0';\n        }\n      }\n\n      // evalutate number input\n      var numParts = String(num).split('.');\n      var isPositive = num == Math.abs(num);\n      var hasDecimals = numParts.length > 1;\n      var decimals = hasDecimals ? numParts[1].toString() : '0';\n      var originalDecimals = decimals;\n\n      // format number\n      num = Math.abs(numParts[0]);\n      num = isNaN(num) ? 0 : num;\n      if (settings.roundToDecimalPlace >= 0) {\n        decimals = parseFloat('1.' + decimals); // prepend \"0.\"; (IE does NOT round 0.50.toFixed(0) up, but (1+0.50).toFixed(0)-1\n        decimals = decimals.toFixed(settings.roundToDecimalPlace); // round\n        if (decimals.substring(0, 1) == '2') {\n          num = Number(num) + 1;\n        }\n        decimals = decimals.substring(2); // remove \"0.\"\n      }\n      num = String(num);\n\n      if (settings.groupDigits) {\n        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++) {\n          num = num.substring(0, num.length - (4 * i + 3)) + settings.digitGroupSymbol + num.substring(num.length - (4 * i + 3));\n        }\n      }\n\n      if (hasDecimals && settings.roundToDecimalPlace == -1 || settings.roundToDecimalPlace > 0) {\n        num += settings.decimalSymbol + decimals;\n      }\n\n      // format symbol/negative\n      var format = isPositive ? settings.positiveFormat : settings.negativeFormat;\n      var money = format.replace(/%s/g, settings.symbol);\n      money = money.replace(/%n/g, num);\n\n      // setup destination\n      var $destination = $([]);\n      if (!destination) {\n        $destination = $this;\n      } else {\n        $destination = $(destination);\n      }\n      // set destination\n      $destination[$destination.is('input, select, textarea') ? 'val' : 'html'](money);\n\n      if (\n      hasDecimals &&\n      settings.eventOnDecimalsEntered &&\n      originalDecimals.length > settings.roundToDecimalPlace)\n      {\n        $destination.trigger('decimalsEntered', originalDecimals);\n      }\n\n      // colorize\n      if (settings.colorize) {\n        $destination.css('color', isPositive ? 'black' : 'red');\n      }\n    });\n  };\n\n  // Remove all non numbers from text\n  $.fn.toNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"toNumber\",\n      region: '',\n      global: true },\n    $.formatCurrency.regions['']);\n\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n      $(this)[method]($(this)[method]().replace('(', '(-').replace(settings.regex, ''));\n    });\n  };\n\n  // returns the value from the first element as a number\n  $.fn.asNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"asNumber\",\n      region: '',\n      parse: true,\n      parseType: 'Float',\n      global: true },\n    $.formatCurrency.regions['']);\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n    settings.parseType = validateParseType(settings.parseType);\n\n    var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n    var num = $(this)[method]();\n    num = num ? num : \"\";\n    num = num.replace('(', '(-');\n    num = num.replace(settings.regex, '');\n    if (!settings.parse) {\n      return num;\n    }\n\n    if (num.length == 0) {\n      num = '0';\n    }\n\n    if (settings.decimalSymbol != '.') {\n      num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arthmetic\n    }\n\n    return window['parse' + settings.parseType](num);\n  };\n\n  function getRegionOrCulture(region) {\n    var regionInfo = $.formatCurrency.regions[region];\n    if (regionInfo) {\n      return regionInfo;\n    } else\n    {\n      if (/(\\w+)-(\\w+)/g.test(region)) {\n        var culture = region.replace(/(\\w+)-(\\w+)/g, \"$1\");\n        return $.formatCurrency.regions[culture];\n      }\n    }\n    // fallback to extend(null) (i.e. nothing)\n    return null;\n  }\n\n  function validateParseType(parseType) {\n    switch (parseType.toLowerCase()) {\n      case 'int':\n        return 'Int';\n      case 'float':\n        return 'Float';\n      default:\n        throw 'invalid parseType';}\n\n  }\n\n  function generateRegex(settings) {\n    if (settings.symbol === '') {\n      return new RegExp(\"[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    } else\n    {\n      var symbol = settings.symbol.replace('$', '\\\\$').replace('.', '\\\\.');\n      return new RegExp(symbol + \"|[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    }\n  }\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: jQuery.param(data),\n      type: \"POST\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = params.submitData || {};\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /*\r\n      *   Executes a fileprint action in the server\r\n      */\n  getFilePrintUrl: function getFilePrintUrl(params) {\n\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n  /*\r\n      *   Executes a grid export action in the server\r\n      */\n  getGridExportUrl: function getGridExportUrl(params) {\n\n    var self = this,\n    url = this.serviceLocator.getUrl(\"render-upload-data-url\"),\n    data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType; //\"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        return 'text';\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\n  /* \r\n                                                                                        *   Constructor\r\n                                                                                        */\n  init: function init(form, actions) {\n    var self = this;\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.trigger(\"click\");\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"normal\", \"!important\");\n        });\n        self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\n          var element = self.rendersByXpath[render.properties.xpath][i];\n          if (bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties))) {\n            self.rendersByXpath[render.properties.xpath].splice(i, 1);\n            self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\n            break;\n          }\n        }\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n        delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      self.startLoading();\n\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n\n      // External Events\n      self.propagateExternalEvents(e);\n\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    self.validationController.showErrorMessage(errorMessage);\n    self.validationController.expandNotificationBox();\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value) {\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    this._super(decodedValue);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      cell.setValue(newValue);\n      cell.setDisplayValue(newValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, newValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /*\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      *  @return {object} render attributes, including id, xpathContext, idPagecache, disposition (inline or attachment), and exportType (XLS or PDF)\r\n      */\n  getGridExportUrl: function getGridExportUrl(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportUrl({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      sessionId: self.getSessionId(),\n      idForm: self.getFormContainer().properties.id });\n\n\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrs Fernando Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    var self = this;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Set flag to check when a render has changed\n    self.changed = false;\n\n    // If the render is not editable return the readonly version of the column\n    //Fix: Uncaught RangeError: Maximum call stack size exceeded\n    if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Search Slide view Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Richar Urbano - RicharU\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will shows a sliding search form  order to edit\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view.search\", {}, {\n  /* \r\n                                                                  *   Constructor\r\n                                                                  */\n  init: function init(dataService, renderFactory, searchForms, searchParams, slideParams) {\n    var self = this;\n\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.searchForms = searchForms;\n    self.searchParams = searchParams;\n    self.slideParams = slideParams;\n    self.slideDeferred = new $.Deferred();\n    self.extraButtons = slideParams.hasOwnProperty(\"buttons\") ? slideParams.buttons : false;\n\n    // Create container\n    self.container = self.slideParams.navigation.createRenderContainer({ title: self.slideParams.title });\n\n    self.processButtons().\n    done(function (data) {\n      self.slideDeferred.resolve(data);\n    }).fail(function () {\n      self.slideDeferred.reject();\n    });\n\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params \r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    self.properties = params;\n\n    //Render the search form\n    self.renderSearchDialog(params);\n\n    // Return promise\n    return self.slideDeferred.promise();\n  },\n\n  /**\r\n      * Render the search form\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  renderSearchDialog: function renderSearchDialog(params) {\n    var self = this;\n\n    bizagi.util.tablet.startLoading();\n\n    // Creates a dialog\n    $.when(self.getSearchContainerData(params)).pipe(function (data) {\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      // Render dialog form\n      var form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideParams.navigation,\n        view_container: self.container });\n\n\n      form.buttons = [\n      {\n        ordinal: 1,\n        action: \"search\",\n        caption: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n        callback: function callback() {\n          self.currentSearchForm.performSearch(self.searchParams);\n        } },\n\n      {\n        ordinal: 2,\n        action: \"cancel\",\n        caption: \"cancel\",\n        callback: function callback() {\n          // Close slide\n          self.goBack();\n        } },\n\n      {\n        ordinal: 3,\n        action: \"add\",\n        caption: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        callback: function callback() {\n          var params = {\n            idCase: self.slideParams.idCase,\n            idRender: self.properties.idRender,\n            displayName: self.properties.displayName,\n            idPageCache: self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } }];\n\n\n\n      if (!self.slideParams.allowNew) {\n        form.buttons.pop();\n      }\n\n      // Save form reference\n      self.form = form;\n\n      // Return rendering promise\n      return form.render();\n    }).done(function (element) {\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      self.slideParams.navigation.navigate(self.container.id);\n\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Hide title of html content\n      self.searchResultContainer = $(\".ui-bizagi-container-search-results\", element);\n      self.searchResultContainer.hide();\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Set currents search form\n      self.currentSearchForm = self.form.firstChild();\n      self.currentSearchForm.triggerHandler(\"ondomincluded\");\n\n      self.currentSearchForm.bind(\"instancerefresh\", function () {\n        // Show search results container\n        self.searchResultContainer.show();\n      });\n\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams.scrollTop = self.form.container.parent().scrollTop();\n        refreshParams = $.extend({\n          focus: focus,\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true,\n          contextType: self.properties.contextType || \"\",\n          navigation: self.searchFormParams.navigation,\n          view_container: self.container },\n        refreshParams);\n\n        return self.renderSearchDialog(refreshParams);\n      });\n\n      // Add row selected handlers to resolve the deferred\n      self.currentSearchForm.bind(\"instanceSelected\", function (ev, ui) {\n        // Close slide      \n        self.goBack();\n\n        self.slideBoxDeferred.resolve({\n          id: ui.id,\n          label: \"\" });\n\n      });\n      // if is any modal view displayed, hide it to allow this search form been displayed\n      self.handleSearchFormZindex(\"show\");\n\n      self.containerSearchCriteria = self.currentSearchForm.container.find(\".ui-bizagi-container-search-criteria\");\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n  },\n\n  /**\r\n      * Get the addform and show it\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  renderAddForm: function renderAddForm(params) {\n    var self = this;\n    params = params || {};\n    var properties = self.properties;\n\n    if (typeof self.addContainer === \"undefined\") {\n      self.addContainer =\n      self.slideParams.navigation.createRenderContainer({\n        title: bizagi.localization.getResource(\"render-dialog-entity\") });\n\n    }\n\n    var isRefresh = params.isRefresh || false;\n\n    var getFormParams = {\n      idPageCache: params.idPageCache,\n      guidEntity: properties.entity,\n      contextType: \"entity\" };\n\n\n    if (isRefresh) {\n      getFormParams.isRefresh = true;\n      getFormParams.idStartScope = params.idStartScope;\n    } else {\n      getFormParams.idRender = properties.idRender;\n      getFormParams.requestedForm = \"addForm\";\n    }\n\n    bizagi.util.tablet.startLoading();\n\n    //Get the addform\n    $.when(self.dataService.getFormData(getFormParams)).pipe(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      data.form.contextType = \"entity\";\n\n      var form = self.renderFactory.getContainer($.extend({}, self.addFormParams, {\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: isRefresh,\n        requestedForm: params.requestedForm,\n        navigation: self.slideParams.navigation,\n        view_container: self.addContainer }));\n\n\n\n      form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          self.saveDataAddForm(form).done(function () {\n            self.addContainer.destroy();\n            delete self.addContainer;\n\n            // Force a search after a new item is created!\n            self.currentSearchForm.performSearch(self.searchParams);\n          });\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          self.addContainer.destroy();\n          delete self.addContainer;\n        } })];\n\n\n\n      $.extend(form, {\n        processButtons: function processButtons() {\n          //not send information set in memory and save\n\n          $.each(form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1: //next button will behave as a cancel button\n                $(form.getButtons()[index]).click(function () {\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].action = \"back\";\n                break;\n\n              default:\n                $(form.getButtons()[index]).click(function () {\n                  self.saveDataAddForm(form);\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                break;}\n\n          });\n        } });\n\n\n      for (var indicator in form.children) {\n        form.children[indicator].params = $.extend({}, form.children[indicator].params, self.addFormParams);\n      }\n\n      return $.when(form.render()).done(function (element) {\n        // Set currents search form\n        self.currentAddForm = form.firstChild();\n\n        self.addContainer.element.html(element);\n        if (!isRefresh) {\n          self.slideParams.navigation.navigate(self.addContainer.id, \"overlay:up\");\n        }\n\n        self.addContainer.setNavigationButtons(form);\n\n        form.triggerHandler(\"ondomincluded\");\n\n        // if is any modal view displayed, hide it to allow this search form been displayed\n        self.handleSearchFormZindex(\"show\");\n\n        form.bind(\"refresh\", function (_, refreshParams) {\n          refreshParams.scrollTop = self.form.container.parent().scrollTop();\n          refreshParams = $.extend({\n            focus: focus,\n            selectedTabs: self.form.getSelectedTabs(),\n            isRefresh: true,\n            contextType: self.properties.contextType || \"\",\n            navigation: self.slideParams.navigation,\n            view_container: self.addContainer },\n          refreshParams);\n\n          return self.renderAddForm(refreshParams);\n        });\n      });\n    }).fail(function () {\n      self.addContainer.destroy();\n      delete self.addContainer;\n      console.log(\"there was an error :(\");\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n  },\n\n  /**\r\n      * Save data to add form\r\n      * @param {} form \r\n      * @returns {} \r\n      */\n  saveDataAddForm: function saveDataAddForm(form) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n    if (form.validateForm()) {\n      var data = {};\n      $.forceCollectData = true;\n\n      form.collectRenderValues(data);\n      data.idPageCache = form.idPageCache;\n\n      var params = {\n        action: \"SAVE\",\n        data: data,\n        idPageCache: data.idPageCache,\n        guidEntity: form.properties.entity,\n        contexttype: \"entity\" };\n\n\n      // Check if the add form has data\n      var formData = {};\n\n      form.collectRenderValuesForSubmit(formData);\n\n      // Turn off flag\n      $.forceCollectData = false;\n\n      if (!bizagi.util.isMapEmpty(formData)) {\n\n        bizagi.util.tablet.startLoading();\n\n        $.when(self.dataService.submitData(params)).done(function () {\n          function dataHasXpath(xpath) {\n            var render = self.currentSearchForm.getRender(xpath);\n            if (_typeof(render) === \"object\" && render !== null) {\n              return { \"found\": true, \"obj\": render };\n            }\n            return { \"found\": false, \"obj\": {} };\n          }\n          for (var i in formData) {\n            var mapping = dataHasXpath(i);\n            if (mapping.found) {\n              mapping.obj.setValue(formData[i]);\n              self.setDisplayValueToControl(mapping.obj, form, i, formData);\n            }\n          }\n\n          defer.resolve();\n        }).fail(function (jqXHR, type, message) {\n          form.addValidationMessage(message.message);\n          defer.reject();\n        }).always(function () {\n          bizagi.util.tablet.stopLoading();\n        });\n      } else {\n        // Form has not data\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        defer.reject();\n      }\n    } else\n    {\n      defer.reject();\n    }\n    return defer;\n  },\n\n  /***\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else\n    {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      * Shows the dialog box in the browser\r\n      * @returns {} Returns a promise that the dialog will be closed\r\n      */\n  processButtons: function processButtons() {\n    var self = this;\n    self.slideBoxDeferred = new $.Deferred();\n\n    // Create buttons object\n    var slideOptions = { buttons: [] };\n\n    // Add search button by default\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n      click: function click() {\n        self.currentSearchForm.performSearch(self.searchParams);\n      } });\n\n\n    if (self.slideParams.allowNew) {\n      slideOptions.buttons.push({\n        text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        click: function click() {\n          var params = {\n            \"idCase\": self.slideParams.idCase,\n            \"idRender\": self.properties.idRender,\n            \"displayName\": self.properties.displayName,\n            \"idPageCache\": self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } });\n\n    }\n\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\n      click: function click() {\n        // Close slide      \n        self.goBack();\n      } });\n\n\n    // Apply slide plugin\n    slideOptions = $.extend(slideOptions, self.slideParams);\n    self._renderButtons(slideOptions);\n\n    // Return promise\n    return self.slideBoxDeferred.promise();\n  },\n\n  /**\r\n      * Creates the search dialog sub-containers\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: { properties: {}, elements: [] } };\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n\n      var tabContainer = {};\n      tabContainer.properties = { type: \"tab\" };\n      tabContainer.elements = [];\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n\n        // Create tab item\n        var tab = {};\n        tab.properties = {\n          id: i,\n          type: \"tabItem\",\n          displayName: searchForm.caption };\n\n\n        tab.elements = [];\n\n        // Append children \n        if (isDefault) {\n\n          tabContainer.elements.push({ container: tab });\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n\n        } else {\n          otherElements.push({ container: tab });\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    bizagi.util.tablet.startLoading();\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).\n    done(function (searchFormData) {\n      container.elements.push(searchFormData);\n      container.properties.id = Math.guid();\n\n      // Resolve deferred\n      deferred.resolve(data);\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Loads a search form\r\n      * @param {} params \r\n      * @param {} searchForm \r\n      * @returns {} \r\n      */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n\n      return data;\n    });\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {} \r\n      */\n  goBack: function goBack() {\n    var self = this;\n\n    self.handleSearchFormZindex(\"hide\");\n    self.container.destroy();\n  },\n\n  /**\r\n      * Handlers kendo view\r\n      * @returns {} \r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n  },\n\n  /**\r\n       * Process render buttons\r\n       * @param {} options \r\n       * @returns {} \r\n       */\n  _renderButtons: function _renderButtons(options) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(options.buttons, function (ui, value) {\n      $(\"<div class='action-button'>\" + value.text + \"</div>\").click(\n      value.click).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  },\n\n  handleSearchFormZindex: function handleSearchFormZindex(option) {\n\n    //if there is an open modal, change z-index to make searchForm visible\n    var modalViewDisplayed = jQuery.grep($(\".km-modalview-root\"), function (n) {\n      return $(n).css(\"display\") == \"block\";\n    });\n\n    if (modalViewDisplayed.length > 0) {\n      if (option == \"show\") {\n        $(modalViewDisplayed).css(\"z-index\", 0);\n      } else {\n        $(modalViewDisplayed).css(\"z-index\", 10001);\n      }\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Text Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments: Extended text implementation\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.extendedText.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                                            =====================================================*/\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    // Set rowSize default\n    properties.rowSize = properties.maxLines || 6;\n  },\n\n  /**\r\n      * Creates the markup for the readonly extendedText field\r\n      * Comment: includes the default value in the markup\r\n      * @returns {html}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyExtendedText\");\n    return $.kendoTmpl(template);\n  },\n\n  /* POSTRENDER\r\n     =====================================================*/\n  postRender: function postRender() {\n\n    var self = this;\n    var properties = self.properties;\n    var counter = 0;\n\n    // Call base \n    this._super();\n\n    if (!properties.editable) {\n      self.textarea = $(\".ui-bizagi-render-text-extended pre\", self.getControl());\n    } else {\n      self.textarea = $(\".ui-bizagi-render-text-extended\", self.getControl());\n    }\n\n    if (self.textarea.length > 0) {\n      // Increase default textarea rows to improve readability\n      self.textarea.prop(\"rows\", properties.rowSize);\n\n      // Define max length of element\n      if (properties.maxLength > 0)\n      self.textarea.attr(\"maxlength\", properties.maxLength);\n\n      // extend textArea to allow to see all the content\n      var autoAdjustIntervalMethod = function autoAdjustIntervalMethod() {\n        if (counter > 2000 || typeof self.textarea !== \"undefined\" && self.textarea[0] && self.textarea[0].scrollHeight > 0) {\n          self.autoAdjustExtendedFrame(self.textarea[0]);\n          stopAutoAdjustInterval();\n        }\n        counter += 500;\n      };\n\n      var stopAutoAdjustInterval = function stopAutoAdjustInterval() {\n        clearInterval(autoAdjustInterval);\n      };\n\n      var autoAdjustInterval = properties.autoExtend ? setInterval(function () {autoAdjustIntervalMethod();}, 500) : null;\n    }\n  },\n\n  /*\r\n     *\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n    self.textarea = $(\".ui-bizagi-render-text-extended pre\", self.getControl());\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var decodedValue = bizagi.util.decodeURI(value);\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    value = typeof decodedValue == \"string\" ? decodedValue : \"\";\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (value && properties.editable) {\n      if (isOfflineForm) {\n        value = _typeof(value) === \"object\" && value.value ? value.value : value;\n      }\n      var resolvedValue = $.br2nl(value);\n      self.textarea.val(resolvedValue);\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    // Define max length of element\n    if (self.properties.maxLength > 0) {\n      if (self.properties.autoExtend) {\n        $(self.textarea).bind(\"keydown keypress\", function (e) {\n          self.autoAdjustExtendedFrame(this);\n        });\n      }\n    }\n  },\n\n  autoAdjustExtendedFrame: function autoAdjustExtendedFrame(element) {\n    // If scrollHeight <= 0 a div must be created with the same content \n    // to get the height that should have the extendedText \n    if (element.scrollHeight <= 0) {\n      var hiddenDiv = $(document.createElement(\"div\"));\n      var content = null;\n\n      $(hiddenDiv).attr(\"display\", \"none\");\n      $(\"body\").append(hiddenDiv);\n\n      content = $(element).val();\n      content = content.replace(/\\n/g, \"<br>\");\n      hiddenDiv.html(content + \"<br>\");\n\n      $(element).css('height', hiddenDiv.height());\n\n      hiddenDiv.remove();\n    } else {\n\n      if ($(element).height() > 100) {\n        $(element).height($(element).height() - 20);\n      }\n      while ($(element).outerHeight() < element.scrollHeight) {\n        $(element).height($(element).height() + 1);\n      };\n    }\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                           *   Name: Bizagi Tablet Render Date Extension\r\n                                                                                                                                                                                                           *   Author: Cristian Olaya\r\n                                                                                                                                                                                                           *   Date: 2015-sep-29\r\n                                                                                                                                                                                                           *   Comments:\r\n                                                                                                                                                                                                           *   -   This script will redefine the Date render class to adjust to tablet devices\r\n                                                                                                                                                                                                           */\n\n// Extends itself\nbizagi.rendering.date.extend(\"bizagi.rendering.date\", {\n  DEFAULT_PROPERTIES: {\n    \"maxYearsToDisplay\": 100 } }, _defineProperty({\n\n\n  /**\r\n                                                     *  Rendering the control\r\n                                                     * */\n  initializeDateControl: function initializeDateControl() {\n    var self = this;\n    var control = self.getControl();\n\n    //Getting the input\n    self.input = $(\".bz-rn-date-control\", control);\n  },\n\n  configureHandlers: function configureHandlers() {\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonlyDate\");\n\n    return $.kendoTmpl(template, {});\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n\n    $(\"i\", control).addClass(\"bz-calendar-input\");\n    self.input = $(\"span\", control);\n\n    if (!self.isValidMinMaxValue()) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      self.properties.displayValue = \"\";\n    }\n  },\n  /**\r\n      * To configure the mobiscroll plugin\r\n      * */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    //Initializing the control\n    self.initializeDateControl();\n\n    var inputControl = self.getDateControl();\n    var controlElements = self.properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var defaultDateControl = self.getFormattedDate(self.properties.value, self.properties.showTime, true);\n    var minDateControl = self.getFormattedDate(self.properties.minValue, self.properties.showTime, false);\n    var maxDateControl = self.getFormattedDate(self.properties.maxValue, self.properties.showTime, false);\n    var timeFormat = self.properties.showTime ? self.getTimeFormat() : \"\";\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(minDateControl))) {\n      minDateControl = new Date();\n      minDateControl.setFullYear(minDateControl.getFullYear() - self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      minDateControl.setHours(0, 0, 0, 0);\n    }\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(maxDateControl))) {\n      maxDateControl = new Date();\n      maxDateControl.setFullYear(maxDateControl.getFullYear() + self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      maxDateControl.setHours(23, 59, 59);\n    }\n\n    $(\".bz-calendar-input\", self.control).click(function () {\n      inputControl.click();\n    });\n\n    if (!self.isValidMinMaxValue()) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      self.properties.displayValue = \"\";\n    }\n\n    inputControl.mobiscroll().calendar({\n      //theme: theme,\n      mode: \"mixed\", // Specify scroller mode like: mode: \"mixed\" or omit setting to use default\n      display: \"bottom\", // Specify display mode like: display: \"bottom\" or omit setting to use default\n      controls: controlElements,\n      min: minDateControl,\n      max: maxDateControl,\n      defaultValue: defaultDateControl,\n      timeFormat: timeFormat,\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n      buttons: [\n      \"set\",\n      {\n        text: this.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          self.date = undefined;\n          self.time = undefined;\n          self.timeS = undefined;\n          self.onChangeHandler(true);\n          inst.clear();\n        } },\n\n      \"cancel\"],\n\n      onSet: function onSet(e, inst) {\n        var data = inst.getVal();\n        self.date = { \"day\": data.getDate(), \"month\": data.getMonth(), \"year\": data.getFullYear() };\n\n        //Checks if its has time, and included it\n        if (self.properties.showTime) {\n          self.time = { \"hours\": data.getHours(), \"minutes\": data.getMinutes() };\n          if (!self.is24h) {\n            self.timeS = data.getHours() < 12 ? \"am\" : \"pm\";\n          }\n        }\n\n        self.onChangeHandler();\n      },\n      onBeforeShow: function onBeforeShow(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n\n        self.changeMinValue(self.properties.minValue);\n        self.changeMaxValue(self.properties.maxValue);\n      },\n      onClose: function onClose(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"auto\");\n      },\n      onShow: function onShow(event, inst) {\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"hidden\");\n      } });\n\n\n    // Bind event for change value\n    inputControl.on(\"focus\", function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isAndroidDevice()) {\n        cordova.plugins.Keyboard.disableScroll(true);\n        cordova.plugins.Keyboard.close();\n      }\n    });\n\n    //Set input displayValue if it has default value\n    if (self.properties.displayValue === \"\" && self.properties.value) {\n      var date = self.getFormattedDate(self.properties.value, self.properties.showTime, true, false);\n      if (typeof date !== \"undefined\") {\n        var displayValue = bizagi.util.dateFormatter.formatDate(date, self.properties.fullFormat);\n        self.input.prop(\"value\", displayValue);\n      }\n    }\n\n    inputControl.attr(\"keyboard\", \"disable\");\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      * */\n  getTimeFormat: function getTimeFormat() {\n    var self = this;\n\n    if (self.properties.timeFormat.indexOf(\"H\") !== -1 || self.properties.timeFormat.indexOf(\"HH\") !== -1) {\n      self.is24h = true;\n      return \"HH:ii\";\n    } else {\n      self.is24h = false;\n      return \"hh:ii A\";\n    }\n  },\n\n  /**\r\n      * Get Date whit the Invariant and ISO Format applied.\r\n      * */\n  getFormattedDate: function getFormattedDate(date, showTime, initializer) {\n    var self = this;\n\n    if (!date || bizagi.util.isObjectEmpty(date)) return;\n\n    //There are some dates that haven't time,... actions and validations for example or when we have to put a initial value (default value without time),\n    //in that cases we should identify the case and if the date haven't the time value, we have to add (00:00:00) it to can apply the format (getDateFromInvariant).\n    var time = showTime && (self.getTime() === \"0:0\" || initializer) ? \" \" + date.substr(date.length - 8, date.length) : \"\";\n\n    var currentDate = initializer && showTime && time.split(\"/\").length > 1 || date.split(\":\").length === 1 ? date += \" 00:00:00\" : date;\n    date = bizagi.util.dateFormatter.getDateFromInvariant(currentDate, showTime);\n\n    var currentTime = showTime ? time !== \"\" ? time : \" \" + self.getTime() : \" 00:00\";\n    var fullDateFormated = self.setHour(self.getFullFormatedDate(date, currentTime));\n\n    fullDateFormated = bizagi.util.dateFormatter.getDateFromISO(fullDateFormated, true);\n\n    return fullDateFormated;\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { min: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { min: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { max: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { max: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.maxValue = value;\n    }\n  },\n\n  /**\r\n      * Set the display value on input     \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var date = self.getFormattedDate(value, properties.showTime, false);\n    var displayValue = self.preprocessDateValue(date);\n\n    if (properties.editable === false) {\n      // Render as simple value\n      if (typeof displayValue === \"string\" || typeof displayValue === \"number\") {\n        self.input.html(displayValue);\n      }\n    } else {\n      self.input.prop(\"value\", displayValue);\n    }\n  },\n\n  /**\r\n      * Get the DOM Control\r\n      * */\n  getDateControl: function getDateControl() {\n    var self = this;\n    return $(\"input.bz-rn-date-control\", self.getControl());\n  },\n\n  /**\r\n      * Get Time from mobiscroll\r\n      * */\n  getTime: function getTime() {\n    var self = this;\n\n    //Converting the time in 24h format.\n    if (self.properties.showTime && self.time && self.time[\"minutes\"] !== \"\") {\n      var time = self.time[\"hours\"] + \":\" + self.time[\"minutes\"];\n      time += self.timeS;\n\n      if (time.indexOf(\"am\") != -1 && self.time[\"hours\"] == 12) {\n        time = time.replace(\"12\", \"0\");\n      }\n\n      if (time.indexOf(\"pm\") != -1 && self.time[\"hours\"] < 12) {\n        time = time.replace(self.time[\"hours\"], parseInt(self.time[\"hours\"]) + 12);\n      }\n\n      return time.replace(/(am|pm)/, \"\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Get Date from mobiscroll\r\n      * */\n  getDate: function getDate() {\n    var self = this;\n    return self.date && self.date[\"month\"] !== \"\" ? self.date[\"year\"] + \"-\" + (parseInt(self.date[\"month\"]) + 1) + \"-\" + self.date[\"day\"] : \"\";\n  },\n\n  /**\r\n      * Set the control value when the control change\r\n      */\n  onChangeHandler: function onChangeHandler(isClearButton) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getDate();\n    var currentTime = properties.showTime ? \" \" + self.getTime() : \" 0:00\";\n\n    // If curren date is empty reset actual value\n    if (currentDate === \"\" && !properties.showTime || currentDate === \"\" && currentTime === \"\" || isClearButton) {\n      self.setValue(\"\");\n      self.input.prop(\"value\", \"\");\n      properties.displayValue = \"\";\n    } else {\n      var formatedFullDate = self.setHour(self.getFullFormatedDate(currentDate, currentTime));\n\n      formatedFullDate = bizagi.util.dateFormatter.getDateFromISO(formatedFullDate, true);\n\n      if (!formatedFullDate || formatedFullDate == 0) return;\n\n      // Set date value\n      self.setNewDateValue(formatedFullDate, properties.showTime);\n\n      var displayValue = self.preprocessDateValue(formatedFullDate);\n      properties.displayValue = displayValue;\n\n      self.input.prop(\"value\", self.properties.displayValue);\n    }\n  },\n\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      * */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = bizagi.util.dateFormatter.formatISO(currentDate, false);\n    } else {\n      fullDate = bizagi.util.dateFormatter.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = bizagi.util.dateFormatter.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return bizagi.util.dateFormatter.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  /**\r\n      * Set the control value\r\n      * */\n  setNewDateValue: function setNewDateValue(formatedFullDate, showTime) {\n    var self = this;\n    var value = formatedFullDate != \"\" ? bizagi.util.dateFormatter.formatInvariant(formatedFullDate, showTime) : \"\";\n    self.setValue(value);\n  },\n\n  /**\r\n      * Removing the time when be necesary\r\n      * */\n  applyDateFormat: function applyDateFormat(date, showTime) {\n    if (!showTime) {\n      var initIndexTime = null;\n\n      if (date.indexOf(\"00:00\") != -1) {\n        initIndexTime = date.indexOf(\"00:00\");\n      } else if (date.indexOf(\"0:00\") != -1) {\n        initIndexTime = date.indexOf(\"0:00\");\n      } else if (date.indexOf(\"12:00\") != -1) {\n        initIndexTime = date.indexOf(\"12:00\");\n      } else {\n        initIndexTime = \"-1\";\n      }\n\n      var endIndexTime = initIndexTime + 8;\n      date = initIndexTime === -1 ? date : date.replace(date.substring(initIndexTime, endIndexTime), \"\").replace(\" am\", \"\").replace(\" pm\", \"\");\n    }\n\n    return date;\n  },\n\n  /*\r\n      *  Checks if the date could be localized using site language\r\n      * */\n  preprocessDateValue: function preprocessDateValue(date) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat);\n\n    return displayValue;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable)) {\n        value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n        if (value !== 0) {\n          // Clear time for validations\n          value.setHours(0, 0, 0, 0);\n\n          // Check min value and max value\n          if (properties.minValue && typeof properties.minValue == \"string\") {\n            bValid = self.validateMinAndMaxValue(value, true, properties, invalidElements) ? false : bValid;\n          }\n\n          if (properties.maxValue && typeof properties.maxValue == \"string\") {\n            bValid = self.validateMinAndMaxValue(value, false, properties, invalidElements) ? false : bValid;\n          }\n        }\n      }\n    }\n\n    if (bizagi.util.parseBoolean(properties.editable)) {\n      // Check required\n      if (properties.required && self.hasValue()) {\n        var control = self.getDateControl();\n\n        if (control.length > 0 && control.val().length <= 0) {\n          bValid = self.showMandatoryMessage(properties, invalidElements);\n        }\n      } else if (properties.required && !self.hasValue()) {\n        self.showMandatoryMessage(properties, invalidElements);\n      }\n    }\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * To validate the min and max values\r\n      * */\n  validateMinAndMaxValue: function validateMinAndMaxValue(value, isMinValue, properties, invalidElements) {\n    var vValue = bizagi.util.dateFormatter.getDateFromInvariant(isMinValue ? properties.minValue : properties.maxValue);\n\n    //In case the value from the minValue or maxValue are assigned from a Date control that does not have the option  \"showTime!\n    if (vValue == 0) {\n      var resultValue = \"\";\n      if (properties.timeFormat.indexOf(\":ss\") == -1) {\n        if (isMinValue) {\n          resultValue = properties.minValue + \":00\";\n        } else {\n          resultValue = properties.maxValue + \":00\";\n        }\n      }\n\n      vValue = bizagi.util.dateFormatter.getDateFromFormat(resultValue, properties.fullFormat + \":ss\");\n    }\n\n    vValue.setHours(0, 0, 0, 0);\n\n    if (isMinValue && value < vValue || !isMinValue && value > vValue) {\n      var formatedDate = bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat);\n      var message = isMinValue ?\n      this.getResource(\"render-date-minimum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#minValue#\", formatedDate) :\n      this.getResource(\"render-date-maximum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#maxValue#\", formatedDate);\n\n      invalidElements.push({ xpath: properties.xpath, message: message });\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * To show the mandatory values message\r\n      * */\n  showMandatoryMessage: function showMandatoryMessage(properties, invalidElements) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n\n    invalidElements.push({ xpath: properties.xpath, message: message });\n\n    return false;\n  },\n\n  setHour: function setHour(date) {\n    return date.replace(\" 0:\", \" 00:\").replace(\" 1:\", \" 01:\").replace(\" 2:\", \" 02:\").replace(\" 3:\", \" 03:\").replace(\" 4:\", \" 04:\").replace(\" 5:\", \" 05:\").replace(\" 6:\", \" 06:\").replace(\" 7:\", \" 07:\").replace(\" 8:\", \" 08:\").replace(\" 9:\", \" 09:\");\n  },\n\n  /**\r\n      * Cleans the control fields as it requires\r\n      * */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n\n    self.date = undefined;\n    self.time = undefined;\n    self.timeS = undefined;\n    self.onChangeHandler(true);\n    self.setDisplayValue('');\n  },\n\n  isValidMinMaxValue: function isValidMinMaxValue() {\n    var self = this;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n      if (value !== 0) {\n        // Clear time for validations\n        value.setHours(0, 0, 0, 0);\n\n        // Check min value and max value\n        if (self.properties.minValue && typeof self.properties.minValue === 'string')\n        bValid = self.validateMinAndMaxValue(value, true);\n\n        if (self.properties.maxValue && typeof self.properties.maxValue === 'string')\n        bValid = self.validateMinAndMaxValue(value, false);\n      }\n    }\n\n    return bValid;\n  } }, \"validateMinAndMaxValue\",\n\nfunction validateMinAndMaxValue(currentDate, isMinValue) {\n  var self = this;\n  var date = isMinValue ? self.properties.minValue : self.properties.maxValue;\n  var formattedDate = bizagi.util.dateFormatter.getDateFromInvariant(date);\n\n  formattedDate.setHours(0, 0, 0, 0);\n\n  return !(isMinValue && currentDate < formattedDate || !isMinValue && currentDate > formattedDate);\n\n}));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi smartphone Render option select\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: CristianO\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Date: 29/10/2015\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   Render a single input with a modal view, this modal view contain a\r\n                                                                                                                                                                                                                                                                                                                                                                                *       selectable list.\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.combo.extend(\"bizagi.rendering.combo\", {}, {\n\n  /**\r\n                                                              * Generates the read-only render control\r\n                                                              */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyCombo\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Initilizing the combo control\r\n      * */\n  initializeCombo: function initializeCombo() {\n    var self = this;\n\n    self._super();\n\n    var properties = self.properties;\n    var container = self.getRenderedElement();\n    var control = self.getControl();\n    var params = {};\n\n    // Flag to set or not the display value on cascading combos.\n    self.showDisplayValue = false;\n\n    // Getting the input\n    self.input = $(\".bz-rn-combo-control\", control);\n    if (properties.parentComboValue && properties.parentComboValue != null) {\n      params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = properties.parentComboValue;\n\n      //If is a cascading combo, and has a parent and has its own value, then set the display value.\n      self.showDisplayValue = self.parentCombo && self.parentCombo.value && self.parentCombo.value.value !== \"\" && self.properties.value && self.properties.value.value;\n    }\n\n    if (!properties.editable) {\n      self.inputSpan = $('.bz-rn-text', control);\n      container.addClass(\"bz-rn-non-editable bz-command-edit-inline\");\n\n      if (self.value != null) {\n        self.inputSpan.text(self.value.value || self.value.id);\n      }\n    } else {\n      if (typeof self.initialValueSet !== \"undefined\" && !self.initialValueSet) {\n        $.when(self.renderCombo(params)).done(function (html) {\n          self.getControl().html(html);\n          self.input = self.combo = self.getControl();\n          self.configureCombo();\n          self.processLayout(false, self.properties.valueFormat || {});\n        });\n      } else {\n        self.configureCombo();\n      }\n    }\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRender: function postRender() {\n    var self = this;\n\n    //Initialicing the control\n    self.initializeCombo();\n\n    var properties = self.properties;\n    var container = self.getRenderedElement();\n\n    if (properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n\n    self.configureHelpText();\n    self._super();\n    self.processLayout(false, self.properties.valueFormat || {});\n  },\n\n  /*\r\n     *\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var item = self.getValue();\n    var template;\n\n    //self._super();\n\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    self.inputSpan = $(\".bz-rn-text\", control);\n\n    if (item) {\n      if (item.value != null && typeof item.value == \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) == true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n      // Returns the cached value from the properties to avoid server side fetching\n      self.getResource(\"render-combo-empty-value\") == item.value || self.getResource(\"render-combo-empty-selection\") == item.value ? self.inputSpan.text(\"\") : self.inputSpan.text(self.formatItem(item.value));\n    } else {\n      self.inputSpan.text(\"\");\n    }\n  },\n\n  /**\r\n      * Setting the combo's handlers\r\n      * */\n  configureCombo: function configureCombo() {\n    var self = this;\n\n    self.inputSpan = self.input.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"option:selected\", self.input).text());\n    self.inputSpan.val($(\"option:selected\", self.input).text());\n\n    $(\".bz-rn-container-combo\", self.control).unbind().bind(\"click\", function () {\n      //After click on input combo, remove focus of it.\n      self.input.find(\".bz-rn-combo-control\").blur();\n      $(self.input).blur();\n\n      self.input.attr(\"keyboard\", \"disable\");\n\n      // Creating modal view\n      self.processComboData(self.properties.data);\n      var template = self.renderFactory.getTemplate('comboModalView');\n      var modalViewTemplate = kendo.template(template, {\n        useWithBlock: false });\n\n      var data = {\n        'items': self.properties.data,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n\n      modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n    });\n\n    //Setting the Display Value\n    /**\r\n     * Case 1: Is a cascading combo and all combos have values (when form is rendering or the form is saved)\r\n     * Case 2: Is a cascading combo and in the parent combo was selected a new value\r\n     * Case 3: Is a normal combo.\r\n     * */\n    //        if (self.initializingCascadingCombo && self.properties.value) {\n    //            self.onComboChange(self.properties.value);\n    //            self.setDisplayValue(self.properties.value);\n    //        } else if (self.initializingCascadingCombo != undefined && !self.initializingCascadingCombo && self.parentCombo && self.parentCombo.properties.previousValue && self.parentCombo.properties.value && self.parentCombo.properties.value.value != (self.parentCombo.properties.previousValue.value || self.parentCombo.properties.previousValue[0].value)) {\n    //            self.setDisplayValue({ id: \"\", value: \"-------------\" });\n    //        } else if (self.initializingCascadingCombo != undefined && !self.initializingCascadingCombo && self.properties.value) {\n    //            self.setDisplayValue(self.properties.value);\n    //        } else if (self.properties.value) {\n    //            self.setDisplayValue(self.properties.value);\n    //       }\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".bz-wp-modalview-results-list li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('change keypress  keyup change', function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind(\"click\", function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.list = $(\".bz-wp-modalview-results-list\", inputContainer);\n    self.setModalViewDisplayValue(self.properties.value || false);\n\n    self.inputSpan = inputContainer.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"li.ui-selected\", self.list).text());\n    self.inputSpan.val($(\"li.ui-selected\", self.list).text());\n\n    //Setting the initial selected display value\n    self.list.find(\"li\").bind(\"click\", function () {\n      var selectedElements = self.list.find(\".ui-state-active\");\n      self._newSelectedElement = this;\n\n      selectedElements.each(function (index, element) {\n        if (self._newSelectedElement.id !== element.id) {\n          $(element).removeClass(\"ui-state-focus ui-selected ui-state-active\");\n        }\n      });\n\n      $(this).addClass(\"ui-state-focus ui-selected ui-state-active\");\n\n      self.input.blur();\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.list);\n      var value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      var newValue = {\n        id: value,\n        value: label };\n\n\n      //self.setValue(newValue);\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n      //self.changeCombo(newValue.value, newValue);\n    }).fail(function () {});\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n    var selected = this.inputEdition.find(\".bz-rn-combo-selected\");\n    var valueItem = selected.find(\">div >span\").html();\n    var valueObjet = {\n      id: selected.attr(\"id\"),\n      value: valueItem };\n\n    self.changeCombo(valueItem, valueObjet);\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.list && properties.editable && typeof value !== \"undefined\" && value !== null && value.id !== \"\") {\n      self.list.find(\"#ui-bizagi-list-\" + value.id).\n      addClass(\"ui-state-focus ui-selected ui-state-active\");\n    }\n  },\n\n  processComboData: function processComboData(data) {\n    var self = this;\n\n    data.forEach(function (value) {\n      self.validateValue(value);\n    });\n  },\n\n  validateValue: function validateValue(value) {\n    var self = this;\n\n    if (!bizagi.util.isEmpty(value) && typeof value.id !== \"undefined\" && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      var translated = false; //When the parametric entity have a boolean attribute\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Setting the display value.\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    if (value && _typeof(value) === \"object\" && typeof value.label !== \"undefined\") {\n      var comboValue = value.label != \"\" && !bizagi.util.isNumeric(value.label) ? value.label : this.findDataValueById(value.value).value || \"\";\n\n      if ($.isArray(comboValue)) {\n        comboValue = comboValue.join(\" - \");\n      }\n\n      value = {\n        id: value.value,\n        value: comboValue };\n\n    }\n\n    var control = this.getControl();\n    $(\"input\", control).val(this.formatItem(value.value));\n\n    //Set Value\n    this.setValue(value);\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = [];\n    properties.remoteDataLoaded = false;\n\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var value = {\n      id: \"\",\n      value: \"\" };\n\n    this.setDisplayValue(value);\n  },\n\n  /**\r\n      * Getting the templates\r\n      * */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /**\r\n      * Getting the templates\r\n      * */\n  getTemplateEditionName: function getTemplateEditionName() {\n    return \"edition.combo\";\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Grid Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Richar Urbano (based on Diego Parra version)\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the grid render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.grid.extend(\"bizagi.rendering.grid.offline\", {\n  MAX_ROWS_SUPPORTED: 4 },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    // Call base\n    this._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.data.originalRows = bizagi.clone(properties.data.rows);\n    var form = self.getFormContainer();\n\n    properties.isTaskForm = form.properties.isTaskForm;\n    //Preload new lines previously added offline\n    if (properties.isTaskForm && properties[\"new-records\"]) {\n      self.newRecords = {};\n      var newRowKeys = Object.keys(properties[\"new-records\"]);\n      for (var k = 0; k < newRowKeys.length; k++) {\n        self.newRecords[newRowKeys[k]] = {};\n        self.changes[newRowKeys[k]] = properties[\"new-records\"][newRowKeys[k]];\n        self.newRecords[newRowKeys[k]].createdOffline = true;\n      }\n    }\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n    self[\"deleted-records\"] = {};\n    if (properties.groupBy || properties.groupSummary) {\n      // Add warning\n      form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    self.initialLoadDone = false;\n\n    // Make control to behave as a block container\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n\n    // Find component holder\n    self.grid = $(\">div\", control);\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Grid plugin\n    self.applyGridPlugin();\n    self.configureHelpText();\n\n    // Set initial data\n    if (properties.data) {\n\n      self.updateData(properties.data);\n\n      // Trigger change in order to start up the actions when the controls is ready\n      $.when(self.ready()).\n      done(function () {\n        self.triggerRenderChange({ changed: false });\n      });\n    }\n\n    // Execute pending actions\n    self.initialLoadDone = true;\n    for (var i in self.pendingActions) {\n      self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n    }\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Do the same as the post-render            \n    self.postRender();\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var grid = self.grid;\n    var mode = self.getMode();\n\n    // Check is offline form\t    \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    // Apply grid plugin\n    grid.bizagi_grid_tablet({\n      columns: columns,\n      maxColumns: self.Class.MAX_ROWS_SUPPORTED,\n      title: properties.displayName,\n      isOfflineForm: isOfflineForm || false,\n      mode: self.getMode(),\n\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons.offline\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons.offline\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\") },\n\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        details: false,\n        inlineAdd: true, //properties.inlineAdd,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false },\n\n\n      isValid: function isValid() {\n        return self.isValidGrid();\n      },\n      pageRequested: function pageRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode != \"execution\") return;\n        var data = ui;\n        self.triggerHandler(\"rowSelected\", { id: ui.key, data: ui });\n      },\n      addRow: function addRow(ui) {\n        if (mode != \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      saveAddedRows: function saveAddedRows(ui) {\n        self.saveInlineAddedRows(ui.keys);\n      },\n      beforeInlineAdd: function beforeInlineAdd() {\n        self.inlineAddDeferred = new $.Deferred();\n      },\n      afterInlineAdd: function afterInlineAdd() {\n        if (self.inlineAddDeferred) {\n          self.inlineAddDeferred.resolve();\n        }\n      },\n      cancelEdition: function cancelEdition(ui) {\n        self.removeNewRecords(ui);\n      },\n      removeNewRecords: function removeNewRecords(ui) {\n        self.removeNewRecords(ui);\n      } });\n\n  },\n\n  /** \r\n     *   Creates the column model required to initialize the grid plugin\r\n     */\n\n  buildColumnModel: function buildColumnModel() {\n    return bizagi.rendering.grid.prototype.buildColumnModel.call(this);\n  },\n\n  /**\r\n     * Makes the grid to refresh\r\n     */\n  refresh: function refresh() {\n    var self = this;\n\n    self.fetchData();\n  },\n\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    var self = this;\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    return bizagi.rendering.grid.prototype.updateData.apply(this, arguments);\n  },\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      self.endLoading();\n      if (data) {\n        self.updateData(data);\n        self.triggerRenderChange();\n        self.dataReadyDeferred.resolve();\n      }\n    });\n  },\n\n  processChanges: function processChanges() {\n    var self = this;\n    var rowsList = [];\n    var data = self.properties.data;\n    if (self.properties.isTaskForm) {\n      return [];\n    }\n\n    // Save pending inline add rows\n    for (var id in self.changes) {\n      var sortArray = [];\n      sortArray.push(id);\n\n      for (var columnXpath in self.changes[id]) {\n\n\n        // Check if the render can submit data\n        if (self.canColumnBeSent(id, columnXpath)) {\n          var value = self.changes[id][columnXpath];\n\n          if (typeof value === \"string\") {\n            if (value.match(/\\n/gm) !== null) {\n              value = value.replaceAll(\"\\n\", \"\\\\n\");\n            }\n          }\n\n          sortArray.push({\n            value: value,\n            xpath: columnXpath,\n            DataType: self.getColumn(columnXpath).properties.dataType });\n\n        }\n      }\n\n      if (typeof self.properties.data.rows !== \"undefined\" && self.properties.data.rows.length > 0) {\n        // Search row\n        var currentRow = [];\n        for (var i = 0; i < data.rows.length; i++) {\n          if (data.rows[i][0] == id) {\n            currentRow = data.rows[i];\n\n            // Delete current data\n            data.rows.splice(i, 1);\n            i--;\n\n            // Mixed data\n            currentRow = self.processRow(currentRow);\n            sortArray = $.extend(true, currentRow, sortArray);\n\n            break;\n          }\n        }\n      }\n\n      rowsList.push(sortArray);\n    }\n\n    return rowsList;\n  },\n\n  collectOfflineTaskData: function collectOfflineTaskData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var errorsMessage = [];\n    var internalRedersValues = [];\n    var data = self.properties.data;\n\n    // Save pending inline add rows\n    if (self.isValid(errorsMessage)) {\n      for (var id in self.changes) {\n        var sortArray = [];\n        var currentChanges = {};\n        for (var columnXpath in self.changes[id]) {\n\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n            var value = self.changes[id][columnXpath];\n\n            if (typeof value === \"string\") {\n              if (value.match(/\\n/gm) !== null) {\n                value = value.replaceAll(\"\\n\", \"\\\\n\");\n              }\n            }\n\n            sortArray[columnNumber] = value;\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath].value ? self.changes[id][columnXpath].value : self.changes[id][columnXpath];\n            renderValues[xpath] = value;\n            //Changes are store to delete them if the row is new, the rest of changes can be saved by xpath\n            currentChanges[xpath] = value;\n          }\n        }\n        //If new record store action data\n        if (self.newRecords[id]) {\n          //Use - to avoid issues with possible xpaths in renderValues used both in new and deleted records\n          renderValues[\"new-records\"] = renderValues[\"new-records\"] ? renderValues[\"new-records\"] : [];\n          var addRowData = {\n            url: properties.addUrl,\n            idRender: properties.id,\n            xpath: properties.xpath,\n            xpathContext: properties.xpathContext,\n            contexttype: properties.contexttype,\n            idPageCache: properties.idPageCache,\n            submitData: self.changes[id],\n            prepare: true,\n            idRow: parseInt(id + '') };\n\n          renderValues[\"new-records\"][id] = addRowData;\n          for (change in currentChanges) {\n            delete renderValues[change];\n          }\n          sortArray.idRow = parseInt(id + '');\n          sortArray.isNew = true;\n          sortArray.changes = self.changes[id];\n          if (!self.newRecords[id].createdOffline)\n          internalRedersValues[internalRedersValues.length] = sortArray;\n        }\n\n\n      }\n    }\n    // Get dataz\n    if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\n      if (typeof data.rows !== \"undefined\" && internalRedersValues.length > 0) {\n        //Merge new and edited rows only saved for future edition\n        renderValues[properties.xpath] = $.merge($.merge([], self.processOldRows(data.rows)),\n        internalRedersValues);\n      } else if (typeof data.rows !== \"undefined\" && data.rows.length > 0) {\n        renderValues[properties.xpath] = self.processOldRows(data.rows);\n      } else {\n        renderValues[properties.xpath] = internalRedersValues;\n      }\n    }\n\n    self.collectChangesWithoutDeleting(renderValues);\n\n    renderValues[\"deleted-records\"] = self[\"deleted-records\"];\n  },\n\n  /*\r\n     * Old Method that collects data only for Offline start forms and prepares data for AsyncWorkItem\r\n     */\n  collectOfflineStartData: function collectOfflineStartData(renderValues) {\n    var self = this;\n    var errorsMessage = [];\n    var internalRedersValues = [];\n    var properties = self.properties;\n    var data = self.properties.data;\n    // Save pending inline add rows\n    if (self.isValid(errorsMessage)) {\n      for (var id in self.changes) {\n        var sortArray = [];\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\n            var value = self.changes[id][columnXpath];\n            if (typeof value === \"string\") {\n              if (value.match(/\\n/gm) !== null) {\n                value = value.replaceAll(\"\\n\", \"\\\\n\");\n              }\n            }\n            sortArray[columnNumber] = {\n              value: value,\n              xpath: columnXpath,\n              DataType: self.getColumn(columnXpath).properties.dataType };\n\n          }\n        }\n        if (typeof self.properties.data.rows !== \"undefined\" && self.properties.data.rows.length > 0) {\n          // Search row\n          var currentRow = [];\n          for (var i = 0; i < data.rows.length; i++) {\n            if (data.rows[i][0] == id) {\n              currentRow = data.rows[i];\n              // Delete current data\n              data.rows.splice(i, 1);\n              i--;\n              // Mixed data\n              currentRow = self.processRow(currentRow);\n              sortArray = $.extend(true, currentRow, sortArray);\n              break;\n            }\n          }\n        }\n        internalRedersValues[internalRedersValues.length] = sortArray;\n      }\n    }\n\n\n    // Get data\n    if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\n      if (typeof data.rows !== \"undefined\" && internalRedersValues.length > 0) {\n        renderValues[properties.xpath] = $.merge($.merge([], self.processOldRows(data.rows)),\n        internalRedersValues);\n      } else if (typeof data.rows !== \"undefined\" && data.rows.length > 0) {\n        renderValues[properties.xpath] = self.processOldRows(data.rows);\n      } else {\n        renderValues[properties.xpath] = internalRedersValues;\n      }\n    }\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    var properties = self.properties;\n\n    if (properties.isTaskForm) {\n      self.collectOfflineTaskData(renderValues);\n    } else {\n      self.collectOfflineStartData(renderValues);\n    }\n\n  },\n  collectChangesWithoutDeleting: function collectChangesWithoutDeleting(renderValues) {\n    if (self.exclusiveChanges) {\n      for (var id in self.exclusiveChanges) {\n        var columnExclusiveChanges = self.exclusiveChanges[id];\n        var columnEnabledChecks = self.enabledChecks[id];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          for (var i = 0; i < columnEnabledChecks.length; i++) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(columnEnabledChecks[i][0]) + \".\" + id;\n            renderValues[columnSimpleXpathEnabled] = false;\n          }\n          var columnSimpleXpath = properties.xpath + self.buildCellXpathFilter(columnExclusiveChanges.key) + \".\" + columnExclusiveChanges.xpath;\n          renderValues[columnSimpleXpath] = columnExclusiveChanges.value;\n\n        }\n      }\n    }\n  },\n  /*\r\n     *   Delete field id array objects\r\n     */\n  processOldRows: function processOldRows(rows) {\n    var newRows = [];\n    var tempRows = rows;\n    for (var col = 0, leng = tempRows.length; col < leng; col++) {\n      var temp = tempRows[col];\n      newRows[col] = $.grep(temp, function (n, i) {return i > 0;});\n      newRows[col].idRow = temp[0];\n    }\n\n    return newRows;\n  },\n  /*\r\n     *   Delete field id array\r\n     */\n  processRow: function processRow(row) {\n    return $.grep(row, function (n, i) {return i > 0;});\n  },\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    if (_typeof(value) === \"object\" && !isNewRow) {\n      value = value.hasOwnProperty(\"value\") ? value.value : value;\n    }\n\n    // Get render column                \n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n\n    self.newRecords = self.newRecords || {};\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Apply overrides from cellOverrides\n    visible = cellOverride.visible;\n    editable = properties.editable ? cellOverride.editable : false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\") editable = false;\n\n    renderColumn.properties.displayType = 'value';\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n\n    // Column search\n    if (renderColumn.properties.type == \"columnSearch\" && value != null) {\n      for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\n        if (renderColumn.properties.data[i].id == value) {\n          value = { id: renderColumn.properties.data[i].id, label: renderColumn.properties.data[i].value };\n        }\n      }\n    }\n\n    if ((renderColumn.properties.type == \"columnCombo\" || renderColumn.properties.type == \"columnList\") && value !=\n    null) {//|| renderColumn.properties.type == \"columnRadio\"\n      for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\n        if (renderColumn.properties.data[i].id == value) {\n          value = [[renderColumn.properties.data[i].id, renderColumn.properties.data[i].value]];\n        }\n      }\n    }\n\n    // Do the render\n    if (visible) {\n      if (editable) {\n        return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\n      } else {\n        return self.drawReadonlyCell(renderColumn, properties, key, value);\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Draws the editable version for the cell\r\n     */\n  drawEditableCell: function drawEditableCell(renderColumn, properties, key, value, isNewRow) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Set editable\n    var originalEditable = renderColumn.properties.editable;\n    renderColumn.properties.editable = true;\n\n    // Fix problem when required property lose\n    renderColumn.overrideProperties({ required: properties.required });\n\n    // Render cell\n    $.when(renderColumn.render(key, value)).done(function (cell) {\n      // Register array with new records, just when this is a newrecord\n      if (isNewRow && !self.newRecords[key]) {\n        self.newRecords[key] = {};\n      }\n\n      // convert all row visible\n      for (var j = 0; j < self.columns.length; j++) {\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).visible = self.getCellOverride(key, j).visible != undefined ? self.\n        getCellOverride(key, j).visible : true;\n      }\n\n      // Add change handler  \n      renderColumn.getDecorated(key).bind(\"renderchange\", function (render) {\n        self.onCellChange(renderColumn, cell, key);\n      });\n\n      // Resolve cell\n      defer.resolve(cell);\n    });\n\n    // Restore editable\n    renderColumn.properties.editable = originalEditable;\n\n    // Return promise\n    return defer.promise();\n  },\n\n  /*\r\n     *   Draws the readonly version for the cell\r\n     */\n  drawReadonlyCell: function drawReadonlyCell(renderColumn, properties, key, value) {\n    var self = this;\n    var result = \"\";\n\n    // Use totalizer format when printing summary row\n    if (key == \"summary\") {\n      var originalFormat = renderColumn.properties.textFormat;\n      if (renderColumn.properties.totalize) {\n        renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\n      }\n\n      result = renderColumn.renderSummary(key, value);\n\n      // Restore column format\n      renderColumn.properties.textFormat = originalFormat;\n    } else {\n      result = renderColumn.renderReadOnly(key, value);\n    }\n    return result;\n  },\n\n  /*\r\n     *   Defines the handler when a cell changes its value\r\n     */\n  onCellChange: function onCellChange(renderColumn, cell, key) {\n\n    var self = this;\n    var _value = renderColumn.getValue(key);\n    var compositeValue = renderColumn.getCompositeValue(key);\n\n    if (renderColumn.properties.type == \"columnDate\" && renderColumn.data.properties.showTime == true) {\n\n      if (!bizagi.util.isEmpty(_value)) {\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\n        _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n      } else if (_value === \"\") {\n        _value = \"\";\n      }\n    } else if (renderColumn.properties.type == \"columnDate\") {\n\n      if (!bizagi.util.isEmpty(_value)) {\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\n        date.setHours(0, 0, 0, 0);\n        _value = bizagi.util.dateFormatter.formatInvariant(date, true);\n      } else if (_value === \"\") {\n        _value = \"\";\n      }\n    }\n\n    if (self.properties.allowEdit || self.grid.bizagi_grid_tablet(\"isNewRecord\", key)) {\n      var trigger = self.grid.bizagi_grid_tablet(\"isNewRecord\", key) ? false : true;\n      self.collectGridChange({\n        id: key,\n        xpath: renderColumn.properties.xpath,\n        value: _value,\n        compositeValue: compositeValue,\n        columnIndex: renderColumn.columnIndex,\n        trigger: trigger });\n\n    }\n\n    // Update change in grid's component data\n    self.grid.bizagi_grid_tablet(\"changeCellValue\", key, renderColumn.columnIndex, _value);\n\n    // If the column has totalizers then we need to refresh the summary\n    if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n      self.grid.bizagi_grid_tablet(\"refreshSummary\", renderColumn.columnIndex);\n    }\n  },\n  /*\r\n     *   Collect a single cell change made in the grid to send the data when the user saves the form\r\n     */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n\n    self.changes[id] = self.changes[id] || {};\n    self.changes[id][xpath] = value;\n    if (trigger)\n    self.triggerRenderChange({ key: id, column: xpath });\n  },\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    // Avalaible editable\n    isNewRow = true;\n    bizagi.rendering.grid.prototype.onCellReady.apply(this, arguments);\n  },\n\n  /**\r\n     *  Adds a row to the grid\r\n     */\n  addRow: function addRow() {\n    bizagi.showMessageBox(bizagi.localization.getResource(\"render-tablet-error-userfield\"), bizagi.localization.\n    getResource(\"render-tablet-error-userfield\"));\n  },\n\n  /**\r\n     *  Edits a row in the grid\r\n     */\n  editRow: function editRow(id) {\n  },\n\n  /**\r\n     *  Deletes a row to the grid\r\n     */\n  deleteRow: function deleteRow(id) {\n    if (!id || id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.\n      localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function () {\n        // Reload grid\n        self.fetchData();\n      });\n    });\n  },\n\n  /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\n  editInline: function editInline(id) {\n  },\n  /*\r\n     *   Retrieve the data for the new rows and push them into the server\r\n     */\n  saveInlineAddedRows: function saveInlineAddedRows(keys, bRefresh) {\n    var self = this;\n    var rows = self.processChanges();\n\n    if (!bizagi.util.isEmpty(rows)) {\n      self.properties.data.rows = $.merge(self.properties.data.rows, rows);;\n    }\n  },\n\n  /*\r\n     * Removes invalid records \r\n     */\n  removeNewRecords: function removeNewRecords(ui) {\n    var self = this;\n\n    if (ui && ui.keys) {\n      $.each(ui.keys, function (_, key) {\n        if (self.newRecords[key]) {\n          delete self.newRecords[key];\n        }\n      });\n    }\n  },\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellBackgroundColor.apply(this, arguments);\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellColor.apply(this, arguments);\n  },\n\n  /*\r\n     * Change the visibility for a cell\r\n     */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellVisibility.apply(this, arguments);\n  },\n\n  /*\r\n     *   Changes the editability for a cell\r\n     */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellEditability.apply(this, arguments);\n  },\n\n  /*\r\n     *  Clean data of cell\r\n     */\n  cleanCellData: function cleanCellData(key, xpath) {\n    bizagi.rendering.grid.prototype.cleanCellData.apply(this, arguments);\n  },\n\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n    bizagi.rendering.grid.prototype.changeCellRequired.apply(this, arguments);\n  },\n  /*\r\n     *   Sets an error on the cell\r\n     */\n  setError: function setError(key, xpath) {\n    bizagi.rendering.grid.prototype.setError.apply(this, arguments);\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      var result = properties.overrideGetRemoteData(params);\n      return result != null ? result.promise() : null;\n    }\n\n    // Default ajax call\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    var data = properties.data;\n\n    // Resolve with fetched data    \n    properties.page = data.page;\n    properties.records = data.records;\n    properties.totalPages = data.totalPages;\n\n    // Check RTL\n    if (self.isRTL()) {\n      data.rows = self.changeOrderData(data.rows);\n\n    }\n\n    defer.resolve(data);\n\n    return defer.promise();\n  },\n  /*\r\n     *   Submits a grid delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var data = self.properties.data,\n    properties = self.properties;\n    var statusAction = false;\n\n    // Found row by id\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n\n        data.rows.splice(i, 1);\n        i--;\n\n        data.records--;\n        statusAction = true;\n        if (!self.newRecords[id])\n        {\n          var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n          var delInfo = {\n            url: properties.deleteUrl,\n            idRender: properties.id,\n            xpath: xpath,\n            xpathContext: properties.xpathContext,\n            idPageCache: properties.idPageCache,\n            contexttype: properties.contextType,\n            prepare: true };\n\n          self[\"deleted-records\"][id] = delInfo;\n        }\n        break;\n      }\n    }\n\n    // verified status action\n    if (!statusAction) {\n      bizagi.showMessageBox(this.getResource(\"workportal-general-no-records-found\"));\n    }\n\n    return data.rows;\n  },\n\n  isValidGrid: function isValidGrid() {\n    var self = this;\n    var errorsMessage = [];\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController !== \"undefined\")\n    form.validationController.clearValidationMessages();\n\n    self.isValid(errorsMessage);\n\n    if (errorsMessage.length > 0) {\n      if (typeof form.validationController !== \"undefined\") {\n        for (var index = 0; index < errorsMessage.length; index++) {\n          form.validationController.showValidationMessage(errorsMessage[index].message, errorsMessage[index].xpath);\n        }\n      }\n\n      return false;\n    } else {\n      return true;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Join Search Dialog Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the Join Search Dialog render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.search.extend(\"bizagi.rendering.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  SEARCH_MIN_LENGTH: 3,\n  SEARCH_DELAY: 750,\n  MAX_ITEMS: 10,\n  MAX_ITEMS_OFFLINE: 50 },\n\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonlySearch\");\n    var value = self.properties.value;\n    var label = value && self.hasValue() ? value.additionallabel ? value.label + \", \" + value.additionallabel : value.label : \"\";\n\n    // Render template\n    return $.kendoTmpl(template, { value: label });\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    self.input = $(\".bz-rn-text\", control);\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Call base \n    self._super();\n\n    self.input = $(\".bz-rn-container-control-search\", control);\n    self.searchInput = $(\"input\", control);\n    self.isOfflineForm = isOfflineForm || false;\n\n    if (self.isOfflineForm) {\n      self.properties.submitOnChange = false;\n      self._simplySuggestOffline();\n    } else if (self.properties.advancedSearch) {\n      self._advanceSearch();\n    } else {\n      self._simplySearch();\n    }\n  },\n\n  /*\r\n     *\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (properties.editable) {\n      $(\".bz-rn-search-control-icons-clear\", control).bind(\"click\", function (e) {\n        e.stopPropagation();\n        self.setValue({ id: \"\" });\n        self.searchInput.prop(\"value\", \"\");\n        $(this).addClass(\"hidden\");\n        self.input.find(\".bz-rn-input-search-text\").removeClass(\"hasValue\");\n      });\n    }\n  },\n\n  /*\r\n     *\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    var params = {\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      id: properties.id,\n      xpath: properties.xpath,\n      hasValue: typeof properties.value !== \"undefined\" && properties.value !== null &&\n      typeof properties.value.label !== \"undefined\" && properties.value.label !== \"\",\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      hasMozillaHelpText: $.browser && $.browser.mozilla &&\n      properties.helpText !== null && properties.helpText !== \"\" ? true : false };\n\n\n    return $.kendoTmpl(template, params);\n  },\n\n  /*Simply suggest autocomplete offline*/\n  _simplySuggestOffline: function _simplySuggestOffline() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-wp-search-control-search-icon\", control).addClass(\"disable-search\");\n    self.applyAutocompletePlugin();\n  },\n\n  /*Simply search autocomplete*/\n  _simplySearch: function _simplySearch() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-wp-search-control-search-icon\", control).addClass(\"disable-search\");\n    self.applyAutocompletePlugin();\n  },\n\n  _advanceSearch: function _advanceSearch() {\n    var self = this;\n    // Set readonly property\n    self.searchInput.attr(\"readonly\", \"true\");\n\n    //Bind search click button\n    self.input.bind(\"click\", function () {\n      //Call showSlideSearch method\n      self.showSlideSearch();\n    });\n  },\n\n  /**\r\n      * Sets the value to show and calls the method to sets the control value\r\n      * @param {object} value\r\n      * @param {int} value.id\r\n      * @param {string} value.label\r\n      * @param {string=} value.additionallabel\r\n      * @example\r\n      *   value = {\r\n      *     id: 123,\r\n      *     label: \"xx\",\r\n      *     additionallabel: \"yyyy\"\r\n      *   }\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var label = \"\";\n    value = self.mapValue(value);\n\n    if (value !== null && typeof value !== \"undefined\" && typeof value.id !== \"undefined\") {\n      if (value.additionallabel && value.label) {\n        label = value.label + \",\" + value.additionallabel;\n      } else if (value.label) {\n        label = value.label;\n      } else {\n        label = \"\";\n      }\n\n      if (self.properties.editable) {\n        self.searchInput.val(label);\n\n        if (typeof value !== \"undefined\") {\n          self.input.find(\".bz-rn-input-search-text\").addClass(\"hasValue\");\n        } else {\n          self.input.find(\".bz-rn-input-search-text\").removeClass(\"hasValue\");\n        }\n      } else {\n        self.input.text(label);\n      }\n    }\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n\n  /* \r\n     *   Opens the search slide\r\n     */\n  showSlideSearch: function showSlideSearch() {\n    var self = this;\n    var properties = self.properties;\n    var slideParams = $.extend({}, self.getParams(), {\n      container: self.getFormContainer().container,\n      title: properties.displayName || \"\",\n      allowNew: properties.allowNew });\n\n\n    // Show search dialog\n    // Create slide search object\n    var slideView = new bizagi.rendering.tablet.slide.view.search(self.dataService, self.renderFactory,\n    properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      idRender: properties.id,\n      navigation: self.getParams().navigation,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" },\n    slideParams);\n\n    // Render the search form\n    slideView.render({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function (item) {\n      // Set data\n      self.setValue(item);\n\n      // Submit info to server\n      self.submitData();\n    });\n  },\n\n  /* Apply autocomplete capabilities to a single input*/\n  applyAutocompletePlugin: function applyAutocompletePlugin() {\n    var self = this;\n    var control = self.getControl();\n    var searchInput = self.searchInput;\n    self.searchInput.parent().find(\".bz-rn-autocomplete-wrapper\").addClass(\"hidden\");\n\n    searchInput.addClass(\"ui-autocomplete-input\");\n    searchInput.on(\"click keyup\", function () {\n      self.autoCompleteSearchResults();\n    });\n\n    control.on(\"click mousedown\", \"li\", function () {\n      var elemObject = $.data(this).itemautocomplete;\n\n      self.setValue({ id: elemObject.id, label: elemObject.value }, true);\n      self.setDisplayValue({ id: elemObject.id, label: elemObject.value });\n\n      if (self.isOfflineForm) {\n        $(this).parent().hide();\n      } else {\n        if (typeof self.properties.submitOnChange !== \"undefined\" && self.properties.submitOnChange) {\n          self.submitOnChange();\n        }\n\n        $(this).parent().hide();\n      }\n\n      self.getControl().find(\".bz-rn-search-control-icons-clear\").removeClass(\"hidden\");\n      self.input.find(\".bz-rn-input-search-text\").addClass(\"hasValue\");\n    });\n\n    control.on(\"focusout\", \"input\", function () {\n      control.find(\"ul\").hide();\n      self.searchInput.parent().find(\".bz-rn-autocomplete-wrapper\").addClass(\"hidden\");\n    });\n  },\n\n  /* Search results on keyup or click the input field*/\n  autoCompleteSearchResults: function autoCompleteSearchResults() {\n    var self = this;\n    var searchInput = self.searchInput;\n    var currentValue = self.searchInput.val();\n\n    if (currentValue === \"\") {\n      self.input.find(\".bz-rn-search-control-icons-clear\").addClass(\"hidden\");\n    }\n\n    $.when(\n    self.processRequest({ term: searchInput.val() }, function () {})).\n    done(function (resp) {\n      var wrapper = self.searchInput.parent().find(\".bz-rn-autocomplete-wrapper\");\n      if (resp.length > 0) {\n        wrapper.removeClass(\"hidden\");\n      } else {\n        if (!wrapper.hasClass(\"hidden\")) {\n          wrapper.addClass(\"hidden\");\n        }\n      }\n\n      var elementUl = searchInput.parent().find(\"ul\");\n      elementUl.find(\"li\").remove();\n\n      elementUl.css({\n        display: \"inline-block\",\n        left: searchInput.position().left,\n        top: searchInput.position().top + 15 });\n\n\n      var length = resp.length;\n      if (length > 0) {\n        //display the wrapper\n        self.control.find(\".bz-rn-autocomplete-wrapper\").show();\n\n        for (var i = 0; i < length; i++) {\n          var searchItem = self.renderSearchItem(resp[i]);\n          $(searchItem).addClass(\"bz-rn-autocomplete-item\");\n          searchItem.appendTo(elementUl);\n        }\n      }\n    });\n  },\n\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Create array for response objects   \n    var suggestions = [];\n\n    /* \r\n                          *   Method to add the special items to the suggestions \r\n                          */\n    function addToSuggestions(alSuggestions) {\n\n      // Add the clear option - TODO: To implement            \n      /* if (properties.allowClear && (self.value !== undefined)) { \r\n      alSuggestions.push({ id: self.Class.CLEAR_SEARCH_ID, label: \"\", value: \"\" });\r\n      }*/\n\n      // Add additional option if advanced search is on\n      if (properties.advancedSearch) {\n        alSuggestions.push({ id: self.Class.ADVANCED_SEARCH_ID, label: \"\", value: \"\" });\n      }\n      // Add additional option if allow addition is on\n      if (properties.allowAdd) {\n        alSuggestions.push({ id: self.Class.ADVANCED_ADDITION_ID, label: \"\", value: \"\" });\n      }\n      // Pass array to callback   \n      defer.resolve(alSuggestions);\n    }\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n      // Update term property to reflect the search\n      properties.term = req.term;\n      if (self.isOfflineForm) {\n\n        var dataOffline = self.properties.data;\n        var itemsAttached = 0;\n\n        $.each(dataOffline, function (index, current) {\n\n          if (itemsAttached >= self.Class.MAX_ITEMS_OFFLINE) {\n            return false;\n          }\n\n          var parseValue = \"\";\n          switch (_typeof(current.value)) {\n            case \"number\":\n              parseValue = current.value;\n              break;\n            case \"object\":\n              parseValue = current.value.toString();\n              break;\n            case \"string\":\n              parseValue = current.value;\n              break;\n            default:\n              parseValue = current.value;\n              break;}\n\n\n          var isSuggestMatch = parseValue !== undefined && (\n          parseValue.toLowerCase().indexOf(properties.term.toLowerCase()) !== -1 || properties.term === \"%%%\");\n\n          if (isSuggestMatch) {\n            suggestions.push({\n              id: current.id !== undefined ? current.id : \"\",\n              label: parseValue !== undefined ? parseValue.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" +\n              $.ui.autocomplete.escapeRegex(properties.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"),\n              \"<strong>$1</strong>\") : \"\",\n              value: parseValue !== undefined ? current.value : \"\" });\n\n          }\n\n          itemsAttached += 1;\n        });\n\n        addToSuggestions(suggestions);\n      } else {\n        this.getData().\n        done(function (data) {\n          // Process response to highlight matches\n          var i = -1;\n          var item;\n\n          while ((item = data[++i]) && properties.maxRecords > i && i < self.Class.MAX_ITEMS) {\n            suggestions.push({\n              id: item.id,\n              label: item.value.toString().\n              replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" +\n              $.ui.autocomplete.escapeRegex(req.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"),\n              \"<strong>$1</strong>\"),\n              value: item.value });\n\n          }\n\n          addToSuggestions(suggestions);\n        }).fail(function () {\n          // fail\n          defer.reject();\n        });\n      }\n    } else {\n      addToSuggestions(suggestions);\n    }\n\n    return defer.promise();\n  },\n\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var searchItem = $.kendoTmpls(self.renderFactory.getTemplate(\"searchItem\"), {\n      id: item.id,\n      label: item.label,\n      value: item.value });\n\n\n    searchItem.data(\"itemautocomplete\", item);\n\n    return searchItem;\n  },\n\n  showAddRecordDialog: function showAddRecordDialog() {\n    var self = this;\n    var properties = self.properties;\n    var buttons = {\n      text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n      click: function click() {\n        // Show dialog with add form\n        var dialog = new bizagi.rendering.dialog.form(self.dataService, self.renderFactory, {\n          showSaveButton: properties.editable,\n          title: bizagi.localization.getResource(\"render-dialog-entity\"),\n          onSave: function onSave(data) {\n            // Remove pagecache from data\n            var idPageCache = data.idPageCache;\n\n            var params = {\n              action: \"SAVE\",\n              data: data,\n              idPageCache: idPageCache,\n              guidEntity: properties.entity,\n              contexttype: \"entity\" };\n\n\n            $.when(\n            self.dataService.submitData(params)).\n            done(function () {\n              // SUCCESS\n            });\n          } });\n\n\n        dialog.render({\n          idRender: properties.id,\n          idPageCache: properties.idPageCache,\n          requestedForm: \"addForm\",\n          guidEntity: properties.entity,\n          contextType: \"entity\" }).\n        fail(function () {\n\n        });\n      } };\n\n\n    return {\n      buttons: buttons };\n\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Tablet Render ECM\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments: Defines the ECM control for iPad\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.ecm.extend(\"bizagi.rendering.ecm\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1,\n  //limit: The maximum number of audio clips,video clips,etc in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\"] },\n{\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n\n    return $.when(self._super(listControl, fileProperties)).\n    done(function (html) {\n      return html;\n    }).fail(function () {\n      return \"Error\";\n    }).always(function (html) {\n      self.stopLoading();\n      return html;\n    });\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    self._super();\n\n    self.activateUploadNative();\n  },\n\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n\n    var respString = $(html.replace(\"{{control}}\", replace));\n\n    if (replace === \"\") {\n      this.startLoading(respString);\n    }\n\n    return respString.get(0).outerHTML;\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var labelElement = $(\"label\", self.getLabel());\n    var control = self.getControl();\n\n    //Remove the required div from the dom in order to have only one any time\n    control.find(\".ui-bizagi-render-control-required, .bz-rn-ecm-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      labelElement.text((properties.displayName || \"\") + \" \");\n      if (!self.hasValue()) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n    } else {\n      labelElement.text(properties.displayName || \"\"); //+ ' :'\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    control.find(\".ui-bizagi-render-control-required, .bz-rn-ecm-required\").remove();\n\n    if (properties.required) {\n\n      if (!self.checkRequired([])) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n    }\n  },\n\n  startLoading: function startLoading(holder) {\n    holder = holder || this.getRenderedElement();\n    $(\".ui-bizagi-render-control\", holder).prepend(\"<div class=\\\"innerLoader\\\"></div>\").addClass(\"bz-rn-ecm-control\");\n  },\n\n  stopLoading: function stopLoading() {\n    $(\".innerLoader\", this.getControl()).remove();\n  },\n\n  startWaiting: function startWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $button.addClass(\"loading\");\n    $control.find(\"input, a\").css(\"opacity\", 0.6);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", \"disabled\");\n    $control.find(\"input\").prop(\"readonly\", \"readonly\");\n  },\n\n  stopWaiting: function stopWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $control.find(\"input, a\").css(\"opacity\", 1);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", false);\n    $control.find(\"input\").prop(\"readonly\", false);\n    $control.find(\".loading\").removeClass(\"loading\");\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    if (!bizagi.util.isCordovaSupported()) {\n      self.addEventToOpenSlide();\n    }\n\n    if (!self.properties.editable) {\n      self.element.addClass(\"bz-rn-read-only\");\n    }\n\n    self.closeAccordionSection();\n  },\n\n  addEventToOpenSlide: function addEventToOpenSlide() {\n    var self = this;\n    var mode = self.getMode();\n    var container = self.getControl();\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n    self.itemAddfile.hide();\n\n    $(\"li\", container).click(function () {\n      if (mode === \"execution\") {\n        bizagi.loading.start();\n        var title = this.title || $(this).data(\"filename\");\n        $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), title)).fail(function (error) {\n          if (error.responseText) {\n            self.getFormContainer().failHandler(error.responseText);\n          }\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }\n    });\n  },\n\n  activateUploadNative: function activateUploadNative() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getControl();\n    var control = self.getControl();\n\n    if (self.getLabel()) {\n      self.getLabel().hide();\n    }\n\n    self.itemAddfile = $(\".bz-rn-ecm-upload\", container);\n    self.$inputFile = $(\".bz-rn-upload-files-web\", control);\n\n    $(\".bz-rn-ecm-activate-menu\", control).bind(\"click\", function () {\n      var elementBase = $(this);\n      var parents = elementBase.parents(\".bz-rn-ecm-metadata\");\n      var menu = $(\".bz-rn-ecm-menu-container\", parents);\n\n      if (!$(this).is(\".active\") && !$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        self.closeAccordionSection();\n        $(this).addClass(\"active\");\n        menu.addClass(\"showMenu\");\n      } else if (!$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        $(this).removeClass(\"active\");\n        self.closeAccordionSection();\n      }\n\n      var tmpidElement = elementBase.parent().data(\"idfileupload\") || \"\";\n      self.elementsEvent = {\n        \"menu\": menu,\n        \"lock\": $(\".bz-ecm-lock\", menu),\n        \"unlock\": $(\".bz-ecm-unlock\", menu),\n        \"del\": $(\".bz-ecm-delete\", menu),\n        \"edit\": $(\".bz-ecm-edit\", menu),\n        \"element\": {\n          \"id\": tmpidElement,\n          \"filename\": elementBase.parent().attr(\"title\") || \"\",\n          elementReference: this },\n\n        \"params\": {\n          idFileUpload: tmpidElement,\n          xPath: self.properties.xpath,\n          idAttrib: self.properties.idAttrib,\n          idPageCache: self.properties.idPageCache,\n          xpathContext: self.getXpathContext() },\n\n        \"panelMetadata\": $(\".bz-rn-ecm-metadata-container\", parents),\n        \"btnCancel\": $(\".ecm-btn-cancel\", parents),\n        \"btnSave\": $(\".ecm-btn-save\", parents) };\n\n\n      if (menu.is(\":visible\")) {\n        self.addEventsEcm();\n      } else {\n        self.removeEventsEcm();\n      }\n\n    });\n\n    if (!properties.editable) {\n      self.itemAddfile.hide();\n      return;\n    }\n\n    if (bizagi.util.isCordovaSupported()) {\n      if (bizagi.util.isAndroidTabletDevice()) {\n        self.uploadEcmLink = $(\".bz-rn-ecm-url > span\", container);\n        self.uploadEcmLink.on(\"click\", function () {\n          window.open(encodeURI(this.getAttribute(\"href\")), \"_system\", \"location=yes\");\n        });\n      } else if (bizagi.util.isNativePluginSupported()) {\n        // iOS native behaviour, should open files through a webview\n        var filesLinkElements = container.find(\".bz-rn-ecm-url > a\");\n\n        filesLinkElements.removeAttr(\"href\");\n        filesLinkElements.on(\"click\", function () {\n          bizagi.loading.start();\n          $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), this.title)).fail(function (error) {\n            if (error.responseText) {\n              self.getFormContainer().failHandler(error.responseText);\n            }\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        });\n      }\n\n      self.itemsUpload = {\n        \"file\": $(\".file\", container),\n        \"image\": $(\".image\", container),\n        \"cimage\": $(\".cimage\", container),\n        \"caudio\": $(\".caudio\", container),\n        \"cvideo\": $(\".cvideo\", container) };\n\n\n      self.itemAddfile.bind(\"click\", function () {\n        var template = self.renderFactory.getTemplate(\"ecmModalView\");\n        var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n        var data = {\n          \"editable\": self.properties.editable,\n          \"displayName\": self.properties.displayName || \"\" };\n\n        var modalView = $($.trim(modalViewTemplate(data))).clone();\n\n        modalView.kendoMobileModalView({\n          close: function close() {\n\n            self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n            this.destroy();\n            this.element.remove();\n          },\n          modal: false });\n\n\n        self.configureModalViewHandlers(modalView);\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modalView.kendoMobileModalView(\"open\");\n      });\n\n      self.checkExtensions();\n      self.checkMaxFiles();\n    } else {\n      if (bizagi.util.media.fileAPISupported()) {\n        $(self.itemAddfile).click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        // Bloquea la accin de carga de archivos\n        self.itemAddfile.hide();\n      }\n\n      // Just in case\n      self.$inputFile.on(\"click\", function (e) {e.stopPropagation();});\n\n      // Image change (Web only)\n      self.$inputFile.on(\"change\", function () {\n        var dataFile = self.$inputFile[0].files[0];\n        dataFile.fullPath = self.$inputFile[0].value;\n        var extensions = [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO);\n\n        self.startLoading();\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n          $.when(self.uploadFile(dataFile)).done(function (result) {\n            if (_typeof(result) !== \"object\") {\n              // onUploadFileCompleted 2nd param needs to be a response object\n              result = {\n                response: result };\n\n            }\n            self.onUploadFileCompleted(self, result);\n          }).fail(function (error) {\n            self.stopLoading();\n\n            if (error.statusText !== \"Unauthorized\") {\n              bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n            }\n\n            if (error.code === 3) {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n            } else {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n            }\n            bizagi.log(\"An error has occurred: Code = \" + error.code);\n          });\n\n        } else {\n          self.stopLoading();\n        }\n      });\n    }\n  },\n\n  closeAccordionSection: function closeAccordionSection() {\n    var self = this;\n    var control = self.getControl();\n    var menuItem = $(\".bz-rn-ecm-activate-menu\", control);\n    var menu = $(\".bz-rn-ecm-menu-container\", control);\n    var metadata = $(\".bz-rn-ecm-metadata-container\", control);\n\n    menuItem.removeClass(\"active\");\n    menu.removeClass(\"showMenu\");\n\n    metadata.removeClass(\"active\");\n    metadata.slideUp(300).removeClass(\"open\");\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * @param {} inputContainer\r\n      * @returns {}\r\n      */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    // Getting combo list elements\n    self.listOptions = inputContainer.find(\".bz-rn-upload-options li\");\n\n    // Setting the initial selected display value\n    self.listOptions.bind(\"click\", function () {\n      inputContainer.kendoMobileModalView(\"close\");\n      self.applyListener($(this).data(\"role\"));\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      inputContainer.kendoMobileModalView(\"close\");\n    });\n  },\n\n  addEventsEcm: function addEventsEcm() {\n    var self = this;\n    self.removeEventsEcm();\n\n    self.elementsEvent.lock.click(function () {\n      $.when(self.dataService.checkOutFile(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.lock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.unlock.addClass(\"bz-ecm-item-menu-enable\");\n\n      });\n    });\n\n    self.elementsEvent.unlock.click(function () {\n      $.when(self.dataService.cancelCheckOut(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.unlock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.lock.addClass(\"bz-ecm-item-menu-enable\");\n      });\n    });\n\n    var nTimeoutAccordionSection = null;\n\n    self.elementsEvent.del.bind(\"click\", function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n      self.startLoading();\n\n      $(self.elementsEvent.element.elementReference).closest(\".bz-rn-ecm-metadata\").css(\"opacity\", 0.5);\n\n      $.when(self.dataService.deleteECMFile(self.elementsEvent.params)).done(function () {\n        self.stopLoading();\n        self.removeEventsEcm();\n        $(self.elementsEvent.element.elementReference).parents(\".bz-rn-ecm-metadata\").remove();\n\n        //Set files in a temporal array\n        var files = [].concat(self.files);\n\n        //Remove element form files array\n        for (var i = 0; i < files.length; i++) {\n          if (files[i][0] === self.elementsEvent.params.idFileUpload) {\n            files.splice(i, 1);\n          }\n        }\n\n        //Set Value\n        self.setValue(files);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n\n      });\n    });\n\n    self.setMobiscroll();\n\n    self.elementsEvent.edit.click(function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n\n      if (!self.elementsEvent.panelMetadata.is(\".active\")) {\n        self.elementsEvent.panelMetadata.addClass(\"active\");\n        nTimeoutAccordionSection = setTimeout(function () {\n          self.elementsEvent.panelMetadata.stop().slideDown(300).addClass(\"open\");\n        }, 200);\n      }\n    });\n\n    self.elementsEvent.btnSave.click(function () {\n      var properties = self.properties;\n      var elementsToCheck = $(\".bz-rn-ecm-metadata-value\", self.elementsEvent.panelMetadata);\n      var metadata = [];\n      var isInvalid = false;\n      var $button = $(this);\n\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      //self.closeAccordionSection();\n      //self.startLoading();\n      self.startWaiting($button);\n\n      for (var metadataelement = 0; metadataelement < elementsToCheck.length; metadataelement++) {\n        var tmpElement = elementsToCheck[metadataelement];\n        var oldValue = $(tmpElement).data(\"value\");\n        var type = $(tmpElement).data(\"metadatatype\");\n        var required = $(tmpElement).data(\"required\");\n        var readonly = $(tmpElement).data(\"readonly\");\n        var description = $(tmpElement).data(\"description\");\n        var idmetadata = $(tmpElement).data(\"idmetadata\");\n        var actualValue = null;\n\n        if (readonly) {\n          self.stopLoading();\n          self.stopWaiting($button);\n          return true;\n        }\n\n        if (type == \"STRING\" || type == \"DECIMAL\") {\n          actualValue = $(\"input\", tmpElement).val();\n        } else if (type == \"BOOL\") {\n          actualValue = $(\"input[name=ecm-radio]:checked\", tmpElement).val();\n        } else if (type == \"DATETIME\") {\n          var format = self.properties.fullFormat ? self.properties.fullFormat : self.getResource(\"fullFormat\") != \"fullFormat\" ? self.getResource(\"fullFormat\") : \"yyyy-MM-dd HH:mm:ss\";\n          actualValue = bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromISO($(\"input\", tmpElement).attr(\"value\"), false), format);\n        }\n\n        if (required && (actualValue === \"\" || actualValue === null)) {\n          bizagi.showMessageBox(description + \": \" + self.getResource(\"render-ecm-tooltip-mandatory\"), \"Error\");\n          isInvalid = true;\n        }\n\n        if (!isInvalid && actualValue != oldValue) {\n          metadata.push({\n            idMetadata: idmetadata,\n            value: actualValue });\n\n        }\n      }\n\n      if (!isInvalid) {\n        var params = self.buildAddParams();\n        params.fileName = self.elementsEvent.element.filename;\n        params.idFileUpload = self.elementsEvent.element.id;\n        params.idPageCache = properties.idPageCache;\n        params.metaValues = JSON.encode({\n          metadataValues: metadata });\n\n\n        $.when(self.dataService.updateECMMetadata(params)).done(function () {\n          self.stopLoading();\n          self.stopWaiting($button);\n        });\n      } else\n      {\n        self.stopLoading();\n        self.stopWaiting($button);\n      }\n    });\n\n    self.elementsEvent.btnCancel.click(function () {\n      self.closeAccordionSection();\n      self.removeEventsEcm();\n    });\n  },\n\n  /**\r\n      * Creates the date picker for the DOM.bz-ecm-metadata-date elements\r\n      */\n  setMobiscroll: function setMobiscroll() {\n    var self = this;\n    var metadataElements = self.elementsEvent.panelMetadata.find(\".bz-ecm-metadata-date\");\n    metadataElements.each(function (index, input) {\n      var $input = $(input);\n      var value = $input.attr(\"value\");\n      var now = new Date();\n      var valueDate = new Date(value) || now;\n      var minDate = now.getTime() < valueDate.getTime() ? now : valueDate;\n      minDate.setFullYear(minDate.getFullYear() - 2);\n      $input.mobiscroll().calendar({\n        mode: \"mixed\", // Specify scroller mode like: mode: \"mixed\" or omit setting to use default\n        display: \"bottom\", // Specify display mode like: display: \"bottom\" or omit setting to use default\n        controls: [\"calendar\"],\n        min: minDate,\n        defaultValue: valueDate,\n        lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n        onSet: function onSet(e) {\n          // It seems like the plugin doesn't sets the value\n          $input.attr(\"value\", e.valueText);\n        } });\n\n    });\n  },\n\n  removeEventsEcm: function removeEventsEcm() {\n    var self = this;\n\n    self.elementsEvent.lock.unbind(\"click\");\n    self.elementsEvent.unlock.unbind(\"click\");\n    self.elementsEvent.del.unbind(\"click\");\n    self.elementsEvent.edit.unbind(\"click\");\n    self.elementsEvent.btnSave.unbind(\"click\");\n    self.elementsEvent.btnCancel.unbind(\"click\");\n  },\n\n  removeListener: function removeListener() {\n    var self = this;\n    self.itemsUpload.image.unbind(\"click\");\n    self.itemsUpload.file.unbind(\"click\");\n    self.itemsUpload.cimage.unbind(\"click\");\n    self.itemsUpload.caudio.unbind(\"click\");\n    self.itemsUpload.cvideo.unbind(\"click\");\n  },\n\n  applyListener: function applyListener(option) {\n    var self = this;\n\n    switch (option) {\n      case \"image\":\n        navigator.camera.getPicture(function (dataImage) {\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n            $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              self.saveImage(self, dataImage);\n            });\n          });\n          self.itemAddfile.click();\n        }, self.onFail, {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n        break;\n\n      case \"cimage\":\n        navigator.camera.getPicture(function (dataImage) {\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n            $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              self.saveImage(self, dataImage);\n            });\n          });\n          self.itemAddfile.click();\n        },\n        self.onFail, {\n          quality: self.Class.QUALITY_PICTURE,\n          correctOrientation: true });\n\n        break;\n\n      case \"caudio\":\n        navigator.device.capture.captureAudio(function (mediaFiles) {\n          var audioUrl = mediaFiles[0].localURL;\n          $.when(bizagi.util.media.checkMaxSize(audioUrl, self.properties)).done(function () {\n            self.saveAudio(self, mediaFiles);\n          }).always(function () {\n            bizagi.loading.stop({});\n          });\n          self.itemAddfile.click();\n        }, self.onFail, { limit: self.Class.LIMIT });\n        break;\n\n      case \"cvideo\":\n        navigator.device.capture.captureVideo(function (dataImage) {\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataImage, self.properties)).done(function () {\n            self.saveVideo(self, dataImage);\n          }).always(function () {\n            bizagi.loading.stop({});\n          });\n          self.itemAddfile.click();\n        }, self.onFail, { limit: self.Class.LIMIT });\n        break;\n\n      case \"file\":\n        bizagi.showMessageBox(\"In development\", \"Error\");\n        break;\n\n      default:\n        break;}\n\n  },\n\n  renderUploadItem: function renderUploadItem(file) {\n    return this._super(file);\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n    bizagi.util.media.checkFileTypes(dataFile, self.properties, [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO))) {\n\n      // Get form data for POSTing\n      var formData = new FormData();\n      var form = self.getFormContainer();\n      var data = self.buildAddParams();\n\n      var keys = Object.keys(data);\n      keys.map(function (key) {\n        formData.append(key, data[key]);\n      });\n\n      formData.append(\"Filedata\", dataFile);\n      // It seems like some OS uses \\ instead of / so ...\n      formData.append(\"Filename\", dataFile.name.substr(dataFile.name.replace(/([\\\\\\/]+)/g, \"/\").lastIndexOf(\"/\") + 1));\n\n      if (self.properties.contexttype) {\n        formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", self.properties.contexttype);\n      }\n\n      try {\n        if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n          formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n        } else {\n          formData.append(\"JSESSIONID\", form.properties.sessionId);\n        }\n      } catch (e) {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n\n      self.dataService.processUploadFile({\n        url: self.properties.addUrl,\n        formData: formData }).\n      done(function (response) {\n        defer.resolve(response);\n      }).fail(function (error) {\n        defer.reject(error);\n      });\n\n    } else {\n      bizagi.loading.stop();\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      * @param {} context\r\n      * @param {} dataImage\r\n      * @returns {}\r\n      */\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveAudio: function saveAudio(context, dataAudio) {\n    var self = context;\n    var params = {};\n    var fileName = dataAudio[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataAudio[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var fileName = dataVideo[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  onFail: function onFail(error) {\n    bizagi.log(\"Error code: \" + error.code);\n  },\n\n  onUploadFileCompleted: function onUploadFileCompleted(context, response) {\n    var self = this;\n\n    try {\n      response = JSON.parse(decodeURI(response.response));\n      if (response.idFileUpload) {\n        self.submitOnChange();\n      } else {\n        throw \"not present idFileUpload\";\n      }\n    } catch (e) {\n      bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      bizagi.log(\"Error ECM:\");\n      bizagi.log(e);\n    }\n  },\n\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value.length;\n\n    if (maxFiles !== 0 && actualFiles >= maxFiles) {\n      self.itemAddfile.hide();\n      self.removeListener();\n    }\n  },\n\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var properties = self.properties;\n    var validExtensions = properties.validExtensions;\n\n    if (!validExtensions) {\n      return;\n    }\n\n    validExtensions = validExtensions.split(\";\");\n\n    if (validExtensions.length == 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n      return;\n    }\n\n    var enableVideo = false;\n    var enableAudio = false;\n    var enableImage = false;\n\n    for (var i = 0; i < validExtensions.length; i++) {\n      validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n      var image = self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]);\n\n      if (image >= 0) {\n        enableImage = true;\n      }\n    }\n\n    if (!enableImage) {\n      self.itemsUpload.image.hide();\n      self.itemsUpload.cimage.hide();\n\n      self.itemsUpload.image.parent().addClass(\"bz-rn-upload-hidden-item\");\n      self.itemsUpload.cimage.parent().addClass(\"bz-rn-upload-hidden-item\");\n    }\n\n    if (!enableAudio) {\n      self.itemsUpload.caudio.hide();\n      self.itemsUpload.caudio.parent().addClass(\"bz-rn-upload-hidden-item\");\n    }\n\n    if (!enableVideo) {\n      self.itemsUpload.cvideo.hide();\n      self.itemsUpload.cvideo.parent().addClass(\"bz-rn-upload-hidden-item\");\n    }\n\n\n    if (!enableAudio && !enableImage && !enableVideo) {\n      self.itemAddfile.hide();\n      self.removeListener();\n    }\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      if (metaData[0].metadata && metaData[0].metadata.length) {\n        metaData[0].metadata.map(function shapeMetadataValues(meta) {\n          if (meta.metadataType === \"DATETIME\") {\n            // Format the actual date to ISO, so mobiscroll can useit\n            // Before save the value it has to go back to the original format (cause service will accept any format)\n            meta.dateFormat = self.getResource(\"fullFormat\") !== \"fullFormat\" ? self.getResource(\"fullFormat\") : self.properties.fullFormat ? self.properties.fullFormat : \"yyyy-MM-dd HH:mm:ss\";\n            meta.value = bizagi.util.dateFormatter.formatDate(meta.value ? bizagi.util.dateFormatter.getDateFromFormat(meta.value, meta.dateFormat) : new Date(), \"yyyy-MM-dd\");\n          }\n        });\n      }\n\n      var html = $.kendoTmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n  /*Check if all meta data fields that's right */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    control = self.getControl(),\n    message = [],\n    error = false,\n    properties = self.properties;\n\n\n    var bValid = true;\n\n    if (properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n      // Call base\n      bValid = newRow ? true : this._super(invalidElements);\n\n      if (self.filesCount === 0 && bValid) {\n\n        invalidElements.push({\n          xPath: properties.xpath,\n          message: self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName) });\n\n        bValid = false;\n      }\n    }\n\n    if (properties.editable) {\n      var $arrayEcmControls = $(\".bz-rn-ecm-container:visible\", control).find(\".bz-rn-ecm-metadata-value[data-required='true']\");\n      $.each($arrayEcmControls, function (key, value) {\n        if ($(\"input\", value).val() === \"\") {\n          message.push($(value).data(\"description\"));\n          error = true;\n        }\n      });\n    }\n\n    if (error) {\n      var errorMessage = self.getResource(\"render-required-text\").replaceAll(\"#label#\", message.join(\", \"));\n      invalidElements.push({\n        xPath: properties.xpath,\n        message: errorMessage });\n\n\n      // If it has error, enable editable view.\n      // open popup\n\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(null);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var arrayItems = control.find(\".bz-rn-ecm-file-container\");\n    var length = arrayItems.length - 1;\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        $.when(self.deleteUploadItem(item, file.idfileupload)).done(function () {\n          // Detach item\n          item.remove();\n        });\n      }\n    });\n\n    // Check maxFiles\n    self.filesCount = 0;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Tablet Render Yes-No Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.searchList.extend(\"bizagi.rendering.searchList\", {\n  SEARCH_MIN_LENGTH: 2,\n  temporalElements: {} },\n{\n  /**\r\n   * RenderSingle Method\r\n   * */\n  initializeList: function initializeList() {\n    var self = this;\n\n    self._super();\n    var control = self.getControl();\n\n    //Getting all aux templates\n    self.modalViewTemplates = kendo.template(self.renderFactory.getTemplate('searchListModalViewAuxTemplates'), { useWithBlock: false });\n    self.inputTemplates = kendo.template(self.renderFactory.getTemplate('searchListInputAuxTemplates'), { useWithBlock: false });\n\n    //Getting the input\n    self.input = $(\".bz-rn-container-searchlist\", control);\n\n    self.configureListHandlers();\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRender: function postRender() {\n    var self = this;\n\n    //Initialicing the list\n    self.initializeList();\n\n    // Call base\n    this._super();\n\n    //trigger click event on remove tag\n    self.input.on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this));\n    });\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Initialicing the list\n    self.initializeList();\n\n    // Call base\n    this._super();\n\n    if (!self.properties.editable) {\n      //Add styles class\n      self.configureReadOnly();\n    }\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n\n    if (self.properties.editable) {\n      if (self.properties.value.length > 0) {\n        self.configureModalView(\".bz-rn-last-child\");\n      } else {\n        self.configureModalView(\"ul\");\n        self.configureModalView(\".bz-rn-last-child\");\n      }\n    }\n  },\n\n  /**\r\n      * Configure the modal view to select values\r\n      * */\n  configureModalView: function configureModalView(selector) {\n    var self = this;\n    var inputContainer = selector === \"\" ? self.input : $(selector, self.input);\n\n    inputContainer.unbind().bind(\"click\", function () {\n      //Getting the values to show\n      var elements = $(\"ul li.bz-rn-regular-element\", self.input);\n      var values = [];\n\n      //Reset the temporal array\n      self.Class.temporalElements = {};\n\n      for (var i = 0, length = elements.length; i < length; i++) {\n        var id = $(elements[i]).data(\"id\");\n        var value = $(\"label\", $(elements[i])).text();\n        var newElement = { 'id': id, 'value': value };\n\n        values.push(newElement);\n\n        //Add element to temporal context array\n        self.addTemporalElement(id, value, false);\n      }\n\n      //Creating modal view\n      var template = self.renderFactory.getTemplate('searchListModalView');\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': values,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView('open');\n      modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").on('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n      }\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(this.value, inputContainer)).always(function () {\n        bizagi.loading.stop({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button-searchlist\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list',\n    function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(term, inputContainer)).always(function () {\n        bizagi.loading.stop({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    });\n\n    $.when(closeModalViewPromise).\n    done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Show finded results\r\n      * */\n  showResults: function showResults(value, inputContainer) {\n    var self = this;\n\n    return $.when(self.processRequest({ 'term': value })).done(function (suggestions) {\n      if (suggestions.length === 0) {\n        self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      } else {\n        //Hide current results\n        $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n\n        //Add new results to list\n        var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"sugestions\", 'items': suggestions }))));\n        newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n\n        //Get list of elements\n        self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n\n        //Setting the initial selected display value\n        self.modalViewList.find(\"li\").unbind().bind(\"click\", function () {\n          //add new element to data control\n          self.appendFoundItem(this, $(\".filter-searchlist-modal-view-tags\", inputContainer));\n\n          if ($(this).siblings().length === 0) {\n            self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n          }\n\n          $(this).remove();\n        });\n      }\n    }).fail(function (response) {\n      self.showNoResultsMessage(response, inputContainer);\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele.obj);\n    });\n\n    self.setValue(tempArray);\n\n    //Clear the input\n    $(\"ul li\", self.input).remove();\n\n    //Get the input content\n    var inputContainer = $(\"li\", $(bizagi.util.trim(self.inputTemplates({ 'template': \"inputContainer\", 'value': tempArray }))));\n\n    //Add the input container\n    inputContainer.appendTo($(\"ul\", self.input));\n\n    //unbind current events\n    $(\"ul\", self.input).unbind();\n    $(\".bz-rn-last-child\", self.input).unbind();\n\n    //Trigger click event\n    if (tempArray.length > 0) {\n      self.configureModalView(\".bz-rn-last-child\");\n    } else {\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    }\n  },\n\n  /*\r\n      *   check if the control has value\r\n      */\n  hasValue: function hasValue() {\n    var self = this;\n    return JSON.parse(self.getValue()).value.length > 0;\n  },\n\n  /*\r\n      *   Sets the internal value\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    // Change internal value\n    self.value = JSON.encode({\n      \"value\": value });\n\n\n    self.changeRequiredLabel(!self.hasValue());\n\n    // Trigger events\n    if (triggerEvents && !self.internalSetInitialValueFlag) {\n      self.triggerRenderChange();\n    }\n  },\n\n  /**\r\n      * Show the correct message if there are elements to show\r\n      * */\n  showNoResultsMessage: function showNoResultsMessage(message, inputContainer) {\n    var self = this;\n    $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n    var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"modalViewDefaultMessage\", 'message': message }))));\n    newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n  },\n\n  /**\r\n      * Append founded item\r\n      * */\n  appendFoundItem: function appendFoundItem(item, container) {\n    var self = this;\n\n    // Map the ids of the elements to an array\n    var uniqueIds = $.map($('li', container), function (val) {\n      return $(val).data('id');\n    });\n\n    // Avoid appending duplicated items\n    if (uniqueIds.indexOf($(item).data(\"id\")) == -1) {\n      var id = $(item).data(\"id\");\n      var value = $(\"label\", item).text();\n      var $newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"fullElement\", 'id': id, 'value': value }))));\n\n      // Get the latest item on list to append new li with match word\n      var lastElement = $('li:last', container);\n      if (lastElement.hasClass(\"bz-rn-any-element\")) {\n        lastElement.remove();\n        $('ul', container).prepend($newElement);\n      } else {\n        $('ul', container).prepend($newElement);\n      }\n\n      self.addTemporalElement($(item).data(\"id\"), $(\"label\", item).text(), false);\n    }\n  },\n\n  /**\r\n      * Removen a item from the list\r\n      * */\n  removeItem: function removeItem(element, isModalViewContainer) {\n    var self = this;\n    var li = element.parent();\n    var container = element.closest(\".bz-rn-container-searchlist\");\n\n    if (container.length === 0) {\n      container = element.closest(\".filter-searchlist-modal-view-tags\");\n    }\n\n    if (!isModalViewContainer) {\n      // Remove from main memory and set the new value\n      self.removeElement({ id: li.data('id') });\n    } else {\n      delete self.Class.temporalElements[li.data('id')];\n    }\n\n    // Remove list element\n    li.remove();\n\n    if (container.find(\"li\").length <= 1 && !isModalViewContainer) {\n      $('.bz-rn-click-to-add-span', container).removeClass(\"hidden\");\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    } else if (container.find(\"li\").length === 0 && isModalViewContainer) {\n      var defaultElement = $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"modalViewDefaultValue\" })));\n      $(\"li\", defaultElement).appendTo($(\"ul\", container));\n    }\n  },\n\n  /**\r\n      *   Process the request data for the autocomplete control\r\n      */\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n\n    // Create array for response objects\n    var suggestions = [];\n    var defer = new $.Deferred();\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n      this.getData().\n      done(function (data) {\n\n        // Process response to highlight matches\n        $.each(data, function (i, val) {\n          var parseValue;\n          switch (_typeof(val.value)) {\n            case \"number\":\n              parseValue = val.value;\n              break;\n            case \"object\":\n              parseValue = val.value.toString();\n              break;\n            case \"string\":\n              parseValue = val.value.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + req.term + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"), \"<strong>$1</strong>\");\n              break;\n            default:\n              parseValue = val.value;\n              break;}\n\n\n          if (typeof self.Class.temporalElements[val.id] === 'undefined') {\n            suggestions.push({\n              id: val.id,\n              label: parseValue,\n              value: val.value });\n\n          }\n        });\n\n        defer.resolve(suggestions);\n      });\n    } else {\n      defer.reject(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"));\n    }\n\n    return defer;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    // Set internal value\n    self.setValue(finalValue);\n\n    if (value !== undefined) {\n      if (properties.editable) {\n        self.input.val(value.label);\n      }\n    }\n  },\n\n  /**\r\n      *   Returns the value to display, ex. non-editable renders\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    return this.selectedValue;\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.kendoTmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      editable: false });\n\n  },\n\n  configureReadOnly: function configureReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    // Remove click event\n    $('.bz-rn-last-child', control).unbind(\"click\");\n    $('.bz-rn-searchlist-search-icon', control).unbind(\"click\");\n\n    //hide all elements\n    $('.bz-rn-click-to-add-span', control).remove();\n\n    // Remove \"x\" icon from each element on the list\n    $('.bz-rn-remove-tag-on-search-list', control).remove();\n\n    self.input.addClass(\"searchListNonEditable\");\n  },\n\n  /**\r\n      * Add new element to the temporal array\r\n      * */\n  addTemporalElement: function addTemporalElement(id, value, elementToRemove) {\n    var self = this;\n\n    if (self.Class.temporalElements[id]) {\n      delete self.Class.temporalElements[id];\n    }\n\n    self.Class.temporalElements[id] = { 'obj': { 'id': id, 'value': value }, 'remove': elementToRemove };\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Column Decorator Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.combo\", {}, {\n  /*\r\n                                                                              *   Sets the internal value\r\n                                                                              */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    // Check is offline form\t    \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (isOfflineForm && (typeof value == \"number\" || typeof value == \"string\")) {\n      var newValue = _typeof(self.properties.data) == \"object\" ? self.properties.data.find(function (item) {return item.id == value;}) : value;\n\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = value;\n    } else if (value && value.length > 0) {\n\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else if (isOfflineForm && value !== null && _typeof(value) === \"object\" && value.value) {\n      self._super(surrogateKey, value.value);\n      decorated.selectedValue = value.value;\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","/*\r\n* jQuery UI Mask @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* Based on the jquery.maskedinput.js plugin by Josh Bush (digitalbush.com)\r\n*\r\n* http://docs.jquery.com/UI/Mask\r\n*\r\n* Depends:\r\n*   ui.core.js\r\n*/\n(function ($) {\n\n  var pasteEventName = (bizagi.util.isEventSupported('paste') ? 'paste' : 'input') + \".mask\";\n\n  $.widget(\"ui.mask\", {\n\n    _init: function _init() {\n\n      var options = this.options,self = this;\n\n      $.extend(this, { caret: function caret(begin, end) {return $.ui.mask.caret(self.element, begin, end);} });\n\n      if (!options.mask || !options.mask.length) {return;} //no mask pattern defined. no point in continuing.\n      if (!options.placeholder || !options.placeholder.length) {\n        options.placeholder = '_'; //in case the user decided to nix a placeholder. \n      }\n\n      this._prepareBuffer();\n      this._bindEvents();\n      this._checkVal(this.element.val().length && options.allowPartials); //Perform initial check for existing values\n    },\n\n    destroy: function destroy() {\n      this.element.\n      unbind('.mask').\n      removeData('mask');\n    },\n\n    value: function value() {\n      var input = this.element,\n      self = this,\n      res = $.map(self.buffer, function (c, i) {return self.tests[i] ? c : null;}).join(''),\n      r = new RegExp('\\\\' + this.options.placeholder, 'gi');\n      return res.replace(r, '');\n    },\n\n    formatted: function formatted() {\n      var r = new RegExp('\\\\' + this.options.placeholder, 'gi'),\n      res = this.element.val();\n      return res.replace(r, '');\n    },\n\n    apply: function apply() {\n      this.element.trigger('apply.mask');\n    },\n\n    _setData: function _setData(key, value) {\n\n      $.widget.prototype._setData.apply(this, arguments);\n      var options = this.options;\n\n      switch (key) {\n        case 'mask':\n          //no mask pattern defined. no point in continuing.\n          if (!options.mask || !options.mask.length) {\n            this.element.unbind('.mask');\n            break;\n          }\n        case 'placeholder':\n          if (!options.placeholder || !options.placeholder.length) {\n            options.placeholder = '_'; //in case the user decided to nix a placeholder.\n          }\n          this.element.val('');\n          this._prepareBuffer();\n          !this.eventsBound && this._bindEvents();\n          break;}\n\n\n    },\n\n    _prepareBuffer: function _prepareBuffer() {\n\n      this._escapeMask();\n\n      var self = this,\n      input = this.element,\n      options = this.options,\n      mask = options.mask,\n      defs = $.ui.mask.definitions,\n      tests = [],\n      partialPosition = mask.length,\n      firstNonMaskPos = null,\n      len = mask.length;\n\n      //if we're applying the mask to an element which is not an input, it won't have a val() method. fake one for our purposes.\n      if (!input.is(':input')) input.val = input.html;\n\n      $.each(mask.split(\"\"), function (i, c) {\n        if (c == '?') {\n          len--;\n          partialPosition = i;\n        } else\n        if (defs[c]) {\n          tests.push(new RegExp(defs[c]));\n          if (firstNonMaskPos == null)\n          firstNonMaskPos = tests.length - 1;\n        } else\n        {\n          tests.push(null);\n        }\n      });\n\n      $.extend(this, {\n        buffer: $.map(mask.split(\"\"), function (c, i) {\n          if (c != '?') {\n            return defs[c] ? options.placeholder : c;\n          }\n        }),\n        tests: tests,\n        firstNonMaskPos: firstNonMaskPos,\n        partialPosition: partialPosition });\n\n\n      this.buffer = $.map(this.buffer, function (c, i) {\n        if (c == \"\\t\") {\n          return self.maskEscaped[i];\n        }\n        return c;\n      });\n\n      this.options.mask = mask = this.maskEscaped;\n    },\n\n    _bindEvents: function _bindEvents() {\n\n      var self = this,\n      input = this.element,\n      ignore = false, //Variable for ignoring control keys\n      focusText = input.val();\n\n      function keydownEvent(e) {\n        e = e || window.event;\n        var pos = self.caret(),\n        k = e.keyCode,\n        keyCode = $.ui.keyCode;\n\n        ignore = k < keyCode.SHIFT || k > keyCode.SHIFT && k < keyCode.SPACE || k > keyCode.SPACE && k < 41;\n\n        //delete selection before proceeding\n        if (pos.begin - pos.end != 0 && (!ignore || k == keyCode.BACKSPACE || k == keyCode.DELETE))\n        self._clearBuffer(pos.begin, pos.end);\n\n        //backspace, delete, and escape get special treatment\n        if (k == keyCode.BACKSPACE || k == keyCode.DELETE) {//backspace/delete\n          self._shiftL(pos.begin + (k == keyCode.DELETE || k == keyCode.BACKSPACE && pos.begin != pos.end ? 0 : -1), Math.abs(pos.begin - pos.end));\n          return false;\n        } else\n        if (k == keyCode.ESCAPE) {//escape\n          input.val(focusText);\n          self.caret(0, self._checkVal());\n          return false;\n        }\n      };\n\n      function keypressEvent(e) {\n\n        e = e || window.event;\n\n        var k = e.charCode || e.keyCode || e.which,\n        keyCode = $.ui.keyCode,\n        len = self.options.mask.length;\n\n        if (ignore) {\n          ignore = false;\n          //Fixes Mac FF bug on backspace\n          return e.keyCode == keyCode.BACKSPACE ? false : null;\n        }\n\n        var pos = self.caret();\n\n        if (e.ctrlKey || e.altKey || e.metaKey) {//Ignore\n          return true;\n        } else\n        if (k >= keyCode.SPACE && k <= 125 || k > 186) {//typeable characters\n          var p = self._seekNext(pos.begin - 1);\n          if (p < len) {\n            var c = String.fromCharCode(k);\n            if (self.tests[p] && self.tests[p].test(c)) {\n              self._shiftR(p);\n              self.buffer[p] = c;\n              self._writeBuffer();\n              var next = self._seekNext(p);\n              self.caret(next);\n              self.options.completed && next == len && self.options.completed.call(input);\n            }\n          }\n        }\n        return false;\n      };\n\n      if (!input.attr(\"readonly\")) {\n        input.\n        bind(\"focus.mask\", function () {\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n          setTimeout(function () {\n            if (pos == self.options.mask.length)\n            self.caret(0, pos);else\n\n            self.caret(pos);\n          }, 0);\n        }).\n        bind(\"blur.mask\", function () {\n          self._checkVal();\n          if (input.val() != focusText)\n          input.change();\n        }).\n        bind(\"apply.mask\", function () {//changing the value of an input without keyboard input requires re-applying the mask.\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n        }).\n        bind(\"keydown.mask\", keydownEvent).\n        bind(\"keypress.mask\", keypressEvent).\n        bind(pasteEventName, function () {\n          setTimeout(function () {self.caret(self._checkVal(true));}, 0);\n        });\n        this.eventsBound = true;\n      }\n    },\n\n    _writeBuffer: function _writeBuffer() {\n      return this.element.val(this.buffer.join('')).val();\n    },\n\n    _clearBuffer: function _clearBuffer(start, end) {\n      var len = this.options.mask.length;\n      for (var i = start; i < end && i < len; i++) {\n        if (this.tests[i])\n        this.buffer[i] = this.options.placeholder;\n      }\n    },\n\n    _seekNext: function _seekNext(pos) {\n      var len = this.options.mask.length;\n      while (++pos <= len && !this.tests[pos]) {;}\n      return pos;\n    },\n\n    _shiftR: function _shiftR(pos) {\n      var len = this.options.mask.length;\n      for (var i = pos, c = this.options.placeholder; i < len; i++) {\n        if (this.tests[i]) {\n          var j = this._seekNext(i);\n          var t = this.buffer[i];\n          this.buffer[i] = c;\n          if (j < len && this.tests[j].test(t)) {\n            c = t;\n          } else\n          {\n            break;\n          }\n        }\n      }\n    },\n\n    _shiftL: function _shiftL(pos, length) {\n\n      while (!this.tests[pos] && --pos >= 0) {;}\n\n      var originalPos = pos,\n      len = this.options.mask.length,\n      placeholder = this.options.placeholder;\n\n      for (var i = pos; i < len && (i >= 0 || length > 1); i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = placeholder;\n          var j = this._seekNext(i);\n          if (j < len && this.tests[i].test(this.buffer[j])) {\n            this.buffer[pos] = this.buffer[j];\n            this.buffer[j] = placeholder;\n            pos++;\n            while (!this.tests[pos]) {pos++;}\n          }\n        }\n      }\n      this._writeBuffer();\n      this.caret(Math.max(this.firstNonMaskPos, originalPos));\n    },\n\n    _checkVal: function _checkVal(allow) {\n      //try to place characters where they belong\n      var input = this.element,\n      test = input.val(),\n      len = this.options.mask.length,\n      lastMatch = -1;\n\n      for (var i = 0, pos = 0; i < len; i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = this.options.placeholder;\n          while (pos++ < test.length) {\n            var c = test.charAt(pos - 1);\n            if (this.tests[i].test(c)) {\n              this.buffer[i] = c;\n              lastMatch = i;\n              break;\n            }\n          }\n          if (pos > test.length)\n          break;\n        } else\n        if (this.buffer[i] == test[pos] && i != this.partialPosition) {\n          pos++;\n          lastMatch = i;\n        }\n      }\n      if (!allow && lastMatch + 1 < this.partialPosition) {\n        if (!this.options.allowPartials || !this.value().length) {\n          input.val(\"\");\n          this._clearBuffer(0, len);\n        } else\n          //if we're allowing partial input/inital values, and the element we're masking isnt an input, then we need to allow the mask to apply.\n          if (!input.is(':input')) this._writeBuffer();\n\n      } else\n      if (allow || lastMatch + 1 >= this.partialPosition) {\n        this._writeBuffer();\n        if (!allow) input.val(input.val().substring(0, lastMatch + 1));\n      }\n      return this.partialPosition ? i : this.firstNonMaskPos;\n    },\n\n    _escapeMask: function _escapeMask() {\n      var mask = this.options.mask,\n      literals = [],\n      replacements = [];\n\n      for (var i = 0; i < mask.length; i++) {\n        var c,temp = mask[i] || mask.charAt(i);\n        if (temp != \"\\\\\" || mask[i - 1] == \"\\\\\") {\n          if (mask[i - 1] == \"\\\\\") {\n            c = \"\\t\";\n            replacements[literals.length] = temp;\n          } else\n          {\n            c = temp;\n          }\n          literals[literals.length] = c;\n        }\n      }\n\n      this.options.mask = literals.join('');\n\n      for (var i = 0; i < literals.length; i++) {\n        if (replacements[i] !== undefined) {\n          literals[i] = replacements[i];\n        }\n      }\n\n      this.maskEscaped = literals.join('');\n    } });\n\n\n\n  $.extend($.ui.mask, {\n    version: \"@VERSION\",\n    getter: \"value formatted\",\n    defaults: {\n      mask: '',\n      placeholder: '_',\n      completed: null,\n      allowPartials: false },\n\n    definitions: { //Predefined character definitions\n      '#': \"[\\\\d]\",\n      'a': \"[A-Za-z]\",\n      '*': \"[A-Za-z0-9]\" },\n\n    caret: function caret(element, begin, end) {//Helper Function for Caret positioning\n      var input = element[0];\n      if (typeof begin == 'number') {\n        end = typeof end == 'number' ? end : begin;\n        if (input.setSelectionRange) {\n          input.focus();\n          input.setSelectionRange(begin, end);\n        } else if (input.createTextRange) {\n          var range = input.createTextRange();\n          range.collapse(true);\n          range.moveEnd('character', end);\n          range.moveStart('character', begin);\n          range.select();\n        }\n        return element;\n      } else {\n        if (input.setSelectionRange) {\n          begin = input.selectionStart;\n          end = input.selectionEnd;\n        } else\n        if (document.selection && document.selection.createRange) {\n          var range = document.selection.createRange();\n          begin = 0 - range.duplicate().moveStart('character', -100000);\n          end = begin + range.text.length;\n        }\n        return { begin: begin, end: end };\n      }\n    } });\n\n\n})(jQuery);","/*\r\n*\r\n* Copyright (c) 2006/2007 Sam Collett (http://www.texotela.co.uk)\r\n* Licensed under the MIT License:\r\n* http://www.opensource.org/licenses/mit-license.php\r\n* \r\n* Version 1.0\r\n* Demo: http://www.texotela.co.uk/code/jquery/numeric/\r\n*\r\n* $LastChangedDate: 2007-05-29 11:31:36 +0100 (Tue, 29 May 2007) $\r\n* $Rev: 2005 $\r\n*/\n\n/*\r\n   * Allows only valid characters to be entered into input boxes.\r\n   * Note: does not validate that the final text is a valid number\r\n   * (that could be done by another script, or server-side)\r\n   *\r\n   * @name     numeric\r\n   * @param    decimal      Decimal separator (e.g. '.' or ',' - default is '.')\r\n   * @param    callback     A function that runs if the number is not valid (fires onblur)\r\n   * @author   Sam Collett (http://www.texotela.co.uk)\r\n   * @example  $(\".numeric\").numeric();\r\n   * @example  $(\".numeric\").numeric(\",\");\r\n   * @example  $(\".numeric\").numeric(null, callback);\r\n   *\r\n   */\njQuery.fn.numeric = function (decimal, callback) {\n  decimal = decimal || \".\";\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n      /* '-' only allowed at start */\n      if (key == 45 && this.value.length == 0) return true;\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */ &&\n      key != 46 /* del */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};\n\njQuery.fn.numericSN = function (decimal, exp) {\n  decimal = decimal || \".\";\n  exp = exp || \"e\";\n  var plus = '+';\n  var minus = '-';\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      /* only one e character allowed */\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) != -1) {\n        allow = false;\n      }\n\n\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the exp and it is not already in the field\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) == -1) {\n        allow = true;\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n\n      /* allow plus and minus keys*/\n      if (key == minus.charCodeAt(0) || key == plus.charCodeAt(0)) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};","/**\r\n* Timeago is a jQuery plugin that makes it easy to support automatically\r\n* updating fuzzy timestamps (e.g. \"4 minutes ago\" or \"about 1 day ago\").\r\n*\r\n* @name timeago\r\n* @version 1.3.1\r\n* @requires jQuery v1.2.3+\r\n* @author Ryan McGeary\r\n* @license MIT License - http://www.opensource.org/licenses/mit-license.php\r\n*\r\n* For usage and examples, visit:\r\n* http://timeago.yarp.com/\r\n*\r\n* Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)\r\n*/\n\n(function ($) {\n  $.timeago = function (timestamp) {\n    $t.settings = {\n      refreshMillis: 60000,\n      allowFuture: false,\n      localeTitle: false,\n      cutoff: 0,\n      strings: {\n        prefixAgo: null,\n        prefixFromNow: null,\n        suffixAgo: bizagi.localization.getResource(\"bizagi-editor-form-timeago-ago\"),\n        suffixFromNow: bizagi.localization.getResource(\"bizagi-editor-form-timeago-from-now\"),\n        seconds: bizagi.localization.getResource(\"bizagi-editor-form-timeago-seconds\"),\n        minute: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minute\"),\n        minutes: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minutes\"),\n        hour: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hour\"),\n        hours: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hours\"),\n        day: bizagi.localization.getResource(\"bizagi-editor-form-timeago-day\"),\n        days: bizagi.localization.getResource(\"bizagi-editor-form-timeago-days\"),\n        month: bizagi.localization.getResource(\"bizagi-editor-form-timeago-month\"),\n        months: bizagi.localization.getResource(\"bizagi-editor-form-timeago-months\"),\n        year: bizagi.localization.getResource(\"bizagi-editor-form-timeago-year\"),\n        years: bizagi.localization.getResource(\"bizagi-editor-form-timeago-years\"),\n        wordSeparator: \" \",\n        numbers: [] } };\n\n\n\n    if (timestamp instanceof Date) {\n      return inWords(timestamp);\n    } else if (typeof timestamp === \"string\") {\n      timestamp = timestamp.replace(\".\", \"-\");\n      return inWords($.timeago.parse(timestamp));\n    } else if (typeof timestamp === \"number\") {\n      return inWords(new Date(timestamp));\n    } else {\n      return inWords($.timeago.datetime(timestamp));\n    }\n  };\n  var $t = $.timeago;\n\n  $.extend($.timeago, {\n\n    /*\r\n                        *\r\n                        */\n    inWords: function inWords(distanceMillis) {\n      var $l = this.settings.strings;\n      var prefix = $l.prefixAgo;\n      var suffix = $l.suffixAgo;\n      if (this.settings.allowFuture) {\n        if (distanceMillis < 0) {\n          prefix = $l.prefixFromNow;\n          suffix = $l.suffixFromNow;\n        }\n      }\n\n      var seconds = Math.abs(distanceMillis) / 1000;\n      var minutes = seconds / 60;\n      var hours = minutes / 60;\n      var days = hours / 24;\n      var years = days / 365;\n\n      function substitute(stringOrFunction, number) {\n        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;\n        var value = $l.numbers && $l.numbers[number] || number;\n        return string.replace(/%d/i, value);\n      }\n\n      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||\n      seconds < 90 && substitute($l.minute, 1) ||\n      minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||\n      minutes < 90 && substitute($l.hour, 1) ||\n      hours < 24 && substitute($l.hours, Math.round(hours)) ||\n      hours < 42 && substitute($l.day, 1) ||\n      days < 30 && substitute($l.days, Math.round(days)) ||\n      days < 45 && substitute($l.month, 1) ||\n      days < 365 && substitute($l.months, Math.round(days / 30)) ||\n      years < 1.5 && substitute($l.year, 1) ||\n      substitute($l.years, Math.round(years));\n\n      var separator = $l.wordSeparator || \"\";\n      if ($l.wordSeparator === undefined) {separator = \" \";}\n      return $.trim([prefix, words, suffix].join(separator));\n    },\n    /*\r\n       *\r\n       */\n    parse: function parse(iso8601) {\n      var s = $.trim(iso8601);\n      s = s.replace(/\\.\\d+/, \"\"); // remove milliseconds\n      s = s.replace(/-/, \"/\").replace(/-/, \"/\");\n      s = s.replace(/T/, \" \").replace(/Z/, \" UTC\");\n      s = s.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\n      s = s.replace(/([\\+\\-]\\d\\d)$/, \" $100\"); // +09 -> +0900\n      return new Date(s);\n    },\n    /*\r\n       *\r\n       */\n    datetime: function datetime(elem) {\n      var iso8601 = $t.isTime(elem) ? $(elem).attr(\"datetime\") : $(elem).attr(\"title\");\n      return $t.parse(iso8601);\n    },\n    /*\r\n       *\r\n       */\n    isTime: function isTime(elem) {\n      // jQuery's `is()` doesn't play well with HTML5 in IE\n      return $(elem).get(0).tagName.toLowerCase() === \"time\"; // $(elem).is(\"time\");\n    } });\n\n\n  function inWords(date) {\n    return $t.inWords(distance(date));\n  }\n\n  function distance(date) {\n    return new Date().getTime() - date.getTime();\n  }\n\n})(jQuery);","/**\r\n * Name:\r\n *   Author: Bizagi Mobile team\r\n *   Comments:\r\n * Structure to applicate plugin\r\n *  <div class=\"bz-bizagi-container-tap-popup\"> //container\r\n    <div class=\"cell bz-container-items-tabs\"> // represent item of tab\r\n    <span >${displayName}</span>// the first span always is the title                                    \r\n    <span> ........</span> // after the span can place the items you want\r\n    <div> .........</div> // etc\r\n    </div> <!-- end cell-->\r\n    </div><!-- end bz-bizagi-container-tap-popup-->\r\n**/\n(function ($) {\n  $.fn.bztabs = function (params) {\n\n    var self = $(this);\n\n    params = params || {};\n    params.activeTab = params.activeTab || 0;\n    params.tabNumber = params.tabNumber || 1;\n\n\n    var activate = params.activate && typeof params.activate === \"function\" ? params.activate : function () {};\n    var beforeActivate = params.beforeActivate && typeof params.beforeActivate === \"function\" ? params.beforeActivate : function () {};\n\n    // PopUp control\n    var popUp = self.find(\">div.bz-bizagi-container-tap-popup\").hide();\n    // Depending on tabNumber a percentage will be in the width of each tab\n    var tabCountPopup = popUp.children().length;\n    // Base to build the header of tabs\n    var tabHeader = $(\"<div class='bz-header_select'></div>\");\n\n    var tabCountReal = params.tabNumber > tabCountPopup ? tabCountPopup : params.tabNumber;\n\n    // round down\n    var widthRow = Math.floor(100 / Number(tabCountReal));\n\n    // Duplicate the tabs to create the header\n    popUp.children().each(function (i, item) {\n      tabHeader.append(\n      \"<div class='bz-wp-tabs-ui bz-wp-tabs-item' data-index='\" + i + \"' data-reference-tab='\" +\n      item.getAttribute(\"data-reference-tab\") + \"'><span>\" +\n      item.textContent + \"</span></div>\");\n    });\n\n    tabHeader.find(\"> .bz-wp-tabs-ui\").css(\"width\", widthRow + \"%\");\n    tabHeader.append(\"<div class='bz-wp-tabs-arrow-container'><div class='bz-cm-icon bz-mo-icon bz-plus'></div></div>\");\n\n    self.prepend(tabHeader);\n\n    var tabCurrent = self.find(\"> .bz-bizagi-container-tap-popup > .bz-container-items-tabs\").eq(params.activeTab);\n    var itemCurrent = $($(tabCurrent).data(\"reference-tab\"), self);\n\n    itemCurrent.addClass(\"childrenActive\");\n    tabCurrent.addClass(\"tabSelected\");\n\n    // Mark the selected tab in the header\n    var activeTab = $(\".bz-wp-tabs-ui:nth-child(\" + (params.activeTab + 1) + \")\", tabHeader).addClass(\"tabSelected\");\n\n    // The new width will be added to the tabSelected in order to complete the 100% on tabs\n    var widthTabSelected = widthRow + (100 - widthRow * tabCountReal);\n    activeTab.css(\"width\", widthTabSelected + \"%\");\n\n    function updateTabSize() {\n      if (params.tabNumber < tabCountPopup) {\n        // Select the current tab\n        $(\".bz-wp-tabs-arrow-container\", self).first().addClass(\"show-pluss\");\n        tabHeader.addClass(\"show-pluss\");\n        activeTab.trigger(\"click\", { origin: \"popUp\" });\n      } else {\n        $(\".bz-wp-tabs-arrow-container\", self).removeClass(\"show-pluss\");\n        tabHeader.removeClass(\"show-pluss\");\n        tabHeader.find(\"> .bz-wp-tabs-ui:last\").addClass(\"bz-wp-no-border\");\n      }\n    }\n\n    // Reorder tabs\n    function reorderTabs(dataRef) {\n\n      var tempTabs = tabHeader.find(\".bz-wp-tabs-ui\");\n      var moveAtTheEnd = true;\n\n      tempTabs.each(function (i, item) {\n        if (dataRef !== item.getAttribute(\"data-reference-tab\") && moveAtTheEnd) {\n          tabHeader.remove(\"[data-reference-tab='\" + dataRef + \"']\");\n          tabHeader.append(item);\n        } else {\n          moveAtTheEnd = false;\n        }\n      });\n    }\n\n    // Change tabs\n    function changeTab(e, params) {\n\n      params = params || {};\n      params.origin = params.origin || \"header\";\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(this).hasClass(\"tabSelected\") && params.origin !== \"popUp\") {\n        return;\n      }\n\n      var dataRef = e.currentTarget.getAttribute(\"data-reference-tab\");\n      var tabChildren = $(dataRef, self);\n\n      activeTab = $(e.currentTarget);\n      // Changes the visibility of the contents of the tabs\n      self.find(\">div.childrenActive\").removeClass(\"childrenActive\");\n      tabChildren.addClass(\"childrenActive\");\n\n      // Add the normal width\n      tabHeader.find(\">div.tabSelected\").removeClass(\"tabSelected\").css(\"width\", widthRow + \"%\");\n\n      if (popUp.css(\"display\") === \"block\") {\n        popUp.toggle();\n      }\n\n      if (params.origin && params.origin === \"popUp\") {\n        activeTab = $(\"[data-reference-tab='\" + dataRef + \"']\", tabHeader);\n        reorderTabs(dataRef);\n      }\n\n      // Add the new width for tabSelected to complete the 100%\n      activeTab.addClass(\"tabSelected\").css(\"width\", widthTabSelected + \"%\");\n      activate(e, params);\n    }\n\n    if (typeof params.domIncluded !== \"undefined\") {\n      // Until the control is added to the DOM can be known widths to add the icon popup         \n      $.when(params.domIncluded).done(function () {\n        updateTabSize();\n      });\n    } else {\n      updateTabSize();\n    }\n\n    // Attach events\n    self.find(\".bz-wp-tabs-arrow-container\").first().bind(\"click\", function (event) {\n\n      // Determine if an item is visible or not\n      var headerWidth = tabHeader.innerWidth() - 29;\n      var totalWidth = 0;\n\n      // Remove the visible elements\n      $(\".bz-container-items-tabs\", popUp).removeClass(\"show\");\n\n      tabHeader.find(\".bz-wp-tabs-ui\").each(function (i, item) {\n\n        totalWidth += $(\":first-child\", item).outerWidth();\n\n        // If \"true\" then it is a tab to display the popup\n        if (totalWidth > headerWidth) {\n\n          popUp.children().each(function (j, pop) {\n            if (pop.textContent === item.textContent) {\n              $(pop).addClass(\"show\");\n              $(\".cell.bz-container-items-tabs\").css(\"border-bottom\", \"\");\n              $(\".cell.bz-container-items-tabs.show\").last().css(\"border-bottom\", \"none\");\n\n              return;\n            }\n          });\n        }\n      });\n\n      event.stopPropagation();\n      event.preventDefault();\n      popUp.toggle();\n    });\n\n    $(\">div.cell\", popUp).bind(\"click\", function (e) {\n      changeTab(e, { origin: \"popUp\" });\n    });\n\n    $(\".bz-wp-tabs-ui\", tabHeader).bind(\"click\", changeTab);\n\n    tabHeader.bind(\"resizeHeader\", function () {\n      updateTabSize();\n    });\n  };\n})(jQuery);","/**\r\n *\r\n * Created by RicardoPD on 8/11/2016.\r\n */\n\n(function ($) {\n  $.fn.helpText = function (options) {\n    options = options || {};\n    options.helpText = options.helpText || \"\";\n    options.dir = typeof options.dir !== \"undefined\" && options.dir !== \"\" ? options.dir : \"inherit\";\n\n    var tmpl =\n    '<div class=\"bz-container-rn-helptext-overlay\">' +\n    '   <div class=\"bz-rn-helptext\" dir=\"#: data.dir #\">' +\n    '       <div class=\"bz-cancel-container\">' +\n    '           <a href=\"\\\\#\" style=\"opacity: 0; width: 0; height: 0\"></a>' +\n    '           <span class=\"bz-mo-icon bz-cancel\"></span>' +\n    '       </div>' +\n    '       <span class=\"bz-rn-helptext-text\">#= data.helpText #</span>' +\n    '   </div>' +\n    '</div>';\n\n    var template = kendo.template(tmpl, { useWithBlock: false });\n    var $html = $(template(options));\n\n    $(this).bind(\"click\", function () {\n      $(\"body\").append($html);\n      $(\"body\").css(\"position\", \"fixed\");\n      $(\"a\", $html).get(0).focus();\n      $(\".bz-cancel\", $html).bind(\"click\", function () {\n        $html.remove();\n        $(\"body\").css(\"position\", \"\");\n      });\n      $(\"a\", $html).bind(\"blur\", function () {\n        $(\".bz-cancel\", $html).click();\n      });\n      $html.addClass(\"active\");\n    });\n  };\n})(jQuery);","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n *   Name: Bizagi Rendering Validation controller \r\n *   Author: Richar Urbano <Richar.Urbano@Bizagi.com\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\n// Override to support the change of the visibility and editability over forms buttons\nbizagi.command.controllers.action.extend(\"bizagi.command.controllers.action\", {}, {\n\n  /**\r\n                                                                                     * Sets a new color for the background of the button\r\n                                                                                     * Applies also to grid cells!\r\n                                                                                     * @param {} xpath \r\n                                                                                     * @param {} color \r\n                                                                                     * @returns {} \r\n                                                                                     */\n  changeButtonBackground: function changeButtonBackground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Sets a new color for the foreground of the render\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Changes the visibility of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**     \r\n      * Changes the editability of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**\r\n      * Helper to override the visibility and editability\r\n      * @param {} xpath \r\n      * @param {} status \r\n      * @returns {} \r\n      */\n  changeFloatingButtonVisibility: function changeFloatingButtonVisibility(xpath, visible) {\n    var self = this;\n    var form = self.form;\n    var guid = xpath.substring(3);\n    var navigation = form.getNavigation();\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var isVisible = bizagi.util.parseBoolean(visible) !== false;\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n\n    if (index !== -1)\n    buttons[index].visible = isVisible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        self.saveChildrenVisualChanges(self);\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n        self.restoreChildrenVisualChanges(self);\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreContainerAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreContainerAppearance: function restoreContainerAppearance(data) {\n    var self = this;\n\n    self.restoreAppearance();\n\n    (data.elements || []).forEach(function (element) {\n      if (element.container) {\n        self.restoreContainerAppearance(element.container);\n      } else if (element.render) {\n        self.restoreElementAppearance(element.render);\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance();\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n\n    delete self.childrenVisualChanges;\n  } });","/*\r\n*   Name: BizAgi Tablet Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.container\", {}, {});","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/*\r\n*   Name: BizAgi Tablet Render Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the render class to adjust to tablet devices\r\n*/\n\nbizagi.rendering.render.extend(\"bizagi.rendering.render\", {}, {\n\n  /*\r\n                                                                *   Update or init the element data\r\n                                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var formContainer = self.getFormContainer();\n    self.formParams = formContainer.getParams();\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    // Call base\n    self.configureHelpText();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var container = self.getControl();\n\n    // Call base\n    self._super();\n    self.configureHelpText();\n\n    // Add styles readonly controls\n    container.addClass(\"bz-rn-read-only\");\n    container.parent().addClass(\"bz-rn-read-only\");\n  },\n\n  configureHelpText: function configureHelpText() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties && properties.helpText && properties.helpText !== \"\") {\n      var containerHelp = self.getContainerHelpText();\n\n      if (containerHelp) {\n        $(containerHelp).helpText({ helpText: properties.helpText, dir: properties.orientation });\n      }\n    }\n  },\n\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      var label = $(\".ui-bizagi-label\", self.element || self.observableElement);\n      if (label.length > 0) {\n        self.label = label;\n      }\n      return label;\n    }\n    return self.label;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control.length === 0) {\n      self.control = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n    return self.control;\n  },\n\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    var self = this;\n    if (!self.controlFiller) {\n      self.controlFiller = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n    return self.controlFiller;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startLoading: function startLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endLoading: function endLoading() {\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    // Set display type\n    if (displayType == \"normal\" ||\n    displayType == \"both\") {\n      return \"ui-bizagi-render-display-normal\";\n\n    } else if (displayType == \"vertical\") {\n      return \"ui-bizagi-render-display-vertical\";\n\n    } else if (displayType == \"reversed\") {\n      return \"ui-bizagi-render-display-reversed\";\n\n    } else if (displayType == \"verticalReversed\") {\n      return \"ui-bizagi-render-display-vertical-reversed\";\n\n    } else if (displayType == \"label\") {\n      return \"ui-bizagi-render-display-label\";\n\n    } else if (displayType == \"value\") {\n      return \"ui-bizagi-render-display-value\";\n    }\n  },\n\n  /*\r\n      *   Transform the display type when using RTL orientation\r\n      */\n  getRTLDisplayType: function getRTLDisplayType(displayType) {\n    return displayType;\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    var self = this,\n    el = self.element;\n\n    // Clean old display type\n    el.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n    removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n\n    el.addClass(self.getDisplayOptionClass(displayType));\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    // Set label align\n    if (alignType == \"left\") {\n      return \"ui-bizagi-render-align-left\";\n    } else if (alignType == \"center\") {\n      return \"ui-bizagi-render-align-center\";\n    } else if (alignType == \"right\") {\n      return \"ui-bizagi-render-align-right\";\n    }\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    var self = this;\n\n    // Get label\n    var label = self.getLabel();\n\n    // Remove old label align\n    label.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set label align\n    label.addClass(self.getAlignClass(alignType));\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    var self = this;\n\n    // Get control\n    var controlFiller = self.getControlFiller();\n\n    // Remove old value align\n    controlFiller.removeClass(\"ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right\");\n\n    // Set value align\n    controlFiller.addClass(self.getAlignClass(alignType));\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n    var self = this;\n    var label = self.getLabel();\n    var properties = self.properties;\n    var controlFiller = self.getControlFiller();\n\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    var labelWidth = properties.labelWidth ? properties.labelWidth != \"0\" ? properties.labelWidth : \"50%\" : null;\n    var valueWidth = properties.valueWidth ? properties.valueWidth != \"0\" ? properties.valueWidth : \"50%\" : null;\n\n    // Normalize percentages\n    if (labelWidth && !valueWidth) {\n      labelWidth = bizagi.util.percent2Number(labelWidth);\n      valueWidth = 100 - labelWidth;\n\n    } else if (!labelWidth && valueWidth) {\n      valueWidth = bizagi.util.percent2Number(valueWidth);\n      labelWidth = 100 - valueWidth;\n\n    } else {\n      labelWidth = bizagi.util.percent2Number(labelWidth);\n      valueWidth = bizagi.util.percent2Number(valueWidth);\n\n      // Check 100% percentage\n      if (labelWidth + valueWidth != 100) {\n        valueWidth = 100 - labelWidth;\n      }\n    }\n\n    // Now apply width\n    label.width(labelWidth + \"%\");\n    controlFiller.width(valueWidth - 0.01 + \"%\");\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.util.tablet.startLoading();\n\n    $.when(self.isReadyToSave()).done(function () {\n      $.when(self.internalSubmitOnChange(data, bRefreshForm)).\n      done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *   Template method to get the control element\r\n      */\n  getContainerHelpText: function getContainerHelpText() {\n    var self = this;\n\n    if (!self.containerHelpText)\n    self.containerHelpText = $(\".bz-container-rn-helptext\", self.element || self.observableElement);\n\n    if (!self.containerHelpText || self.containerHelpText.length === 0)\n    return null;\n\n    return self.containerHelpText;\n  },\n\n  /* \r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n\n    // Call base\n    self._super(message);\n\n    // Wait until element is ready\n    $.when(self.ready()).\n    done(function () {\n      var control = self.getControl();\n\n      if (message && message.length > 0) {\n\n        // Check if this is the first element\n        var bFirstElement = self.element.prev().length === 0 && self.parent === self.getFormContainer();\n\n        // Remove html tags\n        message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n        control.attr(\"data-error\", message);\n        control.addClass(bFirstElement ? \"ui-bizagi-render-error-firstControl\" : \"ui-bizagi-render-error\");\n\n      } else {\n        if (control) {\n          control.attr(\"data-error\", \"\");\n          control.removeClass(\"ui-bizagi-render-error\");\n          control.removeClass(\"ui-bizagi-render-error-firstControl\");\n        }\n      }\n    });\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = result.value;\n    } else if (!bizagi.util.isEmpty(result)) {\n      readOnlyValue = result;\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n      *   Method to process the render the layout\r\n      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    this._super(isLabelFormat, format);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n\n    if (self.properties.required) {\n\n      if (!self.checkRequired([])) {\n        $(\"div.ui-bizagi-render-control-required\", self.getControl()).show();\n      } else {\n        $(\"div.ui-bizagi-render-control-required\", self.getControl()).hide();\n      }\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n    //Remove the required div from the dom in order to have only one any time\n    controlElement.find(\".ui-bizagi-render-control-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      labelElement.text((properties.displayName || \"\") + \" \");\n\n      if (!self.hasValue()) {\n        controlElement.prepend(\"<div class='ui-bizagi-render-control-required'></div>\");\n      } else {\n        controlElement.prepend(\"<div class='ui-bizagi-render-control-required' style='display: none'></div>\");\n      }\n    } else {\n      labelElement.text(properties.displayName || \"\"); //+ ' :'\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var editable = bizagi.util.parseBoolean(argument);\n\n    self._super(argument);\n\n    var renderedElement = self.getRenderedElement();\n\n    if (renderedElement)\n    renderedElement.toggleClass(\"bz-rn-non-editable\", !editable).toggleClass(\"bz-rn-read-only\", !editable);\n  },\n\n  /**\r\n     * in mobiles, don't apply styles to icon's elements\r\n     */\n  getElementsToStylize: function getElementsToStylize(context) {\n    context = $(\"*:not(.bz-mo-icon):not(.bz-rn-container-control-icon):not(.bz-rn-upload-show-menu):not(.ui-bizagi-render-yesno)\", $(context));\n    return context;\n  },\n\n  getFormParams: function getFormParams() {\n    return this.formParams || {};\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\").filter(function (index, ele) {\n      return ele.type !== \"file\" && ele.type !== \"radio\" && ele.type !== \"checkbox\";\n    });\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else {\n      self.setDisplayValue(\"\");\n    }\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data)) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\") {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n *   Name: Bizagi Section Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a section container class for all devices\r\n */\n\n$.Class.extend(\n\"bizagi.rendering.section\",\n{},\n{\n  /**\r\n   * Constructor\r\n   * @param {object} params - section information\r\n   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n    properties.displayAs = properties.displayAs || \"section\";\n  },\n\n  /**\r\n      * Render the trigger of the section.\r\n      * @returns string with html code.\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * Overwritable on devices.\r\n      */\n  renderSectionContent: function renderSectionContent() {},\n\n  /**\r\n                                                             * Return the breadcrumb of the section.\r\n                                                             * @returns An array with breadcrumb. For example: [\"activity\", \"parent section\", \"child section\"]\r\n                                                             */\n  getBreadcrumb: function getBreadcrumb() {\n    var container = this;\n    var breadCrumb = [];\n\n    while (container) {\n      var properties = container.properties || {};\n      var params = container.params || {};\n\n      if (properties.type === \"section\") {\n        var displayName = properties.displayName ? properties.displayName : \"\";\n        breadCrumb.unshift(displayName);\n      } else if (params.type === \"form\") {\n        breadCrumb.unshift(this.getResourceByKey(\"render-section-breadcrumb-main-form\", \"Main form\"));\n      }\n      container = container.parent;\n    }\n    return breadCrumb;\n  },\n\n  /**\r\n      * Gets the display name of the previous section or form.\r\n      * @returns String with the display name\r\n      */\n  getParentDisplayName: function getParentDisplayName() {\n    var self = this;\n    var parent = self.getSectionParent(self.parent);\n    var displayName = \"\";\n\n    //TODO Improve this code implementation \n    if (parent.properties.type == \"form\") {\n      if (parent.properties.formtype && parent.properties.formtype == \"startform\") {\n        displayName = parent.params && parent.params.originalParams && parent.params.originalParams.displayName ? parent.params.originalParams.displayName : \"\";\n      } else\n      {\n        displayName = parent.properties.displayName || parent.params.displayName || parent.params.radNumber || parent.params.idCase;\n      }\n    } else {\n      displayName = parent.properties.displayName || \"\";\n    }\n\n    return displayName;\n  },\n\n  /**\r\n      * Gets the section's parent.\r\n      * @returns Object parent\r\n      */\n  getSectionParent: function getSectionParent(parent) {\n    if (parent.properties.type === \"section\" || !parent.parent) {\n      return parent;\n    } else {\n      return this.getSectionParent(parent.parent);\n    }\n  },\n\n  /**\r\n      * Gets if the section's  orientation is RTL.\r\n      * @returns Object\r\n      */\n  getSectionOrientationRTL: function getSectionOrientationRTL(obj) {\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"ltr\") return false;\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"rtl\") return true;\n    if (obj.parent) return this.getSectionOrientationRTL(obj.parent);\n    return false;\n  } });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n*   Name: BizAgi Nested Form Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a nested form container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.nestedForm\", {}, {});","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n\n    properties.showLetters = bizagi.override && bizagi.override.enableCheck === true && !properties.editable;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n    if (typeof properties.value != \"undefined\" && /[e][-+]/gi.test(properties.value) && Math.abs(parseFloat(properties.value)) < 1) {\n      properties.value = self.value = parseFloat(properties.value).toFixed(properties.numDecimals);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"\", \"\", \"\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Fileprint Class\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /*\r\n                                                   *   Update or init the element data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption && properties.caption != \" \" ? properties.caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: properties.caption });\n\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n     *   get the fileprint url\r\n     */\n  getFilePrintUrl: function getFilePrintUrl(disposition) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFilePrintUrl({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: disposition,\n      sessionId: self.getSessionId() });\n\n\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrs Fernando Muoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Upload Class\r\n *   Author: Elkin Fernando Siabato Cruz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n  /**\r\n   * Constructor\r\n   */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else\n    {//QAF-2210\n      dataFiles = properties.value;\n    }\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else\n      {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    }\n    catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n\n    var formContainer = self.getFormContainer();\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = bizagi.util.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    var returnLink = self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n\n    return returnLink;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var generateLink = $(\".ui-bizagi-button-documentgenerator\", control);\n    if (mode === \"execution\") {\n      generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n    }\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-preview\", control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.showDocumentPreview($(this).data(\"url\"), $(this).data(\"filename\"));\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n    var form = self.getFormContainer();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (form.properties.compatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        var value = self.getValue();\n\n        if (value.length === 0) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    if (properties.advancedSearch && this.getMode() === \"execution\") {\n      properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\n      properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/*\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.slide.form', {}, {\n\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    if (self.slideContainer && self.slideContainer.destroy) {\n      self.slideContainer.destroy();\n    }\n    // Create container\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      * @returns {}\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n    var self = this;\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n\n              self.form.collectRenderValues(data);\n\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n\n      // Stop creating forms like there's no tomorrow\n      if (!self.form) {\n        self.form = new formClass(containerParams);\n      }\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">Save</div>').\n      delegate('div[ordinal=\"0\"]', \"click\", function () {\n        self.form.submitForm();\n      });\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' +\n      bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + \"</div>\").\n      delegate('div[ordinal=\"1\"]', \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        self.renderSlideForm(params);\n      });\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Tablet slide view implementation\r\n *   Author: Richar Urbano - RicharU\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n/**\r\n * @todo-nelson VIEW\r\n * @type {*}\r\n */\n\n$.Class.extend(\"bizagi.rendering.tablet.slide.view\", {}, {\n  /* CONSTRUCTOR\r\n                                                            =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n    self.slideFormDeferred = new $.Deferred();\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  buttons: [],\n\n  processButtons: function processButtons(form) {\n    var self = this;\n\n    var onSaveClick = function onSaveClick() {\n      if (form) {\n        // Perform validations\n        if (form.validateForm()) {\n\n          // Collect data\n          var data = {};\n          form.collectRenderValues(data);\n\n          if (self.slideFormParams.allowGetOriginalFormValues) {\n            data.formValues = form.children;\n          }\n\n          // Add page cache for this form\n          data.idPageCache = form.getPageCache();\n\n          // Call user callback\n          if (self.slideFormParams.onSave) {\n            $.when(self.slideFormParams.onSave(data)).\n            done(function (result) {\n              if (!result || result === true || result.type === \"success\") {\n                // Close slide\n                self.goBack();\n\n                // Resolve deferred\n                self.slideFormDeferred.resolve(data);\n\n              } else if (result.type === \"validationMessages\") {\n                // Add validation messages\n                form.addValidationMessage(result.messages);\n              } else if (result.type === \"error\") {\n                // Add error messages\n                form.addErrorMessage(result.message);\n              }\n            }).fail(function (dataFail) {\n\n              var message = dataFail.responseText ? dataFail.responseText : typeof dataFail === \"string\" ? dataFail : dataFail.toString();\n\n              // Convert String to object\n              if (typeof message === \"string\") {\n                try {\n                  message = JSON.parse(message).message;\n                } catch (e) {\n                  message = message.match(/\"message\":(.*)\",/)[0];\n                  message = message.substr(11, message.length - 13);\n                }\n\n              } else if (!message.message) {\n                message = dataFail;\n              }\n\n              form.validateForm();\n              form.clearValidationMessages();\n              form.addValidationMessage(message);\n\n              // Close slide\n              self.goBack();\n\n              //reject defered\n              self.slideFormDeferred.resolve(data);\n            });\n\n          } else {\n            // Close slide\n            self.goBack();\n\n            //reject defered\n            self.slideFormDeferred.reject();\n          }\n        }\n      }\n    };\n\n    var onCancelClick = function onCancelClick() {\n      // Close slide\n      self.goBack();\n      //reject defered\n      self.slideFormDeferred.reject();\n    };\n\n    form.buttons = [$.extend(form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      callback: onSaveClick }),\n\n    $.extend(form.buttons[1] || {}, {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      callback: onCancelClick })];\n\n\n\n    // If form is editable, add \"save\" button\n    if (!self.slideFormParams.showSaveButton) {\n      form.buttons.shift();\n    }\n\n    //self._renderButtons(form);\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(self.slideForm, params);\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(slideForm, params) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.loading.start();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).\n    then(function (data) {\n      /*** SUCCESS FILTER **/\n      if (params.recordXPath) {\n        data.form.properties.recordXpath = params.recordXPath;\n      }\n\n      // Apply editable param\n      if (!self.slideFormParams.showSaveButton || params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (typeof data.form.properties !== \"undefined\") {\n        data.form.properties.orientation = self.slideFormParams.orientation || \"ltr\";\n      }\n\n      // Render dialog template\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.container });\n\n\n      self.form.params = params.formParams;\n\n      self.processButtons(self.form);\n\n      // Return rendering promise\n      return self.form.render();\n\n    }).done(function (element) {\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.container.id);\n      }\n\n      self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (data, refreshParams) {\n        refreshParams.formParams = refreshParams.params || self.form.params;\n        self.render(refreshParams);\n      });\n    }).fail(function (message) {\n      /*** Form load failure ***/\n\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.container.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.container.id);\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n    return defer.promise();\n  },\n\n  // Go back and destroy\n  goBack: function goBack() {\n    this.container.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      */\n  _renderButtons: function _renderButtons(form) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(form.buttons, function (ui, value) {\n      $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\n      value.callback).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","/*\r\n *   Name: BizAgi Tablet slide grid view implementation\r\n *   Author: Richar Urbano - RicharU\r\n *   Comments:\r\n *   -   Serves as an slide view that will show hidden columns for a grid\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view.grid\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                                 =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container\n    self.container = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params\r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderSlideForm(self.slideForm, params);\n\n    self.slideFormDeferred.resolve();\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(slideForm, params) {\n\n    var self = this;\n    var data = self.transformData(params);\n\n    // Load template and data\n    self.form = self.renderFactory.getContainer({\n      type: \"form\",\n      data: data.form,\n      navigation: self.slideFormParams.navigation,\n      view_container: self.container });\n\n\n    self.form.buttons = [$.extend(self.form.buttons[0] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 0,\n      \"action\": \"save\",\n      \"save\": true,\n      \"style\": \"\",\n      // This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        self.goBack();\n        // Resolve deferred with form data\n        var data = {};\n        self.form.collectRenderValues(data);\n        self.slideFormDeferred.resolve(data);\n      } }),\n\n    $.extend(self.form.buttons[1] || {},\n    {\n      \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      \"actions\": [\"submitData\", \"refresh\"],\n      \"submitData\": true,\n      \"refresh\": true,\n      \"ordinal\": 1,\n      \"action\": \"back\",\n      \"save\": true,\n      \"style\": \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: function callback() {\n        // Close slide\n        self.goBack();\n        self.slideFormDeferred.reject();\n      } })];\n\n\n\n    // Add save button if the form is editable\n    if (!self.slideFormParams.allowEdition) {\n      self.form.buttons.shift();\n    }\n\n    //self._renderButtons(self.form);\n\n    $.when(self.form.render()).\n    done(function (element) {\n\n      // Append form in the slide view\n      self.container.element.html(element);\n\n      self.slideFormParams.navigation.navigate(self.container.id);\n\n      self.container.setNavigationButtons(self.form);\n\n      // Remove default form buttons\n      $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\n\n      // Add Button\n      $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    });\n  },\n\n  /**\r\n      * Transform data into a JSON standard rendering format\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  transformData: function transformData(params) {\n    var self = this;\n    var row = params.row;\n    var columns = params.columns;\n\n    // Set xpath context\n    var xpathContext = params.xpathContext.length > 0 ?\n    params.xpathContext + \".\" + params.xpath + \"[\" + params.row[0] + \"]\" :\n    params.xpath + \"[id=\" + params.row[0] + \"]\";\n\n    var data = {\n      type: \"form\",\n      form: {\n        elements: [],\n        pageCacheId: params.pageCacheId,\n        sessionId: params.sessionId,\n        properties: {\n          xpathContext: xpathContext },\n\n        actions: self.transformActions(params.xpath, params.actions),\n        validations: self.transformValidations(params.xpath, params.validations) } };\n\n\n\n    $.each(row, function (i, item) {\n\n      // Skip first data (key not need to be rendered)\n      if (i > 0) {\n        var element = { render: { properties: $.extend({}, columns[i - 1].properties) } };\n\n        // Hack properties\n        element.render.properties.type = self.mapRenderType(element.render.properties.type);\n        element.render.properties.displayType = 'both';\n        if (self.slideFormParams.allowEdition == false) element.render.properties.editable = false;\n        element.render.properties.value = self.mapValue(element.render.properties.type, item);\n        if (element.render.properties.recalculate) element.render.properties.data = null;\n\n        // Check columnVisible property\n        if (typeof element.render.properties.columnVisible != \"undefined\") {\n          element.render.properties.visible = element.render.properties.columnVisible;\n        }\n\n        // Fix upload columns\n        if (element.render.properties.type == \"upload\") {\n          element.render.properties.isColumn = true;\n        }\n\n        // Fix search columns\n        if (element.render.properties.type == \"search\") {\n          var value = element.render.properties.value;\n          if (value.length > 0) {\n            value = [].concat(value[0]);\n            element.render.properties.value = {\n              id: value[0],\n              label: value[1],\n              additionallabel: value[2] || undefined };\n\n          }\n        }\n\n\n        // Add element\n        data.form.elements.push(element);\n      }\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Map column renderType into normal render\r\n      * @param {} type\r\n      * @returns {}\r\n      */\n  mapRenderType: function mapRenderType(type) {\n    type = type.substring(6, type.length);\n\n    //some exceptions\n    if (type === \"FormLink\") {\n      return \"formLink\";\n    }\n\n    type = type.toLowerCase();\n    return type;\n  },\n\n  /**\r\n      * Method to traslate grid values into render values\r\n      * @param {} type\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  mapValue: function mapValue(type, value) {\n    if (type === \"combo\" || type === \"radio\") {\n      if (value && value.length > 0) {\n\n        // Transform the value property\n        return [{\n          id: value[0][0],\n          value: value[0].length > 2 ?\n          $.grep(value[0], function (item, i) {\n            return i !== 0;\n          }) :\n          value[0][1] }];\n\n\n      } else {\n        return null;\n      }\n    }\n\n    // Else: Don't do anything\n    return value;\n  },\n\n  /**\r\n      * Parse form actions into just grid form actions\r\n      * @param {} xpath\r\n      * @param {} actions\r\n      * @returns {}\r\n      */\n  transformActions: function transformActions(xpath, actions) {\n    var self = this;\n    var gridActions = [];\n\n    if (bizagi.util.isEmpty(actions)) return gridActions;\n\n    $.each(actions, function (i, action) {\n      var bDependencyFound = false;\n      for (var i = 0; i < action.dependencies.length; i++) {\n        if (action.dependencies[i].indexOf(xpath) != -1) {\n          bDependencyFound = true;\n        }\n      }\n\n      if (bDependencyFound) {\n        var newAction = JSON.parse(JSON.encode(action));\n\n        // Replace dependencies\n        for (var i = 0; i < newAction.dependencies.length; i++) {\n          newAction.dependencies[i] = newAction.dependencies[i].replaceAll(xpath + \"[].\", \"\");\n        }\n\n        // Replace conditions\n        self.transformConditions(xpath, newAction.conditions);\n\n        // Replace commands\n        self.transformCommands(xpath, newAction.commands);\n        self.transformCommands(xpath, newAction.elseCommands);\n\n        // Add to grid actions\n        gridActions.push(newAction);\n      }\n    });\n\n    return gridActions;\n  },\n\n  /*\r\n      *   Parse form validations into just grid form validations\r\n      */\n  transformValidations: function transformValidations(xpath, validations) {\n    var self = this;\n    var gridValidations = [];\n\n    if (bizagi.util.isEmpty(validations)) return gridValidations;\n\n    $.each(validations, function (i, validation) {\n      var newValidation = JSON.parse(JSON.encode(validation));\n\n      // Replace conditions\n      self.transformConditions(xpath, newValidation.conditions);\n\n      // Add to grid actions\n      gridValidations.push(newValidation);\n\n    });\n\n    return gridValidations;\n  },\n\n  /**\r\n      * Parse a single condition or a complex condition in order to prepare a grid action/validation\r\n      * @param {} xpath\r\n      * @param {} condition\r\n      * @returns {}\r\n      */\n  transformConditions: function transformConditions(xpath, condition) {\n    var self = this;\n\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        self.transformConditions(xpath, condition.expressions[i]);\n      }\n\n    } else if (condition.simple) {\n      self.transformConditions(xpath, condition.simple);\n\n    } else if (condition.complex) {\n      self.transformConditions(xpath, condition.complex);\n\n    } else {\n      if (condition.xpath) {\n        condition.xpath = condition.xpath.replaceAll(xpath + \"[].\", \"\");\n        if (condition.argumentType == 'xpath') {\n          condition.argument = condition.argument.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Parse a command action to prepare a grid action\r\n      * @param {} xpath\r\n      * @param {} commands\r\n      * @returns {}\r\n      */\n  transformCommands: function transformCommands(xpath, commands) {\n    var self = this;\n    var refreshIndex = null;\n    if (commands == null || commands.length === 0) return;\n\n    for (var i = 0; i < commands.length; i++) {\n      if (commands[i].command === \"refresh\") {\n        refreshIndex = i;\n      } else {\n        if (commands[i].xpath) {\n          commands[i].xpath = commands[i].xpath.replaceAll(xpath + \"[].\", \"\");\n        }\n        if (commands[i].argumentType === 'xpath') {\n          commands[i].argument = commands[i].argument.replaceAll(xpath + \"[].\", \"\");\n        }\n      }\n    }\n\n    if (refreshIndex != null) {\n      commands.splice(i, 1);\n    }\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.container.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      * @param {} options\r\n      * @returns {}\r\n      */\n  _renderButtons: function _renderButtons(form) {\n    var self = this;\n    var content = $(\"<div class='bz-slide-button-container'></div>\");\n\n    $.each(form.buttons, function (ui, value) {\n      var button = $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\n      value.callback).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","\n/*\r\n*   Name: Bizagi Tablet slide view Upload implementation\r\n*   Author: Richar Urbano - RicharU\r\n*   Comments:\r\n*   -   Serves as an slide view that will show an upload file without exiting the application\r\n*/\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.tablet.slide.view.upload\", {}, {\n  /* CONSTRUCTOR\r\n                                                                  =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.slideFormDeferred = new $.Deferred();\n    this.slideFormParams = slideFormParams || {};\n\n    // Create container    \t\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n\n    self.processButtons().\n    done(function (data) {\n      self.slideFormDeferred.resolve(data);\n    }).fail(function () {\n      self.slideFormDeferred.reject();\n    });\n  },\n\n  /**\r\n      * Shows the slideForm form container in the browser \r\n      * @returns {} Returns a promise that the dialog will be closed\r\n      */\n  processButtons: function processButtons() {\n    var self = this;\n    var dfd = new $.Deferred();\n\n    // Create buttons object\n    var slideOptions = { buttons: [] };\n\n    // Add cancel button by default\n    var onClose = function onClose() {\n      // Close slide\n      self.goBack();\n      //reject defered\n      dfd.reject();\n    };\n    slideOptions.buttons.push({\n      text: bizagi.localization.getResource(\"workportal-case-dialog-box-close\"),\n      caption: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      actions: [\"submitData\", \"refresh\"],\n      submitData: false,\n      refresh: false,\n      ordinal: 0,\n      action: \"back\",\n      save: true,\n      style: \"\",\n      //This callback avoid to call the default processButton in the form\n      callback: onClose,\n      click: onClose });\n\n\n    // Apply dialog plugin\n    this.slideFormParams = $.extend(slideOptions, this.slideFormParams);\n    self._renderButtons(this.slideFormParams);\n\n    // Return promise\n    return dfd.promise();\n  },\n\n  /**\r\n      * Render the grid view form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params \r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n\n    // Fill content\n    self.renderUploadFile(self.slideForm, params);\n\n    // Return promise\n    return self.slideFormDeferred.promise();\n  },\n\n  /* Render the file inside a frame\r\n     =====================================================*/\n  renderUploadFile: function renderUploadFile(slideForm, params) {\n    var self = this;\n    var template = self.renderFactory.getCommonTemplate(\"uploadSlide\");\n\n    // Render template\n    var content = $.kendoTmpls(template, { url: params.url });\n\n    // Append content in the slide view\n    self.slideContainer.element.html(content);\n\n    // Navigate on view\n    self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    // Add Button\n    // $(\".ui-bizagi-button-container\", self.slideContainer).append(self.buttonContainer);\n\n    // No need to create a real form cause it just shows the back button\n    var virtualForm = $.extend({\n      originalProperties: {\n        uniqueId: 101,\n        id: 101 } },\n\n    self.slideFormParams);\n    virtualForm.container = self.slideContainer.element;\n\n    self.slideFormParams.navigation.setNavigationButtons(virtualForm);\n\n    content.find(\".ui-slide-upload-link\").click(function () {\n      $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-tablet-slide-upload-confirmation\"))).\n      done(function () {\n        window.location.href = params.url;\n      });\n    });\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {} \r\n      */\n  goBack: function goBack() {\n    var self = this;\n\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Process render buttons\r\n      * @param {} options \r\n      * @returns {} \r\n      */\n  _renderButtons: function _renderButtons(options) {\n    var self = this;\n    var content = $(\"<div class=\\\"bz-slide-button-container\\\"></div>\");\n\n    $.each(options.buttons, function (ui, value) {\n      $(\"<div class=\\\"action-button\\\">\" + value.text + \"</div>\").click(\n      value.click).\n      appendTo(content);\n    });\n\n    self.buttonContainer = content;\n  } });","/*\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend('bizagi.rendering.tablet.startForm', {}, {\n\n  /* CONSTRUCTOR\r\n                                                           =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container        \n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Handlers kendo view\r\n      * @returns {} \r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n    var self = this;\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {} \r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /**\r\n      * Render the form\r\n      * The params are the same that will be send to the ajax service\r\n      * @param {} params \r\n      * @returns {} Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getStartForm(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n\n              self.form.collectRenderValues(data);\n\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result == null || result == true || result.type == \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type == \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type == \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n\n      self.form = new formClass(containerParams);\n\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams = $.extend({\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams, { idStartScope: self.form.properties.idStartScope });\n\n        self.renderSlideForm(refreshParams);\n      });\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": self.slideFormParams.saveButtonLabel,\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" })];\n\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.slideContainer.id);\n      }\n\n      $('.ui-bizagi-button-container div', self.form.container).remove();\n\n      $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">' + (self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\")) + '</div>').delegate('div[ordinal=\"0\"]', 'click', function () {\n        self.form.submitForm();\n      });\n\n      $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' + bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + '</div>').delegate('div[ordinal=\"1\"]', 'click', function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      //self.view.scroller.reset();\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/*\r\n*   Name: BizAgi Tablet Form Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*   -   Will apply a desktop form template\r\n*/\n\n// Auto extend\nbizagi.rendering.form.extend(\"bizagi.rendering.form\", {\n\n  /**\r\n                                                         * CONSTRUCTOR\r\n                                                         * \r\n                                                         * @param {} params \r\n                                                         * @returns {} \r\n                                                         */\n  init: function init(params) {\n    var self = this;\n    params = params || {};\n    // Define variables\n    self.warnings = {};\n    self.errors = {};\n\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.configureMediaQueryHandlers();\n      self.readyDeferred.resolve();\n    });\n\n\n    //Event to notify the native code the form will be showing a modal view \n    self.bind(\"modalViewDidAppear\", function () {\n      self.params.navigation.modalViewDidAppear();\n    });\n\n    //Event to notify the native code the form will be hiding a modal view \n    self.bind(\"modalViewDidDisappear\", function () {\n      self.params.navigation.modalViewDidDisappear();\n    });\n\n    // Set events for complex gateway interface - Tablet flat\n    $(\".bz-rn-cg-checkbox-control\", complexGatewayContainer).bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n  },\n\n  /**\r\n      * Just to tablet devices is called after the form is in the dom\r\n      * in order to define if the form must be showed vertical\r\n      * @param {}\r\n      * @returns {}\r\n      */\n  configureMediaQueryHandlers: function configureMediaQueryHandlers() {\n    var self = this;\n    var mediaquery = window.matchMedia(\"(max-width: 600px)\");\n    function handleOrientationChange(mediaquery) {\n      if (mediaquery.matches) {\n        // mediaquery dentro de 600                \n        if (self.container) {\n          $(\".ui-bizagi-render\", self.container).addClass(\"vertical\");\n        }\n      } else {\n        // mediaquery fuera de 600                \n        if (self.container) {\n          $(\".ui-bizagi-render\", self.container).removeClass(\"vertical\");\n        }\n      }\n    }\n    mediaquery.addListener(handleOrientationChange);\n    handleOrientationChange(mediaquery);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed\r\n      * \r\n      * @param {} container \r\n      * @returns {} \r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var properties = self.properties;\n    self._super(container);\n    var buttons = self.getButtons();\n\n    //disable overflow-scrolling touch untill the form is loaded QA-2178\n    if (bizagi.util.detectDevice() != \"tablet_android\") {\n      $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n    }\n\n    // Show warnings\n    if (!bizagi.util.isObjectEmpty(self.warnings)) {\n      var warningContainer = $('<ul class=\"ui-bizagi-form-warnings\"></ul>');\n      for (var key in self.warnings) {\n        warningContainer.append($('<li>' + key + '</li>'));\n      }\n\n      // Add button\n      $(\"<button>\" + \"X\" + \"</button>\").appendTo(warningContainer);\n\n      // Append to body \n      warningContainer.prependTo(self.container);\n      warningContainer.click(function () {\n        warningContainer.detach();\n      });\n    }\n\n    // Show errors\n    if (!bizagi.util.isObjectEmpty(self.errors)) {\n      var errorContainer = $('<ul class=\"ui-bizagi-form-errors\"></ul>');\n      for (var ekey in self.errors) {\n        errorContainer.append($('<li>' + ekey + '</li>'));\n      }\n\n      // Add button\n      $(\"<button>\" + \"X\" + \"</button>\").prependTo(errorContainer);\n\n      // Append to body \n      errorContainer.appendTo(self.container);\n      errorContainer.click(function () {\n        errorContainer.detach();\n      });\n\n      // Hide routing buttons when an error was found\n      $.each(properties.buttons, function (i, button) {\n        if (button.routing) {\n          self.getButtons().eq(i).prop(\"disabled\", true);\n        }\n      });\n    }\n\n    //Set button length\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons) {\n\n      $(document).data(\"auto-save\", \"auto-save\");\n\n      //bind event auto-save\n      $(document).unbind(\"save-form\").bind(\"save-form\", function (e, deferredSave) {\n        self.autoSaveEvents(deferredSave);\n      });\n\n      //bind event beforeunload\n      $(window).unbind('beforeunload').bind('beforeunload', function (e) {\n        var newData = {};\n        self.collectRenderValues(newData);\n\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data('auto-save'))\n        return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n\n        return;\n      });\n\n    }\n\n    //enable overflow-scrolling touch to avoid black frame over the form QA-2178\n    if (bizagi.util.detectDevice() != \"tablet_android\") {\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n    }\n\n  },\n  /**\r\n      * Auto Save Events\r\n      * \r\n      * @param {} deferredSave \r\n      * @param {} saveBox \r\n      * @returns {} \r\n      */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n    var hasChanges = false;\n\n    if (bizagi.util.isOfflineForm({ context: self })) {\n      data = [];\n      self.hasChanged(data);\n      hasChanges = !bizagi.util.isEmpty(data);\n\n    } else {\n      self.collectRenderValues(data);\n      hasChanges = !$.isEmptyObject(data);\n    }\n\n\n    if (hasChanges) {\n\n      $.when(bizagi.showSaveBox(bizagi.localization.getResource(\"confirmation-savebox-message1\"), \"Bizagi\", \"warning\")).done(function () {\n        self.saveForm();\n        deferredSave.resolve();\n      }).fail(function () {\n        deferredSave.resolve();\n      });\n\n    } else {\n      deferredSave.resolve();\n    }\n  },\n\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    // Assemble the actions\n    var actions = [];\n    var defer = $.Deferred();\n    var submitDataAction = null,executeButtonAction = null,performAction = null,checkpointAction = null,commitAction = null;\n    var data;\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      performAction = self.dataService.submitData({\n        action: buttonProperties.action,\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n\n      performAction.tag = \"performAction\";\n    }\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n\n      //Validates if the method CHECKPOINT is supported\n      if (checkpointAction) {\n        actions.push(checkpointAction);\n      }\n\n      actions.push(executeButtonAction);\n\n      ///Validates if the method COMMIT is supported\n      if (commitAction) {\n        actions.push(commitAction);\n      }\n\n      actions.push(executeButtonAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    $.when(flowControlDeferred).done(function () {\n      bizagi.util.tablet.startLoading();\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // Find validations\n        var bHasValidations;\n        $.each(responses, function (i, response) {\n          if (response.result.type == \"validationMessages\") {\n            // Something went wrong, we gotta display messages in notifications grid\n            self.addValidationMessage(response.result.messages);\n            bHasValidations = true;\n          }\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else\n        {\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        //Removes the nonSupportedMethods to prevent further iterations\n        delete self.nonSupportedMethods;\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler({ \"error\": typeof response === \"undefined\" ? bizagi.localization.getResource(\"workportal-general-error\") : response });\n          defer.reject(response);\n        }\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n    return defer.promise();\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(id) {\n    var self = this;\n    if (bizagi.util.validateFeatureSupport(\"commitRollbackActions\")) {\n      return self._super(id);\n    }\n\n    return null;\n  },\n\n  prepareCommitAction: function prepareCommitAction(id) {\n    var self = this;\n    if (bizagi.util.validateFeatureSupport(\"commitRollbackActions\")) {\n      return self._super(id);\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Retorna el pane donde se pint la forma para facilitar navegacion de kendo\r\n      * @returns {*}\r\n      */\n  getPane: function getPane() {\n    var self = this;\n    return self.pane;\n  },\n\n  /* TEMPLATE METHOD TO GET THE BUTTONS OBJECTS\r\n      ======================================================*/\n  getButtons: function getButtons() {\n    var self = this;\n    var container = self.container;\n\n    return $(\".ui-bizagi-button-container .action-button\", container);\n  },\n\n  processButtons: function processButtons() {\n    var self = this;\n    var params = self.getParams();\n\n    //si no es con un if es con un publish\n    if (params && params.processButtons) {\n      var handler = params.processButtons;\n      handler(self);\n    }\n\n    var properties = self.properties;\n    var buttons = self.getButtons();\n\n    properties.buttons = self.buttons || buttons;\n\n    //to cache a submit Data Buttom if exist\n    self.saveButton = null;\n    self.nextButton = null;\n\n    //Set saveButton and nextButton if exist\n    for (var i = 0, length = properties.buttons.length; i < length; i++) {\n      if (properties.buttons[i].action == 'save') {\n        self.saveButton = properties.buttons[i];\n      } else if (properties.buttons[i].action == 'next') {\n        self.nextButton = properties.buttons[i];\n      }\n    }\n\n    var navigation = self.getNavigation();\n\n    if (typeof navigation !== \"undefined\") {\n      //si tiene un viewConteiner sera proque es una forma dentro de container de edicion\n      var view_container = self.getViewContainer();\n      if (typeof view_container !== \"undefined\") {\n        view_container.setNavigationButtons(self);\n      } else\n\n      {\n        navigation.setNavigationButtons(self);\n      }\n    }\n\n    self._super();\n  },\n\n  /*\r\n      *   Refresh the current form\r\n      */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var params = self.getParams();\n    var deferred = $.Deferred();\n    var options;\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\",\n      navigation: params.navigation,\n      view_container: params.view_container };\n\n\n    if (params.postRenderEdit || params.processButtons) {\n      options.isOfflineForm = self.params.isOfflineForm || false;\n      options.formsRenderVersion = self.params.formsRenderVersion || 0;\n      options.postRenderEdit = params.postRenderEdit;\n      options.processButtons = params.processButtons;\n      options.originalParams = params.originalParams || {};\n      options.getButtons = params.getButtons;\n    }\n\n    $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n\n  checkWidgetsData: function checkWidgetsData() {\n    var popupResponse = null;\n    if (bizagi.workportal.tablet.popup) {\n      if (bizagi.workportal.tablet.popup.instance) {\n        if (bizagi.workportal.tablet.popup.instance.getResponseValues) {\n          popupResponse = bizagi.workportal.tablet.popup.instance.getResponseValues(bizagi.workportal.tablet.popup.instance.getResponseValuesParams);\n          if (popupResponse === null) {\n            bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-complexgateway-path\"),\n            bizagi.localization.getResource(\"workportal-widget-complexgateway-error\"));\n            return -1;\n          } else {\n            bizagi.workportal.tablet.popup.instance.dontClose = false;\n            bizagi.workportal.tablet.popup.instance.close();\n          }\n        }\n      }\n    }\n\n    return popupResponse;\n  },\n\n  repaintComplexGateway: function repaintComplexGateway() {\n    var self = this;\n    if (self.focus !== undefined) {\n      if (self.focus.idCaseObject !== undefined) {\n        if (self.focus.idCaseObject.isComplex !== undefined) {\n          self.dataService.getWorkitems({\n            idCase: self.focus.idCaseObject.idCase }).\n          done(function (data) {\n            if (data.workItems.length == 1) {\n              if (data.workItems[0].taskType == \"ComplexGateway\") {\n                var transitions = data.workItems[0].transitions;\n\n                self.currentPopup = \"complexgateway\";\n                $(document).triggerHandler(\"popupWidget\", {\n                  widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY,\n                  options: {\n                    transitions: transitions,\n                    sourceElement: \".ui-bizagi-form\",\n                    insertAfter: \".ui-bizagi-form .ui-bizagi-button-container\",\n                    height: 'auto',\n                    offset: \"8 0\", //x y\n                    activeScroll: false,\n                    dontClose: true,\n                    closed: function closed() {\n                      self.currentPopup = null;\n                    } } });\n\n\n              }\n            }\n          });\n        }\n      }\n    }\n  },\n\n  /* METHOD TO ADD WARNINGS TO THE FORM\r\n     ======================================================*/\n  addWarning: function addWarning(message) {\n    var self = this;\n    self.warnings[message] = message;\n  },\n\n  /* METHOD TO ADD ERRORS TO THE FORM\r\n     ======================================================*/\n  addError: function addError(message) {\n    var self = this;\n    self.errors[message] = message;\n  },\n\n  /*  Executes a single button action\r\n     ======================================================= */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    // Disable routing button\n    if (!bizagi.util.isObjectEmpty(self.errors)) {\n      deferred.resolve();\n      if (bizagi.util.parseBoolean(buttonProperties.routing))\n      return deferred.promise();\n    }\n\n    // Call base\n    return this._super(buttonProperties);\n  },\n\n\n  getNavigation: function getNavigation() {\n    var params = this.getFormContainer().getParams();\n    return params.navigation;\n  },\n\n  getViewContainer: function getViewContainer() {\n    var params = this.getFormContainer().getParams();\n    return params.view_container;\n  },\n\n  isFloatingButtonsEnabled: function isFloatingButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFloatingButtonsEnabled();\n  },\n\n  /**\r\n     *   Adds an overlay to the form, and sets a waiting message\r\n     *\r\n     *   @argument {bool} delay Apply delay\r\n     */\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  },\n\n  dispose: function dispose(params) {\n    var self = this;\n\n    // Active refresh on tablet\n    if (typeof params === \"undefined\" || typeof params.isRefresh === \"undefined\" || params.isRefresh == false) {\n      self._super();\n    }\n  },\n\n  failHandler: function failHandler(error) {\n    var self = this;\n    self._super(error);\n\n    var error_obj = {};\n    try {\n      error_obj = JSON.parse(error) || {};\n    } catch (e) {\n      error_obj = error.length && error.length > 1 ? error[0] : error;\n    } finally {\n\n      //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n      if (error_obj.error) error_obj = error_obj.error;\n      if (error_obj.error) error_obj = error_obj.error;\n\n      //trigger the routing event in order to refresh the case\n      if (typeof error_obj.code !== \"undefined\" && error_obj.code == \"AUTH_ERROR\") {\n\n        $.notifier.add({\n          class_name: \"error\",\n          title: \"Error\",\n          text: bizagi.localization.getResource(\"render-idle-expired-error\", \"Idle timer expired. For safety reasons this view will be refreshed automatically in 5 seconds. Note that any unsaved data is lost.\").replace(\"%s\", \"5\"),\n          sticky: false,\n          time: 5000 });\n\n\n        setTimeout(function () {\n          self.triggerHandler(\"routing\", {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem });\n\n        }, 5000);\n      }\n    }\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    var html = $.kendoTmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() == \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Desktop Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*/\n\n// Auto extend\nbizagi.rendering.panel.extend(\"bizagi.rendering.panel\", {}, {});","/*\r\n*   Name: BizAgi Tablet Tab Container Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tab.extend(\"bizagi.rendering.tab\", {\n  VISIBLE_TABS: 4 },\n{\n\n  /* POST RENDER CONTAINER ACTIONS\r\n  =================================================*/\n  postRenderContainer: function postRenderContainer(tab) {\n    var self = this;\n    self._super(tab);\n\n    // Apply any plugin or custom code to implement smartphone tabs\n    self.suscribeMethods();\n  },\n\n  suscribeMethods: function suscribeMethods() {\n    var self = this;\n    var tab = self.container;\n\n    //tabs\n    $(tab).bztabs({\n      activeTab: self.activeTab !== undefined && self.activeTab !== null ? self.activeTab : 0,\n      tabNumber: self.Class.VISIBLE_TABS,\n      domIncluded: self.ready(),\n      activate: function activate(event, ui) {\n        self.activeTab = $(event.currentTarget) ? $(event.currentTarget).data(\"index\") : 0;\n\n        var index = self.activeTab;\n        var form = self.getFormContainer();\n        var selectedTab = {};\n        selectedTab[self.children[index].parent.properties.id] = index;\n        form.setParam(\"selectedTabs\", selectedTab);\n      } });\n\n  },\n\n  /**\r\n      * Checks the visibility of the plus icon after partial refresh of itemTabs\r\n      */\n  checkPlusVisibility: function checkPlusVisibility() {\n    var self = this;\n    var visible_tabs = $(\".bz-header_select > .bz-wp-tabs-ui:not(:hidden)\", self.container);\n    if (visible_tabs.length <= self.Class.VISIBLE_TABS) {\n      $(\".bz-wp-tabs-arrow-container.show-pluss\", self.container).hide();\n    } else\n    {\n      $(\".bz-wp-tabs-arrow-container.show-pluss\", self.container).show();\n    }\n  } });","/*\r\n*   Name: BizAgi Tablet Panel Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tabItem.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                                   *   Constructor\r\n                                                                   */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Set tab ready deferred\n    self.tabReadyDeferred = new $.Deferred();\n    self.loadingDeferred = new $.Deferred();\n    self.tabActiveDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * Change selected item \r\n      * \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      // Changes item\n      var tabContainer = self.parent;\n      if (tabContainer && tabContainer.container.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.container.tabs(\"option\", \"active\", self.container.data(\"tab-counter\"));\n      }\n    });\n  },\n\n  /**\r\n      * Focus on container\r\n      * \r\n      * @returns {} \r\n      */\n  focus: function focus() {\n    var self = this;\n\n    // Set this tab as an active container\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      *  Hides / Show container \r\n      * \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var tabContainer = self.parent.container;\n    var activeTab = self.parent.getActiveTab();\n\n    var id = \"ui-bizagi-tab-\" + properties.id;\n    var header = $(\".bz-wp-tabs-item[data-reference-tab='#\" + id + \"']\", tabContainer);\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    $.when(self.ready()).\n    done(function () {\n      // Hide - show the render\n      if (properties.visible) {\n        self.container.css(\"display\", \"\");\n        self.setAsActiveContainer();\n        if (header && header.css(\"display\", \"none\")) {\n          var headerShow = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerShow && headerShow.css(\"display\", \"\");\n        }\n\n      } else {\n        self.container.hide();\n        if (header && header.css(\"display\", \"block\")) {\n          var headerHide = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerHide && headerHide.hide();\n        }\n      }\n    }).always(function () {\n      if (tabContainer && tabContainer.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.tabs(\"option\", \"active\", activeTab);\n      }\n      self.parent.checkPlusVisibility();\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Horizontal Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.horizontal.extend(\"bizagi.rendering.horizontal\", {}, {\n  // TODO: Review Scenario\n  /*\r\n  postRenderContainer: function(container) {\r\n      var self = this;\r\n      var children = self.children;\r\n      var iCount = children.length;\r\n        // Call base\r\n      self._super(container);\r\n        //console.log(\"bizagi.rendering.horizontal: \" + iCount);\r\n        // Process each child\r\n      $.each(children, function(i, child) {\r\n          // Process width\r\n          var renderWidth = child.properties.width;\r\n          if (renderWidth == null || renderWidth.length == 0) {\r\n              // Set default size\r\n              renderWidth = 100;\r\n              // renderWidth = 100 / iCount;\r\n          } else {\r\n              // Set custom size\r\n              renderWidth = bizagi.util.percent2Number(renderWidth);\r\n          }\r\n            // Set width\r\n          if (i != (iCount - 1)) {\r\n              child.getRenderedElement().css({ width: renderWidth + \"%\" });\r\n          } else {\r\n              // Set class for last render\r\n              child.getRenderedElement().addClass(\"ui-bizagi-render-last\");\r\n              child.getRenderedElement().css({ width: (renderWidth - 3.3) + \"%\" });\r\n          }\r\n      });\r\n  }\r\n  */});","/*\r\n*   Name: BizAgi Tablet Accordion Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.accordion.extend(\"bizagi.rendering.accordion\", {}, {});","/*\r\n*   Name: BizAgi Tablet Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.accordionItem.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n\n  /* \r\n                                                                              *   Change selected item \r\n                                                                              */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n\n  },\n\n  /* \r\n     *   Focus on container\r\n     */\n  focus: function focus() {\n    var self = this;\n\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  } });","/*\r\n*   Name: BizAgi Tablet Group Extension\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.group.extend(\"bizagi.rendering.group\", {}, {\n  /* \r\n                                                              *   Template method to implement in each device to customize each container after processed\r\n                                                              */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    self._super(group);\n\n    group = self.container;\n\n    // Define expanded property\n    properties.expanded = true;\n\n    self.subscribeOnTouch();\n  },\n\n  /**\r\n     * Check if group its open\r\n     * \r\n     * @return boolean\r\n     */\n  isOpen: function isOpen() {\n    var self = this;\n    var group = self.container;\n\n    return $(\".childrenContainer\", group).is(\":visible\") ? true : false;\n  },\n\n  /* Focus on container*/\n  focus: function focus() {\n    var self = this;\n\n    // Expand container\n    self.expand();\n\n    // Call base\n    this._super();\n  },\n\n  /* \r\n     *   Expands group container \r\n     */\n  expand: function expand() {\n    var self = this;\n    var group = self.container;\n\n    if (!self.isOpen()) {\n      $(\"h1\", group).trigger(\"click\");\n    }\n  },\n\n  /* \r\n     *   Collapses group container \r\n     */\n  collapse: function collapse() {\n    var self = this;\n    var group = self.container;\n\n    if (self.isOpen()) {\n      $(\"h1\", group).trigger(\"click\");\n    }\n  },\n\n  /* \r\n     *   Expands or collapse the container \r\n     */\n  toogleContainer: function toogleContainer(argument) {\n    var self = this;\n\n    if (argument) {\n      self.expand();\n    } else {\n      self.collapse();\n    }\n  },\n\n  subscribeOnTouch: function subscribeOnTouch() {\n    var self = this;\n    var group = self.container;\n\n    // Delegate event click\n    $(group).find(\">div.headertitle\").bind(\"click\", function () {\n      $(group).toggleClass(\"collapsed\");\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Search Form Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.searchForm.extend(\"bizagi.rendering.searchForm\", {}, {\n  /*\r\n                                                                        *   Render the results of the query\r\n                                                                        *   Resolved in each device\r\n                                                                        */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: \"grid\",\n      xpath: \"searchForm\" + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      visible: false,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0)\n      column.render.properties.columnVisible = false;\n\n      // if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8)\n      column.render.properties.allowDecimals = columns[i].allowDecimals;\n\n      // if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11)\n      column.render.properties.allowDecimals = true;\n\n      // if column is date push showtime property\n      if (columns[i].dataType == 12)\n      column.render.properties.showTime = columns[i].showTime;\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode() });\n\n\n    grid.properties.inlineAdd = false;\n    grid.properties.allowDelete = false;\n    grid.properties.allowAdd = false;\n    grid.properties.allowEdit = false;\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each container after processed\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var searchCriteria = container.find(\".ui-bizagi-container-search-criteria\");\n    var results = container.find(\".ui-bizagi-container-search-results\");\n    var childrenElements = searchCriteria.children();\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) child.postRenderContainer(childElement);\n        }\n      }\n    });\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".ui-bizagi-container-search-criteria\", self.container);\n    self.resultsContainer = $(\".ui-bizagi-container-search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty(\"multiSelect\")) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n    var self = this;\n\n    self.trigger(\"instancerefresh\");\n    self.resultsGrid.refresh();\n  },\n\n  /*\r\n     * Method added for IPAD version. Before showing search results form\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    var self = this;\n\n    if (!self.properties.deviceMaxRecordsExceeded) {\n\n      // Next line returns visibility with the results of the search\n      self.resultsGrid.changeVisibility(true);\n\n      if (self.properties)\n      if (self.properties.records == 0) {\n        $(\".ui-bizagi-container-search-results .ui-bizagi-label\", self.container).hide();\n      } else {\n        $(\".ui-bizagi-container-search-results .ui-bizagi-label\", self.container).show();\n      }\n    }\n  } });","/**\r\n * Device definition of Polymorphic launcher\r\n *\r\n * @author: Ricardo Perez\r\n */\n\nbizagi.rendering.polymorphicLauncher.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                           * Render a specific implementation for Tablet device\r\n                                                                                           */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get list of actions\r\n                                      */\n    return $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      self.lessActions = bizagi.clone(actions);\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-polymorphic-launcher-constructors-container\", control);\n      actionsContainer.append($.kendoTmpl(template, templateArguments));\n      self.bindHandlers();\n    });\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.kendoTmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  bindHandlers: function bindHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".bz-polymorphic-launcher-constructors-container li span\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var $targetData = $(this).parent();\n      var action = {\n        guidEntity: $targetData.data(\"guidentity\"),\n        guidObject: $targetData.data(\"guidobject\"),\n        guidConstructor: $targetData.data(\"guidconstructor\"),\n        displayName: $targetData.data(\"display-name\"),\n        actionType: $targetData.data(\"action-type\"),\n        xpathContext: $targetData.data(\"xpathcontext\") };\n\n      self.onActionClicked(action);\n    });\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".bz-polymorphic-launcher-constructors-container li\", control).show();\n      if (search) {\n        $(\".bz-polymorphic-launcher-constructors-container li\", control).not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n\n  },\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    if (status == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var formParams = form.getParams();\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var formParams = form.getParams();\n    args = args || {};\n\n\n    var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).\n      done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n      var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n      removeActionSelector.on(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of Action Launcher\r\n *\r\n * @author: Ricardo Prez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.actionLauncher\", {}, {\n  /**\r\n                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var template;\n    var def = new $.Deferred();\n    self.actions = [];\n\n    self.configureQueueVisibility();\n\n    self.startLoading();\n\n    // Define params to get list of actions        \n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    then(function (response) {\n      response = self.getPropertiesActionLaucher(response);\n      self.actions = response;\n      self.deferredActions.resolve(response);\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype !== \"none\") {\n          return self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n          then(function (templateData) {\n            return self.engine.render($.extend(templateData, {\n              isDefaultTemplate: properties.templatetype === \"default\",\n              sessionId: self.properties.sessionId }),\n            $.extend({}, self.processPropertyValueDataTmplArgs, { formParams: self.getFormParams(self.getFormContainer()) }));\n          }).then(function (tmpl) {\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            var html = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n\n            $(\".template-container\", html.wrap(\"<div>\").parent()).append(tmpl);\n            return html;\n          });\n        } else {\n          template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n          return $.kendoTmpl(template, {\n            actions: self.actions,\n            maxItems: properties.maxItems });\n\n        }\n      } else {\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        return $.kendoTmpl(template, {\n          actions: self.actions,\n          allowSearch: properties.allowSearch,\n          maxItems: properties.maxItems });\n\n      }\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n    return def.promise();\n  },\n\n  /**\r\n      * \r\n     */\n  getFormParams: function getFormParams(form) {\n    if (form.parent) {\n      return this.getFormParams(form.parent.getFormContainer());\n    } else\n    {\n      return form.getParams();\n    }\n\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.\n    multipleSelection;\n    var actionLauncherControls = $(\".action-launcher-control\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        readOnlyForm: item[6] || false,\n        guidEntity: self.properties.guidEntity,\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (multipleSelection) {\n        if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n          //Open action\n          $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n        } else {\n          $.when(self.actionManager(action)).done(function (act) {\n            self.executeAction(act);\n          });\n        }\n      } else if (self.getValue().length > 0) {\n        self.showConfirmationDialog(action);\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    });\n\n    // Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n\n    var plusBtn = $(\".action-container .wp-action-more span\", control);\n\n    $(\".action-container .wp-action-more\", control).click(function () {\n      if (plusBtn.hasClass(\"km-minus\")) {\n        hideActions();\n      } else {\n        showActions();\n      }\n    });\n\n    function hideActions() {\n      plusBtn.addClass(\"km-plus\").removeClass(\"km-minus\");\n      $(\".action-container .bz-actions-to-hide\", control).addClass('hidden');\n    }\n\n    function showActions() {\n      plusBtn.addClass(\"km-minus\").removeClass(\"km-plus\");\n      $(\".action-container .bz-actions-to-hide\", control).removeClass('hidden');\n    }\n\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".ui-bizagi-render-actionLauncher-actions-list .action-launcher-control\", control).show();\n      if (search) {\n        if (plusBtn.hasClass(\"km-plus\")) {\n          showActions();\n        }\n        $(\".ui-bizagi-render-actionLauncher-actions-list .action-launcher-control\", control).\n        not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n  },\n  /**\r\n      *\r\n      */\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n\n    //Catch the event from the layout link\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  },\n  /**\r\n      *\r\n      * @param data\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n\n    if (data.response == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace(\"%s\", action.displayName),\n        sticky: false });\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace(\"%s\", action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getParams();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.\n    properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var renderParams = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n\n    if (action.actionType === \"Form\") {\n      renderParams.contextType = \"entitytemplate\";\n      renderParams.xpathContext = undefined;\n      renderParams.guidEntity = action.guidEntity;\n      renderParams.rewriteContextType = true;\n    }\n\n    slideForm.render(renderParams);\n\n    return def.promise();\n  },\n\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.\n    properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext !== \"\" ? printf(xpathPattern, xpathContext, action.idEntity) :\n    xpathContext;\n    var xpathContextWithoutKey = xpathContext !== \"\" ? printf(xpathPatternWithoutkey, xpathContext) :\n    xpathContext;\n    var formParams = form.getParams();\n\n    var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          done(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          done(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": formParams.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var def = new $.Deferred();\n    args = args || {};\n    var formParams = self.getFormContainer().getParams();\n\n    // Show dialog\n    var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || self.typeForm === \"SummaryForm\" ? bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    // Render the search form\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show the confirmation dialog\r\n      * bizagi.createOkCancelPopup\r\n      * @param action\r\n      * */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n        return mapping;\n\n      };\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n      $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n        actionsToExecuteContainer.empty();\n        actionsToExecuteContainer.append(html);\n        var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n        var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n\n        removeActionSelector.on(\"click\", function () {\n          var index = $(this).parent().data(\"index\");\n          self.removeActionToQueue(index);\n        });\n\n        openActionSelector.on(\"click\", function () {\n          var target = $(this).parent();\n          var type = target.data(\"actiontype\");\n          var guidprocess = target.data(\"guidprocess\");\n          var idStartScope = target.data(\"idstartscope\");\n          var title = target.data(\"title\");\n          // When undefined return string \"undefined\" instead of type \"undefined\"\n          var xpathContext = target.data(\"xpathcontext\");\n          var readOnlyForm = target.data(\"readonlyform\") || false;\n          var idEntity = target.data(\"identity\") || \"\";\n          var guidAction = target.data(\"guidaction\");\n          var recordXpath = xpathContext || self.properties.xpathContext;\n\n          switch (type) {\n            case \"Process\":\n              if (idStartScope) {\n                self.processStartForm({\n                  guidprocess: guidprocess,\n                  idStartScope: idStartScope,\n                  title: title,\n                  xpathContext: xpathContext,\n                  recordXpath: recordXpath });\n\n              }\n              break;\n            case \"Form\":\n              var action = {\n                guidProcess: guidprocess,\n                idStartScope: idStartScope,\n                editMode: true,\n                xpathContext: xpathContext,\n                readOnlyForm: readOnlyForm,\n                idEntity: idEntity,\n                recordXpath: recordXpath };\n\n\n              if (action.xpathContext) {\n                self.processActionFormCollection(action);\n\n              } else {\n                // Convert string \"undefined\" into type \"undefined\"                                \n                action.xpathContext = undefined;\n\n                // Add parameters if action form\n                var extraParams = {};\n                var dataAction = self.value.filter(function (item) {\n                  return item.guidAction == guidAction;\n                });\n\n                if (dataAction.length > 0) {\n                  extraParams = {\n                    actionType: \"Form\",\n                    contextType: \"entitytemplate\",\n                    guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                }\n\n                self.processActionForm($.extend(action, extraParams));\n              }\n              break;\n            case \"Rule\":\n              // Rules dont have forms or something like that\n              break;}\n\n        });\n      });\n    });\n  },\n\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".action-to-execute-label\", control);\n\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of entity template\r\n *\r\n * @author: Ricardo Prez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.entityTemplate\", {}, {\n\n  /**\r\n                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                 */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    self.actions = [];\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get template\r\n                                      */\n    self.startLoading();\n    self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n    then(function (templateData) {\n      return self.engine.render(templateData, self.processPropertyValueDataTmplArgs).\n      then(function (tmpl) {\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n        if (properties.allowactions) {\n          return self.dataService.multiaction().getActions(self.processPropertyValueArgs).\n          then(function (response) {\n            self.deferredActions.resolve(response);\n            self.actions = response;\n            var htmlTemplate = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n            $(\".template-container\", htmlTemplate.wrap('<div>').parent()).append(tmpl);\n            return htmlTemplate;\n          });\n        } else {\n          var htmlTemplate = $($.kendoTmpl(template, { template: true }));\n          $(\".template-container\", htmlTemplate.wrap('<div>').parent()).append(tmpl);\n          return htmlTemplate;\n        }\n      });\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n    return def.promise();\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var entityTemplateControls = $(\".action-launcher-control\", control);\n\n    /**\r\n                                                                          * Binding for click action on buttons\r\n                                                                          */\n    entityTemplateControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (action.actionType === \"Form\") {\n        action.xpathContext = undefined;\n        action.contextType = \"entitytemplate\";\n        action.guidEntity = self.properties.guidEntity;\n      }\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n    /**\r\n                      * Catch the event from the layout link\r\n                      */\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Text Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the text render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.text.extend(\"bizagi.rendering.text\", {}, {\n\n  /* POSTRENDER \r\n                                                            =====================================================*/\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    // Set the default maxlenght for the input\n    if (properties.maxLength > 0) {\n      self.input.prop(\"maxlength\", properties.maxLength);\n    }\n  },\n\n  /**\r\n     * Creates the markup for the readonly text field\r\n     * Comment: includes the default value in the markup\r\n     * @returns {html}\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    self._super();\n    self.input = control.find(\".bz-rn-readonly\");\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    // Set value in input\n    if (!bizagi.util.isEmpty(value) && properties.editable) {\n      value = value.replaceAll(\"\\\\n\", \" \").replaceAll(\"\\n\", \" \");\n      value = value.replaceAll(\"&amp;\", \"&\");\n      self.input.prop(\"value\", value);\n    } else if (!self.properties.editable) {\n      value = typeof value == \"boolean\" ? value.toString() : value;\n\n      // Render as simple value\n      if (typeof value == \"string\") {\n        var displayValue = self.getDisplayValue();\n        var decodedDisplayValue = bizagi.util.decodeURI(displayValue);\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = decodedDisplayValue.replaceAll(\"&\", \"&amp;\");\n        valueToDisplay = valueToDisplay.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n        valueToDisplay = valueToDisplay.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n        valueToDisplay = valueToDisplay.replaceAll(\"\\\\n\", \"<br/>\");\n        valueToDisplay = valueToDisplay.replaceAll(\"\\n\", \"<br/>\");\n\n        self.input.html(valueToDisplay);\n\n      } else {\n        if (bizagi.util.isNull(value)) {\n          self.input.html(\"\");\n        }\n      }\n    }\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      if ($(control).attr(\"type\") !== \"hidden\" &&\n      $(control).css(\"display\") !== \"none\" &&\n      $(control).css(\"visibility\") !== \"hidden\") {\n\n        if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n          // Check that there is something in the value\n          // Check if a value has already been set\n          if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n          return;\n\n          control.data(\"oldValue\", control.val());\n          control.val(\"\");\n\n          try {\n            // Create new tooltip\n            control.tooltip(\"destroy\");\n          } catch (e) {\n\n          }\n\n          control.attr(\"title\", self.getResource(\"render-number-retype\")); //\"Re-escriba el valor\"\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          // Focus after 100ms to avoid bubbling\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          if (control.val() !== control.data(\"oldValue\")) {\n            self.setValue(\"\");\n            control.val(\"\");\n            control.data(\"oldValue\", \"\");\n            control.tooltip(\"destroy\");\n            control.attr(\"title\", self.getResource(\"render-text-retype-error\"));\n            control.tooltip();\n            control.tooltip(\"open\");\n\n            setTimeout(function () {\n              control.focus();\n            }, 100);\n\n          } else {\n\n            control.data(\"newValue\", control.val());\n            control.data(\"oldValue\", \"\");\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          }\n        }\n      }\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Label Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.label.extend(\"bizagi.rendering.label\", {}, {\n  /*\r\n                                                              *   Template method to implement in each device to customize each render after processed\r\n                                                              */\n  postRender: function postRender() {\n    var self = this;\n\n    // Apply a css class\n    self.getLabel().addClass(\"ui-bizagi-render-label\");\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Apply a css class\n    self._super();\n    self.getLabel().addClass(\"ui-bizagi-render-label\");\n  } });","/*\r\n*   Name: BizAgi Tablet Render Number Extension\r\n*   Author: Bizagi Mobile Team \r\n*   Comments:\r\n*   -   This script will redefine the number render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.number.extend(\"bizagi.rendering.number\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var value = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyNumber\");\n\n    return $.kendoTmpl(template, { value: value });\n  },\n\n  /* POSTRENDER \r\n     =====================================================*/\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n    self.numericInput = $(\"input\", self.getControl());\n\n    //Adjust the input in order to accept the comma input as decimal separator for certain language standars\n    if (self.properties.decimalSymbol == ',') {\n      self.numericInput.attr(\"lang\", \"en-150\");\n    }\n\n    var input = $(\"input\", self.element);\n    if (!input || input.length === 0) return;\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    self.numericInput = $(\".ui-bizagi-render-numeric\", control);\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (typeof value == \"string\" || typeof value == \"number\") {\n      if (properties.editable && self.numericInput) {\n        self.numericInput.prop(\"value\", value);\n\n        // Formats the input\n        self.executeFormatCurrencyPlugin();\n      } else if (!properties.editable) {\n        self.numericInput.text(self.getDisplayValue());\n      }\n    }\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n    var input = $(\"input\", element);\n\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n\n      self.retypeDouble(control);\n    });\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n\n    if ($(control).attr(\"type\") !== \"hidden\" &&\n    $(control).css(\"display\") !== \"none\" &&\n    $(control).css(\"visibility\") !== \"hidden\") {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or if a value has already been set\n        if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n        return;\n\n        control.data(\"oldValue\", control.val());\n        control.val(\"\");\n\n        // Create new tooltip\n        try {\n          control.tooltip(\"destroy\");\n        } catch (e) {}\n\n        // Re-type value\n        control.attr(\"title\", self.getResource(\"render-number-retype\"));\n        control.tooltip();\n        control.tooltip(\"open\");\n\n        // Focus after 100ms to avoid bubbling\n        setTimeout(function () {\n          control.focus();\n        }, 100);\n\n      } else {\n\n        // Check that there is something in the value\n        if (control.val() === \"\") {\n          return;\n        }\n\n        if (control.val() !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n          control.val(\"\");\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n\n          control.attr(\"title\", self.getResource(\"render-number-retype-fail\"));\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          control.data(\"newValue\", control.val());\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n        }\n\n      }\n    }\n  } });","/*\r\n *   Name: Bizagi Rendering Tablet numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Scientific number notation\r\n */\n\n\nbizagi.rendering.numberScientificNotation.extend(\"bizagi.rendering.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                     * Template method to implement in each device to customize each render after processed\r\n                                                                                                     */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    self.inputDisplay = $(\"input\", control).first();\n    self.numericInput = self.input = $(\"input\", control).last();\n    self.numericIcon = $(\"span\", self.getControl());\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatSientificNotation();\n\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var value = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 38);\n    var displayValue = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 20);\n\n\n    this._super(displayValue);\n\n    // Set value in input\n    if (value != null && properties.editable) {\n      self.numericInput.val(value);\n      self.inputDisplay.val(displayValue);\n    }\n\n  },\n\n  attachFormatSientificNotation: function attachFormatSientificNotation() {\n    var self = this;\n\n    self.inputDisplay.focus(function () {\n      $(this).val(self.getDisplayValue());\n    });\n\n    // Attach events\n    self.inputDisplay.blur(function () {\n      if (typeof self.getFormContainer().validationController == \"undefined\") self.getFormContainer().validationController = new bizagi.command.controllers.validation(self.getFormContainer(), self.validations);\n\n      var scientificNotationNumber = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 38);\n      var scientificNotationNumberDisplay = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 20);\n\n      self.numericInput.val(scientificNotationNumber);\n      self.inputDisplay.val(scientificNotationNumberDisplay);\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Yes-No Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the Yes-No render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.yesno.extend(\"bizagi.rendering.yesno\", {}, {\n\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    this._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    control.addClass(\"ui-bizagi-render-boolean-yesno\");\n\n    // Bind change event\n    control.bind(\"optiongroupchange\", function (evt, ui) {\n      // Only change the internal value when it truly changes\n      if (self.value != ui.value) {\n        self.setValue(ui.value);\n      }\n    });\n\n    control.find(\".ui-bizagi-render-boolean-radio\").bind(\"click\", function () {\n      self.getControl().find(\".ui-bizagi-render-boolean-radio\").removeClass(\"ui-radio-state-checked\");\n      self.getControl().find(\".ui-bizagi-render-boolean-radio\").removeClass(\"bz-check\").addClass(\"bz-unchecked\");\n\n      $(this).addClass(\"ui-radio-state-checked\");\n      $(this).addClass(\"ui-radio-state-checked\").addClass(\"bz-check\").removeClass(\"bz-unchecked\");\n\n      var val = $(this).attr(\"value\");\n\n      if (self.value != val) {\n        self.setValue(val);\n      }\n    });\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.setValue(value.toString().toLowerCase(), false);\n\n    // Set value in control\n    if (value != null && properties.editable) {\n      var parsedValue = bizagi.util.parseBoolean(value);\n      control.find(\".ui-bizagi-render-boolean-radio.yes\").\n      prop(\"checked\", parsedValue === true).\n      toggleClass(\"bz-unchecked\", parsedValue !== true).\n      toggleClass(\"bz-check\", parsedValue === true);\n\n      control.find(\".ui-bizagi-render-boolean-radio.no\").\n      prop(\"checked\", parsedValue === false).\n      toggleClass(\"bz-unchecked\", parsedValue !== false).\n      toggleClass(\"bz-check\", parsedValue === false);\n    } else {\n      // Call base\n      this._super(value);\n    }\n  } });","/**\r\n*   Name: BizAgi Tablet Render Check\r\n*   Author: Bizagi Mobile Team\r\n*   Comments: Check implementation for tablet\r\n*/\n\n// Extends itself\nbizagi.rendering.check.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                               * Post render control\r\n                                                               * @returns {} \r\n                                                               */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    self.input = self.getControl().find(\"input\");\n\n    // Bind changes to set value\n    self.input.change(function () {\n      var isChecked = self.input.is(\":checked\");\n      if (isChecked) {\n        self.input.removeClass(\"bz-unchecked\").addClass(\"bz-check\");\n      } else {\n        self.input.addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n      }\n      self.setValue(isChecked);\n    });\n  },\n\n  /**\r\n      * Set display value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var input = self.getControl().find(\"input\");\n\n    self.setValue(value, false);\n\n    var parsedValue = \"\";\n    if (properties.editable) {\n      parsedValue = bizagi.util.parseBoolean(value);\n    } else {\n      parsedValue = bizagi.util.parseBoolean(self.properties.value);\n    }\n\n    input.prop(\"checked\", parsedValue === true);\n    input.toggleClass(\"bz-check\", parsedValue === true).toggleClass(\"bz-unchecked\", parsedValue !== true);\n  } });","/*\r\n*   Name: Bizagi Tablet Render upload Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to smartphones devices\r\n*/\n\n// Extends itself\nbizagi.rendering.upload.extend(\"bizagi.rendering.upload\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // limit: The maximum number of multimedia files in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n\n  /**\r\n   * Template method to implement in each children to customize each control     \r\n   */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n    var allow_upload = true;\n    var items = \"\";\n\n    // Check files extensions\n    self.checkExtensions();\n\n    if (bizagi.util.isCordovaSupported()) {\n      allow_upload = self.validOptions && (self.validOptions.image || self.validOptions.video);\n    }\n\n    // Render template\n    var html = $.kendoTmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable && allow_upload,\n      noFiles: self.filesCount == 0,\n      allow_upload: allow_upload,\n      nonSupportedExtension: self.nonSupportedExtension,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children       \n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    if (!bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported() || !properties.editable) {\n      self.addEventToOpenSlide();\n    } else if (!bizagi.util.isCordovaSupported()) {\n      self.activeUploadWebControl();\n    } else {\n      self.activateUploadNative();\n    }\n\n    // Handler to download the file\n    $(\"ul.files\", self.getControl()).on(\"click\", \".ui-bizagi-render-link.button\", function (e) {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), this.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n     * Render readonly\r\n     * @returns {}\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var container = self.getControl();\n\n    // Call base\n    self._super();\n\n    if (!bizagi.util.isOfflineForm({ context: self }) && typeof self.files !== \"undefined\" && self.files.length > 0) {\n      var filesLinkElements = container.find(\".ui-bizagi-render-link\");\n\n      filesLinkElements.on(\"click\", function () {\n        bizagi.loading.start();\n        $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), this.title)).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      });\n    }\n  },\n\n  /**\r\n     * Attach open slide\r\n     * @returns {}\r\n     */\n  addEventToOpenSlide: function addEventToOpenSlide() {\n    var self = this;\n    var mode = self.getMode();\n    var container = self.getControl();\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n    self.itemAddfile.hide();\n\n    if (!bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported()) {\n      self.element.addClass(\"bz-rn-read-only\");\n    }\n\n    $(\"li\", container).click(function (event) {\n      if (mode === \"execution\") {\n        bizagi.loading.start();\n        // Avoid redirect & download\n        event.preventDefault();\n        event.stopPropagation();\n\n        var title = this.title || $(this).data(\"name\");\n\n        $.when(bizagi.util.media.downloadFile($(this).data(\"url\"), title)).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }\n    });\n  },\n\n  /**\r\n     * Active upload by native mode\r\n     * @returns {}\r\n     */\n  activateUploadNative: function activateUploadNative() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getControl();\n\n    self.renderControl();\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n\n    if (!bizagi.util.isCordovaSupported() || !properties.editable) {\n      self.itemAddfile.hide();\n    }\n\n    // Check files number\n    self.checkMaxFiles();\n\n    // Attach delete option\n    self.attachDeleteHandler();\n\n    // Not has valid extensions\n    if (self.validOptions && !self.validOptions.image && !self.validOptions.video) {\n      $(\"> *\", self.itemAddfile).hide();\n      return;\n    }\n\n    var uploadTemplate = self.renderFactory.getTemplate(\"uploadModalView\");\n    var kendoTemplate = kendo.template(uploadTemplate, { useWithBlock: false });\n\n    // Check is offline form\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Creating modal view\n    var $modalView = $.trim(kendoTemplate({\n      editable: self.properties.editable,\n      noFiles: self.properties.noFiles,\n      displayName: self.properties.displayName || \"\",\n      validExtensions: self.validOptions,\n      isOfflineForm: isOfflineForm }));\n\n\n    self.itemAddfile.bind(\"click\", function (e) {\n      var modalView = new kendo.mobile.ui.ModalView($modalView, {\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        modal: false,\n        useNativeScrolling: true });\n\n\n      self.configureModalViewHandlers(modalView.element);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.open();\n    });\n  },\n\n  /**\r\n     * Configure the modalView Handlers for the new combo control.\r\n     * @param {} inputContainer\r\n     * @returns {}\r\n     */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    // Getting combo list elements\n    self.listOptions = inputContainer.find(\".bz-rn-upload-options li\");\n\n    // Setting the initial selected display value\n    self.listOptions.bind(\"click\", function () {\n      self.applyPlugin($(this).data(\"role\"), this.getBoundingClientRect());\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      if (inputContainer.data(\"kendoMobileModalView\")) {\n        inputContainer.data(\"kendoMobileModalView\").close();\n      }\n    });\n  },\n\n  /**\r\n     * Attach delete option\r\n     * @returns {}\r\n     */\n  attachDeleteHandler: function attachDeleteHandler() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-rn-upload-delete-icon\", control).bind(\"click\", function () {\n      var item = $(this).parent(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n\n      $.when(self.deleteUploadItem(item, file.id)).\n      done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  /**\r\n     * Apply plugin\r\n     * @param {} option\r\n     * @param {} coordinates\r\n     * @returns {}\r\n     */\n  applyPlugin: function applyPlugin(option, coordinates) {\n    var self = this;\n    var resolutionUpload;\n\n    // If android version is less than 4.4 avoid to show upload sizes due to compatibility with blob files\n    var version = bizagi.util.getAndroidVersion();\n    var hideUploadSizes = version && version <= 4.4;\n\n    // Resolution upload menu\n    if (hideUploadSizes) {\n      resolutionUpload = [\n      { \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-size-original\") }];\n\n    } else {\n      resolutionUpload = bizagi.util.media.getImageResolutionItems();\n    }\n\n    // Attach document\n    $(\".bz-resolution-container\", self.getControl()).actionSheet({\n      actions: resolutionUpload,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n\n        $.when(self.resolutionButtonHandler(action.guid)).always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    switch (option) {\n      case \"image\":\n        // Check is offline form\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n        // Select image\n        var popover = new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4);\n        var options = {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          popoverOptions: popover };\n\n\n        navigator.camera.getPicture(function (dataImage) {\n          self.dataImage = dataImage;\n          var extensions = self.Class.EXTENSIONSIMG.\n          concat(self.Class.EXTENSIONSVIDEO);\n\n          bizagi.loading.start();\n          self.closeModalView();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n            then(function (file) {\n\n              self.fileProperties = file;\n\n              if (bizagi.util.media.checkFileTypes(file, self.properties, extensions)) {\n                // \"new Blob\" constructor is not supported in android version 4.2.2\n                var version = bizagi.util.getAndroidVersion();\n\n                if (version && version <= 4.2 || isOfflineForm) {\n                  return self.saveImage(self, self.dataImage);\n                } else {\n\n                  if (!bizagi.util.isAndroid()) {\n                    return $.when(bizagi.util.media.modalResolutionUpload()).then(\n                    function (buttonIndex) {\n                      if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                        return self.resolutionButtonHandler(buttonIndex);\n                      }\n                    });\n\n                  } else {\n                    // Force click to show actionsheet menu\n                    $(\".bz-resolution-container\", self.getControl()).click();\n                  }\n                }\n              }\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), options);\n        break;\n\n      case \"file\":\n        // TODO: Add handlers to upload web                \n        break;\n\n      case \"cimage\":\n        navigator.camera.getPicture(function (dataImage) {\n          bizagi.loading.start();\n          self.closeModalView();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (file) {\n              self.fileProperties = file;\n              return self.saveImage(self, dataImage);\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          targetWidth: 1280,\n          targetHeight: 960,\n          correctOrientation: true });\n\n        break;\n\n      case \"cvideo\":\n        navigator.device.capture.captureVideo(function (dataImage) {\n          bizagi.loading.start();\n          self.closeModalView();\n\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataImage, self.properties)).then(function () {\n            return self.saveVideo(self, dataImage);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), { limit: self.Class.LIMIT });\n        break;\n\n      default:\n        break;}\n\n  },\n\n  closeModalView: function closeModalView() {\n    var self = this;\n    var modalView = self.listOptions.closest(\".modalview-upload-options\");\n\n    if (self.listOptions && modalView) {\n      if (modalView.data(\"kendoMobileModalView\")) {\n        modalView.data(\"kendoMobileModalView\").close();\n      }\n    }\n  },\n\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    $(\".ui-bizagi-resolution-container\").css(\"display\", \"none\");\n    $(\".ui-bizagi-mask\").remove();\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.saveImage(self, self.dataImage);\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return self.saveImage(self, self.dataImage);\n      });\n    }\n\n  },\n\n  /**\r\n     * Call the form failhandler with an specific error\r\n     * @param {} error\r\n     * @returns {}\r\n     */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(\"uploadItem\");\n\n    // Don't render urls when not running in execution mode\n    var url = mode !== \"execution\" ? \"javascript:void(0);\" : self.buildItemUrl(file);\n\n    var html = $.kendoTmpl(template, {\n      url: url,\n      image: false,\n      allowDelete: properties.allowDelete,\n      editable: properties.editable,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      isNativeContext: bizagi.util.isNativePluginSupported(),\n      isCordovaSupported: bizagi.util.isCordovaSupported() });\n\n\n    return html;\n\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"upload\";\n  },\n\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  getTemplateEditionName: function getTemplateEditionName() {\n    return \"edition.upload\";\n  },\n\n  getTemplateEditionMenu: function getTemplateEditionMenu() {\n    return \"edition.upload.menu\";\n  },\n\n  /**\r\n     * Send image using HTTP\r\n     * @param {} context\r\n     * @param {} dataImage\r\n     * @returns {}\r\n     */\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous gallery uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    return $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    }).fail(function (error) {\n      var response = JSON.parse(decodeURIComponent(error.responseText));\n      bizagi.showMessageBox(response.message, response.type);\n    });\n  },\n\n  /**\r\n     * saveVideo\r\n     * @param {} context\r\n     * @param {} dataVideo\r\n     * @returns {}\r\n     */\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileName = dataVideo[0].name;\n    params.options.mimeType = \"video/quicktime\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    return $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    });\n  },\n\n  /**\r\n      * Management fail messages\r\n      */\n  onFail: function onFail(error) {\n    var messageError = bizagi.util.processFailMessage(error);\n\n    if (typeof messageError == \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\n      var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\n      var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\n\n      bizagi.showMessageBox(message);\n    }\n  },\n\n  onUploadFileCompleted: function onUploadFileCompleted(context, result) {\n    var self = context;\n    var control = self.getControl();\n    var uploadWrapper = $(\"ul.files\", control);\n\n    if (result.id && result.fileName) {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem(result);\n      $(uploadWrapper).append(newItem);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Update value\n      self.setValue(files, true);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      control.find(\".ui-bizagi-render-upload-item-no-upload\").hide();\n\n      //Add delete functionality just for elements included in common forms, not inside columns\n      if (self.properties.type !== \"columnUpload\" && self.properties.allowDelete && self.properties.editable) {\n        self.attachDeleteHandler();\n      }\n\n      self.editedImageURL = null;\n    } else {\n      bizagi.showMessageBox(result.message, \"Error\");\n    }\n  },\n\n  /**\r\n     * Checks if the total files uploaded reachs the maximun supported\r\n     * @returns {}\r\n     */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value ? properties.value.length : 0;\n\n    if (properties.editable) {\n      if (maxFiles !== 0 && self.filesCount >= maxFiles && actualFiles >= maxFiles) {\n        self.itemAddfile.hide();\n      } else {\n        self.itemAddfile.show();\n      }\n    } else {\n      //Checks if the files count is equals to 0, to show the no files dialog\n      if (self.filesCount == 0) {\n        $(\"#no-files\", control).show();\n      }\n    }\n  },\n\n  /**\r\n     * Checks the file Extension in each filetype that the device supports\r\n     * @returns {}\r\n     */\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    //Helps to get the non-supported extensions for mobile\n    var nonSupportedExtensionsArr = [];\n\n    // Remove spaces in the list\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n    validExtensions = validExtensions.split(\";\");\n\n    // Initizalice the nonSupportedExtension element\n    self.nonSupportedExtension = \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    if (typeof validExtensions === \"undefined\" || validExtensions[0] === \"\") {\n      self.validOptions = { video: true, image: true, file: false };\n\n      return;\n    }\n\n    if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) return;\n\n    for (var index = 0, length = validExtensions.length; index < length; index++) {\n      validExtensions[index] = validExtensions[index].replace(\"*.\", \"\");\n\n      /*if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[index]) >= 0) {\r\n                                                                             self.validOptions.file = true;\r\n                                                                         } else */\n      if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[index]) >= 0) {\n        self.validOptions.image = true;\n      } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[index]) >= 0) {\n        self.validOptions.video = true;\n      } else {\n        //If the extension is not part or any category, it is stored in nonSupportedExtensions array\n        nonSupportedExtensionsArr.push(validExtensions[index]);\n      }\n    }\n\n    // Adjust file extension, in order to make it multiline & Stores the non-supported extensions\n    self.nonSupportedExtension = nonSupportedExtensionsArr.join(\", \") || \"\";\n  },\n\n  /**\r\n     * Active upload web control\r\n     * @returns {}\r\n     */\n  activeUploadWebControl: function activeUploadWebControl() {\n    var self = this;\n    var container = self.getControl();\n    var uploadfile = $(\".bz-rn-upload-web\", container);\n    var file = $(\".bz-rn-upload-show-menu span.bz-cm-icon\", container);\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", container);\n\n    // Check maximum files number\n    if (self.itIsMaxNumberFilesReached()) {\n      self.itemAddfile.hide();\n    }\n\n    self.itemAddfile.click(function () {\n      uploadfile.click();\n    });\n\n    // attach events to file-icon\n    file.addClass(\"bz-rn-upload-native\");\n    file.on(\"click\", function () {\n      uploadfile.click();\n    });\n\n    // Attach event to upload-control\n    uploadfile.on(\"change\", function () {\n      var that = this;\n      var dataFile = that.files[0];\n      var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSVIDEO);\n\n      dataFile.fullPath = that.value;\n\n      bizagi.loading.start();\n\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.processUploadFile(dataFile)).\n        then(function (result) {\n          self.onUploadFileCompleted(self, JSON.parse(decodeURIComponent(result)));\n        }).fail(function (error) {\n          if (error.statusText !== \"Unauthorized\" || error.statusText.toLowerCase() !== \"ok\") {\n            bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n          }\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        bizagi.loading.stop();\n      }\n\n      // Clearing input Values\n      $(that).val(\"\");\n    });\n\n    // Check files number\n    self.checkMaxFiles();\n\n    // Attach delete option\n    self.attachDeleteHandler();\n  },\n\n  /**\r\n     * Check the maximun file than can be uploaded\r\n     * @returns {}\r\n     */\n  itIsMaxNumberFilesReached: function itIsMaxNumberFilesReached() {\n    var self = this;\n    var properties = self.properties;\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value ? properties.value.length : 0;\n\n    return maxFiles !== 0 && actualFiles >= maxFiles;\n  },\n\n  /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n    var properties = self.properties;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", self.getUploadXpath());\n    formData.append(prefix + \"idRender\", properties.id);\n    formData.append(prefix + \"xpathContext\", properties.xpathContext);\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(properties.xpath, dataFile);\n\n    if (properties.contexttype) {\n      formData.append(prefix + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n     * Process an upload file into the server\r\n     * @param {} context\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = { url: this.properties.addUrl, formData: this.buildAddFileParams(dataFile) };\n    return this.dataService.processUploadFile(data);\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var items = $(\".ui-bizagi-render-upload-item\", self.getControl());\n\n    items.each(function (index, item) {\n      item = $(item);\n      var file = item.data();\n      $.when(self.deleteUploadItem(item, file.id)).done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render upload Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to smartphones devices\r\n*/\n\n// Extends itself\nbizagi.rendering.upload.extend(\"bizagi.rendering.upload.offline\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // limit: The maximum number of multimedia files in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n  postRender: function postRender() {\n    var self = this;\n\n    if (!bizagi.util.isCordovaSupported() || !self.properties.editable) {\n      self.addEventToOpenSlide();\n    } else {\n      self.activateUploadNative();\n    }\n\n\n\n    // Attach Events\n    self.atachOpenFileEvent();\n    self.configureHelpText();\n  },\n\n  /**\r\n      * Attach open slide\r\n      * @returns {} \r\n      */\n  addEventToOpenSlide: function addEventToOpenSlide() {\n    this.itemAddfile = $(\".bz-rn-upload-show-menu\", this.getControl());\n    this.itemAddfile.hide();\n  },\n\n  atachOpenFileEvent: function atachOpenFileEvent() {\n    var self = this;\n    // Handler to open or download the file\n    $(\"ul.files\", self.getControl()).on(\"click\", \".ui-bizagi-render-link.button\", function (e) {\n\n      var dataIndex = $(this).data(\"index\");\n      var selectedValue = typeof dataIndex == \"number\" ? self.properties.value[dataIndex] : null;\n\n      if (selectedValue) {\n        var fileData = selectedValue[1] ? selectedValue[1].value : \"\";\n        var fileMimeType = selectedValue[2] ? selectedValue[2].value : \"image/jpeg\";\n\n        bizagi.loading.start();\n        $.when(bizagi.util.media.openOfflineFile(fileData, fileMimeType, this.title)).fail(function (error) {\n          bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }\n    });\n  },\n\n  /**  \r\n      *  Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var allow_upload = true;\n    var items = \"\";\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Check files extensions\n    self.checkExtensions();\n\n    if (bizagi.util.isCordovaSupported()) {\n      allow_upload = self.validOptions && self.validOptions.image;\n    }\n\n    var maxFileSizeOfProperty = Number(self.properties.maxSize) || 1048576;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\n\n    self.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\n\n    // Render template\n    var html = $.kendoTmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: self.properties.editable && allow_upload,\n      noFiles: self.filesCount === 0,\n      allow_upload: allow_upload,\n      validExtensions: self.properties.validExtensions,\n      nonSupportedExtension: self.nonSupportedExtension,\n      allowSendInMail: self.properties.allowSendInMail });\n\n\n    // Render current children        \n    for (var i = 0, length = self.filesCount; i < length; i++) {\n      var item = self.renderUploadItem(self.files[i], i);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Render readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.atachOpenFileEvent();\n  },\n\n  /**\r\n      * Active upload by native mode\r\n      * @returns {} \r\n      */\n  activateUploadNative: function activateUploadNative() {\n    this._super();\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"upload\";\n  },\n\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  getTemplateEditionName: function getTemplateEditionName() {\n    return \"edition.upload\";\n  },\n\n  getTemplateEditionMenu: function getTemplateEditionMenu() {\n    return \"edition.upload.menu\";\n  },\n\n  saveImage: function saveImage(context, dataImage) {\n    var self = this;\n\n    // Fix android 4.4 getting images from recent folder        \n    dataImage = bizagi.util.media.getImagePath(dataImage);\n\n    // Load image\n    self.getDataUri(dataImage, function (dataUrl) {\n      var fileExtension = self.fileProperties ? self.fileProperties.extension : \"\";\n      var fileName = bizagi.util.uniqueID() + fileExtension;\n\n      self.onUploadFileCompletedOffline(fileName, dataUrl);\n    });\n  },\n\n  /**\r\n      * Create an offline image\r\n      * @param {} context \r\n      * @param {} url \r\n      * @param {} callback \r\n      * @returns {} \r\n      */\n  getDataUri: function getDataUri(path, callback) {\n    var self = this;\n    var xhr = new XMLHttpRequest();\n\n    try {\n\n      xhr.onload = function () {\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n          var content = reader.result;\n          callback(content);\n        };\n        reader.readAsDataURL(xhr.response);\n      };\n\n      xhr.open(\"GET\", path);\n      xhr.responseType = \"blob\";\n      xhr.send();\n\n    } catch (error) {\n      callback(\"\");\n    }\n  },\n\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n\n    window.resolveLocalFileSystemURL(dataVideo[0].fullPath, function (fileEntry) {\n      fileEntry.file(function (file) {\n        var reader = new FileReader();\n\n        reader.onloadend = function (evt) {\n          var fileExtension = bizagi.util.media.getFileExtension(dataVideo[0].name);\n          var fileName = bizagi.util.uniqueID() + fileExtension;\n\n          self.onUploadFileCompletedOffline(fileName, evt.target.result);\n        };\n\n        reader.readAsDataURL(file);\n      }, self.failReadFile);\n    }, self.failReadFile);\n  },\n\n  renderUploadItem: function renderUploadItem(objectUpload, index) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(\"uploadItem\");\n\n    var html = $.kendoTmpl(template, {\n      url: \"javascript:void(0);\",\n      image: false,\n      allowDelete: self.properties.allowDelete || false,\n      id: bizagi.util.randomNumber(),\n      mode: mode,\n      editable: self.properties.editable,\n      filename: objectUpload[0].value,\n      isNativeContext: false,\n      isCordovaSupported: bizagi.util.isCordovaSupported(),\n      index: index });\n\n\n    return html;\n  },\n\n  /**\r\n      * Collect Data\r\n      * @param {} renderValues \r\n      * @returns {} \r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n\n    if (self.filesCount > 0) {\n      renderValues[self.properties.xpath] = self.files;\n    } else if (self.properties.method === \"delete\") {\n      renderValues[self.properties.xpath] = [];\n\n      delete self.properties.method;\n    }\n  },\n\n  onUploadFileCompletedOffline: function onUploadFileCompletedOffline(name, dataimage) {\n    var self = this;\n    var control = self.getControl();\n    var uploadWrapper = $(\"ul.files\", control);\n    var dataUrltoSave = dataimage.replace(/^data:.*;base64,/, \"\");\n    var properties = self.properties;\n    var dataMimeType = dataimage.match(/data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/);\n    dataMimeType = dataMimeType && dataMimeType.length ? dataMimeType[1] : \"image/jpeg\";\n\n    var fileToSave = [\n    { xpath: \"fileName\", DataType: \"15\", value: name },\n    { xpath: \"data\", DataType: \"19\", value: dataUrltoSave },\n    { xpath: \"mimeType\", DataType: \"15\", value: dataMimeType }];\n\n\n    // Locate it before the upload wrapper\n    var newItem = self.renderUploadItem(fileToSave, self.filesCount);\n    $(uploadWrapper).append(newItem);\n\n    // Copy the files value but not its reference\n    var files = self.files.slice();\n\n    //Add the new item to this temporal array\n    files.push(fileToSave);\n\n    // Increment counter\n    self.filesCount = self.filesCount + 1;\n\n    // Update value\n    self.setValue(files, false);\n\n    // Check maxFiles\n    self.checkMaxFiles();\n\n    self.triggerRenderChange();\n\n    control.find(\".ui-bizagi-render-upload-item-no-upload\").hide();\n\n    if (properties.allowDelete && properties.editable) {\n      self.attachDeleteHandler();\n    }\n\n    // Close modalview\n    self.closeModalView();\n    bizagi.util.tablet.stopLoading();\n  },\n\n  failReadFile: function failReadFile(evt) {\n    try {\n      bizagi.log(\"Error code: \" + evt.target.error.code);\n    } catch (e) {\n    }\n  },\n\n  onFail: function onFail(error) {\n    this._super(error);\n    this.closeModalView();\n  },\n\n  checkMaxFiles: function checkMaxFiles() {\n    bizagi.rendering.upload.prototype.checkMaxFiles.apply(this, arguments);\n  },\n\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    //Helps to get the non-supported extensions for mobile\n    var nonSupportedExtensionsArr = [];\n\n    // Remove spaces in the list\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n    validExtensions = validExtensions.split(\";\");\n\n    // Initialize the nonSupportedExtension element\n    self.nonSupportedExtension = \"\";\n\n    self.validOptions = { video: false, image: false, file: false };\n\n    if (typeof validExtensions === \"undefined\" || validExtensions[0] === \"\") {\n      self.validOptions.image = true;\n\n      return;\n    }\n\n    if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) return;\n\n    for (var index = 0, length = validExtensions.length; index < length; index++) {\n      validExtensions[index] = validExtensions[index].replace(\"*.\", \"\");\n\n      if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[index]) >= 0) {\n        self.validOptions.image = true;\n      } else {\n        // If the extension is not part or any category, it is stored in nonSupportedExtensions array\n        nonSupportedExtensionsArr.push(validExtensions[index]);\n      }\n    }\n\n    // Adjust file extension, in order to make it multiline & Stores the non-supported extensions\n    self.nonSupportedExtension = nonSupportedExtensionsArr.join(\", \") || \"\";\n  },\n\n  checkMaxSize: function checkMaxSize(objectUri) {\n    return bizagi.util.media.checkMaxSize(objectUri, this.properties);\n  },\n\n  checkMaxSizeVideo: function checkMaxSizeVideo(objectVideo) {\n    return bizagi.util.media.checkMaxSizeVideo.apply(objectVideo, this.properties);\n  },\n\n  /**  \r\n      * This render cannot be sent because it is full ajax\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Attach delete option & Removes a file from the upload control\r\n      * @returns {} \r\n      */\n  attachDeleteHandler: function attachDeleteHandler() {\n    var self = this;\n    var control = self.getControl();\n\n    $(\".bz-rn-upload-delete-icon\", control).bind(\"click\", function () {\n      var context = $(this);\n      var item = context.parent(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n      var fileIndex = item.index();\n\n      // Substract counter\n      self.filesCount = self.filesCount - 1;\n\n      if (self.filesCount === 0) {\n        self.properties.method = \"delete\";\n      }\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem, index) {\n        return index !== fileIndex && fileItem !== file.name;\n      });\n\n      // Remove item\n      item.hide();\n      item.remove();\n\n      // Update value\n      self.setValue(self.files, false);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      // Trigger change\n      self.triggerRenderChange();\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Render Grid Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the grid render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.grid.extend(\"bizagi.rendering.grid\", {\n  GRID_PAGE_SIZE: 10 },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Fill default properties\n    var properties = this.properties;\n    var form = self.getFormContainer();\n\n    // If not helptext configured, Just apply display-type: vertical, align it to the left\n    if (self.properties.helpText && self.properties.helpText != null && self.properties.helpText != \"\") {\n      properties.displayType = \"value\";\n    } else {\n      properties.displayType = \"vertical\";\n    }\n\n    properties.labelAlign = \"left\";\n\n    if (properties.groupBy || properties.groupSummary) {\n      // Add warning\n      form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\n    }\n  },\n\n  /* method overrides\r\n     *  from base or virtual\r\n     */\n\n  /*\r\n        *   Update or init the element data\r\n        */\n  initializeData: function initializeData(data) {\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    this._super(data);\n  },\n\n  /*\r\n     * Updates manually the affected cell \r\n     */\n  updateAffectedCellManually: function updateAffectedCellManually() {\n  },\n\n  /*\r\n     * Get the row index using the key as a reference\r\n     */\n  getRowIndexByKey: function getRowIndexByKey() {\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.initialLoadDone = false;\n    self.isPaginatorActive = false;\n\n    // Call base \n    self._super();\n\n    // Find component holder\n    self.grid = $(\">div\", control);\n\n    // Hide common label\n    self.getLabel().hide();\n\n    // Grid plugin\n    self.applyGridPlugin();\n\n    // Set initial data\n    if (properties.data) {\n      self.updateData(properties.data);\n\n      // Trigger change in order to start up the actions when the controls is ready\n      $.when(self.ready()).\n      done(function () {\n        self.triggerRenderChange({ changed: false });\n      });\n    }\n\n    // Execute pending actions\n    self.initialLoadDone = true;\n\n    for (var i in self.pendingActions) {\n      if (self.pendingActions.hasOwnProperty(i)) {\n        self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\n      }\n    }\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var grid = self.grid;\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Build column metadata\n    var columns = self.buildColumnModel();\n\n    var columnsTotalizers = jQuery.grep(columns, function (a) {\n      return a.summarizeBy;\n    });\n\n    // Apply grid plugin\n    grid.bizagi_grid_tablet({\n      columns: columns,\n      maxColumns: 4,\n      title: properties.displayName,\n      isOfflineForm: isOfflineForm || false,\n      mode: mode,\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\n        totalizer: self.renderFactory.getTemplate(\"bizagi.grid.totalizer\") },\n\n      actions: {\n        add: properties.allowAdd, //|| properties.inlineAdd,\n        edit: properties.allowEdit && properties.withEditForm && properties.data != null,\n        remove: properties.allowDelete,\n        inlineAdd: false, //properties.inlineAdd,\n        allowMore: properties.allowMore,\n        enableXlsExport: false,\n        enablePdfExport: false,\n        hasTotalizer: columnsTotalizers.length > 0 && properties.data.rows.length > 0 ? true : false },\n\n      pageRequested: function pageRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        if (mode != \"execution\") return;\n        self.triggerHandler(\"rowSelected\", { id: ui.key, data: ui });\n      },\n      addRow: function addRow(ui) {\n        if (mode != \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      moreRows: function moreRows(ui) {\n        if (mode != \"execution\")\n        return;\n        self.moreRows(ui);\n      },\n      showMore: function showMore(ui) {\n        self.showMore(ui.key);\n      },\n      totalData: function totalData(ui) {\n        if (mode != \"execution\") return;\n        self.onTotalData();\n      } });\n\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Do the same as the post-render            \n    self.postRender();\n  },\n\n  /** \r\n     *   Creates the column model required to initialize the grid plugin\r\n     */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var properties = self.properties;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n\n      // Set grid column\n      column.columnIndex = index + 1;\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        hidden: !column.properties.visible || column.properties.type == \"columnHidden\" || column.properties.columnVisible == false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n     * Makes the grid to refresh\r\n     */\n  refresh: function refresh() {\n    var self = this;\n    self.fetchData();\n  },\n\n  /*\r\n     *   Holds the execution until the grid data is ready after a load operation\r\n     */\n  dataReady: function dataReady() {\n    var self = this;\n\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n     * Update data from local changes\r\n     */\n  loadChanges: function loadChanges(rows) {\n    var self = this;\n    var idRow = [],i;\n    // get data from the rows\n    for (i = 0, length = rows.length; i < length; i++) {\n      idRow.push([rows[i][0], i]); // save id and index\n    }\n\n    for (i = 0, idRowLength = idRow.length; i < idRowLength; i++) {\n      var properties = self.changes[idRow[i][0]];\n      var index;\n      // search for changes\n      if (properties !== undefined) {\n        var xpath, columnNumber;\n        index = idRow[i][1];\n        // update all properties in data\n        for (xpath in properties) {\n          if (properties.hasOwnProperty(xpath)) {\n            columnNumber = self.getColumn(xpath).columnIndex;\n            rows[index][columnNumber] = properties[xpath];\n          }\n        }\n      }\n    }\n  },\n\n  /*\r\n     *   Method to set data and update the grid\r\n     */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.grid;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data) {\n      self.properties.data = data;\n      self.setCellOverrides(data, columns);\n      grid.bizagi_grid_tablet(\"setData\", data);\n\n\n      if (self.properties.data && self.properties.data.total > self.Class.GRID_PAGE_SIZE) {\n        self.alternativePaginator();\n        self.isPaginatorActive = true;\n      }\n    }\n  },\n\n  /*\r\n     *   Method to fetch data from the server and then update the data\r\n     */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = new $.Deferred();\n\n    // Define defaults\n    page = page || properties.page || 1;\n    sortBy = sortBy || properties.sortBy || \"\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      if (data) {\n        if (data.deviceMaxRecordsExceeded) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-maximum-records-allowed\"));\n        } else {\n          if (self.isRTL()) {\n            data.rows = self.changeOrderData(data.rows);\n          }\n          self.loadChanges(data.rows);\n          self.updateData(data);\n          self.triggerRenderChange();\n          self.dataReadyDeferred.resolve();\n\n          //focus on page clicked\n          if (self.isPaginatorActive) {\n            var pageSelected = $(\".ui-bizagi-grid-pager\", self.element).find(\"li[data-page-number=\" + data.page + \"]\");\n            var pageLeftPosition = pageSelected.length > 0 ? pageSelected.position().left : 0;\n\n            pageLeftPosition = Number(pageLeftPosition - 30) * -1;\n            var pagerContentWidth = Number($(\".ui-bizagi-grid .ui-bizagi-grid-pager\", self.getControl()).css(\"width\").replace(/[^-\\d\\.]/g, ''));\n            var lastLiElementPosition = $(\".ui-bizagi-grid .ui-bizagi-grid-pager ul li:last\", self.getControl());\n            lastLiElementPosition = lastLiElementPosition.length > 0 ? lastLiElementPosition.position().left : 0;\n            var pagerMarginAnimate = -lastLiElementPosition + pagerContentWidth - 90;\n\n            if (pagerContentWidth < lastLiElementPosition) {\n              if (pageLeftPosition < pagerMarginAnimate) {\n                pageLeftPosition = pagerMarginAnimate;\n              }\n              $(\".ui-bizagi-grid .ui-bizagi-grid-pager ul\", self.getControl()).css({ \"margin-left\": pageLeftPosition + \"px\" });\n            }\n          }\n        }\n      }\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var grid = self.grid;\n\n    // Save pending inline add rows\n    if (self.grid && (self.properties.inlineAdd || self.properties.inlineEdit)) {\n      var newKeys = grid.bizagi_grid_tablet.hasOwnProperty(\"getNewRowKeys\") ? grid.bizagi_grid_tablet(\"getNewRowKeys\") : [];\n\n      // Save new rows then save the whole screen\n      if (newKeys.length > 0 && !self.properties.alreadySaved && self.isValid()) {\n        var saveDeferred = self.saveInlineAddedRows(newKeys, true);\n\n        // Add to deferred collections in order to sync when saving\n        renderValues.deferreds = renderValues.deferreds || [];\n        renderValues.deferreds.push(saveDeferred);\n      }\n\n      // Remove adding keys from current changes\n      for (var i = 0; i < newKeys.length; i++) {\n        if (self.changes[newKeys[i]]) {\n          delete self.changes[newKeys[i]];\n        }\n      }\n    }\n\n    // Call base method\n    self._super(renderValues);\n  },\n\n  /*\r\n     *   Customizes the content drawing inside the cell\r\n     */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n    if (column.key) return value;\n\n    self.newRecords = self.newRecords || {};\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    // Get cell properties\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n    properties.editable = false;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n    renderColumn.properties.displayType = 'value';\n\n    if (key == \"summary\") {\n      editable = false;\n    }\n\n\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n\n    if (properties.visible) {\n      renderColumn.properties = properties;\n      var defer = new $.Deferred();\n\n      $.when(renderColumn.renderReadOnly(key, value)).done(function (cell) {\n        // Register array with new records              \n        for (var j = 0; j < self.columns.length; j++) {\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, j).visible = true;\n        }\n        defer.resolve(cell);\n      });\n      //return renderColumn.renderReadOnly(key, value);\n      return defer.promise();\n    } else {\n\n      return \"\";\n    }\n  },\n\n\n  /*\r\n     *   Executes when the cell is ready and inserted into the DOM\r\n     */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = (self.cellMetadata[key][columnIndex] != undefined ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;else\n    editable = false;\n    if (visible) {\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n        renderColumn.postRenderReadOnly(key, cell);\n      }\n    }\n  },\n\n  /**\r\n     *  Adds a row to the grid\r\n     */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Start loading\n    self.startLoading();\n\n    // Send add request\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n\n      // Show a slide with new form after that\n      var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n        title: self.properties.displayName || \"\",\n        container: form.container,\n        formParams: formParams,\n        navigation: formParams.navigation,\n        showSaveButton: true,\n        onSave: function onSave(data) {\n          return self.submitSaveRequest(newid, data);\n        } });\n\n\n      // End Loading\n      self.endLoading();\n\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n\n      slideView.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"addForm\",\n        url: properties.addPage,\n        formParams: formParams,\n        navigation: formParams.navigation }).\n      done(function () {\n\n        self.endLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n\n      }).fail(function () {\n        self.endLoading();\n        self.submitRollbackRequest();\n      });\n    });\n\n  },\n\n  /**\r\n     *  Edits a row in the grid\r\n     */\n  editRow: function editRow(id) {\n\n    if (id == 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n    var properties = self.properties;\n\n    // Use tablet inline edit when there are no edit form\n    if (properties.inlineEdit == true && properties.allowEdit == false) {\n      self.editInline(id);\n      return;\n    }\n\n    if (self.cleanActionChanges && self.cleanActionChanges[id] !== undefined) {\n\n      self.changes = self.cleanActionChanges;\n      var data = $.extend(self.changes[id], {});\n      data.idPageCache = properties.idPageCache;\n\n      $(\".ui-tooltip\").remove();\n\n      $.when(self.submitSaveRequest(id, data)).done(function () {\n        // Set loading status\n        self.startLoading();\n\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.endLoading();\n\n          self.fetchData();\n        } else {\n          // Submits the entire form\n          self.submitForGridChange().always(function () {\n            self.endLoading();\n\n            // Send edit request\n            self.executeSubmitEditRequest(id);\n          });\n        }\n      });\n    } else {\n      self.executeSubmitEditRequest(id);\n    }\n  },\n\n  executeSubmitEditRequest: function executeSubmitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      onSave: function onSave(data) {\n        return self.submitSaveRequest(id, data);\n      } });\n\n\n    self.startLoading();\n\n    $.when(self.submitEditRequest(id)).\n    done(function () {\n\n      // Show dialog with new form after that\n      var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n      slideView.render({\n        idRender: properties.id,\n        recordXPath: recordXpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        requestedForm: \"editForm\",\n        url: properties.editPage,\n        formParams: formParams,\n        navigation: formParams.navigation }).\n      done(function () {\n        if (!properties.submitOnChange) {\n          // Reload grid\n          self.fetchData();\n\n        } else {\n          // Submits the entire form\n          self.submitOnChange();\n        }\n      }).fail(function () {\n        self.startLoading();\n        $.when(self.submitRollbackRequest()).always(function () {\n          self.endLoading();\n        });\n      });\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n  /**\r\n     *  Deletes  a row to the grid\r\n     */\n  deleteRow: function deleteRow(id) {\n    if (id === 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"),\n      bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    var self = this;\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Reload grid\n        self.fetchData();\n\n        if (data.type === \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          //line 310 bizagi.command.controllers.action\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      });\n    });\n  },\n\n  moreRows: function moreRows(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    if (typeof properties.originalrowsPerPage === \"undefined\") {\n      properties.originalrowsPerPage = properties.rowsPerPage;\n    }\n\n    properties.rowsPerPage += properties.originalrowsPerPage;\n\n    var dataToSend = {};\n    self.collectData(dataToSend);\n\n    self.startLoading();\n\n    if (jQuery.isEmptyObject(dataToSend)) {\n      self.moreRowsCommon(ui);\n      return;\n    }\n    // Send the data\n    self.dataService.submitData({\n      action: \"SUBMITONCHANGE\",\n      data: dataToSend,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache }).\n    done(function () {\n\n      self.endLoading();\n\n      self.moreRowsCommon(ui);\n    });\n\n  },\n\n  moreRowsCommon: function moreRowsCommon(ui) {\n    var self = this;\n    var properties = self.properties;\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n\n    $.when(self.dataReadyDeferred).done(function () {\n\n      if (properties.records != 0)\n      if (properties.records + 1 <= properties.rowsPerPage) {\n        $(\".ui-bizagi-grid-dynamic-pager\", self.getControl()).hide();\n      }\n\n    });\n  },\n\n  /**\r\n     *  Shows more info about a grid row\r\n     */\n  showMore: function showMore(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.view.grid(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      allowEdition: false,\n      formParams: formParams,\n      navigation: formParams.navigation });\n\n\n    self.startLoading();\n\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      formParams: formParams,\n      navigation: formParams.navigation }).\n    done(function () {\n      self.endLoading();\n    });\n  },\n\n  /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\n  editInline: function editInline(id) {\n    var self = this;\n    var data = self.properties.data;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    // Search row\n    var currentRow = [];\n    for (var i = 0, length = data.rows.length; i < length; i++) {\n      if (data.rows[i][0] == id) {\n        currentRow = data.rows[i];\n        break;\n      }\n    }\n\n    // Render grid view\n    var slideView = new bizagi.rendering.tablet.slide.view.grid(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      formParams: formParams,\n      navigation: formParams.navigation,\n      allowEdition: true });\n\n\n    // Render the editable view\n    $.when(\n    slideView.render({\n      row: currentRow,\n      columns: self.columns,\n      pageCacheId: properties.idPageCache,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      sessionId: form.properties.sessionId,\n      actions: form.actions,\n      validations: form.validations,\n      formParams: formParams,\n      navigation: formParams.navigation })).\n\n    done(function (data) {\n      // This code is executed when the user press save on the slide\n\n      // Update internal data\n      for (xpath in data) {\n        self.collectGridChange({ id: id, xpath: xpath, value: data[xpath], trigger: false });\n      }\n\n      // Prepare grid data\n      var dataToSend = {};\n      self.collectData(dataToSend);\n\n      // Send the data\n      self.dataService.submitData({\n        action: \"SUBMITONCHANGE\",\n        data: dataToSend,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache }).\n      done(function () {\n        // After successfully response refresh the grid\n        self.fetchData();\n      });\n    });\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        var isVisible = self.getCellOverride(key, j).visible;\n        if (self.columns[j].properties.xpath == xpath && isVisible) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n\n          if (self.properties.editable) {\n            cell = cell.find(\"input\");\n          }\n\n          cell.css(\"background-color\", argument);\n          break;\n        }\n      }\n\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: sel * f.changeCellBackgroundColor,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Changes the background for a cell\r\n     */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n\n          if (self.properties.editable) {\n            cell = cell.find(\"input\");\n          }\n\n          cell.css(\"color\", argument);\n          $(cell).find(\".ui-bizagi-cell-readonly\").css(\"color\", argument);\n          break;\n        }\n      }\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellColor,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Changes the visibility for a cell\r\n     */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n          // Change visibility\n          if (argument == true) {\n            cell.show();\n          } else {\n            cell.hide();\n          }\n\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, j).visible = argument;\n          break;\n        }\n      }\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.changeCellVisibility,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *  Changes the required for cell\r\n     */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n  },\n\n  /*\r\n     *   Sets an error on the cell\r\n     */\n  setError: function setError(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      for (var j = 0; j < self.columns.length; j++) {\n        var isVisible = self.getCellOverride(key, j).visible;\n        if (self.columns[j].properties.xpath == xpath && isVisible) {\n          var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\n          cell.parent().addClass(\"ui-bizagi-render-grid-cell-error\");\n          break;\n        }\n      }\n\n    } else {\n      if (self.pendingActions) {\n        self.pendingActions.push({\n          method: self.setError,\n          arguments: arguments });\n\n      }\n    }\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*\r\n     *   Method to start loading for ajax data and update the ui\r\n     */\n  startLoading: function startLoading(bUseTimeout) {\n    var self = this;\n\n    bizagi.loading.start();\n\n    self._super(bUseTimeout);\n  },\n\n  /*\r\n     *   Method to remove the loading message\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n\n    bizagi.loading.stop();\n\n    self._super();\n  },\n\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n\n    if (self.initialLoadDone) {\n      var control = self.getControlCell(key, xpath);\n      if (control) {\n        control.cleanData();\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            break;\n          }\n        }\n\n        var rows = self.properties.data.rows;\n        var i = 0;\n        var rowLength = rows.length;\n\n        for (; i < rowLength; i++) {\n          if (Number(key) === rows[i][0]) {\n            rows[i][j + 1] = [[\"\", \"\"]];\n            break;\n          }\n        }\n        self.cellOverrides[key] = self.cellOverrides[key] || {};\n        self.getCellOverride(key, j).value = null;\n\n        if (!self.cleanActionChanges) {\n          self.cleanActionChanges = {};\n        }\n        if (!self.cleanActionChanges[key]) {\n          self.cleanActionChanges[key] = {};\n        }\n        self.cleanActionChanges[key][xpath] = \"\";\n      }\n    } else {\n      self.pendingActions.push({\n        method: self.cleanData,\n        arguments: \"\" });\n\n    }\n  },\n\n  onTotalData: function onTotalData(ui) {\n    var self = this;\n    var properties = self.properties;\n    var data = properties.data || {};\n    var rows = data.rows;\n    var rowsLength = rows.length;\n    var showTotal = [];\n    var columnsModel = self.buildColumnModel();\n    var result;\n\n    bizagi.util.tablet.startLoading();\n\n    columnsModel.forEach(function callback(column, columnIndex) {\n      if (column.bizAgiProperties) {\n        operationState = column.bizAgiProperties.totalize.operation;\n\n        switch (operationState) {\n          case \"sum\":\n            result = rows.sum(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n            break;\n\n          case \"count\":\n            result = rows.count(function (row) {\n              //Checks if there is a DefaultValue, so assign it to the returnedvalu in case it doesn't have value\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n\n              if (!bizagi.util.isArray(return_value)) {\n                return return_value;\n              }\n\n              if (bizagi.util.isArray(return_value) && return_value.length > 0) {\n                return return_value; //If the returned value is not undefined, neither null, it will count +1\n              }\n            }, column, columnIndex);\n\n            break;\n\n          case \"max\":\n            result = rows.max(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n\n            break;\n\n          case \"min\":\n            result = rows.min(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n            break;\n\n          case \"avg\":\n            result = rows.avg(function (row) {\n              var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n              return Number(return_value);\n            }, columnIndex);\n\n            result = result.toFixed(2);\n            break;}\n\n\n        if (operationState) {\n          result = self.formatTotalizedResult(operationState, column.bizAgiProperties.type, result);\n          showTotal.push({ label: column.label, total: result });\n        }\n      }\n    });\n    self.showTotals(showTotal);\n    bizagi.loading.stop();\n  },\n\n  formatTotalizedResult: function formatTotalizedResult(operation, controlType, value) {\n    switch (operation) {\n      case 'sum':\n      case 'avg':\n      case 'min':\n      case 'max':\n        if (controlType == \"columnMoney\" || controlType == \"money\") {\n          return bizagi.util.formatMonetaryCell(value);\n        }\n        break;}\n\n\n    return value || 0;\n  },\n\n  showTotals: function showTotals(params) {\n    var self = this;\n    var modalViewTemplate = self.renderFactory.getTemplate('bizagi.grid.totalizer');\n    var data = $.extend(params, { \"orientation\": self.properties.orientation });\n    var modalView = $.fasttmpl(modalViewTemplate, data);\n\n    $(\".bz-rn-grid-totalize-container\").remove();\n\n    modalView.kendoMobileModalView({\n      close: function close() {\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true });\n\n\n    modalView.delegate(\".bz-rn-grid-totalize-close-btn\", \"click\", function () {\n      modalView.data(\"kendoMobileModalView\").close();\n    });\n\n    modalView.kendoMobileModalView(\"open\");\n  },\n\n  alternativePaginator: function alternativePaginator() {\n  } });","/*\r\n*   Name: BizAgi Tablet Render Letter Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the letter render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.letter.extend(\"bizagi.rendering.letter\", {}, {\n  /*\r\n                                                                *   Constructor\r\n                                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fix required\n    // No letter can be required on the iPad, \n    // NOTE: We must implement something to warn the user that there is an editable letter that must be filled in the PC version\n    properties.required = false;\n\n  } });","/*\r\n*   Name: BizAgi Tablet Render Button Extension\r\n*   Author: Bizagi Bizagi Team\r\n*   Comments:\r\n*   -   This script will redefine the button render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.button.extend(\"bizagi.rendering.button\", {}, {\n  /*\r\n                                                                *   Template method to implement in each device to customize each render after processed\r\n                                                                */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var button = $(\":button\", control);\n\n    // Stylize button\n    button.button();\n    button.removeClass(\"ui-state-default\");\n\n    // Bind event\n    button.click(function () {\n      // Process button actions\n      self.processButton();\n    });\n  },\n\n  /*\r\n     *   Method to render non editable values\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    // Execute the same as post-render\n    self.postRender();\n\n    // Set as disabled\n    var button = $(\":button\", control);\n    button.button(\"option\", \"disabled\", \"true\");\n  },\n  /*\r\n     *   Process the button actions workflow\r\n     */\n  processButton: function processButton() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n\n      // Check if action need conformation\n      if (properties.needsUserConfirmation) {\n        $.when(bizagi.showConfirmationBox(properties.userConfirmationMessage, \"Bizagi\", \"warning\")).\n        done(function () {\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        });\n      } else {\n        if (!properties.preventDefault) {\n          self.runButtonAction();\n        }\n        // Trigger change\n        self.triggerRenderChange({ pressed: true });\n      }\n    }\n  },\n\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n      if (result == null || result == true || result.result == \"success\" || result.type == \"success\") {\n        return self.refreshForm();\n      } else if (result.type == \"validationMessages\") {\n        try {\n          // Add validation messages \n          self.getFormContainer().addValidationMessage(result.messages);\n        } catch (e) {\n          bizagi.showMessageBox(result.messages, \"Error\");\n        }\n      }\n    }).fail(function (a, b, message) {\n      // Add error messages \n      try {\n        self.getFormContainer().addErrorMessage(message);\n      } catch (e) {\n        bizagi.showMessageBox(message, \"Error\");\n      }\n    });\n  },\n\n  // rewrite method to prevent the button on the tablet be affected when customizing on other platforms\n  processLayout: function processLayout() {\n    var self = this;\n    var properties = self.properties;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n\n    if (!visible) {\n      self.changeVisibility(visible);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render fileprint Extension\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.fileprint.extend(\"bizagi.rendering.fileprint\", {}, {\n  /*\r\n                                                                      *   Template method to implement in each device to customize each render after processed\r\n                                                                      */\n  postRender: function postRender() {\n    var self = this;\n    self.getControl().parent().hide();\n  } });","/*\r\n *   Name: Bizagi Tablet Render Link Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.link.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                                             * Configure the controls interactions\r\n                                                             * @returns {} \r\n                                                             */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    self.input = control.find(\"a\");\n\n    if (properties.value) {\n      $(self.input).on(\"click\", function (event) {\n        event.preventDefault();\n\n        if (self.isValidValue(properties.value)) {\n          window.open(encodeURI(this.getAttribute(\"href\")), \"_system\");\n        }\n      });\n    } else {\n      link.addClass(\"bz-rn-link-disabled\");\n      control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    }\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value The control's value that is needed to be displayed\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.isValidValue(value)) {\n      //Get the decoded version of the URL\n      value = getFullyDecodedURI($.trim(value));\n      self.input.attr(\"href\", value);\n      self.input.attr(\"target\", \"_blank\");\n      self.input.attr(\"data-rel\", \"external\");\n    }\n  },\n\n  /*\r\n      *   Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute configure handlers\n    if (properties.value) {\n      self.configureHandlers();\n    }\n\n    // Help Text Control\n    self.configureHelpText();\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value Stored value in the control\r\n      */\n  isValidValue: function isValidValue(value) {\n    return value && $.trim(value + \"\").toLowerCase().match(/^(http|https):\\/\\//) !== null || false;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                       */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base \n    this._super();\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n    // Apply plugin\n    //$(\".ui-bizagi-render-checkList-label\", self.checkListGroup).check();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    // Bind change event\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      //todo: change bind type for IE\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = false;\n        if ($(this).hasClass(\"bz-check\")) {\n          $(this).removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n          checked = false;\n        } else {\n          $(this).removeClass(\"bz-full-ball\").addClass(\"bz-check\");\n          checked = true;\n        }\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n        var itemId = $(this).data(\"item-guid\");\n        var checked = false;\n        if ($(this).hasClass(\"bz-check\")) {\n          $(this).removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n          checked = false;\n        } else {\n          $(this).removeClass(\"bz-full-ball\").addClass(\"bz-check\");\n          checked = true;\n        }\n        self.onCheckListGroupChange(itemId, checked);\n      });\n    }\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    if (!bizagi.util.isIE()) {\n      // PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).check(\"uncheckItem\");\n    } else {\n      // NON PLUGIN IMPLEMENTATION\n      $(\"input[type=checkbox]\", self.checkListGroup).removeAttr(\"checked\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.activityCheckList\", {}, {\n\n  /*\r\n                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n    self.header = $(\".ui-bizagi-render-checkList-activity-work\", self.element);\n    self.addButton = $(\".ui-bizagi-render-checkList-add-item\", self.control);\n    self.newItemName = $(\".ui-bizagi-render-checkList-input-name\", self.control);\n    self.separator = $(\".ui-bizagi-render-checkList-separator\", self.element);\n    self.goalActivity = $(\".ui-bizagi-render-checkList-goal-activity\", self.element);\n    self.addEditButton = $(\".add-edit-item-button-checklist\", self.control);\n    self.cancelEditButton = $(\".cancel-edit-item-button-checklist\", self.control);\n    self.additionalElements();\n    //self.configureHandlers();\n\n    self.notifyLoadItems();\n\n    //self.configureProgressHandlers();\n  },\n\n  /**\r\n      * Event Handlers\r\n      *\r\n     configureProgressHandlers: function () {\r\n         var self = this;\r\n           bizagi.webpart.subscribe('onLoadDataFromFormActivityPlan', function (e, params) {\r\n             var activityWorkTitle = self.getResource(\"render-activity-check-list-activitywork\") + \" (\" + params.activityWork.progress + \"%)\";\r\n               $(\".ui-bizagi-render-checkList-activity-work\").text(activityWorkTitle);\r\n             e.stopImmediatePropagation();\r\n         });\r\n     },*/\n\n\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      var resolvedItems = self.properties.items.filter(function (i) {\n        return i.resolved;\n      }).length;\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': true,\n        'idActivity': self.properties.idActivity,\n        'itemsResolved': resolvedItems,\n        'items': self.properties.items,\n        'progress': self.properties.activityWork }));\n\n\n      bizagi.webpart.publish(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n    var control = self.getControl();\n    var activityWorkTitle = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    var activityFormTitle = this.getResource(\"render-activity-check-list-form\");\n    if (!(self.header && self.header.length > 0)) {\n      self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-activity-work\").append($(\"<span/>\").text(bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\"))));\n    }\n    if (!(self.goalActivity && self.goalActivity.length > 0)) {\n      if (self.properties.activityDescription && self.properties.activityDescription !== \"\") {\n        self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-goal-activity\").append(\"<h4><span class='ui-bizagi-wp-bold'>\" +\n        bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") +\n        \": </span><span>\" + self.properties.activityDescription + \"</span></h4>\"));\n      }\n    }\n    if (!(self.addButton && self.addButton.length > 0)) {\n      self.control.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-add-item\").append($(\"<button/>\").text(\"+\")));\n    }\n    if (!(self.separator && self.separator.length > 0)) {\n      self.element.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-separator\").append($(\"<span/>\").text(activityFormTitle)));\n    }\n    if (self.addEditButton && self.addEditButton.length > 0) {\n      self.addEditButton.hide();\n    }\n    if (self.cancelEditButton && self.cancelEditButton.length > 0) {\n      self.cancelEditButton.hide();\n    }\n    control.parent().addClass(\"render-activity-check\");\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n\n    $(\".ui-bizagi-render-checkList-add-item button\", control).unbind(\"click\").click(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".ui-bizagi-render-checkList-input-name\", itemSelected).focus();\n      }\n    });\n\n    $(\".delete-item-from-activity\", self.control).bind(\"click\", function () {\n      var that = this;\n      var message = bizagi.localization.getResource(\"workportal-widget-reports-confirm\");\n      var contentHolder = $(this).closest(\".ui-bizagi-render-checkList-item\");\n\n      contentHolder.addClass(\"ui-bizagi-to-remove\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n\n        var itemId = $(that).closest(\".ui-bizagi-render-checkList-item\").data(\"item-guid\");\n\n        self.deleteItem(itemId);\n        self.addButton.show();\n\n      }).fail(function () {\n        contentHolder.removeClass(\"ui-bizagi-to-remove\");\n      });\n    });\n\n    $(\".activity-work-items\", self.control).bind(\"click\", function () {\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemId = element.data(\"item-guid\");\n      var itemPosition = element.data(\"item-position\");\n      self.selectItem(itemId, itemPosition);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n\n    for (var i = 0; i < self.properties.items.length; i++) {\n      self.properties.items[i].selected = self.properties.items[i].guid === itemId;\n    }\n    self.repaintControl();\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\");\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var itemContent = itemSelectedName.val();\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n    for (var i = 0; i < self.properties.items.length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.addSelectedHandlers();\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.addButton.hide();\n    self.newItemName.focus();\n    self.newItemName.blur(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n      var valueInput = itemSelectedName.val();\n\n      if (valueInput === \"\" && self.properties.items && self.properties.items.length >= 1 &&\n      self.properties.items.slice(-1)[0].name === \"\") {\n        self.properties.items.pop();\n      }\n    });\n    self.addSelectedHandlers();\n    self.newItemName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        self.addItem();\n        self.prepareNewItem();\n      }\n    });\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    itemSelectedName.focus();\n    $(\".add-item-button-checklist\", itemSelected).bind(\"click\", function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      }\n    });\n    $(\".cancel-item-button-checklist\", itemSelected).bind(\"click\", function (e) {\n      var newItemName = itemSelectedName.val();\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemPosition = element.data(\"item-position\");\n      var guidItem = element.data(\"item-guid\");\n\n      if (newItemName && newItemName !== \"\" && self.properties.items[itemPosition].name !== \"\") {\n        self.properties.items[itemPosition].selected = false;\n      }\n      if (newItemName === \"\" || self.properties.items[itemPosition].name === \"\") {\n        self.deleteItem(guidItem);\n      }\n      self.addButton.show();\n      self.repaintControl();\n      self.configureHandlers();\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var newItemName = itemSelectedName.val();\n\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.configureHandlers();\n    self.addButton.show();\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var control = self.getControl();\n    var checkListHtml = self.renderControl();\n    $(\".ui-bizagi-render-checkList\", self.control).replaceWith(checkListHtml);\n    self.postRender();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    control = self.getControl(),\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 100;\n    }\n\n    self.notifyLoadItems();\n  },\n\n  getValue: function getValue(data) {\n    var self = this;\n\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          renderValues[properties.xpath] = {\n            idActivity: idActivity,\n            items: value };\n\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    } else {\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': false }));\n\n    }\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        break;\n      }\n    }\n  } });","/*\r\n *   Name: BizAgi Render Layout Image Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable image control inside templates\r\n *   -   This control is based on the image no flash render control\r\n */\n\nbizagi.rendering.layoutImage.extend(\"bizagi.rendering.layoutImage\", {},\n\n{\n  renderControl: function renderControl() {\n    var self = this;\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n    self.control = self.getControl();\n    return $.kendoTmpl(templateUri, {});\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\n      //Get image of customer in binary format\n      var url = self.getImageUri();\n      $.ajax({\n        url: url,\n        type: \"GET\",\n        dataType: \"binary\",\n        processData: false,\n        success: function success(blob) {\n\n          if (typeof blob == \"string\") {\n            var xhr = arguments[2];\n            var contentType = xhr.getResponseHeader('Content-type');\n            blob = bizagi.util.media.byteArrayToBlob(bizagi.util.media.stringToByteArray(blob), contentType);\n          }\n\n          var urlCreator = window.URL || window.webkitURL;\n          var imageUrl = urlCreator.createObjectURL(blob);\n\n          $(control).find('img').attr(\"src\", imageUrl);\n        } });\n\n    }\n  },\n  /**\r\n      * Gets the url to get the array image\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n    var templateControl = self.parent.parent;\n    var renderParams = templateControl.properties.paramsRender || {};\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value,\n      idcase: renderParams.idRender ? renderParams.formParams.idCase : \"_\",\n      idworkitem: renderParams.idRender ? renderParams.formParams.idWorkitem : \"_\",\n      contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\" };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  },\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return [self.value];\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n *   -   This control is based on the link render control\r\n */\n\nbizagi.rendering.layoutLink.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                                         *   Template method to implement in each children to customize each control\r\n                                                                         */\n  render: function render() {\n    var self = this;\n    var container = self.getContainerRender();\n    container.addClass(\"bz-command-not-edit\");\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var element = self.element;\n    if (element) {\n      element.on(\"click\", $.proxy(self.onClickElement, self));\n    }\n  },\n\n  onClickElement: function onClickElement() {\n    var self = this;\n    var params = {\n      'displayName': self.properties.displayName,\n      'navigateFromRender': false,\n      'reference': self.properties.reference,\n      'referenceType': self.properties.referenceType,\n      'xpath': self.properties.xpath };\n\n\n    if (bizagi.kendoMobileApplication && bizagi.kendoMobileApplication.view().id === \"#renderSplitView\") {\n      params.navigateFromRender = true;\n    }\n\n    self.triggerGlobalHandler(\"DATA-NAVIGATION\", params);\n  } });","/*\r\n*   Name: BizAgi Render Layout Label Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for labels inside templates\r\n*/\n\nbizagi.rendering.layoutLabel.extend(\"bizagi.rendering.layoutLabel\", {}, {\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    self.properties.displayName = val;\n    this._super(val, triggerEvents);\n    var control = self.getControl();\n\n    if (control) {\n      $(\".ui-bizagi-render-label\", control).text(val);\n    }\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\nbizagi.rendering.layoutText.extend(\"bizagi.rendering.layoutText\", {}, {});","/*\r\n*   Name: BizAgi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.layoutDateTime.extend(\"bizagi.rendering.layoutDateTime\", {}, {});","/*\r\n *   Name: BizAgi Desktop Render Template number Extension\r\n *   Author: Mauricio Sanchez\r\n *   Comments:\r\n *   -   This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutNumber.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                                             *   Sets the value in the rendered control\r\n                                                                             */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    value = value ? self.getDisplayValue(value) : self.getDisplayValue(0);\n    self.properties.displayName = value;\n    this._super(value, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(value);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render Template Money Extension\r\n *   Author: Andres Fernando Muoz\r\n *   Comments:\r\n *   -   This script will redefine the money render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutMoney.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                                           *   Sets the value in the rendered control\r\n                                                                           */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    value = value ? self.getDisplayValue(value) : self.getDisplayValue(0);\n    self.properties.displayName = value;\n    this._super(value, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(value);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render Layout Upload\r\n *   Author: Bizagi\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\n\nbizagi.rendering.layoutUpload.extend(\"bizagi.rendering.layoutUpload\", {}, {\n  /**\r\n                                                                             *   Template method to implement in each children to customize each control\r\n                                                                             */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties,\n    defer = $.Deferred();\n\n    $.when(self.getValueFilesByData(bizagi.clone(properties))).done(function (properties, valueResult) {\n      self.properties = properties;\n      self.files = valueResult.files;\n      defer.resolve(self.getHTMLFiles());\n    });\n\n    return defer.promise();\n  },\n\n  getHTMLFiles: function getHTMLFiles() {\n    var self = this;\n    var files = $.map(self.files, function (el) {\n      var file = { \"id\": el[0], \"filename\": el[1] };\n      file.url = self.buildItemUrl(file);\n      return file;\n    });\n\n    var template = self.renderFactory.getTemplate(\"layout-upload\");\n    return $.fasttmpl(template, { \"files\": files });\n  },\n\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    var filesLinkElements = control.find(\".ui-bizagi-render-layout-upload-item a\");\n\n    filesLinkElements.on(\"click\", function () {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n        if (error.responseText) {\n          self.getFormContainer().failHandler(error.responseText);\n        }\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      *   Builds the upload item url\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this,\n    properties = self.properties;\n\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileEntityUrl({\n      isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\n      xpath: self.getUploadXpath(),\n      fileId: file.id,\n      idRender: form.properties.paramsRender.idRender || \"undefined\",\n      xpathContext: properties.xpathContext,\n      idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\n      xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\n      sessionId: form.properties.sessionId,\n      surrogatekey: self.properties.value.surrogateKey,\n      guidentity: self.properties.value.guid });\n\n  } });","/*\r\n *   Name: BizAgi Tablet Render Form Link Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.formLink.extend(\"bizagi.rendering.formLink\", {}, {\n  /* POSTRENDER\r\n                                                                     ===========================================*/\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    // Bind click event\n    link.click(function () {\n      // Open the link inside a slideForm\n      if (self.properties.hasentryrule) {\n        var form = self.getFormContainer();\n        $.when(form.saveForm()).done(function () {\n          self.submitCheckpointRequest().done(function () {\n            return self.openLinkRule(\"entryrule\");\n          });\n        });\n      } else {\n        self.openLink();\n      }\n\n    });\n\n    if (!self.properties.editable) {\n      self.element.addClass(\"bz-rn-read-only\");\n    }\n  },\n\n  /* OPENS LINK DISPLAY FORM INSIDE A DIALOG\r\n      ===========================================*/\n  openLink: function openLink() {\n    var self = this;\n    // var form = self.getFormContainer();\n\n    // Fixed multiple recursion of Formlinks inside Formlinks\n    // var formParams = $.extend({}, form.params, self.getFormParams());\n\n    // Send edit request\n    $.when(self.submitEditRequest()).\n    done(function () {\n      bizagi.util.tablet.startLoading();\n      //self.paintFormLink();\n\n      $.when(self.paintFormLink()).done(function () {\n        bizagi.util.tablet.stopLoading();\n      }).fail(function () {//Executes Rollback actionpaintForm\n        bizagi.util.tablet.startLoading();\n        self.rollbackForm();\n      }).always(function () {\n        bizagi.util.tablet.stopLoading();\n      });\n\n    }).always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n  },\n\n  /*\r\n      *\r\n      */\n  openLinkRule: function openLinkRule(property) {\n    var self = this;\n    var def = new $.Deferred();\n\n    bizagi.util.tablet.startLoading();\n\n    self.getPropertyValue(property, {}).\n    done(function (dataRuleResp) {\n      dataRuleResp = dataRuleResp || {};\n      if (typeof dataRuleResp.messages !== \"undefined\" && dataRuleResp.messages !== null) {\n        var message = dataRuleResp.messages[0];\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(message);\n        def.reject();\n      } else {\n        if (property == \"entryrule\") {\n          self.openLink();\n        }\n      }\n      def.resolve();\n    }).fail(function () {\n      def.reject();\n    }).\n    always(function () {\n      bizagi.util.tablet.stopLoading();\n    });\n    return def.promise();\n  },\n\n  /*\r\n      *   Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Execute the same as post-render\n    self.postRender();\n  },\n\n  /*\r\n      *\r\n      */\n  paintFormLink: function paintFormLink() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var formParams = self.getFormParams();\n\n    var deferred = $.Deferred();\n\n    // Instantiate slide form object\n    var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\n      title: self.properties.displayName || \"\",\n      container: form.container,\n      navigation: self.getParams().navigation,\n      showSaveButton: properties.editable,\n      orientation: properties.orientation || \"ltr\",\n      onSave: function onSave(data) {\n        // When the data is saved then\n        return self.actionSave(data).then(function (result) {\n          //Process the result\n          return self.submitForm(result).\n          done(function () {\n            deferred.resolve(result);\n          }).fail(function () {\n            deferred.reject();\n          });\n        }).fail(function (result) {\n          deferred.reject(result);\n        });\n      },\n      goBack: function goBack() {\n        self.rollbackForm();\n      } });\n\n\n    slideView.render({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      formParams: formParams,\n      url: properties.editPage }).\n    fail(function () {\n      // Sends a rollback request to delete checkpoints\n      deferred.reject();\n    });\n\n    return deferred.promise();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      // Add error messages\n      var form = self.getFormContainer();\n      form.validationController.showErrorMessage(jqXHR.message);\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  actionSave: function actionSave(data) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitSaveRequest(data)).done(function (result) {\n      try {\n        if (result.type == \"validationMessages\") {\n          // Add validation messages\n          self.form.addValidationMessage(result.messages);\n        } else if (result.type == \"error\") {\n          // Add error messages\n          deferred.reject(result);\n        }\n\n        deferred.resolve(result);\n      } catch (ex) {\n        deferred.reject({ noAction: true });\n      }\n    }).fail(function (data) {\n      deferred.reject(data);\n    });\n\n    return deferred.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (properties.editable === false && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext === undefined || properties.xpathContext === \"\" ? xpath : xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext,\n      submitData: data });\n\n  },\n\n  /*\r\n      *\r\n      */\n  submitForm: function submitForm(result) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    var executeSubmitOnChange = true;\n\n    if (result && result.type == \"validationMessages\") {\n      executeSubmitOnChange = false;\n    }\n\n    if (self.properties.hasexitrule) {\n      self.closeExitRule().done(function () {\n        if (executeSubmitOnChange) {\n          //All commits must be resolved before the submitOnChange is executed\n          self.submitCommitRequest().done(function () {\n            if (self.properties.hasentryrule) {\n              self.submitCommitRequest().done(function () {\n                $.when(self.submitOnChange()).done(function () {\n                  deferred.resolve(result);\n                });\n              });\n            } else {\n              $.when(self.submitOnChange()).done(function () {\n                deferred.resolve(result);\n              });\n            }\n          });\n        }\n      }).fail(function () {\n        deferred.reject();\n      });\n\n    } else if (executeSubmitOnChange) {\n      if (executeSubmitOnChange) {\n        //All commits must be resolved before the submitOnChange is executed\n        self.submitCommitRequest().done(function () {\n          if (self.properties.hasentryrule) {\n            self.submitCommitRequest().done(function () {\n              $.when(self.submitOnChange()).done(function () {\n                deferred.resolve(result);\n              });\n            });\n          } else {\n            $.when(self.submitOnChange()).done(function () {\n              deferred.resolve(result);\n            });\n          }\n        }).fail(function () {\n          deferred.reject();\n        });\n      }\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  closeExitRule: function closeExitRule() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.hasexitrule) {\n      $.when(self.openLinkRule(\"exitrule\")).done(function (result) {\n        def.resolve(result);\n      }).fail(function () {\n        def.reject();\n      });\n    }\n\n    return def.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  rollbackForm: function rollbackForm() {\n    var self = this;\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      //Sends additional rollback request to delete checkpoint from entry rule\n      if (self.properties.hasentryrule) {\n        self.submitRollbackRequest();\n      }\n    });\n  },\n\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var self = this;\n    var xpathContext = self.properties.xpathContext;\n    var parentXpathContext = self.getXpathContext();\n    if (parentXpathContext && xpathContext) {\n      if (xpathContext.indexOf(parentXpathContext) === 0) {\n        return xpathContext;\n      } else {\n        return parentXpathContext + \".\" + xpathContext;\n      }\n    } else {\n      return xpathContext;\n    }\n  } });","/*\r\n*   Name: BizAgi tablet Render Hidden Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the hidden render class to adjust to tablet devices\r\n*/\n\n\n// Extends itself\nbizagi.rendering.hidden.extend(\"bizagi.rendering.hidden\", {}, {});","/*\r\n*   Name: BizAgi Tablet Render Money Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the money render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.money.extend(\"bizagi.rendering.money\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var value = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyNumber\");\n    var tmpl = $($.kendoTmpl(template, { value: value }));\n    $(\".bz-cm-icon\", tmpl).removeClass(\"bz-rn-icon-number\").removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\").addClass(\"bz-rn-icon-coin\");\n\n    return tmpl.get(0).outerHTML;\n  },\n\n  /* POSTRENDER \r\n     =====================================================*/\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    self.numericInput = $(\".ui-bizagi-render-numeric\", self.getControl());\n    self.numericIcon = $(\".bz-cm-icon\", self.getControl());\n\n    self.numericIcon.removeClass(\"bz-rn-icon-number\").addClass(\"bz-rn-icon-coin\");\n    self.numericIcon.removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\");\n\n    //Adjust the input in order to accept the comma input as decimal separator for certain language standars\n    if (self.properties.decimalSymbol == ',') {\n      self.numericInput.attr(\"lang\", \"en-150\");\n    }\n\n    var input = $(\"input\", self.element);\n    if (!input || input.length == 0) return;\n  },\n\n\n  /*\r\n     *\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    control.closest(\".ui-bizagi-render\").addClass(\"bz-rn-read-only\");\n    self.numericInput = $(\".ui-bizagi-render-numeric\", control);\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set value in input\n    if (value != null) {\n      if (properties.editable) {\n        self.numericInput.val(value);\n\n        // Formats the input\n        self.attachFormatCurrency();\n        self.executeFormatCurrencyPlugin();\n      } else {\n        self.numericInput.text(self.getDisplayValue());\n      }\n    }\n  } });","/*  \r\n *   Name: BizAgi Tablet Render list Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from base list\nbizagi.rendering.radio.extend('bizagi.rendering.radio', {}, {\n\n  /**\r\n                                                               * Post render\r\n                                                               * @returns {} \r\n                                                               */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base \n    this._super();\n\n    self.combo = self.getControl();\n\n    // Set control container to behave as a block\n    self.combo.addClass(\"ui-bizagi-render-control-radio\");\n\n    // Help Text Control\n    self.configureHelpText();\n\n    // Bind changes to set value\n    self.combo.change(function () {\n      var selectedRadio = self.combo.find(\"input:radio:checked\");\n\n      self.combo.find(\".checked\").removeClass(\"checked\");\n      self.combo.find(\".bz-check\").addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n\n      selectedRadio.closest(\"div\").addClass(\"checked\");\n      selectedRadio.addClass(\"bz-check\");\n      selectedRadio.removeClass(\"bz-unchecked\");\n\n      // The value is the Id LOL\n      var newValue = {\n        id: selectedRadio.prop(\"value\"),\n        value: selectedRadio.siblings(\"label\").text() };\n\n\n      self.setValue(newValue);\n    });\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Set display readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var container = self.getControl();\n\n    self._super();\n\n    container.addClass(\"bz-rn-read-only\");\n\n    // Help Text Control\n    self.configureHelpText();\n  },\n\n  /**\r\n      * Set display value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (value !== undefined && value.id != null) {\n      if (properties.editable) {\n        // Find the control to check where value is\n        var comboItem = self.combo.find(\"input[type='radio'][value='\" + value.id + \"']\");\n        comboItem.prop(\"checked\", \"checked\");\n        comboItem.closest(\"div\").addClass(\"checked\");\n        comboItem.addClass(\"bz-check\").removeClass(\"bz-unchecked\");\n      } else {\n        // Find the control to check where value is\n        self.getControl().html(value.value);\n      }\n    }\n  },\n\n\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    var selectedItem = self.element.find(\".ui-bizagi-render-radio-item .bz-check\");\n\n    selectedItem.prop(\"checked\", false).removeClass(\"bz-check\").addClass(\"bz-unchecked\");\n    self.setValue(value, false);\n    self.setDisplayValue(value);\n  } });","/*\r\n *   Name: BizAgi Tablet Render Cascading combo Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to tablet devices\r\n */\n\n// Extends from base cascading combo, then apply tablet combo stuff\nbizagi.rendering.cascadingCombo.extend(\"bizagi.rendering.cascadingCombo\", {}, {\n\n  init: function init(params) {\n    var self = this;\n    self._super(params);\n    this.properties.data = this.properties.data || [];\n\n    self.bind(\"select\", function (ex, value) {\n      self.onComboChange(value);\n    });\n  },\n  /*\r\n      * Generates the read-only render control\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return bizagi.rendering.combo.prototype.renderReadOnly.apply(this, arguments);\n  },\n\n  initializeCombo: function initializeCombo() {\n    var self = this;\n    var parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      if (parentCombo.properties.type == \"cascadingCombo\") {\n        self.isDependant = true;\n        parentCombo.dependants.push(self);\n        if (self.getValue() != null) {\n          self.properties.parentComboValue = self.getValue().id;\n        } else {\n          self.initializingCascadingCombo = true;\n        }\n      }\n    }\n\n    self.initialValueSet = true;\n    $.when(bizagi.rendering.combo.prototype.initializeCombo.apply(self, arguments)).\n    done(function () {\n      if (self.value && self.isDependant == false) {\n        self.triggerHandler(\"select\", self.value);\n      }\n      self.initialValueSet = false;\n    });\n  },\n\n  bindDependantCombo: function bindDependantCombo() {\n\n  },\n\n  postRender: function postRender() {\n    bizagi.rendering.combo.prototype.postRender.apply(this, arguments);\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    bizagi.rendering.combo.prototype.postRenderReadOnly.apply(this, arguments);\n  },\n\n  renderEdition: function renderEdition() {\n    bizagi.rendering.combo.prototype.renderEdition.apply(this, arguments);\n  },\n\n  configureCombo: function configureCombo() {\n    bizagi.rendering.combo.prototype.configureCombo.apply(this, arguments);\n  },\n\n  configureModalViewHandlers: function configureModalViewHandlers() {\n    bizagi.rendering.combo.prototype.configureModalViewHandlers.apply(this, arguments);\n  },\n\n  filterList: function filterList() {\n    bizagi.rendering.combo.prototype.filterList.apply(this, arguments);\n  },\n\n  actionSave: function actionSave() {\n    bizagi.rendering.combo.prototype.actionSave.apply(this, arguments);\n  },\n\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    bizagi.rendering.combo.prototype.setModalViewDisplayValue.apply(this, arguments);\n  },\n\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    bizagi.rendering.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (value === \"\") {\n      value = { id: \"\", value: \"\" };\n    }\n\n    if (!!value) {\n      if (self.value === null || self.value.id !== value.id) {\n        self.triggerHandler(\"select\", value);\n      }\n\n      this._super(value, triggerEvents);\n    }\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    bizagi.rendering.combo.prototype.cleanData.apply(this, arguments);\n  },\n\n  resetData: function resetData() {\n    bizagi.rendering.combo.prototype.resetData.apply(this, arguments);\n  },\n\n  changeCombo: function changeCombo(valueItem, valueObjet) {\n    bizagi.rendering.combo.prototype.changeCombo.apply(this, arguments);\n  },\n\n  processComboData: function processComboData(data) {\n    bizagi.rendering.combo.prototype.processComboData.apply(this, arguments);\n  },\n\n  validateValue: function validateValue(value) {\n    bizagi.rendering.combo.prototype.validateValue.apply(this, arguments);\n  },\n\n  /*\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return bizagi.rendering.combo.prototype.getSelectedValue.call(this, arguments);\n  },\n\n  /*\r\n      *   Handler for combo change\r\n      */\n  onComboChange: function onComboChange(newValue) {\n    var self = this;\n    self.selectedValue = newValue.value;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = newValue.id;\n\n    $.each(this.dependants, function (key, dependant) {\n      dependant.properties.params = params;\n      dependant.properties.parentComboValue = newValue.id;\n\n      if (newValue.id == \"\") {\n        dependant.resetData();\n        dependant.setDisplayValue({ id: \"\", value: \"\" });\n      } else {\n        $.when(dependant.getData(params)).done(function (data) {\n          dependant.properties.data = data;\n          if (dependant.value !== null) {\n            var selected = dependant.findDataValueById(dependant.value.id);\n            if (selected) {\n              if (selected.id == \"\" && self.value && self.value.value == \"\") {\n                dependant.resetData();\n                dependant.setDisplayValue({ id: \"\", value: \"\" });\n              } else {\n                dependant.triggerHandler(\"select\", selected);\n              }\n            } else\n            {\n              dependant.setDisplayValue({ id: \"\", value: \"\" });\n              dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n            }\n          } else {\n            dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n          }\n        });\n      }\n    });\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  } });","/**\r\n*   Name: BizAgi Tablet Render list Extension\r\n*   Author: Cristian O\r\n*   Date: 2015 - Oct - 10\r\n*   Comments:\r\n*   -   This script will redefine the list render class to adjust to tablet devices\r\n*/\n\n// Extends from base list \nbizagi.rendering.list.extend(\"bizagi.rendering.list\", {}, {\n  postRender: function postRender() {\n    // Call combo postRender\n    var self = this;\n    var control = self.getControl();\n\n    // Call base \n    this._super();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n\n    // Apply plugin\n    self.list = $(\".ui-bizagi-render-list\", control);\n\n    if (!self.properties.editable) {\n      //Add styles class\n      container.addClass(\"bz-command-not-edit\");\n      self.list.attr('readonly', \"readonly\");\n\n      var value = self.properties.value ? self.properties.value.value : \"- - \";\n\n      self.control.html(\"<span class=\\\"bz-command-not-edit bz-rn-align-class bz-rn-text\\\">\" + value + \"</span>\");\n    }\n\n    //Show clear icon\n    $.when(self.ready()).done(function () {\n      if (!self.hasValue()) {\n        self.getControl().find(\".bz-rn-input-selected\").html(\"-------------\");\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").hide(500);\n      } else {\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").show(500);\n      }\n    });\n\n    self.configureListHandlers();\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n     * Set display readonly\r\n     * @returns {} \r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    self._super();\n    self.list = control.find(\".readonly-control\");\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    self.list.find(\".see-more-icon\").bind(\"click\", function () {\n      var template = self.renderFactory.getTemplate(\"listModalView\");\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': self.properties.data,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n\n      modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n    });\n\n    //Setting the initial selected display value\n    self.list.on(\"click\", \".bz-rn-regular-element\", function () {\n      var val = $(this).data(\"value\");\n      var label = $(this).text();\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.selectedValue = newValue.value;\n      self.setValue(newValue);\n      self.setDisplayValue(newValue);\n    });\n\n    //Set clear event\n    control.find(\".bz-rn-first-element-container\").on(\"click\", \".bz-wp-list-clear-icon-list\", function () {\n      var val = \"\";\n      var label = \"-------------\";\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.setValue(newValue);\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".ui-bizagi-render-list-elements li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Closing modalview\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('change keypress keyup change', function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n    self.setModalViewDisplayValue();\n\n    //Setting the initial selected display value\n    self.modalViewList.on(\"click\", \"li\", function () {\n      self.modalViewList.find(\"li\").filter(function () {\n        if ($(this).hasClass(\"ui-state-active\")) {\n          return $(this);\n        }\n      }).removeClass(\"ui-state-focus ui-selected ui-state-active\");\n\n      $(this).addClass(\"ui-state-focus ui-selected ui-state-active\");\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.modalViewList);\n      var _value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      if (typeof _value !== \"undefined\") {\n        var newValue = { \"id\": _value, \"value\": label };\n        self.setValue(newValue);\n        self.selectedValue = newValue.value;\n        self.setDisplayValue(newValue);\n      }\n    }).fail(function () {\n    });\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n     =====================================================*/\n  /**\r\n                                                             *   Sets the value in the rendered control\r\n                                                             */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (typeof value !== \"undefined\") {\n      if (properties.editable) {\n\n        control.find(\".bz-rn-input-selected\").html(value.value);\n\n        if (value.value === \"-------------\" || value.value === \"\") {\n          control.find(\".bz-wp-list-clear-icon-list\").hide();\n        } else {\n          control.find(\".bz-wp-list-clear-icon-list\").show();\n        }\n      } else {\n        self.list.text(value.value);\n      }\n    }\n  },\n\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.list && properties.editable &&\n    self.properties.value && typeof self.properties.value !== \"undefined\" &&\n    self.properties.value.id !== \"\") {\n      $(\"#ui-bizagi-list-\" + self.properties.value.id, self.modalViewList).\n      addClass(\"ui-state-focus ui-selected ui-state-active\");\n    }\n  },\n\n  /**\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n    // Nothing todo, all events apply in selectable plugin\n  },\n\n  /**\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n    var self = this;\n    return self.selectedValue;\n  } });","/*\r\n *   Name: Bizagi Tablet Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the MultiSelect render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", {\n  MORE_OPTION_WIDTH: 40,\n  SEARCH_MIN_LENGTH: 1,\n  temporalElements: {} },\n{\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var $control = this.getControl();\n    $(\".bz-multiselect__arrow\", $control).\n    on(\"click\", this.openModalView.bind(this));\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li div.bz-btn-icn\", this.onUnselectElement.bind(this)).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var $control = this.getControl();\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  onUnselectElement: function onUnselectElement(ev) {\n    var $element = $(ev.target);\n    var idToRemove = $element.data(\"id\");\n\n    // Remove element\n    this.removeElement({ id: idToRemove });\n    this.addSelectedElements();\n  },\n\n  onShowSelectedElements: function onShowSelectedElements(ev) {\n    var self = this;\n    var $element = $(ev.currentTarget);\n    var index = $element.data('index');\n    var values = self.getDataValue();\n    var valuesToShow = (values || []).slice(index);\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tags\");\n    var $listView = this.showFloatListView(template, {\n      datasource: valuesToShow,\n      editable: self.properties.editable });\n\n\n    var $tagElements = $('ul.bz-multiselect__tags', $listView);\n\n    $tagElements.on(\"click, mousedown\", \"li div.bz-btn-icn\", function (ev) {\n      self.onUnselectElement(ev);\n      $listView.remove();\n    });\n\n    $listView.on(\"closeView\", function () {\n      $tagElements.off(\"click\", \"li div.bz-btn-icn\", self.onUnselectElement.bind(self));\n      $listView.remove();\n    });\n\n  },\n\n  openModalView: function openModalView() {\n    //Creating modal view\n    var self = this;\n    //Reset the temporal array\n    self.Class.temporalElements = {};\n    var template = self.renderFactory.getTemplate('multiselectModalView');\n    var values = self.getDataValue();\n    var options = {\n      selected: values,\n      isChecked: function isChecked(id) {\n        return self.markAsChecked.call(this, id);\n      } };\n\n\n    this.getData().done(function (result) {\n      var data = {\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation,\n        \"datasource\": result,\n        \"options\": options };\n\n      try {\n        var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n        for (var i = 0, length = values.length; i < length; i++) {\n          self.Class.temporalElements[values[i].id] = values[i];\n        }\n        var modalView = $($.trim(modalViewTemplate(data)));\n        self.modalListHandlers(modalView);\n\n        modalView.kendoMobileModalView({\n          close: function close() {\n            self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n            this.destroy();\n            this.element.remove();\n          },\n          useNativeScrolling: true,\n          modal: false });\n\n\n        self.configureModalViewHandlers(modalView);\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modalView.kendoMobileModalView('open');\n\n        modalView.closest(\".k-animation-container\").addClass(\"bz-rn-new-modalview-position\");\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n    var $listContainer = inputContainer.find(\".bz-multiselect__list li\");\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n        $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      }\n\n      // Getting and showing the data\n      self.filterList(this.value, $listContainer);\n    }).focus(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").addClass(\"searching\");\n    }).blur(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").removeClass(\"searching\");\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      // Getting and showing the data\n      self.filterList(term, $listContainer);\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele);\n    });\n\n    self.setValue(tempArray);\n    self.addSelectedElements();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = self.getControl();\n    var values = self.getDataValue();\n    var totalValues = values.length;\n    var $tagsContainer = $('ul.bz-multiselect__tags', $control);\n    var editable = this.properties.editable;\n    $tagsContainer.empty();\n\n    if (totalValues > 0) {\n\n      var template = this.renderFactory.getTemplate(\"list-multiselect-tag\");\n\n      for (var i = 0; i < totalValues; i++) {\n        var item = values[i];\n        var data = { id: item.id, value: item.value, editable: editable };\n        var elementTemplate = kendo.template(template, { useWithBlock: false });\n        var $ChildToAdd = $($.trim(elementTemplate(data)));\n\n        $tagsContainer.append($ChildToAdd);\n\n        // Process the control in the layout\n        this.processControlLayout(this.properties.valueFormat || {});\n\n        if (!this.canAddMoreItems($tagsContainer)) {\n          // Remove last item added\n          $tagsContainer.\n          children().\n          last().\n          remove();\n\n          // Add the view mode item\n          var data = {\n            'value': totalValues - i,\n            'index': i };\n\n\n          var viewMoreTemplate = kendo.template(this.renderFactory.getTemplate(\"list-multiselect-view-more\"), { useWithBlock: false });\n          var $viewMore = $($.trim(viewMoreTemplate(data)));\n          $tagsContainer.append($viewMore);\n          break;\n        }\n      }\n    }\n\n  },\n\n  modalListHandlers: function modalListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-multiselect__list li\");\n    var checkbox = $listContainer.find(\"input[type=checkbox]\");\n\n    $floatListContext.find(\".bz-multiselect__search_input\").bind(\"change keypress keyup mousedown\", function (evt) {\n      evt.stopPropagation();\n\n      self.filterList(this.value, $listContainer);\n    });\n\n    checkbox.change(function () {\n      var $context = $(this);\n      var isChecked = $context.is(\":checked\");\n      var newValue = { id: $context.data(\"id\"), value: $context.data(\"value\") };\n\n      if (isChecked) {\n        self.addTemporalElement(newValue, false);\n      } else {\n        self.addTemporalElement(newValue, true);\n      }\n    });\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.multiselect\");\n    });\n  },\n\n  addTemporalElement: function addTemporalElement(element, elementToRemove) {\n    var self = this;\n    if (elementToRemove) {\n      delete self.Class.temporalElements[element.id];\n    } else {\n      self.Class.temporalElements[element.id] = element;\n    }\n  },\n\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var multiSelect = $(\".bz-multiselect\", $control);\n    var $containerControl = $control.closest(\".ui-bizagi-render-control\");\n    var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n    var $floatList = $($.trim(modalViewTemplate(data))); //$.tmpl(template, data, options);\n    var widthControl = multiSelect.width();\n    $containerControl.append($floatList);\n    $floatList.width(widthControl);\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: multiSelect,\n      collision: \"fit\" }).\n    hide();\n    // Display view\n    $floatList.show();\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n    // Add global handler to close the float view\n    $(document).one(\"mousedown.multiselect\", function (evt) {\n      $floatList.trigger('closeView');\n    });\n    return $floatList;\n  } });","/*\r\n*   Name: BizAgi Tablet Render Association\r\n*   Author: RicharU (based on Edward Morales)\r\n*   Comments: Defines the association control\r\n*/\n\nbizagi.rendering.association.extend('bizagi.rendering.association', {}, {\n  /**\r\n                                                                           * Template method to implement in each children to customize each control\r\n                                                                           * \r\n                                                                           * @returns {} \r\n                                                                           */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var columnData = self.getColumnData();\n\n      var html = $.kendoTmpl(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     *\r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.properties;\n    var data = [];\n\n    self.data = properties;\n\n    var dataAssociation = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(dataAssociation, function (key, item) {\n      data.push({\n        id: item.id,\n        value: item.value,\n        association: self.getRightAssociation(item.id) });\n\n    });\n\n    return data;\n  },\n\n  /**\r\n      * Post render control\r\n      * @returns {} \r\n      */\n  postRender: function postRender() {\n\n    var self = this;\n    var control = self.getControl();\n\n    // Cache control\n    self.association = $(\".bz-rn-association-control\", control);\n\n    // Add Event at Association Control\n    self.addEventControl();\n\n    self.showDefaultContainer();\n  },\n\n  showDefaultContainer: function showDefaultContainer() {\n    var self = this;\n    var control = self.getControl();\n    var associations = $('.bz-rn-association-group .bz-rn-association-header', control);\n\n    if (associations.length > 0) {\n      var defaultHeader = $($('.bz-rn-association-group .bz-rn-association-header', control)[0]);\n      var defaultContainer = $($('.bz-rn-association-group .bz-rn-association-items', control)[0]);\n\n      self.closeAccordionSection(true);\n      defaultHeader.addClass('active');\n      defaultContainer.slideDown(300).addClass('open');\n    }\n  },\n\n  closeAccordionSection: function closeAccordionSection(i) {\n    var self = this;\n    var control = self.getControl();\n    var headers = $('.bz-rn-association-group .bz-rn-association-header', control);\n    var contents = $('.bz-rn-association-group .bz-rn-association-items', control);\n\n    if (i) {\n      headers = headers.not(':first').removeClass('active');\n      contents = contents.not(':first').slideUp(300).removeClass('open');\n    }\n\n    headers.removeClass('active');\n    contents.slideUp(300).removeClass('open');\n  },\n\n  /**\r\n      * Add event to control\r\n      * @returns {} \r\n      */\n  addEventControl: function addEventControl() {\n\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Bind check toggle\n    self.association.delegate(\"input:checkbox\", \"change\", function () {\n\n      var contextElement = $(this);\n\n      if (contextElement.prop(\"checked\")) {\n        // Associate item\n        contextElement.addClass(\"bz-check\");\n        self.associateElement(contextElement);\n      } else {\n        // Dissociate item\n        contextElement.removeClass(\"bz-check\");\n        self.dissociateElement(contextElement);\n      }\n    });\n\n    // Bind flip actions\n    self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n\n      $(control).empty();\n\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      // Send flip data to server\n      self.properties.flipstate = self.properties.flipped;\n      self.dataService.getFlipAssociation(self.properties);\n\n      var columnData = self.getColumnData();\n\n      // Render template\n      $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation,\n        getLeftName: self.getLeftName }).\n      appendTo(control);\n\n      self.postRender();\n    });\n\n    self.association.delegate(\".bz-rn-association-container .bz-rn-association-header\", \"click\", function () {\n      if (!$(this).is('.active')) {\n        self.closeAccordionSection();\n        $(this).addClass('active');\n        $(this).siblings().slideDown(300).addClass('open');\n      }\n    });\n  },\n\n  /**\r\n      * Render for readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"association\");\n\n    control.empty();\n\n    // Make json base, create self.properties.formatJson\n    self.makeJsonBase();\n\n    var columnData = self.getColumnData();\n\n    // Render template  \n    $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n      getColumnData: self.getColumnData,\n      getRightAssociation: self.getRightAssociation,\n      getLeftName: self.getLeftName }).\n    appendTo(control);\n\n    self.association = $(\".bz-rn-association-control\", control);\n    self.association.find(\"input:checkbox\").hide();\n    self.association.find(\".ui-bz-rn-check-item label\").addClass(\"bz-rn-association-non-editable\");\n\n    $.when(self.ready()).done(function () {\n      self.showDefaultContainer();\n\n      // Bind event for flip botton\n      if (self.properties.allowFlip) {\n        self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n          $(control).empty();\n          // Define flipped\n          self.properties.flipped = !self.properties.flipped;\n\n          self.postRenderReadOnly();\n        });\n      }\n\n      self.association.delegate(\".bz-rn-association-container .bz-rn-association-header\", \"click\", function () {\n        if (!$(this).is('.active')) {\n          self.closeAccordionSection();\n          $(this).addClass('active');\n          $(this).siblings().slideDown(300).addClass('open');\n        }\n      });\n    });\n  },\n\n  /**\r\n      * Associate the left item with the active parent\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  associateElement: function associateElement(element) {\n\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemAdd = element.data(\"id\");\n\n    // Update JSON object\n    self.addElement(parentId, itemAdd);\n  },\n\n  /**\r\n      * Dissociates an item from the active collection\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  dissociateElement: function dissociateElement(element) {\n\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemRemove = element.data(\"id\");\n\n    // Update JSON object\n    self.removeElement(parentId, itemRemove);\n  } });","/*\r\n*   Name: BizAgi User Field render tablet Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behaviour for userfields\r\n*/\n\n// Auto-extension\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*\r\n                                                                                *   Constructor\r\n                                                                                */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Check if the userfield is supported\n    if (!this.isSupported()) {\n      var form = self.getFormContainer();\n      form.addError(self.getResource(\"render-tablet-error-userfield\"));\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getEditableControl: function getEditableControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this, arguments);\n    }\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getReadonlyControl: function getReadonlyControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this, arguments);\n    }\n  },\n\n  /*\r\n     *   Returns if the userfield is supported in this device\r\n     */\n  isSupported: function isSupported() {return true;} });\n\n\n/*\r\n                                                         *   Default implementation for user fields\r\n                                                         */\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.defaultUserField\", {}, {\n\n  /*\r\n                                                                                  *   Template method to implement in each device to customize each render after processed\r\n                                                                                  */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control.replace(/column/g, \"\");\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n    self.input.addClass(\"ui-bizagi-render-userfield-notSupported\");\n\n    return self.input;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  getReadonlyControl: function getReadonlyControl() {\n    return this.getEditableControl();\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  } });","/**\r\n *   Name: BizAgi Render Image Class\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to tablet devices\r\n */\n// Extends itself\n//noinspection JSValidateTypes\nbizagi.rendering.image.extend(\"bizagi.rendering.image\", {\n  QUALITY_PICTURE: 50,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n  /**\r\n   * Just listing the order of function calls (bizagi.rendering.render)\r\n   * 1. renderControl (found it on bizagi.rendering.image)\r\n   * 2. postRender / postRenderReadOnly / postRenderPrintVersion\r\n   * 3. configureHandlers / configureHandlersReadOnly\r\n   *\r\n   * Other functions are just local implementation\r\n   *\r\n   */\n\n  /**\r\n       * DOM elements to use as an ADD option button\r\n       * @var $actionImage jQuery DOM\r\n       */\n  $addImage: null,\n  /**\r\n                    * DOM elements to use as a REMOVE option button\r\n                    * @var $actionImage jQuery DOM\r\n                    */\n  $deleteImage: null,\n  /**\r\n                       * DOM input to handle HTML uploads\r\n                       * @var $inputFile jQuery DOM\r\n                       */\n  $inputFile: null,\n  /**\r\n                     * Whether or not is a native device 'Just a shortcut\r\n                     * @var isNative boolean\r\n                     */\n  isNative: false,\n  /**\r\n                    * Whether or not we are offline 'Just a shortcut\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n  /**\r\n                         * resolution options to show in menu after selecting an image\r\n                         * @var resolutionUpload Array\r\n                         */\n  resolutionUpload: [],\n\n  /**\r\n                         * This method tries to get the HTML template an render the current object inside\r\n                         * @return {jQuery} $.Deferred()\r\n                         */\n  renderControl: function renderControl() {\n    var self = this;\n\n    /**\r\n                      * Check if this is an offline form\r\n                      * It doesn't validate if the device goes offline so..\r\n                      */\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    //noinspection JSValidateTypes,JSUnresolvedVariable\n    this.isNative = bizagi.util.isCordovaSupported();\n\n    if (this.isOfflineForm) {\n      var maxFileSizeOfProperty = Number(self.properties.maxSize) || 1048576;\n      var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\n\n      self.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\n    }\n\n    var template = self.renderFactory.getTemplate(\"image\");\n\n    var allowDelete = self.isOfflineForm ? false : self.properties.allowDelete && self.properties.editable;\n    var html = $.kendoTmpl(template, {\n      url: \"\",\n      allowDelete: allowDelete,\n      editable: self.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * There is no difference when rendering a readonly image, so ...\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self.showAsyncImage();\n  },\n\n  /**\r\n      * After rendering a readonly element\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n\n    // Just a little colors\n    self.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n    self.showAsyncImage();\n  },\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var version = bizagi.util.getAndroidVersion();\n    var modalOptions = null;\n\n    this.resolutionUpload = [];\n    this.$addImage = $(\".bz-rn-image-actions-add\", this.getControl());\n    this.$deleteImage = $(\".bz-rn-image-actions-delete\", this.getControl());\n    this.$inputFile = $(\".bz-rn-upload-image-web\", this.getControl());\n\n    this._super();\n\n    if (this.isNative) {\n\n      this.$addImage.off(\"click\").click(function () {\n\n        var modal = self.createModal();\n        // Upload Image Options\n        modalOptions = modal.find(\"ul.bz-rn-image-options\");\n\n        // Can't remove from here\n        modalOptions.find(\"li[data-role=\\\"dimage\\\"]\").remove();\n\n        modal.find(\"ul.bz-rn-image-options li\").bind(\"click\", function () {\n          modal.kendoMobileModalView(\"close\");\n          switch ($(this).data(\"role\")) {\n            case \"image\":\n              self.imageAdd();\n              break;\n            case \"cimage\":\n              self.imageAdd(true);\n              break;\n            default:}\n\n        });\n        modal.find(\".bz-wp-modalview-close\").unbind(\"click\").bind(\"click\", function () {\n          modal.kendoMobileModalView(\"close\");\n        });\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modal.kendoMobileModalView(\"open\");\n        modal.adjustSize();\n\n        modal.closest(\".km-modalview-root\").unbind(\"click\").bind(\"click\", function () {\n          modal.kendoMobileModalView(\"close\");\n        });\n\n      });\n\n    } else {\n      if (bizagi.util.media.fileAPISupported() && !self.isOfflineForm) {\n        this.$addImage.off(\"click\").click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        this.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n        this.$addImage.removeClass(\"bz-plus\").addClass(\"bz-rn-read-only\");\n      }\n    }\n\n    // remove Image\n    this.$deleteImage.off(\"click\").click(function () {\n      self.imageDelete();\n    });\n    // Image change (Hybrid only)\n    this.$inputFile.off(\"change\").on(\"change\", function () {\n      self.imageAdd();\n      this.value = \"\";\n    });\n\n    // Just in case\n    this.$inputFile.off(\"click\").on(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    this.getControl().find(\"img\").off(\"click\").click(function () {\n      self.renderEdition();\n    });\n\n    // Resolution upload menu\n    // If android version is less than 4.4 avoid to show upload sizes due to compatibility with blob files\n    if (version && version <= 4.4) {\n      resolutionUpload = [\n      { \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-size-original\") }];\n\n    } else {\n      resolutionUpload = bizagi.util.media.getImageResolutionItems();\n    }\n\n    $(\".bz-resolution-container\", self.getControl()).off(\"click\").actionSheet({\n      actions: resolutionUpload,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n        $.when(self.resolutionButtonHandler(action.guid)).\n        always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    this.$deleteImage.click();\n  },\n\n  /**\r\n      * Render edition view\r\n      */\n  renderEdition: function renderEdition() {\n    var self = this;\n    var properties = self.properties;\n\n    // TODO Creates a container, be careful you must destroy it later\n    var baseParams = self.getParams();\n    var container = baseParams.navigation.createRenderContainer({\n      title: properties.displayName,\n      view: {\n        zoom: true,\n        useNativeScrolling: false } });\n\n\n\n    var img = $.kendoTmpls(self.renderFactory.getTemplate(\"image-preview\"), { \"url\": self.value && self.value[0] !== \"\" ? self.value[0] : \"\" });\n    container.element.css(\"display\", \"none\");\n    self.inputEdition = container.element.html(img);\n    baseParams.navigation.navigate(container.id);\n\n    if (self.isOfflineForm) {\n      container.element.on(\"close\", self.onPreviewActionBack.bind(self));\n    }\n\n    bizagi.loading.start();\n\n    // TODO review fail scenario, should it call the forms.failHandler method?\n    $.when(self.buildFullItemUrl()).done(function (dataUrl) {\n      container.element.css(\"display\", \"block\");\n\n      if (dataUrl.indexOf(\"error\") < 0) {\n        $(\".bz-rn-image-render-preview\", container.element).attr(\"src\", dataUrl);\n        var originalImage = $(\".bz-rn-image-render-preview\", container.element)[0];\n        var originalImageWidth = $(originalImage).css(\"width\");\n        originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\n\n        if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\n          $(\".bz-rn-image-render-preview\", container.element).css(\"width\", \"100%\");\n        }\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  },\n\n  /**\r\n      * Refresh data\r\n      * @param {} event      \r\n      */\n  onPreviewActionBack: function onPreviewActionBack(event) {\n    var self = this;\n    var dataUrl = $(\".bz-rn-image-render-preview\", event.target).attr(\"src\") || \"\";\n\n    var dataUrlToSave = dataUrl.length > 0 ? [].concat(dataUrl) : null;\n    self.setValue(dataUrlToSave);\n  },\n\n  /**\r\n      * Creates the modalview based on template\r\n      * @returns {jQuery} kendoMobileModalView\r\n      */\n  createModal: function createModal() {\n    var self = this;\n\n    var imageTemplate = self.renderFactory.getTemplate(\"imageModalView\");\n    var modalViewTemplate = kendo.template(imageTemplate, { useWithBlock: false });\n\n    var modalView = $($.trim(modalViewTemplate({\n      editable: self.properties.editable,\n      displayName: self.properties.displayName || \"\",\n      orientation: self.properties.orientation || \"\" })));\n\n\n    //noinspection JSUnresolvedFunction\n    modalView.kendoMobileModalView({\n      close: function close(event) {\n        event.preventDefault();\n\n        if (window.event && window.event.stopPropagation)\n        window.event.stopPropagation();\n\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n        this.destroy();\n        this.element.remove();\n      },\n      show: function show() {\n\n      },\n      modal: false });\n\n\n    // Adjust modal to window size\n    modalView.adjustSize = function () {\n      var maxHeight = 0;\n      var elements = $(this).parent();\n\n      var windowHeightSize = window.innerHeight;\n      var windowWidthSize = window.innerWidth;\n\n      var listHeight = $(\".bz-wp-modalview-results-wrapper\", elements).height();\n      var maxWidth = $(\".bz-wp-modalview-results-wrapper\", elements).width();\n      var popupHeight = $(\"[data-role=header]\", elements).height();\n\n      if (listHeight + popupHeight >= windowHeightSize) {\n        maxHeight = windowHeightSize - 20;\n      } else {\n        maxHeight = listHeight + popupHeight + 10;\n      }\n\n      var top = (windowHeightSize - maxHeight) / 2;\n      var left = (windowWidthSize - maxWidth) / 2;\n\n      elements.css(\"height\", maxHeight);\n\n      elements.parent().css(\"top\", top);\n      elements.parent().css(\"left\", left);\n      elements.parent().css(\"height\", maxHeight);\n    };\n\n    return modalView;\n  },\n\n  /**\r\n      * Add an image\r\n      * @param useCamera boolean Whether or not to use device's camera\r\n      */\n  imageAdd: function imageAdd(useCamera) {\n    var self = this;\n\n    if (!this.isNative) {\n      var dataFile = this.$inputFile[0].files[0];\n      dataFile.fullPath = this.$inputFile[0].value;\n      var extensions = this.Class.EXTENSIONSIMG;\n\n      bizagi.loading.start();\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n      bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.uploadFile(dataFile)).done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        bizagi.loading.stop();\n      }\n    } else {\n\n      var options = {\n        quality: self.Class.QUALITY_PICTURE,\n        targetWidth: 1280,\n        targetHeight: 960,\n        correctOrientation: true };\n\n\n      if (!useCamera) {\n        var coordinates = self.getControl()[0].getBoundingClientRect();\n        //noinspection JSUnresolvedVariable,JSUnresolvedFunction\n        options = {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\n          destinationType: navigator.camera.DestinationType.FILE_URI };\n\n      }\n\n      //noinspection JSUnresolvedFunction,JSUnresolvedVariable\n      navigator.camera.getPicture(function (dataImage) {\n        bizagi.loading.start();\n\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n          return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n              self.dataImage = dataImage;\n              self.fileProperties = fileData;\n              // \"new Blob\" constructor is not supported in android version 4.2.2\n              var version = bizagi.util.getAndroidVersion();\n              if (version && version <= 4.2 || self.isOfflineForm) {\n\n                return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n                  self.uploadFileCompleted(self);\n                }).fail(function (error) {\n                  self.executeFormFailHandler(error);\n                });\n              } else {\n\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.resolutionButtonHandler(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // force click to show actionsheet menu\n                  $(\".bz-resolution-container\", self.getControl()).click();\n                }\n              }\n            }\n          });\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, options);\n\n    }\n  },\n\n  /**\r\n      * Management fail messages\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  onFail: function onFail(error) {\n    bizagi.loading.stop();\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  imageDelete: function imageDelete() {\n    var self = this;\n\n    bizagi.showConfirmationBox(bizagi.localization.getResource(\"workportal-actionsheet-upload-remove-photo\")).\n    done(function () {\n      bizagi.loading.start();\n      $.when(self.dataService.deleteImage({\n        url: self.properties.deleteUrl,\n        idRender: self.properties.id,\n        xpath: self.properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        contexttype: self.properties.contexttype })).\n      done(function () {\n        self.uploadFileCompleted(self);\n      }).fail(function (msg) {\n        var message;\n        var responseText = msg.responseText;\n\n        try {\n          message = JSON.parse(responseText);\n          message = message.message || responseText;\n        } catch (e) {\n          message = responseText;\n        }\n        bizagi.showMessageBox(message, \"Error\");\n\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (!this.isOfflineForm) {\n      if (this.isNative) {\n        //noinspection JSUnresolvedFunction\n        var params = {};\n        var addParams = self.buildAddParams();\n        var fileName = self.fileProperties.name;\n\n        if (self.editedImageURL) {\n          params.dataFile = self.editedImageURL;\n        } else if (self.fileProperties) {\n          params.dataFile = self.fileProperties.url;\n        }\n\n        addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n        params.data = addParams;\n        params.options = new FileUploadOptions();\n        params.options.fileKey = \"file\";\n        params.options.fileName = fileName;\n        params.options.mimeType = \"image/jpeg\";\n        params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n        params.options.addUrl = self.properties.addUrl;\n\n        //Cleans variables related previous gallery uploads\n        self.editedImageURL = null;\n        self.fileProperties = null;\n\n        // Fix android 4.4 getting images from recent folder\n        params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n        $.when(bizagi.util.media.uploadFile(params)).done(function (result) {\n          var response = JSON.parse(decodeURIComponent(result.response));\n\n          if (response.type === \"error\") {\n            defer.reject(response);\n          } else {\n            defer.resolve(response);\n          }\n        }).fail(function (error) {\n          defer.reject(error);\n        }).always(function () {\n        });\n\n      } else {\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\n\n          self.dataService.processUploadFile({\n            url: self.properties.addUrl,\n            formData: self.buildAddFileParams(dataFile) }).\n          done(function (response) {\n            defer.resolve(response);\n          }).fail(function (error) {\n            defer.reject(error);\n          });\n        } else {\n          defer.reject();\n        }\n      }\n    } else {\n      // Load image\n      self.saveImageOffline(dataFile, function (dataUrl) {\n        var dataUrltoSave = dataUrl.replace(/^data:.*;base64,/, \"\");\n\n        self.setValue(dataUrltoSave);\n        defer.resolve();\n      });\n\n      // Enables canbesent on offline mode\n      self.canBeSent = function () {\n        $.forceCollectData = true;\n        return true;\n      };\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * File upload is done\r\n      * @param context\r\n      */\n  uploadFileCompleted: function uploadFileCompleted(context) {\n    var self = context;\n\n    try {\n      self.showAsyncImage();\n      self.editedImageURL = null;\n    } catch (error) {\n      self.getFormContainer().refreshForm();\n    }\n  },\n\n  /**\r\n      * Show aync image\r\n      * */\n  showAsyncImage: function showAsyncImage() {\n    var self = this;\n    var control = self.getControl();\n\n    $.when(self.buildItemUrl()).done(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.value = self.properties.url.length > 0 ? [].concat(self.properties.url) : null;\n        self.setValue(self.properties.value);\n\n        if (self.isOfflineForm && dataUrl.indexOf(\"Invalid case id\") !== -1) {\n          self.properties.url = \"\";\n        }\n\n        control.find(\".bz-rn-image-container\").off(\"click\").\n        toggleClass(\"bz-rn-image-actions-add\", self.properties.editable && self.properties.url === \"\");\n\n        if (self.properties.url !== \"\") {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"inherit\").attr(\"src\", self.properties.url);\n          control.find(\".bz-rn-image-container img\").off(\"click\").click(function () {\n            self.renderEdition();\n          });\n          control.find(\".bz-rn-image-actions-add\").toggle(self.properties.editable);\n          control.find(\".bz-rn-image-actions-delete\").toggle(self.properties.allowDelete && self.properties.\n          editable);\n        } else {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"none\");\n          control.find(\".bz-rn-image-actions-add.bz-upload\").hide();\n          control.find(\".bz-rn-image-actions-delete\").hide();\n        }\n\n        if (self.properties.required) {\n          self.getControl().\n          children(\".ui-bizagi-render-control-required, .ui-bizagi-render-control-required-rtl\").\n          addClass(\"image-required\");\n        }\n        self.configureHandlers();\n      }\n    }).fail(function () {\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param context\r\n      * @param url\r\n      * @param callback\r\n      */\n  saveImageOffline: function saveImageOffline(path, callback) {\n    var self = this;\n\n    // Fix android 4.4 getting images from recent folder        \n    var dataImage = bizagi.util.media.getImagePath(path);\n    var xhr = new XMLHttpRequest();\n\n    try {\n\n      xhr.onload = function () {\n        var reader = new FileReader();\n\n        reader.onloadend = function () {\n          var content = reader.result;\n          callback(content);\n        };\n        reader.readAsDataURL(xhr.response);\n      };\n\n      xhr.open(\"GET\", dataImage);\n      xhr.responseType = \"blob\";\n      xhr.send();\n\n    } catch (error) {\n      callback(\"\");\n    }\n  },\n\n  /**\r\n      * resolutionButtonHandler\r\n      * @param buttonOrdinal\r\n      */\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n        self.uploadFileCompleted(self);\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return $.when(self.uploadFile(self.dataImage)).\n        done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        });\n\n      });\n    }\n\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", properties.xpath);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", properties.id);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", properties.xpathContext);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", \"savefile\");\n    formData.append(properties.xpath, dataFile);\n\n    if (self.properties.contexttype) {\n      formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  } });","/**\r\n *   Name: BizAgi Render Image Class\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to tablet devices\r\n */\n\n// Extends itself\n//noinspection JSValidateTypes\nbizagi.rendering.image.extend(\"bizagi.rendering.image\", {\n  QUALITY_PICTURE: 50,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n\n  /**\r\n   * Add an image\r\n   * @param useCamera boolean Whether or not to use device's camera\r\n   */\n  imageAdd: function imageAdd(useCamera) {\n    var self = this;\n    var imageEditorParams = bizagi.override && bizagi.override.mobileImageEditorParams ? bizagi.override.mobileImageEditorParams : {};\n    var source = useCamera ? \"camera\" : \"library\";\n\n    //1. if image editor is not supported, behaves as before\n    //2. if image editor is supported, but there are no client-side overrides, image editor will appear\n    //3. if image editor is supported, there are client-side overrides and the image editor is enabled, image editor will appear\n    //4. if image editor is supported, there are client-side overrides but the image editor is disabled, behaves as before\n\n    if (!bizagi.util.isNativeImageEditorSupported() || bizagi.util.isNativeImageEditorSupported() && typeof imageEditorParams.enableImageEditor != \"undefined\" && !imageEditorParams.enableImageEditor) {\n      self._super(useCamera);\n      return;\n    }\n\n    $.when(self.openImageEditor(source, imageEditorParams)).done(function (dataImage) {\n      $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n        bizagi.util.media.getFileDataInfo(dataImage).then(function (fileData) {\n          if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n            self.dataImage = dataImage;\n            self.fileProperties = fileData;\n            $.when(self.uploadFile(self.dataImage)).done(function (result) {\n              self.uploadFileCompleted(self, result);\n            }).fail(function (error) {\n              self.executeFormFailHandler(error);\n            }).always(function () {\n              bizagi.loading.stop();\n            });\n          }\n        });\n      });\n    }).fail(function (error) {\n      bizagi.showMessageBox(error);\n    });\n  },\n\n  /**\r\n      * Open a native image editor to crop, resize and apply filters\r\n      * @param source string to identify if image is loaded from library or camera\r\n      */\n  openImageEditor: function openImageEditor(source, imageEditorParams) {\n    var self = this;\n    var defer = new $.Deferred();\n    imageEditorParams.source = source;\n    imageEditorParams.imageMaxSize = self.properties.maxSize;\n\n    bizagiapp.openImageEditor(imageEditorParams,\n    function (response) {\n      defer.resolve(JSON.parse(response).imageURL);\n    },\n    function (error) {\n      defer.reject(\"Something went wrong loading the image.\");\n    });\n\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Smarphone Render Document Generator Extension\r\n *   Author: Dario Estupian\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.document.extend(\"bizagi.rendering.document\", {}, {\n  /*\r\n                                                                     *   Template method to implement in each device to customize each render after processed\r\n                                                                     */\n  postRender: function postRender() {\n    var self = this;\n\n    self.configureHelpText();\n    self.applyDocumentTemplatesFormat();\n    self.configureHandlers();\n  },\n\n  /*\r\n      *   Put formating to the documents that are generated by the control\r\n      */\n  applyDocumentTemplatesFormat: function applyDocumentTemplatesFormat() {\n    var self = this;\n    var control = self.getControl();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n\n    // Resolve the type of the document based on the extension and put the icon to acconding to it\n    var documentList = $(\".ui-bizagi-document-upload-item\", control);\n\n\n    //Configure items\n    $.each(documentList, function (index, value) {\n      $(\".ui-bizagi-document-type\", value).addClass(\"ui-bizagi-document-extension\");\n\n      // Add the tooltip to the document preview icon\n      var previewTooltip = $(\".ui-bizagi-document-preview\", value);\n      previewTooltip.attr(\"title\", self.resources.getResource(\"render-document-preview-tooltip\"));\n      previewTooltip.tooltip();\n\n      // Add file extension\n      var returnType = self.returnCssTypeFile($(\"a > span\", value).html());\n      $(\".ui-bizagi-document-type\", value).addClass(returnType);\n\n      // Disable preview\n      $(\".ui-bizagi-button\", value).remove();\n      $(\".ui-bizagi-document-preview\", value).attr(\"display\", \"none\");\n\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-upload-item > .ui-bizagi-document-upload-element\", control).click(function (e) {\n      self.showDocumentPreview($(this).data(\"url\"), $(this).attr(\"title\"));\n    });\n\n\n    // Configure delete handler\n    $(\".bz-rn-document-delete-icon\", control).click(function (e) {\n      if (e.isPropagationStopped())\n      return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).parent().data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param {} file\r\n      * @returns {}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";\n    }\n\n    var extension = file.substr(file.lastIndexOf(\".\") + 1);\n\n    switch (extension) {\n      case \"docx\":\n        return \"ui-bizagi-document-upload-item-doc bz-file-word\";\n      case \"pdf\":\n        return \"ui-bizagi-document-upload-item-pdf bz-file-pdf\";\n      case \"xlsx\":\n        return \"ui-bizagi-document-upload-item-xls bz-file-excel\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";}\n\n  },\n\n  /*\r\n      *   Redraw documents when needed\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadalldocuments) {\n    var self = this;\n\n    self._super(documents, noFiles, downloadalldocuments);\n\n    // Add icons\n    self.applyDocumentTemplatesFormat();\n  },\n\n  /*\r\n      *   Shows the document if the flag is set.\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  updateControlForPrintMode: function updateControlForPrintMode() {\n  },\n\n  showDocumentPreview: function showDocumentPreview(url, title) {\n    bizagi.loading.start();\n\n    $.when(bizagi.util.media.downloadFile(url, title)).fail(function (error) {\n      if (error.responseText) {\n        self.getFormContainer().failHandler(error.responseText);\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  } });","/**\r\n * Desktop definition of range date control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeDate.extend(\"bizagi.rendering.rangeDate\", {}, {\n  /**\r\n                                                                       * Render actual value of control and set events\r\n                                                                       * @param data\r\n                                                                       */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range money control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeMoney.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                                         * Render a specific implementation for Desktop device\r\n                                                                         */\n  postRender: function postRender() {\n    var self = this;\n\n    var minControl = new bizagi.rendering.money(self.getRenderProperties(\"min\"));\n    var maxControl = new bizagi.rendering.money(self.getRenderProperties(\"max\"));\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/**\r\n * Desktop definition of range number control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeNumber.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                                           * Render a specific implementation for Desktop device\r\n                                                                           */\n  postRender: function postRender() {\n    var self = this;\n\n    var minControl = new bizagi.rendering.number(self.getRenderProperties(\"min\"));\n    var maxControl = new bizagi.rendering.number(self.getRenderProperties(\"max\"));\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n  } });","/*\r\n*   Name: Bizagi Render Geolocation control\r\n*   Author: Ricardo Perez\r\n*   Comments:\r\n*   -   This script will define basic stuff for form link renders\r\n*/\n\nbizagi.rendering.geolocation.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /* \r\n                                                                          * Template method to implement in each device to customize each render after processed \r\n                                                                          */\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base \n    self._super();\n\n    var control = self.getControl();\n\n    self.cordinate = $(\".bz-rn-geolocation-coordinate\", control);\n  },\n  /* \r\n     * Public method to determine if a value is valid or not \r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Call base\n    var bValid = self._super(invalidElements);\n\n    return bValid;\n  },\n\n  /* \r\n     * Template method to implement in each device to customize the render's behaviour to add handlers \r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    if (self.getMode() === \"execution\") {\n\n      //If the control doesn't have a value set the position\n      if (self.value == null)\n      self.updateDisplayValue();\n\n      $(\".bz-rn-geolocation-selector\", self.getControl()).on(\"click\", function () {\n        self.cordinate.empty();\n\n        //this retun a promise if is usefull\n        self.updateDisplayValue();\n      });\n    }\n  },\n\n  /* \r\n     * Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      if (!self.cordinate)\n      self.cordinate = self.getControl();\n\n      self.cordinate.html(value);\n\n      // Set internal value \n      self.setValue(value, false);\n      def.resolve();\n    } else {\n      var onSuccess = function onSuccess(position) {\n        var latitude = position.coords.latitude.toString();\n        var longitude = position.coords.longitude.toString();\n        var cordinate = latitude + \" \" + longitude;\n\n        self.cordinate.html(cordinate);\n\n        // Set internal value \n        self.setValue(cordinate, false);\n        def.resolve();\n      };\n\n      // onError Callback receives a PositionError object\n      var onError = function onError(message) {\n        var strMessage = message;\n\n        if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n          strMessage = self.getErrorMessage(message);\n        }\n\n        def.reject(strMessage);\n      };\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n        navigator.geolocation.getCurrentPosition(onSuccess, onError);\n      } else {\n        self.getCurrentPosition(onSuccess, onError);\n      }\n    }\n\n    return def.promise();\n  },\n\n  updateDisplayValue: function updateDisplayValue() {\n    var self = this;\n\n    self.setDisplayValue().then(function () {}).fail(function (message) {\n      self.cordinate.val(\"\");\n      self.cordinate.html(\"<span style='color: red'>\" + message + \"</span>\");\n    });\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.column\", {}, {\n\n  /*\r\n                                                                                *   Apply custom overrides to each decorated instance\r\n                                                                                */\n  applyOverrides: function applyOverrides(decorated) {\n\n    if (!decorated) return;\n\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated && decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n    }\n\n    /* Customizes the font weight */\n    decorated.getFormattingLabel = function (bold) {\n      var self = this;\n      return self.getControl();\n    };\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length == 0) {\n      result = $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    }\n\n    return result;\n  },\n\n\n  /**\r\n      * Overrides the normal flow in order to set the grid to decorator always\r\n      * @param surrogateKey\r\n      * @returns {*}\r\n      */\n  getDecorated: function getDecorated(surrogateKey) {\n    var decorated = this._super(surrogateKey);\n    if (typeof decorated.grid === \"undefined\") {\n      decorated.grid = this.grid;\n    }\n\n    return decorated;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var result = this._super(surrogateKey, value, tableCell);\n    var decorated = this.getDecorated(surrogateKey);\n    if (decorated.element) {\n      // Clean all display types\n      decorated.element.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\").\n      removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\n\n      // Add a new common class for all cells\n      decorated.element.addClass(\"ui-bizagi-render-display-cell\");\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n\n    if (decorated.grid == undefined) {\n      decorated.grid = self.grid;\n    }\n\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n\n    element = $(element);\n\n    // Set cell alignment\n    element.css(\"-webkit-box-pack\", properties.align);\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  } });","/*\r\n*   Name: BizAgi Desktop Render Document Generator Extension\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will redefine the document generator render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.document\", {}, {\n\n\n  /*\r\n                                                                                  *   Apply custom overrides to each decorated instance\r\n                                                                                  */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n    self._super(decorated);\n\n    decorated.getControlHtml = self.getControlHtml;\n\n    if (mode != \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.preRenderControl = this.preRenderControl;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  /*\r\n     *   Creates the event of generation of templates.\r\n     */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n    self.startLoading();\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    var grid = self.parent;\n\n    $.when(grid.submitOnChange(\"\", false)).\n    done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function (response) {\n        $.when(grid.refresh()).\n        done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages       \n        self.showErrorMessage(error);\n\n      });\n    }).fail(function (error) {\n      self.endLoading();\n\n      // Add error messages                 \n      self.showErrorMessage(error);\n    });\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  getControlHtml: function getControlHtml(template, mode, downloadalldocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n    var isInlineRow = true;\n\n    for (var i = 0, length = self.parent.properties.data.rows.length; i < length; i++) {\n      if (self.parent.properties.data.rows[i][0] == self.surrogateKey) {\n        isInlineRow = false;\n        break;\n      }\n    }\n\n    var html = $.kendoTmpl(template, {\n      noActivateButton: isInlineRow,\n      editable: mode != \"execution\",\n      downloadalldocuments: downloadalldocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append ? properties.append : false,\n      caption: properties.caption,\n      noFiles: noFiles });\n\n\n    return html.replace(\"ui-bizagi-document-upload-item-design\", \"ui-bizagi-document-upload-item-design-column\");\n  },\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getContextXpath: function getContextXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  preRenderControl: function preRenderControl() {\n    var self = this;\n    self.properties.value = self.value;\n  } });","/*\r\n*   Name: BizAgi Desktop Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.date\", {}, {\n  /*\r\n                                                                              *   Apply custom overrides to each decorated instance\r\n                                                                              */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.text\", {}, {});","/*\r\n*   Name: BizAgi Tablet Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.number\", {}, {\n  /*\r\n                                                                                *   Post process the element after it has been rendered\r\n                                                                                */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","\n/*\r\n *   Name: Bizagi Column Rendering Tablet numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Column Scientific number notation\r\n */\n\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                   *   Post process the element after it has been rendered\r\n                                                                                                   */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.image\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n    this._super(decorated);\n\n    decorated.getXpathContext = this.getImageXpathContext;\n\n    decorated.setDisplayValue = function () {\n      return true;\n    };\n\n    // Change xpath context\n    // Taken from desktop version to fix non existence of \"xpathContext\" property\n    if (this.getMode() === \"execution\") {\n      decorated.properties.xpathContext = (properties.xpathContext ? properties.xpathContext + \".\" : \"\") + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n  },\n\n  getImageXpathContext: function getImageXpathContext() {\n    return (this.column.properties.xpathContext ? this.column.properties.xpathContext + \".\" : \"\") + this.column.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.upload\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.getUploadXpath = this.getUploadXpath;\n    // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\n    var originalMethod = decorated.applyUploadPlugin;\n\n    decorated.getXpathContext = function () {\n      var surrogateKey = this.surrogateKey || \"\";\n      var self = this;\n      var properties = self.properties;\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    };\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n      var xpathContext = self.getXpathContext();\n      var contextXpath = \"\";\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.id,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n  },\n\n  getUploadXpath: function getUploadXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\n  } });","/*\r\n *   Name: Bizagi Tablet Link Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the link column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.link\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    if (mode !== \"design\" && mode !== \"layout\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = self.getXpath;\n\n      decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) == -1)\n      decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n    }\n\n    if (decorated.properties.type == \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n  },\n\n  /*\r\n      *   Apply custom overrides to each decorated instance\r\n      */\n  getXpath: function getXpath(xpath) {\n    var self = this;\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(self.grid.properties.xpath);\n\n    if (index !== -1) {\n      xpathPath = xpathPath.substr(index + self.grid.properties.xpath.length + 1);\n    }\n\n    return self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n      *   Get Form Link xpath to use\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) {\n      return;\n    }\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Desktop Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.uploadecm\", {}, {\n  /*\r\n                                                                                   *   Apply custom overrides to each decorated instance\r\n                                                                                   */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    self._super(decorated);\n\n    if (decorated && decorated.getControl) {\n      self.originalGetControl = decorated.getControl;\n      decorated.getControl = self.getControl;\n    }\n\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var nameFile = columnXpath[columnXpath.length - 1];\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: nameFile,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.idFileUpload,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.getXpathContext = function () {\n      var self = this;\n      var properties = self.properties;\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    };\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    var cell = \"<div></div>\";\n\n    var decorated = this.getDecorated(surrogateKey);\n    decorated.setValue(value);\n    self.setValue(surrogateKey, value);\n    self.setSurrogateKey(surrogateKey);\n\n    self.applyOverrides(decorated);\n    // Set grid and id references to the control in order to render the content\n    decorated.grid = this.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set ready deferred\n    self.readyDeferred = new $.Deferred();\n\n    // We need to render the inner control as read-only\n    if (decorated.files.length > 0) {\n      // Changes editable to false to render read-only\n      var editable = this.properties.editable;\n      decorated.properties.editable = false;\n      cell = decorated.render(\"cell.upload\");\n    }\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    return this.grid.properties.xpath + \"[id=\" + surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n  getControl: function getControl() {\n    var self = this;\n    var result = self._super();\n\n    if (!result || result.length == 0) {\n      return $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    } else {\n      return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n\n  } });","/**\r\n* Grid control Column Button\r\n*\r\n* @author Ricardo Prez\r\n*/\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.button\", {}, {});","/*\r\n*   Name: BizAgi Tablet Radio Column Decorator Extension\r\n*   Author: Richar Urbano\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.radio\", {}, {});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.list\", {}, {});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.search.extend(\"bizagi.rendering.columns.search\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  },\n\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    if (value.length > 0) {\n      value = [].concat(value[0]);\n      return self._super(surrogateKey, {\n        id: value[0],\n        label: value[1],\n        additionallabel: value[2] || undefined });\n\n    } else\n    {\n      return self._super(surrogateKey, value);\n    }\n  } });","/*\r\n*   Name: BizAgi tablet Date Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the check column to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.exclusiveCheck\", {}, {});","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n *   Name: BizAgi Tablet Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a render factory to create tablet versions of each render type\r\n */\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.tablet.factory\", {}, {\n\n  init: function init(dataService) {\n    var self = this;\n\n    self._super(dataService);\n\n    if (bizagi.override.enableMSF) {\n      if (bizagi.hasOwnProperty(\"kendo\")) {\n        self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n      } else {\n        self.templateService = new bizagi.templates.services.service(bizagi.localization);\n      }\n    } else {\n      self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    }\n  },\n\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return self.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedRemplate) {\n      self.templates[template] = resolvedRemplate;\n    });\n  },\n\n  /**\r\n      * Load all the templates used for rendering\r\n      */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n    // Common\n    self.loadTemplate(\"form-error\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form-error\")),\n    self.loadTemplate(\"form-waiting\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form-waiting\")),\n    // Icons\n    self.loadTemplate(\"icons\", bizagi.getTemplate(\"common.bizagi.rendering.icons\")),\n    // Containers\n    self.loadTemplate(\"form\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form\") + \"#ui-bizagi-render-form\"),\n    self.loadTemplate(\"complexgateway\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.form\") + \"#ui-bizagi-render-complexGateway\"),\n    self.loadTemplate(\"panel\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.panel\")),\n    self.loadTemplate(\"tab\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.tab\")),\n    self.loadTemplate(\"tabItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.tabItem\")),\n    self.loadTemplate(\"horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.horizontal\")),\n    self.loadTemplate(\"accordion\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.accordion\")),\n    self.loadTemplate(\"accordionItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.accordionItem\")),\n    self.loadTemplate(\"group\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.group\")),\n    self.loadTemplate(\"searchForm\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchForm\")),\n    self.loadTemplate(\"contentPanel\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.contentPanel\")),\n\n    // Renders\n    self.loadTemplate(\"render\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.render\")),\n    self.loadTemplate(\"render-layout\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.render.layout\")),\n    self.loadTemplate(\"text\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.text\")),\n    self.loadTemplate(\"extendedText\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.extendedText\") + \"#ui-bz-mobile-extended-text-control\"),\n    self.loadTemplate(\"readonlyExtendedText\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.extendedText\") + \"#ui-bz-mobile-readonly-extended-text-control\"),\n    self.loadTemplate(\"number\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.number\") + \"#ui-bz-mobile-number-control\"),\n    self.loadTemplate(\"readonlyNumber\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.number\") + \"#ui-bz-mobile-readonly-number-control\"),\n    self.loadTemplate(\"numberScientificNotation\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.numberScientificNotation\")),\n    self.loadTemplate(\"date\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.date\") + \"#bz-rn-date\"),\n    self.loadTemplate(\"readonlyDate\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.date\") + \"#bz-rn-readonly-date\"),\n    self.loadTemplate(\"yesno\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.yesno\")),\n    self.loadTemplate(\"check\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.check\")),\n    self.loadTemplate(\"combo\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.combo\") + \"#ui-bz-mobile-combo-control\"),\n    self.loadTemplate(\"readonlyCombo\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.combo\") + \"#ui-bz-mobile-readonly-combo-control\"),\n    self.loadTemplate(\"comboModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.combo\") + \"#ui-bz-wp-popup-combo-control\"),\n    self.loadTemplate(\"list\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.list\") + \"#ui-bz-mobile-list-control\"),\n    self.loadTemplate(\"listModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.list\") + \"#ui-bz-wp-popup-list-control\"),\n    self.loadTemplate(\"radio\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.radio\")),\n    self.loadTemplate(\"image\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#ui-bizagi-render-image\"),\n    self.loadTemplate(\"image-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#ui-bizagi-render-image-item\"),\n    self.loadTemplate(\"image-preview\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#bz-rd-upload-render-edition\"),\n    self.loadTemplate(\"imageModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.image\") + \"#ui-bizagi-render-image-modalview\"),\n    self.loadTemplate(\"upload\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.upload\") + \"#ui-bz-mobile-upload-control\"),\n    self.loadTemplate(\"uploadModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.upload\") + \"#ui-bz-wp-popup-upload-control\"),\n    self.loadTemplate(\"uploadItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.uploadItem\")),\n    self.loadTemplate(\"uploadSlide\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.slide.upload\")),\n    self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid\")),\n    self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.cell\")),\n    self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.cell.readonly\")),\n    self.loadTemplate(\"cell.upload\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.cell.upload\")),\n    self.loadTemplate(\"search\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.search\") + \"#ui-bz-mobile-search-control\"),\n    self.loadTemplate(\"readonlySearch\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.search\") + \"#ui-bz-mobile-readonly-search-control\"),\n    self.loadTemplate(\"searchAddItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchAddItem\")),\n    self.loadTemplate(\"searchItem\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchItem\")),\n    self.loadTemplate(\"searchList\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-mobile-searchlist-control\"),\n    self.loadTemplate(\"searchListModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-wp-popup-searchlist-control\"),\n    self.loadTemplate(\"searchListModalViewAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-wp-searchlist-control-modalview-auxiliary-templates\"),\n    self.loadTemplate(\"searchListInputAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.searchList\") + \"#ui-bz-wp-searchlist-control-input-auxiliary-templates\"),\n    self.loadTemplate(\"letter\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.letter\")),\n    self.loadTemplate(\"letter.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.letter.readonly\")),\n    self.loadTemplate(\"letter.dialog\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.dialog-letter\")),\n    self.loadTemplate(\"button\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.button\")),\n    self.loadTemplate(\"link\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.link\")),\n    self.loadTemplate(\"geolocation\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.geolocation\")),\n    self.loadTemplate(\"association\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.association\")),\n    self.loadTemplate(\"ecm\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.ecm\") + \"#bz-rn-ecm-view-default-item\"),\n    self.loadTemplate(\"ecm-metadata\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.ecm\") + \"#bz-rn-ecm-metadata\"),\n    self.loadTemplate(\"ecmModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.ecm\") + \"#ui-bizagi-render-ecm-modalview\"),\n    self.loadTemplate(\"checkList\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.checkList\")),\n    self.loadTemplate(\"document\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"render-actionLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n    self.loadTemplate(\"readonly\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.readonly\")),\n    self.loadTemplate(\"list-multiselect\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-mobile-multiselect-control\"),\n    self.loadTemplate(\"list-multiselect-tag\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-mobile-multiselect-tag\"),\n    self.loadTemplate(\"list-multiselect-tags\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#bz-list-multiselect-tags\"),\n    self.loadTemplate(\"list-multiselect-view-more\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-mobile-multiselect-view-more\"),\n    self.loadTemplate(\"multiselectModalView\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.multiSelect\") + \"#ui-bz-wp-popup-multiselect-control\"),\n\n\n    // Slide View\n    self.loadTemplate(\"render-slide-view\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.slide.view\")),\n    self.loadTemplate(\"render-slide-view-item\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.slide.view.item\")),\n\n    //Renders Layouts\n    self.loadTemplate(\"layout-image\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.label\")),\n    self.loadTemplate(\"layout-link\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.link\")),\n    self.loadTemplate(\"layout-text\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.text\")),\n    self.loadTemplate(\"layout-date-time\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.dateTime\")),\n    self.loadTemplate(\"layout-money\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.money\")),\n    self.loadTemplate(\"layout-number\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.number\")),\n    self.loadTemplate(\"layout-upload\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.layout.upload\")),\n\n    // Grid plugin stuff\n    self.loadTemplate(\"bizagi.grid.grid\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid\"),\n    self.loadTemplate(\"bizagi.grid.waiting\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-waiting\"),\n    self.loadTemplate(\"bizagi.grid.table\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-table\"),\n    self.loadTemplate(\"bizagi.grid.table.empty\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-table-empty\"),\n    self.loadTemplate(\"bizagi.grid.column\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-column\"),\n    self.loadTemplate(\"bizagi.grid.column.special\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-column-special\"),\n    self.loadTemplate(\"bizagi.grid.row\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-row\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-row-buttons\"),\n    self.loadTemplate(\"bizagi.grid.cell\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-cell\"),\n    self.loadTemplate(\"bizagi.grid.cell.special\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-cell-special\"),\n    self.loadTemplate(\"bizagi.grid.pager\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-pager\"),\n    self.loadTemplate(\"bizagi.grid.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-buttons\"),\n    self.loadTemplate(\"bizagi.grid.dynamicpager\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-dynamic-pager\"),\n    self.loadTemplate(\"bizagi.grid.totalizer\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-totalizer\"),\n\n    // Grid Offline\n    self.loadTemplate(\"bizagi.grid.buttons.offline\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-buttons-offline\"),\n    self.loadTemplate(\"bizagi.grid.row.buttons.offline\", bizagi.getTemplate(\"bizagi.renderingflat.tablet.grid.component\") + \"#ui-bizagi-grid-row-buttons-offline\")).\n    done(function () {\n      var tmplIcons = self.getTemplate(\"icons\");\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0) {\n        $(\"head\").append(tmplIcons);\n      }\n      // Resolve when all templates are loaded\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Load javascripts after render has been rendered\r\n      */\n  loadOverrides: function loadOverrides() {\n    // Load custom javascript overrides\n    if (bizagi.enableCustomizations) {\n      return bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.workportal.tablet.overrides\"),\n        type: \"js\" });\n\n    }\n\n    return;\n  },\n\n  /**\r\n      *\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ container: params.parent });\n\n    if (type === \"grid\") {\n      // Review the offline status or context \n      if (bizagi.util.isTabletDevice()) {\n        if (isOfflineForm) {\n          return new bizagi.rendering.grid.offline(renderParams);\n        } else {\n          return new bizagi.rendering.grid(renderParams);\n        }\n      } else {\n        return new bizagi.rendering.grid(renderParams);\n      }\n    }\n\n    if (type === \"upload\") {\n      // Review the offline status or context  \n      if (bizagi.util.isTabletDevice()) {\n        if (isOfflineForm) {\n          return new bizagi.rendering.upload.offline(renderParams);\n        } else {\n          return new bizagi.rendering.upload(renderParams);\n        }\n      } else {\n        return new bizagi.rendering.upload(renderParams);\n      }\n    }\n\n    if (type === \"number\") {\n      var properties = data.properties;\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.numberScientificNotation(renderParams);\n      }\n\n    }\n\n    // Call base\n    return self._super(params);\n  },\n  /**\r\n      * Returns the appropiate column based on the render type\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getColumn: function getColumn(params) {\n    var self = this;\n    var type = params.type;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type === \"columnNumber\") {\n      var data = params.data;\n      var properties = data.properties;\n\n      if (properties && properties.dataType === 29) {\n        columnParams.decorated = bizagi.rendering.numberScientificNotation;\n        return new bizagi.rendering.columns.numberScientificNotation(columnParams);\n      }\n    }\n\n    // Call base\n    return self._super(params);\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });"]}