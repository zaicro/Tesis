{"version":3,"sources":["jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi/js/bizagi.util.js","jquery/renderingflat/js/common/bizagi.rendering.util.js","jquery/common/jquery.formatCurrency/jquery.formatCurrency.js","jquery/rendering/js/plugins/common/jquery.mobiscroll.js","jquery/renderingflat/js/plugins/bizagi.mobile.grid/js/bizagi.mobile.grid.js","jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.helpers.searchForm.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.text.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.date.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.combo.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.ecm.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.searchList.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.search.js","jquery/rendering/js/bizagi.rendering.facade.js","jquery/rendering/js/plugins/common/jquery.mask.js","jquery/rendering/js/plugins/common/jquery.numeric.js","jquery/renderingflat/js/plugins/bizagi.mobile.pagination.grid/js/bizagi.mobile.pagination.grid.js","jquery/common/base/js/lib/mobile/jquery.timeago.js","jquery/common/base/js/lib/mobile/jquery.tabs.js","jquery/common/base/js/lib/mobile/jquery.helptext.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/renderingflat/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.container.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.render.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.section.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/container/bizagi.rendering.nestedForm.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.readonly.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.form.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.panel.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.contentPanel.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.tab.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.tabItem.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.horizontal.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.group.js","jquery/renderingflat/js/smartphone/container/bizagi.rendering.smartphone.searchForm.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.slide.startForm.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.slide.form.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.actionLauncher.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.entityTemplate.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.polymorphicLauncher.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.extendedText.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.label.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.number.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.numberScientificNotation.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.money.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.yesno.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.check.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.list.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.multiSelect.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.radio.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.cascadingCombo.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.collectionnavigator.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.hidden.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.upload.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.grid.beta.js","jquery/renderingflat/js/smartphone/container/helpers/bizagi.rendering.smartphone.helpers.grid.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.grid.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.letter.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.button.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.fileprint.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.link.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.checkList.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.activityCheckList.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.image.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.link.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.label.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.text.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.dateTime.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.number.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.money.js","jquery/renderingflat/js/smartphone/render/layout/bizagi.rendering.smartphone.layout.upload.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.image.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.formLink.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.geolocation.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.association.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.userfield.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.column.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.combo.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.document.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.date.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.text.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.number.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.image.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.upload.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.link.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.search.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.uploadecm.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.button.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.numberScientificNotation.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.radio.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.list.js","jquery/renderingflat/js/smartphone/render/column/bizagi.rendering.smartphone.columns.exclusiveCheck.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.document.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.rangeDate.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.rangeMoney.js","jquery/renderingflat/js/smartphone/render/bizagi.rendering.smartphone.rangeNumber.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/renderingflat/js/smartphone/bizagi.rendering.smartphone.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","widget","options","id","columns","sortBy","sortType","showSummary","collapse","collapseState","data","indexedData","maxColumns","buttonsPst","title","tableCssClass","headerStyles","floatingHeader","hasExclusiveCheck","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","actions","add","edit","remove","details","allowMore","enableXlsExport","enablePdfExport","mode","_init","self","this","element","page","changes","totalRows","totalPages","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","each","i","key","label","name","tooltip","index","split","addClass","attr","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","append","fasttmpl","setTimeout","endLoading","clearTimeout","empty","setData","refresh","getData","rows","j","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","is","children","find","html","drawSummaryCell","replaceWith","onCellReady","changeCellValue","value","deleteCellExclusiveValues","orientation","gridRtl","isDesign","drawTable","appendTo","postRender","attachPaginator","attachHandlers","$tableContainer","$table","offset","parseInt","css","replace","stickyTableHeaders","fixedOffset","zIndex","cacheHeaderHeight","bind","trigger","length","hide","_getButton","show","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","columnAlign","isSortable","xpath","initialSortBy","sortActive","controlType","bizagi","util","getColumnType","type","isHorizontalRadio","horizontal","extend","isKey","sortOrder","columnCssClass","headerLabelStyles","flexAlign","mapAlignClassName","drawRow","rowData","isNewRow","newRow","rnd","Math","floor","random","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","hidden","summarizeBy","result","onDrawCell","calculateSummary","undefined","done","state","resolveResult","messageValidation","promise","drawGroupHeader","drawFooter","pages","total","push","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","when","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","getCurrentPage","isValid","sortAttribute","indexOf","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","map","max","min","columnValue","Array","processAction","action","params","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","replaceFirstWithoutPatterns","sortColumnIndex","callback","call","component","foundComponent","button","jQuery","context","smartphone","tablet","DEVICES","printf","msg","arg","args","slice","arguments","a","val","shift","charCodeAt","round","String","bizagiQueue","async","sync","queue","callbacks","addParallel","execute","starter","Deferred","queueLength","pipe","apply","deferred","resolve","fail","reject","deviceEnum","fn","callInside","fx","tagName","toLowerCase","contentWindow","e","browser","msie","execScript","toString","webkit","mozilla","eval","callInsidePopup","document","ready","CSSStyleDeclaration","getPropertyValue","getAttribute","setProperty","styleName","priority","setAttribute","rule","RegExp","escape","cssText","removeProperty","removeAttribute","getPropertyPriority","test","text","style","get","nl2br","br2nl","controlValueIsChanged","control","properties","getValue","compareValue","originalValue","forceCollectData","includes","parseBoolean","Date","getTime","getMaxZindex","elm","maxZindex","zindex","equalizeHeights","selector","heights","outerHeight","autoSave","deferredSave","detectDevice","_data","anonymizedUserInformation","username","email","domain","picture","isAnonymized","datepickerResource","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","liveProcessesEvents","newLiveProcess","createEvent","initEvent","routeEvents","route","saveEvent","lastWidget","nextWidget","liveSave","widgetName","deferredLiveSave","indeX","location","href","workportal","widgets","BIZAGI_WORKPORTAL_WIDGET_PROFLY","saveLivePromise","dispatchEvent","md5","message","CryptoJS","s","p","m","l","lib","n","r","Base","b","h","mixIn","hasOwnProperty","init","$super","create","clone","q","WordArray","words","sigBytes","t","stringify","concat","clamp","g","ceil","v","enc","Hex","k","join","parse","substr","Latin1","fromCharCode","u","Utf8","decodeURIComponent","Error","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_nDataBytes","_append","_process","blockSize","_minBufferSize","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","abs","sin","MD5","_hash","w","x","y","z","A","B","C","D","c","d","f","HmacMD5","multiReplace","mapDataToReplace","reg","replaceAll","pcFrom","pcTo","replaceAllGlobalRegExp","temp","re","capitalize","charAt","toUpperCase","startsWith","str","getInitials","initials","sign","isNaN","JSON","encode","measureString","string","fontSize","width","detach","trim","endsWith","suffix","isIE7","isIE","documentMode","isIE8","isIE9","isIE10","isIE11","navigator","userAgent","match","isIE11OrLower","isIE10OrLower","isEdge","appName","objectValues","array","Object","keys","itm","values","getIEVersion","sAgent","window","indexMSIE","version","substring","isChrome","vendor","isFirefox","minVersion","ua","M","tem","exec","appVersion","getBrowser","bw","emptyNavigatorInfo","info","language","setIphoneXOverrides","isNativePluginSupported","bizagiapp","isIphoneX","isiOSDevice","isString","isObject","isArray","isNull","isBoolean","getInternetExplorerVersion","isNumeric","parseFloat","isFinite","isGUID","mustImplement","notImplementedMethod","console","log","exe","encodeXpath","isEmpty","isEmptyObject","isEmptyCombo","object","property","other","decodeURI","infinityControl","finishDecoded","decodedValue","hasNonVisibleChars","ch","percent2Number","isObjectEmpty","isMapEmpty","replaceSelector","container","elementToReplace","unwrap","hasScroll","el","direction","identicalObjects","obj1","obj2","countProps","count","isScrolledIntoView","elem","layout","scrollTop","elemTop","top","height","centerElementIntoScroll","actualScroll","elementTop","elementHeight","newTop","encodeHtml","decodeHtmlEntities","getHashParams","hash","loadFile","defer","url","src","loader","then","initWebpart","webpart","device","initialized","initializing","loadingDeferred","getQueryString","pairs","pos","argname","extendQueryString","additionalParams","plainUrl","existingParams","newParams","param","getStackTrace","callstack","isCallstackPopulated","dont","exist","stack","len","lines","opera","entry","currentFunction","callee","caller","fname","highLightElement","removeClass","autoScrollBottom","elScrollHeight","scrollHeight","autoScrollInterval","autoScroll","itemScroll","limitTop","limitBottom","idInterval","outSide","clearInterval","mousemove","event","pageY","autoScrollTopInterval","autoScrollBottomInterval","classCSS","setInterval","valueMaxScrollBottom","innerHeight","removeAutoScroll","unbind","getMaxZIndex","showPopup","callbackFn","left","newWindow","open","BAPopupWindow","BAPopupCallback","BACloseWindow","controls","submitForm","close","showQuirksModePopup","quirksModePage","BIZAGI_PATH_TO_BASE","BAQuirksPopupWindow","windowParams","popupWindow","quirksOnLoad","loadedBody","iframe","afterLoad","userParams","callbackParams","loadingFunction","body","createPopup","popupName","onClose","popupTitle","handleClose","overlay","popup","closeButton","popupContent","additionalClass","center","closeHandler","click","fullPopup","content","createOkCancelPopup","onOk","onCancel","buttonsContainer","buttonOk","buttonCancel","localization","getResource","okHandler","cancelHandler","ok","cancel","dialog","modal","closeQuirksModePopup","quirksPopup","getStyle","pathName","getFontFace","getAllChildrens","matchStyles","stringCss","awesomeBrowser","file","styleSheets","rules","cssRules","BIZAGI_ENVIRONMENT","cssTextOriginal","selectorText","lastLevel","styleSheet","suckBrowser","cookie","expires","days","setDate","getDate","raw","toUTCString","path","secure","decode","randomNumber","setContext","reloadCSS","queryString","_name","_call","_params","_singleton","singleton","_timeOut","timeout","_maxIterations","iterations","_context","_killWhenExitContext","killWhenExitContext","timeOut","maxIterations","itsRunning","timeInit","executeTimeOut","now","actualIterations","ieFunction","pointer","timeOutRunning","isDate","dateField","timeField","resultDate","hasTime","resultTime","arrayDate","unicode2htmlencode","input","htmlHex","getHeadElement","hd","getElementsByTagName","docEl","documentElement","createElement","insertBefore","firstChild","loadStyle","styleText","layoutGuid","node","getElementById","createTextNode","childNodes","nodeValue","replaceChild","appendChild","loadIconStyle","icon","userfieldname","innerHTML","formatDecimalAndMoneyCell","tableData","externalMoneyFormat","moneyFormat","decimalFormat","externalDecimalFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","roundToDecimalPlace","decimalDigits","symbol","colorize","groupDigits","negativeFormat","positiveFormat","columnTitle","fields","formatMoney","numberValue","formatDecimal","override","removeTrailingZeros","positive","BIZAGI_DEFAULT_CURRENCY_INFO","formatBoolean","formatInvariantBoolean","htmlContent","not","$element","format","formatCurrency","formatMonetaryCells","tmpResult","intSection","decimalSection","decimalResult","isNegative","decimalDigitPosition","fixDecimalDigits","getOnlyNumbersByString","stringValue","toFixed","formatInvariantMoney","defaultFormat","allowDecimals","formatInvariantNumber","numberFormat","thousands","containsLetter","NaN","formatNumber","percentage","formatInvariantDate","dateTimeFormat","isValidDate","getFormatDate","formatDate","dateFormatter","formatDateFromInvariantStringDate","stringInvariantDate","dateValue","defaultFormatDate","H","getHours","getMinutes","getSeconds","ms","getMilliseconds","hideTimeWhenHourMinutesSecondsAreZero","formatValueByDataType","dataType","replaceLineBreak","formatMonetaryCell","formatDecimalCell","parseDate","valueOf","LZ","getDateFromFormat","getRelativeTime","date","onlyUnitsTime","timeZone","moment","tz","currentUser","timeZoneName","time","kendo","diff","timeDiff","getTimeDiffDescription","unit","timeDivisor","unitAmount","resourceAgo","compareDates","date1","dateformat1","date2","dateformat2","d1","d2","getDifferenceBetweenDates","i18n","token","i_format","getFullYear","getMonth","E","getDay","isValidResource","months","i_val","year","getYear","month","hh","mm","ss","ampm","_getInt","month_name","day_name","ff","_isInteger","_val","minlength","maxlength","_token","preferEuro","generalFormats","monthFirst","dateFirst","checkList","analyzeTimeFormat","timeFormat","returnObj","show24Hours","showSeconds","separator","lastToken","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatInvariant","getDateFromISO","ISO_FORMAT","formatISO","formatISO8601","dateObject","restartTimeToMidnight","isFormatISO8601","stringDate","sleep","delay","start","getDateFormatByDatePickerJqueryUI","sleepUntil","def","internalSleepUntil","sleepFor","browserSupportLocalStorage","setItemLocalStorage","localStorage","setItem","getItemLocalStorage","getItem","removeItemLocalStorage","removeItem","clearLocalStorage","clear","bizagiConfig","showConsoleLog","stopLoading","elementToapply","isEventSupported","eventName","isSupported","needsFallback","circularDependencies","Function","list","lastNodeAdded","addNode","OBJ","foundObjChildNode","_search","_addNode","nodeObj","timeStamp","addChild","resolved","seen","_getFirstNodeWithChilds","_resolve","_resetList","childs","hasObject","error","dependencyFrom","dependencyFromObj","dependencyTo","dependencyToObj","standardError","status","responseText","makeErrorMessage","multiactionError","toSearch","collection","messageTmpl","cssExtended","instance","cssToAdd","cssExtendedApplyChanges","option","$this","attrToAdd","tmpStyle","arrProperties","resultProperties","cssProperty","canvas","parent","sortJSON","way","sort","shortNumber","newNumber","lenghtNumber","escapeHtml","div","formatMonetaryValue","formatDecimalValue","formatDateValue","showNotification","div_sync","fadeIn","stop","fadeOut","isModeOnline","isOfflineForm","dispose","arrayEach","getStandardNotation","tmp","decimalNumber","exponentialNumber","scientificNotationFormat","sdLimit","expMinLimit","expMaxLimit","sNregex","sNFormat","exp","prefix","originalPointIndex","tempParts","significantDigits","intPart","from","to","significantFlag","firstDigit","restDigits","stripslashes","isHTMLValidText","resetData","sessionStorage","isAuthenticate","changeData","isMobileDevice","isNativeMobileDevice","isTabletDevice","isAndroidTabletDevice","isiOSTabletDevice","isSmartphoneDevice","isAndroidSmartphoneDevice","isiOSSmartphoneDevice","formContainer","getFormContainer","formParams","getParams","detectAndroidVersion","indexAndroid","androidVersion","getPathUrl","solvedUrl","locationParts","pathname","basePath","protocol","host","pathToBaseBackwards","getAndroidVersion","mobileImagePath","image","dataImage","photoSplit","resource","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","Blob","stringToByteArray","hasOfflineFormsEnabled","BIZAGI_ENABLE_OFFLINE_FORMS","isFlatDesignEnabled","BIZAGI_ENABLE_FLAT","isMobileGridEnabled","BIZAGI_ENABLE_MOBILE_GRID","isNativeHeaderEnabled","NATIVE_HEADER_ENABLE","isQuickSearchEnabled","BIZAGI_ENABLE_QUICK_SEARCH","isOAuth2Enabled","BIZAGI_AUTH_TYPE","getNativeComponent","BIZAGI_NATIVE_COMPONENT","isVersionSupported","supported","BIZAGI_SERVER_VERSION","isCordovaSupported","cordova","isTabletNativeSupported","isSmartphoneNativeSupported","plugins","Keyboard","hideKeyboardAccessoryBar","detectRealDevice","settedDevice","BIZAGI_DEFAULT_DEVICE","isAndroid","isAndroidDevice","getChannelType","BIZAGI_SERVER_CHANNEL","channel","isDataUrl","getDataUrl","currentUrl","tempUrl","processFailMessage","getErrorFormatted","code","statusText","errorCode","errorType","tmp_block_header","disableWorkPortalMenu","blockHeight","prependTo","position","background","opacity","z-index","enableWorkPortalMenu","enableMenuSection","idMenu","controllers","menu","setActiveSection","getURLWithASlashAtTheEnd","downloadFile","isCompleteUrl","showModalOnFail","_defer","_showModalOnFail","_urlDownload","applicationUrl","_iframeExists","_onCantDownload","that","defaultMessage","tryCatch","contentDocument","isMaintenanceWindow","jsonResponse","showModal","maintenanceWindows","modalError","_reject","onload","downloadFileByPOST","inputValues","formPOST","contents","showErrorAlertDialog","ajax","submit","executeActionRoutingFromWorkportal","idCase","idWorkItem","publish","BIZAGI_WORKPORTAL_ACTION_ROUTING","getMessageFromNetworkState","sanitizeHTML","sanified","DOMPurify","sanitize","arrayUnique","items","debounce","func","wait","immediate","later","callNow","debounce2","fire","isNativeImageEditorSupported","enableImageEditor","errorMessage","validateUrlWellFormed","urlWithProtocol","nodeWithUrl","cleanNodeWithUrl","IN_PLACE","urlWithoutSpaces","encodeHtmlText","valueToDisplay","decodedDisplayValue","encodeString","setCaretPosition","ctrl","setSelectionRange","focus","createTextRange","range","moveEnd","moveStart","select","getCaretPosition","oField","iCaretPos","selection","oSel","createRange","selectionStart","escapeRegex","getFeatureObject","arr","featureObjectCache","features","getConfigFeatures","pivot","getFeatureObjectIte","bizagiConfiguration","BIZAGI_MOBILE_FEATURES","resetConfigFeatures","isFailResponse","formatItem","performTermMatches","strValue","term","withoutFormat","highlightMatches","regEx","getDesktopResolution","resolution","devicePixelRatio","screenWidth","screen","screenHeight","deviceXDPI","logicalXDPI","getDeviceCode","BIZAGI_DEVICE_MARKET_NAME","normalizeType","normalizeQueryType","hideOrShowXToCloseDialog","isEnableFeature","feature","isHtml","possibleHtml","_try","_catch","listFunctions","_listFunctions","next","end","variable","reduce","newVar","prop","getComputedStyle","scroll","overflow","scrollerParent","HTMLElement","SVGElement","ps","parents","parentNode","scrollingElement","startkendo","kendoMobileApplication","mobile","Application","skin","browserHistory","ui","progress","started","bizagiNavigate","navigate","isMashupContext","BIZAGI_MASHUP_CONTEXT","isSharepointContext","BIZAGI_SHAREPOINT_CONTEXT","isWebpartContext","isWebpart","startTimeline","showTimeLine","startGraphicquery","showGraphicQuery","startSelectUser","showSelectUser","userId","userName","guid","isEmptyValue","initializeReferrerParams","referrerParams","getLPQueriesParameters","sidebarData","getLPQueriesSelectedItemFromTree","selectedTreeItem","setLPQueriesParameters","parametersSidebar","tree","cleanLPQueriesParameters","setLPQueriesReferrer","referrer","isConnected","connection","Connection","NONE","onLine","isRenderingUrlAllowed","request","endPoint","whiteList","pattern","applyEyeFunction","setShowIcon","after","addEvent","setHideIcon","direct","className","ev","accessibilityEnter","cb","extraEvent","preventDefault","stopPropagation","which","recreateNativeButtons","navigation","setNavigationButtons","isOverrideFeatureEnabled","featureName","createDynamicClass","nameClass","renderParams","dynamicFunction","languages","es","es-ES","es-AR","es-BO","es-Cl","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PR","es-PE","es-US","es-UY","es-VE","en","en-AU","en-BZ","en-CA","en-029","en-IN","en-IE","en-JM","en-MY","en-NZ","en-PH","en-SG","en-ZA","en-TT","en-GB","en-US","en-ZW","de","de-AT","de-DE","de-LI","de-LU","de-CH","fr","fr-BE","fr-CA","fr-LU","fr-MC","fr-CH","fr-FR","it","it-IT","it-CH","ja","ja-JA","ja-JP","nl","nl-NL","nl-BE","pt","pt-BR","pt-PT","ru","ru-RU","cs","cs-CZ","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","zh","zh-HK","zh-MO","zh-CN","zh-Hans","zh-SG","zh-TW","zh-Hant","getNormalizedDate","fullFormat","dateTime","setMilliseconds","isFeatureEnabled","getLastProcessInboxKey","lastProcessInboxKey","getUserHash","lastProcessInboxInit","getLastProcessInboxCreate","processInfo","createLastProcessInboxProcess","sortInfo","createLastProcessInboxSort","filterInfo","createLastProcessInboxFilter","processColumnsInfo","createLastProcessInboxColumns","inputTrayInfo","createLastProcessInboxInputTray","processInfoName","idWorkflow","sortDirection","sortFieldName","filterValue","filterFieldName","filterType","processColumns","getLastProcessInbox","lastProcessInbox","setLastProcessInbox","smartInboxId","setLastProcessInboxProcessColumns","getLiveFiltersFromStorage","filters","modelStorage","serialize","setLiveFiltersToStorage","assign","setLastProcessInboxLiveFilter","liveFilters","setLastProcessInboxSort","setLastProcessInboxFilter","setLastProcessInboxInputTray","inputTray","getLastProcessInboxProcessInfo","allProcesses","getLastProcessInboxSmartInboxId","getLastProcessInboxSort","getLastProcessInboxFilter","getLastProcessInboxLiveFilter","getLastProcessInboxProcessColumns","getLastProcessInboxInputTray","removeLastProcessInbox","removeLastProcessInboxSort","removeLastProcessLiveFilters","getSyncTimeStampKey","syncTimeStampKey","storeSyncTimeStamp","currentDate","getSyncTimeStamp","syncTimeStamp","BIZAGI_USER","BIZAGI_PROXY_PREFIX","BIZAGI_DOMAIN","hashCode","defaultWidget","newValueStr","_preferService","services","preferences","_widgets","_mobile","set","newVal","_desktop","_newValueView","changePreference","INBOX_VIEW_TYPE","_actualValue","getPreference","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","_device","isMobile","getMobileFeaturesKey","userKey","mobileFeaturesKey","getMobileFeatures","stringFeatures","storeMobileFeatures","mobileFeatures","storedFeatures","updatedFeatures","getCardviewMaxColumsAllowed","maxColumnsEnabled","enabled","blobTob64","blob","onlyData","reader","FileReader","readAsDataURL","onloadend","base64data","blobToText","readAsText","binaryData","newUrl","deepExtend","out","originalType","align","rigth","justify","default","isMobileErrorTracesEnabled","mobileErrorTracesEnabled","mobileErrorTraces","isMobileSmartInboxEnabled","mobileSmartInboxEnabled","mobileSmartInbox","isMobileLiveFiltersEnabled","mobileLiveFiltersEnabled","mobileLiveFilters","any","grep","first","groupBy","item","getRegionOrCulture","region","regionInfo","regions","culture","generateRegex","settings","destination","defaults","global","eventOnDecimalsEntered","regex","num","multiCeroPattern","search","numParts","isPositive","hasDecimals","decimals","originalDecimals","money","$destination","toNumber","method","asNumber","parseType","validateParseType","scenarioInfo","getFileScenario","category","scenario","BIZAGI_SMARTPHONE_PATH","_defineProperty","defineProperty","enumerable","configurable","writable","b64EncodeUnicode","btoa","p1","pasteEventName","caret","begin","mask","placeholder","_prepareBuffer","_bindEvents","_checkVal","allowPartials","destroy","removeData","res","buffer","tests","formatted","_setData","eventsBound","_escapeMask","defs","definitions","partialPosition","firstNonMaskPos","maskEscaped","ignore","focusText","_writeBuffer","change","keyCode","SHIFT","SPACE","BACKSPACE","DELETE","_clearBuffer","_shiftL","ESCAPE","charCode","ctrlKey","altKey","metaKey","_seekNext","_shiftR","completed","originalPos","allow","lastMatch","literals","replacements","getter","#","*","selectionEnd","duplicate","numeric","decimal","keypress","nodeName","shiftKey","blur","numericSN","eq","F","J","parseValue","setValue","validate","hasClass","prev","outerWidth","offsetHeight","clientHeight","O","N","P","K","enable","disabled","disable","I","PI","closest","formatResult","display","headerText","onChange","theme","wheels","showLabel","setText","cancelText","insertAfter","onSelect","delegate","readonly","originalEvent","wheelDelta","detail","G","o","onShow","scroller","themes","presets","preset","methods","readOnly","showOnFocus","changedTouches","L","isDisabled","getInst","setDefaults","dateOrder","timeWheels","startYear","endYear","shortYearCutoff","monthText","dayText","yearText","hourText","minuteText","secText","ampmText","stepHour","stepMinute","stepSecond","minDate","maxDate","ap","Q","0","1","invalid","dates","daysOfWeek","daysOfMonth","datetime","inputClass","android","ios","jqm","jqmBody","jqmHeader","jqmWheel","jqmClickPick","jqmSet","jqmCancel","mobilePagination","defaultOptions","firstPage","actualPage","listElement","firstClass","previous","previousClass","nextClass","last","lastClass","liClass","arrowClass","clickCallBack","pagination","previousPage","nextPage","query","lastProcessedValue","force","filter","prepend","modalPagerTemplate","modalPager","modalContainer","listItems","modalListContainer","useWithBlock","kendoMobileModalView","useNativeScrolling","on","itemSelected","keyup","mobileGrid","columnKeyStyle","columnHiddenStyle","kendoTmpl","bSpecialColumnAdded","bSpecialCellAdded","pagerData","hasPagination","pagerContainer","pagerOptions","actionSheet","_showActions","titleLabel","setDataToShow","evt","target","actionClicked","cancelClicked","getNewRowKeys","getContainer","displayName","editLabel","deleteLabel","detailLabel","timeago","timestamp","$t","refreshMillis","allowFuture","localeTitle","cutoff","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","seconds","minute","minutes","hour","hours","day","years","wordSeparator","numbers","inWords","distance","distanceMillis","$l","substitute","stringOrFunction","isFunction","iso8601","isTime","bztabs","activeTab","tabNumber","activate","popUp","beforeActivate","tabCountPopup","tabHeader","tabCountReal","widthRow","textContent","tabCurrent","widthTabSelected","updateTabSize","origin","changeTab","dataRef","currentTarget","tabChildren","toggle","tempTabs","moveAtTheEnd","reorderTabs","domIncluded","headerWidth","innerWidth","totalWidth","pop","helpText","dir","$html","render","endPoints","getEndPoints","renderHandlerPathRest","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","getXSRFToken","render-entity-layout-upload-files","render-query-getUsersList","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersList-ForXpathIdBossUser","admin-getUsersList-ForXpathIdDelegate","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","sharepointProxyPrefix","alert","Class","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","BA_MULTIACTION_WITH_LIMIT_NUMBER","BA_MULTIACTION_WITH_LIMIT_QUEUE","serviceLocator","multiactionService","multiactionservice","multiactionServiceWithLimit","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","desktop","deviceCode","multiaction","multiactionWithLimit","metadataECMMultiaction","getFormData","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","prepare","chrono","initAndStart","ajaxParams","serviceType","avoidLoader","response","stopAndLog","form","transformGridDataToReadOnly","allowAdd","allowDelete","allowEdit","allowGrouping","allowSearch","getSearchFormData","idSearchForm","processDataValues","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","debug","beforeSend","xhr","renderingService","newName","getPropertyData","extra","sessionId","guidentity","pxpath","prows","ppage","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","getSearchData","getCollapseData","getGridData","order","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","fileUrl","processData","binary_file","readFileAsJSON","getResponseHeader","media","byteArrayToBlob","binary","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","source","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","getFile","uploadECMFile","fileUpload","fileName","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrintUrl","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","refreshControl","refreshGridCell","typeRender","executeRule","executeInterface","executeSAPConnector","guidsap","executeConnector","guidConnector","executePipeline","pipeline","generateDocumentTemplate","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","getCaseNumber","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportUrl","exportType","sendEmail","subject","selected","invalidatePageCache","getUsersList","getUsersListFromQueryForm","getUsersListFromPreferences","getUsersListForXpathIdBossUser","getUsersListForXpathIdDelegate","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","sendUserEmail","eMailTo","getConfiguration","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","cache","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","getParents","fillTree","getChildren","child","hasConstructor","guidObject","guidConstructor","getEntityImage64","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","limit","batch","batchTimer","maxNumberOfActions","deferredBatchExecuting","disabledRequests","replicateServiceMethods","getService","proxyMethod","originalPrepare","makeCircularDependenciesError","h_action","detectCircularDependencies","batchTimeout","tag","singleAction","resolveDependencies","rejectDeferreds","responses","finalResponse","disableRequests","validateIfBatchIsExecuting","THROW_ERROR","buildConditions","conditions","bGridDetected","bCheckEditability","innerDependencies","operator","expressions","buildConditionOperator","sJsCondition","expression","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","enableActionIsChangedSupport","getRender","getRenderById","getColumn","renderType","isRelatedEntityRender","searchGridReferenceInXpath","isEditable","showRenderNotFoundError","isVisible","visible","isParentVisible","evalGridXpath","evalXpath","gridColumn","cellValue","getCellCurrentValue","renderToEval","renders","getRenders","rendersToEval","bIsGrid","getColumnDateCorrectFunction","mapValue","isFileUploaded","isValidEmail","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","isChanged","_isChanged","isControlChanged","changed","controlChanged","isGridColumnChanged","gridToEval","xpathColumn","columnChanged","columnToEval","onDeletedGridRow","rowDeleted","idMatches","showContainerNotFoundError","getCurrentDate","includeTime","invariantDate","matches","searchForGridReference","commands","command","searchForGridReferenceInCommand","bGridReferenceFound","getGridControl","getControlCell","getColumnDateValueDateAndTime","getColumnDateValueOnlyDate","getColumnDateValueForNoValue","controller","validations","enableDebug","_super","initializeValidations","validationBox","bizagi_notifications","expand","triggerGlobalHandler","itemIcon","minimized","clearEnabled","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showValidationMessage","showAlertMessage","showInfoMessage","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","retype","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","triggerHandler","sJSCode","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","validateEditability","validateEditabilityOnValidations","tokens","sGridStatement","bValid","forEach","showValidationMessageById","globalDependencies","initialCallFunctions","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","period","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","elseCommands","isClientAction","dontExecute","hashes","executeOnlyClientActions","hashC","unbindActions","handle","refreshActions","newActions","_","dependencies","dependenciesId","buildFunction","renderById","inArray","addDependency","gridColumns","searchGridColumns","asyncFn","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","runAction","timeOutActionsHistory","detectCommandArgumentType","commandGridDetected","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","pipelineObj","guidPipeline","restoreRender","originalProperties","textFormat","changeRenderBackground","changeRenderForeground","color","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","changeContainerBackground","backgroundColor","changeContainerVisibility","toogleContainer","changeContainerEditability","isValidRender","newVisualChange","getVisualChange","isGridComponent","lenIndex","indexes","getIndexes","changeCellBackgroundColor","logVisualChange","changeBackgroundColor","changeButtonBackground","getButton","changeCellColor","changeColor","changeButtonForeground","changeColumnVisibility","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","changeFormButtonVisibility","changeColumnEditability","changeCellEditability","changeEditability","changeButtonEditability","removeAttr","triggerClick","changeColumnRequired","changeCellRequired","changeRequired","changeRenderValue","fromAction","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","refreshContainer","internalQueue","refreshCell","submitFormData","interfaceObject","interface","submitRender","submitOnChange","cleanRenderData","promises","gridPromises","cleanCellData","cleanData","visualChanges","changeActiveItem","setAsActiveContainer","findIndex","getNavigation","isFloatingButtonsEnabled","changeFloatingButtonVisibility","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getXpath","getElementType","resize","size","effect","eventType","one","getRenderedElement","getMode","getFormType","isReadyToSave","getCustomHandlers","timeOutDispose","off","disposeTime","isDisposed","validationController","beforeToRefresh","afterToRefresh","getResourceByKey","fallback","restoreAppearance","getOrientation","rendering","TYPE_QUERY_FORM","uniqueId","childrenHash","elements","createRenderElement","createContainerElement","createFormElement","originalElement","processDuplicateRender","registerRender","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceChildrenTag","replaceChildrenHtml","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","placeHolderConfig","forceApply","Placeholders","childrenElements","childElement","postRenderElement","renderChildrenHtml","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","timeOutChildrenDispose","saveChildrenVisualChanges","unregisterChildren","removeActions","currentContainer","triggerChildrenActions","restoreChildrenVisualChanges","restoreAppearanceAfterRefresh","restoreContainerAppearance","always","refreshDesignContainer","triggerRenderChange","registerActions","actionController","unregisterRender","getChildById","restoreElementAppearance","childrenVisualChanges","getMenu","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","layoutType","renderTemplateName","renderTemplate","isFullRender","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","flexAlignClass","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","replaceControlHtml","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","timeOutRender","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","inlineAdd","hasValue","isQueryForm","messageData","isQuery","columnEditable","bold","changeFontBold","italic","changeFontItalic","underline","changeFontUnderline","strikethru","changeFontStrikethru","changeFontSize","triggerEvents","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","getLabel","getControlFiller","validationMessage","readOnlyValue","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","currentStyle","getFormattingLabel","baseValue","defaultValue","isStartForm","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","newFontSize","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","internalRenderCellControl","readyDeferred","onCellChange","labelElement","controlElement","saveGridChildrenVisualChanges","controlFiller","currentElement","restoreGridChildrenVisualChanges","restoreGridAppearance","refreshDesignControl","clearDisplayValue","updateOriginalValue","getRenderId","queryValue","searchType","typeSearch","rangeQuery","newParameter","orderType","displayXpath","displayOnly","defaultControl","innerControl","timeOutEffect","submitOnChangexpathContext","addSubmitAction","bRefreshForm","notCollect","internalSubmitOnChange","getCacheIdCase","idCaseObject","getIdCase","getIdWorkitem","getidTask","getSessionId","backgroundImage","needBGPaint","background-color","background-image","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","getMainForm","currentForm","fromRender","setInterceptionObserver","$context","intersectionObserver","IntersectionObserver","pluginInitialized","disconnect","POLL_INTERVAL","observe","setResizeObserver","resizeObserver","ResizeObserver","decorateRenders","restoreCellAppearance","gridChildrenVisualChanges","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","textDecoration","getCellBackgroundFunction","true","columnDate","changeInputBackgroundColor","false","postRenderSingle","configureHelpText","checkListGroup","contextEdition","renderEdition","postRenderEdit","setDisplayValueEdit","actualscroll","kendoTmpls","inputEdition","contexttmp","contextEdit","backActionCommon","scrollTo","actionSave","getContainerRender","getArrowContainer","arrow","getArrow","getContainerHelpText","containerHelpText","getContainerMessage","containerMessage","getContextEdit","dspType","excludeControls","renderSingle","setPlaceHolder","renderedElement","toggleClass","changeRequiredLabelByVal","before","changeRequiredControl","configureLabel","containerHelp","ele","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","displayAsReadOnly","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","allowValidateAndSaveAction","enableActionValidateAndSave","enableExecuteQuickActions","allowExecuteQuickActions","useQuickActions","hasQuickActions","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isOfflineFormsV2Supported","caption","ordinal","nextWithoutValidations","back","createnewcase","save","quickAction","routing","buildButtonStyle","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","helptext","queryForm","globalForm","allowQuickActions","complexGatewayContainer","activeTransitions","processButtons","mainForm","$canvas","getValidationsContainer","validation","checkboxLabel","transitionId","strStyle","getContextType","getEndPointAction","formtype","getButtons","stopImmediatePropagation","buttonProperties","btn","routingDisabled","propagateExternalEvents","timeOutButton","processDefer","contains","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","getAllTabs","getAllTabsLength","innerTabsLoading","confirmationStatus","getConfirmationStatus","hasConfirmation","showConfirmationBox","customHandler","validateForm","saveForm","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","offlineType","removeCaseSyncError","removeSyncErrorOnSubmit","removeStartCaseSyncError","removeTaskCaseSyncError","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","executeButtonAction","loading","showMessageBox","waitingDeferreds","isSaveForDraft","online","syncDeferred","syncParams","offlineAction","buttonPropertiesAction","radNumber","showToastOnSuccessSync","showMobileToast","IdCase","caseNumber","CaseNumber","isOfflineRefreshWithEdition","shouldRefresh","refreshForm","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","messages","failHandler","partialSubmitFormOffline","animate","submitDataAction","performAction","checkpointAction","commitAction","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","jqxhrList","abortAll","res2","messageType","addValidationMessage","addErrorMessage","selectedTabs","getSelectedTabs","selectedSection","getSelectedSection","isEdited","tabContainers","tabs","tabContainer","tab","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","getSize","getOffset","min-height","min-width","getFocusedElement","setFocusedElement","errorJson","setSize","executeSubmitData","isRefreshingAfterSync","clearOnlyServer","tryToExecuteFunction","cancelPreviousRequest","focusIdentifier","IdScope","objMessage","strMessage","abort","buttonId","checkpointUrl","commitUrl","rollbackUrl","timeOutController","getFloatingButton","configureNetworkHandlers","handleConnectionChange","handleOfflineSyncEvent","hasSyncError","offlineFormId","paramsId","database","validateLocalDataForTaskExists","dataResult","applySyncLoader","tasks","warn","isStart","isSyncLoaderRunning","loaderIndex","processQuickButton","isEnable","some","formProperties","hasButtonsConfirmation","needsUserConfirmation","buttonConfirmationMsg","hasFormConfirmation","formConfirmationMsg","saveWorkInProgress","formType","contextEvent","processTemplate","processedTemplate","g1","g2","layoutCollection","getCss","layoutguid","getContextEvent","withAddForm","withEditForm","allowDetail","inlineEdit","getKeys","inlineAddRecords","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","getRemoteData","dataUrl","validateControls","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","displayAs","sectionContent","renderSectionContent","getBreadcrumb","unshift","getParentDisplayName","getSectionParent","originalParams","getSectionOrientationRTL","panel","renderResult","performSearch","searchParams","refreshResults","collectSearchValues","maxRows","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","getCriteriaOperation","criteriaData","parseAdditionalProperties","tabItems","counter","tabOrientation","getActiveTab","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","getPropertiesActionLaucher","actionsLaucher","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","unique","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","combo","getSelectedValue","currentValue","parseAdditionalValues","newItem","bCurrentDataFound","emptyFound","dataValue","comboData","isExtraItem","escapeValue","validateValue","translated","findDataValueById","showLetters","randomId","getDefaultAllowDecimals","numDecimals","setGroupDigits","colorizeOnNegative","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","numericInput","attachRetypeDouble","attachFormatCurrency","removeValidations","formatNumericInput","$input","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","inputValue","inputLength","oldVal","isInvalidFormat","tempValue","messageToShow","isValidRenderMessage","executeFormatCurrencyPlugin","tmpData","clipboardData","totalVal","keydown","keyUnicode","formatTimeout","floatPart","currentPosition","character","regExp","validMessage","getDefaultGroupDigits","performMinValue","newValue","performMaxValue","createTooltip","currentTitle","toolTipZindex","timeOutFocus","ud","datePickerRegional","getDateFormat","indexDateTimeSeparation","lastIndexOf","datePickerFormat","timePickerFormat","uppercaseDatePlaceholder","intHandler","isNow","dateControl","getDateControl","timeControl","getTimeControl","onChangeHandler","updatingTime","getNormalizeDate","getTimeFormat","setValueFromCalendarButtons","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","isExclusive","columnRender","singleInstance","totalize","reverse","rowsPerPage","initEditabilityProperties","initAddAndDeleteProperties","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","addLabel","exportOptionsLabel","alreadySaved","overrideGetRemoteData","cellOverrides","changeOrderData","rowKey","reverseDataRows","removeRemainingColumns","numColumns","remainingColumns","getGridTemplate","applyTemplate","columnInitializers","initialize","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","newRows","saveInlineAddedRows","saveRows","getDepthData","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","merge","uniqueMessages","isValueValid","messagesLength","gridValidationMessage","columnVisible","setCellOverrides","len_v","newRecords","submitForGridChange","timeOutColumn","getEnabledChecks","cleanNewRecords","setRowAsSaved","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","isCurrentGridCell","columnId","getIndexForCurrentCell","allowDinamiclabel","bindingValue","performLabelLineBreak","advancedSearch","submitVersion","searchForms","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","showDesignValidations","getFormattedValue","getDesignModeValue","submitOnChangexpathContextRow","runButtonAction","error_obj","filesCount","vertical","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","err","files","getUploadXpath","indexHour","dateObj","formattedDateTime","showsymbol","currencySymbol","geolocation","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","allowFlip","flipped","leftData","rightData","processPropertyValue","flip","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","isChecked","idRight","checked","removeElement","rightId","removeValue","addElement","leftXpath","rightXpath","leftFactName","rightFactName","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","buildAddParams","BIZAGI_SESSION_NAME","getUploadXpathContext","setRenderRequired","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","lockUploadItem","unlockUploadItem","letterOpened","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","saveFormLinkData","submitCommitRequest","submitCheckpointRequest","submitDataRequest","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","isInitialValue","deferredVisible","parentValue","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","inputCombo","parentLength","parentArray","configured","listSize","normalizeData","getDataValue","idToRemove","markAsChecked","found","canAddMoreItems","$tagsContainer","toArray","acc","getElementWidth","MORE_OPTION_WIDTH","styles","filterList","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","BASE_IMAGE","isUserPreference","initializeWidthAndHeight","isAutoWidth","isAutoHeight","binaryValue","isValidField","compatibilityVersion","getTemplateItem","isVersion2OrSuperior","idUser","forceBase64","base64","buildItemUrlOffline","getFormParams","loadImageFromForm","buildOfflineImageId","getOfflineImage","db","AttachmentType","saveImageOffline","getFileService","resolveBlobFromPath","blobImage","operationType","saveOfflineImage","buildFullItemUrl","fileService","getFileDependencies","fileDependencies","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","propertyName","jqXHR","textStatus","errorThrown","getRenderElements","getServerResourceURL","userfieldGuid","getRenderValue","showDialog","initialParams","userfieldName","startUserfieldLoading","endUserfieldLoading","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","timeOutUserField","userfieldInstance","decoratedClass","showColumn","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","setSurrogateKey","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","timeOutDecorated","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","formattedDate","compositeValue","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","generateLink","isPropagationStopped","documentTemplateGenerate","showDocumentPreview","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","getRenderProperties","typeRangeControl","renderProperties","moneyMin","moneyMax","numberMin","numberMax","autoSaveEvents","newData","modalViewDidAppear","modalViewDidDisappear","selectedElement","saveBox","messageComplexGateway","errorComplexGateway","nonSupportedMethods","res1","messageError","validateFeatureSupport","handler","saveButton","nextButton","view_container","getViewContainer","bindTouchEvents","touchMoveStart","targetTouches","currentPositionY","showLoading","isFormButtonsEnabled","undoRemoveLastSuscriber","notifier","class_name","sticky","contentPanel","VISIBLE_TABS","suscribeMethods","checkPlusVisibility","tabItem","tabReadyDeferred","tabActiveDeferred","headerShow","headerHide","group","subscribeOnTouch","searchForm","resultsGrid","results","criteriaContainer","resultsContainer","searchFormParams","searchFormDeferred","renderSearchForm","createRenderContainer","getSearchContainerData","errorTemplate","getCommonTemplate","slideForm","loadSearchTab","currentSearchForm","containerGridResults","containerSearchCriteria","applyButtons","renderAddForm","addContainer","addFormParams","indicator","saveDataAddForm","currentAddForm","handleSearchFormZindex","refreshParams","dataHasXpath","mapping","setDisplayValueToControl","renderControlSearchForm","addForm","displayBottomButtons","searchFormContainer","searchFormToLoad","otherElements","isDefault","searchFormData","containerButtons","templateBtn","btnSearch","btnSelect","btnAdd","btnCancel","setSearchState","allowNew","virtual","renderEditionAddForm","kendoView","viewContainer","isAddForm","pane","modalViewDisplayed","slideFormParams","slideContainer","configureViewHandlers","goBack","renderSlideForm","formClass","onSave","containerParams","saveButtonLabel","cancelButtonLabel","error_message","actionLauncher","configureQueueVisibility","templateData","wrap","actionsContainer","configureTemplateHandlers","expr","FilterAction","subscribe","multipleSelection","act","executeAction","showConfirmationDialog","slide","showSaveButton","savedData","editMode","rewriteContextType","xpathContextWithKey","xpathContextWithoutKey","IdEntity","startForm","actionsToExecuteContainer","listOfActions","getMappingAction","removeActionSelector","openActionSelector","extraParams","dataAction","actionsToExecuteTitle","htmlTemplate","calculateFilters","polymorphicLauncher","totalActions","lessActions","templateArguments","treeActionsList","getTreeItems","bindHandlers","level","templateTreeItem","$targetData","onActionClicked","pageCache","$target","extendedText","TEXTAREA_LINE_HEIGHT","calculateHeight","resolvedValue","newHeight","retypeDouble","numberScientificNotation","inputDisplay","attachFormatSientificNotation","scientificNotationNumber","scientificNotationNumberDisplay","outerHTML","numericIcon","DEFAULT_PROPERTIES","maxYearsToDisplay","inputControl","controlElements","defaultDateControl","getFormattedDate","minDateControl","maxDateControl","setFullYear","isValidMinMaxValue","mobiscroll","calendar","showScrollArrows","lang","BIZAGI_LANGUAGE","inst","timeS","onSet","valueText","getVal","is24h","onBeforeShow","disableScroll","initializer","fullDateFormated","setHour","getFullFormatedDate","preprocessDateValue","isClearButton","currentTime","fullFormattedDate","setNewDateValue","fullDate","dateFromFormat","formatedFullDate","applyDateFormat","initIndexTime","endIndexTime","validateMinAndMaxValue","showMandatoryMessage","isMinValue","vValue","yesno","nValue","parsedValue","check","requiredElement","configureListHandlers","modalViewTemplate","modalView","configureModalViewHandlers","inputContainer","closeModalViewPromise","modalViewList","setModalViewDisplayValue","_value","$li","multiSelect","base","SEARCH_MIN_LENGTH","temporalElements","openModalView","onUnselectElement","onShowSelectedElements","valuesToShow","$listView","showFloatListView","datasource","$tagElements","modalListHandlers","$listContainer","addNewValuesToInput","tempArray","totalValues","elementTemplate","$ChildToAdd","viewMoreTemplate","$viewMore","$floatListContext","checkbox","addTemporalElement","closeFloatView","elementToRemove","$containerControl","$floatList","widthControl","my","at","of","collision","radio","selectedRadio","radioItem","cascadingCombo","ex","onComboChange","parentComboValue","initialValueSet","configureCombo","processComboData","showDisplayValue","inputSpan","comboValue","collectionnavigator","upload","QUALITY_PICTURE","LIMIT","EXTENSIONSIMG","EXTENSIONSFILE","EXTENSIONSVIDEO","EXTENSIONSAUDIO","allow_upload","checkExtensions","validOptions","video","nonSupportedExtension","uploadOptions","upload_options","checkImageFile","containerRender","itemAddfile","itIsMaxNumberFilesReached","fileAPISupported","buildUploadControl","addInteractions","fileInput","handlerUploadImage","appear","getImageResolutionItems","handlerResolutionUpload","dataFile","extensions","fullPath","checkMaxSizeFile","checkFileTypes","onUploadFileCompleted","checkMaxFiles","attachDeleteHandler","executeFormFailHandler","camera","getPicture","checkMaxSize","getFileDataInfo","fileData","modalResolutionUpload","buttonIndex","onFail","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","saveImage","CAMERA","mediaType","MediaType","PICTURE","destinationType","DestinationType","FILE_URI","correctOrientation","targetWidth","targetHeight","capture","captureVideo","dataVideo","checkMaxSizeVideo","saveVideo","actionSelected","ResolutionType","ORIGINAL","getImageResolution","transformImageSize","editedImageURL","localUrl","base64Image","errorResponse","addParams","queueID","FileUploadOptions","fileKey","mimeType","uploadKey","getImagePath","uploadFile","uploadWrapper","actualFiles","audio","nonSupportedExtensionsArr","getUploadChoices","buildAddFileParams","FormData","itemsUpload","ecm","respString","holder","startWaiting","$button","stopWaiting","$inputFile","adjustUrl","filesLinkElements","closeAccordionSection","elementBase","tmpidElement","elementsEvent","lock","unlock","del","elementReference","panelMetadata","btnSave","addEventsEcm","removeEventsEcm","menuItem","metadata","slideUp","nTimeoutAccordionSection","setMobiscroll","slideDown","elementsToCheck","isInvalid","metadataelement","tmpElement","oldValue","description","idmetadata","actualValue","idMetadata","metadataValues","valueDate","captureAudio","mediaFiles","audioUrl","localURL","saveAudio","Filename","dataAudio","enableVideo","enableAudio","enableImage","validateFileExtensions","nameArchivo","meta","metadataType","$arrayEcmControls","arrayItems","idfileupload","searchList","modalViewTemplates","inputTemplates","configureReadOnly","configureModalView","newElement","showResults","showNoResultsMessage","processRequest","suggestions","appendFoundItem","siblings","$newElement","lastElement","isModalViewContainer","li","defaultElement","req","finalValue","gridView","helpers","GRID_PAGE_SIZE","cellMetadata","getViewTemplate","view","View","stretch","scrollContent","contentElement","addRow","onFilterRow","modalTemplate","columnFilter","buildColumnFilter","modalFilterTemplate","modalFilter","attachModalFilterHandlers","localstorage","buildColumns","showHeaders","cssIndex","tags","applyGridPlugin","fetchData","updateData","configureHeaderAndFooterFixed","attachScrollHandler","scrollLeft","tableLeft","scrollHeader","transformLeft","transform","webkitTransform","OTransform","transformTop","tbody","cols","colgroup","col","offsetWidth","tbodyLeftTable","footer","scrollContainer","buildColumnModel","currentGrid","scrollElement","gridDefaultSortBy","cellReady","rowSelected","rowUnselected","editRow","deleteRow","showFormDetails","pageRequested","sortRequested","triggerGridPluginHandler","getRowIndexByKey","showMore","getHeaderStyles","columnModel","columnLabel","dataReady","dataReadyDeferred","fetchTotalData","onTotalData","showTotals","originalEditable","parentPromise","dataservice","propertiesGridForm","addPage","idAsigned","enableEditSubmitRequest","hideLabel","argumentsGrid","formlink","formLink","actionSaveNewRow","actionCancel","actionCancelRow","_sendRelation","_getData","_InternalRenderLinkForm","editPage","hideSaveButton","resp","noAction","history","current","applyActionUpdateGrid","allRows","acum","columnsTotalizers","bizagi_grid_smartphone","totalizer","hasTotalizer","totalData","isValidGrid","gridControlReady","showDetail","omitKeys","operationState","showTotal","sum","return_value","avg","formatTotalizedResult","bindRenderChange","isBinding","newid","disableProcessButons","argumentsfl","containerForm","executeSubmitShowDetailRequest","originalMethod","selfIntern","inlineAddPromise","inlineAddDeferred","rowLength","errorsMessage","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","SEARCH_DELAY","inputText","_simplySearch","hasMozillaHelpText","additionallabel","autoCompleteSearchResults","elemObject","itemautocomplete","wrapper","elementUl","searchItem","renderSearchItem","formSearchParams","itemId","addToSuggestions","alSuggestions","autocomplete","letter","fileprint","link","isValidValue","getFullyDecodedURI","linkEncode","encodeURI","linktarget","onCheckListGroupChange","addButton","newItemName","goalActivity","addEditButton","cancelEditButton","additionalElements","notifyLoadItems","resolvedItems","hasChanges","idActivity","itemsResolved","activityWork","activityFormTitle","activityDescription","prepareNewItem","contentHolder","deleteItem","itemPosition","selectItem","repaintControl","itemSelectedName","itemContent","addSelectedHandlers","addItem","guidItem","checkListHtml","refreshValue","layoutImage","success","urlCreator","URL","webkitURL","imageUrl","createObjectURL","idcase","idworkitem","contextxpath","layoutLink","proxy","onClickElement","navigateFromRender","reference","referenceType","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getHTMLFiles","$addImage","$deleteImage","isNative","resolutionUpload","imageAdd","imageDelete","resolutionButtonHandler","useCamera","coordinates","getBoundingClientRect","popoverOptions","CameraPopoverOptions","uploadFileCompleted","showAsyncImage","Image","getContext","drawImage","toDataURL","baseParams","zoom","img","$preview","originalImageWidth","orgiginalDisplayType","_isRefreshForm","getFormLinkXpathContext","hasentryrule","openLink","resolveCheckpointRequest","openLinkRule","paintFormLink","rollbackForm","dataRuleResp","wiew_container","saveRecord","error_code","hideHeadersButtonEdit","hasexitrule","closeExitRule","resolveSubmitCommitRequest","parentXpathContext","cordinate","updateDisplayValue","onSuccess","coords","onError","columnData","dataAssociation","addEventControl","showDefaultContainer","defaultHeader","defaultContainer","contextElement","associateElement","dissociateElement","headers","parentId","itemAdd","itemRemove","basicUserField","defaultUserField","controlName","originalGetControl","applyColumnStyles","cellIcon","isInlineRow","xpathPath","calculateValue","resolveValue","datepicker","getImageXpathContext","columnXpathSplit","nameFile","getECMXpathContext","h_xpath","simpleXpathArray","simpleXpath","clearOtherRows","rowsNumber","rowIndex","applyDocumentTemplatesFormat","documentList","previewTooltip","returnType","rangeDate","rangeMoney","rangeNumber","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","mobileform","formTemplate","usersForm","section","nestedForm","accordion","accordionItem","mobilegroup","mobiletext","layoutPlaceholder","layoutBoolean","entityTemplate","userfieldWrapper","getSearchRender","getQueryRender","getUser","activityCheckList","columnParams","exclusiveCheck","uploadecm","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","factory","enableMSF","resolvedRemplate","getGridTemplates","tmplIcons","enableCustomizations","getJavaScript","beta","execution_device","cachedFactory","getRenderFactory","print","getDataService","executionDeferred","deviceFactory","getFactory","unsubscribe","doc","ownerDocument","sendExecutingPostMessageWebparts","process","refreshing","pathProcess","lastWidth","lastHeight","timeoutResize","resizeInPopUpHTML","configureOpenForm","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","fastEmpty","canvasParent","isOpen","timeoutTrigger","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","buttonContainer","heightButtonContainer","renderBehavior","postMessageSocket","heightCanvas","iframeCommunicator"],"mappings":"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","sourcesContent":["function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This widget will implement a custom grid for bizagi rendering module\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Markup: <div></div>\r\n                                                                                                                                                                                                                                                                                                                                                                                *\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Styles:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// TODO: Create templates\n\n(function ($) {\n  $.widget(\"ui.bizagi_grid\", {\n    options: {\n      id: \"no-id\",\n      columns: [],\n      sortBy: \"\",\n      sortType: \"asc\",\n      showSummary: false,\n      collapse: false,\n      collapseState: false,\n      data: {},\n      indexedData: {},\n      maxColumns: 0,\n      buttonsPst: false,\n      title: '',\n      tableCssClass: '', // Style for entire table              \n      headerStyles: '',\n      floatingHeader: false,\n      hasExclusiveCheck: false,\n      template: {\n        grid: \"\",\n        waiting: \"\",\n        table: \"\",\n        emptyTable: \"\",\n        column: \"\",\n        specialColumn: \"\",\n        row: \"\",\n        rowButtons: \"\",\n        cell: \"\",\n        specialCell: \"\",\n        pager: \"\",\n        buttons: \"\",\n        dynamicPager: \"\",\n        summary: \"\",\n        summaryCell: \"\" },\n\n      actions: {\n        add: true,\n        edit: true,\n        remove: true,\n        details: true,\n        allowMore: false,\n        enableXlsExport: false,\n        enablePdfExport: false },\n\n      mode: \"execution\" },\n\n    /*\r\n                           *   Constructor\r\n                           */\n    _init: function _init() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Set object variables\n      self.page = 1;\n      self.changes = {};\n      self.totalRows = 0;\n      self.totalPages = 0;\n      self.data = options.data;\n      self.selectedRow = 0;\n      self.components = {};\n      self.buttons = {};\n      self.asyncCells = {};\n      self.scrollableArea = options.scrollableArea || self;\n\n      // Build column indexes\n      self.columnByIndex = {};\n      self.columnByName = {};\n      self.columnKeyIndex = 0;\n      $.each(options.columns, function (i, column) {\n        // Fix non-present properties\n        column.key = typeof column.key !== \"undefined\" ? column.key : false;\n        column.label = typeof column.label !== \"undefined\" ? column.label : column.name;\n        column.sortType = \"asc\";\n        column.tooltip = typeof column.tooltip !== \"undefined\" ? column.tooltip : \"\";\n\n        // Index the column\n        self.columnByIndex[column.index] = column;\n        self.columnByName[column.name] = column;\n        if (column.key) {\n          self.columnKeyIndex = column.index;\n        }\n      });\n\n      // Set sort options\n      options.sortBy = options.sortBy || self.columnByIndex[0].name;\n      if (self.columnByName[options.sortBy]) {\n        self.columnByName[options.sortBy].sortType = options.sortType;\n      } else {\n        if (self.columnByName[options.sortBy.split(\".\")[0]]) {\n          self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\n        }\n      }\n\n      // Add base classes\n      element.addClass(\"ui-bizagi-grid-wrapper\");\n      element.attr(\"data-bizagi-id\", options.id);\n\n      // Calculate\n      self.calculateKeyIndex();\n\n      //collapse state\n      self.collapseState = options.collapseState;\n\n      // Start waiting signal \n      self.startLoading(false);\n    },\n    /*\r\n       *   Method to start loading for ajax data and update the ui\r\n       */\n    startLoading: function startLoading(bUseTimeout) {\n      var self = this;\n      bUseTimeout = typeof bUseTimeout !== \"undefined\" ? bUseTimeout : true;\n\n      if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Draw the waiting template when the endLoading delays more than 250ms\n      var waitingFn = function waitingFn() {\n        var element = self.element;\n        var options = self.options;\n\n        // Set null to timeout\n        self.waitingTimeout = null;\n\n        element.append($.fasttmpl(options.template.waiting));\n      };\n\n      if (bUseTimeout) {\n        self.waitingTimeout = setTimeout(waitingFn, 250);\n      } else {\n        waitingFn();\n      }\n    },\n\n    /*\r\n       *   Method to remove the loading message\r\n       */\n    endLoading: function endLoading() {\n      var self = this;\n      var element = self.element;\n\n      // Remove waiting timeout\n      if (self.waitingTimeout) {\n        clearTimeout(self.waitingTimeout);\n        self.waitingTimeout = null;\n      }\n\n      // Remove everything\n      element.empty();\n    },\n\n    /*\r\n       *   This method updates the data and refreshes the grid\r\n       */\n    setData: function setData(data) {\n      var self = this;\n\n      // Set internal data\n      self.data = data;\n      self.calculateKeyIndex();\n\n      // Call refresh\n      self.refresh();\n    },\n    /*\r\n       *   This method retrieves the actual data from the grid\r\n       */\n    getData: function getData() {\n      var self = this;\n\n      // Return internal data\n      return self.data;\n    },\n\n    /*\r\n       *   Calculate key index\r\n       */\n    calculateKeyIndex: function calculateKeyIndex() {\n      var self = this;\n      var columns = self.options.columns;\n      var data = self.data;\n\n      indexedData = {};\n\n      if (data.rows) {\n        $.each(data.rows, function (i, row) {\n          var key;\n          var row;\n          $.each(columns, function (j, column) {\n            if (column.key) key = row[j];\n          });\n          indexedData[key] = row;\n        });\n      }\n      self.indexedData = indexedData;\n    },\n\n    /*\r\n       *   This method retrieves the changes made by the user\r\n       */\n    getChanges: function getChanges() {\n    },\n\n    /*\r\n       *   This method refreshes the grid\r\n       */\n    refresh: function refresh() {\n      var self = this;\n\n      // Cleans components\n      self._cleanComponents();\n      self._cleanButtons();\n\n      // Call the draw method\n      self.components = {};\n      self.draw();\n    },\n\n    /*\r\n       *   This method refreshes only the summary\r\n       */\n    refreshSummary: function refreshSummary(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n\n      // Do nothing if the component is drawing or there is no summary\n      if (self.drawing) return;\n      if (!summary) return;\n\n      // Resolve summary\n      if (options.showSummary) {\n\n        if (columnIndex) {\n          // Refresh an specific summary\n          self.refreshSummaryCell(columnIndex);\n\n        } else {\n          // Clean and re-draw summary\n          summary.empty();\n          summary.append(self.drawSummary());\n\n          // Execute post-render\n          self.postRenderSummary(summary);\n        }\n      }\n    },\n\n    /*\r\n       *   Refresh a single summary cell\r\n       */\n    refreshSummaryCell: function refreshSummaryCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n      var summary = self._getComponent(\"summary\");\n      var getCell = function getCell(summary, columnIndex) {\n        var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n        return $(cells[columnIndex]);\n      };\n      var cell = getCell(summary, columnIndex);\n\n      // Omit index key\n      var column = self.columnByIndex[columnIndex];\n      if (column.key) return; // Omit key column\n\n      // Clean and Execute render\n      var html = self.drawSummaryCell(column);\n      cell.replaceWith(html);\n\n      // Recalculate cell\n      cell = getCell(summary, columnIndex);\n\n      // Execute post-render\n      self.onCellReady(column, \"summary\", cell, false);\n    },\n\n    /*\r\n       *   This method changes a cell value in the grid\r\n       */\n    changeCellValue: function changeCellValue(key, columnIndex, value) {\n      var self = this;\n      if (self.indexedData[key]) {\n        self.indexedData[key][columnIndex] = value;\n      }\n    },\n\n    deleteCellExclusiveValues: function deleteCellExclusiveValues(columnIndex) {\n      var self = this;\n      if (self.indexedData) {\n        $.each(self.indexedData, function (key) {\n          self.indexedData[key][columnIndex] = false;\n        });\n      }\n    },\n\n    /*\r\n       *   This method draws the full grid associated with the data\r\n       */\n    draw: function draw() {\n      var self = this;\n      var options = self.options;\n      var element = self.element;\n\n      // Start global drawing flag\n      self.drawing = true;\n\n      // Ends waiting signal\n      self.endLoading();\n\n      if (options.orientation === \"rtl\") {\n\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.gridRtl, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n\n      } else {\n        // Resolve grid template\n        var html = $.fasttmpl(options.template.grid, {\n          label: options.title,\n          buttonsPst: options.buttonsPst,\n          collapse: options.collapse,\n          collapseState: self.collapseState,\n          isDesign: options.mode === \"design\" });\n\n      }\n\n      // Call sub-drawers\n      html = self.drawTable(html);\n      self.grid = $(html).appendTo(element);\n\n      // Post render the grid\n      self.postRender(self.grid);\n\n      if (options.mode !== \"design\") {\n        // Attach paginator desktop\n        self.attachPaginator();\n\n        // Attach handlers\n        self.attachHandlers();\n      }\n\n      if (options.mode === \"execution\" && options.floatingHeader) {\n        var $tableContainer = self._getComponent(\"table\");\n        var $table = $(\"table\", $tableContainer);\n        var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\n\n        $table.stickyTableHeaders({\n          fixedOffset: offset > 0 ? offset - 1 : offset,\n          scrollableArea: self.scrollableArea,\n          zIndex: 1000,\n          cacheHeaderHeight: true });\n\n        $tableContainer.bind(\"scroll\", function () {\n          $table.trigger(\"resize.stickyTableHeaders\");\n        });\n      }\n\n      // Toggle visibility depending from row count\n      if (self.data.rows.length === 0) {\n        self._getComponent(\"table\").hide();\n        self._getComponent(\"pager\").hide();\n        self._getButton(\"remove\").hide();\n        self._getButton(\"edit\").hide();\n        self._getComponent(\"dynamicPager\").hide();\n        self._getComponent(\"emptyTable\").show();\n\n      } else {\n        self._getComponent(\"table\").show();\n        self._getButton(\"remove\").show();\n        self._getButton(\"edit\").show();\n        self._getComponent(\"emptyTable\").hide();\n\n        if (options.actions.allowMore) {\n          self._getComponent(\"dynamicPager\").show();\n          self._getComponent(\"pager\").hide();\n        } else {\n          self._getComponent(\"pager\").show();\n          self._getComponent(\"dynamicPager\").hide();\n        }\n\n        if (options.actions.edit) {\n          self._getButton(\"edit\").show();\n        }\n\n        if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\n          self._getButton('show-grid-export-options').show();\n        } else {\n          self._getButton('show-grid-export-options').css('display', 'none');\n        }\n\n      }\n\n      // End global drawing flag\n      self.drawing = false;\n    },\n\n    attachPaginator: function attachPaginator() {\n    },\n\n    /*\r\n       *   This method draws the table associated with the data\r\n       */\n    drawTable: function drawTable(html) {\n      var self = this;\n      var options = self.options;\n\n      // Resolve table template\n      var table = $.fasttmpl(options.template.table, {\n        showSummary: options.showSummary,\n        tableCssClass: options.tableCssClass,\n        orientation: options.orientation });\n\n      var emptyTable = $.fasttmpl(options.template.emptyTable);\n\n      // Resolve header\n      table = self._replaceElement(table, \"columns\", self.drawHeader());\n\n      // Resolve body\n      table = self._replaceElement(table, \"rows\", self.drawBody());\n\n      // Resolve summary\n      if (options.showSummary) {\n        table = self._replaceElement(table, \"summary\", self.drawSummary());\n      }\n\n      // Resolve pager\n      html = self._replaceElement(html, \"pager\", self.drawPager());\n\n      // Resolve buttons\n      html = self._replaceElement(html, \"buttons\", self.drawButtons());\n\n      //Resolve export options menu\n      html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\n\n      // Resolve row buttons\n      html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\n\n      // Resolve dynamic Pager\n      html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\n\n      // Perform grid replaces\n      html = self._replaceElement(html, \"table\", table);\n      html = self._replaceElement(html, \"emptyTable\", emptyTable);\n      return html;\n    },\n    /*\r\n       * Find if a column has a exact match for sort it\r\n       */\n    isExactMatch: function isExactMatch() {\n      var self = this;\n      var columns = self.options.columns;\n      var sortBy = self.options.sortBy;\n      var i = 0,length = columns.length;\n      for (; i < length;) {\n        if (sortBy == columns[i++].name) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /*\r\n       *   This method draws the grid header\r\n       */\n    drawHeader: function drawHeader() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve columns\n      var columns = \"\";\n\n      self.exactMatch = self.isExactMatch();\n\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw normal column\n            columns += self.drawColumn(column);\n          }\n        } else {\n          // Draw normal column\n          columns += self.drawColumn(column);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowButtons()) {\n        // Draw special column\n        columns += self.drawSpecialColumn();\n      }\n\n      return columns;\n    },\n\n    /*\r\n       *   This method draws a column header\r\n       */\n    drawColumn: function drawColumn(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var headerStyles = options.headerStyles ? options.headerStyles.header : \"\";\n      headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\n      var columnAlign = columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\";\n      var isSortable = options.isSortable && columnProperties.isSortable && typeof columnProperties.xpath !== \"undefined\";\n      var initialSortBy = options.sortBy.split(\".\")[0];\n      var sortActive = false;\n      if (isSortable && (column.name === options.sortBy || column.name === initialSortBy && !self.exactMatch)) sortActive = true;\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.column, $.extend({}, column, {\n        isKey: column.key,\n        sortActive: sortActive,\n        sortType: options.sortOrder,\n        isSortable: isSortable,\n        tooltip: column.tooltip || \"\",\n        columnCssClass: cssClass,\n        headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\n        headerStyles: headerStyles,\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio,\n        columnAlign: columnAlign,\n        flexAlign: bizagi.util.mapAlignClassName(columnAlign) }));\n\n    },\n    /*\r\n       *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialColumn: function drawSpecialColumn() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.specialColumn);\n    },\n\n    drawDynamicPager: function drawDynamicPager() {\n      var self = this;\n      var options = self.options;\n\n      // Resolve column template\n      return $.fasttmpl(options.template.dynamicPager);\n    },\n\n    /*\r\n       *   This method draws the table body\r\n       */\n    drawBody: function drawBody() {\n      var self = this;\n\n      // Resolve rows\n      var rows = \"\";\n      $.each(self.data.rows, function (i, row) {\n        rows += self.drawRow(row);\n      });\n\n      return rows;\n    },\n\n    /*\r\n       *   This method draws a grid row\r\n       */\n    drawRow: function drawRow(rowData, isNewRow) {\n      var self = this;\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n      var row = $.fasttmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      $.each(rowData, function (i, cell) {\n        if (self.options.maxColumns > 0) {\n          if (i < self.options.maxColumns + 1) {\n            // Draw normal cell\n            cells += self.drawCell(i, key, cell, newRow);\n          }\n        } else {\n          // Draw normal cell\n          cells += self.drawCell(i, key, cell, newRow);\n        }\n      });\n\n      if (self.options.maxColumns > 0 && self._canShowRowButtons()) {\n        // Draw special column\n        cells += self.drawSpecialCell(self.options.maxColumns + 1);\n      }\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws the cells for summary\r\n       */\n    drawSummary: function drawSummary() {\n      var self = this;\n      var options = self.options;\n      var row = $.fasttmpl(options.template.summary);\n      var cells = \"\";\n\n      // Resolve summary cells\n      $.each(options.columns, function (i, column) {\n        if (self.options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw summary column\n            cells += self.drawSummaryCell(column);\n          }\n        } else {\n          // Draw summary column\n          cells += self.drawSummaryCell(column);\n        }\n      });\n\n      // Resolve cells template\n      row = self._replaceElement(row, \"summary-cells\", cells);\n      return row;\n    },\n\n    /*\r\n       *   This method draws a single summary cell\r\n       */\n    drawSummaryCell: function drawSummaryCell(column) {\n      var self = this;\n      var options = self.options;\n\n      var columnProperties = column.bizAgiProperties || {};\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.summaryCell, {\n        hidden: column.hidden || false,\n        summarizeBy: column.summarizeBy,\n        cellAlign: cellAlign });\n\n\n      var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\n      result = result != undefined && typeof result != \"number\" ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\n\n      if (!result) {\n        result = \"\";\n      }\n\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      return cell;\n    },\n\n    /*\r\n       *   This method draws the grid cell\r\n       */\n    drawCell: function drawCell(columnIndex, key, value, isNewRow) {\n      var self = this;\n      var options = self.options;\n      isNewRow = isNewRow || false;\n      var messageValidation = \"\";\n\n      // Ensure that data is mapped into a column\n      if (!self.columnByIndex[columnIndex]) {\n        return \"\";\n      }\n\n      // Get message\n      if (columnIndex > 0) {\n        messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\n      }\n\n      var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\n      var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\n      var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\n      var controlType = bizagi.util.getColumnType(columnProperties.type);\n      var isHorizontalRadio = controlType === \"radio\" && columnProperties.horizontal;\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.cell, {\n        isKey: self.columnByIndex[columnIndex].key,\n        hidden: options.columns[columnIndex].hidden || false,\n        isDesign: options.mode === \"design\",\n        messageValidation: messageValidation,\n        columnCssClass: cssClass,\n        id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\n        cellAlign: cellAlign,\n        flexAlign: bizagi.util.mapAlignClassName(cellAlign),\n        controlType: controlType,\n        isHorizontalRadio: isHorizontalRadio });\n\n\n      var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\n      if (!result) {\n        result = \"\";\n      }\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\n        } else {\n          // Wait for result\n          cell = self._replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = self._replaceElement(cell, \"cellContent\", result);\n      }\n\n      self.columnByIndex[columnIndex]['cell'] = $(cell);\n      return cell;\n    },\n    /*\r\n       *   Returns the resolved result from a promise when the promise has been executed already\r\n       */\n    resolveResult: function resolveResult(promise) {\n      var result;\n\n      promise.done(function (data) {\n        result = data;\n      });\n\n      return result;\n    },\n    /*\r\n       *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n       */\n    drawSpecialCell: function drawSpecialCell(columnIndex) {\n      var self = this;\n      var options = self.options;\n\n      /* // Ensure that data is mapped into a column\r\n                                  if (!self.columnByIndex[columnIndex]) {\r\n                                      return \"\";\r\n                                  } */\n\n      // Resolve cell template\n      var cell = $.fasttmpl(options.template.specialCell);\n\n      return cell;\n    },\n    /*\r\n       *   This method draws a group header\r\n       */\n    drawGroupHeader: function drawGroupHeader() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a footer\r\n       */\n    drawFooter: function drawFooter() {\n      // TODO: Implement for PC version\n    },\n    /*\r\n       *   This method draws a grid pager\r\n       */\n    drawPager: function drawPager() {\n      var self = this;\n      var options = self.options;\n\n      // Calculate pages\n      var pages = [];\n      for (var i = 1; i <= self.data.total; i++) {\n        pages.push({\n          number: i,\n          active: i == self.data.page });\n\n      }\n\n      // Resolve pager template\n      return $.fasttmpl(options.template.pager, {\n        page: self.data.page,\n        pages: pages,\n        records: self.data.records });\n\n    },\n    /*\r\n       *   This method draws a grid button actions\r\n       */\n    drawButtons: function drawButtons() {\n      var self = this;\n      var options = self.options;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend(options.actions, tooltips);\n\n      if (self._canShowButtons()) {\n        // Resolve buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.buttonsRtl, parameters);\n        } else {\n          return $.fasttmpl(options.template.buttons, parameters);\n        }\n      } else {\n        return \"\";\n      }\n    },\n\n    /*\r\n       * This method draws the export options menu\r\n       */\n    drawGridExportOptions: function drawGridExportOptions() {\n      var self = this;\n      var options = self.options;\n      var actions = options.actions;\n      var tooltips = options.tooltips || {};\n\n      var parameters = $.extend({\n        orientation: options.orientation,\n        enableXlsExport: actions.enableXlsExport,\n        enablePdfExport: actions.enablePdfExport },\n      tooltips);\n\n      return $.fasttmpl(options.template.exportOptions, parameters);\n    },\n\n    /*\r\n       *   This method draws a row buttons,\r\n       *   those buttons will be invisible, and will be activated when the user selects a row\r\n       */\n    drawRowButtons: function drawRowButtons() {\n      var self = this;\n      var options = self.options;\n\n      if (self._canShowRowButtons()) {\n        // Resolve row buttons template\n        if (options.orientation === \"rtl\") {\n          return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\n        } else {\n          return $.fasttmpl(options.template.rowButtons, options.actions);\n        }\n      } else {\n        return \"\";\n      }\n    },\n    /*\r\n       *   Execute post-renders in all the grid\r\n       */\n    postRender: function postRender() {\n      var self = this;\n      var options = self.options;\n\n      // Get grid rows\n      var rows = self._getComponent(\"cells\");\n      if (rows) {\n        $.each(rows, function (i, row) {\n          row = $(row);\n          self.postRenderRow(row);\n        });\n      }\n\n      // Get summary row\n      if (options.showSummary) {\n        var summary = self._getComponent(\"summary\");\n        self.postRenderSummary(summary);\n      }\n\n      self._triggerHandler(\"gridControlReady\");\n    },\n\n    /*\r\n       *   Execute post-renders in each cell after the element has been created\r\n       */\n    postRenderRow: function postRenderRow(row) {\n      var self = this;\n      var key = row.attr(\"data-business-key\");\n      var isNewRow = row.attr(\"data-new-row\");\n      var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (typeof column == \"undefined\" || column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, key, cell, isNewRow);\n          });\n        } else {\n          self.onCellReady(column, key, $(cell), isNewRow);\n        }\n      });\n    },\n\n    /*\r\n       *   Execute post-renders in each summary cell after the element has been created\r\n       */\n    postRenderSummary: function postRenderSummary(summary) {\n      var self = this;\n      var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            self.onCellReady(column, \"summary\", cell, false);\n          });\n        } else {\n          self.onCellReady(column, \"summary\", $(cell), false);\n        }\n      });\n    },\n\n    /*\r\n       *   Method to attach any handler to the grid\r\n       */\n    attachHandlers: function attachHandlers() {},\n\n    //TODO IMPLEMENTANDO\n    selectDynamicPager: function selectDynamicPager() {\n      this.onDynamicPager();\n    },\n\n    /*\r\n       *   Changes the current page in the grid\r\n       */\n    changePage: function changePage(page) {\n      var self = this;\n      var currentPage = Number(self.data.page);\n      var total = self.data.total;\n      var newPage = page;\n\n      // Process previous page\n      if (page === \"previous\") {\n        if (currentPage > 1) {\n          newPage = currentPage - 1;\n        } else {\n          return;\n        }\n      }\n\n      // Process next page\n      if (page === \"next\") {\n        if (currentPage < total) {\n          newPage = currentPage + 1;\n        } else {\n          return;\n        }\n      }\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Update internal options\n      self.page = Number(newPage);\n\n      // Execute handler\n      self.onPageRequested();\n    },\n\n    /**\r\n        * Get current page of data\r\n        * @returns {*}\r\n        */\n    getCurrentPage: function getCurrentPage() {\n      var data = this.data || {};\n\n      return data.page || 1;\n    },\n\n    /*\r\n       *  Verify cells before sumitonchange\r\n       */\n    isValid: function isValid() {\n      // Trigger handler\n      return this._triggerHandler(\"isValid\");\n    },\n\n    /*\r\n       *   Sort the grid by a column\r\n       */\n    sortBy: function sortBy(columnIndex, sortType) {\n      var self = this;\n      var options = self.options;\n      var column = self.columnByIndex[columnIndex];\n\n      if (typeof options.sortBy === \"undefined\") {\n        return true;\n      }\n\n      // Set new sort type reversed to current, if the sort column has not changed\n      if (typeof column.name === \"undefined\") column.name = column.label;\n      if (column.name == options.sortBy) {\n        sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\n      } else {\n        if (column.name == options.sortBy.split(\".\")[0]) {\n          sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\n        } else {\n          sortType = sortType || options.sortType;\n        }\n      }\n\n      // Update internal options\n      if (options.sortBy.split(\".\").length > 1) {\n        if (options.sortBy.split(\".\")[0] != column.name) {\n          options.sortBy = column.name;\n        } else {\n          options.sortBy = column.name;\n        }\n      } else {\n        options.sortBy = column.name;\n      }\n\n      if (typeof column.bizAgiProperties.sortAttribute !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\n        options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\n      }\n\n      options.sortColumn = column;\n      options.sortType = sortType;\n      options.sortOrder = sortType;\n\n      //refresh components cells and rows\n      self._cleanComponents();\n\n      // Execute handler\n      self.onSortRequested();\n    },\n\n    /*\r\n       *   Selects a row in the grid\r\n       */\n    selectRow: function selectRow(key, businessKey) {\n      var self = this;\n\n      if (self.selectedRow == key) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n\n        // Update internal options\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      } else {\n        if (self.selectedRow != 0) {\n          // Invoke un-select handler\n          self.onRowUnselected();\n        }\n\n        // Update internal options\n        self.selectedRow = key;\n        self.selectedBusinessKey = businessKey;\n\n        // Invoke select handler\n        self.onRowSelected();\n      }\n    },\n\n    /*\r\n       *   Unselects a row in the grid\r\n       */\n    unselectRow: function unselectRow() {\n      var self = this;\n\n      if (self.selectedRow != 0) {\n        // Invoke un-select handler\n        self.onRowUnselected();\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      }\n    },\n\n    /*\r\n       *   Calculates the summary for a column given the data\r\n       */\n    calculateSummary: function calculateSummary(column) {\n      var self = this;\n      var operation = column.summarizeBy;\n\n      //Consider the default values in the operations\n      $.each(self.data.rows, function (i, value) {\n        if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\n          self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\n        }\n      });\n      var columnValues = $.map(self.data.rows, function (row, i) {return row[column.index];});\n      var result;\n\n      // Don't calculate anything if there are no rows\n      if (columnValues.length == 0) return 0;\n\n      // Resolve operations\n      if (operation === \"sum\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n\n      } else if (operation === \"min\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value < result) result = Number(value);});\n        if (result === Math.max()) result = null;\n\n      } else if (operation === \"max\") {\n        result = columnValues[0] || 0;\n        $.each(columnValues, function (i, value) {if (typeof value === \"number\" && value != null && value > result) result = Number(value);});\n        if (result === Math.min()) result = null;\n\n      } else if (operation === \"avg\") {\n        result = 0;\n        $.each(columnValues, function (i, value) {if (value != null) result += Number(value);});\n        result = result / columnValues.length;\n\n      } else if (operation === \"count\") {\n        result = 0;\n        columnValues = self.data.rows;\n\n        for (i = 0; i < columnValues.length; i++) {\n          var columnValue = columnValues[i][column.index];\n\n          if (columnValue instanceof Array && columnValue.length > 0) {\n            result += 1;\n          } else\n          if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\n            result += 1;\n          }\n        }\n      }\n      return result;\n    },\n\n    /*\r\n       *   Process an action in order to do something with the grid\r\n       */\n    processAction: function processAction(action, params) {\n      var self = this;\n\n      var key = params && params.key ? params.key : self.selectedBusinessKey;\n      if (action === \"edit\") {\n        self.onEditRow(key);\n      }\n      if (action === \"remove\") {\n        self.onDeleteRow(key);\n      }\n      if (action === \"more\") {\n        self.onShowMore(key);\n      }\n      if (action === \"details\") {\n        self.onShowDetails(key);\n      }\n      if (action === \"add\") {\n        self.onAddRow();\n      }\n\n      if (action === \"show-grid-export-options\") {\n        self.onShowExportGridOptions();\n      }\n    },\n    /*\r\n       *   Executes the page requested handler\r\n       */\n    onPageRequested: function onPageRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the sort requested handler\r\n       */\n    onSortRequested: function onSortRequested() {\n      var self = this;\n\n      // Start loading signal \n      self.startLoading();\n\n      // Trigger handler\n      return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\n    },\n    /*\r\n       *   Executes the row selected handler\r\n       */\n    onRowSelected: function onRowSelected() {\n      var self = this;\n\n      return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\n    },\n    /*\r\n       *   Executes the row un-selected handler\r\n       */\n    onRowUnselected: function onRowUnselected() {\n      var self = this;\n      return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       * Executes collapse grid\r\n       */\n    onCollapseGrid: function onCollapseGrid() {\n      var self = this;\n      return self._triggerHandler(\"performCollapseGrid\");\n    },\n\n    //TODO:llamar\n    onDynamicPager: function onDynamicPager() {\n      var self = this;\n      return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\n    },\n\n    /*\r\n       *   Executes the on draw cell handler\r\n       */\n    onDrawCell: function onDrawCell(column, key, value, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"drawCell\", {\n        column: column,\n        key: key,\n        value: value,\n        isNewRow: isNewRow });\n\n    },\n    /*\r\n       *   Executes on cell ready handler\r\n       */\n    onCellReady: function onCellReady(column, key, cell, isNewRow) {\n      var self = this;\n      return self._triggerHandler(\"cellReady\", {\n        column: column,\n        key: key,\n        cell: cell,\n        isNewRow: isNewRow });\n\n    },\n\n    /*\r\n       *   Executes the on draw control handler\r\n       */\n    onDrawControl: function onDrawControl() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on draw group header handler\r\n       */\n    onDrawGroupHeader: function onDrawGroupHeader() {\n      //TODO: Implement this\n    },\n    /*\r\n       *   Executes the on add row handler\r\n       */\n    onAddRow: function onAddRow() {\n      var self = this;\n      return self._triggerHandler(\"addRow\");\n    },\n    /*\r\n       *   Executes the on edit row handler\r\n       */\n    onEditRow: function onEditRow(key) {\n      var self = this;\n      return self._triggerHandler(\"editRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on delete row handler\r\n       */\n    onDeleteRow: function onDeleteRow(key) {\n      var self = this;\n      return self._triggerHandler(\"deleteRow\", { key: key });\n    },\n    /*\r\n       *   Executes the on show more handler\r\n       */\n    onShowMore: function onShowMore(key) {\n      var self = this;\n      return self._triggerHandler(\"showMore\", { key: key });\n    },\n    /*\r\n       *   Executes the on show details handler\r\n       */\n    onShowDetails: function onShowDetails(key) {\n      var self = this;\n      return self._triggerHandler(\"showFormDetails\", { key: key });\n    },\n    /*\r\n       * Executes the on show export grid options \r\n       */\n    onShowExportGridOptions: function onShowExportGridOptions() {\n      var self = this;\n      return self._triggerHandler(\"showGridExportOptions\");\n    },\n\n    /*\r\n       *   Replaces a matched element in the container for the specified \"replace\" element\r\n       */\n    _replaceElement: function _replaceElement(html, element, replace) {\n      return html.replaceFirstWithoutPatterns(\"{{element \" + element + \"}}\", replace);\n    },\n\n    /*\r\n       *   Return the event handler parameters object\r\n       */\n    _buildRefreshParameters: function _buildRefreshParameters() {\n      var self = this;\n      var options = self.options;\n      var sortColumn = options.sortColumn != undefined ? options.sortColumn.index : 1;\n      return {\n        page: self.page,\n        sortBy: options.sortBy,\n        sortType: options.sortOrder,\n        sortColumnIndex: sortColumn };\n\n    },\n    /*\r\n       *   Calls directly to handler callback\r\n       */\n    _triggerHandler: function _triggerHandler(type, data) {\n      var callback = this.options[type];\n      if (!callback) {\n        return null;\n      }\n      return callback.call(this.element[0], data);\n    },\n    /*\r\n       *   Gets the component\r\n       */\n    _getComponent: function _getComponent(component) {\n      var self = this;\n      var element = self.element;\n      if (!self.components[component]) {\n        var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\n        if (foundComponent != null && foundComponent.length > 0) {\n          self.components[component] = foundComponent;\n        }\n      }\n      return self.components[component];\n    },\n    /*\r\n       *   Gets the specific Button\r\n       */\n    _getButton: function _getButton(button) {\n      var self = this;\n      var element = self.element;\n      if (!self.buttons[button])\n      self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\n      return self.buttons[button];\n    },\n    /*\r\n       * Cleans the components \r\n       */\n    _cleanComponents: function _cleanComponents() {\n      var self = this;\n      self.components = {};\n    },\n    /*\r\n       * Cleans the buttons \r\n       */\n    _cleanButtons: function _cleanButtons() {\n      var self = this;\n      self.buttons = {};\n    },\n    /*\r\n       *  Template method to check if buttons component must be rendered\r\n       */\n    _canShowButtons: function _canShowButtons() {\n      return true;\n    },\n    /*\r\n       *  Template method to check if row buttons must be displayed when the row is selected\r\n       */\n    _canShowRowButtons: function _canShowRowButtons() {\n      return true;\n    } });\n\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Utils\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide misc helpers to all modules\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Create or Define BizAgi namespace\nbizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\nbizagi.util.smartphone = typeof bizagi.util.smartphone !== \"undefined\" ? bizagi.util.smartphone : {};\nbizagi.util.tablet = typeof bizagi.util.tablet !== \"undefined\" ? bizagi.util.tablet : {};\n\nvar DEVICES = {};\n\n// Device Type\nDEVICES[DEVICES['desktop'] = 0] = 'desktop';\nDEVICES[DEVICES['smartphone'] = 1] = 'smartphone';\nDEVICES[DEVICES['tablet'] = 2] = 'tablet';\n\n// Add definition\nbizagi.deviceEnum = DEVICES;\n\n/*\r\n                              *   Define mini-plugin to acceess iframe's boundaries\r\n                              */\n(function ($) {\n  $.fn.callInside = function (fx, args) {\n    if ($(this)[0].tagName.toLowerCase() != \"iframe\")\n    return null;\n    // Don't execute the code when the content window is not ready yet    \n    if ($(this)[0].contentWindow == null)\n    return null;\n    // Check if the iframe is cross domain\n    try {\n      // Evals the content\n      $(this)[0].contentWindow.args = args;\n    } catch (e) {\n      // If an exception is thrown here this is a cross domain access\n      return null;\n    }\n\n    if ($.browser.msie) {\n      return $(this)[0].contentWindow.execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    } else if ($.browser.webkit || $.browser.mozilla) {\n      return $(this)[0].contentWindow.eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n    }\n  };\n})(jQuery);\n(function ($) {\n  $.fn.callInsidePopup = function (fx, args) {\n    // This is window here\n    var self = this;\n    $(document).ready(function () {\n      // Check if the iframe is cross domain\n      try {\n        // Evals the content\n        $(self)[0].args = args;\n      } catch (e) {\n        // If an exception is thrown here this is a cross domain access\n        return null;\n      }\n\n      if ($.browser.msie) {\n        return $(self)[0].execScript('args = (this.window.args)?this.window.args:{}; insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      } else if ($.browser.webkit || $.browser.mozilla) {\n        return $(self)[0].eval('args = window.args;insideFunction = ' + fx.toString() + '; insideFunction(args)');\n      }\n\n    });\n  };\n})(jQuery);\n(function ($) {\n\n  // add support for CSS functions for \"setProperty\" in ie8\n  var isStyleFuncSupported = !!CSSStyleDeclaration.prototype.getPropertyValue;\n  if (!isStyleFuncSupported) {\n    CSSStyleDeclaration.prototype.getPropertyValue = function (a) {\n      return this.getAttribute(a);\n    };\n    CSSStyleDeclaration.prototype.setProperty = function (styleName, value, priority) {\n      this.setAttribute(styleName, value);\n      var priority = typeof priority != 'undefined' ? priority : '';\n      if (priority != '') {\n        // Add priority manually\n        var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*' + RegExp.escape(value) + '(\\\\s*;)?', 'gmi');\n        this.cssText = this.cssText.replace(rule, styleName + ': ' + value + ' !' + priority + ';');\n      }\n    };\n\n    CSSStyleDeclaration.prototype.removeProperty = function (a) {\n      return this.removeAttribute(a);\n    };\n\n    CSSStyleDeclaration.prototype.getPropertyPriority = function (styleName) {\n      var rule = new RegExp(RegExp.escape(styleName) + '\\\\s*:\\\\s*[^\\\\s]*\\\\s*!important(\\\\s*;)?', 'gmi');\n      return rule.test(this.cssText) ? 'important' : '';\n    };\n  }\n\n  // Escape regex chars with \\\n  RegExp.escape = function (text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\n  };\n\n  // The style function\n  jQuery.fn.style = function (styleName, value, priority) {\n    // DOM node\n    var node = this.get(0);\n    // Ensure we have a DOM node \n    if (typeof node == 'undefined') {\n      return;\n    }\n    // CSSStyleDeclaration\n    var style = this.get(0).style;\n    // Getter/Setter\n    if (typeof styleName != 'undefined') {\n      if (typeof value != 'undefined') {\n        // Set style property\n        var priority = typeof priority != 'undefined' ? priority : '';\n        // Hack to IE8\n        if (style.setProperty) {\n          style.setProperty(styleName, value, priority);\n        } else {\n          style.setAttribute(styleName, value, priority);\n        }\n      } else {\n        // Get style property\n\n        return style.getPropertyValue(styleName);\n      }\n    } else {\n      // Get CSSStyleDeclaration\n      return style;\n    }\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.nl2br = function (value) {\n    return value.replace(/(\\r\\n|\\n\\r|\\r|\\n|\\\\r\\\\n|\\\\n\\\\r|\\\\r|\\\\n)/g, \"<br>\");\n  };\n})(jQuery);\n\n\n\n(function ($) {\n  jQuery.br2nl = function (value) {\n    return value.replace(/\\r\\n|\\r|\\n/g, \"\\r\");\n  };\n})(jQuery);\n\n/**\r\n             *   Can be compare control between their intance value and existing value\r\n             */\n//TODO: DEPL- Please move this out of here, this is rendering logic, it must exists as a function for the render, and every erender could override its implementation\n(function ($) {\n  jQuery.controlValueIsChanged = function (control) {\n    var self = control;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (control.properties.type == \"grid\" && control.ready().state() == \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\", \"queryState\"].includes(properties.type) || /^cascadingcombo$/i.test(properties.type)) {\n      if (value && value.length !== undefined)\n      value = value[0];\n      if (compareValue && compareValue.length !== undefined)\n      compareValue = compareValue[0];\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      result = compareValue == value ? false : true;\n    } else if (properties.type == \"boolean\" || properties.type == \"queryBoolean\" || properties.type == \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (properties.type == \"searchNumber\") {\n\n      result = value ? true : false;\n    } else if (properties.type === \"date\") {\n      result = new Date(compareValue).getTime() !== new Date(value).getTime();\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  };\n})(jQuery);\n\n(function ($) {\n  jQuery.getMaxZindex = function () {\n    var elm = $(\"*\");\n    var maxZindex = 1;\n\n    $.each(elm, function (key, value) {\n      var zindex = parseInt($(value).css(\"z-index\"));\n      if (zindex > maxZindex) {\n        maxZindex = zindex + 1;\n      }\n\n    });\n\n    return maxZindex;\n  };\n})(jQuery);\n\n/**\r\n             * Set the same max height to multiples divs\r\n             */\n(function ($) {\n  jQuery.equalizeHeights = function (selector) {\n    var heights = new Array();\n    // Loop to get all element heights\n    $(selector).each(function () {\n\n      // Need to let sizes be whatever they want so no overflow on resize\n      $(this).css('min-height', '0');\n      $(this).css('max-height', 'none');\n      $(this).css('height', 'auto');\n\n      // Then add size (no units) to array\n      heights.push($(this).outerHeight());\n    });\n\n    // Find max height of all elements\n    var max = Math.max.apply(Math, heights);\n\n    // Set all heights to max height\n    $(selector).each(function () {\n      $(this).css('height', max + 'px');\n    });\n  };\n})(jQuery);\n\n//TODO: DEPL - Move this to rendering\nbizagi.util.autoSave = function () {\n  var deferredSave = $.Deferred();\n  //if attr data-event exist trigger event auto-save or resolve the deferred\n  if (bizagi.util.detectDevice() !== \"desktop\") {\n    if ($(document).data('auto-save')) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  } else {\n    if ($._data($(document)[0], 'events')[\"save-form\"] && $._data($(document)[0], 'events')[\"save-form\"].length > 0) {\n      $(document).trigger('save-form', [deferredSave]);\n    } else {\n      deferredSave.resolve();\n    }\n  }\n  return deferredSave.promise();\n};\n//--  **Users Deleted** the name will fill on first reques in UsersPictures\nbizagi.util.anonymizedUserInformation = {\n  id: \"00000000-0000-0000-0000-000000000000\",\n  name: \"\",\n  username: \"\",\n  email: \"\",\n  domain: \"\",\n  picture: \"\",\n  isAnonymized: true };\n\n\n//-- **Resources for date picker**\nbizagi.util.datepickerResource = [];\n// taken  from https://github.com/jquery/jquery-ui/tree/master/ui/i18n\nbizagi.util.datepickerResource[\"en\"] = { closeText: \"Done\", prevText: \"Prev\", nextText: \"Next\", currentText: \"Today\", monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], weekHeader: \"Wk\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"es\"] = { closeText: \"Cerrar\", prevText: \"&#x3C;Ant\", nextText: \"Sig&#x3E;\", currentText: \"Hoy\", monthNames: [\"enero\", \"febrero\", \"marzo\", \"abril\", \"mayo\", \"junio\", \"julio\", \"agosto\", \"septiembre\", \"octubre\", \"noviembre\", \"diciembre\"], monthNamesShort: [\"ene\", \"feb\", \"mar\", \"abr\", \"may\", \"jun\", \"jul\", \"ago\", \"sep\", \"oct\", \"nov\", \"dic\"], dayNames: [\"domingo\", \"lunes\", \"martes\", \"mircoles\", \"jueves\", \"viernes\", \"sbado\"], dayNamesShort: [\"dom\", \"lun\", \"mar\", \"mi\", \"jue\", \"vie\", \"sb\"], dayNamesMin: [\"D\", \"L\", \"M\", \"X\", \"J\", \"V\", \"S\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ar\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"dd/mm/yy\", firstDay: 0, isRTL: true, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"cs\"] = { closeText: \"Zavt\", prevText: \"&#x3C;Dve\", nextText: \"Pozdji&#x3E;\", currentText: \"Nyn\", monthNames: [\"leden\", \"nor\", \"bezen\", \"duben\", \"kvten\", \"erven\", \"ervenec\", \"srpen\", \"z\", \"jen\", \"listopad\", \"prosinec\"], monthNamesShort: [\"led\", \"no\", \"be\", \"dub\", \"kv\", \"er\", \"vc\", \"srp\", \"z\", \"j\", \"lis\", \"pro\"], dayNames: [\"nedle\", \"pondl\", \"ter\", \"steda\", \"tvrtek\", \"ptek\", \"sobota\"], dayNamesShort: [\"ne\", \"po\", \"t\", \"st\", \"t\", \"p\", \"so\"], dayNamesMin: [\"ne\", \"po\", \"t\", \"st\", \"t\", \"p\", \"so\"], weekHeader: \"Td\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"de\"] = { closeText: \"Schlieen\", prevText: \"&#x3C;Zurck\", nextText: \"Vor&#x3E;\", currentText: \"Heute\", monthNames: [\"Januar\", \"Februar\", \"Mrz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"], monthNamesShort: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"], dayNames: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"], dayNamesShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], dayNamesMin: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"], weekHeader: \"KW\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"fr\"] = { closeText: \"Fermer\", prevText: \"Prcdent\", nextText: \"Suivant\", currentText: \"Aujourd'hui\", monthNames: [\"janvier\", \"fvrier\", \"mars\", \"avril\", \"mai\", \"juin\", \"juillet\", \"aot\", \"septembre\", \"octobre\", \"novembre\", \"dcembre\"], monthNamesShort: [\"janv.\", \"fvr.\", \"mars\", \"avr.\", \"mai\", \"juin\", \"juil.\", \"aot\", \"sept.\", \"oct.\", \"nov.\", \"dc.\"], dayNames: [\"dimanche\", \"lundi\", \"mardi\", \"mercredi\", \"jeudi\", \"vendredi\", \"samedi\"], dayNamesShort: [\"dim.\", \"lun.\", \"mar.\", \"mer.\", \"jeu.\", \"ven.\", \"sam.\"], dayNamesMin: [\"D\", \"L\", \"M\", \"M\", \"J\", \"V\", \"S\"], weekHeader: \"Sem.\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"it\"] = { closeText: \"Chiudi\", prevText: \"&#x3C;Prec\", nextText: \"Succ&#x3E;\", currentText: \"Oggi\", monthNames: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"], monthNamesShort: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"], dayNames: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"], dayNamesShort: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"], dayNamesMin: [\"Do\", \"Lu\", \"Ma\", \"Me\", \"Gi\", \"Ve\", \"Sa\"], weekHeader: \"Sm\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ja\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], monthNamesShort: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"yy/mm/dd\", firstDay: 0, isRTL: false, showMonthAfterYear: true, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"nl\"] = { closeText: \"Sluiten\", prevText: \"\", nextText: \"\", currentText: \"Vandaag\", monthNames: [\"januari\", \"februari\", \"maart\", \"april\", \"mei\", \"juni\", \"juli\", \"augustus\", \"september\", \"oktober\", \"november\", \"december\"], monthNamesShort: [\"jan\", \"feb\", \"mrt\", \"apr\", \"mei\", \"jun\", \"jul\", \"aug\", \"sep\", \"okt\", \"nov\", \"dec\"], dayNames: [\"zondag\", \"maandag\", \"dinsdag\", \"woensdag\", \"donderdag\", \"vrijdag\", \"zaterdag\"], dayNamesShort: [\"zon\", \"maa\", \"din\", \"woe\", \"don\", \"vri\", \"zat\"], dayNamesMin: [\"zo\", \"ma\", \"di\", \"wo\", \"do\", \"vr\", \"za\"], weekHeader: \"Wk\", dateFormat: \"dd-mm-yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"pt\"] = { closeText: \"Fechar\", prevText: \"Anterior\", nextText: \"Seguinte\", currentText: \"Hoje\", monthNames: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"], monthNamesShort: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"], dayNames: [\"Domingo\", \"Segunda-feira\", \"Tera-feira\", \"Quarta-feira\", \"Quinta-feira\", \"Sexta-feira\", \"Sbado\"], dayNamesShort: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"], dayNamesMin: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sb\"], weekHeader: \"Sem\", dateFormat: \"dd/mm/yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"ru\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"dd.mm.yy\", firstDay: 1, isRTL: false, showMonthAfterYear: false, yearSuffix: \"\" };\nbizagi.util.datepickerResource[\"zh\"] = { closeText: \"\", prevText: \"&#x3C;\", nextText: \"&#x3E;\", currentText: \"\", monthNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], monthNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesShort: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], dayNamesMin: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"], weekHeader: \"\", dateFormat: \"yy-mm-dd\", firstDay: 1, isRTL: false, showMonthAfterYear: true, yearSuffix: \"\" };\n\n//--  **Communication between Workportal and LiveProcesses**\n\n// Create new Live Process\nbizagi.util.liveProcessesEvents = bizagi.util.liveProcessesEvents || {};\nbizagi.util.liveProcessesEvents.newLiveProcess = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.newLiveProcess.initEvent('new-live-process', true, true);\n\n// Event for changing route inside LiveProcesses\nbizagi.util.liveProcessesEvents.routeEvents = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.routeEvents.initEvent('parent-route-events', true, true);\nbizagi.util.liveProcessesEvents.routeEvents.route = '/';\n\n// Verify save condition\nbizagi.util.liveProcessesEvents.saveEvent = document.createEvent('Event');\nbizagi.util.liveProcessesEvents.saveEvent.initEvent('save-live', true, true);\nbizagi.util.liveProcessesEvents.saveEvent.lastWidget = '';\nbizagi.util.liveProcessesEvents.saveEvent.nextWidget = '';\n\nbizagi.util.liveSave = function (widgetName) {\n  bizagi.util.liveProcessesEvents.saveEvent.nextWidget = widgetName;\n  var deferredLiveSave = $.Deferred();\n  var indeX = 0;\n  // next try/catch avoids crossdomain messages in the middle of \"Next button\" execution\n  try {\n    indeX = $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess');\n  }\n  catch (e) {\n    indeX = -1;\n  }\n  if (\n  (widgetName !== bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY || widgetName === bizagi.util.liveProcessesEvents.saveEvent.lastWidget) &&\n  $(document).find('iframe').length > 0 && indeX > 0)\n  {\n    bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = deferredLiveSave;\n    document.dispatchEvent(bizagi.util.liveProcessesEvents.saveEvent);\n  } else {\n    deferredLiveSave.resolve();\n  }\n  $.when(deferredLiveSave).done(function () {bizagi.util.liveProcessesEvents.saveEvent.lastWidget = widgetName;});\n  return deferredLiveSave.promise();\n};\n\n/**\r\n    * CryptoJS MD5\r\n    * @param {} message\r\n    * @returns {}\r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n/**\r\n    * Replace all coincidences in a text, based on key value object\r\n    *  @argument mapDataToReplace = {\"keyTofind\":\"valueToReplace\",...}\r\n    */\nbizagi.util.multiReplace = function (text, mapDataToReplace) {\n  mapDataToReplace = mapDataToReplace || {};\n\n  for (var key in mapDataToReplace) {\n    var reg = new RegExp(key, \"g\");\n    text = text.replace(reg, mapDataToReplace[key]);\n  }\n  return text;\n};\n/*\r\n    *   Creates a replace all method that is left from the String Class\r\n    */\nbizagi.util.replaceAll = function (text, pcFrom, pcTo) {\n  // Call the method located in bizagi.loader\n  return bizagi.replaceAll(text, pcFrom, pcTo);\n};\n/*\r\n    *replaces global expressions regulars\r\n    */\nbizagi.util.replaceAllGlobalRegExp = function (text, pcFrom, pcTo) {\n  var temp = text;\n\n  var re = new RegExp(pcFrom, \"g\");\n  temp = temp.replace(re, pcTo);\n\n  return temp.toString();\n};\n// Also append it to the string class\nString.prototype.replaceAll = function (pcFrom, pcTo) {\n  return bizagi.util.replaceAll(this, pcFrom, pcTo);\n};\n// Capitalize a string\nString.prototype.capitalize = function () {\n  return this.charAt(0).toUpperCase() + this.slice(1);\n};\n// Add this (Create an starts with function) to the string prototype\nString.prototype.startsWith = function (str) {\n  return this.slice(0, str.length) == str;\n};\n\n/**\r\n    * get Initials of a string/name and if the name is empty return the anonymized icon\r\n    */\nString.prototype.getInitials = function () {\n  var initials = \"\";\n  if (this.length === 0) {\n    initials = '<svg  class=\"bz-icon bz-icon-24 bz-icon-svg\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-user-deactivated\"></use></svg>';\n  } else {\n    try {\n      var removeRepeatSpaces = this.replace(/  +/g, ' ');\n      var words = removeRepeatSpaces.split(' ');\n      for (var i = 0; i < words.length; i += 1) {\n        initials += words[i][0] || '';\n        if (initials.length == 2) {\n          break;\n        }\n      }\n    } catch (e) {}\n\n    initials = initials.toUpperCase();\n  }\n  return initials;\n};\n\nMath.sign = Math.sign || function (x) {\n  x = +x; // convert to a number\n  if (x === 0 || isNaN(x)) {\n    return x;\n  }\n  return x > 0 ? 1 : -1;\n};\n\n// Add a clone to the object prototype\nbizagi.clone = function (obj) {\n  if (obj == undefined) return undefined;\n  if (obj == null) return null;\n  return JSON.parse(JSON.encode(obj));\n};\n// Measures the pixel size of a string\nbizagi.measureString = function (string, fontSize) {\n  var test = $(\"<span/>\").appendTo(\"body\");\n  test.text(string);\n  if (fontSize)\n  test.css(\"font-size\", fontSize);\n  var width = test.width();\n  test.detach();\n  return width;\n};\n/*\r\n    *   Creates a trim method\r\n    */\nbizagi.util.trim = function (text) {\n  if (typeof text === \"undefined\" || text == null)\n  return text;\n  // Call the method located in bizagi.loader\n  return text.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n};\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n// Create an ends with function\nString.prototype.endsWith = function (suffix) {\n  return this.indexOf(suffix, this.length - suffix.length) !== -1;\n};\n\n/*\r\n    * Method to detect IE7 visitors\r\n    */\nbizagi.util.isIE7 = function () {\n  return bizagi.util.isIE() && document.documentMode == 7;\n};\n/*\r\n    * Method to detect IE8 visitors\r\n    */\nbizagi.util.isIE8 = function () {\n  return bizagi.util.isIE() && document.documentMode == 8;\n};\n/*\r\n    * Method to detect IE9 visitors\r\n    */\nbizagi.util.isIE9 = function () {\n  return bizagi.util.isIE() && document.documentMode == 9;\n};\n/*\r\n    * Method to detect IE10 visitors\r\n    */\nbizagi.util.isIE10 = function () {\n  return bizagi.util.isIE() && document.documentMode == 10;\n};\n/*\r\n    * Method to detect IE11 visitors\r\n    */\nbizagi.util.isIE11 = function () {\n  return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\n};\n\n/*\r\n    * Method to detect IE11 or lower\r\n    */\nbizagi.util.isIE11OrLower = function () {\n  return bizagi.util.isIE11() || bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE10 or lower\r\n    */\nbizagi.util.isIE10OrLower = function () {\n  return bizagi.util.isIE10() || bizagi.util.isIE9() || bizagi.util.isIE8() || bizagi.util.isIE7();\n};\n\n/*\r\n    * Method to detect IE12 or Edge(Windows 10) visitors\r\n    */\nbizagi.util.isEdge = function () {\n  if (/Edge\\/*./i.test(navigator.userAgent)) {\n    return true;\n  }\n  return false;\n};\n/*\r\n    * Method to detect IE visitors\r\n    */\nbizagi.util.isIE = function () {\n  return navigator.appName.indexOf(\"Internet Explorer\") > 0 || !!navigator.userAgent.match(/Trident/);\n};\n/*\r\n    *   Object Values wrapper\r\n    */\nbizagi.util.objectValues = function (array) {\n  if (bizagi.util.isIE())\n  return Object.keys(array).map(function (itm) {return array[itm];});else\n\n  return Object.values(array);\n};\n/*\r\n    * Get the specific version of IE \r\n    */\nbizagi.util.getIEVersion = function () {\n  var sAgent = window.navigator.userAgent;\n  var indexMSIE = sAgent.indexOf(\"MSIE\");\n  var version = 0;\n  if (indexMSIE > 0) {\n    version = parseInt(sAgent.substring(indexMSIE + 5, sAgent.indexOf(\".\", indexMSIE)));\n  } else\n  if (!!navigator.userAgent.match(/Trident/) || window.navigator.userAgent.indexOf(\"Edge\") > -1) {// Condition Check IF IE 11 and or MS Edge\n    version = 11;\n  }\n  return version;\n};\n/*\r\n    * Method to detect is chrome browser\r\n    */\nbizagi.util.isChrome = function () {\n  return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n/*\r\n    * Method to detect is Firefox browser\r\n    */\nbizagi.util.isFirefox = function (minVersion) {\n  function getVersion() {\n    var ua = navigator.userAgent,tem,M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n    if (/trident/i.test(M[1])) {\n      tem = /\\brv[ :]+(\\d+)/g.exec(ua) || [];\n      return { name: 'IE', version: tem[1] || '' };\n    }\n    if (M[1] === 'Chrome') {\n      tem = ua.match(/\\bOPR|Edge\\/(\\d+)/);\n      if (tem != null) {return { name: 'Opera', version: tem[1] };}\n    }\n    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];\n    if ((tem = ua.match(/version\\/(\\d+)/i)) != null) {M.splice(1, 1, tem[1]);}\n    return {\n      name: M[0],\n      version: M[1] };\n\n  }\n  return /Firefox/.test(navigator.userAgent) && (minVersion === undefined || minVersion <= getVersion().version);\n};\n/*\r\n    * return the browser name this function can be modified if needs more browsers\r\n    */\nbizagi.util.getBrowser = function () {\n  var bw = \"undetected\";\n  if (bizagi.util.isChrome()) {\n    bw = \"chrome\";\n  } else if (bizagi.util.isFirefox()) {\n    bw = \"firefox\";\n  } else if (bizagi.util.isEdge()) {\n    bw = \"edge\";\n  } else if (bizagi.util.isIE11()) {\n    bw = \"ie11\";\n\n  } else if (bizagi.util.isIE10()) {\n    bw = \"ie10\";\n  }\n  return bw;\n};\n\n/**\r\n    * Empty Navigator Info\r\n    */\nbizagi.util.emptyNavigatorInfo = function () {\n  if (bizagi.navigator && bizagi.navigator.info) {\n    bizagi.navigator.info = {};\n  }\n};\n\n/**\r\n    * Auto call setting the browser class for css specific selectors, etc..\r\n    */\n$(document).ready(function () {\n  $(\"html\").\n  addClass(\"browser-\" + bizagi.util.getBrowser()).\n  addClass(\"device-\" + bizagi.detectDevice());\n  if (bizagi.language) {\n    var language = bizagi.language.split(\"-\");\n    if (language && language.length > 0) {\n      $(\"html\").addClass(\"language-\" + language[0]);\n    }\n  }\n});\n\n\n\n\n/**\r\n     * Method to detect iOS version X and apply styles to that device \r\n     */\nbizagi.util.setIphoneXOverrides = function () {\n  if (bizagi.util.isNativePluginSupported() && typeof bizagiapp.isIphoneX !== 'undefined') {\n    bizagiapp.isIphoneX(function (value) {\n      var flagIphoneX = value;\n      var styleIphoneX = \".bz-menu-home .bz-menu-carousel .bz-menu-carousel-seat{padding:0 16px 16px}.bz-home-header .km-navbar{padding:35px 16px 5px}#menuHome .bz-home-header .km-navbar{padding:30px 3px 0}#menuHome .km-navbar .km-rightitem{font-size:19px;right:.4em;top:32px}#menuHome .km-navbar .km-leftitem{font-size:24px;left:0;top:25px}#taskFeed .km-navbar .km-rightitem{font-size:19px;top:25px;right:0}#taskFeed .km-navbar .km-leftitem{font-size:24px;top:20px;left:0}#homePortal #menuHome .km-view-title .km-buttongroup{margin-left:0;top:2px}.bz-render-header,.search-container{padding-top:25px}#activity-search,.search-container .bz-wp-mu-button-search{padding-top:40px}#content-newCase-drawer{padding-top:25px}#menuHome{background:#EBEDF1!important}.km-flat .km-content{background-color:#fff} .k-loading-mask{top:0!important}\";\n\n      if (flagIphoneX === 'true') {\n        $('head').append('<style type=\"text/css\" id=\"iphoneXStyle\"></style>');\n        $('#iphoneXStyle').text(styleIphoneX);\n\n      } else if (bizagi.util.isiOSDevice()) {\n        $('head').append('<style type=\"text/css\" id=\"iphoneStyle\"></style>');\n        var paddingStyle = \"#homePortal .bz-home-header > div{padding-top:.8em}\";\n        $('#iphoneStyle').text(paddingStyle);\n      }\n    });\n  }\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isObject = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Object]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Array.isArray(value);\n};\nbizagi.util.isNull = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Null]\";\n};\nbizagi.util.isBoolean = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Boolean]\";\n};\n\n/*\r\n    *   Method to detect IE version\r\n    */\nbizagi.util.getInternetExplorerVersion = function () {\n  if (!bizagi.util.isIE())\n  return -1;\n  return Number(document.documentMode);\n};\n/*  \r\n    *   Detect a device based on the width\r\n    */\nbizagi.util.detectDevice = function () {\n  // Call the method located in bizagi.loader\n  return bizagi.detectDevice();\n};\n\n// Check if a string is number\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n// Check if a string is GUID\nbizagi.util.isGUID = function (n) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n);\n};\n// Throw not implemented exception\nbizagi.util.mustImplement = function (notImplementedMethod) {\n  try {\n    console.log(\"Not implemented exception: \" + notImplementedMethod);\n  } catch (exe) {\n  } //IE console variable not exist\n  //throw \"You must implement \" + notImplementedMethod;\n};\n// Encodes the xpath \nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath) || typeof xpath.replaceAll === \"undefined\")\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n// Parses a value to return the correct boolean value\nbizagi.util.parseBoolean = function (value) {\n  if (value === undefined) {\n    return null;\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (value === '') {\n    return null;\n  }\n\n  // Parse true values\n  if (value === true || value === 1 || value.toString() === \"true\" || value === \"1\") {\n    return true;\n  }\n  if (value.toString().toLowerCase() === \"true\") {\n    return true;\n  }\n\n  // Parse false values\n  if (value !== null && value === false || value === 0 || value.toString() === \"false\" || value === \"0\") {\n    return false;\n  }\n  if (value.toString().toLowerCase() === \"false\") {\n    return false;\n  }\n\n  return null;\n};\n/*\r\n    *   Checks if a given string is empty\r\n    */\nbizagi.util.isEmpty = function (value) {\n  if (value === 0)\n  return false;\n\n  if (value === undefined || value === null || value === \"\") {\n    return true;\n  }\n\n  if (typeof value === \"Array\") {\n    return value.length == 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n    return value.length === 0;\n  }\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    if ($.isEmptyObject(value)) {\n      return true;\n    } else {\n      return bizagi.util.isEmptyCombo(value);\n    }\n  }\n\n  // Side effect - I can't delete the last item in the multiselect and searchlist\n  /* if (value == \"{\\\"value\\\":[]}\"){\r\n       return true;\r\n   }  */\n\n  return false;\n};\n\nbizagi.util.isEmptyCombo = function (object) {\n  if (Object.prototype.toString.apply(object) === \"[object Object]\") {\n    var property,id = false,\n    value = false,\n    other = false;\n    for (property in object) {\n      if (object.hasOwnProperty(property)) {\n        if (property === \"id\") {\n          id = true;\n        } else {\n          if (property === \"value\") {\n            value = true;\n          } else {\n            other = true;\n          }\n        }\n        if (other) {\n          return false;\n        }\n      }\n    }\n    if (id) {\n      if (object[\"id\"] === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  return undefined;\n};\n\n/**\r\n    * Decode data from encodeURI charset\r\n    */\nbizagi.util.decodeURI = function (value) {\n  value = value || \"\";\n  var finishDecoded = false;\n  var decodedValue = value;\n  var infinityControl;\n\n  // Try to decode data value\n  while (!finishDecoded) {\n    try {\n      infinityControl = decodeURI(decodedValue);\n      if (bizagi.util.hasNonVisibleChars(infinityControl)) {\n        decodedValue = value;\n        break;\n      }\n      if (infinityControl == decodedValue) {\n        finishDecoded = true;\n      } else {\n        decodedValue = infinityControl;\n      }\n    } catch (e) {\n      finishDecoded = true;\n    }\n  }\n\n  return decodedValue;\n};\n\nbizagi.util.hasNonVisibleChars = function (value) {\n  value = value || \"\";\n  var length = value.length;\n  var i = 0,\n  result = false,\n  ch;\n  for (; i < length;) {\n    ch = value.charCodeAt(i++);\n    if (ch < 32 || ch > 126) {\n      result = true;\n      break;\n    }\n  }\n  return result;\n};\n\n/* \r\n    *   Converts a percent into a number\r\n    */\nbizagi.util.percent2Number = function (value) {\n  return Number(String(value).replace(\"%\", \"\"));\n};\n/*\r\n    *   Check if a object is empty\r\n    */\nbizagi.util.isObjectEmpty = function (obj) {\n  if (obj.length > 0)\n  return false;\n  return true;\n};\n/*\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n/*\r\n    *   Replaces a matched selector in the container for the specified \"replace\" element\r\n    */\nbizagi.util.replaceSelector = function (container, selector, replace) {\n  // Replace children tag\n  var elementToReplace = $(selector, container);\n  if (elementToReplace.length > 0) {\n    elementToReplace.append(replace);\n    elementToReplace.children().unwrap();\n  }\n};\n/*\r\n    *   Determines if a control as a scrollbar \r\n    */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n//TODO: DEPL - Rename this to areIdenticalObjects\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n/*\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\nbizagi.util.centerElementIntoScroll = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var actualScroll = layout.scrollTop();\n  var elementTop = $(elem).offset().top;\n  var elementHeight = $(elem).height();\n  var offset = 0;\n  if (elementTop > 0) {\n    offset = elementTop + elementHeight;\n  } else {\n    offset = elementTop - elementHeight;\n  }\n  var newTop = actualScroll + offset;\n  layout.scrollTop(newTop);\n};\n/*\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/*\r\n    *   Encode a string as HTML\r\n    */\nbizagi.util.decodeHtmlEntities = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&apos;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&quot;/g, '\\'');\n  }\n  return text;\n};\n/*\r\n    *   Read the location hash\r\n    */\nbizagi.util.getHashParams = function () {\n  var params = window.location.hash.substring(1).split(\"#\");\n  return params;\n};\n/*\r\n    *   Loads a file on-demand\r\n    */\nbizagi.util.loadFile = function (params) {\n  var defer = new $.Deferred();\n  var url = params && params.src ? params.src : params;\n  var type = params && params.type ? params.type : null;\n\n  bizagi.loader.loadFile({ src: url, type: type }).\n  then(function () {\n    defer.resolve();\n  });\n\n  return defer.promise();\n};\n\n/*\r\n    *   Initializes a webpart on-demand\r\n    */\nbizagi.util.initWebpart = function (webpart, device) {\n  var defer = new $.Deferred();\n\n  device = device || bizagi.detectDevice();\n\n  if (webpart.initialized) {\n    // If already initialized resolve the deferred\n    defer.resolve();\n  } else {\n\n    if (webpart.initializing) {\n      $.when(webpart.loadingDeferred.promise()).\n      done(function () {\n        defer.resolve();\n      });\n    } else {\n\n      webpart.loadingDeferred = new $.Deferred();\n      webpart.initializing = true;\n      bizagi.loader.initWebpart(webpart, device, function () {\n\n        // Resolve deferreds\n        webpart.loadingDeferred.resolve();\n        webpart.initializing = false;\n        defer.resolve();\n      });\n    }\n  }\n\n  return defer.promise();\n};\n/*\r\n    *   Read the query string parameteres\r\n    */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = pairs.length - 1; i >= 0; i--) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n/*\r\n    *   Extend querystring\r\n    */\nbizagi.util.extendQueryString = function (url, additionalParams) {\n  var plainUrl = url.indexOf(\"?\") > 0 ? url.substring(0, url.indexOf(\"?\")) : url;\n  var existingParams = bizagi.util.getQueryString(url);\n  var newParams = $.extend({}, existingParams, additionalParams);\n  return plainUrl + \"?\" + $.param(newParams);\n};\nbizagi.util.getStackTrace = function () {\n  var callstack = [];\n  var isCallstackPopulated = false;\n  try {\n    i.dont.exist += 0; //doesn't exist- that's the point\n  } catch (e) {\n    if (e.stack) {//Firefox\n      var lines = e.stack.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          callstack.push(lines[i]);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    } else if (window.opera && e.message) {//Opera\n      var lines = e.message.split('\\n');\n      for (var i = 0, len = lines.length; i < len; i++) {\n        if (lines[i].match(/^\\s*[A-Za-z0-9\\-_\\$]+\\(/)) {\n          var entry = lines[i];\n          //Append next line also since it has the file info\n          if (lines[i + 1]) {\n            entry += ' at ' + lines[i + 1];\n            i++;\n          }\n          callstack.push(entry);\n        }\n      }\n      //Remove call to printStackTrace()\n      callstack.shift();\n      isCallstackPopulated = true;\n    }\n  }\n  if (!isCallstackPopulated) {//IE and Safari\n    var currentFunction = arguments.callee.caller;\n    while (currentFunction) {\n      var fn = currentFunction.toString();\n      var fname = fn.substring(fn.indexOf(\"function\") + 8, fn.indexOf('')) || 'anonymous';\n      callstack.push(fname);\n      currentFunction = currentFunction.caller;\n    }\n  }\n  return callstack;\n};\n/*\r\n    *\thighlight elements\r\n    */\nbizagi.util.highLightElement = function (el) {\n  el.addClass('ui-highlight-control');\n  $.when(\n  setTimeout(function () {\n    el.addClass('ui-highlight-off-control');\n  }, 450)).\n  done(\n  setTimeout(function () {\n    el.removeClass('ui-highlight-control ui-highlight-off-control');\n  }, 800));\n};\n/*\r\n    *\tscroll to bottom\r\n    */\nbizagi.util.autoScrollBottom = function (el) {\n  try {\n    var elScrollHeight;\n    elScrollHeight = el[0].scrollHeight;\n    el.scrollTop(elScrollHeight);\n  } catch (e) {}\n};\n\n/*create auto scroll with limit top and limit bottom */\nbizagi.util.autoScrollInterval = { init: false };\nbizagi.util.autoScroll = function (itemScroll, limitTop, limitBottom, idInterval) {\n  var outSide = false;\n  /* prevent a previous interval */\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval[idInterval] = 0;\n  bizagi.util.autoScrollInterval['init'] = true;\n  $('body').addClass('autoscroll');\n  $('body.autoscroll').mousemove(function (event) {\n    if (event.pageY < limitTop) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollTopInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else if (event.pageY > limitBottom) {\n      if (!outSide) {\n        outSide = true;\n        bizagi.util.autoScrollBottomInterval(itemScroll, 'autoscroll', idInterval);\n      }\n    } else {\n      clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      outSide = false;\n    }\n  });\n};\n/*create auto scroll movement top */\nbizagi.util.autoScrollTopInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  if (itemScroll.scrollTop() == 0) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      if (itemScroll.scrollTop() > 0) {\n        itemScroll.scrollTop(itemScroll.scrollTop() - 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n\n/*create auto scroll movement bottom */\nbizagi.util.autoScrollBottomInterval = function (itemScroll, classCSS, idInterval) {\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  if (classCSS) {\n    $('body').addClass(classCSS);\n  }\n  var valueMaxScrollBottom = $(itemScroll)[0].scrollHeight - $(itemScroll).innerHeight();\n  if (itemScroll.scrollTop() >= valueMaxScrollBottom) {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  } else {\n    clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n    bizagi.util.autoScrollInterval[idInterval] = setInterval(function () {\n      bizagi.util.autoScrollBottom($('html'));\n      if (itemScroll.scrollTop() < valueMaxScrollBottom) {\n        itemScroll.scrollTop(itemScroll.scrollTop() + 40);\n      } else {\n        clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n      }\n    }, 100);\n  }\n};\n/*remove auto scroll*/\nbizagi.util.removeAutoScroll = function (classCSS, idInterval) {\n  $('body.' + classCSS).unbind('mousemove').removeClass(classCSS);\n  clearInterval(bizagi.util.autoScrollInterval[idInterval]);\n  bizagi.util.autoScrollInterval.init = false;\n};\n\nbizagi.util.getMaxZIndex = function (selector) {\n  selector = selector || $(\"div,span\");\n  return Math.max.apply(null, $(selector).map(function () {\n    var zIndex;\n    return isNaN(zIndex = parseInt($(this).css(\"z-index\"), 10)) ? 0 : zIndex;\n  }));\n};\n\n/*\r\n    * Creates a native popup to open an url\r\n    */\nbizagi.showPopup = function (url, params, callbackFn) {\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(url, \"\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  // Define args to call the function\n  window.BAPopupWindow = newWindow;\n  window.BAPopupCallback = callbackFn;\n  // Define BACLoseWindow in this context, so the external content calls window.opener.BACloseWindow\n  window.BACloseWindow = function (controls, submitForm) {\n    // Close dialog\n    window.BAPopupWindow.close();\n    // Executes the callback to assign values and submit form (if requested)\n    window.BAPopupCallback(controls, submitForm);\n  };\n};\n/**\r\n    * Creates a native popup in quirks mode to open an url\r\n    * \r\n    * @param url string page to open into popup\r\n    * @param params json {width,height,title,afterLoad}\r\n    */\nbizagi.showQuirksModePopup = function (url, params) {\n  var quirksModePage = window.BIZAGI_PATH_TO_BASE + \"quirks.html\";\n  var width = params.width || 1024;\n  var height = params.height || 768;\n  var top = $(window).height() / 2 - height / 2;\n  var left = $(window).width() / 2 - width / 2;\n  // Creates a popup window\n  var newWindow = window.open(quirksModePage, \"bizagiPopup\", \"width=\" + width + \",height=\" + height + \", top=\" + top + \", left=\" + left + \", Menubar=NO, Location=NO, Status=NO, scrollbars=YES\");\n  window.BAQuirksPopupWindow = newWindow;\n  // Attempto to set a window title\n  setTimeout(function () {\n    try {\n      newWindow.document.title = params.title;\n    } catch (e) {}\n  }, 50);\n  // We use a hack to eval content inside the popup\n  $(newWindow).callInsidePopup(function (windowParams) {\n\n    var $ = windowParams.jQuery;\n    var popupWindow = windowParams.popupWindow;\n    popupWindow.quirksOnLoad = function () {\n      var loadedBody = $(\"body\", popupWindow.document);\n      var iframe = $(\"iframe\", loadedBody);\n      // Remove waiting\n      loadedBody.removeClass(\"ui-bizagi-loading-message\");\n      iframe.show();\n      // Hacks the iframe\n      // This event will fire each time the iframe change its location\n      var afterLoad = windowParams.userParams.afterLoad;\n      if (afterLoad && afterLoad != null) {\n        var callbackParams = $.extend(windowParams.userParams, {\n          popupWindow: popupWindow });\n\n        iframe.callInside(afterLoad, callbackParams);\n      }\n    };\n    var loadingFunction = function loadingFunction() {\n      var body = $(\"body\", popupWindow.document);\n      // Create the iframe inside the new window\n      if (body.length > 0) {\n        body.append(\"<iframe scrolling='yes' id='innerFrameContent' src='\" + windowParams.url + \"' style='width: 100%; height: 100%; display:none' frameborder='0' onload='quirksOnLoad();'></iframe>\");\n      } else {\n        // Try again\n        setTimeout(function () {\n          loadingFunction();\n        }, 50);\n      }\n    };\n    // Execute loading function\n    loadingFunction();\n  }, {\n    jQuery: $,\n    userParams: params,\n    popupWindow: newWindow,\n    url: url });\n\n};\n/*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n/*\r\n    *   Creates a popup using overlay style\r\n    */\nbizagi.createPopup = function (params) {\n  var popupName = params.name,\n  onClose = params.onClose,\n  popupHeader;\n  var popupTitle = params.title ? params.title : '';\n  var handleClose = typeof params.handleClose == 'boolean' ? params.handleClose : true;\n  var overlay = $('<div class=\"ui-widget-overlay ' + popupName + '-overlay\" />');\n  var popup = $('<div class=\"' + popupName + '-popup  ui-popup-modal\"/>').appendTo(overlay);\n  var closeButton = $('<div class=\"' + popupName + '-btn-close biz-btn-close\"><i class=\"biz-icon ui-close-btn bz-studio bz-black bz-false_16x16_black\"></i></div>').appendTo(popup);\n  if (params.title) {\n    popupHeader = $('<div class=\"' + popupName + '-popup-header ui-popup-header\" ><h3>' + popupTitle + '</h3></div>').appendTo(popup);\n  }\n\n  var popupContent = $('<div class=\"' + popupName + '-popup-content\" />').appendTo(popup);\n  // Add to body\n  popup.hide();\n  if (params.additionalClass)\n  popup.addClass(params.additionalClass);\n  var container = params.container || \"body\";\n  overlay.appendTo($(container, document));\n\n  if (params.center) {\n    // Resize popup to the center\n    popup.css(\"top\", (overlay.height() - popup.height()) / 2);\n    popup.css(\"left\", (overlay.width() - popup.width()) / 2);\n  }\n  popup.show();\n  // Close handler\n  var closeHandler = function closeHandler(params) {\n    overlay.detach();\n    if (onClose)\n    onClose(params);\n  };\n\n  if (handleClose) {\n    closeButton.click(closeHandler);\n  }\n  // Return a full independent object\n  return {\n    fullPopup: popup,\n    overlay: overlay,\n    content: popupContent,\n    close: function close(params) {\n      closeHandler(params);\n    } };\n\n};\n/*\r\n    * Create an Ok, Cancel popup using bizagi.createPopup()\r\n    */\n\nbizagi.createOkCancelPopup = function (params) {\n  params.name = \"popup-ok-cancel\";\n  var onOk = params.onOk,\n  onCancel = params.onCancel;\n  var popup = bizagi.createPopup(params);\n  var container = $(\"<div></div>\").addClass(\"container-okcancel-popup\");\n  var message = $(\"<div></div>\").addClass(\"message-okcancel-popup ui-light-bevel-border biz-gradient-v\");\n  var buttonsContainer = $(\"<div></div>\").addClass(\"buttonsContainer-okcancel-popup biz-actions-bar\");\n  message.text(params.message);\n  message.appendTo(container);\n  var buttonOk = $(\"<span></span>\").addClass(\"ok-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  var buttonCancel = $(\"<span></span>\").addClass(\"cancel-button-okcancel-popup editor-ui-button-actions biz-action-btn biz-btn\");\n  buttonOk.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-ok\"));\n  buttonCancel.text(bizagi.localization.getResource(\"bizagi-editor-okcancel-cancel\"));\n  buttonOk.appendTo(buttonsContainer);\n  buttonCancel.appendTo(buttonsContainer);\n  buttonsContainer.appendTo(container);\n  container.appendTo(popup.content);\n  var okHandler = function okHandler() {\n    popup.close();\n    if (typeof onOk == \"function\") {\n      onOk();\n    }\n  };\n  buttonOk.click(okHandler);\n  var cancelHandler = function cancelHandler() {\n    popup.close();\n    if (typeof onCancel == \"function\") {\n      onCancel();\n    }\n  };\n  buttonCancel.click(cancelHandler);\n  return {\n    close: function close() {\n      popup.close();\n    },\n    ok: function ok() {\n      okHandler();\n    },\n    cancel: function cancel() {\n      cancelHandler();\n    } };\n\n};\n/*\r\n    * Create an generic dialog\r\n    */\nbizagi.dialog = function (params) {\n\n  var dialog = $(\"<div></div>\").addClass(\"biz-dialog\");\n  var msg = $(\"<p></p>\");\n  msg.text(params.message || \"\");\n  msg.appendTo(dialog);\n  dialog.appendTo($(\"body\", document));\n  dialog.dialog({\n    title: params.title,\n    modal: true,\n    buttons: params.buttons,\n    close: function close() {\n      dialog.dialog(\"destroy\");\n    } });\n\n};\n/*\r\n    *   Close the quirks mode popup window\r\n    */\nbizagi.closeQuirksModePopup = function () {\n  var quirksPopup = window.BAQuirksPopupWindow;\n  window.BAQuirksPopupWindow = null;\n  try {\n    if (quirksPopup)\n    quirksPopup.close();\n  } catch (e) {}\n};\n/**\r\n    * Get css class definition to string\r\n    */\nbizagi.getStyle = function (style) {\n  var pathName = location.href.replace(\"/default.aspx\", \"\");\n  var getFontFace = style.match(/@/) ? true : false;\n  var matchFontFace = \"@font-face\";\n  var getAllChildrens = style.match(/\\*/) ? true : false;\n  var matchStyles = new RegExp(style.replace(\"*\", \"\"), \"g\");\n  var stringCss = \"\";\n  var css;\n  if (style == \"\") {\n    return \"\";\n  }\n  var awesomeBrowser = function awesomeBrowser(style) {\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].rules || document.styleSheets[file].cssRules;\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (document.styleSheets[file].href != null && (document.styleSheets[file].href.match(/less.css/g) == null || BIZAGI_ENVIRONMENT == \"release\")) {\n\n            var cssTextOriginal = css[key].cssText ? css[key].cssText : '';\n            // Get all matches\n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n\n                if ($.browser.webkit) {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"\");\n                } else if ($.browser.msie && $.browser.version == \"8.0\") {\n                  stringCss += css[key].style.cssText;\n                } else {\n                  stringCss += css[key].cssText.replace(/\\(path\\)/g, \"../../jquery/workportal/css/desktop\");\n                }\n              }\n            } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n              stringCss += css[key].cssText;\n            }\n\n            // Get @font-face\n            if (getFontFace) {\n              if (css[key] != undefined && cssTextOriginal != undefined) {\n                if (cssTextOriginal.indexOf(matchFontFace) != -1) {\n\n                  if ($.browser.webkit) {\n                    stringCss += cssTextOriginal.replace(/jquery\\/workportal\\/css\\/desktop\\//g, \"\").replace(/\\(path\\)/g, \"\");\n                  } else {\n                    stringCss += cssTextOriginal.replace(/\\(path\\)/g, \"../../\");\n                  }\n\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var suckBrowser = function suckBrowser(style) {\n    if ($.browser.version == \"8.0\") {\n      // That is crazy, but it has the same document.styleSheets structure to chrome and mozilla\n      return awesomeBrowser(style);\n    }\n    var lastLevel;\n    for (var file = 0; file < document.styleSheets.length; file++) {\n      css = document.styleSheets[file].cssRules || document.styleSheets[file].rules;\n\n      if (css != null) {\n        for (var key = 0; key < css.length; key++) {\n          if (BIZAGI_ENVIRONMENT == \"release\") {\n            // Get all matches \n            if (getAllChildrens) {\n              if (css[key].selectorText != undefined && css[key].selectorText.match(matchStyles) != null) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              } else if (css[key].selectorText != undefined && css[key].selectorText == style) {\n                stringCss += css[key].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          } else if (css[key].href != null && css[key].href != undefined && css[key].href.match(/less.css/g) == null) {\n            // Get all matches \n            lastLevel = css[key].styleSheet.cssRules || [];\n            for (var n = 0; n < lastLevel.length; n++) {\n              if (getAllChildrens) {\n                if ((lastLevel[n].selectorText != undefined || lastLevel[n].selectorText != null) && lastLevel[n].selectorText.match(matchStyles) != null) {\n                  //stringCss += lastLevel[n].cssText;\n                  stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n                }\n              } else if (lastLevel[n].selectorText != undefined && lastLevel[n].selectorText == style) {\n                // stringCss += lastLevel[n].cssText;\n                stringCss += lastLevel[n].cssText.replace(/\\(path\\)/g, pathName + \"/jquery/workportal/css/desktop\");\n              }\n            }\n          }\n        }\n      }\n    }\n    return stringCss;\n  };\n  var result = $.browser.msie ? suckBrowser(style) : awesomeBrowser(style);\n  return result;\n};\n/**\r\n    * Set and retrieve Cookie\r\n    */\nbizagi.cookie = function (key, value, options) {\n  // key and at least value given, set cookie...\n  if (arguments.length > 1 && String(value) !== \"[object Object]\") {\n    options = $.extend({}, options);\n    if (value === null || value === undefined) {\n      options.expires = -1;\n    }\n\n    if (typeof options.expires === 'number') {\n      var days = options.expires,\n      t = options.expires = new Date();\n      t.setDate(t.getDate() + days);\n    }\n\n    value = String(value);\n    return document.cookie = [\n    encodeURIComponent(key), '=',\n    options.raw ? value : encodeURIComponent(value),\n    options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n    options.path ? '; path=' + options.path : '',\n    options.domain ? '; domain=' + options.domain : '',\n    options.secure ? '; secure' : ''].\n    join('');\n  }\n\n  // key and possibly options given, get cookie...\n  options = value || {};\n  var result,decode = options.raw ? function (s) {\n    return s;\n  } : decodeURIComponent;\n  return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;\n};\n/**\r\n    * Returns a random integer between min and max\r\n    */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    * Set global context values\r\n    * @param params onject\r\n    * @param reset boolean\r\n    */\nbizagi.util.setContext = function (params, reset) {\n  params = params || {};\n  reset = reset || false;\n  if (reset) {\n    bizagi.context = {};\n  }\n  $.each(params, function (key, value) {\n    bizagi.context[key] = value;\n  });\n\n  // Fix camel case in idWorkItem Property\n  bizagi.context[\"idWorkItem\"] = bizagi.context[\"idWorkitem\"];\n};\n\nbizagi.util.reloadCSS = function () {\n  var queryString = '?reload=' + new Date().getTime();\n  $('link[rel=\"stylesheet\"]').each(function () {\n    this.href = this.href.replace(/\\?.*|$/, queryString);\n  });\n};\n\n/**\r\n    * Control recursive calls of setTimeout\r\n    * @param params json {name:name of call,call: function call}\r\n    * @return void\r\n    */\nbizagi.util.setInterval = function (params) {\n  var _name = params.name || 'default';\n  var _call = params.call || function () {};\n  var _params = params.params || {};\n  var _singleton = params.singleton || false;\n  var _timeOut = params.timeout || 5000;\n  var _maxIterations = params.iterations || 1000;\n  var _context = params.context || \"true;\";\n  // If callback its diferent to context, remove from hash\n  var _killWhenExitContext = params.hasOwnProperty('killWhenExitContext') ? params.killWhenExitContext : true;\n  bizagi.timeOut = bizagi.timeOut || {};\n  if (bizagi.timeOut[_name] == undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n  // Check if singleton (run once)\n  if (_singleton && bizagi.timeOut[_name] != undefined) {\n    bizagi.timeOut[_name] = [];\n  }\n\n\n  bizagi.timeOut[_name].push({\n    name: _name,\n    params: _params,\n    call: _call,\n    singleton: _singleton,\n    timeOut: _timeOut,\n    iterations: 0,\n    maxIterations: _maxIterations,\n    context: _context,\n    killWhenExitContext: _killWhenExitContext,\n    itsRunning: false,\n    timeInit: Math.round(new Date().getTime()) });\n\n  var executeTimeOut = function executeTimeOut() {\n    $.each(bizagi.timeOut, function (k, v) {\n      $.each(v, function (key, value) {\n        var now = Math.round(new Date().getTime());\n        var actualIterations = Math.round((now - value.timeInit) / value.timeOut);\n        bizagi.timeOut[value.name][key]['iterations'] = actualIterations;\n        if (actualIterations < value.maxIterations) {\n          // Check context\t\t\t\t\t\n          if (eval(value.context)) {\n            if (!value.itsRunning) {\n              if (value.params)\n                // Create a virtual function to IE\n                if ($.browser.msie) {\n                  var ieFunction = function ieFunction() {\n                    return value.call(value.params);\n                  };\n                }\n\n              bizagi.timeOut[value.name][key]['pointer'] = $.browser.msie ? setInterval(ieFunction, value.timeOut, 'JavaScript') : setInterval(value.call, value.timeOut, value.params);\n              bizagi.timeOut[value.name][key]['itsRunning'] = true;\n            }\n          } else if (value.killWhenExitContext) {\n            bizagi.timeOut[value.name].splice(key, 1);\n            clearTimeout(value.pointer);\n          } else {\n            bizagi.timeOut[value.name][key]['itsRunning'] = false;\n            clearTimeout(value.pointer);\n          }\n        } else {\n          // Cancel timeout and remove call from hash\n          clearTimeout(value.pointer);\n          bizagi.timeOut[value.name].splice(key, 1);\n        }\n      });\n    });\n  };\n\n  if (!bizagi.timeOutRunning) {\n    bizagi.timeOutRunning = true;\n    setInterval(executeTimeOut, 1000);\n  }\n};\nbizagi.util.isDate = function (value) {\n  // type A) dd/mm/aaaa \n  // type B) aaaa/mm/dd\n  // type C) aa/mm/dd\n\n  var dateRegEx_typeA = /^\\d{1,2}\\/\\d{1,2}\\/\\d{4}$/,\n  dateRegEx_typeB = /^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/,\n  dateRegEx_typeC = /^\\d{1,2}\\/\\d{1,2}\\/\\d{1,2}$/,\n  timeRegEx = /^\\d{1,2}:\\d{2}(:\\d{2})?(\\s[aApP][mM])?$/,\n  result = false,\n  resultDate = false,\n  hasTime = false,\n  resultTime = false;\n\n  value = value || '';\n\n  var arrayDate = value.toString().split(\" \"),\n  dateField,\n  timeField;\n\n  dateField = arrayDate[0];\n\n  if (dateRegEx_typeA.test(dateField) || dateRegEx_typeB.test(dateField) || dateRegEx_typeC.test(dateField)) {\n    resultDate = true;\n  }\n\n  if (arrayDate.length > 1) {\n\n    timeField = arrayDate[1];\n\n    hasTime = true;\n\n    //Checks if AM/PM included in the time element\n    if (arrayDate.length == 3)\n    timeField = timeField + ' ' + arrayDate[2];\n\n    if (timeRegEx.test(timeField))\n    resultTime = true;\n  }\n\n  if (hasTime)\n  result = resultDate && resultTime;else\n\n  result = resultDate;\n\n  return result;\n};\n/*\r\n    *   Encodes unicode characters into html\r\n    */\nbizagi.util.unicode2htmlencode = function (input) {\n  // Shorten\n  var natCCA = 'charCodeAt';\n  input = input.replace(/\\r\\n/g, '\\n');\n  var i,b1,hex,\n  len = input.length,\n  htmlHex = '';\n  for (i = 0; i < len; i++) {\n    b1 = input[natCCA](i);\n    hex = b1.toString(16);\n    htmlHex += '&#x' + hex + ';';\n  }\n  return htmlHex;\n};\n/*\r\n    *   Gets the head element from the DOM\r\n    */\nbizagi.util.getHeadElement = function () {\n  var hd = document.getElementsByTagName(\"head\")[0];\n  var docEl = document && document.documentElement;\n  if (!hd) {\n    hd = document.createElement(\"head\");\n    docEl.insertBefore(hd, docEl.firstChild);\n  }\n  // replace head so it runs fast next time.\n  bizagi.util.getHeadElement = function () {\n    return hd;\n  };\n  return hd;\n};\n/*\r\n    *   Loads a css text into the current document\r\n    */\nbizagi.util.loadStyle = function (styleText, layoutGuid) {\n\n  var element = document.getElementById(layoutGuid);\n\n  if (styleText && !element) {// less\n    var css = document.createElement(\"style\");\n    css.type = \"text/css\";\n    css.id = layoutGuid;\n    if (css.styleSheet) {// IE\n      css.styleSheet.cssText = styleText;\n    } else {\n      (function (node) {\n        if (css.childNodes.length) {\n          if (css.firstChild.nodeValue !== node.nodeValue) {\n            css.replaceChild(node, css.firstChild);\n          }\n        } else {\n          css.appendChild(node);\n        }\n      })(document.createTextNode(styleText));\n    }\n    bizagi.util.getHeadElement().appendChild(css);\n  }\n};\n\n/*\r\n    *   Loads a css text of the icon widget into the current document\r\n    */\nbizagi.util.loadIconStyle = function (icon, userfieldname) {\n  bizagi.log(\"bizagi.util.loadIconStyle\");\n  var css = document.createElement(\"style\");\n  css.type = \"text/css\";\n\n  var cssText = \".mtool-item-image-\" + userfieldname + \" { background:url(data:image/png;base64,\" + icon + \"); }\";\n  css.innerHTML = cssText;\n\n  bizagi.util.getHeadElement().appendChild(css);\n};\n\nbizagi.util.formatDecimalAndMoneyCell = function (tableData, externalMoneyFormat) {\n  var moneyFormat, decimalFormat, i, j;\n  var externalDecimalFormat = {\n    decimalSymbol: externalMoneyFormat.decimalSeparator,\n    digitGroupSymbol: externalMoneyFormat.groupSeparator,\n    roundToDecimalPlace: externalMoneyFormat.decimalDigits };\n\n  var defaultMoneyFormat = {\n    symbol: \"\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n\n  moneyFormat = $.extend(defaultMoneyFormat, externalMoneyFormat);\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n\n  for (i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n    if (tableData.columnTitle[i].type.toUpperCase() == \"FLOAT\" || tableData.columnTitle[i].type.toUpperCase() == \"REAL\") {\n      for (j = 0; j < tableData.rows.length; j++) {\n        var numberValue = bizagi.util.formatDecimal(tableData.rows[j].fields[i], decimalFormat);\n        //Gets rids of unnecessary zeros\n        if (bizagi.override.removeTrailingZeros === true) {\n          var positive = true;\n          if (numberValue.toString().indexOf(\")\") != -1) {\n            positive = false;\n            numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n          }\n          var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"$1\");\n          re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n          numberValue = numberValue.replace(re, \"\");\n\n          if (!positive) numberValue = \"(\" + numberValue + \")\";\n        }\n        tableData.rows[j].fields[i] = numberValue;\n      }\n    }\n  }\n\n  return tableData;\n};\n\n\nbizagi.util.formatBoolean = function (value) {\n  if (bizagi.util.parseBoolean(value) == true) {\n    return bizagi.localization.getResource(\"render-boolean-yes\");\n  } else if (bizagi.util.parseBoolean(value) == false) {\n    return bizagi.localization.getResource(\"render-boolean-no\");\n  } else {\n    return \"\";\n  }\n};\n\nbizagi.util.formatInvariantBoolean = function (htmlContent) {\n  htmlContent = htmlContent || \"\";\n  $(\".formatBoolean\", htmlContent).not(\".formatted\").each(function (index, element) {\n    var $element = $(element);\n    var content = $element.html();\n    $element.addClass(\"formatted\");\n    try {\n      var formatBoolean = bizagi.util.formatBoolean(content);\n      $element.html(formatBoolean);\n    } catch (e) {\n      $element.html(content);\n    }\n  });\n};\n\nbizagi.util.formatDecimal = function (value, format) {\n  var i = $(\"<i/>\").text(value);\n  if (i.formatCurrency) {i.formatCurrency(format);}\n  return i.text();\n};\n\n/*\r\n    * Format monetary cells\r\n    */\nbizagi.util.formatMonetaryCells = function (tableData, moneyFormat) {\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: \",\",\n    groupSeparator: \".\",\n    decimalDigits: \"2\" };\n\n\n  moneyFormat = moneyFormat || defaultFormat;\n\n  for (var i = 0; i < tableData.columnTitle.length; i++) {\n    if (tableData.columnTitle[i].type.toUpperCase() == \"MONEY\") {\n      for (var j = 0; j < tableData.rows.length; j++) {\n        tableData.rows[j].fields[i] = bizagi.util.formatMoney(tableData.rows[j].fields[i], moneyFormat);\n      }\n    }\n  }\n\n  return tableData;\n\n};\n\n/*\r\n    * Format monetary values, the format must have the structure of the next example:\r\n    *\r\n    * var defaultFormat = {\r\n    *        symbol: \"\",\r\n    *        decimalSeparator: \",\",\r\n    *        groupSeparator: \".\",\r\n    *        decimalDigits: \"2\"\r\n    *    };\r\n    */\nbizagi.util.formatMoney = function (value, format) {\n  var result = \"\",\n  tmpResult = \"\",\n  intSection = \"\",\n  decimalSection = \"\",\n  decimalResult = \"\",\n  isNegative = value < 0;\n\n  if (value == null) {\n    value = \"\";\n  }\n\n  value = value.toString();\n\n  if (value.length >= 1) {\n    var decimalDigitPosition = value.indexOf(\".\");\n\n    if (decimalDigitPosition > 0) {\n      value = bizagi.util.fixDecimalDigits(value, format.decimalDigits);\n      intSection = value.substring(0, decimalDigitPosition).replace(/\\D/g, '');\n    } else {\n      var zeroChar = \"0\";\n\n      for (var i = 0; i < format.decimalDigits; i++) {\n        decimalResult += zeroChar;\n      }\n      intSection = value.replace(/\\D/g, '');\n    }\n\n    //take only the number characters removing other characters\n    value = value.replace(/\\D/g, '');\n    //take the decimal section\n    if (format.decimalDigits > 0) {\n      decimalSection = decimalDigitPosition > 0 ? format.decimalSeparator + value.substring(value.length - format.decimalDigits, value.length) : format.decimalSeparator + decimalResult;\n    } else {\n      decimalSection = \"\";\n    }\n    //insert groupSeparators into int section\n    if (intSection.length > 3) {\n      var count = 0;\n\n      //insert separator from end to begin\n      for (var i = intSection.length - 1; i >= 0; i--) {\n        if (count == 3) {\n          tmpResult += \".\";\n          count = 0;\n        }\n        tmpResult += intSection[i];\n        count += 1;\n      }\n      //revert the string to get the result value\n      for (var i = tmpResult.length - 1; i >= 0; i--) {\n        result += tmpResult[i];\n      }\n    } else {\n      result = intSection;\n    }\n\n    //replace the correct group separator\n    result = result.replaceAll(\".\", format.groupSeparator);\n    //unify all sections and finish format\n    if (isNegative) {\n      var negativeFormat = bizagi.localization.getResource('numericFormat').negativeFormat;\n      result = negativeFormat.replace(\"%s\", format.symbol).replace(\"%n\", result + decimalSection);\n    } else {\n      result = format.symbol + result + decimalSection;\n    }\n\n    return result;\n  } else {\n    return value;\n  }\n\n\n};\n\n/**\r\n    * Remove all characters except numbers\r\n    */\nbizagi.util.getOnlyNumbersByString = function (stringValue) {\n  return stringValue.replace(/\\D/g, '');\n};\n\n/*\r\n       This method was created because the \"toFixed()\" JavaScript method in some cases round the numbers when it is not needed.\r\n       Can return string or number.\r\n   */\nbizagi.util.fixDecimalDigits = function (value, decimalDigits) {\n  var decimalDigitPosition,\n  intSection,\n  decimalSection;\n\n  decimalDigitPosition = value.indexOf('.');\n  intSection = value.substring(0, decimalDigitPosition);\n  decimalSection = value.substring(decimalDigitPosition + 1, value.length);\n\n  if (decimalDigits > decimalSection.length) {\n    for (var i = decimalSection.length; i < decimalDigits; i++) {\n      value += '0';\n    }\n  } else {\n    value = parseFloat(value).toFixed(decimalDigits);\n  }\n\n  return value;\n\n};\n\n/*\r\n    * Format html  money\r\n    */\nbizagi.util.formatInvariantMoney = function (htmlContent, moneyFormat) {\n  htmlContent = htmlContent || \"\";\n  var defaultFormat = {\n    symbol: moneyFormat.symbol,\n    decimalSeparator: moneyFormat.decimalSeparator || \",\",\n    groupSeparator: moneyFormat.groupSeparator || \".\",\n    decimalDigits: moneyFormat.decimalDigits || \"2\" };\n\n  if (moneyFormat.allowDecimals === false) {\n    defaultFormat.decimalDigits = \"0\";\n  }\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = parseFloat(content);\n      if (!isNaN(value)) {\n        var formatMoney = bizagi.util.formatMoney(value, defaultFormat);\n        $(elem).html(formatMoney);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html  number\r\n    */\nbizagi.util.formatInvariantNumber = function (htmlContent, numberFormat) {\n  htmlContent = htmlContent || \"\";\n  var decimalDigits = \"2\";\n  if (numberFormat.decimalDigits == \"0\")\n  decimalDigits = \"0\";else\n\n  decimalDigits = numberFormat.decimalDigits || \"2\";\n\n  var groupSeparator = bizagi.util.isString(numberFormat.groupSeparator) && numberFormat.groupSeparator ? numberFormat.groupSeparator : \".\";\n\n  var defaultFormat = {\n    symbol: \"\",\n    decimalSeparator: numberFormat.decimalSeparator || \",\",\n    groupSeparator: numberFormat.groupSeparator || numberFormat.thousands ? groupSeparator : \"\",\n    decimalDigits: decimalDigits };\n\n  $(\".formatMoney\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var containsLetter = content.match(/[a-zA-Z]/);\n      var value = containsLetter != null && containsLetter.length > 0 ? NaN : parseFloat(content);\n      if (!isNaN(value)) {\n        var formatNumber = bizagi.util.formatMoney(value, defaultFormat);\n        if (numberFormat.percentage) {\n          formatNumber = formatNumber.toString() + \"%\";\n        }\n        $(elem).html(formatNumber);\n      }\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/*\r\n    * Format html with invariant date\r\n    */\nbizagi.util.formatInvariantDate = function (htmlContent, dateFormat) {\n  htmlContent = htmlContent || \"\";\n  dateFormat = dateFormat || \"MM/dd/yyyy hh:mm:ss\";\n  $(\".formatDate\", htmlContent).not(\".formated\").each(function (index, elem) {\n    var content = $(elem).html();\n    $(elem).addClass(\"formated\");\n    try {\n      var value = new Date(content);\n      var dateTimeFormat = dateFormat;\n\n      if (bizagi.util.isValidDate(value))\n      dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n      var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat /*self.getResource(\"dateFormat\")*/);\n      $(elem).html(formatDate);\n    } catch (e) {\n      // Restore the original content\n      $(elem).html(content);\n    }\n  });\n};\n\n/**\r\n    * Return format date with resources from string invariant date. It use the format specified\r\n    * @param stringInvariantDate\r\n    */\nbizagi.util.formatDateFromInvariantStringDate = function (stringInvariantDate) {\n  if (bizagi.util.isValidDate(stringInvariantDate)) {\n    var dateTimeFormat = bizagi.localization.getResource(\"dateFormat\") + ' ' + bizagi.localization.getResource(\"timeFormat\");\n    var value = new Date(stringInvariantDate);\n    dateTimeFormat = bizagi.util.getFormatDate(value, dateTimeFormat);\n\n    var formatDate = bizagi.util.dateFormatter.formatDate(value, dateTimeFormat);\n    return formatDate;\n  }\n  return stringInvariantDate || \"\";\n};\n\nbizagi.util.getFormatDate = function (dateValue, defaultFormatDate) {\n  var dateTimeFormat = defaultFormatDate;\n\n  var H = dateValue.getHours();\n  var m = dateValue.getMinutes();\n  var s = dateValue.getSeconds();\n  var ms = dateValue.getMilliseconds();\n  var hide = bizagi.override.hideTimeWhenHourMinutesSecondsAreZero;\n\n  //Don't show time when hour, minutes, seconds and milliseconds are 0\n  if (H === 0 && m === 0 && s === 0 && ms === 0 && hide)\n  dateTimeFormat = bizagi.localization.getResource(\"dateFormat\");\n\n  return dateTimeFormat;\n};\n\n/**\r\n    * Format value by dataType\r\n    */\nbizagi.util.formatValueByDataType = function (value, dataType) {\n  /**\r\n                                                                 * Types Definedin Backend\r\n                                                                 * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n                                                                 Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n                                                                 MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n                                                                 Stakeholder = 30,ActivityItems = 31\r\n                                                                 *\r\n                                                                 * */\n  var result = value;\n  switch (dataType) {\n    case \"NText\":\n    case 23:\n    case \"Char\":\n    case 14:\n    case \"VarChar\":\n    case 15:\n    case \"Text\":\n    case 16:\n      if (value && value.length > 30) {\n        result = bizagi.util.replaceLineBreak(value);\n      }\n      break;\n    case \"Boolean\":\n    case 5:\n    case \"Binary\":\n    case 17:\n      result = bizagi.util.formatBoolean(value);\n      break;\n    case \"Int\":\n    case 2:\n    case \"BigInt\":\n    case 1:\n    case \"SmallInt\":\n    case 3:\n    case \"TinyInt\":\n    case 4:\n    case \"Numeric\":\n    case 7:\n      result = value === undefined || value === null ? \"\" : value;\n      break;\n    case \"Money\":\n    case 8:\n      result = bizagi.util.formatMonetaryCell(value);\n      break;\n    case \"Float\":\n    case 10:\n    case \"Real\":\n    case 11:\n    case \"Decimal\":\n    case 6:\n      result = bizagi.util.formatDecimalCell(value);\n      break;\n    case \"DateTime\":\n    case 12:\n    case \"SmallDateTime\":\n    case 13:\n      result = bizagi.util.formatDateFromInvariantStringDate(value);\n      break;}\n\n  if (result == null) {\n    result = \"\";\n  }\n  return result;\n};\n\n/**\r\n    * Check if it is a valid date\r\n    */\nbizagi.util.isValidDate = function (params) {\n  if (typeof params != \"undefined\" && params != null) {\n    var parseDate = new Date(params);\n    return !isNaN(parseDate.valueOf());\n  } else return false;\n};\n\n/*\r\n    *   Defines a date time formatter that will be available globally\r\n    */\nbizagi.util.monthNames = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec');\nbizagi.util.dayNames = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat');\n\nbizagi.util.dateFormatter = new function () {\n  this.LZ = function (x) {\n    return (x < 0 || x > 9 ? \"\" : \"0\") + x;\n  };\n  /*\r\n      *   isDate ( date_string, format_string )\r\n      *   Returns true if date string matches format of format string and\r\n      *   is a valid date. Else returns false.\r\n      *   It is recommended that you trim whitespace around the value before\r\n      *   passing it to this function, as whitespace is NOT ignored!\r\n      */\n  this.isDate = function (val, format) {\n    var date = this.getDateFromFormat(val, format);\n    if (date == 0) {\n      return false;\n    }\n    return true;\n  };\n\n  this.getRelativeTime = function (date, dateFormat, onlyUnitsTime, timeZone) {\n\n    var self = this;\n    var now = timeZone ? new Date(moment().tz(bizagi.currentUser.timeZoneName).format()) : new Date();\n    var time = date instanceof Date ? date : kendo.parseDate(date, dateFormat);\n    var diff = now.getTime() - time.getTime();\n    var timeDiff = getTimeDiffDescription(diff, 'year', 31536000000, onlyUnitsTime);\n\n    if (!timeDiff) {\n      timeDiff = getTimeDiffDescription(diff, 'month', 2628000000, onlyUnitsTime);\n      if (!timeDiff) {\n        timeDiff = getTimeDiffDescription(diff, 'week', 604800000, onlyUnitsTime);\n        if (!timeDiff) {\n          timeDiff = getTimeDiffDescription(diff, 'day', 86400000, onlyUnitsTime);\n          if (!timeDiff) {\n            timeDiff = getTimeDiffDescription(diff, 'hour', 3600000, onlyUnitsTime);\n            if (!timeDiff) {\n              timeDiff = getTimeDiffDescription(diff, 'minute', 60000, onlyUnitsTime);\n              if (!timeDiff) {\n                if (onlyUnitsTime) {\n                  if (diff === 0) {\n                    timeDiff = getTimeDiffDescription(diff + 1, 'minute', 1, onlyUnitsTime);\n                  } else {\n                    timeDiff = getTimeDiffDescription(diff, 'minute', 1, onlyUnitsTime);\n                  }\n                } else {\n                  timeDiff = getTimeDiffDescription(diff, 'second', 2000, onlyUnitsTime);\n                  if (!timeDiff) {\n                    timeDiff = bizagi.localization.getResource(\"workportal-relativetime-momentago\");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return timeDiff;\n\n    /*\r\n                      * Get Time Difference\r\n                      */\n    function getTimeDiffDescription(diff, unit, timeDivisor, onlyUnitsTime) {\n      var unitAmount = (diff / timeDivisor).toFixed(0);\n\n      if (unitAmount > 0) {\n        if (onlyUnitsTime) {\n          return unitAmount == 1 ? bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount) : bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount);\n        } else {\n          var resourceAgo = bizagi.localization.getResource(\"workportal-relativetime-ago\");\n          return unitAmount == 1 ? resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit).replace(\"%s\", unitAmount)) : resourceAgo.replace(\"%s\", bizagi.localization.getResource(\"workportal-relativetime-\" + unit + \"s\").replace(\"%s\", unitAmount));\n        }\n\n      } else {\n        return null;\n      }\n    }\n  };\n\n  /*\r\n      *   compareDates(date1,date1format,date2,date2format)\r\n      *   Compare two date strings to see which is greater.\r\n      *   Returns:\r\n      *   1 if date1 is greater than date2\r\n      *   0 if date2 is greater than date1 of if they are the same\r\n      *  -1 if either of the dates is in an invalid format\r\n      */\n  this.compareDates = function (date1, dateformat1, date2, dateformat2) {\n    var d1 = getDateFromFormat(date1, dateformat1);\n    var d2 = getDateFromFormat(date2, dateformat2);\n    if (d1 == 0 || d2 == 0) {\n      return -1;\n    } else if (d1 > d2) {\n      return 1;\n    }\n    return 0;\n  };\n  /*\r\n      *   getDifferenceBetweenDates(date1,date2, unit)\r\n      *   Compare two date objects to see difference between them. The number result by unit specified.\r\n      *\r\n      *   Returns:\r\n      *   Difference value between two dates.\r\n      *   Message string if either of the dates is in an invalid format\r\n      */\n  this.getDifferenceBetweenDates = function (date1, date2, unit) {\n    if (date1 instanceof Date && date1 instanceof Date) {\n      switch (unit) {\n        case \"seconds\":\n          return (date2.getTime() - date1.getTime()) / 1000;\n        case \"milliseconds\":\n          return date2.getTime() - date1.getTime();\n        default:\n          return \"unit is not Defined\";}\n\n    } else {\n      return \"one param not is Date\";\n    }\n\n  };\n  /*\r\n      *   formatDate (date_object, format)\r\n      *   Returns a date in the output format specified.\r\n      *   The format string uses the same abbreviations as in getDateFromFormat()\r\n      */\n  this.formatDate = function (date, format, i18n) {\n    // Check if date is valid\n    if (!bizagi.util.isValidDate(date) || date == 0) {\n      return \"\";\n    }\n\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    format = format + \"\";\n    var result = \"\";\n    var i_format = 0;\n    var c;\n    var token;\n    var y = date.getFullYear() + \"\";\n    var M = date.getMonth() + 1;\n    var d = date.getDate();\n    var E = date.getDay();\n    var H = date.getHours();\n    var m = date.getMinutes();\n    var s = date.getSeconds();\n    var f = date.getMilliseconds();\n    // Convert real date parts into formatted versions\n    var value = new Object();\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    if (y.length < 4 || y.charAt(0) === \"-\" && y.length < 5) {\n      y = \"\" + (y - 0 + 1900);\n    }\n    value[\"y\"] = \"\" + y;\n    value[\"yyyy\"] = y;\n    value[\"yy\"] = y.substring(2, 4);\n    value[\"M\"] = M;\n    value[\"MM\"] = this.LZ(M);\n    value[\"MMM\"] = monthNames[M + 11];\n    value[\"MMMM\"] = monthNames[M - 1];\n    value[\"NNN\"] = monthNames[M + 11];\n    value[\"d\"] = d;\n    value[\"dd\"] = this.LZ(d);\n    value[\"ddd\"] = dayNames[E + 7];\n    value[\"dddd\"] = dayNames[E];\n    value[\"E\"] = dayNames[E + 7];\n    value[\"EE\"] = dayNames[E];\n    value[\"H\"] = H;\n    value[\"HH\"] = this.LZ(H);\n    value[\"tt\"] = H < 12 ? \"am\" : \"pm\";\n    value[\"TT\"] = H < 12 ? \"AM\" : \"PM\";\n\n\n    if (H == 0) {\n      value[\"h\"] = 12;\n    } else if (H > 12) {\n      value[\"h\"] = H - 12;\n    } else {\n      value[\"h\"] = H;\n    }\n    value[\"hh\"] = this.LZ(value[\"h\"]);\n    if (H > 11) {\n      value[\"K\"] = H - 12;\n    } else {\n      value[\"K\"] = H;\n    }\n    value[\"k\"] = H + 1;\n    value[\"KK\"] = this.LZ(value[\"K\"]);\n    value[\"kk\"] = this.LZ(value[\"k\"]);\n    if (H > 11) {\n      value[\"a\"] = \"PM\";\n    } else {\n      value[\"a\"] = \"AM\";\n    }\n    value[\"m\"] = m;\n    value[\"mm\"] = this.LZ(m);\n    value[\"s\"] = s;\n    value[\"ss\"] = this.LZ(s);\n    value[\"FFF\"] = f;\n\n    while (i_format < format.length) {\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      if (value[token] != null) {\n        result = result + value[token];\n      } else {\n        result = result + token;\n      }\n    }\n    return result;\n  };\n  /*\r\n      *   getDateFromFormat( date_string , format_string )\r\n      *\r\n      *   This function takes a date string and a format string. It matches\r\n      *   If the date string matches the format string, it returns the \r\n      *   getTime() of the date. If it does not match, it returns 0.\r\n      */\n  this.getDateFromFormat = function (val, format, i18n) {\n    var monthNames = bizagi.util.monthNames;\n    var dayNames = bizagi.util.dayNames;\n    val = val + \"\";\n    format = format + \"\";\n    var i_val = 0;\n    var i_format = 0;\n    var c;\n    var token;\n    var x = 0,\n    y = 0;\n    var now = new Date();\n    var year = now.getYear();\n    var month = now.getMonth() + 1;\n    var date = 1;\n    var hh = now.getHours();\n    var mm = now.getMinutes();\n    var ss = now.getSeconds();\n    var FFF = now.getMilliseconds();\n    var ampm = \"\";\n\n    if (bizagi.util.isValidResource(\"datePickerRegional\")) {\n      i18n = bizagi.localization.getResource(\"datePickerRegional\");\n    }\n\n    if (i18n) {\n      var months = i18n.monthNames.concat(i18n.monthNamesShort);\n      var days = i18n.dayNames.concat(i18n.dayNamesShort);\n      monthNames = monthNames.toString() === months.toString() ? monthNames : months;\n      dayNames = dayNames.toString() === days.toString() ? dayNames : days;\n    }\n\n    while (i_format < format.length) {\n      // Get next token from format string\n      c = format.charAt(i_format);\n      token = \"\";\n      while (format.charAt(i_format) == c && i_format < format.length) {\n        token += format.charAt(i_format++);\n      }\n      // Extract contents of value based on format token\n      if (token == \"yyyy\" || token == \"yy\" || token == \"y\") {\n        if (token == \"yyyy\") {\n          x = 4;\n          y = 4;\n        }\n        if (token == \"yy\") {\n          x = 2;\n          y = 2;\n        }\n        if (token == \"y\") {\n          x = 2;\n          y = 4;\n        }\n        year = _getInt(val, i_val, x, y);\n        if (year == null) {\n          return 0;\n        }\n        i_val += year.length;\n        if (year.length == 2) {\n          if (year > 70) {\n            year = 1900 + (year - 0);\n          } else {\n            year = 2000 + (year - 0);\n          }\n        }\n      } else if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\") {\n        month = 0;\n        for (var i = 0; i < monthNames.length; i++) {\n          var month_name = monthNames[i];\n          if (val.substring(i_val, i_val + month_name.length).toLowerCase() == month_name.toLowerCase()) {\n            if (token == \"MMMM\" || token == \"MMM\" || token == \"NNN\" && i > 11) {\n              month = i + 1;\n              if (month > 12) {\n                month -= 12;\n              }\n              i_val += month_name.length;\n              break;\n            }\n          }\n        }\n\n        //This is because bizagi assumes MM and M like integers in some cases\n        if (month == 0) {\n          month = _getInt(val, i_val, 1, 2);\n          if (month == null || month < 1 || month > 12) {\n            return 0;\n          }\n          i_val += month.length;\n        }\n\n        if (month < 1 || month > 12) {\n          return 0;\n        }\n      } else if (token == \"dddd\" || token == \"EE\" || token == \"E\") {\n        for (var j = 0; j < dayNames.length; j++) {\n          var day_name = dayNames[j];\n          if (val.substring(i_val, i_val + day_name.length).toLowerCase() == day_name.toLowerCase()) {\n            i_val += day_name.length;\n            break;\n          }\n        }\n      } else if (token == \"MM\" || token == \"M\") {\n        month = _getInt(val, i_val, 1, 2);\n        if (month == null || month < 1 || month > 12) {\n          return 0;\n        }\n        i_val += month.length;\n      } else if (token == \"dd\" || token == \"d\") {\n        date = _getInt(val, i_val, 1, 2);\n        if (date == null || date < 1 || date > 31) {\n          return 0;\n        }\n        i_val += date.length;\n      } else if (token == \"hh\" || token == \"h\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 12) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"HH\" || token == \"H\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 23) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"KK\" || token == \"K\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 0 || hh > 11) {\n          return 0;\n        }\n        i_val += hh.length;\n      } else if (token == \"kk\" || token == \"k\") {\n        hh = _getInt(val, i_val, token.length, 2);\n        if (hh == null || hh < 1 || hh > 24) {\n          return 0;\n        }\n        i_val += hh.length;\n        hh--;\n      } else if (token == \"mm\" || token == \"m\") {\n        mm = _getInt(val, i_val, token.length, 2);\n        if (mm == null || mm < 0 || mm > 59) {\n          return 0;\n        }\n        i_val += mm.length;\n      } else if (token == \"ss\" || token == \"s\") {\n        ss = _getInt(val, i_val, token.length, 2);\n        if (ss == null || ss < 0 || ss > 59) {\n          return 0;\n        }\n        i_val += ss.length;\n      } else if (token == \"FFF\") {\n        ff = _getInt(val, i_val, token.length, 3);\n        if (ff == null || ff < 0 || ff > 999) {\n          return 0;\n        }\n        i_val += ff.length;\n      } else if (token == \"a\" || token == \"tt\") {\n        if (val.substring(i_val, i_val + 2).toLowerCase() == \"am\") {\n          ampm = \"AM\";\n        } else if (val.substring(i_val, i_val + 2).toLowerCase() == \"pm\") {\n          ampm = \"PM\";\n        } else {\n          return 0;\n        }\n        i_val += 2;\n      } else {\n        if (val.substring(i_val, i_val + token.length) != token) {\n          return 0;\n        } else {\n          i_val += token.length;\n        }\n      }\n    }\n\n    // Is date valid for month?\n    if (month == 2) {\n      // Check for leap year\n      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {// leap year\n        if (date > 29) {\n          return 0;\n        }\n      } else {\n        if (date > 28) {\n          return 0;\n        }\n      }\n    }\n    if (month == 4 || month == 6 || month == 9 || month == 11) {\n      if (date > 30) {\n        return 0;\n      }\n    }\n    // Correct hours value\n    if (hh < 12 && ampm == \"PM\") {\n      hh = hh - 0 + 12;\n    } else if (hh > 11 && ampm == \"AM\") {\n      hh -= 12;\n    }\n    var newdate = new Date(year, month - 1, date, hh, mm, ss);\n    return newdate;\n\n    /*\r\n                     *   Utility method for parsing in getDateFromFormat()\r\n                     */\n    function _isInteger(_val) {\n      var digits = \"1234567890\";\n      for (var k = 0; k < _val.length; k++) {\n        if (digits.indexOf(_val.charAt(k)) == -1) {\n          return false;\n        }\n      }\n      return true;\n    };\n    /*\r\n        *   Utility method for parsing in getDateFromFormat()\r\n        */\n    function _getInt(str, l, minlength, maxlength) {\n      for (var m = maxlength; m >= minlength; m--) {\n        var _token = str.substring(l, l + m);\n        if (_token.length < minlength) {\n          return null;\n        }\n        if (_isInteger(_token)) {\n          return _token;\n        }\n      }\n      return null;\n    };\n  };\n  /*\r\n      * parseDate( date_string [, prefer_euro_format] )\r\n      *\r\n      * This function takes a date string and tries to match it to a\r\n      * number of possible date formats to get the value. It will try to\r\n      * match against the following international formats, in this order:\r\n      * y-M-d   MMM d, y   MMM d,y   y-MMM-d   d-MMM-y  MMM d\r\n      * M/d/y   M-d-y      M.d.y     MMM-d     M/d      M-d\r\n      * d/M/y   d-M-y      d.M.y     d-MMM     d/M      d-M\r\n      * A second argument may be passed to instruct the method to search\r\n      * for formats like d/M/y (european format) before M/d/y (American).\r\n      * Returns a Date object or null if no patterns match.\r\n      */\n  this.parseDate = function (val) {\n    var preferEuro = arguments.length == 2 ? arguments[1] : false;\n    var generalFormats = new Array('y-M-d', 'MMM d, y', 'MMM d,y', 'y-MMM-d', 'd-MMM-y', 'MMM d');\n    var monthFirst = new Array('M/d/y', 'M-d-y', 'M.d.y', 'MMM-d', 'M/d', 'M-d');\n    var dateFirst = new Array('d/M/y', 'd-M-y', 'd.M.y', 'd-MMM', 'd/M', 'd-M');\n    var checkList = new Array(generalFormats, preferEuro ? dateFirst : monthFirst, preferEuro ? monthFirst : dateFirst);\n    var d;\n    for (var i = 0; i < checkList.length; i++) {\n      var l = window[checkList[i]];\n      for (var j = 0; j < l.length; j++) {\n        d = getDateFromFormat(val, l[j]);\n        if (d != 0) {\n          return new Date(d);\n        }\n      }\n    }\n    return null;\n  };\n  /*\r\n      *   Method to analyze a time format and checks separator, and hour format, and seconds\r\n      */\n  this.analyzeTimeFormat = function (timeFormat) {\n    var i = 0;\n    var c;\n    // Define return object\n    var returnObj = {\n      show24Hours: false,\n      showSeconds: false,\n      separator: \":\" };\n\n    // Analize format\n    var token,lastToken = \"\";\n    while (i < timeFormat.length) {\n      // Get next token from format string\n      c = timeFormat.charAt(i);\n      token = \"\";\n      while (timeFormat.charAt(i) == c && i < timeFormat.length) {\n        token += timeFormat.charAt(i++);\n      }\n\n      // Extract contents of value based on format token\n      if (token == \"hh\" || token == \"h\") {\n        lastToken = token;\n        returnObj.show24Hours = false;\n      } else if (token == \"HH\" || token == \"H\") {\n        lastToken = token;\n        returnObj.show24Hours = true;\n      } else if (token == \"mm\" || token == \"m\") {\n        lastToken = token;\n      } else if (token == \"ss\" || token == \"s\") {\n        lastToken = token;\n        returnObj.showSeconds = true;\n      } else if (token == \"a\") {\n        lastToken = token;\n      } else {\n        if (lastToken.toUpperCase() == \"H\" || lastToken.toUpperCase() == \"HH\") {\n          returnObj.separator = token;\n        }\n      }\n    }\n\n    return returnObj;\n  };\n  this.getDateFromInvariant = function (value, showTime) {\n    value = value == null ? \"\" : value;\n    value = typeof value != \"string\" ? value.toString() : value;\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" H:mm:ss\" : \"\");\n    if (showTime) {\n      if (value && (value.toLowerCase().indexOf(\"am\") > 0 || value.toLowerCase().indexOf(\"pm\") > 0)) {\n        INVARIANT_FORMAT = \"MM/dd/yyyy h:mm:ss a\";\n      }\n    }\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n    } else if (date == 0 && showTime && value != null && value != \"\") {\n      INVARIANT_FORMAT = \"MM/dd/yyyy\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, INVARIANT_FORMAT);\n      date.setHours(0, 0, 0, 0);\n    }\n\n    return date;\n  };\n  this.formatInvariant = function (date, showTime) {\n    var INVARIANT_FORMAT = \"MM/dd/yyyy\" + (showTime ? \" HH:mm:ss\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, INVARIANT_FORMAT);\n    return formattedDate;\n  };\n  this.getDateFromISO = function (value, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    // If the date could not be parsed, try it out with seconds\n    if (date == 0 && showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm:ss\" : \"\");\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n    }\n\n    // Also try to read the date with full format if the last instruction didn't success\n    if (date == 0 && !showTime) {\n      ISO_FORMAT = \"yyyy-MM-dd HH:mm\";\n      date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      // If the date could not be parsed, try it out with seconds\n      if (date == 0) {\n        ISO_FORMAT = \"yyyy-MM-dd HH:mm:ss\";\n        date = bizagi.util.dateFormatter.getDateFromFormat(value, ISO_FORMAT);\n      }\n    }\n\n    return date;\n  };\n  this.formatISO = function (date, showTime) {\n    var ISO_FORMAT = \"yyyy-MM-dd\" + (showTime ? \" HH:mm\" : \"\");\n    var formattedDate = bizagi.util.dateFormatter.formatDate(date, ISO_FORMAT);\n    return formattedDate;\n  };\n\n  this.formatISO8601 = function (dateObject, restartTimeToMidnight) {\n    var restartTimeToMidnight = restartTimeToMidnight || false;\n    var ISO_FORMAT8601 = \"yyyy-MM-ddTHH:mm:ss\";\n    if (restartTimeToMidnight) {\n      dateObject.setHours(0, 0, 0, 0);\n    }\n    return bizagi.util.dateFormatter.formatDate(dateObject, ISO_FORMAT8601);\n  };\n\n  this.isFormatISO8601 = function (stringDate) {\n    var ISO_8601_WITH_TIME = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n    return ISO_8601_WITH_TIME.test(stringDate);\n  };\n\n  this.sleep = function (delay) {\n    // Delay in miliseconds\n    var start = new Date().getTime();\n    while (new Date().getTime() < start + delay) {\n      // wait\n    }\n  };\n  this.getDateFormatByDatePickerJqueryUI = function () {\n    return bizagi.localization.getResource(\"dateFormat\").replace(\"yyyy\", \"yy\");\n  };\n}();\n\nbizagi.util.sleepUntil = function (callback, delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepUntil() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      var continueWaiting = !callback();\n      if (!continueWaiting) {\n        def.resolve();\n        clearTimeout(timeout);\n        return;\n      } else\n      internalSleepUntil(name);\n    }, delay);\n  }\n  internalSleepUntil();\n  return def.promise();\n};\n\nbizagi.util.sleepFor = function (delay) {\n  var delay = delay || 200;\n  var def = new $.Deferred();\n  function internalSleepFor() {\n    var timeout = setTimeout(function () {\n      if (def.state() !== \"pending\") return;\n      def.resolve();\n      clearTimeout(timeout);\n    }, delay);\n  }\n  internalSleepFor();\n  return def.promise();\n};\n\n\n/*\r\n    * Use localStorage in html5 verfiy supports and operations \r\n    * http://dev.w3.org/html5/webstorage/#dom-storage-setitem\r\n    */\n\nbizagi.util.browserSupportLocalStorage = function () {\n  try {\n    return 'localStorage' in window && window['localStorage'] !== null;\n  } catch (e) {\n    return false;\n  }\n};\n/*\r\n    *set the item  in the local storage\r\n    */\nbizagi.util.setItemLocalStorage = function (key, value) {\n  if (bizagi.util.browserSupportLocalStorage()) {\n    localStorage.setItem(key, value);\n    return true;\n  } else {\n    return false;\n  }\n};\n\nbizagi.util.getItemLocalStorage = function (key) {\n  return localStorage.getItem(key);\n};\n\nbizagi.util.removeItemLocalStorage = function (key) {\n  localStorage.removeItem(key);\n};\n\nbizagi.util.clearLocalStorage = function () {\n  if (bizagi.util.browserSupportLocalStorage())\n  localStorage.clear();\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n\n// Fix problem with console.log when we forgot to remove it\n(function () {\n  var environment = typeof BIZAGI_ENVIRONMENT != \"undefined\" ? BIZAGI_ENVIRONMENT : \"release\";\n  if (environment == 'debug') {\n    if (_typeof(window.console) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    }\n  } else {\n    if ((typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) != \"object\") {\n      window.console = {\n        log: function log(msg) {/*Nothing to do*/} };\n\n    } else if (bizagiConfig && !bizagiConfig.showConsoleLog) {\n      console.log = function (a) {/*Nothing to do*/};\n    }\n  }\n})();\n\n\nbizagi.util.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"ui-widget-overlay ui-front\" style=\"z-index: 1001;\"><div class=\"ui-bizagi-loading-message-center\" style=\"position: absolute; top: 48%; left: 48%; display: ;\"><div class=\"ui-bizagi-loading-icon\"></div></div></div>');\n};\nbizagi.util.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".ui-widget-overlay:first\", elementToapply).remove();\n};\n\nbizagi.util.smartphone.startLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  elementToapply.append('<div class=\"bz-util-loading-container\"> <div class=\"ui-bizagi-loading-icon bz-util-loading\"></div>  </div>');\n};\nbizagi.util.smartphone.stopLoading = function (container) {\n  var elementToapply = container || $(\"body\");\n  $(\".bz-util-loading-container\", elementToapply).remove();\n};\n\n\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    * \r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n  var async;\n  var sync;\n\n  self.length = function () {\n    return queue.length;\n  };\n\n  self.add = function (callback) {\n    if (!sync) {\n      sync = true;\n      async = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.addParallel = function (callback) {\n    if (!async) {\n      async = true;\n      sync = undefined;\n      return queue.push({ callbacks: [callback] });\n    }\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\") {\n            var deferred = $.Deferred();\n            $.when(callback()).done(function () {\n              deferred.resolve();\n            }).fail(function () {\n              deferred.reject();\n            });\n            return deferred.promise();\n          }\n          // Deferred support\n          return callback;\n        }));\n      });\n    }\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n}\n\n\n/**\r\n   * Calculate circular dependencies \r\n   * \r\n   * @example var a = new bizagi.circularDependencies(); a.addNode('name',obj);\r\n   * a.resolve(node);\r\n   * \r\n   */\n//TODO: DEPL - Check this because we agreed to a much simpler solution\nbizagi.circularDependencies = function () {\n  var circularDependencies = new Function();\n  var self = circularDependencies.prototype;\n  self.list = []; //[{ name: \"root\", obj: {}, nodeObj: {}, childs: {} }];\n  self.lastNodeAdded; // Undefined reference\n\n  self.addNode = function (name, obj) {\n    var OBJ = JSON.encode(obj);\n    var foundObjChildNode = _search(name, OBJ);\n    if (foundObjChildNode) {\n      var lastNode = self.lastNodeAdded || self.list[self.list.length - 1];\n      lastNode.nodeObj.addChild(foundObjChildNode.nodeObj);\n      self.lastNodeAdded = foundObjChildNode;\n    } else {\n      var node = new _addNode(name, OBJ);\n      self.list.push({\n        name: name,\n        obj: OBJ,\n        nodeObj: node,\n        timeStamp: new Date().getTime() });\n\n      return node;\n    }\n  };\n\n  self.resolve = function (node, resolved, seen) {\n    // if dont setted node variable, take the first one -> root\n    node = node || _getFirstNodeWithChilds() || self.list[0].nodeObj;\n    var resolveDependencies = new _resolve(node, resolved, seen);\n    return resolveDependencies;\n  };\n\n  var _resetList = function _resetList() {\n    self.list = [];\n  };\n\n  var _getFirstNodeWithChilds = function _getFirstNodeWithChilds() {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].nodeObj.childs.length > 0) {\n        return self.list[i].nodeObj;\n      }\n    }\n    return self.list.length > 0 ? self.list[0].nodeObj : {};\n  };\n\n  var _search = function _search(name, obj) {\n    for (var i = 0; i < self.list.length; i++) {\n      if (self.list[i].name == name) {\n        // remove tag element\n        var now = new Date().getTime();\n        var timeToKeep = 1000; //milliseconds\n        if (self.list[i].timeStamp + timeToKeep < now) {\n          //remove element from the list\n          self.list.splice(i, 1);\n        } else if (self.list[i].obj == obj) {\n          return self.list[i];\n        }\n      }\n    }\n    return false;\n  };\n\n  var _addNode = function (name, obj) {\n    name = name || \"\";\n    obj = obj || {};\n    var node = function node(name, obj) {\n      this.name = name;\n      this.obj = obj;\n      this.childs = [];\n    };\n    var self = node.prototype;\n\n    self.addChild = function (node) {\n      this.childs.push(node);\n    };\n\n    return node;\n  }();\n\n  var _resolve = function (node, resolved, seen) {\n    var resolve = function resolve(node, resolved, seen) {\n      this.node = node || {};\n      this.node.childs = this.node.childs || [];\n      this.resolved = resolved || [];\n      this.seen = seen || [];\n\n      this.seen.push(this.node);\n\n      for (var i = 0; i < this.node.childs.length; i++) {\n        if (!self.hasObject(this.node.childs[i], this.resolved)) {\n          if (self.hasObject(this.node.childs[i], this.seen)) {\n            //throw new _error(\"error node:\" + node.name + \" -> \" + node.childs[i].name);\n            _resetList();\n            var error = {\n              dependencyFrom: this.node.name,\n              dependencyFromObj: this.node.obj,\n              dependencyTo: this.node.childs[i].name,\n              dependencyToObj: this.node.childs[i].obj,\n              path: this.seen };\n\n\n            return {\n              error: $.extend({\n                standardError: {\n                  status: \"error\",\n                  responseText: JSON.encode({ message: self.makeErrorMessage(error), type: \"alert\" }) },\n\n                multiactionError: {\n                  message: self.makeErrorMessage(error),\n                  type: \"alert\" } },\n\n              error) };\n\n          } else {\n            return resolve(this.node.childs[i], this.resolved, this.seen);\n          }\n        }\n      }\n      if (this.resolved) {\n        this.resolved.push(this.node);\n      }\n    };\n\n    var self = resolve.prototype;\n\n    self.hasObject = function (toSearch, collection) {\n\n      for (var i = 0; i < collection.length; i++) {\n        if (collection[i].name == toSearch.name) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    self.makeErrorMessage = function (error) {\n      var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n      return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n\n      /*  return {\r\n                                                                                  responseText: parsedMessage,\r\n                                                                                  message: parsedMessage,\r\n                                                                                  extraInfo: error\r\n                                                                              };*/\n    };\n\n    return resolve;\n  }();\n\n  return self;\n};\n\n/**\r\n    * Apply css string style (one or more). It works to add or override a specific style even if it has !important\r\n    * \r\n    * @example bizagi.util.cssExtended($('.myClass'), 'display:none!important;color:red');\r\n    * \r\n    */\nbizagi.util.cssExtended = function (instance, options) {\n  var cssToAdd = options.split(\";\");\n\n  for (i = 0; i < cssToAdd.length; i++) {\n    if (cssToAdd[i] != \"\") {\n      bizagi.util.cssExtendedApplyChanges(instance, cssToAdd[i]);\n    }\n  }\n\n};\n\n/**\r\n    * Apply the style change \r\n    * \r\n    */\nbizagi.util.cssExtendedApplyChanges = function (instance, option) {\n\n  for (var i = 0; i < instance.length; i++) {\n    var $this = $(instance[i]);\n    var attrToAdd = option.split(\":\")[0];\n\n    if ($this.attr('style')) {\n      var tmpStyle = $this.attr('style').split(\";\");\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      for (j = 0; j < tmpStyle.length; j++) {\n        var cssProperty = tmpStyle[j].split(\":\");\n\n        if ($.trim(cssProperty[0]) != attrToAdd && $.trim(cssProperty[0]) != \"\") {\n          arrProperties.push(cssProperty[0] + \":\" + cssProperty[1] + \";\");\n        }\n        resultProperties = JSON.stringify(arrProperties).replace(/\\\",\"/g, ' ').replace(/\\[\"/g, ' ').replace(/\\\"]/g, ' ');\n      }\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    } else if ($this.css(attrToAdd)) {\n      var tmpStyle = $this.css(attrToAdd);\n      var arrProperties = [];\n      var resultProperties = \"\";\n\n      arrProperties.push(option + \";\");\n\n      resultProperties = resultProperties == \"[]\" ? \"\" : resultProperties;\n\n      $this.attr('style', resultProperties + option + \";\");\n    }\n  }\n};\n\n/*\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n    * Sort a JSON array by attribute and order type (ascendant or descendant)\r\n    * example: data = [ {attr1:val1, attr2:val2} , {attr1:val3, attr2:val4 },... ]  , key = \"attr2\" , way = \"asc\"\r\n    */\nbizagi.util.sortJSON = function (data, key, way) {\n  return data.sort(function (a, b) {\n    var x = a[key];\n    var y = b[key];\n    if (way === 'asc') {\n      return x < y ? -1 : x > y ? 1 : 0;\n    }\n    if (way === 'desc') {\n      return x > y ? -1 : x < y ? 1 : 0;\n    }\n  });\n};\n\n/*\r\n    * Reducir formato numrico a notacin abrevidad (K:1000 - M:1000000 - B:1000000000)\r\n    */\nbizagi.util.shortNumber = function (number) {\n  var newNumber = number.toString();\n  var lenghtNumber = newNumber.length;\n\n  if (lenghtNumber >= 4 && lenghtNumber < 7) {\n    newNumber = '+' + newNumber.charAt(0) + 'K';\n  } else if (lenghtNumber >= 7 && lenghtNumber < 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'M';\n  } else if (lenghtNumber >= 10) {\n    newNumber = '+' + newNumber.charAt(0) + 'B';\n  }\n\n  return '&nbsp;&nbsp;&nbsp;' + newNumber;\n};\n\n/*\r\n    * Aplicar formato salto de linea\r\n    */\nbizagi.util.replaceLineBreak = function (string) {\n  return typeof string === \"string\" ? string.replace(/\\r\\n|\\r|\\n|<br>|<br\\/>/g, \"<br/>\") : string;\n};\n\n// http://shebang.brandonmintern.com/foolproof-html-escaping-in-javascript/\nbizagi.util.escapeHtml = function (str) {\n  var div = document.createElement('div');\n  div.appendChild(document.createTextNode(str));\n  return div.innerHTML;\n};\n\n/*\r\n    * Aplicar formato Tipo moneda\r\n    */\nbizagi.util.formatMonetaryCell = function (value) {\n  return bizagi.util.formatMonetaryValue(value);\n};\n\n/*\r\n    * Aplicar formato tipo decimal\r\n    */\nbizagi.util.formatDecimalCell = function (value) {\n  return bizagi.util.formatDecimalValue(value);\n};\n\n/**\r\n    * Add format to date value\r\n    */\nbizagi.util.formatDateValue = function (value) {\n  return bizagi.util.formatDateFromInvariantStringDate(value);\n};\n\n/**\r\n    * Add format to money value\r\n    * @param value\r\n    * @returns {*|string|string}\r\n    */\nbizagi.util.formatMonetaryValue = function (value) {\n  return bizagi.util.formatMoney(value, BIZAGI_DEFAULT_CURRENCY_INFO);\n};\n\n/**\r\n    * Add format for decimal value\r\n    * @param value\r\n    * @returns {*}\r\n    */\nbizagi.util.formatDecimalValue = function (value) {\n  var decimalFormat;\n  var externalDecimalFormat = {\n    decimalSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator,\n    digitGroupSymbol: BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator,\n    roundToDecimalPlace: BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits };\n\n  var defaultDecimalFormat = {\n    colorize: false,\n    decimalSymbol: \".\",\n    digitGroupSymbol: \",\",\n    groupDigits: true,\n    negativeFormat: \"(%s%n)\",\n    positiveFormat: \"%s%n\",\n    roundToDecimalPlace: \"2\",\n    symbol: \"\" };\n\n  decimalFormat = $.extend(defaultDecimalFormat, externalDecimalFormat);\n  var numberValue = bizagi.util.formatDecimal(value, decimalFormat);\n  if (bizagi.override.removeTrailingZeros === true) {\n    var positive = true;\n    if (numberValue.toString().indexOf(\")\") != -1) {\n      positive = false;\n      numberValue = numberValue.replace(\"(\", \"\").replace(\")\", \"\");\n    }\n    var re = new RegExp(\"(\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"\\\\d*?[1-9])0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"$1\");\n    re = new RegExp(\"\\\\\" + BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator + \"0+$\", \"g\");\n    numberValue = numberValue.replace(re, \"\");\n\n\n    if (!positive) numberValue = \"(\" + numberValue + \")\";\n  }\n  return numberValue;\n};\n\n/*\r\n    * Crea notificacion de corta duracion, principalmente uilizada en para los procesos offline\r\n    */\nbizagi.util.showNotification = function (params) {\n  var params = params || {};\n  var div_sync = $('<div id=\"sync-notification\" class=\"bz-cm-icon\"></div>').text(params.text || \"\");\n  div_sync.appendTo($('body'));\n  div_sync.fadeIn(1500, function () {\n    div_sync.stop();\n  });\n\n  div_sync.fadeOut(2000, function () {\n    div_sync.remove();\n  });\n};\n\n/*\r\n    * Verificar el estado de la conexin\r\n    */\nbizagi.util.isModeOnline = function () {\n  return typeof bizagi.context.isOfflineForm !== \"undefined\" && !bizagi.context.isOfflineForm;\n};\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {\n        significantFlag = true;\n        from = i;\n      } else {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {\n        significantFlag = true;\n        to = j + 1;\n      } else {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n\n    } else {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else {return '';}\n};\n\n/**\r\n    * Remove all backslashes that represent scape of characters\r\n    */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/*\r\n    * Validates if the text is a valid opening and closing tags, including classes\r\n    */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\nbizagi.util.resetData = function () {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, { isAuthenticate: \"false\" });\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\nbizagi.util.changeData = function (params) {\n  var obj = JSON.parse(sessionStorage.getItem(\"bizagiAuthentication\"));\n  sessionStorage.removeItem(\"bizagiAuthentication\");\n  $.extend(obj, params);\n  sessionStorage.setItem(\"bizagiAuthentication\", JSON.encode(obj));\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR MOBILE DEVICE\n// ------------------------------------------------------------------------\n\nbizagi.util.isMobileDevice = function (device) {\n  device = device || bizagi.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\",\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Check is native mobile device\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeMobileDevice = function (device) {\n  return bizagi.util.isMobileDevice(device) && bizagi.util.isNativePluginSupported();\n};\n\n/** \r\n    * Verify mobile device type\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"tablet\",\n  \"tablet_ios\",\n  \"tablet_ios_native\",\n  \"tablet_android\",\n  \"tablet_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Tablet android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Tablet iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSTabletDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isTabletDevice() && !(device.indexOf(\"android\") === -1);\n};\n\n\n/**\r\n    * Verify mobile device type\r\n    * @returns {}\r\n    */\nbizagi.util.isSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return [\n  \"smartphone_ios\",\n  \"smartphone_ios_native\",\n  \"smartphone_android\",\n  \"smartphone_android_native\"].\n  indexOf(device) > -1;\n};\n\n/**\r\n    * Smartphone android\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroidSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"android\") !== -1;\n};\n\n/**\r\n    * Smartphone iOS\r\n    * @returns {} \r\n    */\nbizagi.util.isiOSSmartphoneDevice = function (device) {\n  device = device || bizagi.util.detectDevice();\n\n  return bizagi.util.isSmartphoneDevice() && device.indexOf(\"ios\") !== -1;\n};\n\n/**\r\n    * Check is offline form\r\n    * @param {} container \r\n    * @returns {} \r\n    */\nbizagi.util.isOfflineForm = function (params) {\n  if (!bizagi.util.isMobileDevice() || typeof params === \"undefined\")\n  return false;\n\n  var context = params.context || null;\n  var container = params.container || null;\n\n  var formContainer = container !== null ?\n  container : context !== null ? context.getFormContainer() : null;\n\n  if (formContainer === null)\n  return false;\n\n  var formParams = formContainer.getParams() || {};\n  var isOfflineForm = typeof formParams.isOfflineForm !== \"undefined\" &&\n  bizagi.util.parseBoolean(formParams.isOfflineForm);\n\n  return isOfflineForm;\n};\n\nbizagi.util.detectAndroidVersion = function () {\n  var indexAndroid = navigator.userAgent.toLowerCase().indexOf(\"android\");\n  var androidVersion = navigator.userAgent.toLowerCase().substring(indexAndroid + 8, indexAndroid + 13);\n  androidVersion = androidVersion.replaceAll(\".\", \"\");\n  return Number(androidVersion);\n};\n\nbizagi.util.getPathUrl = function (url) {\n  var solvedUrl = \"\";\n  var locationParts = location.pathname.split(\"/\");\n  var basePath = location.protocol + \"//\" + location.host;\n\n  if (BIZAGI_PATH_TO_BASE[0] == \"/\") {\n    solvedUrl = basePath + BIZAGI_PATH_TO_BASE + url;\n  } else {\n    var pathToBaseBackwards = BIZAGI_PATH_TO_BASE.split(\"../\").length;\n    for (var i = 0, l = locationParts.length; i < l - pathToBaseBackwards; i++) {\n      basePath += locationParts[i] + \"/\";\n    }\n\n    basePath = basePath[basePath.length - 1] === \"/\" ? basePath : basePath + \"/\";\n    solvedUrl = basePath + url;\n  }\n  return solvedUrl;\n};\n\n/**\r\n    * Get Android version\r\n    * @returns {} \r\n    */\nbizagi.util.getAndroidVersion = function () {\n  var userAgent = navigator.userAgent.toLowerCase();\n  var match = userAgent.match(/android\\s([0-9\\.]*)/);\n\n  return match ? parseFloat(match[1]) : false;\n};\n\n/**\r\n    * Get image path to android device\r\n    * @param {} image \r\n    * @returns {} \r\n    */\nbizagi.util.mobileImagePath = function (image) {\n  var dataImage = image;\n  var version = bizagi.util.getAndroidVersion();\n\n  if (!version)\n  return dataImage;\n\n  if (dataImage.substring(0, 21) === \"content://com.android\" && version <= 4.4) {\n    var photoSplit = dataImage.split(\"%3A\");\n    if (photoSplit.length > 1) {\n      dataImage = \"content://media/external/images/media/\" + photoSplit[1];\n    } else {\n      photoSplit = dataImage.split(\"/\");\n      dataImage = \"content://media/external/images/media/\" + photoSplit[photoSplit.length - 1];\n    }\n  }\n\n  return dataImage;\n};\n\n/**\r\n    * Validate resource \r\n    * @param {} resource resource name\r\n    * @returns {} \r\n    */\nbizagi.util.isValidResource = function (resource) {\n  if (!bizagi.localization) return false;\n  return bizagi.localization.getResource(resource) !== resource;\n};\n\n/***\r\n    * Transform base64 image to blob\r\n    * @b64Data \r\n    * @contentType \r\n    * @sliceSize \r\n    */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\n/**\r\n    * Converts an string to a byte array, util in old browsers requests\r\n    * @param str\r\n    */\nbizagi.util.stringToByteArray = function (str) {\n  var byteArray = new Uint8Array(str.length);\n  for (var i = 0; i < str.length; i++) {\n    byteArray[i] = str.charCodeAt(i) & 0xff;\n  }\n  return byteArray;\n};\n\n// ------------------------------------------------------------------------\n// NATIVE-HYBRID ENVIRONMENT\n// ------------------------------------------------------------------------\n\n/** \r\n * Verify the offline forms is enabled\r\n * @returns {} \r\n */\nbizagi.util.hasOfflineFormsEnabled = function () {\n  return typeof BIZAGI_ENABLE_OFFLINE_FORMS !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_OFFLINE_FORMS) === true;\n};\n\n/**\r\n    * \r\n    * Verify the flat design is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isFlatDesignEnabled = function () {\n  return typeof BIZAGI_ENABLE_FLAT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_FLAT) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isMobileGridEnabled = function () {\n  return typeof BIZAGI_ENABLE_MOBILE_GRID !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_MOBILE_GRID) === true;\n};\n\n/**\r\n    * Validate the mobile grid is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeHeaderEnabled = function () {\n  return typeof NATIVE_HEADER_ENABLE !== \"undefined\" && bizagi.util.parseBoolean(NATIVE_HEADER_ENABLE) === true;\n};\n\n/**\r\n    * Validate the Quick search is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isQuickSearchEnabled = function () {\n  return typeof BIZAGI_ENABLE_QUICK_SEARCH !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_ENABLE_QUICK_SEARCH) === true;\n};\n\n/** \r\n    * Verify the OAuth2 is enabled\r\n    * @returns {} \r\n    */\nbizagi.util.isOAuth2Enabled = function () {\n  return typeof BIZAGI_AUTH_TYPE !== \"undefined\" && BIZAGI_AUTH_TYPE === \"OAuth\";\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.getNativeComponent = function () {\n  return typeof BIZAGI_NATIVE_COMPONENT !== \"undefined\" ? BIZAGI_NATIVE_COMPONENT : \"\";\n};\n\n/**\r\n    * Check server version\r\n    * @returns {}\r\n    */\nbizagi.util.isVersionSupported = function () {\n  var supported = true;\n\n  if (typeof BIZAGI_SERVER_VERSION !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_VERSION)) {\n    var version = BIZAGI_SERVER_VERSION.match(/\\d+\\.\\d+/);\n    supported = version ? parseFloat(version.shift()) >= 11.0 : true;\n  }\n\n  return supported;\n};\n\n/**\r\n    * Cordova componet is supported\r\n    * @returns {} \r\n    */\nbizagi.util.isCordovaSupported = function () {\n  return typeof cordova !== \"undefined\";\n};\n\n/**\r\n    * Native plugin of Cordova is supported \r\n    * @returns {} \r\n    */\nbizagi.util.isNativePluginSupported = function () {\n  return typeof bizagiapp !== \"undefined\";\n};\n\n/**\r\n    * Tablet native\r\n    * @returns {} \r\n    */\nbizagi.util.isTabletNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Smartphone native\r\n    * @returns {} \r\n    */\nbizagi.util.isSmartphoneNativeSupported = function () {\n  return typeof bizagiapp !== \"undefined\" && bizagi.util.isSmartphoneDevice();\n};\n\n/**\r\n    * Enables accesory bar\r\n    */\nif (bizagi.util.isNativePluginSupported() && window.cordova && window.cordova.plugins.Keyboard) {\n  cordova.plugins.Keyboard.hideKeyboardAccessoryBar(false);\n};\n\n/**\r\n    * Verify real device\r\n    * @returns {} \r\n    */\nbizagi.util.detectRealDevice = function () {\n  var settedDevice = typeof BIZAGI_DEFAULT_DEVICE !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEFAULT_DEVICE) ?\n  BIZAGI_DEFAULT_DEVICE : null;\n\n  BIZAGI_DEFAULT_DEVICE = \"\";\n  var device = bizagi.detectDevice();\n  BIZAGI_DEFAULT_DEVICE = settedDevice;\n\n  return device;\n};\n\n/**\r\n    * Method to detect Android visitors\r\n    * @returns {} \r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\nbizagi.util.isAndroidDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") > -1;\n};\n\nbizagi.util.isiOSDevice = function () {\n  var device = bizagi.util.detectDevice();\n  return device.indexOf(\"android\") === -1;\n};\n\n\n/**\r\n    * Get server channel\r\n    * @returns {}\r\n    */\nbizagi.util.getChannelType = function () {\n  if (typeof BIZAGI_SERVER_CHANNEL !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_SERVER_CHANNEL)) {\n    return BIZAGI_SERVER_CHANNEL;\n  }\n  return bizagi.loader.channel || \"\";\n};\n\n/**\r\n    * Check data url\r\n    * @param {} data \r\n    * @returns {} \r\n    */\nbizagi.util.isDataUrl = function (data) {\n  var regex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i;\n\n  try {\n    return !!data.toString().match(regex);\n  } catch (error) {}\n\n  return false;\n};\n\n/**\r\n    * Get valid data url\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\n/**\r\n    * Get response message of services\r\n    * @param {} data\r\n    * @returns {}\r\n    */\nbizagi.util.processFailMessage = function (data) {\n  var message = data || {};\n\n  try {\n    message = typeof message == \"string\" ? JSON.parse(message) : message;\n    message = message.responseText || message.message || message;\n  } catch (e) {\n    message = data;\n  }\n\n  return message;\n};\n\n/**\r\n    * Get object jSON\r\n    */\nbizagi.util.getErrorFormatted = function (str) {\n  var error = str;\n\n  if (!error) return str;\n\n  if (typeof error == \"string\") {\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n      error = {\n        type: \"error\",\n        code: \"code\",\n        message: str };\n\n    }\n  }\n\n  if (_typeof(error) == \"object\" && (error.message || error.statusText)) {\n    return {\n      type: error.type || \"error\",\n      code: error.code || error.errorCode || error.errorType || error.statusText || \"code\",\n      message: error.message };\n\n  } else {\n    if (error && error.length && error.length >= 1) error = error[0];\n    if (error.responseText) error = error.responseText;\n    if (error.error) error = error.error;\n  }\n\n  return bizagi.util.getErrorFormatted(error);\n};\n/**\r\n    * Disable and enable workportal menu from live process\r\n    */\nvar tmp_block_header = \"<div class='blockHeaderByLiveProcess'></div>\";\nbizagi.util.disableWorkPortalMenu = function () {\n  var blockHeight = $(\"body\").find(\"#ui-bizagi-wp-menu\").height();\n  $(tmp_block_header).prependTo(\"body\");\n  $(\"body\").find(\".blockHeaderByLiveProcess\").css({ \"position\": \"absolute\", \"width\": \"100%\", \"height\": blockHeight + \"px\", \"background\": \"gray\", \"opacity\": \"0.9\", \"z-index\": \"101\" });\n};\n\nbizagi.util.enableWorkPortalMenu = function () {\n  $(\"body\").find(\".blockHeaderByLiveProcess\").detach();\n};\n\n/**\r\n    * this method activates the section of the menu that is sent in the idMenu variable\r\n    */\nbizagi.util.enableMenuSection = function (idMenu) {\n  var menu = new bizagi.workportal.controllers.menu();\n  menu.setActiveSection.apply($(\"#main_menu li#\" + idMenu)[0]);\n};\n\nbizagi.util.getURLWithASlashAtTheEnd = function (url) {\n  var getLastChar = function getLastChar(stringValue) {\n    return stringValue.substr(stringValue.length - 1);\n  };\n  return getLastChar(url) === '/' ? url : url + '/';\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a file\r\n    * validate if the Maintenance Window has started and redirect the user\r\n    * validate if an error is returned\r\n    * rejects defer on download fails\r\n    * IMPORTANT: defer never resolves (technical restriction)\r\n    * @param {String} url \r\n    * @param {Boolean} isCompleteUrl \r\n    * @param {Boolean} showModalOnFail \r\n    */\nbizagi.util.downloadFile = function (url, isCompleteUrl, showModalOnFail) {\n  var _defer = new $.Deferred(),\n  _showModalOnFail = showModalOnFail === undefined ? true : showModalOnFail,\n  _firstURlPart = isCompleteUrl ? \"\" : bizagi.util.getURLWithASlashAtTheEnd(bizagiConfig.applicationUrl),\n  _urlDownload = _firstURlPart + url,\n  _iframeID = \"iframe-download\",\n  _iframeExists = $('#' + _iframeID).length !== 0,\n  _reject = function _reject(jsonResponse, showModal) {\n    if (showModal)\n    bizagi.modalError.show(jsonResponse.message, undefined, false);\n    _defer.reject(jsonResponse);\n  },\n  _onCantDownload = function _onCantDownload() {\n    var that = $(this)[0],\n    defaultMessage = bizagi.localization.getResource(\"workportal-general-error-message-contact-administrator\"),\n    text = bizagi.util.tryCatch(\n    function () {return $(that.contentDocument).text();},\n    defaultMessage),\n\n    isMaintenanceWindow = text.indexOf(\"HTTP Error 503\") !== -1,\n    jsonResponse = bizagi.util.tryCatch(\n    function () {return JSON.parse(text);},\n    {\n      code: \"error\",\n      status: \"error\",\n      message: text === \"\" ? defaultMessage : text }),\n\n\n    showModal = _showModalOnFail && !isMaintenanceWindow;\n    if (isMaintenanceWindow)\n    bizagiConfig.maintenanceWindows.start();\n    _reject(jsonResponse, showModal);\n  },\n  _createIframe = function _createIframe() {\n    var iframe = $(\"<iframe/>\");\n    iframe.attr({\n      style: \"visibility:hidden;display:none\",\n      id: _iframeID }).\n\n    appendTo('body');\n    iframe[0].onload = _onCantDownload;\n  };\n\n  if (!_iframeExists)\n  _createIframe();\n  $('#' + _iframeID).attr(\"src\", _urlDownload);\n  return _defer;\n};\n\n/**\r\n    * create an Iframe if doesn't exist for download a excel file\r\n    * @param {String} url \r\n    * @param {} params \r\n    */\nbizagi.util.downloadFileByPOST = function (url, params) {\n  if ($('#iframe-download').length !== 0) {//If the iframe already exists, remove it\n    $('#iframe-download').remove();\n  }\n\n  $(\"<iframe/>\").attr({\n    style: \"visibility:hidden;display:none\",\n    id: \"iframe-download\" }).\n  appendTo('body');\n\n  var inputValues = \"\";\n  for (var i = 0; i < params.length; i++) {\n    inputValues = inputValues + \"<input type='text' name='\" + params[i].name + \"' value='\" + params[i].value + \"'>\";\n  }\n\n  var formPOST = \"<form id='formPOST' action='\" + url + \"' method='POST'>\" +\n  inputValues +\n  \"</form>\";\n\n  $('#iframe-download').contents().find(\"body\").append(formPOST);\n  if (bizagi.util.isIE11()) {\n    bizagi.showErrorAlertDialog = false;\n    $.ajax({ type: \"POST\",\n      url: url,\n      data: params,\n      dataType: 'text' }).\n    then(function () {\n      $(\"#formPOST\", $('#iframe-download').contents()).submit();\n    });\n  } else {\n    $(\"#formPOST\", $('#iframe-download').contents()).submit();\n  }\n};\n\nbizagi.util.executeActionRoutingFromWorkportal = function (idCase, idWorkItem) {\n  bizagi.workportal.controllers.menu.prototype.publish(\"executeAction\", {\n    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\n    idCase: idCase,\n    idWorkItem: idWorkItem });\n\n};\n\n/**\r\n   * Gets the final message when the user is offline or online (In Offline forms)\r\n   * @param {} state \r\n   * @returns {} The corresponding message depending on the case\r\n   */\n\nbizagi.util.getMessageFromNetworkState = function (state) {\n  if (state) {\n    return bizagi.localization.getResource(\"render-without-globalform-offline-userOnline\", \"The case has been created successfully, please wait until the server synchronizes\");\n  } else {\n    return bizagi.localization.getResource(\"render-without-globalform-offline\", \"Your offline case has been created successfully. It will synchronized as soon as you go online.\");\n  }\n};\n\n/**\r\n    * DOMPurify sanitizes HTML and prevents XSS attacks\r\n    * @param str\r\n    * @returns {null|*|string}\r\n    */\nbizagi.util.sanitizeHTML = function (str) {\n  var value = typeof str !== \"undefined\" && str !== null ? str.toString() : str;\n  var sanified = DOMPurify.sanitize(value);\n  var decode = document.createElement(\"div\");\n\n  decode.innerHTML = sanified;\n\n  return decode.childNodes.length === 0 ? \"\" : String(decode.childNodes[0].nodeValue);\n};\n\nbizagi.util.arrayUnique = function (array) {\n  var items = array.concat();\n\n  for (var i = 0, length = items.length; i < length; ++i) {\n    for (var j = i + 1; j < length; ++j) {\n      if (items[i] === items[j]) {\n        items.splice(j -= 1, 1);\n      }\n\n    }\n  }\n\n  return items;\n};\n\n\n/**\r\n    * Debounce\r\n    * Taken from https://davidwalsh.name/javascript-debounce-function\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce = function (func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n};\n\n/**\r\n    * Return a function, that, as long as it continues to be invoked, will\r\n    * not be triggered. The function will be called after it stops being\r\n    * called for 'wait' milliseconds. If 'immediate' is passed, trigger the\r\n    * function on the leading edge, instead of the trailing.\r\n    * @param {} func\r\n    * @param {} wait\r\n    * @param {} immediate\r\n    * @returns {}\r\n    */\nbizagi.util.debounce2 = function (func, wait, immediate) {\n  var self = this;\n  var timeout;\n  var fn = function fn() {\n    var context = this,\n    args = arguments;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait || 200);\n    if (callNow) {\n      return func.apply(context, args);\n    }\n  };\n  return {\n    timeout: timeout,\n    cancel: function cancel() {\n      clearTimeout(timeout);\n    },\n    fire: function fire() {\n      fn.call(self, arguments);\n    } };\n\n};\n\n/**\r\n    * Validate if the mobile image editor is enabled\r\n    * @returns {}\r\n    */\nbizagi.util.isNativeImageEditorSupported = function () {\n  return bizagi.util.isNativePluginSupported() && bizagi.util.isiOSDevice() && bizagi.override.enableImageEditor;\n};\n/**\r\n    * Error Message\r\n    */\nbizagi.util.errorMessage = function (message) {\n  return \"<div class=\\\"admin-stakeholder-message\\\"> \" +\n  \"<i class=\\\"bz-wp-empty__img\\\"></i> \" +\n  \"<p class=\\\"bz-wp-empty__info bz-wp-empty__info--first\\\"> \" +\n  message +\n  \"</p></div>\";\n};\n\n\n/**\r\n    * Validate URL \r\n    */\nbizagi.util.validateUrlWellFormed = function (url) {\n  var patternToValidateUrl = /^((http|https|ftp):\\/\\/)/,\n  urlWithProtocol = patternToValidateUrl.test(url) ? url : \"http://\" + url,\n  nodeWithUrl = document.createElement('a');\n  nodeWithUrl.setAttribute('href', urlWithProtocol);\n  var cleanNodeWithUrl = DOMPurify.sanitize(nodeWithUrl, { IN_PLACE: true }),\n  urlWithoutSpaces = url ? url.replace(/ /g, \"\") : \"\";\n  return bizagi.util.isEmpty(urlWithoutSpaces) ? null : cleanNodeWithUrl.href;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @param data\r\n    * @returns {string}\r\n    */\nbizagi.util.encodeHtmlText = function (data) {\n  var value = data || \"\";\n  var valueToDisplay = \"\";\n\n  if (typeof value === \"string\") {\n    var decodedDisplayValue = bizagi.util.decodeURI(value);\n\n    valueToDisplay = bizagi.util.encodeString(decodedDisplayValue);\n  }\n\n  return valueToDisplay;\n};\n\n/**\r\n    * Replace line breaks for html line breaks\r\n    * @returns {string}\r\n    * @param str\r\n    */\nbizagi.util.encodeString = function (str) {\n  var result = str || \"\";\n\n  result = result.replaceAll(\"&\", \"&amp;\");\n  result = result.replaceAll(\"$\", \"&#36;\");\n  result = result.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  result = result.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\n  result = result.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1<br />$2\");\n\n  return result;\n};\n\n/**\r\n    * Set Caret position \r\n    * Set the caret in specific position of an element type input\r\n    * @param {} func, position, input element \r\n    * @returns {} The function not return any value.\r\n    */\nbizagi.util.setCaretPosition = function (pos, ctrl) {\n  var self = this;\n\n  // Modern browsers\n  if (ctrl.setSelectionRange) {\n    ctrl.focus();\n    ctrl.setSelectionRange(pos, pos);\n\n    // IE8 and below\n  } else if (ctrl.createTextRange) {\n    var range = ctrl.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', pos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n};\n\n\n/**\r\n    * Get position of caret\r\n    * Get the position of caret in a specific element input\r\n    * @param {} func, input element \r\n    * @returns {} Return the position of caret in an element input\r\n    */\nbizagi.util.getCaretPosition = function (oField) {\n\n  // Initialize\n  var iCaretPos = 0;\n\n  // IE Support\n  if (document.selection) {\n\n    // Set focus on the element\n    oField.focus();\n\n    // To get cursor position, get empty selection range\n    var oSel = document.selection.createRange();\n\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart || oField.selectionStart == '0') // Firefox support\n    iCaretPos = oField.selectionStart;\n\n  // Return results\n  return iCaretPos;\n};\n\n/**\r\n    * To escape values\r\n    * @param {} value \r\n    * @returns {} \r\n    */\nbizagi.util.escapeRegex = function (value) {\n  value = value || \"\";\n\n  return value.replace(/([\\^\\$\\(\\)\\[\\]\\{\\}\\*\\.\\+\\?\\|\\\\])/gi, \"\\\\$1\");\n};\n\n/**\r\n    * Function to get a featureObject by path within the global bizagiConfig.features object. Example: \"userService.v1.enabled\"\r\n    */\nbizagi.util.getFeatureObject = function (path) {\n  var arr = path.split('.');\n  this.featureObjectCache = this.featureObjectCache || {};\n\n  function getFeatureObjectIte(arr) {\n    var features = bizagi.util.getConfigFeatures();\n\n    if (typeof path !== \"string\" || typeof features == \"undefined\") return;\n\n    var pivot = features;\n    for (var i = 0, len = arr.length; i < len; i++) {\n      pivot = pivot[arr[i]];\n      if (typeof pivot === \"undefined\") return;\n    }\n    return pivot;\n  };\n  if (path in this.featureObjectCache) {\n    return this.featureObjectCache[path];\n  } else {\n    return this.featureObjectCache[path] = getFeatureObjectIte(arr);\n  }\n};\n\n/**\r\n    * Load features from mobile\r\n    */\nbizagi.util.getConfigFeatures = function () {\n  var bizagiConfiguration = window.bizagiConfig || bizagiConfig || {};\n\n  if (bizagi.util.isMobileDevice() && typeof BIZAGI_MOBILE_FEATURES !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_MOBILE_FEATURES)) {\n    bizagiConfiguration.features = JSON.parse(BIZAGI_MOBILE_FEATURES || \"{}\");\n  }\n\n  return bizagiConfiguration.features;\n};\n\n/**\r\n    * Reset features flag\r\n    */\nbizagi.util.resetConfigFeatures = function () {\n  bizagi.util.featureObjectCache = undefined;\n};\n\n/**\r\n    * Check fail request\r\n    * @param result\r\n    * @returns {*|boolean}\r\n    */\nbizagi.util.isFailResponse = function (result) {\n  return result && (result.type && result.type === \"error\" || result.status && result.status === \"error\" || result.code && result.code === \"UNKNOWN_ERROR\");\n};\n\n/**\r\n    * Formats value of each item\r\n    * @param {string, boolean or array} value\r\n    * @example\r\n    * value = \"string\" => \"string\"\r\n    * value = true => \"yes\" or \"si\", the localized value\r\n    * value = false => \"no\", the localized value\r\n    * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n    * @returns {string}\r\n    */\nbizagi.util.formatItem = function (value) {\n  if (value !== undefined && value !== null) {\n    if ($.isArray(value)) {\n\n      for (var i = 0, length = value.length; i < length; i++) {\n        if (value[i] != null && typeof value[i] == \"boolean\") {\n          if (bizagi.util.parseBoolean(value[i]) === true) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n\n          } else if (bizagi.util.parseBoolean(value[i]) === false) {\n            value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n          }\n        }\n        value[i] = bizagi.util.sanitizeHTML(value[i]);\n      }\n\n      return value.join(\" - \");\n    } else {\n      return bizagi.util.sanitizeHTML(value);\n    }\n  } else {\n    return \"\";\n  }\n};\n\n\n/**\r\n    * Process response matches\r\n    * @param {} strValue\r\n    * @param term\r\n    * @param withoutFormat\r\n    * @returns {}\r\n    */\nbizagi.util.performTermMatches = function (strValue, term, withoutFormat) {\n  var parseValue;\n\n  if (_typeof(strValue) === \"object\") {\n    parseValue = bizagi.util.formatItem(strValue);\n  } else if (typeof strValue === \"string\") {\n    if (withoutFormat) {\n      parseValue = bizagi.util.sanitizeHTML(strValue);\n    } else {\n      parseValue = bizagi.util.highlightMatches(strValue, term);\n    }\n  } else {\n    parseValue = strValue;\n  }\n\n  return parseValue;\n};\n\n/**\r\n    * Process response to highlight matches\r\n    * @param strValue\r\n    * @param term\r\n    * @returns {string}\r\n    */\nbizagi.util.highlightMatches = function (strValue, term) {\n  var data = bizagi.util.escapeRegex(term).replaceAll(\"%\", \"\");\n  var regEx = new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + data + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\");\n\n  return bizagi.util.sanitizeHTML(strValue).replace(regEx, \"<strong>$1</strong>\");\n};\n\n/**\r\n    * Calculate window resolution for Desktop\r\n    * @returns {string}\r\n    */\nbizagi.util.getDesktopResolution = function () {\n  var resolution = \"\";\n  var devicePixelRatio = 1;\n  var screenWidth = window.screen.width;\n  var screenHeight = window.screen.height;\n\n  if ('deviceXDPI' in screen) {\n    devicePixelRatio = screen.deviceXDPI / screen.logicalXDPI;\n  } else if ('devicePixelRatio' in window) {\n    devicePixelRatio = window.devicePixelRatio;\n  }\n\n  devicePixelRatio = Number(devicePixelRatio.toFixed(3));\n\n  if (screenWidth && screenWidth > 0 && screenHeight && screenHeight > 0) {\n    resolution = screenWidth * devicePixelRatio + \"x\" + screenHeight * devicePixelRatio;\n  }\n\n  return resolution;\n};\n\n/**\r\n    * Get the market name for device\r\n    * @returns {*|string}\r\n    */\nbizagi.util.getDeviceCode = function () {\n  var deviceCode = \"\";\n\n  if (bizagi.util.isMobileDevice()) {\n    deviceCode = typeof BIZAGI_DEVICE_MARKET_NAME !== \"undefined\" && !bizagi.util.isEmpty(BIZAGI_DEVICE_MARKET_NAME) ? BIZAGI_DEVICE_MARKET_NAME : \"\";\n  } else {\n    deviceCode = bizagi.util.getDesktopResolution();\n  }\n\n  return deviceCode;\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/smartphone/, '').\n  replace(/tablet/, '').\n  replace(/offline/, '');\n};\n\n/**\r\n    * Get base name of the control\r\n    * @param type\r\n    * @returns {*}\r\n    */\nbizagi.util.normalizeQueryType = function (type) {\n  if (typeof type === \"undefined\") return type;\n\n  return type.\n  replace(/query/, '').\n  toLowerCase();\n};\n\n/**\r\n    * Hide or show the X button in the show dialog method \r\n    * \r\n    */\nbizagi.util.hideOrShowXToCloseDialog = function (dialog, show) {\n  var selector = \".ui-dialog-titlebar-close\";\n  if (show) {\n    $(selector, dialog).show();\n  } else {\n    $(selector, dialog).hide();\n  }\n};\n\n/**\r\n    * review if a feature key is enabled\r\n    * @param {string} feature nombre de la llave del feature\r\n    */\nbizagi.util.isEnableFeature = function (feature) {\n  if (bizagi.features === undefined) bizagi.features = [];\n  return bizagi.features[feature] !== false;\n};\n\n\n/**\r\n    * review if the posibleHtml has html content\r\n    * @param {string} possibleHtml to review\r\n    */\nbizagi.util.isHtml = function (possibleHtml) {\n  return /<[a-z][\\s\\S]*>/i.test(possibleHtml);\n};\n\n/**\r\n    * if the _try function fails the _catch() or _catch value will be executed and returned\r\n    * @param {Function} _try \r\n    * @param {Function | any} _catch \r\n    */\nbizagi.util.tryCatch = function (_try, _catch) {\n  try {\n    return _try();\n  } catch (e) {\n    return typeof _catch === \"function\" ? _catch() : _catch;\n  }\n};\n\n/**\r\n    * keep functions with next and at the end execute all functions are reduced by with method like a pipe using the variable\r\n    */\nbizagi.util.pipe = function (f, listFunctions) {\n  var _listFunctions = listFunctions === undefined ? [] : listFunctions;\n  _listFunctions.push(f);\n\n  return {\n    next: function next(f) {\n      return bizagi.util.pipe(f, _listFunctions);\n    },\n    end: function end(variable) {\n      return _listFunctions.reduce(function (newVar, f) {\n        return f(newVar);\n      }, variable);\n    } };\n\n},\n\n/**\r\n    * A function to get the scrolling parent of an html element.\r\n    */\nfunction ($) {\n\n  var parents = function parents(node, ps) {\n    if (node.parentNode === null) return ps;\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function style(node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function overflow(node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function scroll(node) {\n    return /(auto|scroll)/.test(overflow(node));\n  };\n\n  // Get the closest ancestor element that is scrollable.\n  $.scrollerParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) return;\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) return ps[i];\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n}(jQuery);\n\nbizagi.util.startkendo = function (params) {\n  if (typeof bizagi.kendoMobileApplication === \"undefined\") {\n    bizagi.kendoMobileApplication = new kendo.mobile.Application($(\"body\"), {\n      skin: \"flat\",\n      browserHistory: false,\n      init: function init(e) {\n        kendo.ui.progress($(\".km-flat\"), true);\n        params.started && params.started();\n      } });\n\n\n    bizagi.kendoMobileApplication.bizagiNavigate = function (e, t) {\n      this.navigate(e, t);\n    };\n  } else {\n    params.started && params.started();\n  }\n};\n\n/**\r\n    * Checks if bizagi is running in mashup.\r\n    */\nbizagi.util.isMashupContext = function () {\n  return typeof BIZAGI_MASHUP_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_MASHUP_CONTEXT) === true;\n};\n\n/**\r\n    * Get native component\r\n    * @returns {}\r\n    */\nbizagi.util.isSharepointContext = function () {\n  return typeof BIZAGI_SHAREPOINT_CONTEXT !== \"undefined\" && bizagi.util.parseBoolean(BIZAGI_SHAREPOINT_CONTEXT) === true;\n};\n\n/**\r\n    * Checks if bizagi is running in webpart.\r\n    */\nbizagi.util.isWebpartContext = function () {\n  return typeof isWebpart !== \"undefined\" && bizagi.util.parseBoolean(isWebpart) === true;\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number }\r\n    */\nbizagi.util.startTimeline = function (data) {\n  new bizagi.workportal.widgets.widget().showTimeLine(data);\n};\n\n/**\r\n    * start timeline functionality\r\n    * @param data { radNumber: Number, idCase: Number, isAdhoc: Boolean, idProcess: Number }\r\n    */\nbizagi.util.startGraphicquery = function (data) {\n  new bizagi.workportal.widgets.widget().showGraphicQuery(data);\n};\n\n/**\r\n    * start select user functionality\r\n    */\nbizagi.util.startSelectUser = function () {\n  return function (resolve, reject) {\n    var defer = $.Deferred();\n    new bizagi.workportal.widgets.widget().showSelectUser(defer);\n    defer.done(function (userId, userName, guid) {\n      resolve({\n        userId: userId,\n        userName: userName,\n        guid: guid });\n\n    }).fail(function () {\n      resolve({});\n    });\n  };\n};\n\n/* Checks if a given value with format {id, value} is empty\r\n   * @param value\r\n   * @returns {boolean}\r\n   */\nbizagi.util.isEmptyValue = function (value) {\n  if (value === 0) return false;\n  if (value === undefined || value === null || value === \"\") return true;\n  if (typeof value === \"Array\") return value.length === 0;\n  if (Object.prototype.toString.apply(value) === \"[object Array]\") return value.length === 0;\n\n  if (Object.prototype.toString.apply(value) === \"[object Object]\") {\n    for (var key in value) {\n      if (value.hasOwnProperty(key) && !bizagi.util.isEmptyValue(value[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n// ------------------------------------------------------------------------\n// UTILS FOR LIVE PROCESSES\n// ------------------------------------------------------------------------\n\n/**\r\n * Init refferer Params as an empty object\r\n */\nbizagi.util.initializeReferrerParams = function () {\n  if (!bizagi.referrerParams) {\n    bizagi.referrerParams = {};\n  }\n};\n\n/**\r\n    * Get data to update sidebar\r\n    */\nbizagi.util.getLPQueriesParameters = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.sidebarData;\n};\n\n/**\r\n    * Get selected tree item (Selected process)\r\n    */\nbizagi.util.getLPQueriesSelectedItemFromTree = function () {\n  bizagi.util.initializeReferrerParams();\n  return bizagi.referrerParams.selectedTreeItem;\n};\n\n/**\r\n    * Set data and save \r\n    */\nbizagi.util.setLPQueriesParameters = function (parametersSidebar, tree) {\n  bizagi.util.initializeReferrerParams();\n  bizagi.referrerParams.sidebarData = parametersSidebar;\n  bizagi.referrerParams.selectedTreeItem = tree;\n};\n\n/**\r\n    * Clean data to reset LP Queries component\r\n    */\nbizagi.util.cleanLPQueriesParameters = function () {\n  if (bizagi.referrerParams) {\n    bizagi.referrerParams.sidebarData = null;\n    bizagi.referrerParams.selectedTreeItem = null;\n  }\n};\n\n/**\r\n    * Set referrerParams referrer \r\n    */\nbizagi.util.setLPQueriesReferrer = function () {\n  bizagi.referrerParams.referrer = \"LPQueries\";\n};\n\n/**\r\n    * Check if there is internet connection\r\n    */\nbizagi.util.isConnected = function () {\n  if (bizagi.util.isNativeMobileDevice()) {\n    if (navigator && typeof navigator.connection !== \"undefined\" && typeof Connection !== \"undefined\")\n    return !(navigator.connection.type == Connection.NONE || navigator.connection.type == \"unknown\");\n    return true;\n  } else if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n    return window.navigator ? window.navigator.onLine : true;\n  }\n\n  return true;\n};\n\n/**\r\n    * Check If rendering url is allowed\r\n    * @param request\r\n    * @returns {boolean}\r\n    */\nbizagi.util.isRenderingUrlAllowed = function (request) {\n  var endPoint;\n  //The url Rest/Processes/RecentProcesses and Rest/Processes/OfflineProcessTree should be excluded from the whitelist\n  var whiteList = [\n  \"Rest/(Handlers|Userfields|DocumentTemplates|(Processes(?!/(RecentProcesses|OfflineProcessTree)))|Cases|Authentication|Users)\",\n  \"Api/(Authentication|Entities|Users)\"];\n\n  var url = (request || \"\").\n  replaceAll(\"..\\/\", \"\").\n  replaceAll(\".\\/\", \"\");\n\n  while (endPoint = whiteList.shift()) {\n    var pattern = new RegExp(endPoint, \"i\");\n    if (url.match(pattern) !== null) return true;\n  }\n\n  return false;\n};\n\n/**\r\n    * Captura todos los elementos input de tipo contrasea y aade el icono de ver/ocultar el valor (el icono incluye\r\n    * funcionalidad propia).\r\n    *\r\n    * Para mas informacin ver la aplicacin de esta funcin en los widget de login.\r\n    *\r\n    * - Esta funcin requiere jQuery (variable $) globalmente.\r\n    * - Se aplica generalmente en la funcin render de los widget.\r\n    * - Asegurarse que todos los input de contrasea han sido cargados antes de ejecutar esta funcin, de lo contrario los\r\n    *   nuevos inputs no tendran la funcionalidad de ver/ocultar valor.\r\n    *\r\n    * @param {jQuery | HTMLElement} content\r\n    */\nbizagi.util.applyEyeFunction = function (content) {\n  function setShowIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg  class='eye_show_icon'  xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M15 7.8C14.9 7.6 12.7 3 8 3S1.1 7.6 1 7.8v.4c.1.2 2.3 4.8 7 4.8s6.9-4.6 7-4.8v-.4zM8 12c-3.5 0-5.5-3.1-5.9-4 .4-.9 2.4-4 5.9-4 3.5 0 5.5 3.1 5.9 4-.4.9-2.4 4-5.9 4z\\\"/>\\n\" +\n    \"<path d=\\\"M8 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='text']\").attr(\"type\", \"password\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function setHideIcon(element) {\n    $(element, content).parent().find('svg').remove();\n\n    $(element, content).after(\"<svg class='eye_hide_icon' xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\">\\n\" +\n    \"<path d=\\\"M3.6 10.5l.7-.7a12.1 12.1 0 0 1-2-1.6C3.1 7.3 5.4 5 8 5h1l.8-.8A6 6 0 0 0 8 4C4.3 4 1.4 7.8 1.2 7.9l-.2.3.3.3a12.3 12.3 0 0 0 2.3 2zm8.7-4.9l-.7.7a12.4 12.4 0 0 1 2.1 1.9C12.9 9 10.6 11 8 11H7l-.8.8L8 12c3.7 0 6.6-3.3 6.7-3.5l.3-.3-.2-.3a12.8 12.8 0 0 0-2.5-2.3zM1.5 15h-.4a.5.5 0 0 1 0-.7l13-13a.5.5 0 1 1 .7.7l-13 13h-.3z\\\"/><path d=\\\"M6.3 7.8a1.7 1.7 0 0 1 1.5-1.5l.9-.9H8A2.7 2.7 0 0 0 5.3 8a2.7 2.7 0 0 0 .1.7l.9-.9zm3.4.4a1.7 1.7 0 0 1-1.5 1.5l-.9.9H8A2.7 2.7 0 0 0 10.7 8a2.7 2.7 0 0 0-.1-.7l-.9.9z\\\"/>\" +\n    \"</svg>\");\n\n    $(element, content).parent().find(\"input[type='password']\").attr(\"type\", \"text\");\n    $(element, content).parent().find(\"svg\").click(addEvent(true));\n  }\n\n  function addEvent(direct) {\n    return function (element) {\n      if (direct) {\n        var className = $(this).attr('class') || '';\n        var input = $(this).parent().find(\"input\");\n        if (className === 'eye_show_icon') {\n          setHideIcon(input);\n        } else {\n          setShowIcon(input);\n        }\n      } else {\n        $($(element, content).parent().find('svg')[0]).click(function (ev) {\n          var className = $(this).attr('class') || '';\n          var input = $(this).parent().find(\"input\");\n          if (className === 'eye_show_icon') {\n            setHideIcon(input);\n          } else {\n            setShowIcon(input);\n          }\n        });\n      }\n    };\n  }\n\n  $(content).find(\"input[type='password']\").map(function (index, element) {\n    if (index > 0) {\n      setShowIcon(element);\n      addEvent(false)(element);\n    }\n  });\n};\n\n/**\r\n    * Aadir eventos de accessibility a un elemento, el evento consiste en las siguientes teclas:\r\n    * - Enter, Click, Space.\r\n    * Ayuda a que los elementos puedan ser accedidos (activar evento de click) de multiples maneras incluyendo teclado.\r\n    * @param {*} element jQuery element\r\n    * @param {Function} cb Callback\r\n    * @param {string[]} [extraEvent] Array of extra events\r\n    */\nbizagi.util.accessibilityEnter = function (element, cb, extraEvent) {\n  if (typeof cb !== \"function\") {\n    throw new Error('Error in \"accessibilityEnter\" function: You must provide a valid callback');\n  }\n  /**\r\n     * @type {*|jQuery|HTMLElement}\r\n     * @const\r\n     */\n  extraEvent = $.isArray(extraEvent) ? extraEvent : [];\n  extraEvent.indexOf('click') !== -1 ? extraEvent : extraEvent.push('click');\n\n  element.bind(\"keypress\", function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n\n    if (e.which === 13 || e.which === 32) {// Events: enter or space\n      cb(e);\n    }\n  });\n\n  element.bind(extraEvent.join(', '), function (e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n    cb(e);\n  });\n};\n\n/**\r\n    * Recreate native buttons for iOS\r\n    */\n\nbizagi.util.recreateNativeButtons = function (context) {\n  var params = context.getFormContainer().getParams();\n  if (bizagi.util.isNativePluginSupported() && bizagi.util.isiOSSmartphoneDevice()) {\n    var navigation = params.navigation;\n    if (typeof navigation !== \"undefined\") {\n      navigation.setNavigationButtons(context);\n    }\n  }\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isOverrideFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName] || null;\n\n  return bizagi.util.parseBoolean(feature) === true;\n};\n\n/**\r\n    * Create dynamic class using the name\r\n    */\nbizagi.util.createDynamicClass = function (nameClass, renderParams) {\n  if (nameClass) {\n    try {\n      // Create a dynamic function to avoid problem with eval calls when minifying the code\n      var dynamicFunction = \"var dynamicFn = function(renderParams){ \\r\\n\";\n      dynamicFunction += \"return new \" + nameClass + \"(renderParams);\\r\\n\";\n      dynamicFunction += \"}\\r\\n\";\n      dynamicFunction += \"dynamicFn\";\n      dynamicFunction = eval(dynamicFunction);\n\n      // Call the dynamic function\n      return dynamicFunction(renderParams);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // No class supported\n  return null;\n};\n\n/**\r\n    * Mobiscroll languages\r\n    */\nbizagi.util.languages = {\n  \"es\": \"es\", \"es-ES\": \"es\", \"es-AR\": \"es\", \"es-BO\": \"es\", \"es-Cl\": \"es\", \"es-CO\": \"es\", \"es-CR\": \"es\", \"es-DO\": \"es\", \"es-EC\": \"es\", \"es-SV\": \"es\", \"es-GT\": \"es\", \"es-HN\": \"es\", \"es-MX\": \"es\", \"es-NI\": \"es\", \"es-PA\": \"es\", \"es-PY\": \"es\", \"es-PR\": \"es\", \"es-PE\": \"es\", \"es-US\": \"es\", \"es-UY\": \"es\", \"es-VE\": \"es\",\n  \"en\": \"en-US\", \"en-AU\": \"en-US\", \"en-BZ\": \"en-US\", \"en-CA\": \"en-US\", \"en-029\": \"en-US\", \"en-IN\": \"en-US\", \"en-IE\": \"en-US\", \"en-JM\": \"en-US\", \"en-MY\": \"en-US\", \"en-NZ\": \"en-US\", \"en-PH\": \"en-US\", \"en-SG\": \"en-US\", \"en-ZA\": \"en-US\", \"en-TT\": \"en-US\", \"en-GB\": \"en-US\", \"en-US\": \"en-US\", \"en-ZW\": \"en-US\",\n  \"de\": \"de\", \"de-AT\": \"de\", \"de-DE\": \"de\", \"de-LI\": \"de\", \"de-LU\": \"de\", \"de-CH\": \"de\",\n  \"fr\": \"fr\", \"fr-BE\": \"fr\", \"fr-CA\": \"fr\", \"fr-LU\": \"fr\", \"fr-MC\": \"fr\", \"fr-CH\": \"fr\", \"fr-FR\": \"fr\",\n  \"it\": \"it\", \"it-IT\": \"it\", \"it-CH\": \"it\",\n  \"ja\": \"ja\", \"ja-JA\": \"ja\", \"ja-JP\": \"ja\",\n  \"nl\": \"nl\", \"nl-NL\": \"nl\", \"nl-BE\": \"nl\",\n  \"pt\": \"pt-PT\", \"pt-BR\": \"pt-PT\", \"pt-PT\": \"pt-PT\",\n  \"ru\": \"ru\", \"ru-RU\": \"ru\",\n  \"cs\": \"cs\", \"cs-CZ\": \"cs\",\n  \"ar\": \"ar\", \"ar-DZ\": \"ar\", \"ar-BH\": \"ar\", \"ar-EG\": \"ar\", \"ar-IQ\": \"ar\", \"ar-JO\": \"ar\", \"ar-KW\": \"ar\", \"ar-LB\": \"ar\", \"ar-LY\": \"ar\", \"ar-MA\": \"ar\", \"ar-OM\": \"ar\", \"ar-QA\": \"ar\", \"ar-SA\": \"ar\", \"ar-SY\": \"ar\", \"ar-TN\": \"ar\", \"ar-AE\": \"ar\", \"ar-YE\": \"ar\",\n  \"zh\": \"zh\", \"zh-HK\": \"zh\", \"zh-MO\": \"zh\", \"zh-CN\": \"zh\", \"zh-Hans\": \"zh\", \"zh-SG\": \"zh\", \"zh-TW\": \"zh\", \"zh-Hant\": \"zh\" };\n\n\n/**\r\n                                                                                                                              * Sets time to 0 in the date\r\n                                                                                                                              * @param value\r\n                                                                                                                              * @param fullFormat\r\n                                                                                                                              * @param showTime\r\n                                                                                                                              * @returns {Date} date converted with milliseconds 0\r\n                                                                                                                              */\nbizagi.util.getNormalizedDate = function (value, fullFormat, showTime) {\n  var dateTime = value;\n\n  try {\n    if (!!value && typeof value === \"string\") {\n      dateTime = bizagi.util.dateFormatter.getDateFromInvariant(value, showTime);\n    }\n\n    if (dateTime && dateTime !== 0 && dateTime != null) {\n      if (!showTime) {\n        dateTime.setHours(0, 0, 0, 0);\n      } else {\n        dateTime.setMilliseconds(0);\n      }\n\n      dateTime = bizagi.util.dateFormatter.formatDate(dateTime, fullFormat);\n    }\n  } catch (e) {\n  }\n\n  return dateTime;\n};\n\n/**\r\n    * Check If override feature is enabled. Only apply to feature with boolean key\r\n    * @param featureName\r\n    */\nbizagi.util.isFeatureEnabled = function (featureName) {\n  var feature = bizagi.override && bizagi.override[featureName];\n\n  return bizagi.util.parseBoolean(feature);\n};\n\n/**\r\n    * LOCAL STORAGE\r\n    */\n\n/**\r\n        * Last process inbox\r\n        * @returns lastProcessInboxKey string\r\n        */\nbizagi.util.getLastProcessInboxKey = function () {\n  var lastProcessInboxKey = 'lastProcessInbox';\n  lastProcessInboxKey = lastProcessInboxKey.concat(\"_\", bizagi.util.getUserHash());\n  return lastProcessInboxKey;\n};\n\n/**\r\n    * Constructor();\r\n    */\n\n/**\r\n       * Set last process inbox in local storage\r\n       * @returns void()\r\n       */\nbizagi.util.lastProcessInboxInit = function () {\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(bizagi.util.getLastProcessInboxCreate()));\n};\n\n/**\r\n    * Create last process inbox\r\n    * @returns {} lastProcessInbox\r\n    */\nbizagi.util.getLastProcessInboxCreate = function () {\n  return {\n    \"processInfo\": bizagi.util.createLastProcessInboxProcess(),\n    \"sortInfo\": bizagi.util.createLastProcessInboxSort(),\n    \"filterInfo\": bizagi.util.createLastProcessInboxFilter(),\n    \"processColumnsInfo\": bizagi.util.createLastProcessInboxColumns(),\n    \"inputTrayInfo\": bizagi.util.createLastProcessInboxInputTray() };\n\n};\n\n/**\r\n    * Create last process inbox default\r\n    * @returns {} processInfo\r\n    */\nbizagi.util.createLastProcessInboxProcess = function () {\n  return {\n    \"processInfoName\": null,\n    \"idWorkflow\": -1 };\n\n};\n\n/**\r\n    * Create sort info\r\n    * @return {} sortInfo\r\n    */\nbizagi.util.createLastProcessInboxSort = function () {\n  return {\n    \"sortDirection\": \"asc\",\n    \"sortFieldName\": null,\n    \"sortOrder\": null };\n\n};\n\n/**\r\n    * Create filter info\r\n    * filterType (equal, like, startsWith, endsWith )\r\n    * @return {} filterInfo\r\n    */\nbizagi.util.createLastProcessInboxFilter = function () {\n  return {\n    \"filterValue\": null,\n    \"filterFieldName\": null,\n    \"filterType\": \"equal\" };\n\n};\n\n/**\r\n    * Create process columns info\r\n    * @return {} columnsInfo\r\n    */\nbizagi.util.createLastProcessInboxColumns = function () {\n  return {\n    \"processColumns\": [] };\n\n};\n\n/**\r\n    * Create input tray info\r\n    * @return string inputTrayInfo\r\n    */\nbizagi.util.createLastProcessInboxInputTray = function () {\n  return \"inbox\";\n};\n\n/**\r\n    * INIT\r\n    */\n\n/**\r\n        * Init last process inbox\r\n        * @returns lastProcessInbox {}\r\n        */\nbizagi.util.getLastProcessInbox = function () {\n  var lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n\n  if (!lastProcessInbox) {\n    // New object\n    bizagi.util.lastProcessInboxInit();\n    // Get object\n    lastProcessInbox = bizagi.util.getItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n  }\n\n  return JSON.parse(lastProcessInbox);\n};\n\n/**\r\n    * SET\r\n    */\n\n/**\r\n        * Save current process info\r\n        * @param processName string\r\n        * @param idWorkflow integrer\r\n        * @return void()\r\n        */\nbizagi.util.setLastProcessInbox = function (processInfoName, idWorkflow, smartInboxId) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  if (lastProcessInbox.processInfo) {\n    if (lastProcessInbox.processInfo.idWorkflow != idWorkflow) {\n      lastProcessInbox.processColumnsInfo = null;\n    } else if (!bizagi.util.isEmpty(smartInboxId) && lastProcessInbox.processInfo.smartInboxId != smartInboxId) {\n      lastProcessInbox.processColumnsInfo = null;\n    }\n  }\n\n  // set data\n  lastProcessInbox.processInfo.processInfoName = processInfoName;\n  lastProcessInbox.processInfo.idWorkflow = parseInt(idWorkflow || -1);\n  lastProcessInbox.processInfo.smartInboxId = typeof smartInboxId != \"undefined\" ? smartInboxId : null;\n\n  // When last process inbox change is required to delete Filters\n  if (lastProcessInbox.filterInfo) {\n    lastProcessInbox.filterInfo = bizagi.util.createLastProcessInboxFilter();\n  }\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save process columns info\r\n    * @param processColumns []\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxProcessColumns = function (processColumns) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.processColumnsInfo = lastProcessInbox.processColumnsInfo || {};\n  lastProcessInbox.processColumnsInfo.processColumns = processColumns || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/*\r\n   * Get Live filter from storage\r\n   * @param id object\r\n   * @return object\r\n   */\nbizagi.util.getLiveFiltersFromStorage = function (id) {\n  var filters = [];\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\");\n  try {\n    var serialize = JSON.parse(modelStorage);\n    filters = typeof serialize[id] != \"undefined\" ? JSON.parse(serialize[id]) : filters;\n  } catch (e) {\n    filters = [];\n  }\n\n  return filters;\n};\n\n/*\r\n   * Save Live filter in storage\r\n   * @param id object\r\n   * @param value object\r\n   * @return void()\r\n   */\nbizagi.util.setLiveFiltersToStorage = function (id, value) {\n  var modelStorage = bizagi.util.getItemLocalStorage(\"livefilters\") || \"[]\";\n  var serialize = JSON.parse(modelStorage);\n\n  serialize[id] = JSON.stringify(value);\n\n\n  bizagi.util.setItemLocalStorage(\"livefilters\", JSON.encode(Object.assign({}, serialize)));\n};\n\n/**\r\n    * Save sort info\r\n    * @param liveFilters array\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxLiveFilter = function (liveFilters) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.liveFilters = liveFilters || [];\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n\n/**\r\n    * Save sort info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxSort = function (sortFieldName, direction, sortOrder) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.sortInfo.sortFieldName = sortFieldName || null;\n  lastProcessInbox.sortInfo.sortDirection = direction || 'asc';\n  lastProcessInbox.sortInfo.sortOrder = sortOrder || null;\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save filter info\r\n    * @param fieldName string\r\n    * @param direction string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxFilter = function (filterValue, filterFieldName, filterType) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.filterInfo.filterValue = filterValue || null;\n  lastProcessInbox.filterInfo.filterFieldName = filterFieldName || null;\n  lastProcessInbox.filterInfo.filterType = filterType || 'equal';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * Save input Tray inbox info\r\n    * @param inputTray string\r\n    * @return void()\r\n    */\nbizagi.util.setLastProcessInboxInputTray = function (inputTray) {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // set data\n  lastProcessInbox.inputTrayInfo = inputTray || '';\n  // save data\n  bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n};\n\n/**\r\n    * GET\r\n    */\n\n/**\r\n        * Get process info\r\n        * @return {} process info\r\n        */\nbizagi.util.getLastProcessInboxProcessInfo = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  // localization / default\n  if (bizagi.localization && lastProcessInbox.processInfo.processInfoName == null) {\n    lastProcessInbox.processInfo.processInfoName = bizagi.localization.getResource(\"workportal-widget-inbox-all-processes\");\n  }\n  lastProcessInbox.processInfo.allProcesses = lastProcessInbox.processInfo.idWorkflow === -1;\n  // response\n  return lastProcessInbox.processInfo;\n};\n\n/**\r\n    * Get smartinbox id\r\n    * @return string smartinbox id\r\n    */\nbizagi.util.getLastProcessInboxSmartInboxId = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processInfo.smartInboxId;\n};\n\n/**\r\n    * Get sort info\r\n    * @return {} sort info\r\n    */\nbizagi.util.getLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.sortInfo;\n};\n\n/**\r\n    * Get filter info\r\n    * @return {} filter info\r\n    */\nbizagi.util.getLastProcessInboxFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.filterInfo;\n};\n\n/**\r\n    * Get live filter info\r\n    * @return {} live filter info\r\n    */\nbizagi.util.getLastProcessInboxLiveFilter = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.liveFilters;\n};\n\n/**\r\n    * Get process columns info\r\n    * @return [] process columns info\r\n    */\nbizagi.util.getLastProcessInboxProcessColumns = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.processColumnsInfo;\n};\n\n/**\r\n    * Get input tray info\r\n    * @return string inputTray info\r\n    */\nbizagi.util.getLastProcessInboxInputTray = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n  return lastProcessInbox.inputTrayInfo;\n};\n\n/**\r\n    * DELETE\r\n    */\n\n/**\r\n        * Remove last process inbox\r\n        * @return void()\r\n        */\nbizagi.util.removeLastProcessInbox = function () {\n  bizagi.util.removeItemLocalStorage(bizagi.util.getLastProcessInboxKey());\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessInboxSort = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.sortInfo) {\n    // set data\n    lastProcessInbox.sortInfo = bizagi.util.createLastProcessInboxSort();\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\n/**\r\n    * Remove sort inbox\r\n    * @return void()\r\n    */\nbizagi.util.removeLastProcessLiveFilters = function () {\n  var lastProcessInbox = bizagi.util.getLastProcessInbox();\n\n  if (lastProcessInbox && lastProcessInbox.liveFilters) {\n    // set data\n    lastProcessInbox.liveFilters = [];\n    // save data\n    bizagi.util.setItemLocalStorage(bizagi.util.getLastProcessInboxKey(), JSON.stringify(lastProcessInbox));\n  }\n};\n\nbizagi.util.getSyncTimeStampKey = function () {\n  var syncTimeStampKey = 'syncTimeStamp';\n  syncTimeStampKey = syncTimeStampKey.concat(\"_\", bizagi.util.getUserHash());\n  return syncTimeStampKey;\n};\n\nbizagi.util.storeSyncTimeStamp = function (currentDate) {\n  bizagi.util.setItemLocalStorage(bizagi.util.getSyncTimeStampKey(), currentDate.toString());\n};\n\nbizagi.util.getSyncTimeStamp = function () {\n  var syncTimeStamp = bizagi.util.getItemLocalStorage(bizagi.util.getSyncTimeStampKey());\n  return syncTimeStamp ? new Date(syncTimeStamp) : undefined;\n};\n\nbizagi.util.getUserHash = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  return userKey.hashCode();\n};\n\n/**\r\n    * set or get the value in the defaultWidget\r\n    * if is mobile use cookie\r\n    * if is desktop save the value DETAIL or TABLE\r\n    * if is desktop on get returns inbox or inboxGrid only\r\n    */\nbizagi.util.defaultWidget = function (newValueStr) {\n  var _preferService = bizagi.services.preferences(),\n  _widgets = bizagi.workportal.widgets.widget,\n  _val2Str = function _val2Str(val) {\n    return val === 'DETAIL' ? _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX : _widgets.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\n  },\n  _str2Val = function _str2Val(str) {\n    return str === 'inbox' ? 'DETAIL' : 'TABLE';\n  },\n  _mobile = {\n    set: function set(newVal) {\n      bizagi.cookie(\"bizagiDefaultWidget\", newVal, { expires: 30 });\n    },\n    get: function get() {\n      return bizagi.cookie(\"bizagiDefaultWidget\");\n    } },\n\n  _desktop = {\n    set: function set(newVal) {\n      var _newValueView = _str2Val(newVal);\n      _preferService.changePreference(_preferService.name.INBOX_VIEW_TYPE, _newValueView);\n    },\n    get: function get() {\n      var _actualValue = _preferService.getPreference(_preferService.name.INBOX_VIEW_TYPE);\n      return _val2Str(_actualValue);\n    } },\n\n  _device = bizagi.util.isMobile ? _mobile : _desktop;\n\n  if (newValueStr !== undefined)\n  _device.set(newValueStr);\n  return _device.get();\n};\n\nbizagi.util.getMobileFeaturesKey = function () {\n  var userKey = typeof BIZAGI_USER != \"undefined\" ?\n  (\"\" + BIZAGI_USER + \"-\" + BIZAGI_PROXY_PREFIX + \"-\" + BIZAGI_DOMAIN).toLowerCase() :\n  \"admon\" + \"-\" + \"http://localhost/bizagiR100x\" + \"-\" + \"domain\";\n  var mobileFeaturesKey = 'mobileFeatures';\n  mobileFeaturesKey = mobileFeaturesKey.concat(\"_\", userKey);\n  return mobileFeaturesKey;\n};\n\nbizagi.util.getMobileFeatures = function () {\n  var stringFeatures = bizagi.util.getItemLocalStorage(bizagi.util.getMobileFeaturesKey());\n  var updatedFeatures = $.extend(!bizagi.util.isEmpty(stringFeatures) ? JSON.parse(stringFeatures) : {}, bizagiConfig.features);\n  return updatedFeatures;\n};\n\nbizagi.util.storeMobileFeatures = function (mobileFeatures) {\n  var storedFeatures = bizagi.util.getMobileFeatures();\n  var updatedFeatures = $.extend(storedFeatures, mobileFeatures);\n  bizagi.util.setItemLocalStorage(bizagi.util.getMobileFeaturesKey(), JSON.stringify(updatedFeatures));\n};\n\nbizagi.util.getCardviewMaxColumsAllowed = function () {\n  var maxColumns = 100;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n  if (mobileFeatures && mobileFeatures.maxColumnsEnabled &&\n  mobileFeatures.maxColumnsEnabled.enabled === true) {\n    maxColumns = mobileFeatures.maxColumnsEnabled.value;\n  }\n  return maxColumns;\n};\n\nbizagi.util.blobTob64 = function (blob, onlyData) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsDataURL(blob);\n  reader.onloadend = function () {\n    base64data = reader.result;\n    if (onlyData) {\n      base64data = base64data.split(',')[1];\n    }\n    def.resolve(base64data);\n  };\n  return def;\n};\n/**\r\n    * Convert blob to text\r\n    * @param {*} blob \r\n    */\nbizagi.util.blobToText = function (blob) {\n  var def = new $.Deferred();\n  var reader = new FileReader();\n  reader.readAsText(blob);\n  reader.onloadend = function () {\n    text = reader.result;\n    def.resolve(text);\n  };\n  return def;\n};\n/**\r\n    * Get valid data url\r\n    * @param {} properties\r\n    * @returns {}\r\n    */\n\n/**\r\n       * Get valid data url\r\n       * @param {} properties\r\n       * @returns {}\r\n       */\nbizagi.util.getDataUrl = function (properties) {\n  var currentUrl;\n\n  try {\n    if (typeof properties.value !== \"undefined\" && !bizagi.util.isEmpty(properties.value)) {\n      var data = properties.value;\n      var url = data.value || data;\n\n      if (Array.isArray(url)) {\n        var tempUrl = url.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = url;\n      }\n    } else {\n      currentUrl = properties.url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.getDataUrl = function (binaryData, url) {\n  var currentUrl;\n\n  try {\n    if (typeof binaryData !== \"undefined\" && !bizagi.util.isEmpty(binaryData)) {\n      var data = binaryData;\n      var newUrl = data.value || data;\n\n      if (Array.isArray(newUrl)) {\n        var tempUrl = newUrl.shift();\n        currentUrl = Array.isArray(tempUrl) ? tempUrl.join(\"\") : tempUrl;\n      } else {\n        currentUrl = newUrl;\n      }\n    } else {\n      currentUrl = url || \"\";\n    }\n\n    currentUrl = !bizagi.util.isEmpty(currentUrl) ? \"data:image/png;base64,\" + currentUrl.replace(/^data:.*;base64,/, \"\") : \"\";\n\n    if (currentUrl && currentUrl.indexOf(\"Invalid case id\") !== -1)\n    currentUrl = \"\";\n\n  } catch (error) {\n    currentUrl = \"\";\n  }\n\n  return currentUrl;\n};\n\nbizagi.util.console = {};\nbizagi.util.console.log = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.log(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.log.apply(this, arguments);\n};\n\nbizagi.util.console.error = function () {\n  if ('Bugsee' in window || bizagi.util.isCordovaSupported()) {\n    var args = Array.prototype.slice.call(arguments);\n    var message = args[0];\n    var params = args.length > 1 ? args.slice(1) : null;\n    if (params) {\n      try {\n        console.error(\"BUGSEE: \" + message + \" \\r\\n\" + JSON.encode(params));\n        return;\n      } catch (e) {}\n    }\n  }\n  console.error.apply(this, arguments);\n};\n\nbizagi.util.deepExtend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n    continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (_typeof(obj[key]) === 'object') {\n          if (obj[key] instanceof Array == true)\n          out[key] = obj[key].slice(0);else\n\n          out[key] = deepExtend(out[key], obj[key]);\n        } else\n\n        out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nbizagi.util.extend = function (out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    if (!arguments[i])\n    continue;\n\n    for (var key in arguments[i]) {\n      if (arguments[i].hasOwnProperty(key))\n      out[key] = arguments[i][key];\n    }\n  }\n\n  return out;\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n/**\r\n    * Get the justify-content property to apply to a control according to the specified \"align\" property\r\n    * @param {string} align - left, right, center, default or justify\r\n    */\nbizagi.util.mapAlignClassName = function (align) {\n  var descs = {\n    'rigth': 'flex-end',\n    'left': 'flex-start',\n    'justify': 'flex-start',\n    'default': 'center',\n    'center': 'center' };\n\n  return descs[align] || \"center\";\n};\n\nbizagi.util.isMobileErrorTracesEnabled = function () {\n  var mobileErrorTracesEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileErrorTraces && mobileFeatures.mobileErrorTraces.enabled === true) {\n    mobileErrorTracesEnabled = true;\n  }\n\n  return mobileErrorTracesEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileSmartInboxEnabled = function () {\n  var mobileSmartInboxEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileSmartInbox && mobileFeatures.mobileSmartInbox.enabled === true) {\n    mobileSmartInboxEnabled = true;\n  }\n\n  return mobileSmartInboxEnabled && bizagi.util.isTabletDevice();\n};\n\nbizagi.util.isMobileLiveFiltersEnabled = function () {\n  var mobileLiveFiltersEnabled = false;\n  var mobileFeatures = bizagi.util.getMobileFeatures();\n\n  if (mobileFeatures && mobileFeatures.mobileLiveFilters && mobileFeatures.mobileLiveFilters.enabled === true) {\n    mobileLiveFiltersEnabled = true;\n  }\n\n  return mobileLiveFiltersEnabled && bizagi.util.isTabletDevice();\n};\n\n/**\r\n    * Gets the normalized control type of a column\r\n    * @param {string} originalType - Type received in metadata \r\n    */\nbizagi.util.getColumnType = function (originalType) {\n  if (typeof originalType === \"undefined\") return \"default\";\n\n  var type = originalType.replace(\"column\", \"\").toLowerCase();\n  return bizagi.util.normalizeType(type);\n};\n\n$.any = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return false;\n  var result = $.grep(data, callback);\n  return result != null && result !== undefined && result.length > 0;\n};\n\n$.first = function (data, callback) {\n  if (data === undefined || data == null || data.length == 0) return null;\n  var result = $.grep(data, callback);\n  return result == null || result === undefined || result.length == 0 ? null : result[0];\n};\n\n$.groupBy = function (data, property) {\n  if (data === undefined || data == null || data.length == 0) return {};\n  var result = {};\n  $.each(data, function (i, item) {\n    if (item === undefined) return;\n    if (result[item[property]] === undefined) result[item[property]] = [];\n    result[item[property]].push(item);\n  });\n  return result;\n};","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}bizagi = typeof bizagi !== \"undefined\" ? bizagi : {};\nbizagi.util = typeof bizagi.util !== \"undefined\" ? bizagi.util : {};\nbizagi.context = typeof bizagi.context !== \"undefined\" ? bizagi.context : {};\n\n/**\r\n                                                                               * Method to detect iPad visitors\r\n                                                                               */\nbizagi.util.randomNumber = function (min, max) {\n  min = min || 1;\n  max = max || 10000000;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\nbizagi.resolveResult = function (promise) {\n  var result;\n  promise.done(function (data) {\n    result = data;\n  });\n  return result;\n};\n\n/**\r\n    *   Returns a boolean if there are two equal objects\r\n    */\nbizagi.util.identicalObjects = function (obj1, obj2) {\n  var self = this;\n\n  if (_typeof(obj1) !== _typeof(obj2)) {\n    return false;\n  }\n\n  if (typeof obj1 === \"function\") {\n    return obj1.toString() === obj2.toString();\n  }\n\n  if (obj1 instanceof Object && obj2 instanceof Object) {\n\n    // Count properties\n    if (bizagi.util.countProps(obj1) !== bizagi.util.countProps(obj2)) {\n      return false;\n    }\n\n    var r = true;\n    for (k in obj1) {\n      r = bizagi.util.identicalObjects(obj1[k], obj2[k]);\n      if (!r) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return obj1 === obj2;\n  }\n};\n\n\nbizagi.util.countProps = function (obj) {\n  var count = 0;\n  for (k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      count++;\n    }\n  }\n  return count;\n};\n\n/**\r\n    *   Encode a html string\r\n    */\nbizagi.util.encodeHtml = function (text) {\n  if (text === undefined || text === null) {\n    return \"\";\n  }\n  if (typeof text == \"string\") {\n    return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n  }\n  return text;\n};\n\n/**\r\n    *   Encodes the xpath\r\n    */\nbizagi.util.encodeXpath = function (xpath) {\n  if (bizagi.util.isEmpty(xpath))\n  return \"\";\n  return xpath.replaceAll(\".\", \"_\").replaceAll(\"=\", \"_\").replaceAll(\"[\", \"_\").replaceAll(\"]\", \"_\");\n};\n\n/**\r\n    *   Add a clone to the object prototype\r\n    */\nbizagi.clone = function (obj) {\n  return JSON.parse(JSON.encode(obj));\n};\n\n/**\r\n    *   Generates a random guid\r\n    */\nMath.guid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\n\n/**\r\n    * Execute deferreds in order\r\n    * @example var a = new bizagiQueue(); a.add(function);\r\n    *\r\n    */\nfunction bizagiQueue() {\n  var self = this;\n  var queue = [];\n\n  self.add = function (callback) {\n    queue.push({ callbacks: [callback] });\n  };\n\n  self.addParallel = function (callback) {\n    if (queue.length == 0)\n    return self.add(callback);\n\n    // Put a parallel on last item\n    var last = queue[queue.length - 1];\n    last.callbacks.push(callback);\n  };\n\n  self.execute = function () {\n    var starter = new $.Deferred();\n    var promise = starter.promise();\n    var queueLength = queue.length;\n    for (var i = 0; i < queueLength; i++) {\n      promise = promise.pipe(function () {\n        var element = queue.shift();\n        return $.when.apply($, $.map(element.callbacks, function (callback) {\n          // Function support\n          if (typeof callback == \"function\")\n          return callback();\n          // Deferred support\n          return callback;\n        }));\n      });\n    };\n\n    starter.resolve();\n    promise = promise.done(function () {\n      // Reset queue\n      queue = [];\n    });\n\n    return promise;\n  };\n};\n\n/**\r\n    *   Check if a map object is empty\r\n    */\nbizagi.util.isMapEmpty = function (map) {\n  // First we validate a special case\n  if (map.length == 1 && map[0].length == 0)\n  return true;\n  // Then we do normal validation\n  for (var key in map) {\n    if (map.hasOwnProperty(key)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\r\n    * Find element to make scroll top\r\n    */\nbizagi.util.scrollTop = function (canvas) {\n  if (canvas && canvas[0]) {\n    while (canvas[0].tagName !== \"HTML\" && canvas.css(\"overflow-y\") != \"scroll\" && canvas.css(\"overflow-y\") != \"auto\" && canvas.parent().length > 0) {\n      canvas = canvas.parent();\n    }\n  }\n  return canvas;\n};\n\n/*\r\n   *   Read the query string parameteres\r\n   */\nbizagi.util.getQueryString = function (url) {\n  var params = {};\n  url = url || window.location.href;\n  var query = url.indexOf(\"?\") > 0 ? url.substring(url.indexOf(\"?\") + 1) : \"\";\n  var pairs = query.split(\"&\");\n  for (var i = 0; i < pairs.length; i++) {\n    var pos = pairs[i].indexOf('=');\n    if (pos == -1)\n    continue;\n    var argname = pairs[i].substring(0, pos);\n    var value = pairs[i].substring(pos + 1);\n    params[argname] = unescape(value);\n  }\n  return params;\n};\n\n\n/*\r\n   *   Info scenarios\r\n   */\nvar scenarioInfo = function scenarioInfo(params) {\n  var self = this;\n  var _state = {};\n\n  /**\r\n                   * Return url where is located specific scenario\r\n                   *\r\n                   * @param params\r\n                   * @returns {string}\r\n                   */\n  self.getFileScenario = function (params) {\n    params = params || {};\n    var url = \"\";\n    var scenario = params.scenario.split(\".\") || [];\n    var category = scenario[0];\n\n    url = BIZAGI_SMARTPHONE_PATH + \"scenarios/\" + category + \"/\" + params.scenario + \".js\";\n\n    return url;\n  };\n\n  return {\n    getFileScenario: self.getFileScenario };\n\n};\n\n/**\r\n    *   Determines if parameter 'n' is numeric\r\n    */\nbizagi.util.isNumeric = function (n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\n/**\r\n    *   Determines if a element has visibility\r\n    */\nbizagi.util.isScrolledIntoView = function (elem, layout) {\n  if (elem == undefined) {\n    return false;\n  }\n\n  layout = layout || $(window);\n  var scrollTop = layout.scrollTop();\n  var elemTop = $(elem).offset().top;\n  var elemBottom = elemTop + $(elem).height();\n  var docViewBottom = scrollTop + $(layout).height();\n  return elemBottom <= docViewBottom && elemTop >= scrollTop;\n};\n\n/**\r\n    * determines whether the element in the browser supports the event we are looking for, eg 'paste', 'input', 'blur', etc. More info check modernizer.js.\r\n    * @param  {string|*}           eventName  is the name of an event to test for (e.g. \"resize\")\r\n    * @param  {(Object|string|*)=} element    is the element|document|window|tagName to test on\r\n    * @return {boolean}\r\n    */\nbizagi.util.isEventSupported = function (eventName, element) {\n  var needsFallback = !('onblur' in document.documentElement);\n  var isSupported;\n\n  if (!eventName) {\n    return false;\n  }\n  if (!element || typeof element === 'string') {\n    element = document.createElement(element || 'div');\n  }\n\n  // Testing via the `in` operator is sufficient for modern browsers and IE.\n  // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and\n  // \"resize\", whereas `in` \"catches\" those.\n  eventName = 'on' + eventName;\n  isSupported = eventName in element;\n\n  // Fallback technique for old Firefox - bit.ly/event-detection\n  if (!isSupported && needsFallback) {\n    if (!element.setAttribute) {\n      // Switch to generic element if it lacks `setAttribute`.\n      // It could be the `document`, `window`, or something else.\n      element = document.createElement('div');\n    }\n    if (element.setAttribute && element.removeAttribute) {\n      element.setAttribute(eventName, '');\n      isSupported = typeof element[eventName] === 'function';\n\n      if (element[eventName] !== undefined) {\n        // If property was created, \"remove it\" by setting value to `undefined`.\n        element[eventName] = undefined;\n      }\n      element.removeAttribute(eventName);\n    }\n  }\n  return isSupported;\n};\n/*\r\n    * Method to detect Android visitors\r\n    */\nbizagi.util.isAndroid = function () {\n  return navigator.userAgent.toLowerCase().indexOf(\"android\") > -1;\n};\n\n/**\r\n    * Functions to loading\r\n    */\n(function ($) {\n  $.fn.startLoading = function (params) {\n    bizagi.util.smartphone.startLoading();\n  };\n\n  $.fn.endLoading = function () {\n    bizagi.util.smartphone.stopLoading();\n  };\n})(jQuery);\n\n/***\r\n             * Removes the objects and dispose\r\n             * @param obj\r\n             */\n\nbizagi.util.dispose = function (obj) {\n  for (key in obj) {\n    if (_typeof(obj[key]) == \"object\") delete obj[key];\n    if (typeof obj[key] == \"function\") {obj[key] = null;delete obj[key];}\n  }\n};\n\n/**\r\n   * Remove all backslashes that represent scape of characters\r\n   */\nbizagi.util.stripslashes = function (str) {\n  return str.replace(/\\\\'/g, '\\'').replace(/\\\"/g, '\"').replace(/\\\\\\\\/g, '\\\\').replace(/\\\\0/g, '\\0');\n};\n\n/**\r\n    * CryptoJS MD5 \r\n    * @param {} message \r\n    * @returns {} \r\n    */\nbizagi.util.md5 = function (message) {\n  // Code here will be linted with JSHint.\n  /* jshint ignore:start */\n  var CryptoJS = CryptoJS || function (s, p) {var m = {},l = m.lib = {},n = function n() {},r = l.Base = { extend: function extend(b) {n.prototype = this;var h = new n();b && h.mixIn(b);h.hasOwnProperty(\"init\") || (h.init = function () {h.$super.init.apply(this, arguments);});h.init.prototype = h;h.$super = this;return h;}, create: function create() {var b = this.extend();b.init.apply(b, arguments);return b;}, init: function init() {}, mixIn: function mixIn(b) {for (var h in b) {b.hasOwnProperty(h) && (this[h] = b[h]);}b.hasOwnProperty(\"toString\") && (this.toString = b.toString);}, clone: function clone() {return this.init.prototype.extend(this);} },q = l.WordArray = r.extend({ init: function init(b, h) {b = this.words = b || [];this.sigBytes = h != p ? h : 4 * b.length;}, toString: function toString(b) {return (b || t).stringify(this);}, concat: function concat(b) {var h = this.words,a = b.words,j = this.sigBytes;b = b.sigBytes;this.clamp();if (j % 4) for (var g = 0; g < b; g++) {h[j + g >>> 2] |= (a[g >>> 2] >>> 24 - 8 * (g % 4) & 255) << 24 - 8 * ((j + g) % 4);} else if (65535 < a.length) for (g = 0; g < b; g += 4) {h[j + g >>> 2] = a[g >>> 2];} else h.push.apply(h, a);this.sigBytes += b;return this;}, clamp: function clamp() {var b = this.words,h = this.sigBytes;b[h >>> 2] &= 4294967295 << 32 - 8 * (h % 4);b.length = s.ceil(h / 4);}, clone: function clone() {var b = r.clone.call(this);b.words = this.words.slice(0);return b;}, random: function random(b) {for (var h = [], a = 0; a < b; a += 4) {h.push(4294967296 * s.random() | 0);}return new q.init(h, b);} }),v = m.enc = {},t = v.Hex = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {var k = a[j >>> 2] >>> 24 - 8 * (j % 4) & 255;g.push((k >>> 4).toString(16));g.push((k & 15).toString(16));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j += 2) {g[j >>> 3] |= parseInt(b.substr(j, 2), 16) << 24 - 4 * (j % 8);}return new q.init(g, a / 2);} },a = v.Latin1 = { stringify: function stringify(b) {var a = b.words;b = b.sigBytes;for (var g = [], j = 0; j < b; j++) {g.push(String.fromCharCode(a[j >>> 2] >>> 24 - 8 * (j % 4) & 255));}return g.join(\"\");}, parse: function parse(b) {for (var a = b.length, g = [], j = 0; j < a; j++) {g[j >>> 2] |= (b.charCodeAt(j) & 255) << 24 - 8 * (j % 4);}return new q.init(g, a);} },u = v.Utf8 = { stringify: function stringify(b) {try {return decodeURIComponent(escape(a.stringify(b)));} catch (g) {throw Error(\"Malformed UTF-8 data\");}}, parse: function parse(b) {return a.parse(unescape(encodeURIComponent(b)));} },g = l.BufferedBlockAlgorithm = r.extend({ reset: function reset() {this._data = new q.init();this._nDataBytes = 0;}, _append: function _append(b) {\"string\" == typeof b && (b = u.parse(b));this._data.concat(b);this._nDataBytes += b.sigBytes;}, _process: function _process(b) {var a = this._data,g = a.words,j = a.sigBytes,k = this.blockSize,m = j / (4 * k),m = b ? s.ceil(m) : s.max((m | 0) - this._minBufferSize, 0);b = m * k;j = s.min(4 * b, j);if (b) {for (var l = 0; l < b; l += k) {this._doProcessBlock(g, l);}l = g.splice(0, b);a.sigBytes -= j;}return new q.init(l, j);}, clone: function clone() {var b = r.clone.call(this);b._data = this._data.clone();return b;}, _minBufferSize: 0 });l.Hasher = g.extend({ cfg: r.extend(), init: function init(b) {this.cfg = this.cfg.extend(b);this.reset();}, reset: function reset() {g.reset.call(this);this._doReset();}, update: function update(b) {this._append(b);this._process();return this;}, finalize: function finalize(b) {b && this._append(b);return this._doFinalize();}, blockSize: 16, _createHelper: function _createHelper(b) {return function (a, g) {return new b.init(g).finalize(a);};}, _createHmacHelper: function _createHmacHelper(b) {return function (a, g) {return new k.HMAC.init(b, g).finalize(a);};} });var k = m.algo = {};return m;}(Math);(function (s) {function p(a, k, b, h, l, j, m) {a = a + (k & b | ~k & h) + l + m;return (a << j | a >>> 32 - j) + k;}function m(a, k, b, h, l, j, m) {a = a + (k & h | b & ~h) + l + m;return (a << j | a >>> 32 - j) + k;}function l(a, k, b, h, l, j, m) {a = a + (k ^ b ^ h) + l + m;return (a << j | a >>> 32 - j) + k;}function n(a, k, b, h, l, j, m) {a = a + (b ^ (k | ~h)) + l + m;return (a << j | a >>> 32 - j) + k;}for (var r = CryptoJS, q = r.lib, v = q.WordArray, t = q.Hasher, q = r.algo, a = [], u = 0; 64 > u; u++) {a[u] = 4294967296 * s.abs(s.sin(u + 1)) | 0;}q = q.MD5 = t.extend({ _doReset: function _doReset() {this._hash = new v.init([1732584193, 4023233417, 2562383102, 271733878]);}, _doProcessBlock: function _doProcessBlock(g, k) {for (var b = 0; 16 > b; b++) {var h = k + b,w = g[h];g[h] = (w << 8 | w >>> 24) & 16711935 | (w << 24 | w >>> 8) & 4278255360;}var b = this._hash.words,h = g[k + 0],w = g[k + 1],j = g[k + 2],q = g[k + 3],r = g[k + 4],s = g[k + 5],t = g[k + 6],u = g[k + 7],v = g[k + 8],x = g[k + 9],y = g[k + 10],z = g[k + 11],A = g[k + 12],B = g[k + 13],C = g[k + 14],D = g[k + 15],c = b[0],d = b[1],e = b[2],f = b[3],c = p(c, d, e, f, h, 7, a[0]),f = p(f, c, d, e, w, 12, a[1]),e = p(e, f, c, d, j, 17, a[2]),d = p(d, e, f, c, q, 22, a[3]),c = p(c, d, e, f, r, 7, a[4]),f = p(f, c, d, e, s, 12, a[5]),e = p(e, f, c, d, t, 17, a[6]),d = p(d, e, f, c, u, 22, a[7]),c = p(c, d, e, f, v, 7, a[8]),f = p(f, c, d, e, x, 12, a[9]),e = p(e, f, c, d, y, 17, a[10]),d = p(d, e, f, c, z, 22, a[11]),c = p(c, d, e, f, A, 7, a[12]),f = p(f, c, d, e, B, 12, a[13]),e = p(e, f, c, d, C, 17, a[14]),d = p(d, e, f, c, D, 22, a[15]),c = m(c, d, e, f, w, 5, a[16]),f = m(f, c, d, e, t, 9, a[17]),e = m(e, f, c, d, z, 14, a[18]),d = m(d, e, f, c, h, 20, a[19]),c = m(c, d, e, f, s, 5, a[20]),f = m(f, c, d, e, y, 9, a[21]),e = m(e, f, c, d, D, 14, a[22]),d = m(d, e, f, c, r, 20, a[23]),c = m(c, d, e, f, x, 5, a[24]),f = m(f, c, d, e, C, 9, a[25]),e = m(e, f, c, d, q, 14, a[26]),d = m(d, e, f, c, v, 20, a[27]),c = m(c, d, e, f, B, 5, a[28]),f = m(f, c, d, e, j, 9, a[29]),e = m(e, f, c, d, u, 14, a[30]),d = m(d, e, f, c, A, 20, a[31]),c = l(c, d, e, f, s, 4, a[32]),f = l(f, c, d, e, v, 11, a[33]),e = l(e, f, c, d, z, 16, a[34]),d = l(d, e, f, c, C, 23, a[35]),c = l(c, d, e, f, w, 4, a[36]),f = l(f, c, d, e, r, 11, a[37]),e = l(e, f, c, d, u, 16, a[38]),d = l(d, e, f, c, y, 23, a[39]),c = l(c, d, e, f, B, 4, a[40]),f = l(f, c, d, e, h, 11, a[41]),e = l(e, f, c, d, q, 16, a[42]),d = l(d, e, f, c, t, 23, a[43]),c = l(c, d, e, f, x, 4, a[44]),f = l(f, c, d, e, A, 11, a[45]),e = l(e, f, c, d, D, 16, a[46]),d = l(d, e, f, c, j, 23, a[47]),c = n(c, d, e, f, h, 6, a[48]),f = n(f, c, d, e, u, 10, a[49]),e = n(e, f, c, d, C, 15, a[50]),d = n(d, e, f, c, s, 21, a[51]),c = n(c, d, e, f, A, 6, a[52]),f = n(f, c, d, e, q, 10, a[53]),e = n(e, f, c, d, y, 15, a[54]),d = n(d, e, f, c, w, 21, a[55]),c = n(c, d, e, f, v, 6, a[56]),f = n(f, c, d, e, D, 10, a[57]),e = n(e, f, c, d, t, 15, a[58]),d = n(d, e, f, c, B, 21, a[59]),c = n(c, d, e, f, r, 6, a[60]),f = n(f, c, d, e, z, 10, a[61]),e = n(e, f, c, d, j, 15, a[62]),d = n(d, e, f, c, x, 21, a[63]);b[0] = b[0] + c | 0;b[1] = b[1] + d | 0;b[2] = b[2] + e | 0;b[3] = b[3] + f | 0;}, _doFinalize: function _doFinalize() {var a = this._data,k = a.words,b = 8 * this._nDataBytes,h = 8 * a.sigBytes;k[h >>> 5] |= 128 << 24 - h % 32;var l = s.floor(b / 4294967296);k[(h + 64 >>> 9 << 4) + 15] = (l << 8 | l >>> 24) & 16711935 | (l << 24 | l >>> 8) & 4278255360;k[(h + 64 >>> 9 << 4) + 14] = (b << 8 | b >>> 24) & 16711935 | (b << 24 | b >>> 8) & 4278255360;a.sigBytes = 4 * (k.length + 1);this._process();a = this._hash;k = a.words;for (b = 0; 4 > b; b++) {h = k[b], k[b] = (h << 8 | h >>> 24) & 16711935 | (h << 24 | h >>> 8) & 4278255360;}return a;}, clone: function clone() {var a = t.clone.call(this);a._hash = this._hash.clone();return a;} });r.MD5 = t._createHelper(q);r.HmacMD5 = t._createHmacHelper(q);})(Math);\n  /* jshint ignore:end */\n  return CryptoJS.MD5(message).toString();\n};\n\n\n/***\r\n   * Transform base64 image to blob\r\n   * @b64Data \r\n   * @contentType \r\n   * @sliceSize \r\n   */\nbizagi.util.b64toBlob = function (b64Data, contentType, sliceSize) {\n  contentType = contentType || '';\n  sliceSize = sliceSize || 512;\n\n  var byteCharacters = atob(b64Data);\n  var byteArrays = [];\n\n  for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    var slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    var byteNumbers = new Array(slice.length);\n    for (var i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    var byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  var blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\nbizagi.util.arrayEach = function (array, callback) {\n  if (!!array) {\n    if (Object.prototype.toString.apply(array) === \"[object Array]\" && Object.prototype.toString.apply(callback) === \"[object Function]\") {\n      var index, value;\n      for (index in array) {\n        if (array.hasOwnProperty(index)) {\n          value = callback.call(array[index], index, array[index]);\n          if (value === false) {\n            return;\n          }\n        }\n      }\n    } else {\n      $.each(array, callback);\n    }\n  }\n};\n\nfunction printf(msg) {\n  var args = Array.prototype.slice.call(arguments, 1),arg;\n  return msg.replace(/(%[disv])/g, function (a, val) {\n    arg = args.shift();\n    if (arg !== undefined) {\n      switch (val.charCodeAt(1)) {\n        case 100:\n          return +arg; // d\n        case 105:\n          return Math.round(+arg); // i\n        case 115:\n          return String(arg); // s\n        case 118:\n          return arg; // v\n      }\n    }\n    return val;\n  });\n}\n\n/*\r\n  * Validates if the text is a valid opening and closing tags, including classes\r\n  */\nbizagi.util.isHTMLValidText = function (text) {\n  var ex = new RegExp(/<(.|\\n)*?>/g);\n  return ex.test(text);\n};\n\n\n/*\r\n   *   Determines if a control as a scrollbar \r\n   */\nbizagi.util.hasScroll = function (el, direction) {\n  if (el.length)\n  el = el[0];\n  direction = direction === 'vertical' ? 'scrollTop' : 'scrollLeft';\n  var result = !!el[direction];\n  if (!result) {\n    el[direction] = 1;\n    result = !!el[direction];\n    el[direction] = 0;\n  }\n  return result;\n};\n\n/**\r\n    * Convert String to Base64 Unicode\r\n    * @param {} str \r\n    * @returns {} \r\n    */\nbizagi.util.b64EncodeUnicode = function (string) {\n  return btoa(encodeURIComponent(string).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode(\"0x\" + p1);\n  }));\n};\n\n//remove all the character except the +, - and decimal point\nbizagi.util.getStandardNotation = function (number, decimalSymbol) {\n  var plusCharacter = '+';\n  var minusCharacter = '-';\n  var decimalSymbol = decimalSymbol || '.';\n  var expSymbol = 'e';\n  var tmp = '';\n  //remove all the character except the +, -, decimal point and the numbers\n  var decimalNumber = false;\n  var exponentialNumber = false;\n  number = (number.length > 0 ? number.toString().toLowerCase() : '').replace(/ /g, '');\n  for (var i = 0; i < number.length; i++) {\n    if ((number[i] === plusCharacter || number[i] === minusCharacter) && (i === 0 || number[i - 1] == expSymbol)) {\n      tmp += number[i];\n    } else if (!isNaN(Number(number[i]))) {\n      tmp += number[i];\n    } else\n    if (number[i] === decimalSymbol && !decimalNumber) {\n      tmp += number[i];\n      decimalNumber = true;\n    } else\n    if (number[i] === expSymbol && !exponentialNumber) {\n      tmp += number[i];\n      exponentialNumber = true;\n    }\n  }\n  return tmp;\n};\n\n//Return it in normalized scientific notation\nbizagi.util.scientificNotationFormat = function (number, decimalSymbol, sdLimit, expMinLimit, expMaxLimit) {\n  decimalSymbol = decimalSymbol || '.';\n  number = bizagi.util.getStandardNotation(number, decimalSymbol);\n  sdLimit = sdLimit > 0 ? sdLimit : 38;\n  expMinLimit = expMinLimit > 0 ? expMinLimit : -125;\n  expMaxLimit = expMaxLimit > 0 ? expMaxLimit : 125;\n  var expSimbol = 'e';\n  var sNregex = new RegExp('[0-9]+(' + decimalSymbol + '[0-9]+)?(e[+-]?[0-9]+)?');\n  var sNFormat = number.match(sNregex);\n\n  //get que prefix\n  var exp = 0;\n\n  var prefix = number[0] === '-' ? number[0] : '';\n  var originalPointIndex = 0;\n\n  number = number.replace(prefix, '');\n\n  //if the number is not in scientific notation\n  if (sNFormat && sNFormat[0] && sNFormat[2]) {\n    var tempParts = sNFormat[0] ? sNFormat[0].replace(sNFormat[2], '').split(decimalSymbol) : '';\n\n    var significantDigits = '';\n    var intPart = '';\n\n    //calculate significant digits\n    //remove zeros at the left\n    tempParts[0] = tempParts[0].replace(/^0+/g, '');\n\n    if (tempParts[0].length > 1) {\n      significantDigits = tempParts[0].slice(1);\n      originalPointIndex = significantDigits.length;\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(sNFormat[1] || '');\n    } else\n    if (tempParts[0].length === 1) {\n      intPart = tempParts[0][0] || '';\n      significantDigits = significantDigits.concat(tempParts[1] || '');\n    } else\n    {\n      originalPointIndex = tempParts[1].length;\n      tempParts[1] = tempParts[1].replace(/^0+/g, '');\n      originalPointIndex = tempParts[1].length - 1 - originalPointIndex;\n      intPart = tempParts[1][0];\n      significantDigits = tempParts[1].slice(1);\n    }\n    //remove . and zeros from significant digits\n    significantDigits = significantDigits.replace(decimalSymbol, '').replace(/0+$/g, '');\n\n    if (significantDigits.length >= sdLimit) {\n      significantDigits = significantDigits.slice(0, sdLimit - 1);\n    }\n    exp = Number(sNFormat[2].replace(expSimbol, '')) + originalPointIndex;\n    exp = exp > expMaxLimit ? expMaxLimit : exp < expMinLimit ? expMinLimit : exp;\n    return prefix + intPart + (significantDigits ? decimalSymbol + significantDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n  } else\n  if (number) {\n\n    originalPointIndex = number.indexOf(decimalSymbol);\n    var from = 0;\n    var to = number.length - 1;\n\n    //remove decimal point\n    number = number.replace(decimalSymbol, '');\n\n    //from\n    var i = from;\n    while (!significantFlag) {\n      if (number[i] !== '0' && number[i] !== decimalSymbol) {significantFlag = true;from = i;} else\n      {i++;}\n    }\n    //to\n    var significantFlag = false;\n    var j = to;\n    while (!significantFlag) {\n      if (number[j] !== '0' && number[j] !== decimalSymbol && '-') {significantFlag = true;to = j + 1;} else\n      {j--;}\n    }\n    to = to > sdLimit + from ? sdLimit + from : to;\n    if (originalPointIndex !== -1) {\n      //find significant digits\n      var significantFlag = false;\n      var significantDigits = number.slice(from, to);\n      var pointIndex = from + 1;\n      exp = originalPointIndex - pointIndex;\n      if (significantDigits.length > 0 && !isNaN(Number(significantDigits[0]))) {\n        return prefix + significantDigits[0] + (significantDigits.length > 1 ? decimalSymbol + significantDigits.slice(1) : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else\n      {return '0';}\n\n    } else\n    {\n      //Int numbers\n      var firstDigit = number.slice(from, from + 1);\n      var restDigits = number.slice(from + 1, number.length);\n      exp = restDigits.length;\n      restDigits = restDigits.replace(/0+$/g, '');\n      if (restDigits.length > sdLimit) {\n        restDigits = number.slice(from + 1, sdLimit + from);\n      }\n      if (Number(firstDigit)) {\n        return prefix + firstDigit + (restDigits.length > 0 ? decimalSymbol + restDigits : '') + expSimbol + (exp > 0 ? '+' + exp : exp);\n      } else {return '0';}\n    }\n  } else\n  {return '';}\n};\n\nbizagi.util.isString = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object String]\";\n};\n\nbizagi.util.isArray = function (value) {\n  return Object.prototype.toString.apply(value) === \"[object Array]\";\n};","//  This file is part of the jQuery formatCurrency Plugin.\n//\n//    The jQuery formatCurrency Plugin is free software: you can redistribute it\n//    and/or modify it under the terms of the GNU General Public License as published \n//    by the Free Software Foundation, either version 3 of the License, or\n//    (at your option) any later version.\n\n//    The jQuery formatCurrency Plugin is distributed in the hope that it will\n//    be useful, but WITHOUT ANY WARRANTY; without even the implied warranty \n//    of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n//    GNU General Public License for more details.\n//\n//    You should have received a copy of the GNU General Public License along with \n//    the jQuery formatCurrency Plugin.  If not, see <http://www.gnu.org/licenses/>.\n\n(function ($) {\n\n  $.formatCurrency = {};\n\n  $.formatCurrency.regions = [];\n\n  // default Region is en\n  $.formatCurrency.regions[''] = {\n    symbol: '$',\n    positiveFormat: '%s%n',\n    negativeFormat: '(%s%n)',\n    decimalSymbol: '.',\n    digitGroupSymbol: ',',\n    groupDigits: true };\n\n\n  $.fn.formatCurrency = function (destination, settings) {\n\n    if (arguments.length == 1 && typeof destination !== \"string\") {\n      settings = destination;\n      destination = false;\n    }\n\n    // initialize defaults\n    var defaults = {\n      name: \"formatCurrency\",\n      colorize: false,\n      region: '',\n      global: true,\n      roundToDecimalPlace: 2, // roundToDecimalPlace: -1; for no rounding; 0 to round to the dollar; 1 for one digit cents; 2 for two digit cents; 3 for three digit cents; ...\n      eventOnDecimalsEntered: false };\n\n    // initialize default region\n    defaults = $.extend(defaults, $.formatCurrency.regions['']);\n    // override defaults with settings passed in\n    settings = $.extend(defaults, settings);\n\n    // check for region setting\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var $this = $(this);\n\n      // get number\n      var num = '0';\n      var multiCeroPattern = new RegExp(\"^(0+|-0+)\", \"g\");\n      num = $this[$this.is('input, select, textarea') ? 'val' : 'html']();\n\n      //identify '(123)' as a negative number\n      if (num.search('\\\\(') >= 0) {\n        num = '-' + num;\n      }\n\n      // Identify 0000 and -0000 pattern, and replace to 0\n      if (!num.match(/[1-9]/g)) num = num.replace(multiCeroPattern, 0);\n\n      if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n        return;\n      }\n\n      // if the number is valid use it, otherwise clean it\n      if (isNaN(num)) {\n        // clean number\n        num = num.replace(settings.regex, '');\n\n        if (num === '' || num === '-' && settings.roundToDecimalPlace === -1) {\n          return;\n        }\n\n        if (settings.decimalSymbol != '.') {\n          num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arithmetic\n        }\n        if (isNaN(num)) {\n          num = '0';\n        }\n      }\n\n      // evalutate number input\n      var numParts = String(num).split('.');\n      var isPositive = num == Math.abs(num);\n      var hasDecimals = numParts.length > 1;\n      var decimals = hasDecimals ? numParts[1].toString() : '0';\n      var originalDecimals = decimals;\n\n      // format number\n      num = Math.abs(numParts[0]);\n      num = isNaN(num) ? 0 : num;\n      if (settings.roundToDecimalPlace >= 0) {\n        decimals = parseFloat('1.' + decimals); // prepend \"0.\"; (IE does NOT round 0.50.toFixed(0) up, but (1+0.50).toFixed(0)-1\n        decimals = decimals.toFixed(settings.roundToDecimalPlace); // round\n        if (decimals.substring(0, 1) == '2') {\n          num = Number(num) + 1;\n        }\n        decimals = decimals.substring(2); // remove \"0.\"\n      }\n      num = String(num);\n\n      if (settings.groupDigits) {\n        for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++) {\n          num = num.substring(0, num.length - (4 * i + 3)) + settings.digitGroupSymbol + num.substring(num.length - (4 * i + 3));\n        }\n      }\n\n      if (hasDecimals && settings.roundToDecimalPlace == -1 || settings.roundToDecimalPlace > 0) {\n        num += settings.decimalSymbol + decimals;\n      }\n\n      // format symbol/negative\n      var format = isPositive ? settings.positiveFormat : settings.negativeFormat;\n      var money = format.replace(/%s/g, settings.symbol);\n      money = money.replace(/%n/g, num);\n\n      // setup destination\n      var $destination = $([]);\n      if (!destination) {\n        $destination = $this;\n      } else {\n        $destination = $(destination);\n      }\n      // set destination\n      $destination[$destination.is('input, select, textarea') ? 'val' : 'html'](money);\n\n      if (\n      hasDecimals &&\n      settings.eventOnDecimalsEntered &&\n      originalDecimals.length > settings.roundToDecimalPlace)\n      {\n        $destination.trigger('decimalsEntered', originalDecimals);\n      }\n\n      // colorize\n      if (settings.colorize) {\n        $destination.css('color', isPositive ? 'black' : 'red');\n      }\n    });\n  };\n\n  // Remove all non numbers from text\n  $.fn.toNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"toNumber\",\n      region: '',\n      global: true },\n    $.formatCurrency.regions['']);\n\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n\n    return this.each(function () {\n      var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n      $(this)[method]($(this)[method]().replace('(', '(-').replace(settings.regex, ''));\n    });\n  };\n\n  // returns the value from the first element as a number\n  $.fn.asNumber = function (settings) {\n    var defaults = $.extend({\n      name: \"asNumber\",\n      region: '',\n      parse: true,\n      parseType: 'Float',\n      global: true },\n    $.formatCurrency.regions['']);\n    settings = jQuery.extend(defaults, settings);\n    if (settings.region.length > 0) {\n      settings = $.extend(settings, getRegionOrCulture(settings.region));\n    }\n    settings.regex = generateRegex(settings);\n    settings.parseType = validateParseType(settings.parseType);\n\n    var method = $(this).is('input, select, textarea') ? 'val' : 'html';\n    var num = $(this)[method]();\n    num = num ? num : \"\";\n    num = num.replace('(', '(-');\n    num = num.replace(settings.regex, '');\n    if (!settings.parse) {\n      return num;\n    }\n\n    if (num.length == 0) {\n      num = '0';\n    }\n\n    if (settings.decimalSymbol != '.') {\n      num = num.replace(settings.decimalSymbol, '.'); // reset to US decimal for arthmetic\n    }\n\n    return window['parse' + settings.parseType](num);\n  };\n\n  function getRegionOrCulture(region) {\n    var regionInfo = $.formatCurrency.regions[region];\n    if (regionInfo) {\n      return regionInfo;\n    } else\n    {\n      if (/(\\w+)-(\\w+)/g.test(region)) {\n        var culture = region.replace(/(\\w+)-(\\w+)/g, \"$1\");\n        return $.formatCurrency.regions[culture];\n      }\n    }\n    // fallback to extend(null) (i.e. nothing)\n    return null;\n  }\n\n  function validateParseType(parseType) {\n    switch (parseType.toLowerCase()) {\n      case 'int':\n        return 'Int';\n      case 'float':\n        return 'Float';\n      default:\n        throw 'invalid parseType';}\n\n  }\n\n  function generateRegex(settings) {\n    if (settings.symbol === '') {\n      return new RegExp(\"[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    } else\n    {\n      var symbol = settings.symbol.replace('$', '\\\\$').replace('.', '\\\\.');\n      return new RegExp(symbol + \"|[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\n    }\n  }\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}(function (a) {\n  function k(b, c) {\n    function j() {var a = document.body,b = document.documentElement;return Math.max(a.scrollHeight, a.offsetHeight, b.clientHeight, b.scrollHeight, b.offsetHeight);}function u(b) {e = a(\"li.dw-v\", b).eq(0).index();d = a(\"li.dw-v\", b).eq(-1).index();f = i.height;F = m;}function x(b) {var a = i.headerText;return a ? \"function\" == typeof a ? a.call(B, b) : a.replace(/{value}/i, b) : \"\";}function p() {m.temp = J && null !== m.val && m.val != b.val() || null === m.values ? i.parseValue(b.val() ? b.val() : \"\", m) : m.values.slice(0);m.setValue(!0);}\n    function z(b, c, e, u, f) {i.validate.call(B, y, e);a(\".dww ul\", y).each(function (u) {var i = a(this),d = a('li[data-val=\"' + m.temp[u] + '\"]', i),i = d.index(),g = d,d = i;if (!g.hasClass(\"dw-v\")) {for (var h = g, x = 0, j = 0; h.prev().length && !h.hasClass(\"dw-v\");) {h = h.prev(), x++;}for (; g.next().length && !g.hasClass(\"dw-v\");) {g = g.next(), j++;}j < x && j && 1 == !f || !x || !h.hasClass(\"dw-v\") || 1 == f ? d += j : (g = h, d -= x);m.temp[u] = g.data(\"val\");}if (i != d || u == e || void 0 === e) m.scroll(a(this), d, u == e ? b : 0, c, u);});m.change(u);}function k() {\n      var b = 0,c = 0,u = a(window).width(),\n      e = a(window).height(),d = a(window).scrollTop(),i = a(\".dwo\", y),f = a(\".dw\", y),g,h;a(\".dwc\", y).each(function () {g = a(this).outerWidth(!0);b += g;c = g > c ? g : c;});g = b > u ? c : b;f.width(g);g = f.outerWidth();h = f.outerHeight();f.css({ left: (u - g) / 2, top: d + (e - h) / 2 });i.height(0).height(j());\n    }function w(b) {var a = +b.data(\"pos\") + 1;l(b, a > d ? e : a, 1);}function E(b) {var a = +b.data(\"pos\") - 1;l(b, a < e ? d : a, 2);}var m = this,B = b,b = a(B),M,i = a.extend({}, D),O,y,N = {},P = {},J = b.is(\"input\"),K = !1;m.enable = function () {i.disabled = !1;J && b.prop(\"disabled\", !1);};\n    m.disable = function () {i.disabled = !0;J && b.prop(\"disabled\", !0);};m.scroll = function (b, a, c, u, e) {\n      var d = (O - a) * i.height;b.attr(\"style\", (c ? H + \"-transition:all \" + c.toFixed(1) + \"s ease-out;\" : \"\") + (I ? H + \"-transform:translate3d(0,\" + d + \"px,0);\" : \"top:\" + d + \"px;\"));if (c) {\n        var g = 0;clearInterval(N[e]);N[e] = setInterval(function () {g += 0.1;b.data(\"pos\", Math.round((a - u) * Math.sin(g / c * (Math.PI / 2)) + u));g >= c && (clearInterval(N[e]), b.data(\"pos\", a));}, 100);clearTimeout(P[e]);P[e] = setTimeout(function () {\n          \"mixed\" == i.mode && !b.hasClass(\"dwa\") &&\n          b.closest(\".dwwl\").find(\".dwwb\").fadeIn(\"fast\");\n        }, 1E3 * c);\n      } else b.data(\"pos\", a);\n    };m.setValue = function (a, c, e) {var u = i.formatResult(m.temp);m.val = u;m.values = m.temp.slice(0);K && a && z(e);c && J && b.val(u).trigger(\"change\");};m.validate = function (b, a, c, u) {z(b, a, c, !0, u);};m.change = function (b) {var c = i.formatResult(m.temp);\"inline\" == i.display ? m.setValue(!1, b) : a(\".dwv\", y).html(x(c));b && i.onChange.call(B, c, m);};m.hide = function () {\n      if (!1 === i.onClose.call(B, m.val, m)) return !1;a(\".dwtd\").prop(\"disabled\", !1).removeClass(\"dwtd\");\n      b.blur();y && y.remove();K = !1;a(window).unbind(\".dw\");\n    };m.show = function () {\n      if (i.disabled || K) return !1;var c = i.height,e = i.rows * c;p();for (var d = '<div class=\"' + i.theme + '\">' + (\"inline\" == i.display ? '<div class=\"dw dwbg dwi\"><div class=\"dwwr\">' : '<div class=\"dwo\"></div><div class=\"dw dwbg\"><div class=\"dwwr\">' + (i.headerText ? '<div class=\"dwv\"></div>' : \"\")), f = 0; f < i.wheels.length; f++) {\n        var d = d + ('<div class=\"dwc' + (\"scroller\" != i.mode ? \" dwpm\" : \" dwsc\") + (i.showLabel ? \"\" : \" dwhl\") + '\"><div class=\"dwwc dwrc\"><table cellpadding=\"0\" cellspacing=\"0\"><tr>'),\n        h;for (h in i.wheels[f]) {\n          var d = d + ('<td><div class=\"dwwl dwrc\">' + (\"scroller\" != i.mode ? '<div class=\"dwwb dwwbp\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>+</span></div><div class=\"dwwb dwwbm\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>&ndash;</span></div>' : \"\") + '<div class=\"dwl\">' + h + '</div><div class=\"dww dwrc\" style=\"height:' + e + \"px;min-width:\" + i.width + 'px;\"><ul>'),x;for (x in i.wheels[f][h]) {d += '<li class=\"dw-v\" data-val=\"' + x + '\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\">' + i.wheels[f][h][x] +\n            \"</li>\";}d += '</ul><div class=\"dwwo\"></div></div><div class=\"dwwol\"></div></div></td>';\n        }d += \"</tr></table></div></div>\";\n      }d += (\"inline\" != i.display ? '<div class=\"dwbc\"><span class=\"dwbw dwb-s\"><a href=\"#\" class=\"dwb\">' + i.setText + '</a></span><span class=\"dwbw dwb-c\"><a href=\"#\" class=\"dwb\">' + i.cancelText + \"</a></span></div>\" : '<div class=\"dwcc\"></div>') + \"</div></div></div>\";y = a(d);z();\"inline\" != i.display ? y.appendTo(\"body\") : b.is(\"div\") ? b.html(y) : y.insertAfter(b);K = !0;M.init(y, m);\"inline\" != i.display && (a(\".dwb-s a\",\n      y).click(function () {m.setValue(!1, !0);m.hide();i.onSelect.call(B, m.val, m);return !1;}), a(\".dwb-c a\", y).click(function () {m.hide();i.onCancel.call(B, m.val, m);return !1;}), a(\"input,select\").each(function () {a(this).prop(\"disabled\") || a(this).addClass(\"dwtd\");}), a(\"input,select\").prop(\"disabled\", !0), k(), a(window).bind(\"resize.dw\", k));y.delegate(\".dwwl\", \"DOMMouseScroll mousewheel\", function (b) {\n        if (!i.readonly) {\n          b.preventDefault();var b = b.originalEvent,b = b.wheelDelta ? b.wheelDelta / 120 : b.detail ? -b.detail / 3 : 0,c = a(\"ul\",\n          this),d = +c.data(\"pos\"),d = Math.round(d - b);u(c);l(c, d, b < 0 ? 1 : 2);\n        }\n      }).delegate(\".dwb, .dwwb\", G, function () {a(this).addClass(\"dwb-a\");}).delegate(\".dwwb\", G, function (b) {if (!i.readonly) {b.preventDefault();b.stopPropagation();var c = a(this).closest(\".dwwl\").find(\"ul\");func = a(this).hasClass(\"dwwbp\") ? w : E;u(c);clearInterval(g);g = setInterval(function () {func(c);}, i.delay);func(c);}}).delegate(\".dwwl\", G, function (b) {\n        if (!r && i.mode != \"clickpick\" && !i.readonly) {\n          b.preventDefault();r = true;s = a(\"ul\", this).addClass(\"dwa\");i.mode ==\n          \"mixed\" && a(\".dwwb\", this).fadeOut(\"fast\");v = +s.data(\"pos\");u(s);t = o(b);A = new Date();q = t;m.scroll(s, v);\n        }\n      });i.onShow.call(B, y, m);\n    };m.init = function (c) {\n      M = a.extend({ defaults: {}, init: n }, a.scroller.themes[c.theme ? c.theme : i.theme]);a.extend(i, M.defaults, c);m.settings = i;O = Math.floor(i.rows / 2);var d = a.scroller.presets[i.preset];b.unbind(\".dw\");d && (d = d.call(B, m), a.extend(i, d, c), a.extend(C, d.methods));void 0 !== b.data(\"dwro\") && (B.readOnly = h(b.data(\"dwro\")));K && m.hide();\"inline\" == i.display ? m.show() : (p(), J && i.showOnFocus && (\n      b.data(\"dwro\", B.readOnly), B.readOnly = !0, b.bind(\"focus.dw\", m.show)));\n    };m.values = null;m.val = null;m.temp = null;m.init(c);\n  }function w(b) {for (var a in b) {if (void 0 !== z[b[a]]) return !0;}return !1;}function o(b) {return E ? b.originalEvent ? b.originalEvent.changedTouches[0].pageY : b.changedTouches[0].pageY : b.pageY;}function h(b) {return !0 === b || \"true\" == b;}function l(b, c, g, u, f) {\n    var h = b.closest(\".dwwr\").find(\"ul\").index(b),c = c > d ? d : c,c = c < e ? e : c,b = a(\"li\", b).eq(c);F.temp[h] = b.data(\"val\");F.validate(u ? c == f ? 0.1 : Math.abs(0.1 * (c -\n    f)) : 0, f, h, g);\n  }var j = {},g,n = function n() {},f,e,d,F,p = new Date().getTime(),r = !1,s = null,t,q,A,v,z = document.createElement(z).style,I = w([\"perspectiveProperty\", \"WebkitPerspective\", \"MozPerspective\", \"OPerspective\", \"msPerspective\"]) && \"webkitPerspective\" in document.documentElement.style,H = function () {var b = [\"Webkit\", \"Moz\", \"O\", \"ms\"],a;for (a in b) {if (w([b[a] + \"Transform\"])) return \"-\" + b[a].toLowerCase();}return \"\";}(),E = \"ontouchstart\" in window,G = E ? \"touchstart\" : \"mousedown\",L = E ? \"touchend\" : \"mouseup\",D = { width: 70, height: 40,\n    rows: 3, delay: 300, disabled: !1, readonly: !1, showOnFocus: !0, showLabel: !0, wheels: [], theme: \"\", headerText: \"{value}\", display: \"modal\", mode: \"scroller\", preset: \"\", setText: \"Set\", cancelText: \"Cancel\", onShow: n, onClose: n, onSelect: n, onCancel: n, onChange: n, formatResult: function formatResult(b) {for (var a = \"\", d = 0; d < b.length; d++) {a += (0 < d ? \" \" : \"\") + b[d];}return a;}, parseValue: function parseValue(b, a) {\n      for (var d = a.settings.wheels, b = b.split(\" \"), e = [], f = 0, g = 0; g < d.length; g++) {for (var h in d[g]) {\n          if (void 0 !== d[g][h][b[f]]) e.push(b[f]);else for (var j in d[g][h]) {\n            e.push(j);\n            break;\n          }f++;\n        }}return e;\n    }, validate: n },\n  C = { init: function init(b) {void 0 === b && (b = {});return this.each(function () {this.id || (p += 1, this.id = \"scoller\" + p);j[this.id] = new k(this, b);});}, enable: function enable() {return this.each(function () {var b = j[this.id];b && b.enable();});}, disable: function disable() {return this.each(function () {var b = j[this.id];b && b.disable();});}, isDisabled: function isDisabled() {var b = j[this[0].id];if (b) return b.settings.disabled;}, option: function option(b, a) {\n      return this.each(function () {\n        var d = j[this.id];if (d) {\n          var e = {};\"object\" === _typeof(b) ?\n          e = b : e[b] = a;d.init(e);\n        }\n      });\n    }, setValue: function setValue(b, a, d) {return this.each(function () {var e = j[this.id];e && (e.temp = b, e.setValue(!0, a, d));});}, getInst: function getInst() {return j[this[0].id];}, getValue: function getValue() {var b = j[this[0].id];if (b) return b.values;}, show: function show() {var b = j[this[0].id];if (b) return b.show();}, hide: function hide() {return this.each(function () {var b = j[this.id];b && b.hide();});}, destroy: function destroy() {\n      return this.each(function () {\n        var b = j[this.id];b && (b.hide(), a(this).unbind(\".dw\"), delete j[this.id], a(this).is(\"input\") && (\n        this.readOnly = h(a(this).data(\"dwro\"))));\n      });\n    } };\n  a(document).bind(E ? \"touchmove\" : \"mousemove\", function (b) {r && (b.preventDefault(), q = o(b), b = v + (t - q) / f, b = b > d + 1 ? d + 1 : b, b = b < e - 1 ? e - 1 : b, F.scroll(s, b));});a(document).bind(L, function (b) {if (r) {b.preventDefault();s.removeClass(\"dwa\");var c = new Date() - A,b = v + (t - q) / f,b = b > d + 1 ? d + 1 : b,b = b < e - 1 ? e - 1 : b;300 > c ? (c = (q - t) / c, c = c * c / 0.0012, 0 > q - t && (c = -c)) : c = q - t;l(s, Math.round(v - c / f), 0, !0, Math.round(b));r = !1;s = null;}clearInterval(g);a(\".dwb-a\").removeClass(\"dwb-a\");});a.fn.scroller = function (b) {\n    if (C[b]) return C[b].apply(this,\n    Array.prototype.slice.call(arguments, 1));if (\"object\" === _typeof(b) || !b) return C.init.apply(this, arguments);a.error(\"Unknown method\");\n  };a.scroller = { setDefaults: function setDefaults(b) {a.extend(D, b);}, presets: {}, themes: {} };\n})(jQuery);(function (a) {\n  var k = new Date(),w = { dateFormat: \"mm/dd/yy\", dateOrder: \"mmddy\", timeWheels: \"hhiiA\", timeFormat: \"hh:ii A\", startYear: k.getFullYear() - 100, endYear: k.getFullYear() + 1, monthNames: \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\",\"), monthNamesShort: \"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec\".split(\",\"), dayNames: \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\"), dayNamesShort: \"Sun,Mon,Tue,Wed,Thu,Fri,Sat\".split(\",\"), shortYearCutoff: \"+10\",\n    monthText: \"Month\", dayText: \"Day\", yearText: \"Year\", hourText: \"Hours\", minuteText: \"Minutes\", secText: \"Seconds\", ampmText: \"&nbsp;\", stepHour: 1, stepMinute: 1, stepSecond: 1, separator: \" \" },\n  k = function k(o) {\n    function h(b, a, c) {return void 0 !== p[a] ? +b[p[a]] : void 0 !== c ? c : H[r[a]] ? H[r[a]]() : r[a](H);}function l(b, a) {return Math.floor(b / a) * a;}function j(b) {var a = h(b, \"h\", 0);return new Date(h(b, \"y\"), h(b, \"m\"), h(b, \"d\"), h(b, \"ap\") ? a + 12 : a, h(b, \"i\", 0), h(b, \"s\", 0));}var g = a(this),n;if (g.is(\"input\")) {\n      switch (g.attr(\"type\")) {\n        case \"date\":n =\n          \"yy-mm-dd\";break;case \"datetime\":n = \"yy-mm-ddTHH:ii:ssZ\";break;case \"datetime-local\":n = \"yy-mm-ddTHH:ii:ss\";break;case \"month\":n = \"yy-mm\";w.dateOrder = \"mmyy\";break;case \"time\":n = \"HH:ii:ss\";}\n      var f = g.attr(\"min\"),g = g.attr(\"max\");f && (w.minDate = a.scroller.parseDate(n, f));g && (w.maxDate = a.scroller.parseDate(n, g));\n    }var e = a.extend({}, w, o.settings),d = 0,f = [],k = [],p = {},r = { y: \"getFullYear\", m: \"getMonth\", d: \"getDate\", h: function h(b) {b = b.getHours();b = z && 12 <= b ? b - 12 : b;return l(b, E);}, i: function i(b) {return l(b.getMinutes(), G);},\n      s: function s(b) {return l(b.getSeconds(), L);}, ap: function ap(b) {return v && 11 < b.getHours() ? 1 : 0;} },\n    s = e.preset,t = e.dateOrder,q = e.timeWheels,A = t.match(/D/),v = q.match(/a/i),z = q.match(/h/),I = \"datetime\" == s ? e.dateFormat + e.separator + e.timeFormat : \"time\" == s ? e.timeFormat : e.dateFormat,H = new Date(),E = e.stepHour,G = e.stepMinute,L = e.stepSecond,D = e.minDate,C = e.maxDate;n = n ? n : I;if (s.match(/date/i)) {\n      a.each([\"y\", \"m\", \"d\"], function (b, a) {b = t.search(RegExp(a, \"i\"));-1 < b && k.push({ o: b, v: a });});k.sort(function (b, a) {return b.o > a.o ? 1 : -1;});\n      a.each(k, function (b, a) {p[a.v] = b;});for (var g = {}, b = 0; 3 > b; b++) {if (b == p.y) {d++;g[e.yearText] = {};for (var c = D ? D.getFullYear() : e.startYear, Q = C ? C.getFullYear() : e.endYear; c <= Q; c++) {g[e.yearText][c] = t.match(/yy/i) ? c : (c + \"\").substr(2, 2);}} else if (b == p.m) {d++;g[e.monthText] = {};for (c = 0; 12 > c; c++) {g[e.monthText][c] = t.match(/MM/) ? e.monthNames[c] : t.match(/M/) ? e.monthNamesShort[c] : t.match(/mm/) && 9 > c ? \"0\" + (c + 1) : c + 1;}} else if (b == p.d) {d++;g[e.dayText] = {};for (c = 1; 32 > c; c++) {g[e.dayText][c] = t.match(/dd/i) && 10 > c ? \"0\" + c : c;}}}f.push(g);\n    }if (s.match(/time/i)) {\n      g =\n      {};if (q.match(/h/i)) {p.h = d++;g[e.hourText] = {};for (c = 0; c < (z ? 12 : 24); c += E) {g[e.hourText][c] = z && 0 == c ? 12 : q.match(/hh/i) && 10 > c ? \"0\" + c : c;}}if (q.match(/i/)) {p.i = d++;g[e.minuteText] = {};for (c = 0; 60 > c; c += G) {g[e.minuteText][c] = q.match(/ii/) && 10 > c ? \"0\" + c : c;}}if (q.match(/s/)) {p.s = d++;g[e.secText] = {};for (c = 0; 60 > c; c += L) {g[e.secText][c] = q.match(/ss/) && 10 > c ? \"0\" + c : c;}}v && (p.ap = d++, d = q.match(/A/), g[e.ampmText] = { \"0\": d ? \"AM\" : \"am\", 1: d ? \"PM\" : \"pm\" });f.push(g);\n    }return { wheels: f, headerText: function headerText() {\n        return a.scroller.formatDate(I, j(o.temp),\n        e);\n      }, formatResult: function formatResult(b) {return a.scroller.formatDate(n, j(b), e);}, parseValue: function parseValue(b) {var c = new Date(),d = [];try {c = a.scroller.parseDate(n, b, e);} catch (g) {}for (var f in p) {d[p[f]] = c[r[f]] ? c[r[f]]() : r[f](c);}return d;}, validate: function validate(b, c) {\n        var d = o.temp,f = { m: 0, d: 1, h: 0, i: 0, s: 0, ap: 0 },g = { m: 11, d: 31, h: l(z ? 11 : 23, E), i: l(59, G), s: l(59, L), ap: 1 },j = !0,n = !0;a.each(D || C ? \"y,m,d,ap,h,i,s\".split(\",\") : c == p.y || c == p.m || void 0 === c ? [\"d\"] : [], function (c, l) {\n          if (void 0 !== p[l]) {\n            var o = f[l],i = g[l],z = 31,k = h(d, l),s = a(\"ul\", b).eq(p[l]),\n            q,x;\"d\" == l && (q = h(d, \"y\"), x = h(d, \"m\"), i = z = 32 - new Date(q, x, 32).getDate(), A && a(\"li\", s).each(function () {var b = a(this),c = b.data(\"val\"),d = new Date(q, x, c).getDay();b.html(t.replace(/[my]/gi, \"\").replace(/dd/, 10 > c ? \"0\" + c : c).replace(/d/, c).replace(/DD/, e.dayNames[d]).replace(/D/, e.dayNamesShort[d]));}));j && D && (o = D[r[l]] ? D[r[l]]() : r[l](D));n && C && (i = C[r[l]] ? C[r[l]]() : r[l](C));if (\"y\" != l) {\n              var F = a('li[data-val=\"' + o + '\"]', s).index(),w = a('li[data-val=\"' + i + '\"]', s).index();a(\"li\", s).removeClass(\"dw-v\").slice(F, w + 1).addClass(\"dw-v\");\n              \"d\" == l && a(\"li\", s).removeClass(\"dw-h\").slice(z).addClass(\"dw-h\");k < o && (k = o);k > i && (k = i);\n            }j && (j = k == o);n && (n = k == i);if (e.invalid && \"d\" == l) {\n              var v = [];e.invalid.dates && a.each(e.invalid.dates, function (b, a) {a.getFullYear() == q && a.getMonth() == x && v.push(a.getDate() - 1);});if (e.invalid.daysOfWeek) {var I = new Date(q, x, 1).getDay();a.each(e.invalid.daysOfWeek, function (b, a) {for (var c = a - I; c < z; c = c + 7) {c >= 0 && v.push(c);}});}e.invalid.daysOfMonth && a.each(e.invalid.daysOfMonth, function (b, a) {\n                a = (a + \"\").split(\"/\");a[1] ? a[0] - 1 == x && v.push(a[1] -\n                1) : v.push(a[0] - 1);\n              });a.each(v, function (b, c) {a(\"li\", s).eq(c).removeClass(\"dw-v\");});\n            }\n          }\n        });\n      }, methods: { getDate: function getDate(b) {var c = a(this).scroller(\"getInst\");if (c) return j(b ? c.temp : c.values);}, setDate: function setDate(b, c, d) {void 0 == c && (c = !1);return this.each(function () {var e = a(this).scroller(\"getInst\");if (e) {for (var f in p) {e.temp[p[f]] = b[r[f]] ? b[r[f]]() : r[f](b);}e.setValue(!0, c, d);}});} } };\n\n  };a.scroller.presets.date = k;a.scroller.presets.datetime = k;a.scroller.presets.time = k;a.scroller.formatDate = function (o, h, l) {\n    if (!h) return null;\n    for (var l = a.extend({}, w, l), j = function j(a) {for (var e = 0; d + 1 < o.length && o.charAt(d + 1) == a;) {e++, d++;}return e;}, g = function g(a, d, e) {d = \"\" + d;if (j(a)) for (; d.length < e;) {d = \"0\" + d;}return d;}, n = function n(a, d, e, f) {return j(a) ? f[d] : e[d];}, f = \"\", e = !1, d = 0; d < o.length; d++) {if (e) \"'\" == o.charAt(d) && !j(\"'\") ? e = !1 : f += o.charAt(d);else switch (o.charAt(d)) {\n        case \"d\":f += g(\"d\", h.getDate(), 2);break;case \"D\":f += n(\"D\", h.getDay(), l.dayNamesShort, l.dayNames);break;case \"o\":f += g(\"o\", (h.getTime() - new Date(h.getFullYear(), 0, 0).getTime()) / 864E5,\n          3);break;case \"m\":f += g(\"m\", h.getMonth() + 1, 2);break;case \"M\":f += n(\"M\", h.getMonth(), l.monthNamesShort, l.monthNames);break;case \"y\":f += j(\"y\") ? h.getFullYear() : (10 > h.getYear() % 100 ? \"0\" : \"\") + h.getYear() % 100;break;case \"h\":var k = h.getHours(),f = f + g(\"h\", 12 < k ? k - 12 : 0 == k ? 12 : k, 2);break;case \"H\":f += g(\"H\", h.getHours(), 2);break;case \"i\":f += g(\"i\", h.getMinutes(), 2);break;case \"s\":f += g(\"s\", h.getSeconds(), 2);break;case \"a\":f += 11 < h.getHours() ? \"pm\" : \"am\";break;case \"A\":f += 11 < h.getHours() ? \"PM\" : \"AM\";break;case \"'\":j(\"'\") ? f +=\n          \"'\" : e = !0;break;default:f += o.charAt(d);}}\n    return f;\n  };a.scroller.parseDate = function (k, h, l) {\n    var j = new Date();if (!k || !h) return j;for (var h = \"object\" == _typeof(h) ? h.toString() : h + \"\", g = a.extend({}, w, l), l = j.getFullYear(), n = j.getMonth() + 1, f = j.getDate(), e = -1, d = j.getHours(), j = j.getMinutes(), F = 0, p = -1, r = !1, s = function s(a) {(a = v + 1 < k.length && k.charAt(v + 1) == a) && v++;return a;}, t = function t(a) {\n      s(a);a = h.substr(A).match(RegExp(\"^\\\\d{1,\" + (\"@\" == a ? 14 : \"!\" == a ? 20 : \"y\" == a ? 4 : \"o\" == a ? 3 : 2) + \"}\"));if (!a) return 0;A += a[0].length;return parseInt(a[0],\n      10);\n    }, q = function q(a, d, e) {a = s(a) ? e : d;for (d = 0; d < a.length; d++) {if (h.substr(A, a[d].length).toLowerCase() == a[d].toLowerCase()) return A += a[d].length, d + 1;}return 0;}, A = 0, v = 0; v < k.length; v++) {if (r) \"'\" == k.charAt(v) && !s(\"'\") ? r = !1 : A++;else switch (k.charAt(v)) {\n        case \"d\":f = t(\"d\");break;case \"D\":q(\"D\", g.dayNamesShort, g.dayNames);break;case \"o\":e = t(\"o\");break;case \"m\":n = t(\"m\");break;case \"M\":n = q(\"M\", g.monthNamesShort, g.monthNames);break;case \"y\":l = t(\"y\");break;case \"H\":d = t(\"H\");break;case \"h\":d = t(\"h\");break;case \"i\":j =\n          t(\"i\");break;case \"s\":F = t(\"s\");break;case \"a\":p = q(\"a\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1;break;case \"A\":p = q(\"A\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1;break;case \"'\":s(\"'\") ? A++ : r = !0;break;default:A++;}}\n    100 > l && (l += new Date().getFullYear() - new Date().getFullYear() % 100 + (l <= g.shortYearCutoff ? 0 : -100));if (-1 < e) {n = 1;f = e;do {g = 32 - new Date(l, n - 1, 32).getDate();if (f <= g) break;n++;f -= g;} while (1);}d = new Date(l, n - 1, f, -1 == p ? d : p && 12 > d ? d + 12 : !p && 12 == d ? 0 : d, j, F);if (d.getFullYear() != l || d.getMonth() + 1 != n || d.getDate() != f) throw \"Invalid date\";return d;\n  };\n})(jQuery);(function (a) {\n  var k = { inputClass: \"\" };a.scroller.presets.select = function (w) {\n    var o = a.extend({}, k, w.settings),h = a(this),l = this.id + \"_dummy\";a('label[for=\"' + this.id + '\"]').attr(\"for\", l);var j = a('label[for=\"' + l + '\"]'),j = j.length ? j.text() : h.attr(\"name\"),g = [],n = [{}];n[0][j] = {};var f = n[0][j];a(\"option\", h).each(function () {var d = a(this).attr(\"value\");f[d] = a(this).text();a(this).prop(\"disabled\") && g.push(d);});a(\"#\" + l).remove();var e = a('<input type=\"text\" id=\"' + l + '\" value=\"' + f[h.val()] + '\" class=\"' + o.inputClass + '\" readonly />').insertBefore(h);\n    o.showOnFocus && e.focus(function () {w.show();});h.hide().closest(\".ui-field-contain\").trigger(\"create\");return { width: 200, wheels: n, headerText: !1, formatResult: function formatResult(a) {return f[a[0]];}, parseValue: function parseValue() {return [h.val()];}, validate: function validate(d) {a.each(g, function (e, f) {a('li[data-val=\"' + f + '\"]', d).removeClass(\"dw-v\");});}, onSelect: function onSelect(a, f) {e.val(a);h.val(f.values[0]).trigger(\"change\");}, onChange: function onChange(a, f) {\"inline\" == o.display && (e.val(a), h.val(f.temp[0]).trigger(\"change\"));}, onClose: function onClose() {e.blur();} };\n  };\n})(jQuery);(function (a) {a.scroller.themes.android = { defaults: { dateOrder: \"Mddyy\", mode: \"clickpick\", height: 50 } };})(jQuery);(function (a) {var k = { defaults: { dateOrder: \"Mddyy\", mode: \"mixed\", rows: 5, width: 70, showLabel: !1 } };a.scroller.themes[\"android-ics\"] = k;a.scroller.themes[\"android-ics light\"] = k;})(jQuery);(function (a) {a.scroller.themes.ios = { defaults: { dateOrder: \"MMdyy\", rows: 5, height: 30, width: 55, headerText: !1, showLabel: !1 } };})(jQuery);(function (a) {\n  a.scroller.themes.jqm = { defaults: { jqmBody: \"c\", jqmHeader: \"b\", jqmWheel: \"d\", jqmClickPick: \"c\", jqmSet: \"b\", jqmCancel: \"c\" }, init: function init(k, w) {\n      var o = w.settings;a(\".dw\", k).removeClass(\"dwbg\").addClass(\"ui-overlay-shadow ui-corner-all ui-body-a\");a(\".dwb-s a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmSet);a(\".dwb-c a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmCancel);a(\".dwwb\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmClickPick);a(\".dwv\", k).addClass(\"ui-header ui-bar-\" +\n      o.jqmHeader);a(\".dwwr\", k).addClass(\"ui-body-\" + o.jqmBody);a(\".dwpm .dww\", k).addClass(\"ui-body-\" + o.jqmWheel);\"inline\" != o.display && a(\".dw\", k).addClass(\"pop in\");k.trigger(\"create\");a(\".dwo\", k).click(function () {w.hide();});\n    } };\n\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /* \r\n                                                                                                                                                                                                                                                                                                                                                                                * Simple Grid Control for Bizagi Mobile\r\n                                                                                                                                                                                                                                                                                                                                                                                * @author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n(function ($) {\n  $.fn.mobileGrid = function (options) {\n\n    var defaultOptions = {\n      id: \"no-id\",\n      columns: [],\n      sortBy: \"\",\n      sortType: \"asc\",\n      showSummary: false,\n      collapse: false,\n      collapseState: false,\n      data: {},\n      indexedData: {},\n      maxColumns: 0,\n      buttonsPst: false,\n      title: \"\",\n      tableCssClass: \"\",\n      headerStyles: \"\",\n      columnKeyStyle: \"bz-rn-grid-column-key\",\n      columnHiddenStyle: \"bz-rn-grid-column-hidden\",\n      template: {\n        grid: \"\",\n        waiting: \"\",\n        table: \"\",\n        emptyTable: \"\",\n        column: \"\",\n        specialColumn: \"\",\n        row: \"\",\n        rowButtons: \"\",\n        cell: \"\",\n        specialCell: \"\",\n        pager: \"\",\n        buttons: \"\",\n        dynamicPager: \"\",\n        summary: \"\",\n        summaryCell: \"\" },\n\n      actions: {\n        add: true,\n        edit: true,\n        remove: true,\n        details: true },\n\n      mode: \"execution\" };\n\n\n    var self = this;\n    self.element = this;\n    self.options = $.extend(defaultOptions, options || {});\n\n    // Init plugin\n    init();\n\n    return {\n      setData: setData,\n      getData: getData,\n      getNewRowKeys: getNewRowKeys,\n      changeCellValue: changeCellValue,\n      refreshSummary: refreshSummary,\n      getContainer: getContainer,\n      processAction: processAction };\n\n\n    /**\r\n                                       * Constructor\r\n                                       * @returns {} \r\n                                       */\n    function init() {\n      var options = self.options;\n      var element = self.element;\n\n      // Set object variables\n      self.page = 1;\n      self.changes = {};\n      self.totalRows = 0;\n      self.totalPages = 0;\n      self.data = options.data;\n      self.selectedRow = 0;\n      self.components = {};\n      self.buttons = {};\n      self.asyncCells = {};\n\n      // Build column indexes\n      self.columnByIndex = {};\n      self.columnByName = {};\n      self.columnKeyIndex = 0;\n\n      $.each(options.columns, function (i, column) {\n        // Fix non-present properties\n        column.key = typeof column.key !== \"undefined\" ? column.key : false;\n        column.label = typeof column.label !== \"undefined\" ? column.label : column.name;\n        column.sortType = \"asc\";\n\n        // Index the column\n        self.columnByIndex[column.index] = column;\n        self.columnByName[column.name] = column;\n        if (column.key) {\n          self.columnKeyIndex = column.index;\n        }\n      });\n\n      // Set sort options\n      options.sortBy = options.sortBy || self.columnByIndex[0].name;\n      if (self.columnByName[options.sortBy]) {\n        self.columnByName[options.sortBy].sortType = options.sortType;\n      } else {\n        if (self.columnByName[options.sortBy.split(\".\")[0]]) {\n          self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\n        }\n      }\n\n      // Add base classes\n      //element.addClass(\"ui-bizagi-grid-wrapper\");\n      element.attr(\"data-bizagi-id\", options.id);\n\n      // Calculate\n      calculateKeyIndex();\n\n      //collapse state\n      self.collapseState = options.collapseState;\n\n      // Start waiting signal \n      //self.startLoading(false);\n    }\n\n    /**\r\n       * Method to start loading for ajax data and update the ui\r\n       * @returns {} \r\n       */\n    function startLoading(bUseTimeout) {\n      bUseTimeout = typeof bUseTimeout !== \"undefined\" ? bUseTimeout : true;\n\n      if (self.options.mode != \"execution\" || typeof self.options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Draw the waiting template when the endLoading delays more than 250ms\n      var waitingFn = function waitingFn() {\n        var element = self.element;\n        var options = self.options;\n\n        // Set null to timeout\n        self.waitingTimeout = null;\n\n        element.empty();\n        element.append($.kendoTmpl(options.template.waiting));\n      };\n\n      if (bUseTimeout) {\n        self.waitingTimeout = setTimeout(waitingFn, 250);\n      } else {\n        waitingFn();\n      }\n    }\n\n    /**\r\n       * Method to remove the loading message\r\n       * @returns {} \r\n       */\n    function endLoading() {\n      var element = self.element;\n\n      // Remove waiting timeout\n      if (self.waitingTimeout) {\n        clearTimeout(self.waitingTimeout);\n        self.waitingTimeout = null;\n      }\n\n      // Remove everything\n      element.empty();\n    }\n\n    /**\r\n       * This method updates the data and refreshes the grid\r\n       * @param {} data \r\n       * @returns {} \r\n       */\n    function setData(data) {\n      // Set internal data\n      self.data = data;\n      calculateKeyIndex();\n\n      // Call refresh\n      refresh();\n    }\n\n    /**\r\n       * This method retrieves the actual data from the grid\r\n       * @returns {} \r\n       */\n    function getData() {\n      // Return internal data\n      return self.data;\n    }\n\n    /**\r\n       * Calculate key index\r\n       * @returns {} \r\n       */\n    function calculateKeyIndex() {\n      var options = self.options;\n      var columns = options.columns;\n      var data = self.data;\n      var indexedData = {};\n\n      if (data.rows) {\n        $.each(data.rows, function (i, row) {\n          var key;\n          var row;\n          $.each(columns, function (j, column) {\n            if (column.key) key = row[j];\n          });\n\n          indexedData[key] = row;\n        });\n      }\n      self.indexedData = indexedData;\n    }\n\n    /**\r\n       * This method refreshes the grid\r\n       * @returns {} \r\n       */\n    function refresh() {\n      // Cleans components\n      _cleanComponents();\n      //_cleanButtons();\n\n      // Call the draw method\n      self.components = {};\n      draw();\n    }\n\n    /**\r\n       * This method refreshes only the summary\r\n       * @param {} columnIndex \r\n       * @returns {} \r\n       */\n    function refreshSummary(columnIndex) {\n      //var self = this;\n      var options = self.options;\n      var summary = _getComponent(\"summary\");\n\n      // Do nothing if the component is drawing or there is no summary\n      if (self.drawing) return;\n      if (!summary) return;\n\n      // Resolve summary\n      if (options.showSummary) {\n\n        if (columnIndex) {\n          // Refresh an specific summary\n          refreshSummaryCell(columnIndex);\n\n        } else {\n          // Clean and re-draw summary\n          summary.empty();\n          summary.append(drawSummary());\n\n          // Execute post-render\n          postRenderSummary(summary);\n        }\n      }\n    }\n\n    /**\r\n       * This method changes a cell value in the grid\r\n       * @param {} key \r\n       * @param {} columnIndex \r\n       * @param {} value \r\n       * @returns {} \r\n       */\n    function changeCellValue(key, columnIndex, value) {\n      if (self.indexedData[key]) {\n        self.indexedData[key][columnIndex] = value;\n      }\n    }\n\n    /**\r\n       * This method draws the full grid associated with the data\r\n       * @returns {} \r\n       */\n    function draw() {\n      var options = self.options;\n      var element = self.element;\n\n      // Start global drawing flag\n      self.drawing = true;\n\n      // Ends waiting signal\n      endLoading();\n\n      // Resolve grid template\n      var html = $.kendoTmpl(options.template.grid, {\n        label: options.title,\n        buttonsPst: options.buttonsPst,\n        collapse: options.collapse,\n        collapseState: self.collapseState,\n        isDesign: options.mode === \"design\" });\n\n\n      // Call sub-drawers\n      html = drawTable(html);\n      self.grid = $(html).appendTo(element);\n\n      // Post render the grid\n      postRender(self.grid);\n\n      // Attach paginator desktop\n      attachPaginator();\n\n      // Attach handlers\n      attachHandlers();\n\n      // Toggle visibility depending from row count\n      if (self.data.rows.length === 0) {\n        _getComponent(\"table\").hide();\n        _getComponent(\"pager\").hide();\n\n        _getComponent(\"emptyTable\").show();\n\n      } else {\n        _getComponent(\"table\").show();\n        _getComponent(\"pager\").show();\n\n        //_getComponent(\"dynamicPager\").hide();\n        _getComponent(\"emptyTable\").hide();\n      }\n\n      // End global drawing flag\n      self.drawing = false;\n    }\n\n    /**\r\n       * This method draws the table associated with the data\r\n       * @param {} html \r\n       * @returns {} \r\n       */\n    function drawTable(html) {\n      var options = self.options;\n\n      // Resolve table template\n      var table = $.kendoTmpl(options.template.table, {\n        showSummary: options.showSummary,\n        tableCssClass: options.tableCssClass });\n\n\n      var emptyTable = $.kendoTmpl(options.template.emptyTable);\n\n      // Resolve header\n      table = _replaceElement(table, \"columns\", drawHeader());\n\n      // Resolve body\n      table = _replaceElement(table, \"rows\", drawBody());\n\n      // Resolve pager\n      html = _replaceElement(html, \"pager\", drawPager());\n\n      // Perform grid replaces\n      html = _replaceElement(html, \"table\", table);\n      html = _replaceElement(html, \"emptyTable\", emptyTable);\n\n      return html;\n    }\n\n    /*\r\n      *   Execute post-renders in all the grid\r\n      */\n    function postRender() {\n      //var options = self.options;\n\n      // Get grid rows\n      var rows = _getComponent(\"cells\");\n      if (rows) {\n        $.each(rows, function (i, row) {\n          row = $(row);\n          postRenderRow(row);\n        });\n      }\n    }\n\n    /**\r\n      * Find if a column has a exact match for sort it\r\n      * @returns {} \r\n      */\n    function isExactMatch() {\n      var options = self.options;\n      var columns = options.columns;\n      var sortBy = options.sortBy;\n\n      var i = 0;\n      var length = columns.length;\n\n      for (; i < length;) {\n        if (sortBy === columns[i++].name) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    /**\r\n       * Execute post-renders in each cell after the element has been created\r\n       * @param {} row \r\n       * @returns {} \r\n       */\n    function postRenderRow(row) {\n      //var self = this;\n      var key = row.attr(\"data-business-key\");\n      var isNewRow = row.attr(\"data-new-row\");\n      var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\n\n      $.each(cells, function (i, cell) {\n        var column = self.columnByIndex[i];\n        if (column.key) return; // Omit key column\n\n        // Check if the cell has an async result\n        var asyncResult = self.asyncCells[key + \"-\" + column.index];\n        if (asyncResult) {\n          $.when(asyncResult).\n          done(function (html) {\n            // Append async result\n            cell = $(cell);\n            cell.append(html);\n            onCellReady(column, key, cell, isNewRow);\n          });\n        } else {\n          onCellReady(column, key, $(cell), isNewRow);\n        }\n      });\n    }\n\n    /**\r\n       * This method draws the table body\r\n       * @returns {} \r\n       */\n    function drawBody() {\n      // Resolve rows\n      var rows = \"\";\n\n      $.each(self.data.rows, function (i, row) {\n        rows += drawRow(row);\n      });\n\n      return rows;\n    }\n\n    /**\r\n       * This method draws a grid row\r\n       * @param {} rowData \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function drawRow(rowData, isNewRow) {\n      var options = self.options;\n      var key = rowData[self.columnKeyIndex];\n      var newRow = isNewRow || false;\n      var rnd = Math.floor(Math.random() * 10000);\n\n      var row = $.kendoTmpl(options.template.row, {\n        key: rnd,\n        isNewRow: isNewRow,\n        businessKey: key });\n\n\n      // Resolve cells\n      var cells = \"\";\n      var bSpecialCellAdded = false;\n      $.each(rowData, function (i, cell) {\n        if (bSpecialCellAdded) {\n          return;\n        }\n\n        if (options.maxColumns > 0) {\n          if (i < options.maxColumns + 1) {\n            // Draw normal cell\n            cells += drawCell(i, key, cell, newRow);\n          } else {\n            // Draw special cell\n            cells += drawSpecialCell(i, key, cell);\n            bSpecialCellAdded = true;\n          }\n        } else {\n          // Draw normal cell\n          cells += drawCell(i, key, cell, newRow);\n        }\n      });\n\n      // Resolve cells template\n      row = _replaceElement(row, \"cells\", cells);\n      return row;\n    }\n\n    /**\r\n       * This method draws the grid header\r\n       * @returns {} \r\n       */\n    function drawHeader() {\n      var options = self.options;\n\n      // Resolve columns\n      var columns = \"\";\n      var bSpecialColumnAdded = false;\n\n      self.exactMatch = isExactMatch();\n\n      $.each(options.columns, function (i, column) {\n        if (bSpecialColumnAdded) {\n          return;\n        }\n\n        if (options.maxColumns > 0) {\n          if (i <= self.options.maxColumns) {\n            // Draw normal column\n            columns += drawColumn(column);\n          } else {\n            // Draw special column\n            columns += drawSpecialColumn(column);\n            bSpecialColumnAdded = true;\n          }\n        } else {\n          // Draw normal column\n          columns += drawColumn(column);\n        }\n      });\n\n      return columns;\n    }\n\n    /**\r\n       * This method draws a column header\r\n       * @param {} column \r\n       * @returns {} \r\n       */\n    function drawColumn(column) {\n      var options = self.options;\n      var cssClass;\n\n      if (column.key) {\n        cssClass = options.columnKeyStyle;\n      } else {\n        if (column.hidden) {\n          cssClass = options.columnHiddenStyle;\n        } else {\n          cssClass = typeof column.bizAgiProperties != \"undefined\" && column.bizAgiProperties.cssclass ? column.bizAgiProperties.cssclass : \"\";\n        }\n      }\n\n      // Resolve column template\n      var sortActive = column.name === options.sortBy ? column.name === options.sortBy : column.name === options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name === options.sortBy.split(\".\")[0] : false;\n\n      return $.kendoTmpl(options.template.column, $.extend({}, column, {\n        sortActive: sortActive,\n        sortType: options.sortOrder,\n        headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\n        headerStyles: options.headerStyles ? options.headerStyles.header : \"\",\n        columnCssClass: cssClass }));\n\n    }\n\n    /**\r\n       * This method draws the grid cell\r\n       * @param {} columnIndex \r\n       * @param {} key \r\n       * @param {} value \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function drawCell(columnIndex, key, value, isNewRow) {\n      var options = self.options;\n      var messageValidation = \"\";\n\n      isNewRow = isNewRow || false;\n\n      // Ensure that data is mapped into a column\n      if (!self.columnByIndex[columnIndex]) {\n        return \"\";\n      }\n\n      // Get message\n      if (columnIndex > 0) {\n        messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\n      }\n\n      var isKey = self.columnByIndex[columnIndex].key;\n      var hidden = options.columns[columnIndex].hidden || false;\n      var cssClass;\n\n      if (isKey) {\n        cssClass = options.columnKeyStyle;\n      } else {\n        if (hidden) {\n          cssClass = options.columnHiddenStyle;\n        } else {\n          cssClass = typeof self.columnByIndex[columnIndex].bizAgiProperties != \"undefined\" && self.columnByIndex[columnIndex].bizAgiProperties.cssclass ? self.columnByIndex[columnIndex].bizAgiProperties.cssclass : \"\";\n        }\n      }\n\n      // Resolve cell template\n      var cell = $.kendoTmpl(options.template.cell, {\n        isKey: isKey,\n        hidden: hidden,\n        isDesign: options.mode === \"design\",\n        messageValidation: messageValidation,\n        columnCssClass: cssClass });\n\n\n      var result = onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\n      if (!result) {\n        result = \"\";\n      }\n\n      var async = _typeof(result) === \"object\" && result.done;\n      if (async) {\n        if (result.state() === \"resolved\") {\n          // Fetch resolved result\n          cell = _replaceElement(cell, \"cellContent\", resolveResult(result));\n        } else {\n          // Wait for result\n          cell = _replaceElement(cell, \"cellContent\", \"\");\n          self.asyncCells[key + \"-\" + columnIndex] = result;\n        }\n\n      } else {\n        // Resolve cell content\n        cell = _replaceElement(cell, \"cellContent\", result);\n      }\n\n      self.columnByIndex[columnIndex][\"cell\"] = $(cell);\n\n      return cell;\n    }\n\n    /**\r\n       * This method draws a grid pager\r\n       * @returns {} \r\n       */\n    function drawPager() {\n      var options = self.options;\n      var pagerData = {};\n\n      pagerData.hasPagination = self.data.total > 1 ? true : false;\n      pagerData.page = Number(self.data.page);\n\n      // Calculate pages\n      pagerData.pages = [];\n      for (var i = 1; i <= self.data.total; i++) {\n        pagerData.pages.push({\n          number: i,\n          active: i === pagerData.page });\n\n      }\n\n      // Set style pagination            \n      pagerData.previousPage = self.data.page > 1 ? self.data.page - 1 : 1;\n      pagerData.nextPage = self.data.page < self.data.total ? self.data.page + 1 : self.data.total;\n      pagerData.totalPages = self.data.total;\n\n      return $.kendoTmpl(options.template.pager, pagerData);\n    }\n\n    /**\r\n       * Returns the resolved result from a promise when the promise has been executed already\r\n       * @param {} promise \r\n       * @returns {} \r\n       */\n    function resolveResult(promise) {\n      var result;\n\n      promise.done(function (data) {\n        result = data;\n      });\n\n      return result;\n    }\n\n    /**\r\n       * Method to attach any handler to the pager grid\r\n       * @returns {} \r\n       */\n    function attachPaginator() {\n      if (self.data.total > 1) {\n\n        var pagerContainer = _getComponent(\"pager\").find(\"ul\");\n        var pagerOptions = {\n          totalPages: self.data.total,\n          actualPage: Number(self.data.page),\n          listElement: pagerContainer,\n          clickCallBack: function clickCallBack(options) {\n            changePage(options.page);\n          } };\n\n\n        // Create pagination control \n        pagerContainer.mobilePagination(pagerOptions);\n      }\n    }\n\n    /**\r\n       * Method to attach any handler to the grid\r\n       * @returns {} \r\n       */\n    function attachHandlers() {\n\n      // Add selection events\n      _getComponent(\"rows\").find(\"tr\").on(\"click\", function () {\n        var key = $(this).attr(\"data-key\");\n        var businessKey = $(this).attr(\"data-business-key\");\n\n        selectRow(key, businessKey);\n      });\n\n      // Add sort events\n      _getComponent(\"columns\").find(\".bz-rn-grid-column\").on(\"click\", function () {\n        var columnIndex = $(this).attr(\"data-column-index\");\n\n        sortBy(columnIndex);\n      });\n\n      // ActionSheet to process actions\n      _getComponent(\"rows\").find(\"tr\").actionSheet({\n        actions: _showActions(),\n        titleLabel: \"Selected Row\",\n        setDataToShow: function setDataToShow(evt) {\n          var that = this;\n          var key = $(evt.target).closest(\"tr\").attr(\"data-key\");\n          var businessKey = $(evt.target).closest(\"tr\").attr(\"data-business-key\");\n\n          that.params = { key: key, businessKey: businessKey };\n        },\n        actionClicked: function actionClicked(action) {\n          var that = this;\n\n          processAction(action.guid, that.params);\n          unselectRow();\n        },\n        cancelClicked: function cancelClicked(event) {\n          unselectRow();\n        } });\n\n    }\n\n    /**\r\n       *  Method to get the valid options to the grid\r\n       * @returns {} \r\n       */\n    function _showActions() {\n      var actions = [];\n      var options = self.options;\n      var tooltips = options.tooltips || {};\n      var parameters = $.extend(options.actions, tooltips);\n\n      if (parameters.edit) {\n        actions.push({ guid: \"edit\", displayName: parameters.editLabel });\n      }\n\n      if (parameters.remove) {\n        actions.push({ guid: \"remove\", displayName: parameters.deleteLabel });\n      }\n\n      if (parameters.details) {\n        actions.push({ guid: \"details\", displayName: parameters.detailLabel });\n      }\n\n      return actions;\n    }\n\n    /**\r\n       * Process an action in order to do something with the grid\r\n       * @param {} action \r\n       * @param {} params \r\n       * @returns {} \r\n       */\n    function processAction(action, params) {\n\n      if (action === \"edit\") {\n        onEditRow(params);\n      }\n\n      if (action === \"remove\") {\n        onDeleteRow();\n      }\n\n      if (action === \"details\") {\n        onShowDetails(params);\n      }\n    }\n\n    /**\r\n       * Changes the current page in the grid\r\n       * @param {} page \r\n       * @returns {} \r\n       */\n    function changePage(page) {\n      var currentPage = Number(self.data.page);\n      var total = self.data.total;\n      var newPage = page;\n\n      if (newPage === currentPage || newPage < 1 || newPage > total)\n      return;\n\n      //refresh components cells and rows\n      _cleanComponents();\n\n      // Update internal options\n      self.page = Number(newPage);\n\n      // Execute handler\n      onPageRequested();\n    }\n\n    /**\r\n       * Sort the grid by a column\r\n       * @param {} columnIndex \r\n       * @param {} sortType \r\n       * @returns {} \r\n       */\n    function sortBy(columnIndex, sortType) {\n      var options = self.options;\n      var column = self.columnByIndex[columnIndex];\n\n      if (typeof options.sortBy === \"undefined\") {\n        return;\n      }\n\n      // Set new sort type reversed to current, if the sort column has not changed\n      if (typeof column.name === \"undefined\") {\n        column.name = column.label;\n      }\n\n      if (column.name === options.sortBy) {\n        sortType = sortType || (options.sortOrder === \"asc\" ? \"desc\" : \"asc\");\n      } else {\n        if (column.name === options.sortBy.split(\".\")[0]) {\n          sortType = sortType || (options.sortType === \"asc\" ? \"desc\" : \"asc\");\n        } else {\n          sortType = sortType || options.sortType;\n        }\n      }\n\n      // Update internal options\n      if (options.sortBy.split(\".\").length > 1) {\n        if (options.sortBy.split(\".\")[0] !== column.name) {\n          options.sortBy = column.name;\n        } else {\n          options.sortBy = column.name;\n        }\n      } else {\n        options.sortBy = column.name;\n      }\n\n      options.sortColumn = column;\n      options.sortType = sortType;\n      options.sortOrder = sortType;\n\n      //refresh components cells and rows\n      _cleanComponents();\n\n      // Execute handler\n      onSortRequested();\n    }\n\n    /**\r\n       *  Selects a row in the grid\r\n       * @param {} key \r\n       * @param {} businessKey \r\n       * @returns {} \r\n       */\n    function selectRow(key, businessKey) {\n\n      if (self.selectedRow === key) {\n        // Invoke un-select handler\n        onRowUnselected();\n\n        // Update internal options\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      } else {\n        if (self.selectedRow !== 0) {\n          // Invoke un-select handler\n          onRowUnselected();\n        }\n\n        // Update internal options\n        self.selectedRow = key;\n        self.selectedBusinessKey = businessKey;\n\n        // Invoke select handler\n        onRowSelected();\n      }\n    }\n\n    /**\r\n       * Unselects a row in the grid\r\n       * @returns {} \r\n       */\n    function unselectRow() {\n      if (self.selectedRow !== 0) {\n        // Invoke un-select handler\n        onRowUnselected();\n\n        self.selectedRow = 0;\n        self.selectedBusinessKey = 0;\n      }\n    }\n\n    /**\r\n       * Executes the on draw cell handler\r\n       * @param {} column \r\n       * @param {} key \r\n       * @param {} value \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function onDrawCell(column, key, value, isNewRow) {\n      return _triggerHandler(\"drawCell\", { column: column, key: key, value: value, isNewRow: isNewRow });\n    }\n\n    /**\r\n       * Executes on cell ready handler\r\n       * @param {} column \r\n       * @param {} key \r\n       * @param {} cell \r\n       * @param {} isNewRow \r\n       * @returns {} \r\n       */\n    function onCellReady(column, key, cell, isNewRow) {\n      return _triggerHandler(\"cellReady\", { column: column, key: key, cell: cell, isNewRow: isNewRow });\n    }\n\n    /**\r\n       * Executes the row selected handle\r\n       * @returns {} \r\n       */\n    function onRowSelected() {\n      return _triggerHandler(\"rowSelected\", { key: self.selectedRow });\n    }\n\n    /**\r\n       * Executes the row un-selected handler\r\n       * @returns {} \r\n       */\n    function onRowUnselected() {\n      return _triggerHandler(\"rowUnselected\", { key: self.selectedRow });\n    }\n\n    /**\r\n       * Executes the on delete row handler\r\n       * @returns {} \r\n       */\n    function onDeleteRow() {\n      return _triggerHandler(\"deleteRow\", { key: self.selectedBusinessKey });\n    }\n\n    /**\r\n       * Executes the on show details handler\r\n       * @returns {} \r\n       */\n    function onShowDetails() {\n      return _triggerHandler(\"showFormDetails\", { key: self.selectedBusinessKey });\n    }\n\n    /**\r\n       * Executes the on edit row handler\r\n       * @returns {} \r\n       */\n    function onEditRow() {\n      return _triggerHandler(\"editRow\", { key: self.selectedBusinessKey });\n    }\n\n    /**\r\n       * Executes the page requested handler\r\n       * @returns {} \r\n       */\n    function onPageRequested() {\n      // Start loading signal \n      //startLoading();\n\n      // Trigger handler\n      return _triggerHandler(\"pageRequested\", _buildRefreshParameters());\n    }\n\n    /**\r\n       * Executes the sort requested handler\r\n       * @returns {} \r\n       */\n    function onSortRequested() {\n      // Start loading signal \n      //startLoading();\n\n\n      // Trigger handler\n      return _triggerHandler(\"sortRequested\", _buildRefreshParameters());\n    }\n\n    /**\r\n       * Calls directly to handler callback\r\n       * @param {} type \r\n       * @param {} data \r\n       * @returns {} \r\n       */\n    function _triggerHandler(type, data) {\n      var callback = options[type];\n\n      if (!callback) {\n        return null;\n      }\n      return callback.call(self.element, data);\n    }\n\n    /**\r\n       * Cleans the components \r\n       * @returns {} \r\n       */\n    function _cleanComponents() {\n      self.components = {};\n    }\n\n    /**\r\n       * Gets the component\r\n       * @param {} component \r\n       * @returns {} \r\n       */\n    function _getComponent(component) {\n      var element = self.element;\n\n      if (!self.components[component]) {\n        var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\n        if (foundComponent != null && foundComponent.length > 0) {\n          self.components[component] = foundComponent;\n        }\n      }\n      return self.components[component];\n    }\n\n    /**\r\n       * Replaces a matched element in the container for the specified \"replace\" element\r\n       * @param {} html \r\n       * @param {} element \r\n       * @param {} replace \r\n       * @returns {} \r\n       */\n    function _replaceElement(html, element, replace) {\n      return html.replace(\"{{element \" + element + \"}}\", replace);\n    }\n\n    /**\r\n       * Return the event handler parameters object\r\n       * @returns {} \r\n       */\n    function _buildRefreshParameters() {\n      var options = self.options;\n      var sortColumn = options.sortColumn != undefined ? options.sortColumn.index : 1;\n      return { page: self.page, sortBy: options.sortBy, sortType: options.sortOrder, sortColumnIndex: sortColumn };\n    }\n\n    /**\r\n       * Return the new created ids\r\n       * @returns {} \r\n       */\n    function getNewRowKeys() {\n      var rows = _getComponent(\"rows\").find(\"[data-new-row]\");\n\n      return $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n    }\n\n    /**\r\n       * Get current content \r\n       * @returns {} \r\n       */\n    function getContainer() {\n      return $(self.element);\n    }\n\n\n  };\n})(jQuery);","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.render.services.service\",\n{\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\",\n  BA_MULTIACTION_WITH_LIMIT_NUMBER: 5,\n  BA_MULTIACTION_WITH_LIMIT_QUEUE: \"multiaction\" },\n\n{\n  /*\r\n   *   Constructor\r\n   */\n  init: function init(params) {\n    params = params || {};\n    params.context = params.context || \"workflow\";\n    params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.serviceLocator = new bizagi.render.services.context(params);\n    this.multiactionService = new bizagi.render.services.multiactionservice(this);\n    this.multiactionServiceWithLimit = new bizagi.render.services.multiactionservice(this, this.Class.BA_MULTIACTION_WITH_LIMIT_NUMBER, this.Class.BA_MULTIACTION_WITH_LIMIT_QUEUE);\n    this.guid = Math.guid();\n\n    if (bizagi.override.enableECMMetadataMultiaction) {\n      this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\n    }\n\n    // Userfield definitions mini-cache\n    this.userfieldRequests = {};\n\n    this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone : bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet : bizagi.deviceEnum.desktop);\n    this.deviceCode = bizagi.util.getDeviceCode();\n  },\n\n  /*\r\n      *   Return the multiaction-service\r\n      */\n  multiaction: function multiaction() {\n    return this.multiactionService;\n  },\n\n  /*\r\n     *   Return the multiaction-service\r\n     */\n  multiactionWithLimit: function multiactionWithLimit() {\n    return this.multiactionServiceWithLimit;\n  },\n\n  metadataECMMultiaction: function metadataECMMultiaction() {\n    return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService : this;\n  },\n  /*\r\n      *   SINGLE SERVICES METHODS\r\n      */\n\n  /*\r\n          *   Gets form data\r\n          *   Returns a promise of the data being retrieved\r\n          */\n  getFormData: function getFormData(params) {\n    var self = this;\n\n    // Check if the params contains mocked data\n    if (params && params.data) {\n      return params.data;\n    }\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idProcess)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\n    if (params.idForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    if (params.idEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\n    if (params.surrogateKey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.requestedForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\n    if (params.recordXPath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\n    if (params.summaryForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\n    if (params.idCase)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    if (params.idWorkitem)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    if (params.idTask)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contextType)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (!bizagi.util.isEmpty(params.isRefresh))\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\n    if (params.isActionStartForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\n    if (params.additionalXpaths)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    if (params.idStartScope)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    if (typeof params.readOnlyForm !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\n    if (typeof params.printversion !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\n    if (typeof params.recordXpath !== \"undefined\")\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    if (params.guid)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\n    if (params.downloadOfflineForm)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\n\n    if (params.editable === false) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\n    }\n\n    // Support parameter from ui\n    // Parameters that affects all the same attributes of render\n    if (params.printversion) {\n      //Print limit grid rows\n      var BA_ALL_PARAMETER_PREFIX = \"all_\";\n\n      if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\n      }\n    }\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n\n    // Call ajax and returns promise\n    bizagi.chrono.initAndStart(\"data\");\n    var ajaxParams = {\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: params.action || \"LOAD\" };\n\n    if (params.downloadOfflineForm) {\n      ajaxParams.avoidLoader = true;\n    }\n    return $.ajax(ajaxParams).\n    pipe(function (response) {\n      bizagi.chrono.stopAndLog(\"data\");\n\n      // Transform data for read only version\n      if (params.printversion) {\n        try {\n          response.form.properties.editable = \"False\";\n\n          var transformGridDataToReadOnly = function transformGridDataToReadOnly(_data) {\n            if (_data == null) {\n              return _data;\n            }\n            if (_data.hasOwnProperty('type') && _data.type == 'grid') {\n              _data.id = data.id + \"-print\";\n              _data.allowAdd = \"False\";\n              _data.allowDelete = \"False\";\n              _data.allowEdit = \"False\";\n              _data.allowGrouping = \"False\";\n              _data.allowMore = \"False\";\n              _data.allowSearch = \"False\";\n            } else {\n              $.each(data, function (key, value) {\n                if (_typeof(value) == 'object') {\n                  _data[key] = transformGridDataToReadOnly(_data[key]);\n                }\n              });\n            }\n            return _data;\n          };\n          response = transformGridDataToReadOnly(response);\n        } catch (e) {\n        }\n      }\n\n      return response;\n    });\n  },\n  /*\r\n      *   Gets a search form data\r\n      *   Returns a promise of the data being retrieved\r\n      */\n  getSearchFormData: function getSearchFormData(params) {\n    var self = this;\n\n    // Define data\n    params = params || {};\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idSearchForm)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHFORM\" });\n\n  },\n\n  processDataValues: function processDataValues(data) {\n    var o;\n    data = $.extend(true, {}, data);\n    for (o in data) {\n      if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\n        // for search\n        if (data[o].hasOwnProperty(\"id\")) {\n          data[o] = data[o].id;\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Sends a form action to the server\r\n      */\n  submitData: function submitData(params) {\n    var self = this;\n\n    // Define data\n    data = self.resolveData(params.data || {}, params.xpathContext);\n    data = self.processDataValues(data);\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.xpath)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    if (params.idRender)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    if (params.xpathContext)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.idPageCache)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.guidEntity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.transitions)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.forcePlanCompletion)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\n\n    /* if (params.isActionStartForm)\r\n                                                                                                        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n                                                                                                        */\n    var actionType = params.action.toString().toUpperCase();\n\n    // Log submit data\n    bizagi.debug(\"Data sent\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: actionType,\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n      } });\n\n  },\n  /*\r\n      * Get data processing xpathcontext\r\n      */\n  resolveData: function resolveData(data, xpathContext) {\n    var name, newName, value;\n    if (!$.isEmptyObject(data) && xpathContext) {\n      if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\n        for (name in data) {\n          if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\n            newName = name.substr(name.search(/\\]/) + 2);\n            value = data[name];\n            data[newName] = value;\n            delete data[name];\n          }\n        }\n      }\n    }\n    return data;\n  },\n  /*\r\n      *   Fetch a property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   property\r\n      */\n  getPropertyData: function getPropertyData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n\n    if (params.sessionId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    if (params.contexttype)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    if (params.guidentity)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    if (params.surrogatekey)\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n    if (params.pxpath)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\n    if (params.prows)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\n    if (params.ppage)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\n    if (params.pfilter != undefined && params.pfilter != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\n    /*else\r\n                                                                              data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\n    if (params.psort != undefined && params.psort != null)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\n    if (params.porder)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\n    if (params.pcaseId)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\n    if (params.pguidEntity)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\n    if (params.psurrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\n    }\n    if (params.pactionXpath) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\n    }\n    if (params.ptemplateGuid) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\n    }\n    if (params.pparameters) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      */\n  getData: function getData(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch search data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   term\r\n      */\n  getSearchData: function getSearchData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  /*\r\n      * Refresh tha data property from the server\r\n      * Params:\r\n      *   -   collapsestate\r\n      */\n  getCollapseData: function getCollapseData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"collapseState\" }));\n\n  },\n\n  /*\r\n      *   Refresh the data property from the server\r\n      *   This version is to fetch grid data\r\n      *   Params:\r\n      *   -   xpath\r\n      *   -   idRender\r\n      *   -   xpathContext\r\n      *   -   sort\r\n      *   -   page\r\n      *   -   rows\r\n      */\n  getGridData: function getGridData(params) {\n    var self = this;\n    params.extra = params.extra || {};\n\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n\n    return this.getPropertyData($.extend(params, {\n      property: \"data\" }));\n\n  },\n\n  getGridDataExclusivesSelected: function getGridDataExclusivesSelected(params) {\n    var self = this;\n    params.extra = params.extra || {};\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\n    params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\n    return this.getPropertyData($.extend(params, {\n      property: \"exclusivesSelected\" }));\n\n  },\n\n  /*\r\n      *   Returns the upload plugin cancel image\r\n      */\n  getUploadCancelImage: function getUploadCancelImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\n  },\n  /*\r\n      *   Returns the upload file url for each file\r\n      */\n  getUploadFileUrl: function getUploadFileUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  downloadFile: function downloadFile(params) {\n    var self = this;\n    var fileUrl = self.getUploadFileUrl(params);\n\n    return $.ajax({\n      url: fileUrl,\n      type: \"GET\",\n      queue: params.queue,\n      dataType: \"binary\",\n      processData: false //Always false for binary dataType\n    }).\n    then(function (binary_file) {\n      if (binary_file.type == \"application/json\") {\n        return self.readFileAsJSON(binary_file);\n      }\n\n      if (typeof binary_file == \"string\") {\n        var xhr = arguments[2];\n        var contentType = xhr.getResponseHeader('Content-type');\n        binary_file = bizagi.util.media.byteArrayToBlob(self.stringToByteArray(binary_file), contentType);\n      }\n      return binary_file;\n    });\n  },\n\n  readFileAsJSON: function readFileAsJSON(binary_file) {\n    var def = new $.Deferred();\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      def.reject({ responseText: reader.result });\n    };\n    reader.readAsText(binary_file);\n    return def.promise();\n  },\n\n  stringToByteArray: function stringToByteArray(binary) {\n    return bizagi.util.stringToByteArray(binary);\n  },\n\n\n  getUploadFileEntityUrl: function getUploadFileEntityUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n    if (params.isContextContainerWidgetRender) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\n    } else {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n    }\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddUrl: function getUploadAddUrl() {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Returns the upload add url\r\n      */\n  getUploadAddFileUrl: function getUploadAddFileUrl(isUserPreferences) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = isUserPreferences === true ? \"SAVEUSERIMAGE\" : \"savefile\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n\n  deleteImage: function deleteImage(params) {\n    var self = this;\n\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /*\r\n      *   Returns the upload add url\r\n      */\n  deleteUploadFile: function deleteUploadFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // Log submit data\n    bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n\n  },\n  /*\r\n      * Return file meta data\r\n      */\n  getECMMetadata: function getECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    // Log submit data\n    bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  checkOutFile: function checkOutFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"checkOutFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * cancelCheckOut\r\n      **/\n  cancelCheckOut: function cancelCheckOut(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"cancelCheckOut\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      * Checkout a file\r\n      **/\n  deleteECMFile: function deleteECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"delete\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update ECM file content\r\n      **/\n  updateECMFileContent: function updateECMFileContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMFileContent\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *  Update file content\r\n      **/\n  updateECMMetadata: function updateECMMetadata(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"updateECMMetadata\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getFileProperties: function getFileProperties(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"getFileProperties\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n    // Log submit data\n    bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      interceptor: {\n        intercept: true,\n        source: \"rendering_\" + self.guid } });\n\n\n  },\n  getFile: function getFile(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"fileContent\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\n\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || url,\n      data: jQuery.param(data),\n      type: \"POST\",\n      dataType: \"binary\",\n      processData: false });\n\n  },\n  uploadECMFile: function uploadECMFile(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data.action = \"uploadECMFile\";\n    data.fileUpload = params.fileUpload; // Content of file\n    data.xPath = params.xPath;\n\n    data.idAttrib = params.idAttrib;\n    data.fileName = params.fileName;\n    data.metaValues = params.metaValues;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n\n\n    // Log submit data\n    bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  getECMFileUrl: function getECMFileUrl(params) {\n    var self = this;\n    var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\n\n    // Define data\n    var data = params.extra || {};\n\n    data.action = \"viewECMFile\";\n    data.idFileUpload = params.idFileUpload;\n    data.xPath = params.xPath;\n    data.idAttrib = params.idAttrib;\n\n    data.fileName = params.fileName;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data.xpathContext = params.xpathContext;\n    if (params.sessionId) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    }\n    if (params.p_sessionId) {\n      data.p_sessionId = params.p_sessionId;\n    }\n\n\n    // Log submit data\n    bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n  /*\r\n      *\r\n      */\n  isFileOnECM: function isFileOnECM(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    data[\"action\"] = \"isFileOnECM\";\n    data[\"idUpload\"] = params.idUpload;\n\n    // Call ajax and returns promise\n    return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\n  },\n  /*\r\n      *   Start a grid record edition\r\n      */\n  editGridRecord: function editGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"EDITRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecord: function addGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATION\" });\n\n  },\n  /*\r\n      *   Sends a grid request to add a new row, and sending the data at the same time\r\n      *   The server returns the new row in json\r\n      */\n  addGridRecordData: function addGridRecordData(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Build data to submit\n    var submitData = params.submitData || {};\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ADDRELATIONWITHDATA\" });\n\n  },\n  /*\r\n      *   Submits the grid record data to the server\r\n      */\n  saveGridRecord: function saveGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVERELATION\" });\n\n  },\n  /*\r\n      *   Deletes a grid record in the server\r\n      */\n  deleteGridRecord: function deleteGridRecord(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"REMOVERELATION\" });\n\n  },\n\n  /*\r\n      * Get association flipped status\r\n      */\n  getFlipAssociation: function getFlipAssociation(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log request data\n    bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"text\" }).\n    pipe(function (response) {\n      try {\n        // Try to attempt to parse JSON\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        // If JSON is not valid we need to return the original text response\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Cancels an add or edit request for a grid\r\n      */\n  rollbackGridAction: function rollbackGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"ROLLBACK\" });\n\n  },\n  /*\r\n      *   Returns the search render default image\r\n      */\n  getSearchDefaultImage: function getSearchDefaultImage() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\n  },\n\n  processDataCriteria: function processDataCriteria(criteria) {\n    var o;\n    criteria = $.extend(true, [], criteria);\n    for (o in criteria) {\n      if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\n        // for search\n        if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\n          criteria[o].value = criteria[o].value.id;\n        }\n      }\n    }\n    return criteria;\n  },\n\n  /*\r\n      *   Perform entity search in the server\r\n      */\n  submitSearch: function submitSearch(params) {\n    var self = this,criteria;\n\n    // Define data\n    var data = params.extra || {};\n\n    var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\n\n    if (params.order && params.order !== \"\" && sort !== \"\")\n    sort += \" \" + params.order;\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\n\n    criteria = self.processDataCriteria(params.criteria);\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\n\n    // Optional search params\n    if (params.allowFullSearch)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\n    if (params.maxRecords)\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\n\n    // Log submit data\n    bizagi.debug(\"Performing advanced search\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SEARCHENTITYFORRENDER\" });\n\n  },\n\n  /*\r\n      *   Submits the stakeholder associated\r\n      */\n  associateStakeholder: function associateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\n    data[\"associatedUser\"] = params.associatedUser;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\" });\n\n  },\n\n  /*\r\n      *   Refresh the stakeholder associated list\r\n      */\n  refreshAssociateStakeholder: function refreshAssociateStakeholder(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Log submit data\n    bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    // TODO: change REST library in order to support extra HTTP parameters\n    // Please be careful with dataType parameter\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /*\r\n      *   Gets the link to the letter\r\n      */\n  getLetterNotEditableUrl: function getLetterNotEditableUrl(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Call ajax and returns promise\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n  },\n  /*\r\n      *   Gets the content for editable letters\r\n      */\n  getLetterContent: function getLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"html\" }).\n    pipe(function (response) {\n      try {\n        return bizagi.services.ajax.parseJSON(response);\n      } catch (e) {\n        return response;\n      }\n    });\n  },\n  /*\r\n      *   Get the can generate letter flag\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /*\r\n      *   Saves the content for editable letters\r\n      */\n  saveLetterContent: function saveLetterContent(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // Define content\n    var content = params.content || \"\";\n\n    // Define url\n    var url = params.url || self.serviceLocator.getUrl(\"render-letter-save-url\");\n    var fullUrl = url + \"?\" + jQuery.param(data);\n\n    // Log submit data\n    bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: fullUrl,\n      data: content,\n      type: \"POST\",\n      dataType: \"html\" });\n\n  },\n  /*\r\n      *   Returns the icons path for the letter plugin\r\n      */\n  getLetterEditorIconsPath: function getLetterEditorIconsPath() {\n    return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\n  },\n  /*\r\n      *   Executes a button action in the server\r\n      */\n  executeButton: function executeButton(params) {\n    return this.getPropertyData($.extend(params, {\n      property: \"buttonRule\" }));\n\n  },\n  /*\r\n      *   Executes a fileprint action in the server\r\n      */\n  getFilePrintUrl: function getFilePrintUrl(params) {\n\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editLinkForm: function editLinkForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n  /*\r\n      *   Saves the content of the link form\r\n      */\n  saveLinkForm: function saveLinkForm(params) {\n    // Actually it does the same than edit grid records\n    //return this.saveGridRecord(params);\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Send the submitted data page cache because it cointains the grid's form page cache\n    if (params.submitData.idPageCache) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\n      delete params.submitData.idPageCache;\n    }\n\n    var submitData = params.submitData || {};\n\n    // Build data to submit\n    submitData = self.processDataValues(submitData);\n\n    for (key in submitData) {\n      data[key] = submitData[key];\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"SAVEFORMLINKRELATION\" });\n\n  },\n  /*\r\n      *   Rollbacks the link form edition\r\n      */\n  rollbackLinkForm: function rollbackLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.rollbackGridAction(params);\n  },\n  /*   Commit the link form edition\r\n      */\n  commitLinkForm: function commitLinkForm(params) {\n    // Actually it does the same than rollback grid records\n    return this.commitGridAction(params);\n  },\n  /*   Sends schekpoint action\r\n      */\n  sendCheckpoint: function sendCheckpoint(params) {\n    // Actually it does the same than rollback grid records\n    return this.sendCheckpointAction(params);\n  },\n  /*\r\n      *   Loads the userfield definition\r\n      */\n  getUserfieldDefinition: function getUserfieldDefinition(params) {\n    var self = this;\n    params = params || {};\n\n    // Check in deferreds cache\n    if (self.userfieldRequests[params.userfield])\n    return self.userfieldRequests[params.userfield];\n\n    // Required params: idCase\n    self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\n    {\n      guidUserfield: params.userfield,\n      device: params.device || \"desktop\" });\n\n\n\n    // Return deferred\n    return self.userfieldRequests[params.userfield];\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshControl: function refreshControl(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"PARTIALREFRESH\" });\n\n  },\n  /**\r\n      *  Get render json for one render o container\r\n      *  @param {object} params object with idRender,idPageCache\r\n      */\n  refreshGridCell: function refreshGridCell(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.idForm ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\n    params.typeRender ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Request to execute rule on server\r\n      * @param {object} params h_pageCacheId, guidrule\r\n      */\n  executeRule: function executeRule(params) {\n    var self = this;\n\n\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute interface on server\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeInterface: function executeInterface(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params[\"interface\"] || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute SAP Connecor\r\n      * @param {object} params h_pageCacheId, guidinterface\r\n      */\n  executeSAPConnector: function executeSAPConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n  /**\r\n      * Request to execute a Bizagi connector\r\n      * @param params\r\n      * @return {{}}\r\n      */\n  executeConnector: function executeConnector(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /**\r\n      * Request to execute pipeline on server\r\n      * @param {object} params h_pageCacheId, guidpipeline\r\n      */\n  executePipeline: function executePipeline(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEPIPELINE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidpipeline\"] = params.pipeline || \"\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\n  },\n\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  generateDocumentTemplate: function generateDocumentTemplate(params) {\n    var self = this;\n    params = params || {};\n    params.append = params.append ? params.append : false;\n\n    return $.create(\n    self.serviceLocator.getUrl(\"render-document-generate\"),\n    {\n      h_pageCacheId: params.idPageCache,\n      contextXpath: params.xpathcontext,\n      groupMappingId: params.groupMapping,\n      xpathAttribute: params.xpath,\n      append: params.append,\n      controlId: params.id });\n\n\n  },\n  /*\r\n      *   Document Templates generate rest service\r\n      */\n  getAllDocumentsDownloadUrl: function getAllDocumentsDownloadUrl(params) {\n    var self = this;\n    var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\n    var data = {};\n    data[\"h_pageCacheId\"] = params.idPageCache;\n    data[\"contextXpath\"] = params.xpathContext;\n    data[\"xpathAttribute\"] = params.xpath;\n    data[\"idCase\"] = params.idCase;\n    data[\"idWorkItem\"] = params.idWorkItem;\n    data[\"p_sessionId\"] = params.sessionId;\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n\n  },\n\n\n  getCaseNumber: function getCaseNumber(params) {\n    var self = this;\n    //this function use sendEMail\n    //and not possible use dat ain ajax\n    //this is workaround (rhonyp)\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\n      type: \"GET\",\n      dataType: \"json\" });\n\n  },\n\n  getCaseAssignees: function getCaseAssignees(params) {\n    var self = this;\n    params = params || {};\n\n    // Required params: idCase\n    return $.read(\n    self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\n      idCase: params.idCase }).\n\n    pipe(function (response) {\n      return response;\n    });\n  },\n\n  getWorkitems: function getWorkitems(params) {\n    var self = this;\n    params = params || {};\n\n    return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\n      idCase: params.idCase,\n      onlyUserWorkItems: params.onlyUserWorkItems || \"\" });\n\n  },\n  /*\r\n      *   Executes a grid export action in the server\r\n      */\n  getGridExportUrl: function getGridExportUrl(params) {\n\n    var self = this,\n    url = this.serviceLocator.getUrl(\"render-upload-data-url\"),\n    data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType; //\"data\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    params.contexttype ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\n\n    return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\n  },\n\n  /*\r\n      * Executes a send email action in the server\r\n      */\n  sendEmail: function sendEmail(params) {\n    var self = this;\n    params = params || {};\n\n    var data = {};\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\n    params.xpathContext ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\n\n    // Email parameters\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare) {\n      return data;\n    }\n\n    var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\n\n    return $.create(url, data);\n  },\n\n  /*\r\n      * Request to invalidates page cache in server, since it is no needed anymore\r\n      */\n  invalidatePageCache: function invalidatePageCache(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"INVALIDATEPAGECACHE\" });\n\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersList: function getUsersList(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\n  },\n  /*\r\n     * Search users usign parameters suchs as userName, fullName, domain and organization\r\n     * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n     * @return {deferred} ajax object with JSON content\r\n     */\n  getUsersListFromQueryForm: function getUsersListFromQueryForm(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"render-query-getUsersList\"), params);\n  },\n  /*\r\n      * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListFromPreferences: function getUsersListFromPreferences(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the boss field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdBossUser: function getUsersListForXpathIdBossUser(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdBossUser\"), params);\n  },\n\n  /**\r\n      * Get Users when the context is the delegate field and User Form\r\n      * @param {*} params \r\n      */\n  getUsersListForXpathIdDelegate: function getUsersListForXpathIdDelegate(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForXpathIdDelegate\"), params);\n  },\n\n  /*\r\n      * Search users for Stakeholders\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersListForStakeholders: function getUsersListForStakeholders(params) {\n    return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\n  },\n\n  /*\r\n      * Search users usign parameters suchs as userName, fullName, domain and organization\r\n      * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getUsersForAssignation: function getUsersForAssignation(params) {\n    var self = this;\n\n    return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\n  },\n\n  /**\r\n      * Get Users Creation/Edition Form\r\n      */\n  getUsersForm: function getUsersForm(params) {\n    var self = this;\n    return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\n  },\n  /**\r\n      *   Return generate Data To Send By Email\r\n      */\n  generateDataToSendByEmail: function generateDataToSendByEmail(params) {\n    var self = this;\n    params = params || {};\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n  /**\r\n      * Return generate Send user password Mail\r\n      */\n  sendUserEmail: function sendUserEmail(params) {\n    var self = this;\n    params = params || {};\n    var data = {\n      action: \"SendUserEmail\",\n      emailTo: params.eMailTo,\n      subject: params.subject,\n      body: params.body };\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\n      data: params,\n      type: \"POST\",\n      dataType: \"json\" });\n\n  },\n\n  /**\r\n      * Get bizagi configuration\r\n      * @param {Function}   type callback function when the file load is succed\r\n      * @return {deferred} ajax object with JSON content\r\n      */\n  getConfiguration: function getConfiguration() {\n    var self = this;\n    var url = self.serviceLocator.getUrl(\"admin-users-config\");\n\n    return $.read(url);\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyPathToBase: function verifyPathToBase(pathToBase, url) {\n\n    if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\n      return url;\n    } else {\n      return pathToBase + url;\n    }\n\n  },\n\n  /**\r\n      * Get template of entity\r\n      * @param params { guid, prepare}\r\n      */\n  getTemplate: function getTemplate(params) {\n    var self = this;\n    var data = {};\n    params = params || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\n\n    if (params.templateType) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\n    }\n\n    if (params.templateGuid) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\n    }\n\n    if (params.isDefaultTemplate != undefined) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\n    }\n\n    // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\n    // and the service recives either tablet or smartphone\n    var deviceType = bizagi.util.detectDevice();\n    if (bizagi.util.isTabletDevice()) {\n      deviceType = \"tablet\";\n    } else if (bizagi.util.isSmartphoneDevice()) {\n      deviceType = \"mobile\";\n    }\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\n\n    // When prepare is true just return data, this feature is used by multiaction service\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\n  },\n\n  /**\r\n      * Chek if an entity has startform\r\n      * @param params\r\n      * @return {*}\r\n      */\n  hasStartForm: function hasStartForm(params) {\n    var self = this;\n    var data = {};\n\n    if (params.guidWFClass) {\n      data.guidWFClass = params.guidWFClass;\n    }\n\n    return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\n  },\n\n  /**\r\n      * Get the start form of the case\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getStartForm: function getStartForm(params) {\n    var self = this;\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\n\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idCase) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\n    }\n    if (params.idStartScope) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\n    }\n    if (params.idWorkitem) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\n    }\n    if (params.additionalXpaths) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n    if (params.surrogatedKey) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\n    }\n    if (params.recordXpath) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\n    }\n    if (params.mappingstakeholders) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\n    }\n\n    return $.ajax({\n      url: self.serviceLocator.getUrl(\"form-get-data\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      cache: true });\n\n  },\n  /*\r\n      *   Start a link form edition\r\n      */\n  editActionForm: function editActionForm(params) {\n    // Actually it does the same than edit grid records\n    return this.editGridRecord(params);\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getActions: function getActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.pmaxitems) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } });\n\n\n  },\n\n  /**\r\n      * Execute actions or constructors\r\n      * @param params\r\n      */\n  executeActions: function executeActions(params) {\n    var self = this;\n    var extendParams = $.extend({}, params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.pguidConstructor) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\n    }\n\n    if (params.pguidAction) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\n    }\n    if (params.prepare) {\n      return data;\n    }\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n\n  },\n\n  /**\r\n      * Get list of actions in action launcher\r\n      * @param params\r\n      * @return {*}\r\n      */\n  getPolymorphicActions: function getPolymorphicActions(params) {\n    var self = this;\n    var extendParams = $.extend(params, { prepare: true });\n    var data = self.getPropertyData(extendParams) || [];\n\n    if (params.ptags) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\n    }\n\n    if (params.additionalXpaths) {\n      data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\n    }\n\n    if (params.prepare) {\n      return data;\n    }\n\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\n      data: data,\n      type: \"POST\",\n      dataType: params.dataType || \"json\",\n      serviceType: \"PROCESSPROPERTYVALUE\" });\n\n  },\n\n  /**\r\n      * Make a JSON tree of polymorphic constructors categories\r\n      * @param values\r\n      * @return {Array}\r\n      */\n  serializePolymorphicActions: function serializePolymorphicActions(values) {\n    // json serializer\n    var actions = [];\n    var GUID_ENTITY = 0,DISPLAY_NAME = 1,XPATHCONTEXT = 2,TYPE = 3,GUID_OBJECT = 4,GUID_CONSTRUCTOR = 5,GUID_PARENT_ENTITY = 6;\n\n    /**\r\n                                                                                                                                 * Get children by guid of entity\r\n                                                                                                                                 * @param guid\r\n                                                                                                                                 * @return {Array}\r\n                                                                                                                                 */\n    var getChildren = function getChildren(guid) {\n      var children = [];\n      guid = guid || \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_PARENT_ENTITY] == guid) {\n          children.push(value);\n        }\n      });\n      return children;\n    };\n\n    /**\r\n        * Get parents by action object\r\n        * @param node\r\n        * @return {string}\r\n        */\n    var getParents = function getParents(node) {\n      node = node || {};\n      var parents = \"\";\n\n      $.each(values, function (key, value) {\n        if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\n          parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\n        }\n      });\n      return parents;\n    };\n\n\n    /**\r\n        * Make a tree of actions\r\n        * @param list\r\n        * @param guid\r\n        * @return {*}\r\n        */\n    var fillTree = function fillTree(list, guid) {\n      var node;\n      var children = getChildren(guid);\n      $.each(children, function (key, value) {\n        var child = fillTree([], value[GUID_ENTITY]);\n        node = {\n          \"guidEntity\": value[GUID_ENTITY],\n          \"displayName\": value[DISPLAY_NAME],\n          \"hasConstructor\": value[GUID_CONSTRUCTOR] ? true : false,\n          \"type\": value[TYPE],\n          \"guidObject\": value[GUID_OBJECT],\n          \"guidConstructor\": value[GUID_CONSTRUCTOR],\n          \"xpathContext\": value[XPATHCONTEXT],\n          \"children\": child,\n          \"parents\": getParents(value) };\n\n        if (node.guidConstructor !== \"\" || node.children.length > 0) {\n          list.push(node);\n        }\n      });\n\n      return list;\n    };\n    fillTree(actions, \"\");\n    return actions;\n  },\n\n  /**\r\n      * Gets the image for an entity xpath\r\n      * @param params\r\n      */\n  getEntityImage64: function getEntityImage64(params) {\n    var self = this,\n    data = {\n      width: params.data,\n      height: params.height,\n      xpath: params.xpath },\n\n    url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\n\n    return $.ajax({\n      url: url,\n      data: data });\n\n  },\n\n  /**\r\n      * Get data files when user access from my stuff, because there is no scope\r\n      */\n  getFilesDataForLayoutUploadControl: function getFilesDataForLayoutUploadControl(params) {\n    var self = this;\n    return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(params) {\n    return $.ajax({\n      url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\n      data: params.formData,\n      type: \"POST\",\n      contentType: false,\n      processData: false });\n\n  },\n\n  /**\r\n      * Commit an add or edit request for a grid\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  commitGridAction: function commitGridAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"COMMIT\" });\n\n  },\n  /*\r\n      *   Commit an add or edit request for a grid\r\n      */\n  sendCheckpointAction: function sendCheckpointAction(params) {\n    var self = this;\n\n    // Define data\n    var data = params.extra || {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\n\n    if (params.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\n    }\n\n    // Log submit data\n    bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\n\n    // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\n    if (params.prepare)\n    return data;\n\n    // Call ajax and returns promise\n    return $.ajax({\n      url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"CHECKPOINT\" });\n\n  },\n\n  /**\r\n      * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n      */\n  verifyMobilePathToBase: function verifyMobilePathToBase(pathToBase, url) {\n    return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\") : url;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Services\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This class will provide a facade to access to multiaction rendering REST services\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n\n  /* \r\n  *   Constructor\r\n  */\n  init: function init(service, limit, queue) {\n    this.service = service;\n    this.serviceLocator = service.serviceLocator;\n\n    // Multiaction - batch stuff\n    this.batch = {};\n    this.batchTimer = 50;\n    this.maxNumberOfActions = limit || 0;\n    this.queue = queue || null;\n    this.deferredBatchExecuting = $.Deferred();\n    this.deferredBatchExecuting.resolve();\n    this.disabledRequests = false;\n    this.circularDependencies = new bizagi.circularDependencies();\n\n    // Create proxyed version of methods\n    this.replicateServiceMethods();\n  },\n\n  /*\r\n     *   Returns the internal service\r\n     */\n  getService: function getService() {\n    return this.service;\n  },\n\n  /*\r\n     *   Create a proxied multiaction version for service calls\r\n     */\n  replicateServiceMethods: function replicateServiceMethods() {\n    var self = this;\n    for (var key in this.service.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\n    }\n  },\n\n  /*\r\n     *   Perform the proxy call for each service method\r\n     */\n  proxyMethod: function proxyMethod(method, parameters) {\n    var service = this.service;\n\n    // Check if has only one argument, else execute directly\n    if (!parameters || parameters.length != 1) {\n      return method.apply(service, parameters);\n    }\n\n    // Check if the argument is object, else execute directly\n    if (_typeof(parameters[0]) != \"object\") {\n      return method.apply(service, parameters);\n    }\n\n    var params = parameters[0];\n\n    // If the caller is requesting a prepare call, just execute the method with the current parameters\n    if (params.prepare == true) return method.apply(service, parameters);\n\n    // Prepare the ajax instead of sending it\n    var originalPrepare = params.prepare;\n    params.prepare = true;\n\n    var action = method.apply(service, parameters);\n    if (originalPrepare === undefined || originalPrepare == null) delete params.prepare;else\n    params.prepare = originalPrepare;\n    return this.add(action);\n  },\n\n  /**\r\n     * This method make a standard error message\r\n     */\n  makeCircularDependenciesError: function makeCircularDependenciesError(error) {\n    var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\n\n    return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\n  },\n\n\n  /*\r\n     *   Add an action to be performed in a multiaction, and be resolved later\r\n     *   returns a deferred\r\n     */\n  add: function add(action) {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    var name = action.h_action || \"unnamed\";\n\n    // Put here all actions to ignore in circular dependencies\n    var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\", \"GETFILE\"];\n\n    if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\n      self.circularDependencies.addNode(name, action);\n    }\n\n    // First clear previous timeout\n    clearTimeout(self.batchTimeout);\n    var tag = action.tag = Math.guid();\n    var singleAction = { action: action, deferred: deferred };\n    self.batch[tag] = singleAction;\n\n    var fn = function fn() {\n      var resolveDependencies = self.circularDependencies.resolve();\n\n      if (resolveDependencies.error) {\n        // Reset Queue\n        for (var i in self.batch) {\n          var message = resolveDependencies.error.multiactionError;\n          self.batch[i].deferred.reject(message);\n        }\n        self.batch = {};\n      } else\n      if (!self.disabledRequests) {\n        self.deferredBatchExecuting = self.fire();\n      }\n    };\n\n    // Start a new timeout\n    self.batchTimeout = setTimeout(fn, self.batchTimer);\n\n    // If we have a limit, then fire it again\n    if (self.maxNumberOfActions != 0) {\n      if (Object.keys(self.batch).length >= self.maxNumberOfActions) {\n        clearTimeout(self.batchTimeout);\n        fn();\n      }\n    }\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Fires up the multiaction\r\n     */\n  fire: function fire() {\n    var self = this;\n    var batch = {};\n\n    // Prepare actions and clone batch manually\n    var actions = [];\n    $.each(self.batch, function (tag, item) {\n      actions.push(item.action);\n      batch[tag] = item;\n    });\n\n    // Reset batch\n    self.batch = {};\n\n    // Fire ajax \n    return $.when(self.execute({ actions: actions, rejectDeferreds: false })).\n    done(function (responses) {\n\n      // Process each response\n      $.each(responses, function (i, response) {\n        var tag = response.tag;\n        if (!response.error) {\n          batch[tag].deferred.resolve(response.result);\n        } else {\n          batch[tag].deferred.reject(response.error, response, response.error.message);\n        }\n\n        // Remove paired tag from collection\n        delete batch[tag];\n      });\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\n      });\n    }).fail(function (xhr, type, error) {\n\n      // Check if there are unpaired actions so we need to trigger fail deferred\n      var errorMessage = typeof error !== \"undefined\" ? error.message : error || \"Operation didn't executed\";\n      $.each(batch, function (i, item) {\n        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\n      });\n    });\n  },\n  /*\r\n     *   Sends a multiaction to the server\r\n     */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction\"),\n      data: data,\n      queue: this.queue,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        xhr.renderingService = true;\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(response.error, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse = {};\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Disable the request, restart the form is mandatory who calls this method \r\n      * or unexpected behavior will happen on the form\r\n      */\n  disableRequests: function disableRequests() {\n    var self = this;\n    self.disabledRequests = true;\n  },\n\n  /**\r\n      * Identify if batch action is running, by default is resolved\r\n      * @returns Deferred object if batch action is running\r\n      */\n  validateIfBatchIsExecuting: function validateIfBatchIsExecuting() {\n    var self = this;\n    return self.deferredBatchExecuting;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering Command controller \r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for action and validation controllers\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.command.controllers.controller\", {\n  /* \r\n                                                          *   Set to true in order to debug\r\n                                                          */\n  THROW_ERROR: true },\n\n{\n  /*  \r\n  *   Constructor\r\n  */\n  init: function init(form) {\n    this.form = form;\n    this.dateFormat = form.getResource(\"dateFormat\");\n  },\n  /*\r\n     *   Returns the condition in JS\r\n     */\n  buildConditions: function buildConditions(conditions, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\n    innerDependencies = innerDependencies || [];\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    //  Validate trtue and false conditions\n    if (operator == \"true\")\n    return \"true\";\n    if (operator == \"false\")\n    return \"false\";\n\n    var sJsCondition = \"\";\n\n    for (var i = 0; i < conditions.expressions.length; i++) {\n      var expression = conditions.expressions[i];\n\n      if (expression.simple) {\n        var bGDetected = self.searchGridReferenceInCondition(expression.simple);\n        sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability, innerDependencies);\n\n      } else if (expression.complex) {\n        sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability, innerDependencies) + \") \";\n      }\n\n      // Adds operator\n      sJsCondition += i < conditions.expressions.length - 1 ? operator : \"\";\n    }\n\n    return sJsCondition;\n  },\n  /*\r\n     *   Builds the condition operator\r\n     */\n  buildConditionOperator: function buildConditionOperator(conditionsOperator) {\n    if (conditionsOperator == \"and\")\n    return \" && \";\n    if (conditionsOperator == \"or\")\n    return \" || \";\n    return conditionsOperator;\n  },\n  /*\r\n     *   Builds a simple condition\r\n     */\n  buildSimpleCondition: function buildSimpleCondition(condition, bGridDetected, bCheckEditability, innerDependencies) {\n    var self = this;\n    var sXpath;\n    var xpath;\n    var sArgument = \"\";\n    var operator = condition.operator;\n    var ensureValueJs = \"\";\n    var ensureEditable = \"\";\n    var ensureVisible = \"\";\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n    bCheckEditability = bCheckEditability || false;\n\n    // List of controls excluded to editability validation\n    // Just keep empty the value of element\n    var excludeEditabilityRule = { \"boolean\": \"\" };\n    var control = condition.xpath && condition.renderId ?\n    condition.xpath + '.' + condition.renderId :\n    condition.xpath || condition.renderId || condition.containerId;\n\n\n    if (bGridDetected && condition.containerId) {\n      var gridXpathInfo = self.processGridXpath(condition.xpath);\n      control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;\n    }\n\n    if (!innerDependencies.includes(control)) {\n      innerDependencies.push(control);\n    }\n\n    var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\n\n    // Build xpath\n    sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\n    if (detectedArgumentType != \"boolean\") {\n      ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\n    }\n\n    // Check if the render is editable, only when the parameter is provided\n    if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\n      ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\n    }\n\n    // Build argument\n    if (!bizagi.util.isEmpty(condition.argument)) {\n      sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\n\n      // If the argument is xpath it must be filled to for some operators\n      if (detectedArgumentType == \"xpath\") {\n        ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\n      }\n\n    } else if (condition.argument === \"\") {\n      // Also check the case when the argument is empty\n      sArgument = \"\\\"\\\"\";\n    }\n\n    // Build condition\n\n    if (operator == \"includes\") {\n      return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\n    }\n    //if (operator == \"changes\") return \"true\";\n    if (operator == \"changes\") {\n      // If key enableActionIsChangedSupport is true, allow to evaluate the valid control\n      // that execute the action \"is changed\" (see ticket TM12723)\n      if (bizagi.override && !bizagi.override.enableActionIsChangedSupport) {\n        return \"self.isChanged(\" + sXpath + \", params.changed)\";\n      } else {\n        if (bGridDetected) {\n          return \"self.isGridColumnChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        } else {\n          return \"self.isControlChanged(\" + sXpath + \", params,'\" + control + \"')\";\n        }\n      }\n    }\n    if (operator == \"equals\")\n    return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\n    if (operator == \"not-equals\")\n    return ensureEditable + sXpath + \" != \" + sArgument;\n    if (operator == \"less-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\n    if (operator == \"less-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\n    if (operator == \"greater-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\n    if (operator == \"greater-equals-than\")\n    return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\n    if (operator == \"like\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"is-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-not-empty\") {\n      if (detectedArgumentType != \"entity\") {\n        return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\n      } else {\n        return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\n      }\n    }\n    if (operator == \"is-true\")\n    return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\n    if (operator == \"is-false\")\n    return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\n    if (operator == \"does-not-contain\")\n    return ensureEditable + \"(bizagi.util.isEmpty(\" + sXpath + \") || \" + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 )\";\n    if (operator == \"contains\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\n    if (operator == \"begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\n    if (operator == \"does-not-begins-with\")\n    return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\n    if (operator == \"file-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"file-not-uploaded\") {\n      xpath = control;\n      if (bGridDetected && xpath) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n      return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\n    }\n    if (operator == \"is-invalid-email\")\n    return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\n    if (operator == \"letter-edited\")\n    return \"false\"; //TODO\n    if (operator == \"letter-not-edited\")\n    return \"false\"; //TODO\n    if (operator == \"cell-change\")\n    return \"column == \" + sArgument;\n\n    if (operator == \"on-press\") {\n      if (bGridDetected) {\n        var id = self.buildXpath(control, \"id\", bGridDetected);\n        return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\n      } else {\n        return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\n      }\n    }\n    if (operator == \"on-load\") {\n      return \"true\";\n    }\n\n    // ondelete behavior on grid control  \n    if (operator == 'on-deleted-row') {\n      xpath = control || \"\";\n      return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\n    }\n\n    // If there is another operator code throw exception\n    throw new \"There is no implementation for operator code \"() + operator;\n  },\n  /*\r\n     *   Detects the argument type based on the render\r\n     */\n  detectConditionArgumentType: function detectConditionArgumentType(control, argumentType) {\n    var self = this;\n\n    if (argumentType === undefined || argumentType == \"const\") {\n\n      // Search render\n      var form = self.form;\n      var render = form.getRender(control) || form.getRenderById(control);\n\n      // If the render doesn't exist, is because it has the visible property assigned to false\n      // and isn't present in the form's metadata, for this case returns the default value (text)\n      if (render == null) {\n        return 'text';\n      }\n\n      // Check if the render is a grid\n      if (render.properties.type == \"grid\") {\n        var gridXpath = self.processGridXpath(control);\n\n        if (gridXpath.remainingXpath === \"\") {\n          // The target is the grid\n          return \"xpath\";\n        } else {\n          render = render.getColumn(gridXpath.remainingXpath);\n          if (render == null) {\n            throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\n          }\n        }\n      }\n\n      var dataType = render.properties.dataType;\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n\n      if (self.isRelatedEntityRender(renderType)) {\n        return 'entity';\n      }\n\n      // Number\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\n        return 'number';\n      }\n\n      // Money\n      if (dataType == 8) {\n        return 'money';\n      }\n\n      // Date\n      if (dataType == 12 || dataType == 13) {\n        if (render.properties.showTime == true) {\n          return 'datetime';\n        } else {\n          return 'date';\n        }\n      }\n\n      // Boolean\n      if (dataType == 5) {\n        return 'boolean';\n      }\n\n      // Button\n      if (renderType == \"button\") {\n        return \"button\";\n      }\n\n      // form\n      if (\"form\" === renderType || /queryForm/i.test(renderType)) {\n        return \"form\";\n      }\n\n      // Default\n      return 'text';\n\n    } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\n      return argumentType;\n    }\n\n    // Default return text\n    return 'text';\n  },\n  /*\r\n     *   Detects if a render type must be binded to a xpath with related entity\r\n     */\n  isRelatedEntityRender: function isRelatedEntityRender(renderType) {\n    return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\", \"columnSearch\", \"queryMultiSelect\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\n  },\n\n  buildXpath: function buildXpath(xpath, argumentType, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (argumentType == 'xpath' && !bGridDetected) {\n      return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\n    } else if (argumentType == 'id') {\n      return \"'\" + xpath + \"'\";\n    } else if (argumentType == 'function') {\n      var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\n      return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\n    } else if (bGridDetected) {\n      return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";\n    }\n\n    return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\n  },\n  buildArgument: function buildArgument(argument, argumentType, bGridDetected, xpathContext) {\n    var self = this;\n    var number;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    if (argumentType == 'text') {\n      // Text\n      argument = argument == null ? \"\" : argument;\n      argument = typeof argument != 'string' ? argument.toString() : argument;\n      if (argument.indexOf(\"'\") != -1)\n      argument = argument.replaceAll(\"'\", \"\\\\'\");\n\n      // Remove line breaks because they will fail with the eval command\n      if (argument.indexOf(\"\\n\") != -1)\n      argument = argument.replaceAll(\"\\n\", \"\");\n\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'boolean') {\n      // Boolean\n      if (typeof argument == \"string\") {\n        return argument == \"Default\" ? argument : eval(argument.toLowerCase()) == true ? \"true\" : \"false\";\n      } else {\n        return eval(argument) == true ? \"true\" : \"false\";\n      }\n    }\n    if (argumentType == 'number') {\n      // Number\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'money') {\n      // MONEY\n      number = new Number(argument);\n      if (number == NaN)\n      return \"-99999999\";\n      return number.toString();\n    }\n    if (argumentType == 'date') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\n      if (!date || date == 0)\n      date = new Date(0);\n\n      // Remove time\n      date.setHours(0, 0, 0, 0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').setHours(0,0,0,0)\";\n    }\n    if (argumentType == 'datetime') {\n      //Date\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\n      if (!date || date == 0) {\n        date = new Date(0);\n      }\n      //date.setSeconds(0);\n      date.setMilliseconds(0);\n\n      return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\n    }\n    if (argumentType == 'color') {\n      // Color\n      return \"'\" + argument.toString() + \"'\";\n    }\n    if (argumentType == 'entity') {\n\n      if (bizagi.util.isEmpty(argument)) {\n        return null;\n      }\n      try {\n        argument = _typeof(argument) != \"object\" ? JSON.parse(argument) : argument;\n      } catch (e) {\n        argument = argument || {};\n      }\n\n      if (argument && argument.id) {\n        // Entity value\n        result = argument.id;\n      } else if (argument && Array.isArray(argument.value)) {\n        // Entity multi values\n        var result = argument.value.map(function (value) {\n          return value.id;\n        });\n      } else {\n        // Entity value\n        result = argument.id || argument;\n      }\n\n      return JSON.stringify(result);\n    }\n    if (argumentType == 'xpath') {\n      // Xpath value\n      var xpath = argument.toString();\n\n      bGridDetected = self.searchGridReferenceInXpath(xpath);\n\n      // Process grid xpaths\n      if (bGridDetected) {\n        xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n      }\n\n      if (xpathContext) {\n        xpath = xpathContext + \".\" + xpath;\n      }\n\n      return self.buildXpath(xpath, argumentType, bGridDetected);\n    }\n    if (argumentType == 'json') {\n      // Xpath value\n      return JSON.encode(argument);\n    }\n    if (argumentType == 'function') {\n      if (argument == \"BAToday\") {\n        return \"self.getCurrentDate()\";\n      }\n      if (argument == \"BANow\") {\n        return \"self.getCurrentDate(true)\";\n      }\n\n      // If there is another function type code throw exception\n      throw \"There is no implementation for function \" + argument;\n    }\n\n    if (argumentType == undefined) {\n      return null;\n    }\n\n    // If there is another argument type code throw exception\n    throw \"There is no implementation for argument type \" + argumentType;\n  },\n  /*\r\n     *   Evals if an xpath is editable\r\n     */\n  isEditable: function isEditable(xpath) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    return render.properties.editable;\n  },\n\n  isVisible: function isVisible(xpath) {\n    var self = this;\n\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    if (render.properties.visible) {\n      return self.isParentVisible(render.parent);\n    } else {\n      var renderType = bizagi.util.normalizeType(render.properties.type);\n      if (/^hidden$/i.test(renderType)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  isParentVisible: function isParentVisible(render) {\n    var self = this;\n    if (render.parent) {\n      if (render.properties.visible) {\n        return self.isParentVisible(render.parent);\n      } else {\n        return false;\n      }\n    } else {\n      return render.properties.visible;\n    }\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalGridXpath: function evalGridXpath(params, xpath, argumentType) {\n    var self = this;\n\n    if (params === undefined) {\n      return this.evalXpath(xpath, argumentType);\n    }\n\n    var grid = params.grid;\n\n    if (grid === undefined || grid === null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Grid renders\n    var gridXpath = self.processGridXpath(xpath);\n\n    // Return the value\n    var gridColumn = grid.getColumn(gridXpath.remainingXpath);\n\n    if (!gridColumn) {\n      return false;\n      //throw \"There is no a valid render for xpath \" + xpath;\n    }\n\n    var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n    if (gridColumn.properties.type == \"columnRadio\") {\n      if (cellValue && !bizagi.util.isString(cellValue)) {\n        if (cellValue.length > 0 && cellValue[0].length > 0)\n        cellValue = cellValue[0][0];else\n\n        cellValue = cellValue.id;\n      } else\n      if (!bizagi.util.isString(cellValue))\n      cellValue = 0;\n    }\n\n    if (gridColumn.properties.type == \"columnCombo\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnSearch\") {\n      cellValue = cellValue && cellValue.id ? cellValue.id : 0;\n    }\n\n    if (gridColumn.properties.type == \"columnDate\") {\n      if (cellValue) {\n        cellValue = !gridColumn.properties.showTime ?\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0, 0, 0, 0) :\n        bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n      }\n    }\n    // Parse empty values\n    if (bizagi.util.isEmpty(cellValue)) {\n      // If the render is a boolean return false for actions\n      if (argumentType == \"boolean\") {\n        if (gridColumn.properties.display == \"check\") {\n          return false;\n        } else {\n          return null;\n        }\n      }\n    }\n\n    // Parse boolean and non-empty date types\n    if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n      return eval(self.buildArgument(cellValue, argumentType));\n    }\n\n    return cellValue;\n  },\n\n  /* \r\n     *   Evals an xpath to find a render and return its value\r\n     */\n  evalXpath: function evalXpath(xpath, argumentType) {\n    var self = this,i,renderToEval;\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length === 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    i = 0;\n    while (i < rendersToEval.length) {\n      renderToEval = rendersToEval[i++];\n      var bIsGrid = renderToEval.properties.type == 'grid';\n      if (!bIsGrid) {\n        // Normal renders\n        var value = renderToEval.getValue();\n        var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\n\n        if (argumentType === undefined || argumentType === \"undefined\") {\n          return value;\n        }\n\n        // If the render is a combo and the value is null return 0 for validations and actions\n        if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n          if (bizagi.util.isEmpty(value) || value.id == \"\") {\n            value = 0;\n          }\n        }\n\n        // If the render is a queryMultiSelect and the value is empty array of objects\n        // return mapValue for validations and actions\n        if (/^queryMultiSelect$/i.test(renderType)) {\n          return renderToEval && renderToEval.mapValue(value);\n        }\n\n        if (renderType === \"comboSelected\") {\n          return typeof value === \"string\" ? JSON.parse(value).value : value;\n        }\n\n        if (bizagi.util.isEmpty(value)) {\n          // If the render is a check and the value is null return false for validations and actions\n          if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\n            return false;\n          }\n\n          return value;\n        }\n\n        if (argumentType === \"xpath\") {\n          return eval(self.buildArgument(xpath, argumentType));\n        } else {\n          return eval(self.buildArgument(value, argumentType));\n        }\n      } else {\n\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n\n        // Return the value\n        var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\n\n        if (!gridColumn) {\n          continue;\n        }\n\n        var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\n\n        if (gridColumn.properties.type == \"columnRadio\") {\n          if (cellValue && !bizagi.util.isString(cellValue)) {\n            if (cellValue.length > 0 && cellValue[0].length > 0)\n            cellValue = cellValue[0][0];else\n\n            cellValue = cellValue.id;\n          } else\n          if (!bizagi.util.isString(cellValue))\n          cellValue = 0;\n        }\n\n        if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\n          if (cellValue && cellValue.id)\n          cellValue = cellValue.id;else\n          if (typeof cellValue != \"number\" && typeof cellValue != \"string\")\n          cellValue = 0;\n        }\n\n        // Parse empty values\n        if (bizagi.util.isEmpty(cellValue)) {\n          // If the render is a boolean return false for actions\n          if (argumentType == \"boolean\") {\n            if (gridColumn.properties.display == \"check\") {\n              return false;\n            } else {\n              return null;\n            }\n          }\n        }\n\n        // Parse boolean and non-empty date types\n        if (argumentType == \"boolean\" || argumentType == \"date\" && !bizagi.util.isEmpty(cellValue)) {\n          return eval(self.buildArgument(cellValue, argumentType));\n        }\n\n        if (typeof gridColumn != \"undefined\" && typeof gridColumn.properties != \"undefined\" && typeof gridColumn.properties.type != \"undefined\" && gridColumn.properties.type == \"columnDate\") {\n          //cellValue = (cellValue && !gridColumn.properties.showTime)?bizagi.util.dateFormatter.getDateFromInvariant(cellValue).setHours(0,0,0,0):bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\n          cellValue = self.getColumnDateCorrectFunction(cellValue, gridColumn.properties.showTime)(cellValue);\n        }\n\n        return cellValue;\n      }\n      throw \"There is no a valid render for xpath \" + xpath;\n    }\n  },\n  /*\r\n     *   Check if the upload render has any files uploaded\r\n     */\n  isFileUploaded: function isFileUploaded(xpath) {\n    var self = this;\n\n    var value = self.evalXpath(xpath);\n\n    if (value && value.length) {\n      if (value.length > 0)\n      return true;\n    }\n\n    return false;\n  },\n  /*\r\n     *   Check if a render has a valid email value\r\n     */\n  isValidEmail: function isValidEmail(value) {\n    var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\n    if (value && value.match(new RegExp(regex))) {\n      return true;\n    }\n    return false;\n  },\n  /**\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isButtonPressed: function isButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var render = this.getRenderById(control);\n    if (typeof render === \"undefined\" || render === null || !/^button$/i.test(bizagi.util.normalizeType(render.properties.type))) {\n      return false;\n    }\n\n    return pressed;\n  },\n  /*\r\n     * Compare two elements, data of html and renderId to action\r\n     */\n  isGridButtonPressed: function isGridButtonPressed(control, pressed) {\n    // Check if the control is a button\n    var arrGridXpath = this.processGridXpath(control);\n    var gridXpath = arrGridXpath.gridXpath;\n    var render = this.getRender(gridXpath);\n    var column = arrGridXpath.remainingXpath || \"\";\n\n\n    if (pressed && render && render.columns) {\n      $.each(render.columns, function (key, value) {\n        if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\n          pressed = true;\n        }\n      });\n    }\n    return pressed;\n  },\n\n  /**\r\n     * Check if a control has been changed\r\n     */\n  isChanged: function isChanged(value, _isChanged) {\n    if (value === undefined || value === null) {\n      return false;\n    }\n\n    return _isChanged;\n  },\n\n  /**\r\n      * Check if a control has been changed\r\n      */\n  isControlChanged: function isControlChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var renderToEval = this.getRender(control);\n      var controlChanged = params.render;\n      if (renderToEval == null || controlChanged == null) return false;\n\n      return controlChanged.properties.id === renderToEval.properties.id &&\n      controlChanged.properties.xpath === renderToEval.properties.xpath;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Check if a column has been changed\r\n      */\n  isGridColumnChanged: function isGridColumnChanged(value, params, control) {\n    if (value == null) return false;\n\n    if (params.changed) {\n      var arrGridXpath = this.processGridXpath(control);\n      var gridXpath = arrGridXpath.gridXpath;\n      var gridToEval = this.getRender(gridXpath);\n\n      if (gridToEval == null) return false;\n\n      var xpathColumn = arrGridXpath.remainingXpath || \"\";\n      var columnChanged = params.render.getColumn(params.column);\n      var columnToEval = gridToEval.getColumn(xpathColumn);\n\n      if (columnToEval && columnChanged) {\n        return columnToEval.properties.xpath === columnChanged.properties.xpath &&\n        columnToEval.properties.id === columnChanged.properties.id;\n      }\n\n      return false;\n    }\n  },\n\n  /**\r\n     * Check if a control has the item\r\n     */\n  includes: function includes(value, argument) {\n    if (typeof value == \"undefined\" || value === null) {\n      return false;\n    }\n    if (typeof argument == \"undefined\" || argument === null) {\n      return false;\n    }\n    var inArray = $.grep(value, function (e) {\n      return e.id == argument;\n    });\n    if (inArray.length > 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\r\n     *  Check if the grid has been deleted a row\r\n     */\n  onDeletedGridRow: function onDeletedGridRow(xpath, rowDeleted) {\n    var self = this;\n    var grid = self.getRender(xpath) || {};\n\n    if (grid && rowDeleted) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *   Wrapper for get renders, return null if no renders have been found\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this,\n    form = self.form,\n    regex = /id=([\\w-]+)/gi;\n    var renders = null;\n\n    // Check if the xpath is an id\n    var idMatches = regex.exec(xpath);\n    if (idMatches && idMatches.length > 1) {\n      var render = self.getRenderById(idMatches[1]);\n      if (render) {\n        if (render.length == 0)\n        return null;else\n        {\n          renders = [];\n          renders.push(render);\n          return renders;\n        }\n      } else {\n        return null;\n      }\n\n    }\n\n    renders = form.getRenders(xpath);\n    if (renders.length == 0)\n    return null;\n    return renders;\n  },\n  /*\r\n     *   Wrapper for get only one editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this,\n    form = self.form;\n\n    return form.getRender(xpath);\n  },\n  /*\r\n     *   Wrapper to get a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this,\n    form = self.form;\n\n    return form.getRenderById(id);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showRenderNotFoundError: function showRenderNotFoundError(xpath) {\n    bizagi.debug(\"Cannot find render in DOM: \" + xpath);\n  },\n  /* \r\n     *   Helper function to detect metadata errors\r\n     */\n  showContainerNotFoundError: function showContainerNotFoundError(containerId) {\n    bizagi.debug(\"Cannot find container in DOM: \" + containerId);\n  },\n  /*\r\n     *   Returns the current date\r\n     */\n  getCurrentDate: function getCurrentDate(includeTime) {\n    var currentDate = new Date();\n    var invariantDate = bizagi.util.dateFormatter.getDateFromInvariant(bizagi.util.dateFormatter.formatInvariant(currentDate));\n    if (!includeTime && invariantDate && !isNaN(Date.parse(invariantDate)) && !$.isNumeric(invariantDate)) {\n      invariantDate.setHours(0, 0, 0, 0);\n    }\n    return invariantDate.getTime();\n\n  },\n  /*\r\n     *   Return the grid xpath parts\r\n     */\n  processGridXpath: function processGridXpath(xpath) {\n    // Eval using regular expressions\n    var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\n    var matches = regex.exec(xpath);\n    var index, remainingXpath, gridXpath;\n    if (matches) {\n      gridXpath = matches[1];\n      index = matches[2];\n      remainingXpath = matches[3];\n    } else {\n      index = \"\";\n      remainingXpath = \"\";\n    }\n\n    return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\n  },\n  /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\n  searchForGridReference: function searchForGridReference(conditions, commands) {\n    var self = this;\n    var i;\n    // Check in conditions\n    if (conditions) {\n      return self.searchGridReferenceInCondition(conditions);\n    }\n\n    // Check in commands\n    if (commands) {\n      for (i in commands) {\n        var command = commands[i];\n        return self.searchForGridReferenceInCommand(command);\n      }\n    }\n\n    return null;\n  },\n  /*\r\n      *   Check if an action/validation contains reference to a grid\r\n      */\n  searchForGridReferenceInCommand: function searchForGridReferenceInCommand(command) {\n    if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\n      return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\n    }\n\n    // Check in argument if argumentType is xpath\n    if (command.argumentType == 'xpath') {\n      if (command.argument.indexOf(\"[]\") > 0) {\n        return command.argument.substring(0, command.argument.indexOf(\"[]\"));\n      }\n    }\n  },\n\n  /*\r\n     *   Check if a condition contains reference to a grid\r\n     */\n  searchGridReferenceInCondition: function searchGridReferenceInCondition(condition) {\n    var self = this;\n    var bGridReferenceFound;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      for (i in condition.expressions) {\n        if (condition.expressions.hasOwnProperty(i)) {\n          bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n        }\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridReferenceInCondition(condition.simple);\n\n    } else if (condition.complex) {\n      return self.searchGridReferenceInCondition(condition.complex);\n    } else {\n      // Looking for grid reference within xpath\n      if (condition.xpath || condition.renderId) {\n        // Check in condition.xpath\n        bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\n        if (bGridReferenceFound)\n        return bGridReferenceFound;\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType == 'xpath') {\n          bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\n          if (bGridReferenceFound)\n          return bGridReferenceFound;\n\n        }\n\n      }\n    }\n\n    return null;\n  },\n  /*\r\n     *   Check if a xpath contains a grid reference\r\n     */\n  searchGridReferenceInXpath: function searchGridReferenceInXpath(xpath) {\n    // Check in condition.xpath\n    if (xpath && xpath.indexOf(\"[]\") > 0) {\n      return xpath.substring(0, xpath.indexOf(\"[]\"));\n    }\n    return null;\n  },\n  getGridControl: function getGridControl(xpath, surrogateKey) {\n    var self = this;\n    var remainingXpath = self.processGridXpath(xpath).remainingXpath;\n    var grid = self.getRender(xpath);\n    var column = grid.getControlCell(surrogateKey, remainingXpath);\n\n    return column;\n\n  },\n\n  //#region No side effects functions\n  getColumnDateCorrectFunction: function getColumnDateCorrectFunction(value, showTime) {\n    var self = this;\n    if (!value) return self.getColumnDateValueForNoValue;\n    if (value && showTime) return self.getColumnDateValueDateAndTime;\n    if (value && !showTime) return self.getColumnDateValueOnlyDate;\n    return value;\n  },\n\n  getColumnDateValueForNoValue: function getColumnDateValueForNoValue(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value);\n  },\n\n  getColumnDateValueOnlyDate: function getColumnDateValueOnlyDate(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value).setHours(0, 0, 0, 0);\n  },\n\n  getColumnDateValueDateAndTime: function getColumnDateValueDateAndTime(value) {\n    return bizagi.util.dateFormatter.getDateFromInvariant(value, true).getTime();\n  }\n\n  //#endregion side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Rendering Validation controller\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will parse and execute all the validations defined for the form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\n  /* \r\n                                                                                        *   Constructor\r\n                                                                                        */\n  init: function init(form, actions) {\n    var self = this;\n\n    // Call base\n    this._super(form);\n\n    // Set a new hash containing all the dependencies subscribing the events\n    self.globalDependencies = {};\n    self.initialCallFunctions = {};\n    self.initialCallFunctionsDeferred = new $.Deferred();\n\n    // Build actions\n    if (actions)\n    self.buildActions(actions);\n\n    // Keep references\n    self.actions = actions;\n    self.internalSubmitActions = {};\n\n    // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\n    self.initialCallTimeout = 25;\n    self.initialCallIncrements = 25;\n    self.actionsHistory = {};\n    self.period = 50;\n  },\n  /*\r\n     *   Adds an internal submit action to be executed with all the given rules\r\n     */\n  processInternalSubmitAction: function processInternalSubmitAction(xpath, action) {\n    var self = this;\n\n    // if the action is registered, don't add it again\n    // only one internal submit action is allowed per control\n    if (self.internalSubmitActions[xpath])\n    return;\n\n    // Add to hash and build it\n    self.internalSubmitActions[xpath] = action;\n    self.buildAction(action, true);\n  },\n\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var self = this;\n    var result = false;\n\n    if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\n    return result;\n  },\n\n  evalClientAction: function evalClientAction(action) {\n    var self = this,i = 0,serverCommand = false,command;\n    var commands = [].concat(action.commands, action.elseCommands);\n    var length = commands.length;\n\n    for (; i < length; i++) {\n      command = commands[i];\n      if (!self.isClientAction(command)) {\n        serverCommand = true;\n        break;\n      }\n    }\n\n    if (serverCommand) {\n      action.enabled = false;\n    }\n  },\n\n  /* Process all given  actions*/\n  buildActions: function buildActions(actions, dontExecute) {\n    var self = this,i,len;\n    var hashes = {};\n\n    // Added in BA56628, it is removed because it affects the actions in global, summary, and record view forms\n    // if (self.form.properties.displayAsReadOnly && self.isSummaryOrGlobalForm())\n    //    actions = [];\n\n    var executeOnlyClientActions = self.isSummaryOrGlobalForm();\n\n    for (i = 0, len = actions.length; i < len; i++) {\n      // If action is not \"valid\" we can omit that instruction\n      try {\n        var action = actions[i];\n        var hash = bizagi.util.md5(JSON.stringify(action.conditions));\n        var hashC = bizagi.util.md5(JSON.stringify(action.commands));\n        if (hashes[hash]) {\n          if (hashes[hash].indexOf(hashC) === -1) {\n            // si la condicion es igual y los comandos diferentes\n            executeOnlyClientActions && self.evalClientAction(action);\n            self.buildAction(action, dontExecute);\n            hashes[hash].push(hashC);\n          }\n        } else {\n          executeOnlyClientActions && self.evalClientAction(action);\n          self.buildAction(action, dontExecute);\n          hashes[hash] = [hashC];\n        }\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\n        }\n      }\n    }\n  },\n  /*\r\n     *   Remove all current handlers\r\n     */\n  unbindActions: function unbindActions() {\n    var self = this;\n\n    // Remove all previous handlers\n    $.each(self.globalDependencies, function (i, render) {\n      render.unbind(\"renderchange.action\");\n    });\n\n    self.globalDependencies = {};\n\n    // Reset timers and collections\n    $.each(self.initialCallFunctions, function (i, handle) {\n      clearTimeout(handle);\n    });\n    self.initialCallFunctions = {};\n  },\n  /* \r\n     *   Re-execute actions, cleaning the handlers first\r\n     */\n  refreshActions: function refreshActions(newActions) {\n    var self = this;\n\n    self.initialCallTimeout = 25;\n    self.initialCallFunctions = {};\n\n    newActions = newActions || [];\n\n    // Build the actions again\n    self.actions = self.actions.concat(newActions);\n    self.buildActions(self.actions, true);\n\n    // Build internal actions again\n    $.each(self.internalSubmitActions, function (_, action) {\n      try {\n        self.buildAction(action, false);\n      } catch (e) {\n        // Handle the exception\n        if (e.message !== \"RenderNotFoundException\") {\n          bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\n        }\n      }\n    });\n  },\n  /* Process a single action*/\n  buildAction: function buildAction(action, dontExecute) {\n    var self = this;\n    var form = self.form;\n    var dependencies = [];\n    var dependenciesId = [];\n    var innerDependencies = [];\n\n    var isEnabled = action.enabled != undefined ? action.enabled : true;\n\n    if (!isEnabled) return;\n\n    // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\n    // To include an auto-dependency, so each time the grid is changed that condition will be executed\n    if (action.conditions && action.conditions.operator == \"true\") {\n      $.each(action.commands, function (_, command) {\n        var gridReference = self.searchGridReferenceInXpath(command.xpath);\n        if (gridReference) {\n          if (!innerDependencies.includes(gridReference))\n          innerDependencies.push(gridReference);\n        }\n      });\n    }\n\n    function isValidDependency(type) {\n      var notValid = [\"groupedgrid\", \"collectionnavigator\"];\n\n      return notValid.indexOf(type) === -1;\n    }\n\n    function addDependency(render) {\n      if (isValidDependency(render.properties.type)) {\n        dependenciesId.push(render.properties.id);\n        dependencies.push(render);\n      }\n    }\n\n\n    // Build anonymous function\n    var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands, innerDependencies);\n\n    // Find dependencies to attach triggers\n    if (innerDependencies) {\n      for (var i = 0; i < innerDependencies.length; i++) {\n        if (typeof innerDependencies[i] != \"undefined\") {\n          var renders = form.getRenders(innerDependencies[i]);\n          if (renders.length === 0) {\n            var renderById = form.getRenderById(innerDependencies[i]);\n            renders = renderById ? [renderById] : null;\n          }\n\n          if (renders) {\n            $.each(renders, function (_, render) {\n              if ($.inArray(render.properties.id, dependenciesId) < 0 && render.properties.editable) {\n                addDependency(render);\n              }\n            });\n            if (dependencies.length === 0) {\n              addDependency(renders[0]);\n            }\n          }\n        }\n      }\n    }\n\n    // Attach handlers\n    $.each(dependencies, function (_, render) {\n      render.bind(\"renderchange.action\", function (ev, args) {\n        args = args || {};\n\n        // Default changed argument to true\n        args.changed = args.changed !== undefined ? args.changed : true;\n\n        // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \n        if (args.column) {\n          for (var j = 0; j < action.gridColumns.length; j++) {\n            if (args.column == action.gridColumns[j]) {\n              // Call function\n              fn(self, args);\n              return;\n            }\n          }\n        } else {\n          // Call function\n          fn(self, args);\n        }\n      });\n\n      // Add to global dependencies hash\n      self.globalDependencies[render.properties.id] = render;\n\n      // If render is a grid ... trigger function at this point\n      if (render.properties.type === 'grid') {\n        dontExecute = true;\n\n        // Search column dependencies\n        action.gridColumns = [];\n        self.searchGridColumns(action.conditions, action.gridColumns);\n      }\n    });\n\n    // Check if it has to execute\n    if (dontExecute)\n    return;\n\n    // Execute the action because it must execute when the page loads with pre-defined value\n    // Create an async function to trigger it later\n    var asyncFn = function asyncFn(self) {\n\n      var guid = Math.guid();\n      // Create the timeout\n      var handle = setTimeout(function () {\n        try {\n          // TODO: Define render to set parameter to \"fn\" function\n          fn(self);\n          delete self.initialCallFunctions[guid];\n        } catch (e) {\n        } finally\n        {\n          clearTimeout(handle);\n        }\n      }, self.initialCallTimeout);\n\n      // Save a reference\n      self.initialCallFunctions[guid] = handle;\n      self.initialCallTimeout += self.initialCallIncrements;\n    };\n\n    // Run it\n    asyncFn(self);\n  },\n  /*\r\n     * Creates the function to execute based on the action metadata\r\n     */\n  buildFunction: function buildFunction(conditions, commands, elseCommands, innerDependencies) {\n    var self = this;\n\n    var gridReference = self.searchForGridReference(conditions, commands);\n    var bGridDetected = gridReference != null ? gridReference : false;\n    var sJsCondition = \"\";\n    var sJsAction = \"\";\n    var sStatement;\n    var sJsElseAction = \"\";\n    var bAutomaticRestore = elseCommands ? false : true;\n    var bCondition = conditions ? true : false;\n    var i;\n\n    // Build Condition\n    if (bCondition) {\n      sJsCondition += self.buildConditions(conditions, bGridDetected, false, innerDependencies);\n    }\n\n    // Build and execute actions\n    for (i = 0; i < commands.length; i++) {\n      // Parse command\n      var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\n      var command = self.buildCommand(commands[i], bGridDetected);\n\n      // Check if command ending with semicolon and remove it\n      command = command.indexOf(\";\") >= 1 ? command.replace(\";\", \"\") : command;\n      sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\n\n      if (bAutomaticRestore) {\n        sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\n      }\n    }\n\n    // Build non-automatic else commands\n    if (!bAutomaticRestore) {\n      sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n      sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n      for (i = 0; i < elseCommands.length; i++) {\n        var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\n        var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\n        // Check if command ending with semicolon and remove it\n        elseCommand = elseCommand.indexOf(\";\") >= 1 ? elseCommand.replace(\";\", \"\") : elseCommand;\n        sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\n      }\n      sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n      sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n      sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n    }\n\n    // Build final function\n    //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\n    sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\n    sStatement += \"params = params || {};\\r\\n\";\n    if (bGridDetected) {\n      sStatement += \"var i = params.key;\\r\\n\";\n      sStatement += \"var column = params.column;\\r\\n\";\n    }\n    if (bCondition) {\n      sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\n    }\n\n    // Creates defferreds\n    sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\n    sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\n    sStatement += sJsAction;\n    sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\n    sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\n    sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\n\n    if (bCondition) {\n      sStatement += \"\\r\\n } \";\n      if (sJsElseAction.length > 0) {\n        sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\n      }\n    }\n\n    sStatement += \"};\\r\\n\";\n\n\n    if (!bGridDetected) {\n      sStatement += \"baTmpFn\";\n    } else {\n      var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\n      sGridStatement += \"args = args || {};\\r\\n\";\n      sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\n      sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\n      sGridStatement += \"\\t args.grid = grid; \\r\\n\";\n      sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\n      sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\n      sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\n      sGridStatement += \"\\t });\\r\\n\";\n      sGridStatement += \"} else {\\r\\n\";\n      sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\n      sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\n      sGridStatement += \"}\\r\\n\";\n      sGridStatement += \"};\\r\\n\";\n      sStatement += sGridStatement;\n      sStatement += \"baGridTmpFn\";\n    }\n\n    // Return interpreted function\n    return eval(sStatement);\n  },\n\n  /*\r\n     *   This method checks if a command must be performed by the client, or by the server\r\n     */\n  isServerCommand: function isServerCommand(command) {\n    var commandType = command.command;\n\n    return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\", \"execute-pipeline\"].includes(commandType);\n  },\n\n  isClientAction: function isClientAction(command) {\n    var commandType = command.command;\n\n    return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\n  },\n\n  isRecentAction: function isRecentAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    if (self.actionsHistory[tag] != null) {\n      return true;\n    }\n    $.when(self.runAction(prefix, command)).done(function () {\n      delete self.actionsHistory[tag];\n      bizagi.log(\"resolve \" + tag);\n    });\n    return false;\n  },\n\n  runAction: function runAction(prefix, command) {\n    var self = this;\n    var tag = prefix + \"@\" + command;\n    self.actionsHistory[tag] = new $.Deferred();\n    var timeOutActionsHistory = setTimeout(self.actionsHistory[tag].resolve, self.period);\n    self.actionsHistory[tag].done(clearTimeout.bind(null, timeOutActionsHistory));\n    return self.actionsHistory[tag].promise();\n  },\n  /*\r\n     *   Builds the action JS\r\n     */\n  buildCommand: function buildCommand(command, bGridDetected) {\n    var self = this;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    var gridReference = bGridDetected;\n\n    // Parse argument\n    var commandType = command.command;\n    var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\n    var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\n    var xpath = command.xpath;\n\n    var commandGridDetected = self.searchForGridReferenceInCommand(command);\n    if (commandGridDetected && command.containerId) {\n      var gridXpathInfo = self.processGridXpath(xpath);\n      xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\n    } else\n    if (xpath && command.renderId) {\n      xpath = xpath + \".\" + command.renderId;\n    }\n    // If a render id is given, we use it with priority over only xpath\n    else if (command.renderId) {\n        xpath = \"id=\" + command.renderId + \"\";\n      }\n\n    // Process grid xpaths\n    if (bGridDetected && xpath) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    if (command.xpath && command.xpath.length > 0 || command.renderId && command.renderId.length > 0) {\n      // Build render command\n      switch (commandType) {\n        case 'background-color':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'forecolor':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'visible':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\n          }\n          break;\n        case 'readonly':\n          if (command.controlType === \"activityFlowButton\") {\n            return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\n          } else {\n            return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\n          }\n          break;\n        case 'required':\n          return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-value':\n          // Check specific argument type\n          if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\n            // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\n            if (typeof command.xpathContext !== \"undefined\") {\n              command.argument = command.xpathContext + \".\" + command.argument;\n            }\n            argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\n          }\n\n          return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-min':\n          return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'set-max':\n          return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\n          break;\n        case 'calculate':\n          return \"self.executeCalculatedField('\" + xpath + \"');\";\n          break;\n        case 'submit-value':\n          return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\n          break;\n        case 'clean-data':\n          return \"self.cleanRenderData('\" + xpath + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          commandGridDetected = self.searchForGridReferenceInCommand(command);\n\n          if (commandGridDetected) {\n            return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          } else {\n            return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\n          }\n          break;\n        case 'trigger-click':\n          return \"self.triggerClick('\" + xpath + \"');\";\n          break;}\n\n\n    } else {\n      // Build container command\n      switch (commandType) {\n        case 'background-color':\n          return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'visible':\n          return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\n          break;\n        case 'collapse':\n          return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\n          break;\n        case 'set-active':\n          return \"self.changeActiveItem('\" + command.container + \"');\";\n          break;\n        case 'readonly':\n          return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\n          break;\n\n        // New Features                                        \n        case 'refresh':\n          // Set prepare parameter to multiaction purposes \n          return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\n          break;}\n\n    }\n\n    // Global  actions without specific target\n    if (commandType === 'submit-data') {\n      return \"self.submitFormData();\";\n    }\n\n    if (commandType === 'execute-rule') {\n      var ruleObj = command.argument || {};\n      var guidRule = \"\";\n      try {\n        guidRule = JSON.parse(ruleObj).guid;\n      } catch (e) {\n      }\n\n      var xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        var xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\n      } else {\n        return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-interface') {\n      var interfaceObj = command.argument || {};\n      var guidInterface = \"\";\n\n      try {\n        guidInterface = JSON.parse(interfaceObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-sap') {\n      var connectorObj = command.argument || {};\n      var guidsap = \"\";\n\n      try {\n        guidsap = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\n      var connectorObj = command.argument || {};\n      var guidConnector = \"\";\n\n      try {\n        guidConnector = JSON.parse(connectorObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    // Command to execute Pipeline\n    if (commandType === 'execute-pipeline') {\n      var pipelineObj = command.argument || {};\n      var guidPipeline = \"\";\n\n      try {\n        guidPipeline = JSON.parse(pipelineObj).guid;\n      } catch (e) {\n      }\n\n      xpathContext = command.xpathContext || \"\";\n      if (bGridDetected) {\n        xpathContextRow = gridReference + \"[id=%s]\";\n        return \"self.executePipeline('\" + guidPipeline + \"', printf('\" + xpathContextRow + \"',i));\";\n      } else {\n        return \"self.executePipeline('\" + guidPipeline + \"','\" + xpathContext + \"');\";\n      }\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return \"\";\n  },\n  /* \r\n     *   Builds the JS command to restore automatically a command when condition is not met\r\n     */\n  buildRestoreCommand: function buildRestoreCommand(command, bGridDetected) {\n    var xpath = command.xpath;\n    var commandType = command.command;\n\n    // Define if a grid has been detected\n    bGridDetected = bGridDetected || false;\n\n    // If a render id is given, we use it with priority over only xpath\n    if (command.renderId) {\n      xpath = \"id=\" + command.renderId + \"\";\n    }\n\n    // Process grid xpaths\n    if (bGridDetected) {\n      xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\n    }\n\n    // Build restore action\n    if (xpath && xpath.length > 0) {\n      return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\n    } else {\n      return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\n    }\n  },\n  /* \r\n     *   Detect the command argument type based on the command type\r\n     */\n  detectCommandArgumentType: function detectCommandArgumentType(argumentType, commandType) {\n    if (argumentType === undefined) {\n      return argumentType;\n\n    } else if (argumentType == \"const\") {\n\n      if (commandType == 'background-color')\n      return 'color';\n      if (commandType == 'forecolor')\n      return 'color';\n      if (commandType == 'visible')\n      return 'boolean';\n      if (commandType == 'readonly')\n      return 'boolean';\n      if (commandType == 'required')\n      return 'boolean';\n      if (commandType == 'set-value')\n      return 'text';\n      if (commandType == 'collapse')\n      return 'boolean';\n      if (commandType == 'set-active')\n      return 'number';\n      if (commandType == 'set-min')\n      return 'text';\n      if (commandType == 'set-max')\n      return 'text';\n      if (commandType == 'calculate')\n      return undefined;\n      if (commandType == 'refresh')\n      return undefined;\n      if (commandType == 'submit-value')\n      return 'json';\n\n    } else if (argumentType === \"xpath\" || argumentType === \"entity\" || argumentType === \"function\") {\n      return argumentType;\n    }\n\n    bizagi.log(\"There is no definition for commandType: \" + commandType);\n    return null;\n  },\n  /* \r\n     *   Builds the JS command to restore a render when condition is not met\r\n     */\n  restoreRender: function restoreRender(xpath, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var properties = render.originalProperties;\n      var textFormat = properties.textFormat || {};\n      if (commandType == 'background-color')\n      self.changeRenderBackground(xpath, textFormat.background || '');\n      if (commandType == 'forecolor')\n      self.changeRenderForeground(xpath, textFormat.color || 'none');\n      if (commandType == 'visible')\n      self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\n      if (commandType == 'readonly')\n      self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\n      if (commandType == 'required')\n      self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\n      // NOte: Command 6 does not have restoration\n    });\n  },\n  /* \r\n     *   Builds the JS command to restore a container when condition is not met\r\n     */\n  restoreContainer: function restoreContainer(containerId, commandType) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(xpath);\n      }\n      return;\n    }\n\n    var properties = container.originalProperties;\n    if (commandType == 'background-color')\n    self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\n    if (commandType == 'visible')\n    self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\n    if (commandType == 'collapse')\n    self.toogleContainer(containerId, true);\n    // NOte: Command 8 does not have restoration\n    if (commandType == 'readonly')\n    self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\n  },\n  /* \r\n     *   Sets a new color for the background of the render\r\n     *   Applies also to grid cells!\r\n     */\n  changeRenderBackground: function changeRenderBackground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"backgroundColor\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeBackgroundColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n\n    });\n  },\n  /*\r\n      *   Sets a new color for the background of the button\r\n      *   Applies also to grid cells!\r\n      */\n  changeButtonBackground: function changeButtonBackground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n\n    element.css(\"background-image\", \"none\");\n    element.addClass(\"ui-fast-transition\");\n\n    if (typeof element[0] !== \"undefined\") {\n      element[0].style.setProperty(\"background-color\", argument, \"important\");\n    }\n  },\n\n  /* \r\n     *   Sets a new color for the foreground of the render\r\n     */\n  changeRenderForeground: function changeRenderForeground(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"color\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            render.changeColor(argument);\n            self.logVisualChange(newVisualChange);\n          });\n\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Sets a new color for the foreground of the render\r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.css(\"color\", argument, \"!important\");\n  },\n  /* \r\n     *   Changes the visibility of the render\r\n     */\n  changeRenderVisibility: function changeRenderVisibility(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"visibility\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeVisibility(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnVisibility(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the visibility of the button\r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var visible = bizagi.util.parseBoolean(argument) == true;\n\n    if (bizagi.util.isMobileDevice()) {\n      self.changeFormButtonVisibility(guid, visible);\n    } else {\n      var element = self.form.getButton(guid);\n      if (visible) {\n        element.show();\n        element.css(\"display\", \"\");\n      } else {\n        element.hide();\n      }\n    }\n  },\n\n\n  /* \r\n     *   Changes the editability of the render\r\n     */\n  changeRenderEditability: function changeRenderEditability(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"editability\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeEditability(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnEditability(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /*\r\n      *   Changes the editability of the button\r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, argument) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    if (bizagi.util.parseBoolean(argument) == true) {\n      element.removeAttr(\"disabled\");\n    } else {\n      element.attr(\"disabled\", \"disabled\");\n    }\n  },\n  /*\r\n      *  trigger Click button\r\n      */\n  triggerClick: function triggerClick(xpath) {\n    var self = this;\n    var guid = xpath.substring(3);\n    var element = self.form.getButton(guid);\n    element.trigger(\"click\");\n  },\n\n  /* \r\n     *   Changes the required value of the render\r\n     */\n  changeRenderRequired: function changeRenderRequired(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var rendersToEval = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      if (bizagi.util.parseBoolean(render.properties.editable)) {\n        rendersToEval.push(render);\n      }\n    });\n\n    if (rendersToEval.length === 0) {\n      rendersToEval = renders;\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      // Execute commands over valid renders\n      if (self.isValidRender(render)) {\n        var newVisualChange = self.getVisualChange(render, \"required\", argument);\n\n        //Detects if is the grid component, and set the desired properties\n        if (!self.isGridComponent(render, xpath)) {\n          // Normal renders\n          $.when(render.ready()).done(function () {\n            $.when(render.renderingDeferred).done(function () {\n              render.changeRequired(argument);\n              self.logVisualChange(newVisualChange);\n            });\n          });\n        } else {\n          // Grid renders\n          var gridXpath = self.processGridXpath(xpath);\n          newVisualChange.xpath = gridXpath.remainingXpath;\n\n          $.when(render.ready()).done(function () {\n            if (!bizagi.util.isEmpty(gridXpath.index)) {\n              render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(gridXpath.index);\n            } else {\n              render.changeColumnRequired(gridXpath.remainingXpath, argument);\n              var indexes = render.getIndexes(),j,lenIndex;\n              for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\n                newVisualChange.indexes.push(indexes[j]);\n              }\n            }\n\n            // Add visual changes\n            self.logVisualChange(newVisualChange);\n          });\n        }\n      }\n    });\n  },\n  /* \r\n     *   Changes the render internal value\r\n     */\n  changeRenderValue: function changeRenderValue(xpath, argument) {\n    var self = this;\n\n    if (argument != null && _typeof(argument) === \"object\") {\n      argument = $.extend(argument, { fromAction: true });\n    }\n\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n      });\n    }\n\n    $.each(rendersToEval, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          if (render.asyncRenderDeferred) {\n            $.when(render.asyncRenderDeferred).done(function () {\n              render.setDisplayValue(argument);\n            });\n          } else {\n            render.setDisplayValue(argument);\n          }\n        });\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\n\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\n            }\n          }\n        });\n      }\n    });\n  },\n  /**\r\n      * Changes the render minimum value\r\n      * @param xpath\r\n      * @param argument\r\n      */\n  changeRenderMinValue: function changeRenderMinValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"minValue\", argument);\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          var renderType = bizagi.util.normalizeQueryType(render.properties.type);\n          if ([\"number\", \"date\", \"money\"].includes(renderType)) {\n            render.changeMinValue(argument);\n            self.logVisualChange(newVisualChange);\n          }\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        newVisualChange.xpath = gridXpath.remainingXpath;\n\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  changeRenderMaxValue: function changeRenderMaxValue(xpath, argument) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      var newVisualChange = self.getVisualChange(render, \"maxValue\", argument);\n\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        $.when(render.ready()).done(function () {\n          render.changeMaxValue(argument);\n          self.logVisualChange(newVisualChange);\n        });\n\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        $.when(render.ready()).done(function () {\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\n            newVisualChange.indexes.push(gridXpath.index);\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\n              newVisualChange.indexes.push(indexes[j]);\n            }\n          }\n\n          // Add visual changes\n          self.logVisualChange(newVisualChange);\n        });\n      }\n    });\n  },\n  /* \r\n     *   Changes the render max value\r\n     */\n  executeCalculatedField: function executeCalculatedField(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      $.when(render.ready()).done(function () {\n        render.runFormula();\n      });\n    });\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshControl: function refreshControl(xpath, xpathContext, commandType) {\n    var self = this;\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n    var queue = new bizagiQueue();\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process matching renders\n    $.each(renders, function (i, render) {\n      queue.add(render.ready().pipe(function () {\n        return render.refreshControl({ xpath: xpath, xpathContext: xpathContext });\n      }));\n    });\n\n    // Return queue deferred\n    return queue.execute();\n  },\n  /* \r\n     *   Refresh the render internal value using ajax\r\n     */\n  refreshContainer: function refreshContainer(containerId, xpathContext) {\n    var self = this;\n    var container = self.form.getContainer(containerId);\n\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(containerId);\n      }\n      return;\n    }\n\n    return $.when(container.ready()).\n    pipe(function () {\n      return container.refreshContainer({ xpathContext: xpathContext });\n    });\n  },\n  /**\r\n      * Refresh a cell of grid\r\n      */\n  refreshGridCell: function refreshGridCell(xpath, xpathContext) {\n    var self = this;\n    var queue = new bizagiQueue();\n    var def = new $.Deferred();\n    var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return null;\n    }\n\n    // Eval only an editable render\n    var rendersToEval = [];\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        rendersToEval.push(render);\n        return false;\n      }\n    });\n\n    // If no render has been found skip editable validation\n    if (rendersToEval.length == 0) {\n      $.each(renders, function (i, render) {\n        rendersToEval.push(render);\n        return false;\n      });\n    }\n\n    if (rendersToEval.length === 0) {\n      return;\n    }\n\n    // Check xpathContext of the form (addForm or editForm)\n    if (self.form && self.form.properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\n    }\n\n    queue.add(def.promise());\n\n    $.when.apply($, $.map(rendersToEval, function (grid) {\n      grid.ready();\n    })).\n    done(function () {\n      var len = rendersToEval.length;\n      var internalQueue = new bizagiQueue();\n      for (var i = 0; i < len; i++) {\n        var grid = rendersToEval[i];\n\n        var gridXpath = self.processGridXpath(xpath);\n        if (!bizagi.util.isEmpty(gridXpath.index)) {\n          // Process a specific row\n          internalQueue.add(grid.refreshCell({\n            key: gridXpath.index,\n            column: gridXpath.remainingXpath,\n            xpathContext: xpathContext }));\n\n        } else {\n          // Process all rows\n          var indexes = grid.getIndexes();\n          var lenIndex = indexes.length;\n          for (var j = 0; j < lenIndex; j++) {\n            internalQueue.addParallel(grid.refreshCell({\n              key: indexes[j],\n              column: gridXpath.remainingXpath,\n              xpathContext: xpathContext }));\n\n          }\n        }\n      }\n\n      $.when(internalQueue.execute()).\n      done(function () {\n        def.resolve();\n      });\n    });\n\n\n    return queue.execute();\n  },\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitFormData: function submitFormData(params) {\n    var self = this;\n\n    // For the submit action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.submitData(params);\n    });\n  },\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(rule, xpathContext, commandType) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n    var prefix = rule + \".\" + xpathContext;\n    if (self.isRecentAction(prefix, commandType)) {\n      return;\n    } else {\n      // Process the action\n      return $.when(form.ready()).\n      pipe(function () {\n        return form.executeRule({ rule: rule, xpathContext: xpathContext });\n      });\n    }\n  },\n  executeInterface: function executeInterface(interfaceObject, xpathContext) {\n    var self = this;\n    // For the execute rule  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executeInterface({ \"interface\": interfaceObject, xpathContext: xpathContext });\n    });\n  },\n\n\n  executeSAPConnector: function executeSAPConnector(guidsap, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeSAPConnector({ guidsap: guidsap, xpathContext: xpathContext });\n    });\n  },\n\n  executeConnector: function executeConnector(guidConnector, xpathContext) {\n    var self = this;\n    var form = self.form;\n    return $.when(form.ready).pipe(function () {\n      return form.executeConnector({ guidConnector: guidConnector, xpathContext: xpathContext });\n    });\n  },\n\n  executePipeline: function executePipeline(pipeline, xpathContext) {\n    var self = this;\n    // For the execute pipeline  action we need only the whole form to perform the server action\n    var form = self.form;\n\n    // Process the action\n    return $.when(form.ready()).\n    pipe(function () {\n      return form.executePipeline({ pipeline: pipeline, xpathContext: xpathContext });\n    });\n  },\n  /*\r\n     *   Submit the given render and refresh dependencies after that\r\n     */\n  submitRender: function submitRender(xpath, argument) {\n    var self = this;\n    // For the submit action we need only one render to perform the server action\n    var render = self.getRender(xpath);\n    if (render == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    // Process the action in the render\n    return $.when(render.ready()).pipe(function () {\n      return render.submitOnChange();\n    });\n  },\n  /*\r\n     * Cleans current value\r\n     */\n  cleanRenderData: function cleanRenderData(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var promises = [];\n\n    if (renders == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showRenderNotFoundError(xpath);\n      }\n      return;\n    }\n\n    $.each(renders, function (i, render) {\n      //Detects if is the grid component, and set the desired properties\n      if (!self.isGridComponent(render, xpath)) {\n        // Normal renders\n        promises.push($.when(render.ready()).then(function () {\n          return $.when(render.renderingDeferred).then(function () {\n            return $.when(render.cleanData()).then(function () {\n              return self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\n            });\n          });\n        }));\n      } else {\n        // Grid renders\n        var gridXpath = self.processGridXpath(xpath);\n        promises.push($.when(render.ready()).then(function () {\n          var gridPromises = [];\n\n          if (!bizagi.util.isEmpty(gridXpath.index)) {\n            gridPromises.push($.when(render.cleanCellData(gridXpath.index, gridXpath.remainingXpath)));\n          } else {\n            var indexes = render.getIndexes(),j,lenIndex;\n            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\n              gridPromises.push($.when(render.cleanCellData(indexes[j], gridXpath.remainingXpath)));\n            }\n          }\n\n          return $.when.apply($, gridPromises);\n        }));\n      }\n    });\n\n    return $.when.apply($, promises);\n  },\n  /* \r\n     *   Changes container background color\r\n     */\n  changeContainerBackground: function changeContainerBackground(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeBackgroundColor(argument);\n      container.visualChanges[\"backgroundColor\"] = argument;\n    });\n  },\n  /* \r\n     *   Shows or hides a container\r\n     */\n  changeContainerVisibility: function changeContainerVisibility(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready(true)).done(function () {\n      $.when(container.renderingDeferred).done(function () {\n        container.changeVisibility(argument);\n        container.visualChanges[\"visibility\"] = argument;\n      });\n    });\n  },\n  /* \r\n     *   Expand or collapse a group container\r\n     */\n  toogleContainer: function toogleContainer(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (/group/i.test(container.properties.type)) {\n      $.when(container.ready()).done(function () {\n        container.toogleContainer(argument);\n      });\n    }\n  },\n  /* \r\n     *   Select a determinate sub-container in a tab or an accordion\r\n     */\n  changeActiveItem: function changeActiveItem(containerId) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n    if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\n      container.loadingDeferred.resolve();\n    }\n    $.when(container.ready()).done(function () {\n      container.setAsActiveContainer();\n    });\n  },\n  /* \r\n     *   Changes container editability\r\n     */\n  changeContainerEditability: function changeContainerEditability(containerId, argument) {\n    var self = this;\n    var form = self.form;\n    var container = form.getContainer(containerId);\n    if (container == null) {\n      if (self.Class.THROW_ERROR) {\n        self.showContainerNotFoundError(containerId);\n      }\n      return;\n    }\n\n    $.when(container.ready()).done(function () {\n      container.changeEditability(argument);\n      container.visualChanges[\"editability\"] = argument;\n    });\n  },\n  /*\r\n     *   Search for grid columns\r\n     */\n  searchGridColumns: function searchGridColumns(condition, gridColumns) {\n    var self = this;\n    var column;\n    if (typeof condition === \"string\" || typeof condition === \"boolean\")\n    return null;\n    if (condition.expressions) {\n      var j, lenIndex;\n      for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\n        self.searchGridColumns(condition.expressions[j], gridColumns);\n      }\n\n    } else if (condition.simple) {\n      return self.searchGridColumns(condition.simple, gridColumns);\n\n    } else if (condition.complex) {\n      return self.searchGridColumns(condition.complex, gridColumns);\n    } else {\n      var xpath = condition.xpath || condition.renderId;\n      if (xpath) {\n        // Check in condition.xpath\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\n          column = xpath.substring(xpath.indexOf(\"[]\") + 3);\n          gridColumns.push(column);\n        }\n\n        // Check in argument if argumentType is xpath\n        if (condition.argumentType === 'xpath') {\n          if (condition.argument.indexOf(\"[]\") > 0) {\n            column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\n            gridColumns.push(column);\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n  /**/\n\n  isGridComponent: function isGridComponent(render, xpath) {\n    var renderType = bizagi.util.normalizeType(render.properties.type);\n    return /grid$/i.test(renderType) && xpath.indexOf('[') >= 0;\n  },\n  /**/\n\n  isValidRender: function isValidRender(render) {\n    var notValid = [\"collectionnavigator\"];\n\n    return notValid.indexOf(render.properties.type) === -1;\n  },\n\n  /**\r\n      * Helper to override the visibility and editability in mobile devices. \r\n      * @param {} guid\r\n      * @param {} visible\r\n      * @returns {}\r\n      */\n  changeFormButtonVisibility: function changeFormButtonVisibility(guid, visible) {\n    var self = this;\n    var form = self.form;\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n    var navigation = form.getNavigation();\n\n    if (index !== -1)\n    buttons[index].visible = visible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  },\n\n  /**\r\n      * Create new object of visual changes\r\n      * @param element\r\n      * @param command\r\n      * @param argument\r\n      * @returns {Object}\r\n      */\n  getVisualChange: function getVisualChange(element, command, argument) {\n    return new Object({\n      element: element,\n      command: command,\n      argument: argument,\n      indexes: [],\n      xpath: \"\" });\n\n  },\n\n  /**\r\n      * Add changes to log\r\n      * @param changes\r\n      */\n  logVisualChange: function logVisualChange(changes) {\n    if (changes.indexes.length > 0) {\n      for (var i = 0; i < changes.indexes.length; i++) {\n        var cell = changes.element.getControlCell(changes.indexes[i], changes.xpath);\n        if (cell) cell.visualChanges[changes.command] = changes.argument;\n      }\n    } else {\n      changes.element.visualChanges[changes.command] = changes.argument;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a base render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\n  postRenderTimeout: 0,\n  maxRendersPerScreen: 50,\n  rendersExecuted: 0,\n  renderOptimization: false,\n  TYPE_QUERY_FORM: \"queryForm\",\n  startOptimization: function startOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 500;\n    bizagi.rendering.render.rendersExecuted = 0;\n    // Cancelled optimization temporally, because its on experimental stage\n    bizagi.rendering.render.renderOptimization = false;\n  },\n  stopOptimization: function stopOptimization() {\n    bizagi.rendering.render.postRenderTimeout = 0;\n    bizagi.rendering.render.rendersExecuted = 0;\n    bizagi.rendering.render.renderOptimization = false;\n  } },\n{\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.included = typeof properties.included != \"undefined\" ? bizagi.util.parseBoolean(properties.included) : false;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.displayName = properties.displayName || \"\";\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.includedInResult = typeof properties.includedInResult != \"undefined\" ? bizagi.util.parseBoolean(properties.includedInResult) : false;\n\n    var renderType = bizagi.util.normalizeType(properties.type);\n    if (/^hidden$/i.test(renderType)) {\n      properties.visible = false;\n    }\n\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.maxLength = properties.maxLength || 0;\n    properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\n    properties.textFormat = properties.textFormat || {};\n    properties.valueFormat = properties.valueFormat || {};\n    properties.isHidden = typeof properties.isHidden != \"undefined\" ? bizagi.util.parseBoolean(properties.isHidden) : false;\n    properties.visible = properties.isHidden ? false : properties.visible;\n    //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \n    //Change the value property on changeEditability, changeEditabilityCellControl\n    properties.editabilityEnabled = false;\n\n    // Old color and background color\n    if (properties.color) {\n      properties.textFormat.color = properties.color;\n    }\n\n    if (properties.backgroundColor) {\n      properties.textFormat.backgroundColor = properties.backgroundColor;\n    }\n\n    // Non-editable fields cannot be required\n    properties.required = properties.editable ? properties.required : false;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Check contexttype\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n\n    // Save original properties\n    self.originalProperties = {\n      textFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      valueFormat: {\n        color: properties.textFormat.color,\n        backgroundColor: properties.textFormat.backgroundColor },\n\n      visible: properties.visible,\n      editable: properties.editable,\n      required: properties.required,\n      labelAlign: properties.labelAlign,\n      valueAlign: properties.valueAlign };\n\n\n    // Create value property\n    self.value = typeof properties.value !== \"undefined\" ? properties.value : null;\n\n    // Register original value property\n    self.properties.originalValue = self.value;\n    self.properties.previousValue = self.value;\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n  /*\r\n     *   Calculate aligns, display types, rtl and widths\r\n     */\n  calculateInitialLayoutProperties: function calculateInitialLayoutProperties() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set visual defaults\n    properties.displayType = properties.displayType || \"normal\";\n    properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\n    properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\n\n    // Check rtl orientation\n    if (properties.orientation === \"rtl\") {\n      properties.labelAlign = self.getRTLAlign(properties.labelAlign);\n      properties.valueAlign = self.getRTLAlign(properties.valueAlign);\n    }\n\n    // Calculate render with\n    var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\n    properties.labelWidth = renderWidth.label;\n    properties.valueWidth = renderWidth.control;\n\n    if (properties.layoutType === \"percentage\") {\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.labelWidth == 0) {\n      properties.displayType = \"value\";\n      properties.valueWidth = renderWidth.control;\n    }\n\n    if (properties.valueWidth == 0) {\n      properties.displayType = \"label\";\n    }\n\n    if (properties.type === \"userfield\") {\n      if ([\"both\", \"normal\", \"reversed\"].includes(properties.displayType)) {\n        properties.valueWidth = properties.valueWidth || 50;\n        properties.labelWidth = properties.labelWidth || 50;\n      } else if (properties.displayType === \"vertical\") {\n        properties.valueWidth = 100;\n        properties.labelWidth = 100;\n      } else if (properties.displayType === \"label\") {\n        properties.valueWidth = 0;\n        properties.labelWidth = 100;\n      } else {\n        properties.valueWidth = 100;\n        properties.labelWidth = 0;\n      }\n    }\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  render: function render(renderTemplateName) {\n    return this.renderElement(renderTemplateName);\n  },\n  /*\r\n     *   Returns the html templated element\r\n     */\n  renderElement: function renderElement(renderTemplateName) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    renderTemplateName = renderTemplateName || \"render\";\n    var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\n\n    // Resolve render label\n    var label = properties.displayName;\n    if (typeof label == \"string\") {\n      // Replace line breaks for html line breaks\n      label = bizagi.util.encodeString(label);\n    }\n\n    var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || (properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice() || properties.type === \"grid\" && !bizagi.util.isTabletDevice());\n    var labelWidth = parseFloat(properties.labelWidth);\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      helpText: properties.helpText,\n      editable: properties.editable,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      xpath: properties.xpath,\n      tag: properties.tag,\n      displayType: properties.displayType,\n      displayOptionClass: self.getDisplayOptionClass(properties.displayType),\n      labelAlignClass: self.getAlignClass(properties.labelAlign),\n      valueAlignClass: self.getAlignClass(properties.valueAlign),\n      flexAlignClass: bizagi.util.mapAlignClassName(properties.columnAlign),\n      labelWidth: labelWidth,\n      stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      valueWidth: parseFloat(properties.valueWidth),\n      stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\n      layoutType: properties.layoutType,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      includedInResult: properties.includedInResult,\n      included: properties.included,\n      type: properties.type,\n      showFullRender: isFullRender,\n      required: properties.required });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n  /*\r\n     *   Returns the resolved result from a promise when the promise has been executed already\r\n     */\n  resolveResult: function resolveResult(promise) {\n    return bizagi.resolveResult(promise);\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred) {\n      return false;\n    }\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Renders the control html\r\n     */\n  internalRenderControl: function internalRenderControl() {\n    var self = this;\n    var properties = self.properties;\n    self.control = null;\n\n    if (self.renderFactory.printVersion) {\n      properties.editable = false;\n      return self.renderControl();\n    } else if (properties.editable) {\n      return self.renderControl();\n    }\n\n    return self.renderReadOnly();\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRenderElement: function postRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set element variable\n    self.element = element;\n\n    if (properties.submitOnChange)\n    self.configureSubmitOnChange();\n\n    // Process internal layout\n    isLabelFormat = true;\n\n    var executePostRender = function executePostRender(_element) {\n      if (bizagi.rendering.render.renderOptimization &&\n      bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\n\n        // Execute post-render control\n        var timeOutRender = setTimeout(function () {\n          self.internalPostRender(_element);\n          bizagi.rendering.render.postRenderTimeout += 50;\n          clearTimeout(timeOutRender);\n        }, bizagi.rendering.render.postRenderTimeout);\n\n      } else {\n        self.internalPostRender(_element);\n      }\n      bizagi.rendering.render.rendersExecuted++;\n    };\n\n    if (self.asyncRenderDeferred) {\n      // Wait for async result\n      $.when(self.asyncRenderDeferred).\n      done(function (html) {\n        var control = self.getControl();\n        if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\n          self.emptyControlByAsyncRenderDeferred();\n        }\n        control.append(html);\n\n        // Execute post-render control\n        executePostRender(element);\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      });\n    } else {\n      // Execute post-render control\n      executePostRender(element);\n    }\n  },\n  /*\r\n     *   Executes the post render handlers\r\n     */\n  internalPostRender: function internalPostRender(element) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    self.control = self.getControl();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred) {\n      self.renderingDeferred.resolve();\n    }\n\n    // Execute post-renders\n    if (properties.editable) {\n      // Post-render editable version\n      if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\n        self.postRenderPrintVersion();\n      } else {\n        self.postRender();\n      }\n\n    } else {\n      // Post-render readonly version\n      self.postRenderReadOnly(element);\n    }\n\n    // Perform execution mode methods\n    if (mode == \"execution\") {\n      self.performExecutionModeMethods();\n    } else {\n      self.performDesignModeMethods();\n    }\n\n    self.processLayout(isLabelFormat, self.properties.textFormat || {});\n    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n  },\n  /*\r\n     *   Execute runtime only methods\r\n     */\n  performExecutionModeMethods: function performExecutionModeMethods() {\n    var self = this;\n    var properties = self.properties;\n    if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\n      self.configureHandlersQueryForm();\n    }\n\n    // Apply handlers\n    if (properties.editable) {\n      self.configureHandlers();\n    } else {\n      self.configureHandlersReadOnly();\n    }\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /**\r\n      * Execute design only methods\r\n      */\n  performDesignModeMethods: function performDesignModeMethods() {\n    var self = this;\n\n    // Execute custom code for each render\n    self.configureDesignView();\n\n    // Set initial value\n    self.internalSetInitialValue();\n  },\n  /*\r\n     *   Replaces a {{control}} string in the specified element\r\n     */\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n    return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.element)) {\n      bizagi.log(\" render hasn't been rendered!\", this, \"error\");\n    }\n\n    return this.element;\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    var properties = self.properties;\n    self.internalSetInitialValueFlag = true;\n\n    // Set the initial value\n    if (properties.editable) {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    } else {\n      if (!bizagi.util.isEmpty(self.value)) {\n        self.setDisplayValue(self.value);\n      }\n    }\n    self.internalSetInitialValueFlag = false;\n  },\n  /*\r\n     * Public method to determine if a value is valid or not\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (bizagi.util.parseBoolean(properties.required)) {\n      var form = self.getFormContainer();\n      var hasValue = false;\n      var renders = self.grid ? [self] : form.getRenders(properties.xpath);\n      var isQueryForm = /^query/i.test(properties.type);\n\n      renders.filter(function (render) {\n        return render.properties.id == properties.id;\n      }).forEach(function (render) {\n        if (render.hasValue() && (render.properties.editable || inlineAdd)) {\n          hasValue = true;\n          return false;\n        }\n      });\n\n      if (!hasValue && !self.properties.isClone) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        var messageData = { xpath: properties.xpath, message: message };\n\n        if (isQueryForm) {\n          messageData = $.extend({}, messageData, {\n            id: properties.id,\n            isQuery: isQueryForm });\n\n        }\n\n        invalidElements.push(messageData);\n        return false;\n      }\n    }\n\n    // Check retypes\n    if (properties.retype == \"duplicate\") {\n      // Don't process cloned renders, just originals\n      if (self.cloneRender) {\n        if (self.cloneRender.getValue() != self.getValue()) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    } else if (properties.retype == \"double\") {\n      var control = $(\"input\", self.element);\n\n      //Waits until the control has the second value written\n      if (control && control.data(\"oldValue\")) {\n        if (control.val() === \"\") {\n\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({\n            xpath: properties.xpath,\n            message: message });\n\n\n          return false;\n        } else if (control.val() != control.data(\"oldValue\")) {\n          message = self.getResource(\"render-text-retype-error\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n\n          return false;\n        }\n      }\n    }\n\n    // Check maxlength\n    var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\n    if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\n      if (columnEditable || !columnEditable && self.controlValueIsChanged()) {\n        var maxLength = new Number(properties.maxLength);\n        var value = self.getValue();\n\n        if (value && value.toString().length > maxLength) {\n          message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\n    var value = self.getValue();\n\n    if (value && self.properties.type === \"text\") {\n      value = typeof value === \"string\" ? value.trim() : value;\n    }\n\n    return !bizagi.util.isEmpty(value);\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\n  postRender: function postRender() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n     */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Method to process the render the layout\r\n     */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.getControl() == null) return;\n\n    // Set customizations\n    format = format || {};\n\n    if (format.color) {\n      self.changeColor(format.color, isLabelFormat);\n    }\n    if (format.background) {\n      self.changeBackgroundColor(format.background);\n    }\n    //if bold is true in modeler, we receive nothing in execution (!formal.bold)\n    if (format.bold || !format.bold || !isLabelFormat) {\n      self.changeFontBold(format.bold, isLabelFormat);\n    }\n    if (format.italic) {\n      self.changeFontItalic(format.italic, isLabelFormat);\n    }\n    if (format.underline) {\n      self.changeFontUnderline(format.underline, isLabelFormat);\n    }\n    if (format.strikethru) {\n      self.changeFontStrikethru(format.strikethru, isLabelFormat);\n    }\n    if (format.size) {\n      self.changeFontSize(format.size, isLabelFormat);\n    }\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n    if (!visible) {\n      if (self.grid) {\n        self.changeCellVisibility(visible);\n      } else {\n        self.changeVisibility(visible);\n      }\n    }\n  },\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (!bizagi.util.identicalObjects(value, self.value)) {\n      // set previous value\n      self.properties.previousValue = self.properties.originalValue = self.value;\n\n      // Change internal value\n      self.value = self.properties.value = value;\n      if (self.properties.required && self.getMode() == \"execution\") {\n\n        if (self.checkRequired([])) {\n          self.changeRequiredLabel(false);\n        } else {\n          self.changeRequiredLabel(true);\n        }\n      }\n\n      // Trigger events\n      if (triggerEvents && !self.internalSetInitialValueFlag) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (!self.hasValue()) {\n        message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        return false;\n      }\n    }\n    return true;\n  },\n\n  validateInputRetype: function validateInputRetype() {\n    var self = this;\n    if (self.properties.retype && self.cloneRender) {\n      return self.getValue() == self.cloneRender.getValue();\n    }\n    return true;\n  },\n\n  /*\r\n     *   Triggers the render change event\r\n     */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    params.changed = params.changed !== undefined ? params.changed : true;\n    self.triggerHandler(\"renderchange\", { render: self, changed: params.changed });\n  },\n  /*\r\n     *   Triggers the render validate event\r\n     */\n  triggerRenderValidate: function triggerRenderValidate() {\n    var self = this;\n    self.triggerHandler(\"rendervalidate\", { render: self });\n  },\n  /*\r\n     *   Sets the value in the rendered control\r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    if (!self.properties.editable && (self.properties.display !== \"check\" || self.properties.display === \"check\" && bizagi.override.enableCheck === true)) {\n      // Render as simple value\n      var displayValue = self.getDisplayValue(value);\n      if (typeof displayValue == \"string\" || typeof displayValue == \"number\") {\n        displayValue = bizagi.util.sanitizeHTML(displayValue);\n        $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\n      }\n    }\n  },\n  /*\r\n     *   Returns the internal value\r\n     */\n  getValue: function getValue() {\n    return this.value;\n  },\n  /*\r\n     *   Returns the value to display, ex. non-editable renders\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    return this.getValue();\n  },\n  /*\r\n     *   Template method to get the label element\r\n     */\n  getLabel: function getLabel() {\n    bizagi.util.mustImplement(\"getLabel\");\n  },\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    bizagi.util.mustImplement(\"getControl\");\n  },\n  /*\r\n     *   Template method to get the control filler element\r\n     */\n  getControlFiller: function getControlFiller() {\n    bizagi.util.mustImplement(\"getControlFiller\");\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n  },\n  /*\r\n     *   Adds a validation message to the render\r\n     */\n  setValidationMessage: function setValidationMessage(message) {\n    this.validationMessage = message;\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var result = this.getValue();\n    var readOnlyValue = \"\";\n\n    if (bizagi.util.isObject(result) && typeof result.value !== \"undefined\") {\n      readOnlyValue = bizagi.util.sanitizeHTML(result.value);\n    } else if (!bizagi.util.isEmpty(result)) {\n      if (bizagi.util.isString(result)) {\n        readOnlyValue = bizagi.util.encodeHtmlText(result);\n      } else {\n        readOnlyValue = result;\n      }\n    }\n\n    return readOnlyValue;\n  },\n\n  /*\r\n     *  Method to render print version\r\n     */\n  postRenderPrintVersion: function postRenderPrintVersion() {\n  },\n\n  /*\r\n     *   Customizes render display type with custom css classes\r\n     */\n  changeDisplayOption: function changeDisplayOption(displayType) {\n    this.properties.displayType = displayType;\n  },\n\n  /*\r\n     *   Return the right display option class\r\n     */\n  getDisplayOptionClass: function getDisplayOptionClass(displayType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label align\r\n     */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n    this.properties.labelAlign = alignType;\n  },\n\n  /*\r\n     *   Customizes render value align\r\n     */\n  changeValueAlign: function changeValueAlign(alignType) {\n    this.properties.valueAlign = alignType;\n  },\n\n  /*\r\n     *   Return the right align class\r\n     */\n  getAlignClass: function getAlignClass(alignType) {\n    return \"\";\n  },\n\n  /*\r\n     *   Customizes render label and value width\r\n     */\n  customizeRenderWidth: function customizeRenderWidth() {\n  },\n\n  /* Customizes render color*/\n  changeColor: function changeColor(color, isLabelFormat) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    if (control && label) {\n      if (color != 'none') {\n        // Hide - show the render\n        if (self.properties.displayType === \"value\" || !isLabelFormat) {\n          self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"color\", color, \"!important\");\n          });\n        } else {\n          self.element.each(function () {\n            this.style.setProperty('color', color, 'important');\n          });\n\n          if (self.properties.type == \"grid\") {\n            self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\n              this.style.setProperty('color', color, 'important');\n            });\n          }\n\n          self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\n          if (self.properties.editable === false) {\n            self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\n            self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\n          }\n        }\n      } else {\n        self.element.css(\"color\", \"\");\n        self.getLabel().find(\"label\").css(\"color\", \"\");\n        self.getControl().css(\"color\", \"\");\n\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          self.getElementsToStylize(element).css(\"color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Customizes render background color*/\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var label = self.getLabel();\n\n    if (control && label) {\n      if (color != 'none') {\n        self.element.each(function () {\n          this.style.setProperty('background-color', color, 'important');\n        });\n\n        if (typeof label.find('label').style !== \"undefined\") {\n          self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\n        } else {\n          self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\n        }\n\n        var currentStyle = self.getLabel().attr(\"style\");\n        currentStyle += \"; background-color:\" + color + \"!important\";\n        self.getLabel().attr(\"style\", currentStyle);\n      } else {\n        self.element.css(\"background-color\", \"\");\n        self.getLabel().find(\"label\").css(\"background-color\", \"\");\n        self.getControl().css(\"background-color\", \"\");\n        self.getControl().find(\"input, textarea\").each(function (i, element) {\n          var originalColor = $(element).data(\"originalColor\") || \"\";\n          $(element).css(\"background-color\", originalColor);\n        });\n      }\n    }\n  },\n\n  /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\n  getFormattingLabel: function getFormattingLabel() {\n    var self = this;\n    return self.getLabel().find(\"label\");\n  },\n\n  /* Customizes the font weight */\n  changeFontBold: function changeFontBold(bold, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\n      self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\n      self.getControl().each(function (i, element) {\n        $(element).css(\"font-weight\", \"bold\", \"!important\");\n      });\n\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\n    }\n    if (!isLabelFormat) {\n      if (bizagi.util.parseBoolean(bold) == true) {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"bold\", \"!important\");\n        });\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          $(element).css(\"font-weight\", \"normal\", \"!important\");\n        });\n        self.getControl().css(\"font-weight\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n    var result = true;\n    var renderType = bizagi.util.normalizeType(properties.type);\n    var form = self.getFormContainer();\n\n    //To force to send value when control's retype is duplicate, fixed to start forms.\n    if (properties.retype === \"duplicate\" && self.cloneRender && form.isStartForm()) return true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n\n    // Verify if control has been ready\n    if (renderType === \"grid\" && self.ready().state() === \"pending\") {\n      return false;\n    }\n\n    if ([\"combo\", \"queryCombo\", \"list\", \"queryList\", \"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\n      if (value && value.length !== undefined) {\n        value = value[0];\n      }\n      if (compareValue && compareValue.length !== undefined) {\n        compareValue = compareValue[0];\n      }\n      if (baseValue && baseValue.length !== undefined) {\n        baseValue = baseValue[0];\n      }\n      value = value && value.id ? value.id : value;\n      compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\n      baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\n      if (typeof baseValue != \"undefined\" && baseValue != null) {\n        result = compareValue == value && compareValue != baseValue ? false : true;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\n      result = bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value) ? false : true;\n    } else if (renderType === \"searchNumber\") {\n      result = !!value;\n    } else if (renderType === \"number\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"text\") {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue === value ? false : true;\n      }\n    } else if (renderType === \"date\") {\n      if (!compareValue && !value) {\n        result = false;\n      } else {\n        if (!properties.showTime) {\n          value = bizagi.util.getNormalizedDate(value, properties.fullFormat);\n          compareValue = bizagi.util.getNormalizedDate(compareValue, properties.fullFormat);\n        }\n\n        result = compareValue == value ? false : true;\n      }\n    } else if (renderType === \"actionLauncher\") {\n      //Object must be an array\n      result = false;\n      var compareValueObj = [];\n      try {\n        if (typeof compareValue === \"string\") {\n          compareValueObj = JSON.parse(compareValue);\n        } else {\n          compareValueObj = compareValue;\n        }\n      } catch (e) {\n      }\n\n      var _findAction = function _findAction(guid, targetObj) {\n        guid = guid || \"\";\n        targetObj = targetObj || [];\n        var result = false;\n        for (var i = 0, l = targetObj.length; i < l; i++) {\n          if (targetObj[i].guidAction == guid) {\n            result = true;\n            break;\n          }\n        }\n        return result;\n      };\n\n      if (compareValueObj.length == value.length) {\n        for (var i = 0, l = compareValueObj.length; i < l; i++) {\n          if (!_findAction(compareValueObj[i].guidAction, value)) {\n            result = true;\n          }\n        }\n\n      } else {\n        result = true;\n      }\n    } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\n      //Object must be an array\n      if (compareValue.length != value.length) {\n        result = true;\n      } else {\n        result = JSON.encode(value) == JSON.encode(compareValue) ? false : true;\n      }\n    } else if (renderType === \"searchList\") {\n      var objectValue = {};\n      try {\n        objectValue = JSON.parse(value);\n      } catch (e) {\n        console.log(\"Error when detect change value on searchList control\");\n      }\n      result = JSON.encode(compareValue) == JSON.encode(objectValue.value) ? false : true;\n    } else if ([\"signature\", \"image\"].includes(renderType)) {\n      // When a image/signature is uploaded or removed from a Form,\n      // the change is saved automatically to the activity's scope\n      result = false;\n    } else {\n      result = compareValue === value ? false : true;\n    }\n\n    return result;\n  },\n\n  /* Customizes the font italic style */\n  changeFontItalic: function changeFontItalic(italic, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\n        }\n      } else {\n        if (isLabelFormat)\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\n        }\n      }\n    } else {\n      if (bizagi.util.parseBoolean(italic) == true) {\n        self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\n      } else {\n        self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\n      }\n    }\n  },\n\n  /* Customizes the font underline */\n  changeFontUnderline: function changeFontUnderline(underline, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\n    var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\n      self.getControl().each(function (i, element) {\n        self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\n      });\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\n    }\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(underline) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n        }\n      } else {\n        self.getControl().find(\"*\").each(function (i, element) {\n          self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n        });\n      }\n    }\n  },\n\n  /* Customizes the font Strikethrough property */\n  changeFontStrikethru: function changeFontStrikethru(strikethru, isLabelFormat) {\n    var self = this;\n    var textFormat = self.properties.textFormat || {};\n    var valueFormat = self.properties.valueFormat || {};\n    var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\n    var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\n      self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\n    } else {\n      if (isLabelFormat)\n      self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\n    }\n\n    if (self.properties.displayType == \"value\" || !isLabelFormat) {\n      if (bizagi.util.parseBoolean(strikethru) == true) {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\n        }\n      } else {\n        if (self.properties.editable) {\n          self.getControl().find(\"*\").each(function (i, element) {\n            self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\n          });\n        } else {\n          self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\n        }\n      }\n    }\n  },\n\n  /* Customizes the font size property */\n  changeFontSize: function changeFontSize(size, isLabelFormat) {\n    var self = this;\n    var isLabelFormat = typeof isLabelFormat != \"undefined\" || isLabelFormat != null ? isLabelFormat : true;\n\n    // Hide - show the render\n    if (size != \"0\") {\n      var label = self.getFormattingLabel();\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      if (isLabelFormat) {\n        label.css(\"font-size\", newFontSize, \"!important\");\n      }\n      if (self.properties.displayType == \"value\" || !isLabelFormat) {\n        var control = self.getControl();\n        if (_typeof(control.children()) == \"object\" && control.children().length > 0) {\n          self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\n        } else {\n          self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\n          // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\n          if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\n        }\n\n        self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\n      }\n    }\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(context);\n  },\n\n  /* Changes the render visibility*/\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Hide - show the render\n    if (bizagi.util.parseBoolean(argument) == true) {\n      if (properties.type !== \"hidden\") {\n        self.element.show();\n        self.element.css(\"display\", \"\");\n\n        if (properties.required) {\n          if (!self.hasValue()) {\n            self.changeRequiredLabel(true);\n          }\n        }\n      }\n    } else if (self.element) {\n      self.element.hide();\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Renders again\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n      $.when(self.internalRenderControl()).done(function (html) {\n        if (typeof self.emptyControlByChangeEditability == \"function\")\n        self.emptyControlByChangeEditability();\n        if (!self.asyncRenderDeferred)\n        control.append(html);\n        self.postRenderElement(self.element);\n      });\n    }\n  },\n\n  /**\r\n      * Change cell editability and attach bindings\r\n      * @param argument\r\n      * @param key\r\n      * @param xpath\r\n      */\n  changeEditabilityCellControl: function changeEditabilityCellControl(argument, key, xpath) {\n    var self = this;\n    var properties = self.properties;\n    var renderColumn = self.grid.getColumn(xpath);\n    var decorated = renderColumn.getDecorated(key);\n\n    // Renders again\n    properties.editable = argument === \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n    properties.editabilityEnabled = properties.editabilityEnabled || properties.editable;\n\n    // Render cell control\n    self.internalRenderCellControl(properties.editable, key, renderColumn, decorated);\n  },\n\n  /**\r\n      * Render cell control by command action\r\n      * @param editable\r\n      * @param key\r\n      * @param renderColumn\r\n      * @param decorated\r\n      */\n  internalRenderCellControl: function internalRenderCellControl(editable, key, renderColumn, decorated) {\n    var self = this;\n    var control = self.getControl();\n\n    // Clears control\n    control.empty();\n\n    if (typeof self.internalRenderControl == \"function\") {\n\n      $.when(self.internalRenderControl()).done(function (html) {\n\n        if (!self.asyncRenderDeferred) {\n          control.append(html);\n        }\n\n        self.postRenderElement(self.element);\n\n        if (editable) {\n\n          renderColumn.bind(\"rendered\", function () {\n            renderColumn.readyDeferred.resolve();\n          });\n\n          decorated.unbind(\"renderchange\");\n\n          // If the render changes set the flag on\n          decorated.bind(\"renderchange\", function (render, args) {\n            renderColumn.changed = true;\n            self.grid.onCellChange(renderColumn, null, key, args);\n          });\n\n        }\n      });\n    }\n  },\n\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (self.getMode() == \"execution\" && self.checkRequired([])) {\n      self.changeRequiredLabel(false);\n    } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * Does't change internal value of control, if you need it\r\n      * please use changeRequired method\r\n      *\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    var label = properties.displayName || \"\";\n    var labelElement = $(\"label\", self.getLabel());\n    var controlElement = self.getControl();\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\n      if (self.properties.orientation == \"rtl\") {\n        controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\n      } else {\n        controlElement.addClass('control-required');\n        controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      }\n    } else {\n      // if element has required label and through action change it, remove element.\n      if (self.properties.orientation == \"rtl\") {\n        $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\n      } else {\n        controlElement.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", controlElement).remove();\n      }\n    }\n\n    // Set text, HTML is more suitable for the content\n    labelElement.html(label);\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n  /*\r\n     *   Refresh the control with a new data\r\n     */\n  refreshControl: function refreshControl(args) {\n    var self = this;\n    var properties = self.properties;\n    var originalValue = self.value;\n    var form = self.getFormContainer();\n    var idForm = form.properties.id || \"\";\n\n    args = args || {};\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the ajax service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      idForm: idForm })).\n    pipe(function (data) {\n      if (self.grid && bizagi.override.restoreAppearanceAfterRefresh) {\n        self.saveGridChildrenVisualChanges();\n      }\n      // Clear variables\n      self.control = self.controlFiller = self.label = null;\n\n      // Update properties data\n      var currentElement = self.element;\n      self.initializeData(data.render);\n\n      // Render the control again\n      return $.when(self.render()).pipe(function (html) {\n        var result = $(html);\n        //Dont remove unused rendered var\n        var rendered = self.postRenderElement(result);\n        self.properties.originalValue = self.value;\n        return result;\n      }).pipe(function (result) {\n\n        // When the content has been post-renderized, replace it\n        currentElement.replaceWith(result);\n\n        // Prevent multiple refresh on grid\n        if (!self.grid) {\n          self.triggerRenderChange({ changed: false });\n        }\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          if (self.grid) {\n            self.restoreGridChildrenVisualChanges();\n            self.restoreGridAppearance();\n          } else {\n            self.restoreAppearance();\n          }\n        }\n\n        // Execute personalized stuff before to refresh it\n        self.afterToRefresh();\n      });\n\n    }).fail(function (message) {\n      var message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the control with a new data\r\n      */\n  refreshDesignControl: function refreshDesignControl(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Clear variables\n    self.control = self.controlFiller = self.label = null;\n\n    $.extend(data.render.properties, {\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"form\",\n      idPageCache: properties.idPageCache });\n\n\n    // Update properties data\n    var currentElement = self.element;\n    self.initializeData(data.render);\n\n    // Render the control again\n    return $.when(self.render()).pipe(function (html) {\n      var result = $(html);\n      //Dont remove unused rendered var\n      var rendered = self.postRenderElement(result);\n      self.properties.originalValue = self.value;\n      return result;\n    }).pipe(function (result) {\n      // When the content has been post-renderized, replace it\n      currentElement.replaceWith(result);\n      self.triggerRenderChange();\n\n      // Execute personalized stuff before to refresh it\n      self.beforeToRefresh();\n    });\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(\"\");\n    self.clearDisplayValue();\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\");\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else if (self.properties.editable === false) {\n      $(control).html(\"<label class='readonly-control'></label>\");\n    }\n  },\n\n  /*\r\n     *   Updates original value for some comparisons\r\n     */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value;\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          renderValues[properties.xpath] = value;\n        } else if (value === \"\" || value === null) {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n\n    //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\n    if (!self.validateInputRetype()) {\n      renderValues[properties.xpath] = \"\";\n    }\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      result.push(true);\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  /*\r\n     *  Configure additional Handlers for queryForm type\r\n     */\n  configureHandlersQueryForm: function configureHandlersQueryForm() {\n    var self = this;\n    var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\n    checkIncluded.change(function () {\n      self.properties.included = $(this).is(\":checked\");\n    });\n  },\n  getRenderId: function getRenderId() {\n    var self = this;\n\n    return bizagi.util.tryCatch(\n    function () {return self.properties.id;},\n    null);\n\n  },\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectDataQueryForm: function collectDataQueryForm(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var queryValue = null;\n    if (!bizagi.util.isEmpty(xpath)) {\n      if (value !== null && typeof value !== \"undefined\") {\n        var isObject = typeof value.id !== \"undefined\";\n        if (isObject) {\n          queryValue = !bizagi.util.isEmpty(value.id) ? [value] : null;\n        } else {\n          queryValue = value !== \"\" ? value : null;\n        }\n      }\n      if (queryValue !== null || properties.included) {\n        var searchType = (self.properties.typeSearch || self.properties.rangeQuery || \"NONE\").toUpperCase();\n        var newParameter = {\n          \"value\": queryValue,\n          \"included\": self.properties.included,\n          \"xpath\": properties.xpath,\n          \"searchType\": searchType,\n          \"orderType\": \"NONE\",\n          \"renderId\": self.getRenderId() };\n\n\n        if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\n          newParameter.displayXpath = properties.displayXpath;\n        }\n\n        renderValues.push(newParameter);\n      }\n    }\n  },\n\n  /*\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this,force;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n    var editable = bizagi.util.parseBoolean(properties.editable) || bizagi.util.parseBoolean(properties.editabilityEnabled);\n\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n\n    // The render can be sent if it is editable and is not \"display only\"\n    if (!displayOnly && editable) {\n      return true;\n    }\n\n    if (properties.xpath) {\n      var form = self.getFormContainer();\n      if (form.getRenders(properties.xpath).length == 1) {\n        force = $.forceCollectData ? $.forceCollectData.toString() : false;\n        $.forceCollectData = force ? undefined : $.forceCollectData;\n        if (self.controlValueIsChanged()) {\n          $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n          return true;\n        }\n        $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\n      }\n    }\n\n    return false;\n  },\n  /*\r\n     *  Method to determine if the render value can be sent to search\r\n     */\n  canBeSentQueryForm: function canBeSentQueryForm() {\n    var self = this,force;\n    var properties = self.properties;\n    // Don't send the clones\n    if (properties.isClone) {\n      return false;\n    }\n    return true;\n  },\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus(time) {\n    var self = this;\n\n    // Focus is only allowed when the render is visible\n    if (!self.properties.visible) return;\n\n    // Call base\n    this._super();\n    var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n\n    // Configures effect\n    var effect = function effect() {\n      var control = self.getControl();\n      var defaultControl = self.properties.type != \"grid\" ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\n      if (defaultControl.length > 0) {\n\n        // Focus control\n        $.each(defaultControl, function (i) {\n          var innerControl = defaultControl[i];\n          if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\n\n            try {\n              if (!bizagi.util.isIE()) {\n                bizagi.util.autoScrollBottom(layout);\n              }\n              innerControl.focus();\n            } catch (e) {\n            }\n          }\n        });\n      }\n    };\n\n    // Wait until the render is ready to apply the focus effect\n    $.when(self.ready()).\n    done(function () {\n      // Run effect\n      if (time > 0) {\n        var timeOutEffect = setTimeout(function () {\n          effect();\n          clearTimeout(timeOutEffect);\n        }, time);\n      } else {\n        effect();\n      }\n    });\n  },\n\n  /*\r\n     *   Resolves default align for each display type\r\n     */\n  getDefaultLabelAlign: function getDefaultLabelAlign(displayType) {\n    return \"default\";\n  },\n\n  /*\r\n     *   Resolves default value align for each display type\r\n     */\n  getDefaultValueAlign: function getDefaultValueAlign(displayType) {\n    return \"default\";\n  },\n  /*\r\n     *   Transform the align type when using RTL orientation\r\n     */\n  getRTLAlign: function getRTLAlign(align) {\n    /* if (align === \"default\"){ \r\n                                                return \"right\";\r\n                                            } */\n    return align;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n    var properties = self.properties;\n    var xpath = \"\";\n\n    if (!properties.editable) return;\n\n    // Build action\n    properties.dependencies = properties.dependencies || 'all';\n\n    if (properties.xpath) {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\n      } else {\n        xpath = properties.xpath;\n      }\n    } else {\n      if (properties.submitOnChangexpathContext) {\n        xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\n      } else {\n        xpath = properties.id;\n      }\n    }\n\n    var action = {\n      \"conditions\": {\n        \"expressions\": [\n        {\n          \"simple\": {\n            \"xpath\": xpath,\n            \"renderId\": properties.id,\n            \"operator\": \"changes\",\n            \"argumentType\": \"const\" } }] },\n\n\n\n\n      \"commands\": [\n      {\n        \"xpath\": xpath,\n        \"command\": 'submit-value',\n        \"argument\": properties.dependencies }],\n\n\n      \"dependencies\": [xpath],\n      \"elseCommands\": [] };\n\n\n    if (properties.submitOnChangexpathContext && self.grid) {\n      action.conditions.expressions[0].simple.containerId = self.grid.properties.id;\n    }\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n\n  /*\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  submitOnChange: function submitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var defer = $.Deferred();\n\n    // Add context parameter\n    if (self.properties.contexttype != \"\" && data) {\n      data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\n    }\n\n    $.when(self.isReadyToSave()).done(function () {\n      self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getCacheIdCase: function getCacheIdCase() {\n    var self = this;\n    var idCase = self.getParams().idCase;\n\n    if (bizagi.cache === undefined) {\n      bizagi.cache = {};\n      bizagi.cache.idCaseObject = {\n        idCase: idCase !== undefined ? idCase : bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined };\n\n    } else {\n      if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\n        bizagi.cache.idCaseObject.idCase = idCase;\n      } else {\n        if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\n          bizagi.cache.idCaseObject = {};\n          bizagi.cache.idCaseObject.idCase = idCase;\n        }\n      }\n    }\n\n    if (idCase === undefined) {\n      if (bizagi.cache.idCaseObject === undefined) {\n        idCase = undefined;\n      } else {\n        idCase = bizagi.cache.idCaseObject.idCase;\n      }\n    } else {\n      idCase = idCase;\n    }\n\n    return idCase;\n  },\n  /*\r\n     *   Internal method\r\n     *   Sends all the info to the server then refreshes the form\r\n     *   Returns a deferred\r\n     */\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm, notCollect) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var parameters = {\n      data: data,\n      bRefreshForm: bRefreshForm,\n      notCollect: notCollect,\n      properties: {\n        idCase: self.getCacheIdCase(),\n        id: properties.id,\n        xpath: properties.xpath,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype } };\n\n\n\n    return form.internalSubmitOnChange(parameters);\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n    return null;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n    return null;\n  },\n  /*\r\n     *   Calculates render label and value width\r\n     */\n  calculateRenderWidth: function calculateRenderWidth(labelWidth, valueWidth, displayType) {\n    var self = this;\n    // Read values\n    // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\n    if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\n      labelWidth = \"0\";\n    } else {\n      labelWidth = labelWidth ? labelWidth != \"0\" ? labelWidth : \"50\" : \"50%\";\n    }\n    valueWidth = valueWidth ? valueWidth != \"0\" ? valueWidth : \"50\" : \"50%\";\n\n    if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\n\n      // Special case with lower values, so they want both fields in \"auto\" width\n      if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\n      valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\n        return { label: 0, control: 100 };\n      }\n      // Normalize percentages\n      if (labelWidth && !valueWidth) {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = 100 - labelWidth;\n\n      } else if (!labelWidth && valueWidth) {\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n        labelWidth = 100 - valueWidth;\n      } else {\n        labelWidth = bizagi.util.percent2Number(labelWidth);\n        valueWidth = bizagi.util.percent2Number(valueWidth);\n\n        // Check 100% percentage\n        if (labelWidth + valueWidth != 100 && typeof self.properties != \"undefined\" && self.properties.layoutType != \"pixels\") {\n          valueWidth = 100 - labelWidth;\n        }\n      }\n    } else {\n      labelWidth = 100;\n      valueWidth = 100;\n    }\n\n    return { label: labelWidth, control: valueWidth };\n  },\n  /*\r\n     *   Get param value idCase\r\n     */\n  getIdCase: function getIdCase() {\n    var self = this;\n    return self.getFormContainer().params.idCase || bizagi.context.idCase;\n  },\n  /*\r\n     *   Get param value idWorkitem\r\n     */\n  getIdWorkitem: function getIdWorkitem() {\n    var self = this;\n    return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\n  },\n  /*\r\n     *   Get param value idTask\r\n     */\n  getidTask: function getidTask() {\n    var self = this;\n    return self.getFormContainer().params.idTask || bizagi.context.idTask;\n  },\n  /*\r\n     *   Get param value sessionId\r\n     */\n  getSessionId: function getSessionId() {\n    var self = this;\n    return self.getFormContainer().properties.sessionId;\n  },\n\n  /*\r\n     *   CELL STUFF\r\n     *   TODO: Move to other place\r\n     */\n\n  /* Customizes cell color*/\n  changeCellColor: function changeCellColor(color) {\n    var self = this;\n    var control = self.getControl();\n    if (control) {\n      if (color != 'none') {\n        control.css(\"color\", color);\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", color);\n        });\n      } else {\n        control.css(\"color\", \"\");\n        control.find(\"input, textarea, label\").each(function (i, element) {\n          $(element).css(\"color\", \"\");\n        });\n      }\n    }\n  },\n\n  /**\r\n      * Customizes cell background color\r\n      * @param color\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    var self = this;\n    var control = self.getControl();\n    var backgroundColor = \"\";\n    var backgroundImage = \"\";\n\n    if (control) {\n      if (color != 'none') {\n        backgroundColor = color;\n        backgroundImage = \"none\";\n      }\n\n      if (self.properties.editable) {\n        var needBGPaint = false;\n\n        control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\n\n          if ((element.type == \"text\" || element.type == \"textarea\") && !$(element).hasClass('ui-select-data'))\n          needBGPaint = true;\n\n          $(element).css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n\n        if (!needBGPaint) {\n          control.closest(\"td\").each(function (i, element) {\n            $(element).css({\n              \"background-color\": backgroundColor,\n              \"background-image\": backgroundImage });\n\n          });\n        }\n\n      } else {\n        control.each(function (i, element) {\n          //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\n          var item = $(element).hasClass(\"ui-bizagi-cell-readonly\") ? control.closest(\"td\") : $(element);\n          item.css({\n            \"background-color\": backgroundColor,\n            \"background-image\": backgroundImage });\n\n        });\n      }\n    }\n\n\n  },\n\n  /**\r\n      * Changes the cell visibility\r\n      * @param argument\r\n      */\n  changeCellVisibility: function changeCellVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Hide - show the render\n      if (bizagi.util.parseBoolean(argument) == true) {\n        //control.show();\n        control.css(\"visibility\", \"visible\");\n        control.css(\"display\", \"\");\n\n        self.element && self.element.show();\n      } else {\n        //control.hide();\n        control.css(\"visibility\", \"hidden\");\n      }\n    }\n\n    // Update properties\n    properties.visible = argument;\n  },\n\n  /**\r\n      * Changes the cell required\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (control) {\n      // Check if argument is true and control donot have any value\n      if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\n        control.addClass('control-required');\n        control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\n      } else {\n        control.removeClass('control-required');\n        $(\".ui-bizagi-render-control-required\", control).remove();\n      }\n      // Update properties\n      properties.required = argument;\n    }\n  },\n\n  /**\r\n      * Method to create deferred at the moment to start multiaction\r\n      */\n  startActionExecution: function startActionExecution() {\n    var self = this;\n    self.startLoading();\n    self.actionExecutionDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * method to resolve the deferred when multiaction finish\r\n      */\n  endActionExecution: function endActionExecution() {\n    var self = this;\n    self.endLoading();\n    if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\n    delete self.actionExecutionDeferred;\n  },\n\n  /**\r\n      * Method to return the promise to anyone that needs to know if multiaction ended\r\n      * @returns {*}\r\n      */\n  readyActionExecution: function readyActionExecution() {\n    var self = this;\n    if (!self.actionExecutionDeferred) return $.when(true);\n    return self.actionExecutionDeferred.promise();\n  },\n\n  /**\r\n      * Verifies is the elements was inside a new row in a grid\r\n      * @returns {boolean}\r\n      */\n  isFromCreatedRow: function isFromCreatedRow() {\n    var self = this;\n\n    if (self.grid) {\n      var i = self.grid.columns.length;\n\n      while (i-- > 0) {\n        if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\n          if (self.grid.columns[i].isNewRow == true) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Submits a invalidate page cache request\r\n      * @param params\r\n      */\n  submitInvalidatePageCacheRequest: function submitInvalidatePageCacheRequest(params) {\n    var self = this,\n    properties = self.properties;\n    var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\n\n\n    self.dataService.invalidatePageCache({ idPageCache: pageCacheToInvalidate });\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isDesignMode: function isDesignMode() {\n    return this.getMode() === \"design\";\n  },\n\n  /**\r\n      * Check is design mode\r\n      */\n  isExecutionMode: function isExecutionMode() {\n    return this.getMode() === \"execution\";\n  },\n\n  /***/\n  preventDefaultForAnchorTag: function preventDefaultForAnchorTag() {\n    if (bizagi.util.isSharepointContext() || bizagi.util.isWebpartContext()) {\n      $(\"a[href='#']\", this.getControl()).click(function (ev) {\n        ev.preventDefault();\n      });\n    }\n  },\n\n  getMainForm: function getMainForm(currentForm) {\n    var fromRender = currentForm.params.fromRender;\n    if (typeof fromRender != \"undefined\")\n    this.getMainForm(fromRender.getFormContainer());else\n\n    return currentForm;\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the intersection\r\n      * of a target element with an ancestor element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setInterceptionObserver: function setInterceptionObserver($context, callbackFn) {\n    var self = this;\n\n    var intersectionObserver = new IntersectionObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        intersectionObserver.disconnect();\n      }\n    });\n\n    intersectionObserver.POLL_INTERVAL = 100; // Time in milliseconds.\n    intersectionObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Provides a way to asynchronously observe changes in the resize\r\n      * of a target element\r\n      * @param $context\r\n      * @param callbackFn\r\n      */\n  setResizeObserver: function setResizeObserver($context, callbackFn) {\n    var self = this;\n\n    var resizeObserver = new ResizeObserver(function () {\n      if (!self.pluginInitialized && $context.width() !== 0) {\n\n        // Execute callback\n        if (typeof callbackFn === \"function\") {\n          callbackFn();\n        }\n\n        // Close\n        resizeObserver.disconnect();\n      }\n    });\n    resizeObserver.observe($context.get(0));\n  },\n\n  /**\r\n      * Restore appearance of grid\r\n      */\n  restoreGridAppearance: function restoreGridAppearance() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.restoreAppearance();\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        for (var i = 0; i < indexes.length; i++) {\n          column.decorateRenders[indexes[i]].restoreCellAppearance();\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Save visual changes of children in grid\r\n      */\n  saveGridChildrenVisualChanges: function saveGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n\n    self.gridChildrenVisualChanges = [];\n\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] = cell.visualChanges;\n          }\n\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Restore visual changes of children in grid\r\n      */\n  restoreGridChildrenVisualChanges: function restoreGridChildrenVisualChanges() {\n    var self = this;\n    var indexes = self.getIndexes();\n    if (self.columns.length > 0) {\n      $.each(self.columns, function (j, column) {\n        if (column.properties.xpath) {\n          for (var i = 0; i < indexes.length; i++) {\n            var cell = column.decorateRenders[indexes[i]];\n\n            if (cell && cell.properties)\n            cell.visualChanges = self.gridChildrenVisualChanges[cell.properties.id + indexes[i]] || {};\n          }\n\n        }\n      });\n    }\n\n    delete self.gridChildrenVisualChanges;\n  },\n\n  /**\r\n      * Restore appearance of cell\r\n      */\n  restoreCellAppearance: function restoreCellAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n      switch (command) {\n        case \"color\":\n          self.changeCellColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeCellBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeCellRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditabilityCellControl(self.visualChanges[command], self.surrogateKey, self.properties.xpath);\n          break;\n        case \"visibility\":\n          self.changeCellVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Form Container Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define a form container class that defines basic stuff regarding the device\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.form\", {}, {\n  /*\r\n                                              *   Constructor\r\n                                              */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n    var device = bizagi.util.detectDevice();\n\n    // Creates a hashtable to maintain references by id\n    self.rendersById = {};\n    self.rendersByXpath = {};\n    self.rendersByXpathId = {};\n    self.rendersByType = {};\n\n    // Set page cache id\n    self.idPageCache = data.pageCacheId;\n\n    // Set default mode\n    self.mode = params.mode || \"execution\";\n    self.focus = params.focus;\n\n    // Set rendering params\n    self.params = params;\n\n    // Call base\n    this._super(params);\n\n    // Define confirmation message \n    var message = \"\";\n\n    if (device !== \"desktop\") {\n      message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\n    } else {\n      message = this.getResource(\"render-form-user-confirmation-message\");\n    }\n\n    // Default properties\n    var properties = self.properties;\n    properties.sessionId = data.sessionId;\n    properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\n    properties.userConfirmationMessage = properties.userConfirmationMessage || message;\n    properties.orientation = properties.orientation || \"ltr\";\n    properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\n    properties.contexttype = params.contexttype || \"\";\n    properties.paramsRender = params.paramsRender || {};\n    properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\n    properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\n    properties.type = properties.type || \"form\";\n\n    // Set validations & actions\n    this.validations = data.validations;\n    this.actions = data.actions;\n\n    // Enable the \"Validate and Save\" action for Form Buttons\n    self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\n\n    // Enable execution of Quick actions\n    var enableExecuteQuickActions = bizagi.util.isFeatureEnabled(\"enableExecuteQuickActions\");\n    var allowExecuteQuickActions = enableExecuteQuickActions !== null ? enableExecuteQuickActions : true;\n    self.useQuickActions = allowExecuteQuickActions && self.hasQuickActions(data, allowExecuteQuickActions);\n\n    // Initialize buttons\n    self.initializeButtons(data);\n\n    // Define transitions to Complex Gateway\n    if (data.transitions) {\n      self.transitions = data.transitions;\n    }\n\n    this.originalProcessButton = this.processButton;\n\n    //Custom behaviour for application parent activated.\n    self.isRoutingDisabled = false;\n    if (params.applicationParent) {\n      switch (params.applicationParent) {\n        case 'NEWWORKPORTAL':\n          self.isRoutingDisabled = true;\n          break;}\n\n    }\n\n    self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\n    self.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    self.rendersById[properties.id] = self;\n  },\n\n  /*\r\n     *   Initializes button metadata\r\n     */\n  initializeButtons: function initializeButtons(data) {\n    var self = this;\n\n    self.buttons = [];\n\n    // Process buttons\n    if (data.buttons) {\n      $.each(data.buttons, function (i, item) {\n        var button = item.button.properties;\n\n        // Process caption\n        button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) !== button.caption ? self.getResource(button.caption) : button.caption;\n\n        // Process actions\n        if (button.actions) {\n          $.each(button.actions, function (i, action) {\n            button[action] = true;\n          });\n        }\n\n        // Add other properties\n        button.ordinal = i;\n        button.action = button.next ? \"next\" :\n        button.nextWithoutValidations ? \"nextWithoutValidations\" :\n        button.submitData ? \"save\" :\n        button.cancel ? \"cancel\" :\n        button.back ? \"back\" :\n        button.createnewcase ? \"createnewcase\" :\n        button.validate ? \"validate\" : \"\";\n\n        // Explicit add save operation\n        button.save = button.action === \"save\";\n\n        // Allow Quick action\n        button.quickAction = button.type === \"quickactions\";\n\n        // Add inherent behaviours\n        if (button.next || button.back || button.nextWithoutValidations) {\n          button.routing = true;\n        }\n\n        if (button.hasRule) {\n          button.executeRule = true;\n        }\n\n        if (self.allowValidateAndSaveAction && button.validate) {\n          button.submitData = true;\n          button.refresh = true;\n          button.save = true;\n          if (button.action === \"next\" || button.action === \"createnewcase\") {\n            button.refresh = false;\n          }\n        }\n\n        // Prepare button style\n        button.style = self.buildButtonStyle(button);\n\n        // Add to button array\n        self.buttons.push(button);\n      });\n    }\n  },\n\n  /*\r\n     *   Get the original params used to fetch the form\r\n     */\n  getParams: function getParams() {\n    return this.params;\n  },\n\n  setParam: function setParam(property, value) {\n    if (this.params) {\n      this.params[property] = value;\n    }\n  },\n\n  /*\r\n     *   Get current rendering mode\r\n     */\n  getMode: function getMode() {\n    return this.mode;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    if (self.params) {\n      return self.params.customHandlers;\n    }\n  },\n  /*\r\n     * Method to index renders\r\n     */\n  registerRender: function registerRender(render) {\n    var self = this;\n    var xpath = render.properties.xpath;\n    var id = render.properties.id;\n    var type = render.properties.type;\n    var xpathId = xpath ? xpath + \".\" + id : undefined;\n\n    self.rendersById[id] = render;\n    if (xpath) {\n      if (!self.rendersByXpath[xpath]) {\n        self.rendersByXpath[xpath] = [];\n      }\n      self.rendersByXpath[xpath].push(render);\n    }\n\n    if (xpathId) {\n      if (!self.rendersByXpathId[xpathId]) {\n        self.rendersByXpathId[xpathId] = [];\n      }\n      self.rendersByXpathId[xpathId].push(render);\n    }\n\n    if (!self.rendersByType[type]) {\n      self.rendersByType[type] = [];\n    }\n    self.rendersByType[type].push(render);\n  },\n  /*\r\n     * Method to unregister render\r\n     */\n  unregisterRender: function unregisterRender(render) {\n    var self = this;\n\n    if (self.rendersById[render.properties.id]) {\n      delete self.rendersById[render.properties.id];\n    }\n\n    if (render.properties.xpath) {\n      if ($.isArray(self.rendersByXpath[render.properties.xpath]) &&\n      self.rendersByXpath[render.properties.xpath].length > 1) {\n        for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\n          var element = self.rendersByXpath[render.properties.xpath][i];\n          if (bizagi.util.md5(JSON.stringify(element.properties)) === bizagi.util.md5(JSON.stringify(render.properties))) {\n            self.rendersByXpath[render.properties.xpath].splice(i, 1);\n            self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\n            break;\n          }\n        }\n      } else {\n        delete self.rendersByXpath[render.properties.xpath];\n        delete self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id];\n      }\n    }\n\n    // Unregister from renders by type\n    if (render.properties.type) {\n      var listRendesByType = self.getRenderByType(render.properties.type);\n      var listRendesByTypeLength = listRendesByType.length;\n      var renderKey = render.properties.id || render.properties.xpath;\n\n      for (var i = 0; i < listRendesByTypeLength; i++) {\n        var listRender = listRendesByType[i];\n        if (typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey ||\n        typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey) {\n          // Unregister element\n          self.rendersByType[render.properties.type].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  /*\r\n     * Method to access a render by id\r\n     */\n  getRenderById: function getRenderById(id) {\n    var self = this;\n\n    return self.rendersById[id];\n  },\n\n  getGridByColumn: function getGridByColumn(id) {\n    var self = this;\n    var grids = self.getRenderByType('grid');\n    var i = 0,columnIndex;\n\n    for (; i < grids.length; i++) {\n      columnIndex = grids[i].columnsIds.indexOf(id);\n      if (columnIndex != -1) {\n        return grids[i];\n      }\n    }\n\n    return null;\n  },\n\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath) {\n    var self = this;\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath && xpath.indexOf)\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    return self.rendersByXpathId[xpath] ?\n    self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\n    self.rendersByXpath[xpath] : [];\n  },\n  /**\r\n      * Get all render with the same type\r\n      */\n  getRenderByType: function getRenderByType(type) {\n    var self = this;\n\n    // Check that type is defined\n    if (typeof type == \"string\" && type.length > 0) {\n      // Search controls by type\n      return self.rendersByType[type] ? self.rendersByType[type] : [];\n    }\n    return [];\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    // TODO: Unify markup of forms. Currently the template has validations to apply a different markup if it is \n    //a query form. In the future, all forms should have the same markup to minimize complexity. See form.tmpl.html.\n    var html = $.fasttmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() === \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation,\n      isEmpty: bizagi.util.isEmpty(self.children) && bizagi.util.isEmpty(self.transitions), // Sections and Gateway\n      allowQuickActions: self.useQuickActions // Quick actions\n    });\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(form) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Add a mode class\n    form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\n\n    // Call base\n    this._super(form);\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    if (form.length > 1) {\n      $(form).each(function () {\n        if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n          complexGatewayContainer = this;\n        }\n      });\n    } else {\n      complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\n    }\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function (e, mainForm) {\n      var $canvas = self.getValidationsContainer(mainForm);\n\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations, $canvas);\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    // Set events for complex gateway interface\n    $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\n      var checkboxLabel = $(\"label\", this);\n\n      var transitionId = checkboxLabel.data(\"value\") || \"\";\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\n        // Uncheck element\n        checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        checkboxLabel.addClass(\"ui-checkbox-state-checked\");\n        checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        checkboxLabel.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n\n\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n    var self = this;\n\n\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n  },\n  /*\r\n     *   Format form buttons to allow further customization\r\n     */\n  buildButtonStyle: function buildButtonStyle(button) {\n\n    var style = {};\n    if (button.format) {\n      if (button.format.size) {\n        if (button.format.size != \"0\") {\n          var newFontSize = 100 + Number(button.format.size) * 10 + \"%\";\n          style[\"font-size\"] = newFontSize + \" !important\";\n        }\n      }\n      if (button.format.bold) {\n        style[\"font-weight\"] = \"bold !important\";\n        if (bizagi.util.isIE()) {\n          style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\n        }\n      }\n      if (button.format.italic) {\n        style[\"font-style\"] = \"italic !important\";\n      }\n      if (button.format.underline || button.format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\n        style[\"text-decoration\"] = strikethru + underline + \" !important\";\n      }\n      if (button.format.background) {\n        style[\"background-color\"] = button.format.background + \" !important\";\n        style[\"background-image\"] = \"none !important\";\n      }\n      if (button.format.color) {\n        style[\"color\"] = button.format.color + \" !important\";\n      }\n    }\n\n    var strStyle = \"\";\n    for (key in style) {\n      strStyle += key + \":\" + style[key] + \";\";\n    }\n    return strStyle;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   Returns a promise\r\n     */\n  render: function render() {\n    var self = this;\n\n    // Creates a deferred, so we can check when form has been included in dom\n    if (!self.readyDeferred)\n    self.readyDeferred = new $.Deferred();\n\n    // Call base\n    var result = this._super();\n\n    return result;\n  },\n  /*\r\n     *   Sets a promise that the form will be included in the DOM\r\n     *   so we can apply some tedious plugins that require that\r\n     */\n  ready: function ready() {\n    var self = this;\n\n    return self.readyDeferred.promise();\n  },\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n  /*\r\n     *  Return context type, when the parent form is entity\r\n     */\n  getContextType: function getContextType() {\n    return this.properties.contexttype || \"\";\n  },\n\n  /*\r\n     * Return the endpoint action, when the form will be refresh\r\n     */\n  getEndPointAction: function getEndPointAction() {\n    var self = this,\n    properties = self.properties;\n\n    if (properties.formtype == \"startform\")\n    return \"LOADSTARTFORM\";\n\n    return undefined;\n\n  },\n\n  /*\r\n     *   Returns the page cache id for the element\r\n     */\n  getPageCache: function getPageCache() {\n    return this.idPageCache;\n  },\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    return this;\n  },\n  /*\r\n     *   Method to process button actions in the form\r\n     */\n  processButtons: function processButtons() {\n    var self = this;\n    var buttons = self.getButtons();\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    // Attach a handler for each button\n    buttons.on(\"click\", function (e) {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      self.startLoading();\n\n      var button = $(this);\n      var ordinal = button.attr(\"ordinal\");\n      var buttonProperties = self.buttons.find(function (btn) {\n        return btn.ordinal == ordinal;\n      });\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Disable button to prevent multiple click actions\n      button.prop(\"disabled\", true);\n\n      if (button.hasOwnProperty('disabled')) {\n        button.button(\"disable\"); // Setting styles\n      }\n\n      // External Events\n      self.propagateExternalEvents(e);\n\n      // Execute button\n      // QAF-1418 - add setTimeout\n      var timeOutButton = setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n          if ($.contains(document.documentElement, button.get(0))) {//check if button is still in DOM\n            button.prop(\"disabled\", false); //enable button\n\n            if (button.hasOwnProperty('enable')) {\n              button.button(\"enable\"); //Setting styles\n            }\n          }\n        });\n        clearTimeout(timeOutButton);\n      }, 100);\n    });\n  },\n  /*\r\n     * Execute codes just before sending information to server\r\n     */\n  preProcessButton: function preProcessButton(buttonProperties) {\n    return true;\n  },\n  /*\r\n     * Execute codes just after sending information to server\r\n     */\n  postProcessButton: function postProcessButton(responses, buttonProperties) {\n    return true; // true means continue\n  },\n\n  setLoaderDeferred: function setLoaderDeferred() {\n    var self = this;\n\n    self.loaderDeferred = $.Deferred().resolve();\n  },\n\n  deleteLoaderDeferred: function deleteLoaderDeferred() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        delete self.loaderDeferred;\n      }).fail(function () {\n        delete self.loaderDeferred;\n      });\n    }\n  },\n\n  useOrSetLoaderDeferred: function useOrSetLoaderDeferred() {\n    var self = this;\n\n    if (!self.isLoaderDeferredSet()) {\n      self.setLoaderDeferred();\n    }\n  },\n\n  getLoaderPromise: function getLoaderPromise() {\n    var self = this;\n\n    if (self.isLoaderDeferredSet()) {\n      return self.loaderDeferred.promise();\n    } else {\n      return;\n    }\n  },\n\n  isLoaderDeferredSet: function isLoaderDeferredSet() {\n    var self = this;\n\n    if (self.loaderDeferred) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  appendWaitForLoader: function appendWaitForLoader(params) {\n    var self = this;\n    var promise = params.promise;\n    var create = params.create || false;\n\n    if (!self.isLoaderDeferredSet()) {\n      if (create) {\n        self.setLoaderDeferred();\n      } else {\n        return;\n      }\n    }\n\n    self.loaderDeferred = self.loaderDeferred.then(function () {\n      return function () {\n        return promise;\n      }();\n    });\n  },\n\n  getResolveOrReject: function getResolveOrReject() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.isLoaderDeferredSet()) {\n      $.when(self.loaderDeferred.promise()).done(function () {\n        deferred.resolve();\n      }).fail(function () {\n        deferred.resolve();\n      });\n    } else {\n      deferred.resolve();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n     *   Executes a single button action\r\n     */\n  processButton: function processButton(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var properties = self.properties;\n    if (!buttonProperties.routing) {\n      bizagi.chrono.initAndStart(\"submitForm\");\n    }\n    bizagi.chrono.init(\"waiting\");\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Resolve asynchronous tabItems\n    var form = self.getFormContainer();\n    var getAllTabs = form.getRenderByType(\"tabItem\");\n    var getAllTabsLength = getAllTabs.length;\n\n    form.innerTabsLoading = true;\n\n    self.useOrSetLoaderDeferred();\n\n    // Check\n    for (var i = 0; i < getAllTabsLength; i++) {\n      var render = getAllTabs[i];\n      // Resolve internal deferred\n      if (render.loadingDeferred && render.parent.container) {\n        render.loadingDeferred.resolve();\n      }\n    }\n\n    delete form.innerTabsLoading;\n\n    $.when(self.ready(), self.getResolveOrReject()).done(function () {\n      self.deleteLoaderDeferred();\n      // Validate the form\n      var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\n      if (valid) {\n\n        if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action) && !self.isOfflineForm) {\n          $(document).data('auto-save', '');\n        }\n\n        // Check for user confirmation if configured and the button is configured to enroute\n        var confirmationStatus = self.getConfirmationStatus(properties, buttonProperties);\n\n        if (confirmationStatus.hasConfirmation) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(confirmationStatus.message, null, false)).done(function () {\n            // Submits the form\n            if (self.preProcessButton(buttonProperties)) {\n              //Trigger the event after ProcessButton\n              self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n              $.when(self.submitForm(buttonProperties)).done(function () {\n                defer.resolve();\n              }).fail(function () {\n                defer.reject(arguments);\n              });\n            }\n          }).fail(function () {\n            defer.reject();\n          });\n\n        } else {\n          if (self.preProcessButton(buttonProperties)) {\n            //Trigger the event after ProcessButton\n            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\n            $.when(self.submitForm(buttonProperties)).done(function () {\n              $(document).trigger(\"FORMACTION\", buttonProperties);\n              defer.resolve();\n            }).fail(function () {\n              defer.reject(arguments);\n            });\n          }\n        }\n\n      } else {\n\n        self.endLoading();\n        if (buttonProperties.submitData) {\n          $.when(self.submitData()).done(function () {\n            defer.reject();\n          });\n        } else {\n          defer.reject();\n        }\n\n        self.validationController.expandNotificationBox();\n      }\n\n      var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\n      if (customHandler) {\n        customHandler(buttonProperties);\n      }\n    });\n\n    return defer.promise();\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  validateForm: function validateForm() {\n    var self = this;\n\n    // First hide and clear validation box\n    self.validationController.clearValidationMessages();\n\n    // Validate the form\n    return self.validationController.performValidations();\n  },\n  /*\r\n     *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()) {\n      return $.when(function () {\n        return null;\n      });\n    }\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Wait for deferreds\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n\n      var saveParams = {\n        action: \"SAVE\",\n        data: data,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        isOfflineForm: self.isOfflineForm || false };\n\n\n      if (self.isOfflineForm) {\n        saveParams.offlineType = self.params.offlineType;\n      }\n\n      // Submit the form\n      return $.when(self.dataService.submitData(saveParams)).\n      always(function () {\n        self.endLoading();\n      });\n    });\n  },\n  removeCaseSyncError: function removeCaseSyncError() {\n    var editPromise = undefined;\n    if (!this.removeSyncErrorOnSubmit) return;\n    this.removeSyncErrorOnSubmit = false;\n    var offlineType = this.params.offlineType == \"task\" ? \"task\" : \"start\";\n    var editPromise = offlineType == \"start\" ? this.dataService.removeStartCaseSyncError(this.params) :\n    this.dataService.removeTaskCaseSyncError(this.params);\n    return editPromise;\n  },\n  /*\r\n     *   Creates a json array with key values to send to the server\r\n     */\n  submitForm: function submitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.isReadyToSave()).\n    then(function () {\n      if (self.isOfflineForm) {\n        $.when(self.removeCaseSyncError()).\n        then(\n        //Even if the removeSyncError promise fails the internalSubmit should be executed without break the promise chain\n        function () {return self.internalSubmitFormOffline(buttonProperties);},\n        function () {return self.internalSubmitFormOffline(buttonProperties);}).\n\n        then(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      } else\n      {\n        $.when(self.internalSubmitForm(buttonProperties)).\n        done(function () {\n          defer.resolve();\n        }).fail(function () {\n          defer.reject(arguments);\n        });\n      }\n    }).\n    fail(function () {\n      self.endLoading();\n      bizagi.log(\"The form is not saved, no changes were found\");\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  checkWidgetsData: function checkWidgetsData() {\n    //\n  },\n  isComplexGatewayPainted: function isComplexGatewayPainted() {\n    return false;\n  },\n\n  /**\r\n      * Get last action button\r\n      * @returns {*}\r\n      */\n  getLastActionButton: function getLastActionButton() {\n    return this.lastActionButton;\n  },\n\n  /**\r\n      * Internal - Creates a json array with key values to send to the database\r\n      * @param {} buttonProperties\r\n      * @returns {}\r\n      */\n  internalSubmitFormOffline: function internalSubmitFormOffline(buttonProperties) {\n    var self = this;\n    var message = \"\";\n    var data;\n    var defer = $.Deferred();\n\n    if (self.isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.save) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    } else {\n      // When the action is validate            \n      return;\n    }\n\n    var executeButtonAction = null;\n\n    // Start asynchronous operation\n    bizagi.loading.start();\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      // in offline this don't happend => Reset data because when an execute rule operation has been performed, it saved already all the data\n      if (data == undefined) {\n        data = {};\n      }\n\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule_\" + buttonProperties.id;\n    }\n\n    if (self.transitions) {\n      var transitions = [];\n      $.each(this.activeTransitions, function (key, value) {\n        value ? transitions.push(key) : \"\";\n      });\n\n      if (bizagi.util.countProps(transitions) == 0) {\n        bizagi.showMessageBox(\n        bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\n        bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n\n        self.endLoading();\n        return \"\";\n      }\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(executeButtonAction);\n    }\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.submitData({\n        action: buttonProperties.action,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        transitions: transitions || \"\",\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: actions })).\n      then(function (responses) {\n\n        if (!self.postProcessButton(responses, buttonProperties)) {\n          return;\n        }\n\n        //Offline action stored\n        var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\n        if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\n          var syncDeferred = new $.Deferred();\n          var syncParams = $.extend({ deferred: syncDeferred }, self.params);\n          $(document).trigger(\"tryPushCase.offline\", syncParams);\n        }\n\n        //Backward comp\n        if (!self.isOfflineFormsV2Supported) {\n          $(document).trigger(\"tryPushData.offline\");\n        }\n\n        $.when(syncDeferred).\n        then(function (result) {\n          bizagi.loading.stop();\n          if (buttonProperties.routing) {\n            if (!self.online && self.isOfflineFormsV2Supported) {\n              self.triggerHandler(\"routing\", {\n                offlineAction: buttonProperties.action,\n                idCase: self.params.idCase,\n                idWorkitem: self.params.idWorkitem,\n                buttonPropertiesAction: buttonProperties.action,\n                radNumber: self.params.radNumber });\n\n            } else {\n              //Show toast synchronized\n              if (self.showToastOnSuccessSync) {\n                self.showToastOnSuccessSync = false;\n                bizagi.util.showMobileToast({\n                  type: \"success\",\n                  message: bizagi.localization.getResource(\"workportal-offline-sync-success\") });\n\n              }\n              self.triggerHandler(\"routing\", {\n                idCase: result.IdCase,\n                caseNumber: result.CaseNumber,\n                buttonPropertiesAction: buttonProperties.action });\n\n            }\n          } else {\n\n            //The case was not sync\n            if (!self.online && result == undefined) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n            // After successfully response refresh the form\n            if (buttonProperties.refresh || result && result.shouldRefresh) {\n              self.refreshForm();\n            }\n            if (self.showToastOnSuccessSync && self.online) {\n              self.showToastOnSuccessSync = false;\n              bizagi.util.showMobileToast({\n                type: \"success\",\n                message: bizagi.localization.getResource(\"workportal-offline-save-and-sync-success\") });\n\n            } else {\n              var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\", \"Saved\");\n              bizagi.util.showNotification({ text: message, stop: false, type: \"success\" });\n            }\n          }\n          defer.resolve();\n        }).\n        fail(function (error) {\n          bizagi.loading.stop();\n          bizagi.util.recreateNativeButtons(self);\n          var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n          bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n          if ($.isArray(error)) {\n            var responses = error;\n            var bHasValidations;\n            var alertMessage = \"\";\n            $.each(responses, function (i, response) {\n              var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n              bHasValidations = propertiesToDisplayMessages.bHasValidations;\n              alertMessage = propertiesToDisplayMessages.alertMessage;\n            });\n            if (bHasValidations && alertMessage !== \"\") {\n              bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n            }\n          }\n          self.failHandler(error);\n          defer.reject(error);\n        });\n      }).fail(function (error) {\n        var message = bizagi.localization.getResource(\"workportal-mobile-offline-sync-fail\", \"Synchronization failed\");\n        bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n        defer.reject(error);\n      });\n    });\n\n  },\n\n  /**\r\n      * To save handSignature or any filetype render after editting in offline mode\r\n      * @param {Array} data - RederValues from collecData() \r\n      */\n  partialSubmitFormOffline: function partialSubmitFormOffline(data) {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.dataService.submitData({\n      action: \"save\",\n      data: data,\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      idForm: self.properties.id,\n      prepare: true,\n      transitions: \"\",\n      idCase: self.params.idCase,\n      idWorkitem: self.params.idWorkitem,\n      isOfflineForm: self.isOfflineForm || false,\n      offlineType: self.params.offlineType || \"\",\n      actions: [] })).\n\n    fail(function (error) {\n      var message = bizagi.localization.getResource(\"workportal-mobile-offline-form-fail\", \"Not saved\");\n      bizagi.util.showNotification({ text: message, stop: false, type: \"error\" });\n      defer.reject(error);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Internal - Creates a json array with key values to send to the server\r\n     */\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    var defer = $.Deferred();\n    var data = {};\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {// When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n\n      if (data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi.\n          localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      if (data && data.deferreds) {\n        deferredsToWait = $.when.apply($, data.deferreds);\n        waitingDeferreds.push(deferredsToWait);\n        delete data.deferreds;\n      }\n\n\n      performAction = self.dataService.submitData({\n        action: self.getButtonAction(buttonProperties.action),\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n      performAction.tag = \"performAction\";\n    }\n\n    // Assemble the actions\n    var actions = [];\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n      actions.push(checkpointAction);\n      actions.push(executeButtonAction);\n      actions.push(commitAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    // Execute the batch\n    bizagi.chrono.initAndStart(\"submitForm-ajax\");\n\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).\n      done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).\n      fail(function () {\n        flowControlDeferred.reject();\n        console.log(\"Error: It was not possible resolve async actions on form \");\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    waitingDeferreds.push(flowControlDeferred);\n\n    $.when.apply($, waitingDeferreds).done(function () {\n      $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\n        bizagi.chrono.stop(\"submitForm-ajax\");\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        var alertMessage = \"\";\n        $.each(responses, function (i, response) {\n\n          var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\n          bHasValidations = propertiesToDisplayMessages.bHasValidations;\n          alertMessage = propertiesToDisplayMessages.alertMessage;\n\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase,\n              routingDisabled: buttonProperties.routingDisabled });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (alertMessage !== \"\") {/*If there is an alertMessage show in a modal error*/\n            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\n          }\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        defer.resolve();\n      }).fail(function (res, res2, response) {\n        if (buttonProperties.executeRule) {\n          self.sendRollbackAction(buttonProperties.id);\n        }\n\n        if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\n        response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\n            return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          self.failHandler(response);\n          defer.reject(response);\n        }\n      });\n    });\n    return defer.promise();\n  },\n  validationToDisplayMessages: function validationToDisplayMessages(bHasValidations, messageType, message, alertMessage) {\n    var self = this;\n\n    if (messageType == \"validationMessages\") {\n      // Something went wrong, we gotta display messages in notifications grid\n      self.addValidationMessage(message);\n      bHasValidations = true;\n    }\n    if (messageType == \"alertMessages\") {\n      // Something went wrong, we gotta display alert message\n      if (alertMessage === \"\") {\n        alertMessage = message;\n      } else {\n        alertMessage = alertMessage + \"\\n\\n\" + message;\n      }\n\n      bHasValidations = true;\n    }\n\n    return { \"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage };\n  },\n\n  /*\r\n     *   Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    if (!self.validationController) {\n      var $canvas = self.getValidationsContainer();\n      self.validationController = new bizagi.command.controllers.validation(self, undefined, $canvas);\n    }\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\n      });\n    }\n    self.validationController.expandNotificationBox(autofocus);\n  },\n  /*\r\n     *   Public method to perform validations externally\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var self = this;\n\n    // First hide and clear validation box\n    if (self.validationController) {\n      self.validationController.clearValidationMessages(params);\n    }\n\n  },\n  /*\r\n     *   Add an error message to the form\r\n     */\n  addErrorMessage: function addErrorMessage(errorMessage) {\n    var self = this;\n\n    // Clean messages for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    this.clearValidationMessages();\n\n    self.validationController.showErrorMessage(errorMessage);\n    self.validationController.expandNotificationBox();\n  },\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm(focus) {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n\n    focus = focus || self.getFocus();\n\n    // Normalize new focus structure if not present\n    if (focus && !focus.id) {\n      focus = {\n        id: focus };\n\n    }\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      selectedSection: self.getSelectedSection(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      isRefresh: true,\n      contextType: self.getContextType() || \"\",\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\" };\n\n\n    if (self.isOfflineRefreshWithEdition) {\n      options.isEdited = true;\n      self.isOfflineRefreshWithEdition = false;\n    }\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    self.startLoading();\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      deferred.resolve();\n    }).fail(function () {\n      deferred.reject();\n    }).always(function () {\n      self.endLoading();\n    });\n\n    return deferred.promise();\n  },\n  /*\r\n     *   Get opened tabs configuration\r\n     */\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this;\n    var tabContainers = self.getElementsByType(\"tab\");\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n    var selectedTabs = {};\n    for (var i = 0, length = tabs.length; i < length; i++) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n    return selectedTabs;\n  },\n\n  /**\r\n      * Get the actual section selected\r\n      */\n  getSelectedSection: function getSelectedSection() {\n    var params = this.getParams() || {};\n    return params.selectedSection;\n  },\n  /*\r\n     *   Template method to get the buttons objects\r\n     */\n  getButtons: function getButtons() {\n  },\n  /*\r\n     *   Adds an action on the fly to process the submit on change\r\n     */\n  addSubmitAction: function addSubmitAction(xpath, action) {\n    var self = this;\n    self.actionController.processInternalSubmitAction(xpath, action);\n  },\n  /**\r\n      *   Adds an overlay to the form, and sets a waiting message\r\n      *\r\n      *   @argument {bool} delay Apply delay\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\n\n    if (self.waitingOverlay && self.waitingMessage)\n    return;\n\n    // This hack is only for desktop\n    if (!bizagi.util.isTabletDevice()) {\n      // Detect canvas parent with scroll\n      var isSharePoint = self.params.context === \"sharepoint\";\n      var canvas = self.params.canvas;\n      if (isSharePoint) {\n        canvas = bizagi.util.scrollTop(canvas);\n\n        if (!!!canvas.context) {\n          canvas = $(\"body\", $(document));\n        }\n      } else {\n        canvas = $(\"body\", $(document));\n      }\n\n      // Configures overlay\n      var size = this.getSize();\n      var position = this.getOffset();\n      if (size.height == $(window).height()) {\n        position.top = 0;\n      }\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\n      self.waitingOverlay.css({\n        \"height\": \"100%\",\n        \"width\": \"100%\",\n        \"min-height\": size.height,\n        \"min-width\": size.width });\n\n      self.waitingMessage.css({\n        \"top\": position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2) + \"px\",\n        \"left\": Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2) + \"px\" });\n\n      canvas.css(\"position\", \"relative\");\n\n    } else {\n      // Configures overlay\n      self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\n      self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\n    }\n  },\n  /*\r\n     *   Removes the overlay and restores the form edition\r\n     */\n  endLoading: function endLoading() {\n    var self = this;\n    if (self.waitingOverlay && self.waitingMessage) {\n      self.waitingOverlay.remove();\n      self.waitingMessage.remove();\n      self.waitingOverlay = null;\n      self.waitingMessage = null;\n\n      var canvas = self.params.canvas;\n\n      if (canvas != undefined)\n      canvas.css(\"position\", \"\");\n    }\n  },\n  /*\r\n     *   Get the focused render in the current request\r\n     */\n  getFocusedElement: function getFocusedElement() {\n    var self = this;\n    return self.focus;\n  },\n  /*\r\n     *   Set the focused render in the current request\r\n     */\n  setFocusedElement: function setFocusedElement(focus) {\n    var self = this;\n    self.focus = focus;\n  },\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\n  },\n  /*\r\n     *   Generic handler to attach fail workflow for some operations\r\n     */\n  failHandler: function failHandler(error) {\n    var self = this;\n\n    // Check if the error is in multiaction format\n    try {\n      error = JSON.parse(error);\n    } catch (e) {\n    }\n\n    //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n    if (error && error.length && error.length > 1) error = error[0];\n    if (error.error) error = error.error;\n    if (error.error) error = error.error;\n\n    // Handle normal messages\n    if (_typeof(error) == \"object\" && error.message) {\n      if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n        error = bizagi.localization.getResource(error.message);\n      } else {\n        error = error.message;\n      }\n\n    } else if (typeof error == \"string\") {\n      // Parse to json\n      try {\n        var errorJson = JSON.parse(error);\n        if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\n          errorJson.message = bizagi.localization.getResource(errorJson.message);\n        }\n        error = errorJson.message;\n      } catch (e) {\n      }\n    }\n\n    // Workflow engine error, we gotta show it with error\n    self.addErrorMessage(error);\n    self.endLoading();\n  },\n  /* \r\n     *   Resizes the element\r\n     */\n  resize: function resize(size) {\n    // Just save the size, for reference\n    this.setSize(size);\n  },\n  /*\r\n     *   Sets the internal size for the form\r\n     */\n  setSize: function setSize(size) {\n    this.size = size;\n  },\n  /*\r\n     *   Gets the internal size for the form\r\n     */\n  getSize: function getSize() {\n    if (this.size) {\n      return this.size;\n    }\n    var canvas = this.params.canvas ? this.params.canvas : this.getFormContainer().container;\n\n    var canvasWidth = canvas.width();\n    var canvasHeight = canvas.height();\n\n    return {\n      width: canvasWidth,\n      height: canvasHeight };\n\n  },\n  getOffset: function getOffset() {\n    var canvas = this.getFormContainer().container;\n\n    return canvas.offset();\n  },\n\n  /**\r\n      * This function execute action to save all data of render, but\r\n      * the server service dont execute any rule on the server\r\n      */\n  submitData: function submitData(args) {\n    var self = this;\n\n    // Avoid the execution of server actions for mobile offline\n    if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\n    return;\n\n    // Collect data\n    var data = self.collectRenderValuesForSubmit();\n\n    // Check is offline form        \n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    if (isOfflineForm && self.properties && !self.properties.idPageCache) {\n      self.properties.idPageCache = \"\";\n    }\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    // Don't do anything if there is no data\n    if ($.isEmptyObject(data)) {\n      self.isOfflineRefreshWithEdition = false;\n      return;\n    }\n\n    var waitingDeferreds = [];\n    var deferredsToWait = null;\n    var executeSubmitData = null;\n\n    if (data && data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      waitingDeferreds.push(deferredsToWait);\n      delete data.deferreds;\n    }\n\n    // Call the service\n    if (isOfflineForm) {\n      executeSubmitData = self.dataService.submitData({\n        action: self.isRefreshingAfterSync ? \"submitdata\" : \"save\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\",\n        isOfflineForm: isOfflineForm,\n        offlineType: self.params.offlineType,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem });\n\n    } else {\n      executeSubmitData = self.dataService.multiaction().submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idPageCache: self.properties.idPageCache,\n        xpathContext: self.properties.xpathContext,\n        contexttype: self.properties.contexttype || \"\" });\n\n    }\n\n    return $.when.apply($, waitingDeferreds).then(function () {\n      return $.when(executeSubmitData).fail(function (message) {\n        message = self.processFailMessage(message);\n      });\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute a rule\r\n      */\n  executeRule: function executeRule(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n    var deferred = $.Deferred();\n\n    // Concat inheritance context\n    if (properties.xpathContext !== \"\") {\n      xpathContext = xpathContext !== \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    $.when(self.dataService.multiaction().executeRule({\n      idPageCache: properties.idPageCache,\n      rule: args.rule,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      var type = message && message.type ? message.type : \"\";\n      var form = self.getFormContainer();\n\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\n\n      if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        if (type === \"alertMessages\") {\n          bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n        } else {\n          form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\n        }\n\n        deferred.reject(message);\n      } else {\n        deferred.resolve(message);\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n      deferred.reject(message);\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * This function send a request to the server to execute an interface\r\n      */\n  executeInterface: function executeInterface(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeInterface({\n      idPageCache: properties.idPageCache,\n      \"interface\": args[\"interface\"],\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /**\r\n      * This function send a request to the server to execute an SAP connector\r\n      */\n  executeSAPConnector: function executeSAPConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeSAPConnector({\n      idPageCache: properties.idPageCache,\n      guidsap: args.guidsap,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an Connector\r\n      */\n  executeConnector: function executeConnector(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.\n      xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executeConnector({\n      idPageCache: properties.idPageCache,\n      guidConnector: args.guidConnector,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n\n  },\n\n  /**\r\n      * This function send a request to the server to execute an pipeline\r\n      */\n  executePipeline: function executePipeline(args) {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = args.xpathContext;\n\n    if (properties.xpathContext != \"\") {\n      // Concat inheritance context\n      xpathContext = xpathContext != \"\" ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\n    }\n\n    // Perform the service\n    return $.when(self.dataService.multiaction().executePipeline({\n      idPageCache: properties.idPageCache,\n      pipeline: args.pipeline,\n      xpathContext: xpathContext,\n      contexttype: self.properties.contexttype || \"\" })).\n    done(function (message) {\n      // Check for validation messages\n      self.getFormContainer().clearValidationMessages();\n      if (message && message.type == \"validationMessages\") {\n        self.getFormContainer().addValidationMessage(message.messages);\n      }\n\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n    });\n  },\n\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  refreshActions: function refreshActions(actions) {\n    var self = this;\n    self.actionController.refreshActions(actions);\n  },\n  /***/\n  tryToExecuteFunction: function tryToExecuteFunction(xpath) {\n    if (this.getMode() == \"execution\") {\n      this.actionController && this.actionController.tryToExecuteFunction(xpath);\n    }\n  },\n  /*\r\n     *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n     */\n  removeActions: function removeActions() {\n    var self = this;\n    self.actionController.unbindActions();\n  },\n  /*\r\n     *   Iterate through all renders and collect the data to send, then update original values for each render\r\n     */\n  collectRenderValuesForSubmit: function collectRenderValuesForSubmit(data) {\n    var self = this;\n    data = data || {};\n\n    // Collect data\n    self.collectRenderValues(data);\n\n    // Mark data collected as original values\n    $.each(data, function (key, value) {\n      var renders = self.getRenders(key);\n      $.each(renders, function (i, render) {\n        render.updateOriginalValue();\n      });\n    });\n\n    return data;\n  },\n\n  /**\r\n      *\r\n      * @param params {data, bRefreshForm,properties}\r\n      * @returns {*}\r\n      */\n  internalSubmitOnChange: function internalSubmitOnChange(params) {\n    params = params || {};\n    var self = this;\n    var properties = params.properties;\n    var defer = new $.Deferred();\n    var data = params.data || {};\n    var bRefreshForm = typeof params.bRefreshForm != \"undefined\" ? params.bRefreshForm : true;\n    var notCollect = params.notCollect ? params.notCollect : undefined;\n\n    // Collect data\n    if (!(notCollect && !$.isEmptyObject(data))) {\n      self.collectRenderValuesForSubmit(data);\n    }\n\n    self.startLoading();\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      // Submit the form\n      self.dataService.multiaction().submitData({\n        action: \"SUBMITONCHANGE\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        contexttype: properties.contexttype }).\n      done(function (response) {\n        // Cancel previous multiactions and process property value\n        self.cancelPreviousRequest();\n        // After successfully response refresh the form\n        self.endLoading();\n        // If response message has error in validation, do not refresh the form\n        // and show validation message\n        if (response && response.type == \"validationMessages\") {\n          if (typeof self.clearValidationMessages == \"function\") {\n            self.clearValidationMessages();\n          }\n\n          self.addValidationMessage(response.messages);\n          defer.resolve();\n        } else if (bRefreshForm) {\n          var focusIdentifier = {\n            id: properties.id,\n            xpath: properties.xpath };\n\n          if (properties.idCase !== undefined) {\n            $.extend(focusIdentifier, {\n              idCaseObject: bizagi.cache.idCaseObject });\n\n          }\n          if (response.IdScope) {\n            self.properties.idStartScope = response.IdScope;\n          }\n          $.when(self.refreshForm(focusIdentifier)).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.resolve();\n          });\n        } else {\n          defer.resolve();\n        }\n      }).fail(function (message) {\n        self.endLoading();\n        var objMessage = _typeof(message) == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\n        var strMessage = objMessage.message || message;\n        var type = objMessage.type || \"error\";\n\n        // Omit processing when the ajax didn't process\n        if (![\"not-processed\", \"not-shown\"].includes(type)) {\n          // Clear previous validations\n          self.validationController.clearValidationMessages();\n\n          if (objMessage.type === \"alert\") {\n            self.validationController.showAlertMessage(strMessage);\n          } else {\n            self.validationController.showErrorMessage(strMessage);\n          }\n        }\n\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  cancelPreviousRequest: function cancelPreviousRequest() {\n    if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\n      var length = bizagi.multiactionConnection.length;\n      var i = 0,connection;\n      for (; i < length; i++) {\n        connection = bizagi.multiactionConnection.pop();\n        if (connection && connection.abort) {\n          bizagi.showErrorAlertDialog = false;\n          connection.abort();\n        }\n      }\n    }\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(buttonId) {\n    var self = this;\n\n    var checkpointAction = self.dataService.sendCheckpoint({\n      url: self.properties.checkpointUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    checkpointAction.tag = \"checkpoint\";\n\n    return checkpointAction;\n  },\n\n  prepareCommitAction: function prepareCommitAction(buttonId) {\n    var self = this;\n\n    var commitAction = self.dataService.commitLinkForm({\n      url: self.properties.commitUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      prepare: true });\n\n\n    commitAction.tag = \"commit\";\n\n    return commitAction;\n  },\n\n  sendRollbackAction: function sendRollbackAction(buttonId) {\n    var self = this;\n\n    self.dataService.rollbackLinkForm({\n      url: self.properties.rollbackUrl,\n      idRender: buttonId,\n      xpath: \"\",\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache });\n\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    self.endLoading();\n\n    var timeOutController = setTimeout(function () {\n      if (self.params) {\n        delete self.params.canvas;\n      }\n      delete self.params;\n      delete self.control;\n      if (self.validationController) {\n        self.unbind(\"rendervalidate\");\n        delete self.validationController;\n      }\n\n      if (self.actionController) {\n        self.actionController.unbindActions();\n        delete self.actionController;\n      }\n      clearTimeout(timeOutController);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n  getButton: function getButton(guid) {\n    return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\n  },\n\n  getFloatingButton: function getFloatingButton(guid) {\n    return $(\"li[data-id='\" + guid + \"']\", this.container);\n  },\n\n  propagateExternalEvents: function propagateExternalEvents(evt) {\n    // Menu-Overflow\n    var $menuOverflow = $(\".bz-overflow-menu\");\n    if ($menuOverflow)\n    $(document).trigger('click.overflow');\n\n    // ECM with preview image\n    var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\n\n    if (zoomIsOpen)\n    $(\"div.jquery-image-zoom a\").click();\n  },\n\n  getButtonAction: function getButtonAction(action) {\n    return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\n  },\n\n  /***/\n  isConnected: function isConnected() {\n    return true;\n  },\n\n  /**\r\n      * Add handlers to network management\r\n      */\n  configureNetworkHandlers: function configureNetworkHandlers() {\n    var self = this;\n    self.online = bizagi.util.isConnected();\n    if (self.isOfflineForm && bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      self.online = self.getParams().online;\n      console.log(\"CONNECTED: \", self.online);\n    }\n\n    // Update the online status based on connectivity\n    if (bizagi.util.isNativeMobileDevice() || bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      $(document).off(\"online.form\");\n      $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\n\n      $(document).off(\"offline.form\");\n      $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\n\n      //Connection gained with form opened\n      $(document).off(\"offline-notify-form-sync-event\");\n      $(document).on(\"offline-notify-form-sync-event\", this.handleOfflineSyncEvent.bind(self));\n    }\n  },\n\n  /**\r\n      * Event handler\r\n      * @param event\r\n      */\n  handleConnectionChange: function handleConnectionChange(event) {\n    var form = this.getFormContainer();\n    if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\") {\n      this.online = event.type === \"online\";\n    } else {\n      this.online = bizagi.util.isConnected();\n    }\n\n    // You lost connection.\n    if (event.type === \"offline\") {\n      form.triggerHandler(\"offlineForm\");\n    }\n\n    // You are now back online.\n    if (event.type === \"online\") {\n      form.triggerHandler(\"onlineForm\");\n    }\n  },\n\n  /**\r\n      * Push successful hanlder, refresh form and copy current work\r\n      */\n  handleOfflineSyncEvent: function handleOfflineSyncEvent(event, params) {\n    var self = this;\n    var formParams = self.params || {};\n    if (formParams.hasSyncError) {\n      return;\n    }\n    var offlineFormId = formParams.idCase + \"-\" + formParams.idWorkitem;\n    switch (params.type) {\n      case \"download-form-success\":\n        /**\r\n                                     * 1. Store current data in offline submit\r\n                                     * 2. Refresh form\r\n                                     * 3. Merge data using offline isEdited method\r\n                                     */\n        var paramsId = params.idCase + \"-\" + params.idWorkitem;\n        if (offlineFormId === paramsId) {\n          console.log(\"Form downloaded successfully. It will be refreshed\", params);\n\n          $.when(self.dataService.database.validateLocalDataForTaskExists(paramsId).then(function (dataResult) {\n            if (dataResult === true) {\n              self.isOfflineRefreshWithEdition = true;\n            }\n\n            $.when(self.refreshForm(null, false)).then(function () {\n              applySyncLoader(false);\n            });\n          }));\n        }\n        break;\n      case \"push-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"push-tasks-error\":\n        applySyncLoader(false);\n        if (self.validationController != undefined) {\n          self.validationController.clearValidationMessages();\n          self.validationController.showErrorMessage(params.message);\n        }\n        break;\n      case \"fetch-tasks-started\":\n        if (params.tasks != undefined && params.tasks[offlineFormId]) {\n          applySyncLoader(true);\n        }\n        break;\n      case \"download-finished\":{\n          applySyncLoader(false);\n          break;\n        }\n      case \"download-error\":\n        applySyncLoader(false);\n        break;\n      default:\n        console.warn(\"Event hast not implementation in bizagi.rendering.form - handleOfflineSyncEvent\", params.type, params);\n        break;}\n\n\n    function applySyncLoader(isStart) {\n      var loaders = 3;\n      var proceed = false;\n      if (isStart) {\n        proceed = !(self.isSyncLoaderRunning === true);\n      } else\n      {\n        proceed = self.isSyncLoaderRunning === true;\n      }\n      if (proceed) {\n        self.isSyncLoaderRunning = isStart;\n        for (var loaderIndex = 0; loaderIndex < loaders; loaderIndex++) {\n          if (isStart) {\n            bizagi.loading.start();\n          } else\n          {\n            bizagi.loading.stop();\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Check if allow to call the button actions\r\n      * @returns {boolean|*}\r\n      */\n  allowOnlineActions: function allowOnlineActions() {\n    if (typeof this.online === \"undefined\") return true;\n    return this.online || !this.online && this.isOfflineForm;\n  },\n\n  /**\r\n      * Method to process button actions in the form\r\n      * @param ordinal\r\n      */\n  processQuickButton: function processQuickButton(ordinal) {\n    var self = this;\n    var buttonProperties = self.buttons.find(function (btn) {\n      return btn.ordinal == ordinal;\n    });\n\n    if (buttonProperties) {\n\n      self.startLoading();\n\n      self.lastActionButton = buttonProperties;\n      if (buttonProperties.action === \"next\") {\n        buttonProperties.routingDisabled = self.isRoutingDisabled;\n      }\n\n      // Execute button - QAF-1418 - add setTimeout\n      setTimeout(function () {\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.processDefer = undefined;\n          self.endLoading();\n        });\n      }, 100);\n\n    }\n\n  },\n\n  /**\r\n      * Check if quick actions are configured\r\n      * @param data\r\n      * @param isEnable\r\n      * @returns {boolean}\r\n      */\n  hasQuickActions: function hasQuickActions(data, isEnable) {\n\n    if (!isEnable) return false;\n\n    return (data.buttons || []).some(function (item) {\n      var button = item.button.properties;\n      return button && button.type === \"quickactions\";\n    });\n\n  },\n\n  /**\r\n      * Perform validation container\r\n      * @param form\r\n      * @param mainForm\r\n      * @returns {*}\r\n      */\n  getValidationsContainer: function getValidationsContainer(mainForm) {\n    var form = this;\n    var formContainer = typeof mainForm !== \"undefined\" ? mainForm : form;\n\n    return formContainer.container;\n\n  },\n\n  /**\r\n      * Return if exist confirmation user and the message\r\n      * @param {*} formProperties \r\n      * @param {*} buttonProperties \r\n      */\n  getConfirmationStatus: function getConfirmationStatus(formProperties, buttonProperties) {\n    var hasButtonsConfirmation = bizagi.util.parseBoolean(buttonProperties.needsUserConfirmation) || false;\n    var buttonConfirmationMsg = buttonProperties.userConfirmationMessage || \"\";\n\n    var hasFormConfirmation = bizagi.util.parseBoolean(formProperties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing);\n    var formConfirmationMsg = formProperties.userConfirmationMessage || \"\";\n\n    var messageConfirmation = hasButtonsConfirmation ? buttonConfirmationMsg : formConfirmationMsg;\n\n    return {\n      hasConfirmation: hasButtonsConfirmation || hasFormConfirmation,\n      message: messageConfirmation };\n\n  },\n\n  saveWorkInProgress: function saveWorkInProgress() {\n    var self = this;\n    var data = self.collectRenderValuesForSubmit();\n    if (!bizagi.util.isEmpty(data)) {\n      return self.dataService.submitData({\n        action: 'submitdata',\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        idForm: self.properties.id,\n        prepare: true,\n        idCase: self.params.idCase,\n        idWorkitem: self.params.idWorkitem,\n        isOfflineForm: self.isOfflineForm || false,\n        offlineType: self.params.offlineType || \"\",\n        actions: [] });\n\n    } else {\n      return $.Deferred().resolve(undefined).promise();\n    }\n  },\n\n  /**\r\n      * Check if it is a start form\r\n      * @returns {*|boolean}\r\n      */\n  isStartForm: function isStartForm() {\n    var form = this.getFormContainer();\n    var formType = form && form.properties && form.properties.formtype || \"\";\n\n    return /startform/i.test(formType);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Combo Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for combo renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.hasLocalData = properties.data || false;\n    // TODO: Review additional value in radio control\n    properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null;\n\n    if (typeof properties.enableTyping === \"undefined\") properties.enableTyping = true;\n    if (properties.value && properties.value.id === undefined) properties.value = null;\n    this.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData) {\n      properties.data = this.complementData(properties.data);\n    }\n\n    // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\n    properties.loadOnDemand = false;\n  },\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var params = {};\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n\n    if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\n      var valueControl = self.getParentCombo().getValue();\n      if (valueControl && valueControl.id) {\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\n      }\n    }\n\n    return self.renderCombo(params);\n  },\n\n  /*\r\n     *   Renders the combo\r\n     */\n  renderCombo: function renderCombo(params) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.loadOnDemand) {\n      // Render the combo without data\n      var html = self.renderComboTemplate();\n      return html;\n    } else {\n\n      // Set data promise \n      var defer = new $.Deferred();\n      var dataPromise = self.getData(params);\n\n      // Attach callback \n      $.when(dataPromise).done(function (data) {\n        // Render combo\n        var html = self.renderComboTemplate(data);\n        self.properties.data = data;\n        defer.resolve(html);\n\n      }).fail(function (data) {\n        var html = self.renderComboTemplate({});\n        defer.resolve(html);\n      });\n\n      // Returns a promise so we can hold post-render method until this is done\n      return defer.promise();\n    }\n  },\n\n  renderComboTemplate: function renderComboTemplate(data) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\n    var value = properties.value ? \"\" : emptyValue;\n    data = data || self.properties.data || {};\n\n    if (self.properties.type === \"columnCombo\" && value === \"\" && _typeof(properties.value) === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\n      value = self.getResource(\"render-combo-empty-selection\");\n    }\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: data,\n      align: properties.valueAlign,\n      value: value,\n      editable: properties.editable }));\n\n\n\n    return html;\n  },\n\n\n  /*\r\n     *   Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    self._super();\n    var item = self.getValue();\n    var control = self.getControl();\n\n    if (self.control && self.control.parent()) {\n      self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\n    }\n    if (item) {\n\n      if (item.value != null && typeof item.value === \"boolean\") {\n        if (bizagi.util.parseBoolean(item.value) === true) {\n          item.value = this.getResource(\"render-boolean-yes\");\n\n        } else if (bizagi.util.parseBoolean(item.value) == false) {\n          item.value = this.getResource(\"render-boolean-no\");\n        }\n      }\n\n      // Returns the cached value from the properties to avoid server side fetching\n      if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\n        control.text(\"\");\n      } else {\n        control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\n      }\n    } else {\n      // Render empty \n      control.text(\"\");\n    }\n  },\n\n  /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  },\n\n  /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showEmpty: function showEmpty() {\n    return true;\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    return true;\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var mode = self.getMode();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode !== \"execution\") return self.getDummyData();\n\n    if (properties.hasLocalData || isOfflineForm) {\n\n      // Resolve with local data    \n      defer.resolve(properties.data);\n\n    } else {\n      var renderType = bizagi.util.normalizeType(properties.type);\n\n      // Check if the data has been cached\n      if (properties.remoteDataLoaded && !/^cascadingcombo$/i.test(renderType)) {\n        defer.resolve(properties.data);\n      } else {\n        // Go to server\n        self.dataService.multiaction().getData({\n          url: properties.dataUrl,\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache,\n          extra: params,\n          contexttype: self.properties.contexttype || null }).\n        done(function (data) {\n\n          // Resolve the data\n          if (!properties.recalculate) {\n            properties.remoteDataLoaded = true;\n          }\n          properties.data = self.complementData(data);\n          defer.resolve(properties.data);\n\n        }).fail(function (data) {\n\n          var allowActions = true;\n          var form = self.getFormContainer();\n\n          if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\")\n          allowActions = form.allowOnlineActions();\n\n          if (data.type === \"not-processed\" && allowActions)\n          return;\n\n          // Show error from server\n          var msgObj = self.properties.displayName + \": \";\n\n          if (typeof data === \"string\") {\n            var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\n          } else {\n            var auxMsg = data;\n          }\n\n          msgObj += auxMsg.message;\n\n          form.addValidationMessage(msgObj);\n\n          defer.reject(data);\n        });\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      properties.data = [];\n      properties.data = self.complementData(properties.data);\n\n      // Add another data\n      properties.data.push({ id: \"\", value: \"Item 1\" });\n      properties.data.push({ id: \"\", value: \"Item 2\" });\n\n      return properties.data;\n    }\n  },\n\n  /*\r\n     *   Resets the data in order to fetch it again when needed\r\n     */\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = null;\n    properties.remoteDataLoaded = false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n\n    if (self.combo && self.combo.length > 0) {\n      // When there is a combo painted, we fetch the selected value from it\n      return self.getSelectedValue();\n    } else {\n      var displayValue = \"\";\n      var item = self.getValue();\n\n      if (item) {\n        // Check on cached propert from server first if the key exists\n        displayValue = self.formatItem(item.value);\n      }\n\n      return displayValue;\n    }\n  },\n\n\n  /*\r\n     *   Returns the selected value in the template\r\n     */\n  getSelectedValue: function getSelectedValue() {\n  },\n\n  /*\r\n     *   Adds custom parameters to process the template\r\n     */\n  getTemplateParams: function getTemplateParams() {\n    return {};\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n\n    if (value !== undefined && value !== null) {\n      if ($.isArray(value)) {\n\n        for (var i = 0, length = value.length; i < length; i++) {\n          if (value[i] != null && typeof value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value[i]) === true) {\n              value[i] = this.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value[i]) === false) {\n              value[i] = this.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n        return value.join(\" - \");\n      } else {\n        return value;\n      }\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos        \n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) === \"object\" && (value.id === undefined || value.id === \"\")) {\n          renderValues[properties.xpath] = \"\";\n        } else {\n          // Add the value to the server\n          renderValues[properties.xpath] = typeof value.id !== \"undefined\" ? value.id : \"\";\n        }\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var currentValue = self.getValue();\n    var originalValue = properties.originalValue;\n    var defaultValue = properties.defaultValue;\n\n    var result = true;\n\n    if ($.forceCollectData) {\n      return result;\n    }\n\n    currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\n    originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\n    defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\n\n    currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\n    originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\n    defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\n\n    if (defaultValue !== undefined) {\n      if (defaultValue != originalValue || defaultValue != currentValue) {\n        result = true;\n      } else {\n        result = false;\n      }\n    } else {\n      result = currentValue != originalValue ? true : false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     * Parses additional values info in order to format them correctly\r\n     */\n  parseAdditionalValues: function parseAdditionalValues(data) {\n    var self = this;\n\n    return $.map(data, function (item) {\n      var value = item.value ? self.formatItem(item.value) : item;\n      var newItem = { id: item.id, value: value };\n\n      if (item.hidden) newItem.hidden = true;\n      return item;\n    });\n  },\n\n  /*\r\n     *   Complement data from server before control implementation\r\n     */\n  complementData: function complementData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var bCurrentDataFound = false;\n    $.each(data, function (i, item) {\n\n      if (item.value !== undefined && item.value !== null) {\n        item.value = self.formatItem(item.value);\n        if (properties.value) {\n          if (item.id == properties.value.id) {\n            bCurrentDataFound = true;\n          }\n        }\n      } else {\n        item.value = \"\";\n      }\n    });\n\n    // Add empty node if configured\n    if (self.showEmpty()) {\n      var emptyFound = false;\n      for (var i = 0, length = data.length; i < length; i++) {\n        if (data[i].id === \"\") {\n          emptyFound = true;\n          break;\n        }\n      }\n\n      if (!emptyFound) {\n        var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\");\n        data.unshift({ id: \"\", value: dataValue });\n      }\n    }\n\n    if (properties.value) {\n      if (!bCurrentDataFound && self.showCurrentData()) {\n        data.unshift({ id: properties.value.id, value: properties.value.value, hidden: true });\n      }\n    }\n\n    // Add additional value\n    return self.parseAdditionalValues(data);\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n    var currentValue = self.getValue();\n\n    if (bizagi.util.isEmpty(currentValue)) return false;\n    if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\n\n    // Else\n    return true;\n  },\n\n  /*\r\n     * Cleans current data\r\n     */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    this.column && !this.column.comboData && this.getData();\n  },\n\n  isExtraItem: function isExtraItem() {\n    var self = this;\n    var data = self.value || {};\n    var value = data.value || \"\";\n\n    return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\n  },\n\n  escapeValue: function escapeValue(value) {\n    if (bizagi.util.isString(value)) {\n      var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n      return valueToReturn;\n    } else {\n      return value;\n    }\n  },\n\n  /**\r\n      *  Maps the value, when this one comes from actions\r\n      * @param value\r\n      * @returns {*}\r\n      */\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  validateValue: function validateValue(value) {\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id\r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Render Date Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for date renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.date\", {}, {\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n    var ud = bizagi.util.dateFormatter;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/gi) === -1) {\n        properties.fullFormat = properties.fullFormat + \" \" + properties.timeFormat;\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = ud.getDateFromInvariant(properties.value, properties.showTime);\n      // Format date to current format\n      if (date != 0) {\n        // Value must always hold the value with invariant format\n        self.value = properties.value;\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else {\n        self.value = null;\n      }\n    }\n\n    // Fix dateFormat for datepicker\n    dateFormat = self.getDateFormat(properties.fullFormat);\n\n    var indexDateTimeSeparation = properties.fullFormat.substring(0, properties.fullFormat.indexOf(\":\")).lastIndexOf(\" \");\n    if (!properties.showTime)\n    properties.fullFormat =\n    indexDateTimeSeparation > 0 ? properties.fullFormat.substring(0, indexDateTimeSeparation) : properties.fullFormat;\n\n    properties.datePickerFormat = dateFormat.datePickerFormat;\n    properties.timePickerFormat = dateFormat.timePickerFormat;\n\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"date\");\n    var fullFormat = properties.fullFormat;\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      showTime: properties.showTime,\n      value: properties.value,\n      editable: properties.editable,\n      dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? fullFormat.toUpperCase() : fullFormat,\n      rtl: properties.orientation == \"rtl\" });\n\n    return html;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers(intHandler, isNow) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set control references\n    var dateControl = self.getDateControl();\n    var timeControl = self.getTimeControl();\n\n    // Attach change event\n    dateControl.bind(\"change\", function () {\n      self.onChangeHandler();\n    });\n\n    if (properties.showTime) {\n      timeControl.bind(\"change\", function (e, isNow) {\n        if (self.updatingTime) {\n          delete self.updatingTime;\n          return;\n        }\n        self.onChangeHandler(isNow);\n      });\n    }\n  },\n\n  /*\r\n      *   Formats the date time value to the hidden control\r\n      */\n  onChangeHandler: function onChangeHandler() {\n  },\n\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    if (!properties.displayValue && value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n    } else {\n      displayValue = \"\";\n    }\n\n    // We can return the display value isntance\n    return properties.displayValue || displayValue || \"\";\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath)) {\n        if (!bizagi.util.isEmpty(value)) {\n          // Formats the value in full invariant (with time) in order to send to the server\n          var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\n          if (typeof date != \"undefined\")\n          if (date !== 0) {\n            if (!properties.showTime) {\n              date.setHours(0, 0, 0, 0);\n            }\n            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\n          }\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    }\n  },\n\n  /*\r\n      *   Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n  },\n\n  /*\r\n      *   Gets the time control\r\n      */\n  getTimeControl: function getTimeControl() {\n  },\n\n  /*\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable) === true) {\n        value = self.getNormalizeDate(bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime));\n        var message;\n\n        // Check that we have a valid data\n        if (value != 0) {\n          // Check min value\n          if (properties.minValue && (typeof properties.minValue === \"string\" || typeof properties.minValue == \"number\")) {\n            var minValue = self.getNormalizeDate(\n            typeof properties.minValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) :\n            new Date(properties.minValue));\n\n\n            if (value < minValue) {\n              message = this.getResource(\"render-date-minimum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n\n          // Check max value\n          if (properties.maxValue && (typeof properties.maxValue == \"string\" || typeof properties.maxValue == \"number\")) {\n            var maxValue = self.getNormalizeDate(\n            typeof properties.maxValue == \"string\" ?\n            bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) :\n            new Date(properties.maxValue));\n\n\n            if (value > maxValue) {\n              message = this.getResource(\"render-date-maximum-validation\").\n              replaceAll(\"#label#\", properties.displayName).\n              replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\n              invalidElements.push({\n                xpath: properties.xpath,\n                message: message });\n\n              bValid = false;\n            }\n          }\n        }\n      }\n    }\n    return bValid;\n  },\n\n  /**\r\n      * Translate standar date format to jquery date picker\r\n      * @property {string} format Control's date format\r\n      * @returns {JSON object} A JSON Object whith the date and time format\r\n      */\n  getDateFormat: function getDateFormat(format) {\n    var datePickerFormat = format;\n    var timePickerFormat = undefined;\n    var init;\n\n    if (format.search(\"h\") != -1 || format.search(\"H\") != -1) {\n      if (format.search(\"h\") != -1) {\n        init = format.search(\"h\");\n      } else {\n        init = format.search(\"H\");\n      }\n\n      datePickerFormat = format.substring(0, init - 1);\n      timePickerFormat = format.substr(init);\n    }\n\n    // Fix month\n    if (datePickerFormat.indexOf(\"MMMM\") >= 0) {\n      datePickerFormat = datePickerFormat.replaceAll(\"MMMM\", \"MM\");\n    } else if (datePickerFormat.indexOf(\"MMM\") >= 0) {\n      // Month name short\n      datePickerFormat = datePickerFormat.replaceAll(\"MMM\", \"M\");\n    } else if (datePickerFormat.indexOf(\"MM\") >= 0) {\n      // Month two digits\n      datePickerFormat = datePickerFormat.replaceAll(\"MM\", \"mm\");\n    } else if (datePickerFormat.indexOf(\"M\") >= 0) {\n      // Month one digits\n      datePickerFormat = datePickerFormat.replaceAll(\"M\", \"m\");\n    }\n\n    // Fix years\n    if (datePickerFormat.search(\"yyyy\") != -1) {\n      datePickerFormat = datePickerFormat.replaceAll(\"yyyy\", \"yy\");\n    } else {\n      if (datePickerFormat.search(\"yy\") != -1) {\n        datePickerFormat = datePickerFormat.replaceAll(\"yy\", \"y\");\n      }\n    }\n\n    datePickerFormat = datePickerFormat.replaceAll(\"dddd\", \"DD\"); // Fix days\n\n    return {\n      datePickerFormat: datePickerFormat,\n      timePickerFormat: timePickerFormat };\n\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    this._super();\n    if (typeof properties.maxValue == \"undefined\")\n    properties.maxValue = \"12/31/\" + parseInt(new Date().getFullYear() + 200).toString() + \" 00:00:00\"; //Current year + 200 IE or 9999\n    if (typeof properties.minValue == \"undefined\")\n    properties.minValue = \"01/01/\" + parseInt(new Date().getFullYear() - 200).toString() + \" 00:00:00\"; //Current year - 200 IE or 1753 for SQL Server compat\n  },\n\n  /**\r\n      * Sets milliseconds to 0 in date\r\n      * @param {Date} date date to be treated\r\n      * @returns {Date} date converted with milliseconds 0\r\n      */\n  getNormalizeDate: function getNormalizeDate(date) {\n    var self = this;\n    if (date != 0 && date != null) {\n      if (!self.properties.showTime) {\n        date.setHours(0, 0, 0, 0);\n      } else date.setMilliseconds(0);\n    }\n    return date;\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      */\n  getTimeFormat: function getTimeFormat(format) {\n    return format.replaceAll(\"m\", \"i\").replaceAll(\"tt\", \"A\");\n  },\n\n  /**\r\n      * Sets value to the control\r\n      * @param {Date} date date to asign\r\n      * @returns {}\r\n      */\n  setValueFromCalendarButtons: function setValueFromCalendarButtons(date) {\n    var self = this;\n    if (date) date = self.getNormalizeDate(date);else\n    {\n      value = null;\n      self.setValue(\"\");\n      self.setDisplayValue(\"\");\n    }\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var ud = bizagi.util.dateFormatter;\n\n    // Set value in control\n    if (value && properties.editable) {\n      if (typeof value === \"number\") {\n        value = ud.formatInvariant(self.getNormalizeDate(new Date(value)), properties.showTime); // Set as invariant\n      } else {\n        value = self.getNormalizeDate(_typeof(value) === \"object\" ? value : ud.getDateFromInvariant(value, properties.showTime));\n        value = ud.formatInvariant(value);\n      }\n      properties.maxValue = value;\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Text Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for text renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\n\n  /**\r\n                                                       * Update or init the element data\r\n                                                       * @param {} data\r\n                                                       */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Check if offline forms is supported\n    this.isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n    this.hasMaxLines = this.properties.maxLines ? true : false;\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Fill default properties\n    properties.maxLines = this.properties.maxLines || 6;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\n\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"extendedText\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    self._super();\n\n    var control = self.getControl();\n    self.textarea = control.find(\"textarea\");\n\n    // If is textarea, then enable resize element.\n    if (self.textarea) {\n      self.textarea.css({ resize: \"both\" });\n    } else {\n      self.textarea.css({ resize: \"none\" });\n    }\n\n    // Attach event for retype double\n    if (self.properties.retype === \"double\")\n    self.attachRetypeDouble();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Set the default maxlength for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength)\n    self.textarea.prop('maxlength', properties.maxLength);\n\n    if (properties.maxLines) {\n      self.textarea.prop('rows', properties.maxLines);\n    } else {\n      self.textarea.prop('rows', 6);\n    }\n\n    // Attach change event\n    self.textarea.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.textarea.val());\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.textarea.val(), true);\n        } else {\n          // Set error message\n          var message = validationMessages[0].message;\n          bizagi.showMessageBox(message, \"Bizagi\", \"error\");\n        }\n      }\n    });\n\n    // Attach blur event\n    self.textarea.bind(\"blur\", function () {\n      // Updates internal value\n      self.setValue(self.textarea.val());\n    });\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\n\n    // Offline capability\n    if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\n      value = value && _typeof(value) === \"object\" && value.value ? value.value : value;\n    }\n\n    // Check regular expression\n    if (properties.regularExpression) {\n      if (properties.editable) {\n        if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)) && self.properties && self.properties.xpath === \"userName\")) {\n          message = properties.regularExpression.message;\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        } else {\n          if (value && (value.match(regEx) || !value.match(new RegExp(properties.regularExpression.expression)))) {\n            message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    } else {\n      if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n        if (properties.editable) {\n          message = this.getResource(\"render-text-regular-expression-default-message\");\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (self.properties.editable == false) {\n      // Render as simple value\n      if (typeof value == \"string\") {\n\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(valueToDisplay);\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {\n    // Call base\n    this._super(renderValues);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * More information SUITE-9407\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value) {\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    this._super(decodedValue);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Int} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Grid Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for grids\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\n\n  /*\r\n                                               *   Update or init the element data\r\n                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n    self.originalProperties = bizagi.clone(data.properties);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    self.initProperties();\n\n    // Set columns\n    var areThereEditableColumns;\n    var areThereTotalizedColumns;\n    self.columns = [];\n    self.columnsIds = [];\n    self.enabledChecks = {};\n    self.exclusiveChanges = {};\n    self.originalEnabledChecks = [];\n    $.each(data.elements, function (i, column) {\n      var columnProperties = column.render.properties;\n\n      // the groupby property is taken of column\n      if (columnProperties.groupBy) {\n        properties.groupBy = columnProperties.xpath || \"\";\n        properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\n      }\n\n      if (/columnBoolean/i.test(columnProperties.type) && columnProperties.isExclusive) {\n        properties.hasExclusiveCheck = true;\n        column.render.properties.required = false;\n        self.enabledChecks[columnProperties.xpath] = [];\n      }\n\n      // If inlineEdit is false then all columns must be read only\n      if (!self.properties.inlineEdit) {\n        column.render.properties.editable = false;\n      }\n\n      // Create renderColumns\n      var columnRender = self.renderFactory.getColumn({\n        type: columnProperties.type,\n        data: column.render,\n        parent: self,\n        singleInstance: properties.singleInstance });\n\n\n      self.columns.push(columnRender);\n      self.columnsIds.push(column.render.properties.id);\n\n      if (columnProperties.editable) {\n        areThereEditableColumns = true;\n      }\n\n      if (columnProperties.totalize && columnProperties.totalize.operation) {\n        areThereTotalizedColumns = true;\n\n        // Default summary format\n        columnProperties.totalize.format = columnProperties.totalize.format || {};\n        columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\n      }\n    });\n\n    // Reverse columns when using right to left orientation\n    if (properties.orientation === \"rtl\")\n    self.columns = self.columns.reverse();\n\n    // Turn off inline edit if there are any editable columns        \n    if (properties.inlineEdit && !areThereEditableColumns) {\n      properties.inlineEdit = false;\n      properties.allowEdit = false;\n    }\n\n    // Check if the grid has totalizers\n    if (areThereTotalizedColumns) {\n      properties.showSummary = true;\n      properties.rowsPerPage = 0;\n    }\n  },\n\n  initProperties: function initProperties() {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    /** Edit properties\r\n                                       * @default editable true\r\n                                       * @default  allowAdd true\r\n                                       */\n    $.extend(properties, self.initEditabilityProperties(\n    properties.editable,\n    properties.allowEdit,\n    properties.inlineEdit,\n    properties.withEditForm),\n    self.initAddAndDeleteProperties(\n    properties.editable,\n    properties.allowAdd,\n    properties.inlineAdd,\n    properties.allowDelete));\n\n\n    /* Define details properties*/\n    properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.isSortable = bizagi.util.parseBoolean(properties.isSortable) != null ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    /* Define general properties */\n    properties.keyColumn = \"\";\n    properties.data = properties.data || null;\n    properties.displayType = \"value\";\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\n    properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\n    properties.allowGrouping = false;\n    properties.groupBy = \"\";\n    properties.groupSummary = properties.groupSummary || null;\n    properties.groupText = this.getResource(\"render-grid-group-text\");\n    properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\n    properties.groupOrder = properties.groupOrder || \"asc\";\n    properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\n    properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\n\n    properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\n    properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? properties.sortOrder === \"True\" ? \"asc\" : \"desc\" : properties.data && properties.data.order ? properties.data.order : \"asc\";\n    properties.sort = properties.sortBy + \" \" + properties.sortOrder;\n\n    properties.rowsPerPage = properties.allowGrouping ? 1000 : properties.rowsPerPage || 20;\n    properties.page = 1;\n    properties.records = 0;\n    properties.totalPages = 0;\n\n    properties.addLabel = properties.addLabel || $.trim(this.getResource(\"render-grid-add-label\")) + \" \" + properties.displayName;\n    properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\n    properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\n    properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\n    properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\n\n    // Apply style to entire table\n    properties.tableCssClass = properties.cssClass || \"\";\n\n    properties.alreadySaved = false;\n\n    // When grid open in modal window and the parent is entity\n    if (properties.contexttype != \"entity\") {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Define if it is editable or not        \n    /* This part change all cells in the table to no editable,\r\n     * you must use it when the parent container has noeditable property,\r\n     * so this table is noeditable too.\r\n     */\n    try {\n      if (self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable || !properties.editable) {\n        properties.editable = false;\n        properties.allowEdit = false;\n        properties.inlineEdit = false;\n        properties.allowAdd = false;\n        properties.inlineAdd = false;\n        properties.allowDelete = false;\n      }\n    } catch (e) {\n    }\n\n    // If grid has not allowEdit property in true, all fields within the grid\n    // must be no editables, so these lines changes this behavior\n    if (!properties.allowEdit || !properties.inlineEdit && !properties.withEditForm) {\n      properties.editable = false;\n    }\n\n    // Calculate render width\n    properties.labelWidth = 0;\n    properties.valueWidth = \"100%\";\n\n    // This property will be used to make custom grids with another data source\n    properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\n    //this property use to create a single decorated or a array of decorated\n    properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\n\n    // Check if the grid its opened whitin dialog form and has contextType\n    properties.contextType = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : null;\n\n    // Create a collection to collect changes\n    self.changes = {};\n\n    // Create a collection to override properties per cell\n    self.cellOverrides = {};\n\n    // Check orientation and change order of data if its necesary (rtl)\n    if (self.isRTL() && properties.data != null) {\n      properties.data.rows = self.changeOrderData(properties.data.rows);\n    }\n  },\n\n  initEditabilityProperties: function initEditabilityProperties(editable, allowEdit, inlineEdit, withEditForm) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowEdit = bizagi.util.parseBoolean(allowEdit) !== null ? bizagi.util.parseBoolean(allowEdit) : true;\n    inlineEdit = bizagi.util.parseBoolean(inlineEdit) !== null ? bizagi.util.parseBoolean(inlineEdit) : true;\n    withEditForm = bizagi.util.parseBoolean(withEditForm) !== null ? bizagi.util.parseBoolean(withEditForm) : false;\n\n    if (!editable) {\n      allowEdit = inlineEdit = withEditForm = false;\n    }\n\n    return {\n      editable: editable,\n      allowEdit: allowEdit,\n      inlineEdit: inlineEdit,\n      withEditForm: withEditForm };\n\n  },\n\n  initAddAndDeleteProperties: function initAddAndDeleteProperties(editable, allowAdd, inlineAdd, allowDelete) {\n    // Set default values\n    editable = bizagi.util.parseBoolean(editable) !== null ? bizagi.util.parseBoolean(editable) : true;\n    allowAdd = bizagi.util.parseBoolean(allowAdd) != null ? bizagi.util.parseBoolean(allowAdd) : true;\n    inlineAdd = bizagi.util.parseBoolean(inlineAdd) != null ? bizagi.util.parseBoolean(inlineAdd) : true;\n    // Define Delete \n    allowDelete = bizagi.util.parseBoolean(allowDelete) != null ? bizagi.util.parseBoolean(allowDelete) : true;\n\n    if (!allowAdd) {\n      inlineAdd = false;\n    }\n\n    if (!editable) {\n      allowAdd = inlineAdd = allowDelete = false;\n    }\n\n    return {\n      allowAdd: allowAdd,\n      inlineAdd: inlineAdd,\n      allowDelete: allowDelete };\n\n  },\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    return this.properties.data && this.properties.data.rows.length > 0;\n  },\n\n  isRTL: function isRTL() {\n    var properties = this.properties;\n    if (!properties) return true;\n    return typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\" ? true : false;\n  },\n\n  changeOrderData: function changeOrderData(data) {\n    var reverseDataRows = [];\n    var rows = data || [];\n    var rowKey;\n\n    $.each(rows, function (key, value) {\n      // Extract row key\n      rowKey = value.shift();\n      reverseDataRows = value.reverse();\n      // add element in the start\n      reverseDataRows.unshift(rowKey);\n\n      rows[key] = reverseDataRows;\n    });\n\n    return rows;\n  },\n\n  /**\r\n      * Specific fix RTL with localizated\r\n      * @param data\r\n      * @returns {*|Array}\r\n      */\n  removeRemainingColumns: function removeRemainingColumns(data, numColumns) {\n    var rows = data || [];\n    var remainingColumns = 0;\n    if (rows.length > 0) {\n      // \"- 1\" because the first column represent id row\n      remainingColumns = rows[0].length - numColumns - 1;\n    }\n    if (remainingColumns > 0) {\n      $.each(rows, function (key, value) {\n        // Remove remaining columns\n        for (var i = 0; i < remainingColumns; i++) {\n          value.pop();\n        }\n      });\n    }\n    return rows;\n  },\n\n  /* \r\n      *   Gets a column definition by xpath\r\n      */\n  getColumn: function getColumn(xpath) {\n    var self = this;\n    var result = null;\n    $.each(self.columns, function (i, column) {\n      if (\n      column.properties.xpath == xpath ||\n      column.properties.id == xpath ||\n      column.properties.xpath + \".\" + column.properties.id == xpath)\n      {\n        result = column;\n      }\n    });\n\n    return result;\n  },\n\n  getColumnType: function getColumnType(id) {\n    var self = this;\n    var columnIndex = self.columnsIds.indexOf(id);\n\n    if (columnIndex != -1) {\n      return self.columns[columnIndex].properties.type;\n    }\n\n    return null;\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var defer = new $.Deferred();\n\n    // Set dummy data when not in execution mode\n    var mode = self.getMode();\n    if (mode !== \"execution\") {\n      properties.data = self.getDummyData();\n    }\n\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n\n    // Initialize columns\n    var columnInitializers = [];\n    $.each(self.columns, function (i, column) {\n\n      // Add to column initializer array so we can synch out the promises\n      var result = column.initialize();\n      if (result)\n      columnInitializers.push(result);\n    });\n\n    // Resolve when all columns has been loaded\n    $.when.apply($, columnInitializers).done(function () {\n      defer.resolve(html);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    this._super();\n\n    // Make control to behave as a block container\n    // TODO: Move to instances. This does not apply to mobiles\n    control.addClass(\"ui-bizagi-render-grid-container\").\n    addClass(\"ui-bizagi-render-display-block\");\n  },\n\n  /*\r\n      *   Returns the grid template to be used\r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid\");\n  },\n\n  /*\r\n      *   Applies the template to the render and returns the resolved element\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this,\n    properties = self.properties;\n    orientation = self.properties.orientation;\n\n    return $.fasttmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      allowAdd: properties.allowAdd,\n      addLabel: properties.addLabel });\n\n  },\n  /*\r\n      *   Method to render non editable values\r\n      *   Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Override read-only presets\n    //  properties.allowAdd = false;\n    // Render the same, just change some presets\n    return self.renderControl();\n  },\n  /*\r\n      *   Fetch the data into a deferred\r\n      */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sortBy,\n      order: properties.sortType,\n      page: properties.page,\n      rows: properties.rowsPerPage,\n      searchFilter: properties.searchFilter,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      return properties.overrideGetRemoteData(params);\n    } else {\n      // Resolve with remote data\n      return self.dataService.multiaction().getGridData(params).then(function (data) {\n        self.originalProperties = self.originalProperties || {};\n        self.originalProperties.data = bizagi.clone(data);\n\n        // Resolve with fetched data\n        properties.page = data.page;\n        properties.records = data.records;\n        properties.totalPages = data.totalPages;\n\n        return data;\n      }).fail(function (error) {\n        console.error(error.message || \"Error\");\n      });\n    }\n  },\n  /*\r\n      insert a blank item in the selected column in the data matrix\r\n      */\n  spliceRowData: function spliceRowData(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.rows) {\n      $.each(data.rows, function (key, value) {\n        var spliceIndex = index || data.rows[key].length;\n        data.rows[key].splice(spliceIndex, 0, \"\");\n      });\n    }\n  },\n\n  spliceRowDataVisible: function spliceRowDataVisible(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.visible) {\n      $.each(data.visible, function (key, value) {\n        var spliceIndex = index || data.visible[key].length;\n        data.visible[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  spliceRowDataEditable: function spliceRowDataEditable(data, index) {\n    var self = this;\n    var mode = self.getMode();\n    if (mode === \"execution\" && data && data.editable) {\n      $.each(data.editable, function (key, value) {\n        var spliceIndex = index || data.editable[key].length;\n        data.editable[key].splice(spliceIndex, 0, true);\n      });\n    }\n  },\n\n  /*\r\n      *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n      */\n  getDummyData: function getDummyData() {\n    var self = this;\n    var properties = self.properties;\n    if (properties.data) {\n      return properties.data;\n\n    } else {\n      var rowTemplate = [\"1\"];\n\n      // Add a value for each column\n      for (var i = 0; i < self.columns.length; i++) {\n        rowTemplate.push(\"\");\n      }\n\n      var data = {\n        \"page\": 1,\n        \"total\": 1,\n        \"records\": 1,\n        \"rows\": [rowTemplate] };\n\n\n      return data;\n    }\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType });\n\n  },\n  /*\r\n      *   Submits a grid edit record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this,\n    properties = self.properties;\n\n    // Check if there are deferreds to wait\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\n\n    return $.when(deferredsToWait).pipe(function () {\n      self.startLoading();\n      return self.dataService.saveGridRecord({\n        url: properties.saveUrl,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: xpathContext,\n        submitData: data,\n        contexttype: properties.contextType,\n        disableServerGridValidations: data.disableServerGridValidations || false }).\n      pipe(function (dataResp) {\n        self.endLoading();\n        return dataResp;\n      }).fail(function (dataFail) {\n        var form = self.getFormContainer();\n        var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n        //Convert String to object\n        if (typeof message == \"string\") {\n          try {\n            message = JSON.parse(message).message;\n          } catch (e) {\n            message = message.match(/\"message\":(.*)\",/)[0];\n            message = message.substr(11, message.length - 13);\n          }\n\n        } else if (!message.message) {\n          message = dataFail;\n        }\n        form.validateForm();\n        form.clearValidationMessages();\n        form.addValidationMessage(message);\n      });\n    });\n  },\n  /*\r\n      *   Submits a grid delete record request for the given id\r\n      *   Returns a deferred\r\n      */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this,\n    properties = self.properties;\n\n    var xpath = properties.xpath + self.buildCellXpathFilter(id);\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n  /*\r\n      *   Submits a grid add record request\r\n      *   Returns a deferred when done, the server returns an id for the new record\r\n      */\n  submitAddRequest: function submitAddRequest() {\n    var self = this,\n    properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n  /*\r\n      *   Submits a grid rollback request\r\n      *   Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this,\n    properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: params ? params.idPageCache : properties.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /**\r\n      * Collect a single cell change made in the grid to send the data when the user saves the form\r\n      * @param params\r\n      */\n  collectGridChange: function collectGridChange(params) {\n    var self = this;\n    params = params || {};\n    var id = params.id;\n    var dataType = params.dataType;\n    var xpath = params.xpath;\n    var value = params.value;\n    var trigger = typeof params.trigger !== \"undefined\" ? params.trigger : true;\n    var isPressed = params.pressed || false;\n    var renderType = dataType && bizagi.util.normalizeType(dataType);\n\n    self.changes[id] = self.changes[id] || {};\n\n    if (/^columnsearch$/i.test(renderType) && value && typeof value.id !== \"undefined\") {\n      self.changes[id][xpath] = value.id;\n    } else {\n      self.changes[id][xpath] = value;\n    }\n\n    if (trigger) {\n      self.triggerRenderChange({ key: id, column: xpath, pressed: isPressed });\n    }\n  },\n  /*\r\n      *   Configures a column to perform a submit on change when the user changes a cell\r\n      */\n  configureColumnSubmitOnChange: function configureColumnSubmitOnChange(xpath) {\n    var self = this;\n    var properties = self.properties;\n\n    // Build action\n    var action = {\n      commands: [{\n        xpath: properties.xpath,\n        command: 'submit-value',\n        argument: 'all' }],\n\n      conditions: {\n        operator: 'and',\n        expressions: [\n        {\n          simple: {\n            operator: 'cell-change',\n            xpath: properties.xpath + '[].' + xpath,\n            argumentType: 'text',\n            argument: xpath } }] },\n\n\n\n\n      dependencies: [properties.xpath] };\n\n\n    // Add action when form ends its rendering\n    $.when(self.ready()).\n    done(function () {\n      var form = self.getFormContainer();\n      form.addSubmitAction(xpath, action);\n    });\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n    var keysToDelete = [];\n\n    if (self.exclusiveChanges) {\n      //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          // If there are any change, its needed to include as a change the filter to set all rows in false\n          var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\n          renderValues[xpathExclusiveFilter] = false;\n        }\n      }\n    }\n\n    for (var id in self.changes) {\n      // Dont collect data from totalizers \n      if (id != \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) {\n            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\n            var value = self.changes[id][columnXpath];\n\n            renderValues[xpath] = value;\n          }\n        }\n      }\n\n      // Clean changes \n      keysToDelete.push(id);\n\n    }\n    //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\n        var columnExclusiveChanges = self.exclusiveChanges[xpath];\n        var columnEnabledChecks = self.enabledChecks[xpath];\n        if (columnExclusiveChanges && columnEnabledChecks) {\n          var checkedObject = self.exclusiveChanges[xpath];\n          if (checkedObject && checkedObject.value) {\n            var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;\n            renderValues[columnSimpleXpathEnabled] = checkedObject.value;\n          }\n        }\n      }\n    }\n\n    // Clean changes array in order to prevent duplicate data\n    // when execute SUBMITDATA in multiaction, that make and error\n    // in circular dependencies, specially when we add inline record\n    $.each(keysToDelete, function (key, v) {\n      delete self.changes[v];\n    });\n  },\n\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    if (!$.isEmptyObject(self.changes)) {\n      result.push(true);\n      return true;\n    } else {\n      if (!$.isEmptyObject(self.exclusiveChanges)) {\n        result.push(true);\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n\n  /*\r\n      *   Check if a column data can be sent to the server\r\n      */\n  canColumnBeSent: function canColumnBeSent(id, columnXpath) {\n    var self = this,i,j,xpath;\n    for (i in self.columns) {\n      if (self.columns.hasOwnProperty(i)) {\n        var column = self.columns[i];\n        if (column.properties.type !== \"columnUserfield\") {\n          if (column.properties.xpath == columnXpath) {\n            var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\n            return column.canBeSent(id, cellOverride);\n          }\n        } else {\n          for (j in column.properties) {\n            if (column.properties.hasOwnProperty(j)) {\n              if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\n                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\n                if (xpath === columnXpath) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n\n      }\n    }\n\n    return false;\n  },\n  /* \r\n      *  Method to determine if the render value can be sent to the server or not\r\n      */\n  canBeSent: function canBeSent() {\n    var self = this;\n    var properties = self.properties;\n    var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\n\n    // The render can be sent if it is \"display only\" and inline Edit is available\n    if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\n      return true;\n    }\n    return false;\n  },\n  /*\r\n      *   Return the value for a requested cell\r\n      */\n  getCellValue: function getCellValue(key, xpath) {\n    var self = this;\n    var data = self.properties.data.rows;\n    for (var i = 0; i < data.length; i++) {\n      if (data[i][0] == key) {\n        for (var j = 0; j < self.columns.length; j++) {\n          if (self.columns[j].properties.xpath == xpath) {\n            var result = data[i][j + 1];\n            return result;\n          }\n        }\n      }\n    }\n    return null;\n  },\n  /*\r\n      *\r\n      */\n  getCellCurrentValue: function getCellCurrentValue(key, xpath) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control && typeof control.getValue === \"function\") {\n      return control.getValue();\n    }\n    return null;\n  },\n  /*\r\n      *   Gets control\r\n      */\n  getControlCell: function getControlCell(key, xpath) {\n    var self = this;\n    var control = null;\n    if (typeof self.columns != \"undefined\")\n    for (var j = 0; j < self.columns.length; j++) {\n      if (\n      self.columns[j].properties.xpath == xpath ||\n      self.columns[j].properties.id == xpath ||\n      self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath)\n      {\n        control = self.columns[j].getDecorated(key);\n        break;\n      }\n    }\n\n\n    return control;\n  },\n\n  changeRequired: function changeRequired(argument) {\n    this.properties.required = argument;\n    this.changeRequiredLabel(argument);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel(argument) {\n    var control = this.getControl();\n\n    if (control.length > 0) {\n      if (this.getMode() !== \"execution\") {\n        if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      } else {\n        if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\n          control.addClass(\"grid-control-required\");\n        } else {\n          control.removeClass(\"grid-control-required\");\n        }\n      }\n    }\n\n    this.triggerRenderValidate();\n  },\n\n  /*\r\n      *   Fetch the data again and updates the content\r\n      */\n  refresh: function refresh() {\n  },\n  /*\r\n      *   Sets an error on the cell\r\n      */\n  setError: function setError(key, columnXpath) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n  },\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellRequired: function changeCellRequired(key, xpath, argument) {\n  },\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n  },\n  /*\r\n      *  Refresh behaviors of cell\r\n      */\n  changeCellProperties: function changeCellProperties(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n\n  },\n  /*\r\n      *  Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n\n  },\n\n  /*\r\n     *   Changes the editability for a column\r\n     */\n  changeColumnEditability: function changeColumnEditability(xpath, argument) {\n  },\n  /*\r\n      *   Changes the visibility for a column\r\n      */\n  changeColumnVisibility: function changeColumnVisibility(xpath, argument) {\n  },\n  /*\r\n      *   Changes the required for a column\r\n      */\n  changeColumnRequired: function changeColumnRequired(xpath, argument) {\n  },\n\n  /*\r\n      *  Clean data of cell\r\n      */\n  cleanCellData: function cleanCellData(key, xpath) {\n  },\n\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var control = self.getControl();\n\n    self.saveGrid().done(function () {\n      var tmpEditable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n      // Clears control\n      control.empty();\n\n      var originalProperties = self.originalProperties;\n\n      $.extend(self.properties, self.initEditabilityProperties(\n      tmpEditable,\n      originalProperties.allowEdit,\n      originalProperties.inlineEdit,\n      originalProperties.withEditForm),\n      self.initAddAndDeleteProperties(\n      tmpEditable,\n      originalProperties.allowAdd,\n      originalProperties.inlineAdd,\n      originalProperties.allowDelete));\n\n\n      self.properties.editabilityEnabled = self.properties.editabilityEnabled || self.properties.editable;\n\n      // argument because it is necessary to propagate the default value to the column controls\n      if (!tmpEditable) {\n        self.changeColumnsEditability(false);\n      } else if (self.properties.allowEdit && self.properties.inlineEdit) {\n        self.changeColumnsEditability(argument);\n      }\n\n      if (typeof self.internalRenderControl == \"function\") {\n        $.when(self.internalRenderControl()).done(function (html) {\n          control.append(html);\n          self.postRenderElement(self.element);\n        });\n      }\n    });\n\n  },\n\n  saveGrid: function saveGrid() {\n    var self = this;\n    var defer = $.Deferred();\n\n    var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\n\n    if (rows.length > 0) {\n      var newRows = $.map(rows, function (row, i) {\n        return $(row).data(\"business-key\");\n      });\n\n      self.saveInlineAddedRows(newRows).done(function () {\n        $.when(self.saveRows()).done(function () {\n          self.refresh();\n          defer.resolve();\n        });\n      });\n    } else {\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n\n  changeColumnsEditability: function changeColumnsEditability(value) {\n    var self = this;\n    var columns = self.columns || [];\n\n    $.each(columns, function (i, column) {\n      column.properties.editable = value == \"Default\" ? column.originalProperties.editable : bizagi.util.parseBoolean(value);\n    });\n  },\n\n  /**\r\n      *   Refresh behaviors of cell\r\n      */\n  refreshCell: function refreshCell(params) {\n    var self = this;\n    var properties = self.properties;\n    var key = params.key;\n    var column = params.column;\n    var xpathContext = params.xpathContext !== \"\" ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\n    var cell = self.getControlCell(key, params.column);\n    var form = self.getFormContainer();\n    var idForm = form.properties.id;\n\n    if (!cell) {\n      return;\n    }\n\n    // Execute personalized stuff before to refresh it\n    cell.beforeToRefresh();\n\n    // Call service\n    return $.when(self.dataService.multiaction().refreshGridCell({\n      idRender: properties.id,\n      column: cell.properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: xpathContext,\n      idForm: idForm,\n      typeRender: bizagi.util.normalizeType(cell.properties.type) })).\n    done(function (data) {\n      // Extract values\n      var getDepthData = function getDepthData(target) {\n        if (target && _typeof(target) == \"object\" && target.length >= 1) {\n          return target[0].length >= 1 ? target[0][0] : target[0];\n        }\n        return \"\";\n      };\n      var newValue = getDepthData(data.rows);\n      var editable = getDepthData(data.editable);\n      if (!bizagi.util.isBoolean(editable)) {\n        editable = editable || true;\n      }\n      var visible = getDepthData(data.visible);\n      if (!bizagi.util.isBoolean(visible)) {\n        visible = visible || true;\n      }\n\n      // Change Visibility & Editability\n      self.changeCellVisibility(key, column, visible);\n      self.changeCellEditability(key, column, editable);\n\n      // Change control value\n      cell.setValue(newValue);\n      cell.setDisplayValue(newValue);\n\n      // Trigger grid change\n      self.triggerRenderChange({ key: key, column: column, changed: false });\n\n      if (bizagi.override.restoreAppearanceAfterRefresh) {\n        cell.restoreCellAppearance();\n      }\n\n      // Update the affected cell manually after a refresh\n      //TODO:temporary solution\n      //review the DRAGON-5982 \n      if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\n        self.updateAffectedCellManually(key, newValue, cell.column.columnIndex);\n      }\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh({ action: \"refreshCell\" });\n    });\n  },\n\n  /*\r\n      *   Triggers the render change event\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n    // Property to verify exporting updated grids\n    if (!bizagi.util.isEmpty(params) && params.changed != false)\n    self.properties.canBeExported = false;\n    self.triggerHandler(\"renderchange\", {\n      render: self,\n      surrogateKey: params.key,\n      column: params.column,\n      changed: params.changed,\n      rowDeleted: params.rowDeleted,\n      pressed: params.pressed });\n\n  },\n\n  /*\r\n      *   Validate the grid\r\n      */\n  validate: function validate() {\n    this.isValid([]);\n  },\n  /* \r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var bValid = true;\n\n    // Clear error message\n    self.hasErrors = false;\n    self.setValidationMessage(\"\");\n\n    // Check for required columns and null values\n    if (self.properties.data && self.properties.data.rows) {\n      var newRows = self.getDataNewRows();\n      // Preserve elements in data.rows\n      // Check required\n      if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\n        if (!self.hasValue()) {\n          message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({\n            xpath: self.properties.xpath,\n            message: message });\n\n          bValid = false;\n        }\n      }\n\n      var data = $.merge($.merge([], self.properties.data.rows), newRows);\n\n      for (var i = 0; i < self.columns.length; i++) {\n        var messages = [];\n        var uniqueMessages = {};\n\n        for (var j = 0; j < data.length; j++) {\n          var value = data[j][i + 1];\n          var key = data[j][0];\n          var xpath = self.columns[i].properties.xpath;\n          if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\n            value = self.changes[key][self.columns[i].properties.xpath];\n          }\n\n          // Check if the column is valid\n          var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\n          if (!valueValid) {\n            bValid = false;\n\n            self.hasErrors = true;\n            self.setError(key, self.columns[i].properties.xpath);\n          }\n        }\n        for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\n          if (uniqueMessages[messages[k]] == null) {\n            uniqueMessages[messages[k]] = messages[k];\n          }\n        }\n\n        if (messages.length > 0) {\n          var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\n          for (key in uniqueMessages) {\n            invalidElements.push({\n              xpath: self.properties.xpath,\n              message: gridValidationMessage + \" \" + key });\n\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n  /*\r\n      *   Enables submit on change feature for the current render\r\n      */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \n  },\n  /*\r\n      *   Get cell override\r\n      */\n  getCellOverride: function getCellOverride(key, column) {\n    var self = this;\n\n    // Convert to numbers\n    column = Number(column);\n\n    // Find overrides\n    var columnProperties = self.columns[column].properties;\n    if (!self.cellOverrides[key])\n    self.cellOverrides[key] = {};\n    if (!self.cellOverrides[key][column]) {\n      self.cellOverrides[key][column] = {\n        visible: columnProperties.columnVisible && columnProperties.visible,\n        editable: columnProperties.editable,\n        required: columnProperties.required };\n\n    }\n\n    return self.cellOverrides[key][column];\n  },\n\n  /*\r\n      * Set cell overrides based on the data\r\n      */\n  setCellOverrides: function setCellOverrides(data, columns) {\n    var self = this;\n    var key;\n\n    // Init visibility overrides\n    if (data.visible) {\n      for (var i = 0, len = data.visible.length; i < len; i++) {\n        key = data.visible[i][0];\n        for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\n\n          // Skip key columns\n          if (j > 0) {\n            var columnVisible = self.getCellOverride(key, j - 1).visible;\n            self.cellOverrides[key][j - 1].visible = columnVisible ? bizagi.util.parseBoolean(data.visible[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init editability overrides\n    if (data.editable) {\n      for (var i = 0, len = data.editable.length; i < len; i++) {\n        key = data.editable[i][0];\n        for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0) {\n            var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\n            self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\n          }\n        }\n      }\n    }\n\n    // Init required overrides\n    if (data.required) {\n      for (var i = 0, len = data.required.length; i < len; i++) {\n        key = data.required[i][0];\n        for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\n          // Skip key columns\n          if (j > 0)\n          self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\n        }\n      }\n    }\n  },\n  /*\r\n      *   Returns the row indexes for the data\r\n      */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.properties.data.rows, self.getDataNewRows());\n    return $.map(data, function (item, i) {\n      return item[0];\n    });\n  },\n  /**\r\n      *  Return object with value of all new records unsaved within the grid\r\n      *  @return {object} all new records\r\n      */\n  getDataNewRows: function getDataNewRows() {\n    var self = this;\n    var newRows = [];\n\n    if (_typeof(self.newRecords) == \"object\" && !$.isEmptyObject(self.newRecords)) {\n      $.each(self.newRecords, function (rowKey) {\n        var cellValue = [];\n        cellValue.push(rowKey);\n        for (var i = 0, length = self.columns.length; i < length; i++) {\n          cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\n        }\n        // Add cell value row to new rows\n        newRows.push(cellValue);\n      });\n    }\n    return newRows;\n  },\n\n  /*\r\n      * Return the object with the required url to access the exported grid to the desired format\r\n      *  @return {object} render attributes, including id, xpathContext, idPagecache, disposition (inline or attachment), and exportType (XLS or PDF)\r\n      */\n  getGridExportUrl: function getGridExportUrl(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getGridExportUrl({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: params.disposition,\n      exportType: params.exportType,\n      sort: properties.sort,\n      sessionId: self.getSessionId(),\n      idForm: self.getFormContainer().properties.id });\n\n\n  },\n\n  submitForGridChange: function submitForGridChange() {\n    var self = this;\n    return self.submitOnChange(null, false);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutColumn = setTimeout(function () {\n      if (self.columns) {\n        $.each(self.columns, function (i, column) {\n          column.dispose();\n        });\n      }\n      clearTimeout(timeOutColumn);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  getEnabledChecks: function getEnabledChecks(params) {\n    var self = this;\n    var properties = self.properties;\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      rows: properties.rowsPerPage,\n      xpathfilter: params.xpath });\n\n    // Default ajax call\n    var defer = new $.Deferred();\n    // Resolve with remote data\n    self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\n      // Resolve with fetched data\n      properties.page = data.page;\n      properties.records = data.records;\n      properties.totalPages = data.totalPages;\n\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n      defer.resolve(data);\n    });\n    return defer.promise();\n  },\n\n  buildCellXpathFilter: function buildCellXpathFilter(key) {\n    if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\n    return \"[id='\" + key + \"']\";\n  },\n\n  cleanNewRecords: function cleanNewRecords() {\n    // Mark it as saved\n    this.newRecords = {};\n  },\n\n  /**\r\n      * Set inline added new row as saved, removing data new-row attribute\r\n      * @param key\r\n      */\n  setRowAsSaved: function setRowAsSaved(key) {\n    var $control = this.getControl();\n    var $row = $(\"[data-bizagi-component=rows]\", $control).\n    find(\"tr[data-business-key=\" + key + \"]\");\n\n    $row.attr(\"data-new-row\", 'false');\n  },\n\n  /**\r\n      *\r\n      * Customizes render background color\r\n      *\r\n      * This method is called when the backgroud color is setted by Form Designer\r\n      *\r\n      * @param color\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    this._super(color);\n\n    var control = this.getControl();\n\n    control.find(\".bz-rn-grid-header-title, .bz-rn-grid-header-title-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    control.find(\".bz-rn-grid-container-foother, .bz-rn-grid-container-foother-rtl\").\n    css(\"background-color\", color, \"!important\");\n\n    return this;\n  },\n\n  /**\r\n      * Check has header format\r\n      * @returns {boolean}\r\n      */\n  hasColorHeader: function hasColorHeader() {\n    var headerFormat = this.properties.headerFormat || {};\n\n    return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\n  },\n\n  /**\r\n      * Check if the orientation is RTL\r\n      * @param parent\r\n      * @param orientation\r\n      * @returns {*|boolean|boolean}\r\n      */\n  isRTLOrientation: function isRTLOrientation(parent, orientation) {\n    if ((!orientation || orientation === \"auto\") && parent) {\n      return this.isRTLOrientation(parent.parent, parent.properties.orientation);\n    }\n\n    return /^rtl$/i.test(orientation);\n  },\n\n  /**\r\n      * Check If has changes for send to server\r\n      * @returns {boolean}\r\n      */\n  canBeExport: function canBeExport() {\n    var self = this;\n\n    // Check If normal column-control has changes\n    for (var id in self.changes) {\n      // Don't collect data from totalizers\n      if (id !== \"summary\") {\n        for (var columnXpath in self.changes[id]) {\n          // Check if the render can submit data\n          if (self.canColumnBeSent(id, columnXpath)) return false;\n        }\n      }\n    }\n\n    // Check If exclusive-check control has changes\n    if (self.exclusiveChanges) {\n      for (var xpath in self.exclusiveChanges) {\n        // Brings the xpath columns with changes\n        if (self.exclusiveChanges[xpath] && self.enabledChecks[xpath]) return false;\n      }\n    }\n\n    // Don't have changes\n    return true;\n  },\n\n  /**\r\n      * Get exclusive-check change by Row\r\n      * @param idRow\r\n      * @returns {{}}\r\n      */\n  getExclusiveChangeByRow: function getExclusiveChangeByRow(idRow) {\n    var value = {};\n\n    for (var xpath in this.enabledChecks) {\n      if (this.enabledChecks.hasOwnProperty(xpath)) {\n        var obj = (this.enabledChecks[xpath] || []).\n        find(function (el) {\n          return el.id == idRow && el.changed;\n        });\n\n        if (obj) {\n          value[xpath] = obj.value;\n        }\n      }\n    }\n\n    return value;\n  },\n\n  /**\r\n      * Check If xpath or id of column is valid\r\n      * @param columnXpath\r\n      * @param columnId\r\n      * @param xpath\r\n      * @returns {boolean}\r\n      */\n  isCurrentGridCell: function isCurrentGridCell(columnXpath, columnId, xpath) {\n    return columnXpath === xpath || columnId === xpath || columnXpath + \".\" + columnId === xpath;\n  },\n\n  /**\r\n      * Get index for current cell\r\n      * @param xpath\r\n      * @returns {number|number}\r\n      */\n  getIndexForCurrentCell: function getIndexForCurrentCell(xpath) {\n    var self = this;\n\n    return (self.columns || []).findIndex(function (cell) {\n      return self.isCurrentGridCell(cell.properties.xpath, cell.properties.id, xpath);\n    }) || 0;\n  },\n\n  /**\r\n      * Check if it is a Summary o Global Form\r\n      * @returns {*|boolean}\r\n      */\n  isSummaryOrGlobalForm: function isSummaryOrGlobalForm() {\n    var form = this.getFormContainer();\n    var properties = form && form.properties || {};\n\n    return form && [\"SummaryForm\", \"GlobalForm\"].includes(properties.typeForm);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Label Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for labels\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.label\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // A label itself is never \"required\" as other controls\n    var properties = self.properties;\n    properties.required = false;\n\n    // Set properties\n    self.properties.displayType = \"label\";\n    //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\n    self.properties.displayName = data.properties.displayName || \"\";\n\n    if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\n      this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\n    }\n\n    self.bindingValue();\n\n    // Calculate layout properties\n    self.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    //this.changeLabelAlign(this.properties.labelAlign || \"left\");\n\n    if (typeof this.configureHelpText == \"function\")\n    this.configureHelpText();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    // Just apply display-type: label, align it to the left\n    this.changeDisplayOption(\"label\");\n    this.changeLabelAlign(this.properties.labelAlign || \"left\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required label\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  bindingValue: function bindingValue() {\n    var self = this;\n\n    if (self.properties.allowDinamiclabel && self.properties.value) {\n      if (_typeof(self.properties.value) === \"object\" && self.properties.value[0]) {\n        self.properties.displayName = self.properties.value[0].value;\n      } else if (typeof self.properties.value === \"string\" && self.properties.value !== \"\") {\n        self.properties.displayName = self.performLabelLineBreak(self.properties.value);\n      }\n    }\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    //Labels never change\n    return false;\n  },\n\n  /**\r\n      * Process the break line character\r\n      * @param value\r\n      * @returns {string}\r\n      */\n  performLabelLineBreak: function performLabelLineBreak(value) {\n    var label = value || \"\";\n\n    return label.replace(/\\\\n/gm, \"\\n\");\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Search Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for search renders\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n$.Class.extend(\"bizagi.rendering.search\", {}, {\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    var submitOnChange = data.properties.submitOnChange;\n    if (self.getMode() === \"execution\") {\n      // Normalize submitOnChange property\n      // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\n      // New \"submitVersion\" property default is 2\n      if (data.properties.advancedSearch) {\n        submitOnChange = typeof submitOnChange !== \"undefined\" ? submitOnChange : (data.properties.submitVersion || 1) > 1 ? false : true;\n      }\n    }\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.submitOnChange = bizagi.util.parseBoolean(submitOnChange) || false;\n\n    properties.searchForms = properties.searchForms || [];\n\n    // Default maxRecords is 20\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.advancedSearch = bizagi.util.parseBoolean(properties.advancedSearch) === null ? false : bizagi.util.parseBoolean(properties.advancedSearch);\n    properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\n    properties.allowFullSearch = properties.allowFullSearch || false;\n    properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\n    properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\n    properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\n    properties.searchLength = properties.searchLength || 2;\n\n    // Expire local storage cache\n    properties.enableLocalStorage = false;\n    properties.expireCache = 1000 * 60 * 15; // 15 minutes\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      hasValue: self.hasValue() });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n    var contextType = form.getContextType() || form.params.contexttype || false;\n\n    params = params || {};\n\n    // Verify context type\n    if (self.properties.contexttype) {\n      params.h_contexttype = self.properties.contexttype;\n    } else if (contextType) {\n      params.h_contexttype = contextType;\n    }\n\n    params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\n\n    // QA-471 When the contexttype is metadata it does not send xpathcontext\n    if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\n      properties.xpathContext = '';\n    }\n\n    // BA35025 - JFA\n    if (properties.term.indexOf(\"\\'\") > -1) {\n      var regexC = new RegExp(\"\\'\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\n    }\n\n    // QAF-6448 - JFA\n    if (properties.term.indexOf(\"\\\"\") > -1) {\n      var regexC = new RegExp(\"\\\"\", \"g\");\n      properties.term = properties.term.replace(regexC, \"\\\"\");\n    }\n\n    // Resolve with remote data\n    self.dataService.multiaction().getSearchData({\n      url: properties.dataUrl,\n      contexttype: params.h_contexttype,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.allowFullSearch ? \"%\" + properties.term : properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise(defer);\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value\r\n      * @param {} triggerEvents\r\n      * @returns {}\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    self._super(value, triggerEvents);\n\n    if (value != undefined) {\n      this.value = value;\n      this.selectedValue = value.label;\n    } else {\n      this.value = null;\n      this.selectedValue = null;\n    }\n  },\n\n  /* Maps the value, when this one comes from actions*/\n  mapValue: function mapValue(value) {\n    if (value && value.fromAction) {\n      return {\n        id: value.value,\n        value: value.label,\n        label: value.label };\n\n    }\n\n    return value;\n  },\n\n  /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var xpath = self.properties.xpath;\n    var value = self.getValue();\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      // Remove empty validation for value for combos\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {}\r\n      */\n  submitData: function submitData() {\n    var self = this;\n    var data = {};\n\n    // Add current data\n    if (!self.grid) {\n      data[self.properties.xpath] = self.getValue();\n    }\n\n    // Executes submit on change\n    self.submitOnChange(data, undefined, false);\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param {} invalidElements\r\n      * @returns {}\r\n      */\n  isValid: function isValid(invalidElements) {\n    return this._super(invalidElements);\n  },\n\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (typeof value == \"undefined\" || value == null) return false;\n\n    if (_typeof(value) === \"object\" && value.id !== \"\" && typeof value.id !== \"undefined\") return true;\n    return !bizagi.util.isEmpty(value);\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Render Layout Render Class\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Andrs Fernando Muoz\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will define a base layout render class with common stuff related to all renders\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\n  /*\r\n                                                       *   Returns the html templated element\r\n                                                       */\n  renderElement: function renderElement(template) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    // Start rendering deferred\n    self.renderingDeferred = new $.Deferred();\n\n    // Set render template\n    template = template || \"render-layout\";\n    var renderTemplate = self.renderFactory.getTemplate(template);\n\n    // Resolve render label\n    var label = properties.displayName;\n\n    if (typeof label == \"string\") {\n      label = bizagi.util.encodeString(label);\n    }\n\n    // Render template\n    var html = $.fasttmpl(renderTemplate, {\n      label: label,\n      isExtendedText: properties.type == \"text\" && properties.isExtended,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      id: properties.id,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      printVersion: form.params.printversion,\n      cssClass: properties.cssclass || \"\",\n      hide: properties.hide });\n\n\n    // Render internal control html\n    var result = self.internalRenderControl();\n    if (!result) {\n      result = \"\";\n    }\n\n    // Check if this is an async element or not\n    var async = _typeof(result) === \"object\" && result.done;\n    if (!async) {\n      html = self.replaceControlHtml(html, result);\n\n    } else {\n      if (result.state() === \"resolved\") {\n        // Fetch resolved result\n        html = self.replaceControlHtml(html, self.resolveResult(result));\n        self.asyncRenderDeferred = null;\n      } else {\n        // Wait for result\n        self.asyncRenderDeferred = result;\n        html = self.replaceControlHtml(html, \"\");\n      }\n    }\n\n    return html;\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    if (!self.control || self.control instanceof jQuery && self.control.length === 0) {\n      self.control = self.element;\n    }\n    if (!self.control || self.control.length == 0) {\n      return null;\n    }\n    return self.control;\n  },\n\n  /*\r\n     * Customizes the font italic style *\r\n     */\n  changeFontItalic: function changeFontItalic(italic) {\n    if (bizagi.util.parseBoolean(italic)) {\n      this.getControl().css(\"font-style\", \"italic\", \"!important\");\n    } else {\n      this.getControl().css(\"font-style\", \"normal\", \"!important\");\n    }\n    return this;\n  },\n\n  /*\r\n     * Customizes the font underline\r\n     */\n  changeFontUnderline: function changeFontUnderline(underline) {\n    var valueFormat = this.properties.valueFormat || {},\n    valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\n\n    if (bizagi.util.parseBoolean(underline)) {\n      this.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\n    } else {\n      this.getControl().find(\"*\").each(function (i, element) {\n        $(element).css(\"text-decoration\", valuestrikethru, \"!important\");\n      });\n    }\n\n    return this;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Render Column Decorator Class\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi UI Forms\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will define basic stuff for Columns\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\n  /*\r\n                                                                         *   Constructor\r\n                                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(this.properties));\n\n    this.decoratedClass = params.decorated;\n    this.data = params.data;\n    if (params.singleInstance) {\n      this.decorated = new this.decoratedClass({\n        data: this.data,\n        parent: this.parent,\n        renderFactory: this.renderFactory,\n        dataService: this.dataService });\n\n      this.decorated.getControl = this.getControl;\n      params.decorated = this.decorated;\n      this.decorated.properties.isColumn = true;\n    } else {\n      this.decorateRenders = [];\n    }\n    this.grid = params.parent;\n\n    // Set base column styles\n    var properties = this.properties;\n\n    properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\n    properties.align = properties.align || 'center';\n    properties.textFormat = properties.textFormat || {};\n    properties.submitOnChange = typeof properties.submitOnChange != \"undefined\" ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\n    properties.singleInstance = params.singleInstance;\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n    properties.required = typeof properties.required != \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n    properties.showColumn = typeof properties.showColumn != \"undefined\" ? bizagi.util.parseBoolean(properties.showColumn) : true;\n    properties.isSortable = typeof properties.isSortable != \"undefined\" ? bizagi.util.parseBoolean(properties.isSortable) : true;\n\n    // Define if it is editable or not        \n    try {\n      if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\n        properties.editable = false;\n      }\n    } catch (e) {\n    }\n\n    // Define if the column is readonly\n    this.readonly = properties.readonly !== undefined ? properties.readonly : false;\n    if (this.readonly) properties.editable = required = false;\n  },\n\n  /*\r\n     *   Return true if the column is read-only, so we can make a quick render\r\n     */\n  isReadonly: function isReadonly() {\n    return false;\n  },\n\n  /*\r\n     *   Method to retrieve the decorated control\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n  },\n  /*\r\n     *   Returns the decorated cell instance to use\r\n     */\n  getDecorated: function getDecorated(surrogateKey) {\n    var self = this;\n    var properties = self.properties;\n    if (properties.singleInstance) {\n      return self.decorated;\n    } else {\n      var decorated = self.decorateRenders[surrogateKey];\n      if (decorated == undefined) {\n        if (_typeof(self.decorateRenders) != \"object\") {\n          self.decorateRenders = [];\n        }\n        var instanceDecoratedClass = new this.decoratedClass({\n          data: bizagi.clone(this.data),\n          parent: this.parent,\n          renderFactory: this.renderFactory,\n          dataService: this.dataService });\n\n        decorated = instanceDecoratedClass;\n        self.decorateRenders[surrogateKey] = instanceDecoratedClass;\n\n        // Set surrogate key to all controls\n        decorated.surrogateKey = surrogateKey;\n\n        // Execute decorated overrides\n        self.applyOverrides(decorated);\n\n        var dataType = bizagi.util.normalizeType(decorated.properties.type);\n        // Also override setDisplayValue on summary row for non numeric columns\n        if (surrogateKey === \"summary\" && !/columnMoney/i.test(dataType) && !/columnNumber/i.test(dataType)) {\n\n          decorated.setDisplayValue = function (value) {\n            var control = this.getControl();\n\n            // Replace line breaks for html line breaks\n            control.html(value);\n          };\n        }\n      }\n      return decorated;\n    }\n  },\n  /*\r\n     *   Set a ready function to execute when the render has been inserted in the dom\r\n     */\n  ready: function ready() {\n    return this.readyDeferred.promise();\n  },\n  /*\r\n     *   Load stuff needed for the column\r\n     *   It could return a promise if the column need to load async stuff\r\n     */\n  initialize: function initialize() {\n    // Override to do any stuff needed here\n  },\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent(surrogateKey, cellOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    if (cellOverrides) {\n      decorated.properties.visible = cellOverrides.visible;\n      decorated.properties.editable = cellOverrides.editable;\n    }\n    return decorated.canBeSent() || !self.properties.editable && self.hasChanged() || !decorated.properties.editable && self.hasChanged();\n  },\n  /*\r\n     *   Method to check if a value is valid or not in this render\r\n     */\n  isValueValid: function isValueValid(surrogateKey, value, messages, propertyOverrides) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var invalidElements = [];\n\n    if (propertyOverrides.visible) {\n      self.setValue(surrogateKey, value);\n\n      // Override properties\n      decorated.properties = $.extend(decorated.properties, propertyOverrides);\n\n      if (self.grid && typeof decorated.grid === \"undefined\") {\n        decorated.grid = self.grid;\n      }\n\n      // Validate field\n      decorated.isValid(invalidElements);\n    }\n\n    if (invalidElements.length > 0) {\n      $.each(invalidElements, function (i, invalidElement) {\n        messages.push(invalidElement.message);\n      });\n      return false;\n    }\n\n    return true;\n  },\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n  },\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value) {\n    var self = this;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Set flag to check when a render has changed\n    self.changed = false;\n\n    // If the render is not editable return the readonly version of the column\n    //Fix: Uncaught RangeError: Maximum call stack size exceeded\n    if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.postRenderElement(cell);\n  },\n  /*\r\n     *   Returns the in-memory processed element when the element is read-only\r\n     */\n  renderReadOnly: function renderReadOnly(surrogateKey, value) {\n    var self = this;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n    self.setValue(surrogateKey, value);\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // Changes editable to false to render read-only\n    decorated.properties.editable = false;\n\n    // Perform the internal render\n    self.readyDeferred = new $.Deferred();\n    var result = decorated.render(\"cell.readonly\");\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    // Returns the decorated render inside a custom layout for columns\n    return result;\n  },\n\n  /*\r\n     *  Returns the html template to draw the summary cell\r\n     */\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    var result = self.renderFactory.getTemplate(\"cell.summary\");\n    return $.tmpl(result).html();\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var editable = self.properties.editable;\n    decorated.properties.editable = false;\n    if (self.properties.singleInstance) {\n      decorated.element = cell;\n    }\n    decorated.postRenderElement(cell);\n    decorated.properties.editable = editable;\n  },\n\n  /*\r\n     * Return false to all columns that doesn't need special treatment (like number or currency)\r\n     */\n  postRenderSummary: function postRenderSummary() {\n    return false;\n  },\n\n  /*\r\n     *   Returns the cell html to be inserted in the table\r\n     */\n  getCell: function getCell() {\n    return this.decorated.getDisplayValue();\n  },\n  /*\r\n     *   Sets the surrogate key for this row\r\n     */\n  setSurrogateKey: function setSurrogateKey(key) {\n    this.surrogateKey = key;\n  },\n  /*\r\n     *   Sets the internal value, only must be called internally\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated != \"undefined\" && decorated != null) {\n\n      decorated.properties.originalValue = value;\n      decorated.properties.previousValue = value;\n\n      if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\n        value = self.setDefaultValue(surrogateKey, decorated);\n      }\n\n      decorated.properties.value = value;\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = undefined;\n\n    if (self.properties.defaultvalue !== null && self.properties.defaultvalue !== undefined) {\n      value = self.properties.defaultvalue;\n    } else {\n      if (self.properties.defaultValue !== null && self.properties.defaultValue !== undefined) {\n        value = self.properties.defaultValue;\n      }\n    }\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  },\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    return decorated.getValue();\n  },\n  /*\r\n     *   Gets the composite value (applies for non-standard render values)\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    return this.getValue(surrogateKey);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\n  },\n  /*\r\n     *   Determines if a render has changed its value\r\n     */\n  hasChanged: function hasChanged() {\n    return this.changed;\n  },\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.decorated)\n    this.decorated.trigger(eventType, data);\n  },\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.decorated)\n    this.decorated.triggerHandler(eventType, data);\n  },\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.bind(eventType, fn);\n  },\n  /*\r\n     *   Unbinds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.decorated)\n    this.decorated.unbind(eventType, fn);\n  },\n  /*\r\n     *   Override decorated properties\r\n     */\n  overrideDecoratedRenderProperties: function overrideDecoratedRenderProperties(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n\n    // Override decorated control properties\n    decorated.properties.editable = this.properties.editable;\n    decorated.properties.visible = this.properties.visible;\n    decorated.properties.required = this.properties.required;\n  },\n\n  overrideProperties: function overrideProperties(properties) {\n    var self = this;\n\n    self.properties.editable = properties.editable || self.properties.editable;\n    self.properties.visible = properties.visible || self.properties.visible;\n    self.properties.required = properties.required || self.properties.required;\n  },\n\n  /*\r\n     *   Returns the xpath used to sort the grid\r\n     */\n  getSortName: function getSortName() {\n    var self = this;\n\n    // Check if there is an override for the default behaviour \n    var decorated = self.getAnyDecoratedInstance();\n    if (decorated && decorated.getSortColumn) {\n      return decorated.getSortColumn();\n    }\n\n    // Default behaviour\n    return self.properties.xpath;\n  },\n\n  /*\r\n     *   Returns any of the decorated instances, if there are none, return null\r\n     */\n  getAnyDecoratedInstance: function getAnyDecoratedInstance() {\n    var self = this;\n    var first;\n\n    // Get the first key for the hash\n    for (first in this.decorateRenders) {break;}\n\n    // Return the first decorated render\n    if (first) return this.decorateRenders[first];\n\n    return null;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutDecorated = setTimeout(function () {\n      if (self.decorated) {\n        self.decorated.unbind(\"renderchange\");\n        self.decorated.dispose();\n      }\n\n      if (self.decorateRenders) {\n        bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\n          if (render) {\n            render.unbind(\"renderchange\");\n            render.dispose();\n          }\n        });\n      }\n      clearTimeout(timeOutDecorated);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Smartphone Search Slide Implementation\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will shows a  search form\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n$.Class.extend(\"bizagi.rendering.smartphone.helpers.searchForm\", {}, {\n  /*\r\n                                                                        *   Constructor\r\n                                                                        */\n  init: function init(dataService, renderFactory, searchForms, searchParams, searchFormParams) {\n    this.dataService = dataService;\n    this.renderFactory = renderFactory;\n    this.searchForms = searchForms;\n    this.searchParams = searchParams;\n    this.searchFormParams = searchFormParams;\n    this.searchFormDeferred = new $.Deferred();\n  },\n\n  /**\r\n      * Render the edition form,... if is an addform, then show the currentAddForm view\r\n      * */\n  renderEdition: function renderEdition(params) {\n    var self = this;\n    self.properties = params;\n\n    //Render the search form\n    self.renderSearchForm(params);\n\n    // Return promise\n    return self.searchFormDeferred.promise();\n  },\n\n  /**\r\n      * get the searchform and render it!\r\n      * */\n  renderSearchForm: function renderSearchForm(params) {\n    var self = this;\n\n    // Creates a container, be careful you must destroy it later\n    var container = self.searchFormParams.navigation.createRenderContainer({ title: params.displayName });\n    $.when(self.getSearchContainerData(params)).\n    then(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (data.form.properties) {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      var form = self.renderFactory.getContainer($.extend({}, self.searchFormParams, {\n        type: \"form\",\n        data: data.form,\n        navigation: self.searchFormParams.navigation,\n        view_container: container }));\n\n\n      self.form = form;\n\n      var keys = Object.keys(form.children);\n      keys.map(function (key) {\n        form.children[key].params = $.extend({}, form.children[key].params, self.searchFormParams);\n      });\n\n      return form.render();\n\n    }, function (message) {\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      $.kendoTmpls(errorTemplate, { message: message }).appendTo(slideForm.find(\".scroll-content\"));\n    }).done(function (element) {\n      var tabContainer = self.form.firstChild().properties.type === \"tab\" ? self.form.firstChild() : null;\n      if (tabContainer) {\n        // Bind select tab event\n        tabContainer.bind(\"selected\", function (e, ui) {\n          var searchForm = self.searchForms[ui.index];\n          $.when(self.loadSearchTab(params, ui.tab, searchForm)).\n          done(function () {\n            // Set currents search form\n            self.currentSearchForm = ui.tab.firstChild();\n            self.currentSearchForm.triggerHandler(\"ondomincluded\");\n          });\n        });\n\n        tabContainer.container.tabs(\"select\", 0);\n        self.currentSearchForm = tabContainer.firstChild().firstChild();\n\n        if (!self.currentSearchForm.readyDeferred)\n        self.currentSearchForm.readyDeferred = new $.Deferred();\n\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n      } else {\n        // Set currents search form\n        self.currentSearchForm = self.form.firstChild();\n\n        if (!self.currentSearchForm.readyDeferred)\n        self.currentSearchForm.readyDeferred = new $.Deferred();\n\n        self.currentSearchForm.triggerHandler(\"ondomincluded\");\n      }\n\n      container.element.html(element);\n      self.searchFormParams.navigation.navigate(container.id);\n\n      self.containerGridResults = self.currentSearchForm.container.find(\".ui-bizagi-container-search-results\");\n      self.containerSearchCriteria =\n      self.currentSearchForm.container.find(\".ui-bizagi-container-search-criteria\");\n      self.applyButtons(container);\n    });\n  },\n\n  /**\r\n      * Get the addform and show it\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  renderAddForm: function renderAddForm(params) {\n    var self = this;\n    params = params || {};\n    var properties = self.properties;\n\n    if (typeof self.addContainer === \"undefined\") {\n      var message = bizagi.localization.getResource(\"render-dialog-entity\");\n      self.addContainer = self.searchFormParams.navigation.createRenderContainer({ title: message });\n\n      // Binds the view close event, and send the RollBack\n      self.addContainer.element.bind(\"close\", function () {\n        delete self.addContainer;\n      });\n    }\n\n    var isRefresh = params.isRefresh || false;\n\n    var getFormParams = {\n      idPageCache: params.idPageCache,\n      guidEntity: properties.entity,\n      contextType: \"entity\" };\n\n\n    if (isRefresh) {\n      getFormParams.isRefresh = true;\n      getFormParams.idStartScope = params.idStartScope;\n    } else\n    {\n      getFormParams.idRender = properties.idRender;\n      getFormParams.requestedForm = \"addForm\";\n    }\n\n    // Get the addform\n    $.when(self.dataService.getFormData(getFormParams)).then(function (data) {\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      if (typeof data.form.properties !== \"undefined\") {\n        data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\n      }\n\n      data.form.contextType = \"entity\";\n\n      var form = self.renderFactory.getContainer($.extend({}, self.addFormParams, {\n        type: \"form\",\n        data: data.form,\n        focus: params.focus || false,\n        selectedTabs: params.selectedTabs,\n        isRefresh: isRefresh,\n        requestedForm: params.requestedForm,\n        navigation: self.searchFormParams.navigation,\n        view_container: self.addContainer }));\n\n\n      form.buttons = [\n      $.extend(\n      form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          return self.saveDataAddForm(form).done(function () {\n            self.addContainer.destroy();\n            delete self.addContainer;\n\n            // Force a search after a new item is created!\n            self.searchParams.maxRows = 1;\n            self.currentSearchForm.performSearch(self.searchParams);\n          });\n        } }),\n\n      $.extend(\n      form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        // This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          self.addContainer.destroy();\n          delete self.addContainer;\n        } })];\n\n\n\n      $.extend(form, {\n        processButtons: function processButtons() {\n          // Not send information set in memory and save\n          $.each(form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1: //next button will behave as a cancel button\n                $(form.getButtons()[index]).click(function () {\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n\n                form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                form.buttons[index].action = \"back\";\n                break;\n\n              default:\n                $(form.getButtons()[index]).click(function () {\n                  self.saveDataAddForm(form);\n                  self.addContainer.destroy();\n                  delete self.addContainer;\n                });\n                break;}\n\n          });\n        } });\n\n\n      for (var indicator in form.children) {\n        form.children[indicator].params = $.extend({}, form.children[indicator].params, self.addFormParams);\n      }\n\n      return $.when(form.render()).done(function (element) {\n        // Set currents search form\n        self.currentAddForm = form.firstChild();\n        self.addContainer.element.html(element);\n\n        if (!isRefresh) {\n          self.searchFormParams.navigation.navigate(self.addContainer.id);\n        }\n\n        self.addContainer.setNavigationButtons(form);\n\n        form.triggerHandler(\"ondomincluded\");\n\n        // if is any modal view displayed, hide it to allow this search form been displayed\n        self.handleSearchFormZindex(\"show\");\n\n        form.bind(\"refresh\", function (_, refreshParams) {\n          refreshParams.scrollTop = self.form.container.parent().scrollTop();\n          refreshParams = $.extend({\n            focus: focus,\n            selectedTabs: self.form.getSelectedTabs(),\n            isRefresh: true,\n            contextType: self.properties.contextType || \"\",\n            navigation: self.searchFormParams.navigation,\n            view_container: self.addContainer },\n          refreshParams);\n\n          return self.renderAddForm(refreshParams);\n        });\n      });\n    }).fail(function () {\n      self.addContainer.destroy();\n      delete self.addContainer;\n      console.log(\"there was an error :(\");\n    });\n  },\n\n  /**\r\n      * Save data to add form\r\n      * @param {} form\r\n      * @returns {}\r\n      */\n  saveDataAddForm: function saveDataAddForm(form) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    if (form.validateForm()) {\n      var data = {};\n      $.forceCollectData = true;\n\n      form.collectRenderValues(data);\n      data.idPageCache = form.idPageCache;\n\n      var params = {\n        action: \"SAVE\",\n        data: data,\n        idPageCache: data.idPageCache,\n        guidEntity: form.properties.entity,\n        contexttype: \"entity\" };\n\n\n      // Check if the add form has data\n      var formData = {};\n\n      form.collectRenderValuesForSubmit(formData);\n\n      // Turn off flag\n      $.forceCollectData = false;\n\n      if (!bizagi.util.isMapEmpty(formData)) {\n        $.when(self.dataService.submitData(params)).\n        done(function (response) {\n          function dataHasXpath(xpath) {\n            var render = self.currentSearchForm.getRender(xpath);\n\n            if (_typeof(render) === \"object\" && render !== null)\n            return { \"found\": true, \"obj\": render };\n            return { \"found\": false, \"obj\": {} };\n          }\n\n          for (var i in formData) {\n            var mapping = dataHasXpath(i);\n            if (mapping.found) {\n              mapping.obj.setValue(formData[i]);\n              self.setDisplayValueToControl(mapping.obj, form, i, formData);\n            }\n          }\n\n          defer.resolve();\n        }).\n        fail(function (jqXHR, type, message) {\n          form.addValidationMessage(message.message);\n          defer.reject();\n        });\n      } else {\n        // Form has not data\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        defer.reject();\n      }\n    } else\n    {\n      defer.reject();\n    }\n    return defer;\n  },\n\n  /***\r\n      * Set display value by control type, when add new record\r\n      * @param renderControlSearchForm\r\n      * @param addForm\r\n      * @param xpath\r\n      * @param formData\r\n      */\n  setDisplayValueToControl: function setDisplayValueToControl(renderControlSearchForm, addForm, xpath, formData) {\n    if (renderControlSearchForm.properties.type === \"searchSuggest\") {\n      renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\n    } else {\n      renderControlSearchForm.setDisplayValue(formData[xpath]);\n    }\n  },\n\n  /**\r\n      * configure searchform buttons\r\n      * */\n  applyButtons: function applyButtons(container) {\n    var self = this;\n\n    self.displayBottomButtons(container);\n\n    container.element.bind(\"close\", function () {\n      self.searchFormDeferred.reject();\n    });\n  },\n\n  loadSearchTab: function loadSearchTab(params, tab, searchForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // If the tab has children it is loaded already\n    if (tab.children.length > 0)\n    return null;\n\n    // Load search form data\n    $.when(self.getSearchFormData(params, searchForm)).\n    pipe(function (data) {\n      // Render data inside selected tab\n      var searchFormContainer = self.renderFactory.getContainer({\n        type: \"searchForm\",\n        data: data.form });\n\n\n      tab.children.push(searchFormContainer);\n      return searchFormContainer.render();\n    }).\n    done(function (element) {\n      // Remove button container\n      $(\".ui-bizagi-button-container\", element).detach();\n      tab.container.append(element);\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  /**\r\n      * Creates the search dialog sub-containers\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getSearchContainerData: function getSearchContainerData(params) {\n    var self = this;\n    var deferred = new $.Deferred();\n    var data = {\n      form: {\n        properties: {},\n        elements: [] } };\n\n\n\n    var container = data.form;\n    var searchFormToLoad = self.searchForms[0];\n\n    // When there are more than one search form, render a tab container\n    if (self.searchForms.length > 1) {\n      var tabContainer = {};\n      tabContainer.properties = {\n        type: \"tab\" };\n\n\n      tabContainer.elements = [];\n      var otherElements = [];\n\n      $.each(self.searchForms, function (i, searchForm) {\n        var isDefault = searchForm[\"default\"] || false;\n        // Create tab item\n        var tab = {};\n        tab.properties = {\n          id: i,\n          type: \"tabItem\",\n          displayName: searchForm.caption };\n\n        tab.elements = [];\n        // Append children\n        if (isDefault) {\n          tabContainer.elements.push({\n            container: tab });\n\n          // Set properties to load default container\n          container = tab;\n          searchFormToLoad = self.searchForms[0];\n        } else {\n          otherElements.push({\n            container: tab });\n\n        }\n      });\n\n      // Append no defaults elements\n      $.each(otherElements, function (i, element) {\n        tabContainer.elements.push(element);\n      });\n      data.form.elements.push({\n        container: tabContainer });\n\n    }\n\n    // Loads default form\n    $.when(self.getSearchFormData(params, searchFormToLoad)).\n    done(function (searchFormData) {\n      container.elements.push(searchFormData);\n      container.properties.id = Math.guid();\n\n      // Resolve deferred\n      deferred.resolve(data);\n    });\n    return deferred.promise();\n  },\n\n  /**\r\n      * Loads a search form\r\n      * @param {} params\r\n      * @param {} searchForm\r\n      * @returns {}\r\n      */\n  getSearchFormData: function getSearchFormData(params, searchForm) {\n    var self = this;\n    return self.dataService.getSearchFormData($.extend(params, {\n      idSearchForm: searchForm.id,\n      url: searchForm.url })).\n    pipe(function (data) {\n      // Append search render properties\n      data.form.properties.idRender = params.idRender;\n      return data;\n    });\n  },\n\n  displayBottomButtons: function displayBottomButtons(container) {\n    var self = this;\n    var containerButtons = self.currentSearchForm.container.find(\".ui-bizagi-container-button-edit\").empty().show();\n    var templateBtn = \"<button class='ui-bizagi-form-button #= data.name #'> #= data.text # </button>\";\n    var btnSearch = $.kendoTmpls(templateBtn, { name: \"bz-btn-search\", text: bizagi.localization.getResource(\"render-form-dialog-box-search\") }).appendTo(containerButtons);\n    var btnSelect = $.kendoTmpls(templateBtn, { name: \"bz-btn-select\", text: bizagi.localization.getResource(\"render-search-advanced-results-button\") }).appendTo(containerButtons);\n    var btnAdd = $.kendoTmpls(templateBtn, { name: \"bz-btn-add\", text: bizagi.localization.getResource(\"render-form-dialog-box-add\") }).appendTo(containerButtons);\n    var btnCancel = $.kendoTmpls(templateBtn, { name: \"bz-btn-cancel\", text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\") }).appendTo(containerButtons);\n\n    container.element.bind(\"close\", function (e) {\n      //If the view results is in front, shouldn't go back, but change the showed panel\n      if (self.containerSearchCriteria.css(\"display\") === \"none\") {\n        e.preventDefault();\n        setSearchState();\n      }\n    });\n\n    var setSearchState = function setSearchButtons() {\n      // List posible buttons for search\n      var buttons = [\n      {\n        \"ordinal\": 1,\n        \"action\": \"search\",\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-search\"),\n        \"callback\": function callback() {\n          // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)\n          self.searchParams.maxRows = 1;\n          return self.currentSearchForm.performSearch(self.searchParams);\n        } },\n\n      {\n        \"ordinal\": 2,\n        \"action\": \"cancel\",\n        \"caption\": \"cancel\",\n        \"callback\": function callback() {\n          self.searchFormDeferred.reject();\n          container.destroy();\n        } },\n\n      {\n        \"ordinal\": 3,\n        \"action\": \"add\",\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        \"callback\": function callback() {\n          var params = {\n            \"idCase\": self.searchFormParams.idCase,\n            \"idRender\": self.properties.idRender,\n            \"displayName\": self.properties.displayName,\n            \"idPageCache\": self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } }];\n\n\n\n      self.containerSearchCriteria.show();\n      self.containerGridResults.hide();\n\n      // Add only seen when allowed\n      $(btnAdd).toggle(self.searchParams.allowNew);\n      btnSearch.show();\n      btnSelect.hide();\n\n      if (!self.searchParams.allowNew) {\n        buttons.pop();\n      }\n\n      self.form.buttons = buttons;\n      delete self.form.properties.virtual;\n      container.setNavigationButtons(self.form);\n    };\n\n    var setResultState = function setSearchButtons() {\n\n      // List posible buttons for result\n      var buttons = [\n      {\n        \"ordinal\": 4,\n        \"action\": \"select\",\n        \"caption\": bizagi.localization.getResource(\"render-search-advanced-results-button\"),\n        \"callback\": function callback() {\n          self.searchFormDeferred.resolve(container.element.find(\".ui-bizagi-container-search-results [data-key]\").data(\"business-key\"));\n          container.destroy();\n        } },\n\n      {\n        \"ordinal\": 5,\n        \"action\": \"cancel\",\n        \"caption\": \"cancel\",\n        \"callback\": function callback() {\n          setSearchState();\n        } },\n\n      {\n        \"ordinal\": 3,\n        \"action\": \"add\",\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-add\"),\n        \"callback\": function callback() {\n          var params = {\n            \"idCase\": self.searchFormParams.idCase,\n            \"idRender\": self.properties.idRender,\n            \"displayName\": self.properties.displayName,\n            \"idPageCache\": self.properties.idPageCache };\n\n\n          self.renderAddForm(params);\n        } }];\n\n\n\n      self.containerSearchCriteria.hide();\n      self.containerGridResults.show();\n\n      // Add only seen when allowed\n      $(btnAdd).toggle(self.searchParams.allowNew);\n      btnSearch.hide();\n      btnSelect.show();\n\n      if (!self.searchParams.allowNew) {\n        buttons.pop();\n      }\n\n      self.form.buttons = buttons;\n      self.form.properties.virtual = true;\n      container.setNavigationButtons(self.form);\n    };\n\n    btnSearch.bind(\"click\", function () {\n      // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)\n      self.searchParams.maxRows = 1;\n      self.currentSearchForm.performSearch(self.searchParams);\n    });\n\n    btnAdd.bind(\"click\", function () {\n      var params = {\n        \"idCase\": self.searchFormParams.idCase,\n        \"idRender\": self.properties.idRender,\n        \"displayName\": self.properties.displayName,\n        \"idPageCache\": self.properties.idPageCache };\n\n\n      self.renderAddForm(params);\n    });\n\n    btnCancel.bind(\"click\", function () {\n      self.searchFormDeferred.reject();\n      container.destroy();\n    });\n\n    btnSelect.bind(\"click\", function () {\n      self.searchFormDeferred.resolve(container.element.find(\".ui-bizagi-container-search-results [data-key]\").data(\"business-key\"));\n      container.destroy();\n    });\n\n    self.currentSearchForm.bind(\"instancerefreshdone\", function () {\n      // Show search results container\n      if (self.currentSearchForm.resultsGrid.properties.data !== null &&\n      !jQuery.isEmptyObject(self.currentSearchForm.resultsGrid.properties.data.rows) &&\n      self.currentSearchForm.resultsGrid.properties.data.rows.length > 0)\n      {\n        setResultState();\n      } else\n      {\n        setSearchState();\n      }\n    });\n\n    setSearchState();\n  },\n\n  renderEditionAddForm: function renderEditionAddForm(params) {\n    var self = this;\n    var properties = self.properties;\n    var container = $(params.id + \" .inputEditionContent\");\n    var canvas = $(params.id + \" .inputEditionContent\");\n    var kendoView = $(params.id, \"body\");\n\n    self.viewContainer = params.viewContainer;\n\n    self.addFormParams = {\n      container: container,\n      canvas: canvas,\n      kendoView: kendoView,\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      allowNew: false };\n\n\n    self.renderEdition({\n      \"idRender\": properties.idRender,\n      \"requestedForm\": \"addForm\",\n      \"xpathContext\": properties.xpathContext,\n      \"idPageCache\": properties.idPageCache,\n      \"isAddForm\": true,\n      \"contextType\": \"entity\" }).\n    done(function () {\n      if (self.form.validateForm()) {\n        var data = {};\n        $.forceCollectData = true;\n\n        self.form.collectRenderValues(data);\n        data.idPageCache = self.form.idPageCache;\n        var defer = $.Deferred();\n\n        var params = {\n          action: \"SAVE\",\n          data: data,\n          idPageCache: data.idPageCache,\n          guidEntity: self.form.properties.entity,\n          contexttype: \"entity\" };\n\n\n        // Check if the add form has data\n        var formData = {};\n\n        self.form.collectRenderValuesForSubmit(formData);\n\n        // Turn off flag\n        $.forceCollectData = false;\n\n        if (!bizagi.util.isMapEmpty(formData)) {\n          self.pane.navigate(\"#:back\");\n          $.when(self.dataService.submitData(params)).done(function (response) {\n            function dataHasXpath(xpath) {\n              var render = self.currentSearchForm.getRender(xpath);\n\n              if (_typeof(render) == \"object\" && render !== null) {\n                return { \"found\": true, \"obj\": render };\n              }\n\n              return { \"found\": false, \"obj\": {} };\n            }\n\n            for (var i in formData) {\n              var mapping = dataHasXpath(i);\n              if (mapping.found) {\n                var value = data[i];\n                mapping.obj.setValue(value);\n                mapping.obj.setDisplayValue(value);\n\n                if (self.currentSearchForm.resultsGrid.properties.data !== null &&\n                !jQuery.isEmptyObject(self.currentSearchForm.resultsGrid.properties.data.rows) &&\n                self.currentSearchForm.resultsGrid.properties.data.rows.length > 0) {\n                  self.containerSearchCriteria.show();\n                  self.currentSearchForm.container.find(\".bz-btn-search\").show();\n                  self.currentSearchForm.container.find(\".bz-btn-select\").hide();\n                  self.containerGridResults.hide();\n                }\n              }\n            }\n          }).fail(function (jqXHR, type, message) {\n            if (type === \"parsererror\") {\n              defer.resolve({ type: \"error\", message: message.message });\n            } else {\n              defer.reject(arguments);\n            }\n          });\n        } else {\n          // Form has not data\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\n        }\n      }\n    }).fail(function () {\n      self.pane.navigate(\"#:back\");\n    });\n\n    self.pane.navigate(params.id);\n  },\n\n  handleSearchFormZindex: function handleSearchFormZindex(option) {\n    var self = this;\n\n    //if there is an open modal, change z-index to make searchForm visible\n    var modalViewDisplayed = jQuery.grep($(\".km-modalview-root\"), function (n, i) {\n      return $(n).css(\"display\") == \"block\";\n    });\n\n    if (modalViewDisplayed.length > 0) {\n      if (option == \"show\") {\n        $(modalViewDisplayed).css(\"z-index\", 0);\n      } else {\n        $(modalViewDisplayed).css(\"z-index\", 10001);\n      }\n    }\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi Tablet Render Text Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the text render class to adjust to smartphone devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n// Extends itself\nbizagi.rendering.text.extend(\"bizagi.rendering.text\", {}, {\n  /**\r\n                                                             *\r\n                                                             */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    self.input = control.find(\"input\").length != 0 ? control.find(\"input\") : control.find(\".bz-rn-non-editable\");\n\n    // Define max length of element\n    if (properties.maxLength > 0) {\n      self.input.attr(\"maxlength\", properties.maxLength);\n    }\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n      self.input.attr(\"readonly\", \"readonly\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.removeAttr(\"readonly\");\n      self.configureHandlers();\n    }\n  },\n\n  /**\r\n      * Creates the markup for the readonly text field\r\n      * Comment: includes the default value in the markup\r\n      * @returns {html}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Readonly\r\n      * @returns {} \r\n      */\n  postRenderSingle: function postRenderSingle() {\n    //Attach event for retype double\n    var self = this;\n    var properties = self.properties;\n\n    self._super();\n\n    if (properties.retype == \"double\") {\n      self.attachRetypeDouble();\n    }\n\n    // Implement maxlength behaviour (in android lets you write more chars than allowed)\n\n    var element = self.element;\n    var input = $(\"input\", element);\n\n    if (!input || input.length === 0) return;\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    self.setValue(value, false);\n\n    // This is temporal\n    if (_typeof(value) == \"object\") return;\n    value = typeof value == \"boolean\" ? value.toString() : value;\n\n    if (typeof value === \"string\") {\n      value = value.replaceAll(\"\\\\n\", \" \").replaceAll(\"\\n\", \" \");\n      value = value.replaceAll(\"&amp;\", \"&\");\n\n      if (self.properties.editable) {\n        self.input.first().html(value);\n        self.input.first().val(value);\n      } else {\n        self.input.text(value);\n      }\n    }\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n    var self = this;\n    self.inputEdition.val(value);\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n    var value = self.inputEdition.val();\n\n    self.setValue(value, false);\n    self.input.html(value);\n    self.input.val(value);\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"text\";\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n\n    var input = $(\"input\", element);\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      if ($(control).attr(\"type\") !== \"hidden\" &&\n      $(control).css(\"display\") !== \"none\" &&\n      $(control).css(\"visibility\") !== \"hidden\") {\n\n        if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n          // Check that there is something in the value\n          // Check if a value has already been set\n          if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n          return;\n\n          control.data(\"oldValue\", control.val());\n          control.val(\"\");\n\n          try {\n            // Create new tooltip\n            control.tooltip(\"destroy\");\n          } catch (e) {\n          }\n\n          control.attr(\"title\", self.getResource(\"render-number-retype\")); //\"Re-escriba el valor\"\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          // Focus after 100ms to avoid bubbling\n          setTimeout(function () {\n            control.focus();\n            input.focus();\n          }, 100);\n        } else {\n          if (control.val() !== control.data(\"oldValue\")) {\n            self.setValue(\"\");\n            control.val(\"\");\n            control.data(\"oldValue\", \"\");\n            control.tooltip(\"destroy\");\n            control.attr(\"title\", self.getResource(\"render-text-retype-error\"));\n            control.tooltip();\n            control.tooltip(\"open\");\n\n            setTimeout(function () {\n              control.focus();\n            }, 100);\n          } else {\n            control.data(\"newValue\", control.val());\n            control.data(\"oldValue\", \"\");\n\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          }\n        }\n      }\n    });\n  } });","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /**\r\n                                                                                                                                                                                                            *   Name: Bizagi smartphone Render Date Extension\r\n                                                                                                                                                                                                            *   Author: Cristian Olaya\r\n                                                                                                                                                                                                            *   Date: 2015-sep-23\r\n                                                                                                                                                                                                            */\nbizagi.rendering.date.extend(\"bizagi.rendering.date\", {\n  DEFAULT_PROPERTIES: { \"maxYearsToDisplay\": 100 } }, _defineProperty({\n\n  /**\r\n                                                                         *  Rendering the control\r\n                                                                         * */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    if (!properties.editable) {\n      // If isn't a editable control, then show a non editable span\n      container.addClass(\"bz-rn-non-editable\");\n      // Getting the input\n      self.input = control.find(\"span\").addClass(\"bz-rn-date-control\");\n    } else {\n      // Getting the input\n      self.input = self.getDateControl();\n    }\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonly\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * To configure the mobiscroll plugin\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    //Call Base\n    self._super();\n\n    var inputControl = self.getDateControl();\n    var controlElements = self.properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\n    var defaultDateControl = self.getFormattedDate(self.properties.value, self.properties.showTime, true);\n    var minDateControl = self.getFormattedDate(self.properties.minValue, self.properties.showTime, false);\n    var maxDateControl = self.getFormattedDate(self.properties.maxValue, self.properties.showTime, false);\n    var timeFormat = self.properties.showTime ? self.getTimeFormat() : \"\";\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(minDateControl))) {\n      minDateControl = new Date();\n      minDateControl.setFullYear(minDateControl.getFullYear() - self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      minDateControl.setHours(0, 0, 0, 0);\n    }\n\n    //Adds a gap of years to show if the user doest not include min years\n    if (isNaN(Date.parse(maxDateControl))) {\n      maxDateControl = new Date();\n      maxDateControl.setFullYear(maxDateControl.getFullYear() + self.Class.DEFAULT_PROPERTIES.maxYearsToDisplay);\n      maxDateControl.setHours(23, 59, 59);\n    }\n\n    $(\".bz-calendar-input\", self.control).click(function () {\n      inputControl.click();\n    });\n\n    if (!self.isValidMinMaxValue()) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      self.properties.displayValue = \"\";\n    }\n\n    inputControl.mobiscroll().calendar({\n      mode: \"mixed\", // Specify scroller mode like: mode: 'mixed' or omit setting to use default\n      display: \"bottom\", // Specify display mode like: display: 'bottom' or omit setting to use default\n      controls: controlElements,\n      min: minDateControl,\n      max: maxDateControl,\n      defaultValue: defaultDateControl,\n      timeFormat: timeFormat,\n      showScrollArrows: true,\n      lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n      buttons: [\n      \"set\",\n      {\n        text: this.getResource(\"render-plugin-search-users-clear-button-name\"),\n        handler: function handler(e, inst) {\n          self.date = undefined;\n          self.time = undefined;\n          self.timeS = undefined;\n          self.onChangeHandler(true);\n          inst.clear();\n        } },\n\n      \"cancel\"],\n\n      onSet: function onSet(valueText, inst) {\n        var data = inst.getVal();\n        self.date = { \"day\": data.getDate(), \"month\": data.getMonth(), \"year\": data.getFullYear() };\n\n        //Checks if its has time, and included it\n        if (self.properties.showTime) {\n          self.time = { \"hours\": data.getHours(), \"minutes\": data.getMinutes() };\n          if (!self.is24h) {\n            self.timeS = data.getHours() < 12 ? \"am\" : \"pm\";\n          }\n        }\n\n        self.onChangeHandler();\n      },\n      onBeforeShow: function onBeforeShow(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n\n        self.changeMinValue(self.properties.minValue);\n        self.changeMaxValue(self.properties.maxValue);\n\n        //TODO temporal fix in ios smartphone when a notification container is already displayed (QAF-6385 / MOB-171), review mobiscroll.min versions\n        if (bizagi.util.isiOSDevice()) {\n          $(\".ui-bizagi-notifications-container\").css(\"display\", \"none\");\n        }\n      },\n      onClose: function onClose(event, inst) {\n        // Your custom event handler goes here\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"auto\");\n      },\n      onShow: function onShow(event, inst) {\n        $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"hidden\");\n      } });\n\n\n    // Bind event for change value\n    inputControl.on(\"focus\", function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isAndroidDevice()) {\n        cordova.plugins.Keyboard.disableScroll(true);\n        cordova.plugins.Keyboard.close();\n      }\n    });\n\n    //Set input displayValue if it has default value\n    if (self.properties.displayValue === \"\" && self.properties.value) {\n      var date = self.getFormattedDate(self.properties.value, self.properties.showTime, true, false);\n      var displayValue = bizagi.util.dateFormatter.formatDate(date, self.properties.fullFormat);\n      self.input.prop(\"value\", displayValue);\n    }\n\n    inputControl.attr(\"keyboard\", \"disable\");\n  },\n\n  /**\r\n      * Configure the timeformat\r\n      * */\n  getTimeFormat: function getTimeFormat() {\n    var self = this;\n\n    if (self.properties.timeFormat.indexOf(\"H\") !== -1 || self.properties.timeFormat.indexOf(\"HH\") !== -1) {\n      self.is24h = true;\n      return \"HH:ii\";\n    } else {\n      self.is24h = false;\n      return \"hh:ii A\";\n    }\n  },\n\n  /**\r\n      * Get Date whit the Invariant and ISO Format applied.\r\n      * */\n  getFormattedDate: function getFormattedDate(date, showTime, initializer) {\n    var self = this;\n\n    if (!date || bizagi.util.isObjectEmpty(date)) return;\n\n    //There are some dates that haven't time,... actions and validations for example or when we have to put a initial value (default value without time),\n    //in that cases we should identify the case and if the date haven't the time value, we have to add (00:00:00) it to can apply the format (getDateFromInvariant).\n    var time = showTime && (self.getTime() === \"0:0\" || initializer) ? \" \" +\n    date.substr(date.length - 8, date.length) : \"\";\n    date = bizagi.util.dateFormatter.getDateFromInvariant(initializer && showTime && time.split(\"/\").length > 1 || date.split(\":\").length === 1 ?\n    date += \" 00:00:00\" : date, showTime);\n\n    var fullDateFormated = self.setHour(self.getFullFormatedDate(date, showTime ? time !== \"\" ? time : \" \" + self.getTime() : \" 00:00\"));\n    fullDateFormated = bizagi.util.dateFormatter.getDateFromISO(fullDateFormated, true);\n\n    return fullDateFormated;\n  },\n\n  /*\r\n      *   Changes the render min value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { min: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { min: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.minValue = value;\n    }\n  },\n\n  /*\r\n      *   Changes the render max value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n\n    // Set value in control\n    if (value && self.properties.editable) {\n      if (typeof value === \"number\") {\n        value = new Date(value);\n        dateControl.mobiscroll('option', { max: value });\n        value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\n      } else {\n        dateControl.mobiscroll('option', { max: bizagi.util.dateFormatter.getDateFromInvariant(value, true) });\n      }\n\n      properties.maxValue = value;\n    }\n  },\n\n  /**\r\n      * Set the display value on input\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var date = self.getFormattedDate(value, properties.showTime, false);\n    var displayValue = self.preprocessDateValue(date);\n\n    if (properties.editable) {\n      self.input.html(displayValue);\n      self.input.prop(\"value\", displayValue);\n    } else {\n      self.input.text(displayValue);\n    }\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n\n    self.date = undefined;\n    self.time = undefined;\n    self.timeS = undefined;\n    self.onChangeHandler(true);\n    self.setDisplayValue('');\n  },\n\n  /**\r\n      * Get the DOM Control\r\n      * */\n  getDateControl: function getDateControl() {\n    var self = this;\n\n    return $(\"input.bz-rn-date-control\", self.getControl());\n  },\n\n  /**\r\n      * Get Time from mobiscroll\r\n      */\n  getTime: function getTime() {\n    var self = this;\n\n    //Converting the time in 24h format.\n    if (self.properties.showTime && self.time && self.time[\"minutes\"] !== \"\") {\n      var time = self.time[\"hours\"] + \":\" + self.time[\"minutes\"];\n      time += self.timeS;\n\n      if (time.indexOf(\"am\") != -1 && self.time[\"hours\"] == 12) {\n        time = time.replace(\"12\", \"0\");\n      }\n\n      if (time.indexOf(\"pm\") != -1 && self.time[\"hours\"] < 12) {\n        time = time.replace(self.time[\"hours\"], parseInt(self.time[\"hours\"]) + 12);\n      }\n\n      return time.replace(/(am|pm)/, '');\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Get Date from mobiscroll\r\n      * */\n  getDate: function getDate() {\n    var self = this;\n    return self.date && self.date[\"month\"] !== \"\" ? self.date[\"year\"] + \"-\" + (parseInt(self.date[\"month\"]) + 1) + \"-\" + self.date[\"day\"] : \"\";\n  },\n\n  /**\r\n      * Set the control value when the control change\r\n      */\n  onChangeHandler: function onChangeHandler(isClearButton) {\n    var self = this;\n    var properties = self.properties;\n    var currentDate = self.getDate();\n    var currentTime = properties.showTime ? \" \" + self.getTime() : \" 0:00\";\n\n    // If curren date is empty reset actual value\n    if (currentDate === \"\" && !properties.showTime || currentDate === \"\" && currentTime === \"\" || isClearButton) {\n      self.setValue(\"\");\n      self.input.prop('value', \"\");\n      properties.displayValue = \"\";\n    } else {\n      var displayValue;\n      var formattedDate = self.setHour(self.getFullFormatedDate(currentDate, currentTime));\n      var fullFormattedDate = bizagi.util.dateFormatter.getDateFromISO(formattedDate, true);\n\n      if (!fullFormattedDate || fullFormattedDate === 0) return;\n\n      // Set date value\n      self.setNewDateValue(fullFormattedDate, properties.showTime);\n\n      displayValue = self.preprocessDateValue(fullFormattedDate);\n      properties.displayValue = displayValue;\n      self.input.prop('value', self.properties.displayValue);\n    }\n  },\n\n  /**\r\n      * Apply the final format that will be showed on the input\r\n      * */\n  getFullFormatedDate: function getFullFormatedDate(currentDate, currentTime) {\n    var fullDate = \"\";\n\n    if (currentDate.length > 0) {\n      fullDate = currentDate;\n    } else if (currentDate !== undefined) {\n      fullDate = bizagi.util.dateFormatter.formatISO(currentDate, false);\n    } else {\n      fullDate = bizagi.util.dateFormatter.formatISO(new Date(), false);\n    }\n\n    fullDate += currentTime;\n    var dateFromFormat = bizagi.util.dateFormatter.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\n\n    return bizagi.util.dateFormatter.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\n  },\n\n  /**\r\n      * Set the control value\r\n      * */\n  setNewDateValue: function setNewDateValue(formatedFullDate, showTime) {\n    var self = this;\n    var value = formatedFullDate != \"\" ? bizagi.util.dateFormatter.formatInvariant(formatedFullDate, showTime) : \"\";\n    self.setValue(value);\n  },\n\n  /**\r\n      * Removing the time when be necesary\r\n      * */\n  applyDateFormat: function applyDateFormat(date, showTime) {\n    if (!showTime) {\n      var initIndexTime = null;\n      if (date.indexOf(\"00:00\") != -1) {\n        initIndexTime = date.indexOf(\"00:00\");\n      } else if (date.indexOf(\"0:00\") != -1) {\n        initIndexTime = date.indexOf(\"0:00\");\n      } else if (date.indexOf(\"12:00\") != -1) {\n        initIndexTime = date.indexOf(\"12:00\");\n      } else {\n        initIndexTime = \"-1\";\n      }\n\n      var endIndexTime = initIndexTime + 8;\n      date = initIndexTime === -1 ? date : date.replace(date.substring(initIndexTime, endIndexTime), \"\").replace(\" am\", \"\").replace(\" pm\", \"\");\n    }\n\n    return date;\n  },\n\n  /*\r\n      *  Checks if the date could be localized using site language\r\n      * */\n  preprocessDateValue: function preprocessDateValue(date) {\n    var self = this;\n    var properties = self.properties;\n    var displayValue;\n\n    displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat);\n\n    return displayValue;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var bValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      if (bizagi.util.parseBoolean(properties.editable)) {\n        value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n        if (value != 0) {\n          // Clear time for validations\n          value.setHours(0, 0, 0, 0);\n\n          // Check min value and max value\n          if (properties.minValue && typeof properties.minValue === 'string') {\n            bValid = self.validateMinAndMaxValue(value, true, properties, invalidElements) ? false : bValid;\n          }\n\n          if (properties.maxValue && typeof properties.maxValue === 'string') {\n            bValid = self.validateMinAndMaxValue(value, false, properties, invalidElements) ? false : bValid;\n          }\n        }\n      }\n    }\n\n    if (bizagi.util.parseBoolean(properties.editable)) {\n      // Check required\n      if (properties.required && self.hasValue()) {\n        var control = self.getDateControl();\n\n        if (control.length > 0 && control.val().length <= 0) {\n          bValid = self.showMandatoryMessage(properties, invalidElements);\n        }\n      } else if (properties.required && !self.hasValue()) {\n        self.showMandatoryMessage(properties, invalidElements);\n      }\n    }\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * To validate the min and max values\r\n      */\n  validateMinAndMaxValue: function validateMinAndMaxValue(value, isMinValue, properties, invalidElements) {\n    var vValue = bizagi.util.dateFormatter.getDateFromInvariant(isMinValue ? properties.minValue : properties.maxValue);\n    vValue.setHours(0, 0, 0, 0);\n\n    if (isMinValue && value < vValue || !isMinValue && value > vValue) {\n      var message = isMinValue ?\n      this.getResource(\"render-date-minimum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat)) :\n      this.getResource(\"render-date-maximum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat));\n\n      invalidElements.push({\n        xpath: properties.xpath,\n        message: message });\n\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\r\n      * To show the mandatory values message\r\n      * */\n  showMandatoryMessage: function showMandatoryMessage(properties, invalidElements) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n\n    invalidElements.push({ xpath: properties.xpath, message: message });\n\n    return false;\n  },\n\n  setHour: function setHour(date) {\n    return date.replace(\" 0:\", \" 00:\").replace(\" 1:\", \" 01:\").replace(\" 2:\", \" 02:\").replace(\" 3:\", \" 03:\").replace(\" 4:\", \" 04:\").replace(\" 5:\", \" 05:\").replace(\" 6:\", \" 06:\").replace(\" 7:\", \" 07:\").replace(\" 8:\", \" 08:\").replace(\" 9:\", \" 09:\");\n  },\n\n  isValidMinMaxValue: function isValidMinMaxValue() {\n    var self = this;\n    var isValid = true;\n    var value = self.getValue();\n\n    if (value) {\n      value = bizagi.util.dateFormatter.getDateFromInvariant(value);\n\n      if (value !== 0) {\n        // Clear time for validations\n        value.setHours(0, 0, 0, 0);\n\n        // Check min value and max value\n        if (self.properties.minValue && typeof self.properties.minValue === 'string')\n        isValid = self.validateMinAndMaxValue(value, true);\n\n        if (self.properties.maxValue && typeof self.properties.maxValue === 'string')\n        isValid = self.validateMinAndMaxValue(value, false);\n      }\n    }\n\n    return isValid;\n  } }, \"validateMinAndMaxValue\",\n\nfunction validateMinAndMaxValue(currentDate, isMinValue) {\n  var self = this;\n  var date = isMinValue ? self.properties.minValue : self.properties.maxValue;\n  var formattedDate = bizagi.util.dateFormatter.getDateFromInvariant(date);\n\n  formattedDate.setHours(0, 0, 0, 0);\n\n  return !(isMinValue && currentDate < formattedDate || !isMinValue && currentDate > formattedDate);\n\n}));","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi smartphone Render option select\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: CristianO\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Date: 29/10/2015\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   Render a single input with a modal view, this modal view contain a\r\n                                                                                                                                                                                                                                                                                                                                                                                *       selectable list.\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.combo.extend(\"bizagi.rendering.combo\", {},\n{\n\n  /*\r\n  *\r\n  * */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var result = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyCombo\");\n    return $.kendoTmpl(template, {});\n  },\n\n  /**\r\n      * Initilizing the combo control\r\n      * */\n  renderSingle: function renderSingle() {\n    var self = this;\n\n    self._super();\n\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n    var params = {};\n\n    // Flag to set or not the display value on cascading combos.\n    self.showDisplayValue = false;\n\n    // Getting the input\n    self.input = $(\".bz-rn-combo-control\", control);\n    if (properties.parentComboValue && properties.parentComboValue != null) {\n      params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = properties.parentComboValue;\n\n      //If is a cascading combo, and has a parent and has its own value, then set the display value.\n      self.showDisplayValue = self.parentCombo && self.parentCombo.value && self.parentCombo.value.value !== \"\" && self.properties.value && self.properties.value.value;\n    }\n\n    if (!properties.editable) {\n      self.inputSpan = $('.bz-rn-text', control);\n      container.addClass(\"bz-rn-non-editable bz-command-edit-inline\");\n\n      if (self.value != null) {\n        self.inputSpan.text(self.value.value || self.value.id);\n      }\n    } else {\n      if (typeof self.initialValueSet !== \"undefined\" && !self.initialValueSet) {\n        $.when(self.renderCombo(params)).done(function (html) {\n          self.getControl().html(html);\n          self.input = self.combo = self.getControl();\n          self.configureCombo();\n          self.processLayout(false, self.properties.valueFormat || {});\n        });\n      } else {\n        self.configureCombo();\n      }\n    }\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    if (properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n\n    self._super();\n  },\n\n  renderEdition: function renderEdition() {},\n\n  /**\r\n                                               * Setting the combo's handlers\r\n                                               * */\n  configureCombo: function configureCombo() {\n    var self = this;\n\n    self.inputSpan = self.input.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"option:selected\", self.input).text());\n    self.inputSpan.val($(\"option:selected\", self.input).text());\n\n    $(\".bz-rn-container-combo\", self.getControl()).unbind().bind(\"click\", function () {\n      //After click on input combo, remove focus of it.\n      self.input.find(\".bz-rn-combo-control\").blur();\n      $(self.input).blur();\n\n      self.input.attr(\"keyboard\", \"disable\");\n\n      //Creating modal view\n      self.processComboData(self.properties.data);\n      var template = self.renderFactory.getTemplate('comboModalView');\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': self.properties.data,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n    });\n  },\n\n  processComboData: function processComboData(data) {\n    var self = this;\n\n    data.forEach(function (value) {\n      self.validateValue(value);\n    });\n  },\n\n  validateValue: function validateValue(value) {\n    var self = this;\n\n    if (value.id != undefined && (typeof value.id === \"number\" && value.id !== null || typeof value.id === \"string\" && value.id.length > 0)) {\n      var translated = false; //When the parametric entity have a boolean attribute\n      if (value.value !== null && typeof value.value === \"boolean\") {\n        translated = true;\n        if (bizagi.util.parseBoolean(value.value) === true) {\n          value.value = bizagi.localization.getResource(\"render-boolean-yes\");\n        } else if (bizagi.util.parseBoolean(value.value) === false) {\n          value.value = bizagi.localization.getResource(\"render-boolean-no\");\n        }\n      } else if (value.value != null && _typeof(value.value) === \"object\") {\n        for (var i = 0, length = value.value.length; i < length; i++) {\n          if (value.value[i] != null && typeof value.value[i] === \"boolean\") {\n            if (bizagi.util.parseBoolean(value.value[i]) === true) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\n            } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\n              value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\n            }\n          }\n        }\n      }\n    }\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".bz-wp-modalview-results-list li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('change keypress  keyup change', function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind(\"click\", function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.list = $(\".bz-wp-modalview-results-list\", inputContainer);\n    self.setModalViewDisplayValue(self.properties.value || false);\n\n    self.inputSpan = inputContainer.find(\".bz-rn-cm-text-label\");\n    self.inputSpan.html($(\"li.ui-selected\", self.list).text());\n    self.inputSpan.val($(\"li.ui-selected\", self.list).text());\n\n    self.list.find(\"li\").bind(\"click\", function () {\n      self.list.find(\"li\").filter(function () {\n        if ($(this).hasClass(\"ui-selected\")) {\n          return $(this);\n        }\n      }).removeClass(\"ui-selected\");\n\n      $(this).addClass(\"ui-selected\");\n      self.input.blur();\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.list);\n      var value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      var newValue = { id: value, value: label };\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n\n    }).fail(function () {\n      //console.warn(\"combo error\");\n    });\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable && value && typeof value !== \"undefined\" && value !== null && value.id !== \"\") {\n      self.list.find(\"#ui-bizagi-list-\" + value.id).addClass(\"ui-selected\");\n    }\n  },\n\n  /**\r\n      * Setting the display value, always you call a setDisplayValue yor are performinng a setValue under the hood.\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    if (value && _typeof(value) === \"object\" && typeof value.label !== \"undefined\") {\n      var comboValue = value.label != \"\" && !bizagi.util.isNumeric(value.label) ? value.label : this.findDataValueById(value.value).value || \"\";\n\n      if ($.isArray(comboValue)) {\n        comboValue = comboValue.join(\" - \");\n      }\n\n      value = { id: value.value, value: comboValue };\n    }\n\n    var control = this.getControl();\n    $(\"input\", control).val(this.formatItem(value.value));\n\n    //Set Value\n    this.setValue(value);\n  },\n\n  resetData: function resetData() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.hasLocalData = false;\n    properties.data = [];\n    properties.remoteDataLoaded = false;\n\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var value = { id: \"\", value: \"\" };\n    this.setDisplayValue(value);\n  },\n\n  /**\r\n      * Getting the templates\r\n      * */\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Name: BizAgi smartphone Render ECM Extension\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                               *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                               *   -   This script will redefine the ecm render class to adjust to smartphones devices\r\n                                                                                                                                                                                                                                                                                                                                                                               */\n\n\n// Extends itself\nbizagi.rendering.ecm.extend(\"bizagi.rendering.ecm\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, //limit: The maximum number of audio clips,videoclips, etc in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\"] },\n{\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n\n    return $.when(self._super(listControl, fileProperties)).done(function (html) {\n      return html;\n    }).fail(function () {\n      return \"Error\";\n    }).always(function (html) {\n      self.stopLoading();\n      return html;\n    });\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      * @param argument\r\n      */\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    //Remove the required div from the dom in order to have only one any time\n    var control = self.getControl();\n    control.find(\".bz-rn-ecm-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      if (!self.hasValue()) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n\n      self.setPlaceHolder();\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  /**\r\n      * Override because of the required element\r\n      * @override\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n    var control = self.getControl();\n    control.find(\".bz-rn-ecm-required\").remove();\n\n    var properties = self.properties;\n\n    if (properties.required) {\n\n      if (!self.checkRequired([])) {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\"></div>\");\n\n      } else {\n        control.prepend(\"<div class=\\\"bz-rn-ecm-required\\\" style=\\\"display: none\\\"></div>\");\n      }\n    }\n  },\n\n  replaceControlHtml: function replaceControlHtml(html, replace) {\n    html = html || \"\";\n    replace = replace || \"\";\n\n    var respString = $(html.replace(\"{{control}}\", replace));\n\n    if (replace === \"\") {\n      this.startLoading(respString);\n    }\n\n    return respString.get(0).outerHTML;\n  },\n\n  startLoading: function startLoading(holder) {\n    holder = holder || this.getRenderedElement();\n    $(\".ui-bizagi-render-control\", holder).prepend(\"<div class=\\\"innerLoader\\\"></div>\").addClass(\"bz-rn-ecm-control\");\n  },\n\n  stopLoading: function stopLoading() {\n    $(\".innerLoader\", this.getControl()).remove();\n  },\n\n  startWaiting: function startWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $button.addClass(\"loading\");\n    $control.find(\"input, a\").css(\"opacity\", 0.6);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", \"disabled\");\n    $control.find(\"input\").prop(\"readonly\", \"readonly\");\n  },\n\n  stopWaiting: function stopWaiting($button) {\n    var $control = $button.closest(\".bz-rn-ecm-metadata\");\n    $control.find(\"input, a\").css(\"opacity\", 1);\n    $control.find(\".ui-bizagi-render-button, button, input\").prop(\"disabled\", false);\n    $control.find(\"input\").prop(\"readonly\", false);\n    $control.find(\".loading\").removeClass(\"loading\");\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getControl();\n    var containerRender = self.getContainerRender();\n    var control = self.getControl();\n\n    self.itemAddfile = $(\".bz-rn-ecm-upload\", container);\n    self.$inputFile = $(\".bz-rn-upload-files-web\", control);\n\n\n    container.addClass(\"bz-command-edit-inline\");\n\n    setTimeout(function () {\n      control.parent().find(\".ui-bizagi-label\").hide();\n    }, 100);\n\n    if (control.find(\".bz-rn-ecm-url a\").length > 0) {\n      var adjustUrl = control.find(\".bz-rn-ecm-url a\").attr(\"onclick\").replace(\"../../\", \"\");\n      control.find(\".bz-rn-ecm-url a\").attr(\"onclick\", adjustUrl);\n    }\n\n    // ios native behaviour, should open files through a webview\n    if (bizagi.util.isNativePluginSupported()) {\n      var filesLinkElements = control.find(\".bz-rn-ecm-url a\");\n\n      filesLinkElements.removeAttr(\"onclick\");\n\n      filesLinkElements.on(\"click\", function () {\n        bizagi.loading.start();\n        $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n          if (error.responseText) {\n            self.getFormContainer().failHandler(error.responseText);\n          }\n        }).always(function () {\n          bizagi.loading.start();\n        });\n      });\n    }\n\n    self.configureHelpText();\n    self.closeAccordionSection();\n\n    if (!properties.editable) {\n      containerRender.addClass(\"bz-rn-non-editable\");\n    } else {\n      containerRender.addClass(\"bz-command-edit-inline\");\n    }\n\n    $(\".bz-rn-ecm-activate-menu\", control).bind(\"click\", function () {\n      var elementBase = $(this);\n      var parents = elementBase.parents(\".bz-rn-ecm-metadata\");\n      var menu = $(\".bz-rn-ecm-menu-container\", parents);\n\n      if (!$(this).is(\".active\") && !$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        self.closeAccordionSection();\n        $(this).addClass(\"active\");\n        menu.addClass(\"showMenu\");\n      } else if (!$(\".bz-rn-ecm-metadata-container\", parents).is(\".active\")) {\n        $(this).removeClass(\"active\");\n        self.closeAccordionSection();\n      }\n\n      var tmpidElement = elementBase.parent().data(\"idfileupload\") || \"\";\n      self.elementsEvent = {\n        \"menu\": menu,\n        \"lock\": $(\".bz-ecm-lock\", menu),\n        \"unlock\": $(\".bz-ecm-unlock\", menu),\n        \"del\": $(\".bz-ecm-delete\", menu),\n        \"edit\": $(\".bz-ecm-edit\", menu),\n        \"element\": { \"id\": tmpidElement, \"filename\": elementBase.parent().attr(\"title\") || \"\", elementReference: this },\n        \"params\": { idFileUpload: tmpidElement, xPath: self.properties.xpath, idAttrib: self.properties.idAttrib, idPageCache: self.properties.idPageCache, xpathContext: self.getXpathContext() },\n        \"panelMetadata\": $(\".bz-rn-ecm-metadata-container\", parents),\n        \"btnCancel\": $(\".ecm-btn-cancel\", parents),\n        \"btnSave\": $(\".ecm-btn-save\", parents) };\n\n\n      if (menu.is(\":visible\")) {\n        self.addEventsEcm();\n      } else {\n        self.removeEventsEcm();\n      }\n    });\n\n    if (!properties.editable) {\n      self.itemAddfile.hide();\n      return;\n    }\n\n    if (bizagi.util.isCordovaSupported()) {\n      // Upload items\n      var itemsUpload = self.checkExtensions();\n\n      // Upload image\n      $(self.itemAddfile).actionSheet({\n        actions: itemsUpload,\n        actionClicked: function actionClicked(action) {\n          self.handlerUploadImage(action.guid);\n        } });\n\n\n      self.checkMaxFiles();\n    } else\n    {\n      if (bizagi.util.media.fileAPISupported()) {\n        $(self.itemAddfile).off(\"click\").click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        // Bloquea la accin de carga de archivos\n        self.itemAddfile.hide();\n      }\n\n      // Just in case\n      self.$inputFile.off(\"click\").on(\"click\", function (e) {e.stopPropagation();});\n\n      // Image change (Web only)\n      self.$inputFile.off(\"click\").on(\"change\", function () {\n        var dataFile = self.$inputFile[0].files[0];\n        dataFile.fullPath = self.$inputFile[0].value;\n        var extensions = [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO);\n\n        self.startLoading();\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n          $.when(self.uploadFile(dataFile)).done(function (result) {\n            if (_typeof(result) !== \"object\") {\n              // onUploadFileCompleted 2nd param needs to be a response object\n              result = {\n                response: result };\n\n            }\n            self.onUploadFileCompleted(self, result);\n          }).fail(function (error) {\n            self.stopLoading();\n\n            if (error.statusText !== \"Unauthorized\") {\n              bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n            }\n\n            if (error.code === 3) {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n            } else {\n              bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n            }\n            bizagi.log(\"An error has occurred: Code = \" + error.code);\n          });\n\n        } else {\n          self.stopLoading();\n        }\n      });\n    }\n  },\n\n  closeAccordionSection: function closeAccordionSection() {\n    var self = this;\n    var control = self.getControl();\n    var menuItem = $(\".bz-rn-ecm-activate-menu\", control);\n    var menu = $(\".bz-rn-ecm-menu-container\", control);\n    var metadata = $(\".bz-rn-ecm-metadata-container\", control);\n\n    menuItem.removeClass(\"active\");\n    menu.removeClass(\"showMenu\");\n\n    metadata.removeClass(\"active\");\n    metadata.slideUp(300).removeClass(\"open\");\n  },\n\n  addEventsEcm: function addEventsEcm() {\n    var self = this;\n    self.removeEventsEcm();\n\n    self.getControl().find(\".bz-rn-ecm-header .bz-mo-icon.bz-plus[data-action=\\\"add\\\"]\").click(function (event) {\n      event.preventDefault();\n    });\n\n    self.elementsEvent.lock.click(function () {\n      $.when(self.dataService.checkOutFile(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.lock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.unlock.addClass(\"bz-ecm-item-menu-enable\");\n\n      });\n    });\n    self.elementsEvent.unlock.click(function () {\n      $.when(self.dataService.cancelCheckOut(self.elementsEvent.params)).done(function () {\n        self.elementsEvent.unlock.removeClass(\"bz-ecm-item-menu-enable\");\n        self.elementsEvent.lock.addClass(\"bz-ecm-item-menu-enable\");\n      });\n    });\n\n    var nTimeoutAccordionSection = null;\n\n    self.elementsEvent.del.bind(\"click\", function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n      self.startLoading();\n\n      $(self.elementsEvent.element.elementReference).closest(\".bz-rn-ecm-metadata\").css(\"opacity\", 0.5);\n\n      $.when(self.dataService.deleteECMFile(self.elementsEvent.params)).done(function () {\n        self.removeEventsEcm();\n        $(self.elementsEvent.element.elementReference).parents(\".bz-rn-ecm-metadata\").remove();\n\n        //Set files in a temporal array\n        var files = [].concat(self.files);\n\n        //Remove element form files array\n        for (var i = 0; i < files.length; i++) {\n          if (files[i][0] === self.elementsEvent.params.idFileUpload) {\n            files.splice(i, 1);\n          }\n        }\n\n        //Set Value\n        self.setValue(files);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n      }).always(function () {\n        $(self.elementsEvent.element.elementReference).closest(\".bz-rn-ecm-metadata\").css(\"opacity\", 1);\n        self.stopLoading();\n      });\n    });\n\n    self.setMobiscroll();\n\n    self.elementsEvent.edit.click(function () {\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      self.closeAccordionSection();\n\n      if (!self.elementsEvent.panelMetadata.is(\".active\")) {\n        self.elementsEvent.panelMetadata.addClass(\"active\");\n        nTimeoutAccordionSection = setTimeout(function () {\n          self.elementsEvent.panelMetadata.stop().slideDown(300).addClass(\"open\");\n        }, 200);\n      }\n    });\n\n    self.elementsEvent.btnSave.click(function () {\n      var properties = self.properties;\n      var elementsToCheck = $(\".bz-rn-ecm-metadata-value\", self.elementsEvent.panelMetadata);\n      var metadata = [];\n      var isInvalid = false;\n      var $button = $(this);\n\n      // To avoid to be triggered more than once\n      clearTimeout(nTimeoutAccordionSection);\n      //self.closeAccordionSection();\n      //self.startLoading( );\n      self.startWaiting($button);\n\n      for (var metadataelement = 0; metadataelement < elementsToCheck.length; metadataelement++) {\n        var tmpElement = elementsToCheck[metadataelement];\n        var oldValue = $(tmpElement).data(\"value\");\n        var type = $(tmpElement).data(\"metadatatype\");\n        var required = $(tmpElement).data(\"required\");\n        var readonly = $(tmpElement).data(\"readonly\");\n        var description = $(tmpElement).data(\"description\");\n        var idmetadata = $(tmpElement).data(\"idmetadata\");\n        var actualValue = null;\n\n        if (readonly) {\n          self.stopLoading();\n          self.stopWaiting($button);\n          return true;\n        }\n\n        if (type === \"STRING\" || type === \"DECIMAL\") {\n          actualValue = $(\"input\", tmpElement).val();\n        } else if (type === \"BOOL\") {\n          actualValue = $(\"input[name=ecm-radio]:checked\", tmpElement).val();\n        } else if (type === \"DATETIME\") {\n          var format = self.properties.fullFormat ? self.properties.fullFormat : self.getResource(\"fullFormat\") != \"fullFormat\" ? self.getResource(\"fullFormat\") : \"yyyy-MM-dd HH:mm:ss\";\n          actualValue = bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromISO($(\"input\", tmpElement).attr(\"value\"), false), format);\n        }\n\n        if (required && (actualValue === \"\" || actualValue === null)) {\n          bizagi.showMessageBox(description + \": \" + self.getResource(\"render-ecm-tooltip-mandatory\"), \"Error\");\n          isInvalid = true;\n        }\n\n        if (!isInvalid && actualValue != oldValue) {\n          metadata.push({\n            idMetadata: idmetadata,\n            value: actualValue });\n\n        }\n      }\n\n      if (!isInvalid) {\n        var params = self.buildAddParams();\n        params.fileName = self.elementsEvent.element.filename;\n        params.idFileUpload = self.elementsEvent.element.id;\n        params.idPageCache = properties.idPageCache;\n        params.metaValues = JSON.encode({\n          metadataValues: metadata });\n\n\n        $.when(self.dataService.updateECMMetadata(params)).done(function () {\n          self.stopLoading();\n          self.stopWaiting($button);\n        });\n      } else\n      {\n        self.stopLoading();\n        self.stopWaiting($button);\n      }\n    });\n\n    self.elementsEvent.btnCancel.click(function () {\n      self.closeAccordionSection();\n      self.removeEventsEcm();\n    });\n  },\n\n  /**\r\n      * Creates the date picker for the DOM.bz-ecm-metadata-date elements\r\n      */\n  setMobiscroll: function setMobiscroll() {\n    var self = this;\n    var metadataElements = self.elementsEvent.panelMetadata.find(\".bz-ecm-metadata-date\");\n    metadataElements.each(function (index, input) {\n      var $input = $(input);\n      var value = $input.attr(\"value\");\n      var now = new Date();\n      var valueDate = value ? new Date(value) : now;\n      var minDate = now.getTime() < valueDate.getTime() ? now : valueDate;\n\n      minDate.setFullYear(minDate.getFullYear() - 2);\n\n      $input.mobiscroll().calendar({\n        mode: \"mixed\", // Specify scroller mode like: mode: \"mixed\" or omit setting to use default\n        display: \"bottom\", // Specify display mode like: display: \"bottom\" or omit setting to use default\n        controls: [\"calendar\"],\n        min: minDate,\n        defaultValue: valueDate,\n        lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\n        onSet: function onSet(valueText) {\n          // It seems like the plugin doesn't sets the value\n          $input.attr(\"value\", valueText);\n          $input.closest(\".bz-rn-ecm-metadata-item\").find(\".bz-rn-ecm-meta-required\").removeClass(\"bz-rn-ecm-meta-required\");\n        } });\n\n    });\n  },\n\n  removeEventsEcm: function removeEventsEcm() {\n    var self = this;\n\n    self.elementsEvent.lock.unbind(\"click\");\n    self.elementsEvent.unlock.unbind(\"click\");\n    self.elementsEvent.del.unbind(\"click\");\n    self.elementsEvent.edit.unbind(\"click\");\n    self.elementsEvent.btnSave.unbind(\"click\");\n    self.elementsEvent.btnCancel.unbind(\"click\");\n  },\n\n  handlerUploadImage: function handlerUploadImage(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    bizagi.loading.start();\n\n    if (actionSelected === 2) {\n      // Select picture\n      navigator.camera.getPicture(function (dataImage) {\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n          $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            self.fileProperties = fileData;\n            self.saveImage(self, dataImage);\n          });\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, {\n        quality: self.Class.QUALITY_PICTURE,\n        sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n    } else if (actionSelected === 1) {\n      // Take picture\n      navigator.camera.getPicture(function (dataImage) {\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).done(function () {\n          $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            self.fileProperties = fileData;\n            self.saveImage(self, dataImage);\n          });\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      self.onFail,\n      {\n        quality: self.Class.QUALITY_PICTURE,\n        sourceType: navigator.camera.PictureSourceType.CAMERA,\n        mediaType: navigator.camera.MediaType.PICTURE,\n        destinationType: Camera.DestinationType.FILE_URI,\n        correctOrientation: true });\n\n\n    } else if (actionSelected === 3) {\n      // Capture video\n      navigator.device.capture.captureVideo(function (dataImage) {\n        $.when(bizagi.util.media.checkMaxSizeVideo(dataImage, self.properties)).done(function () {\n          self.saveVideo(self, dataImage);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, { limit: self.Class.LIMIT });\n    } else if (actionSelected === 4) {\n      // Capture audio\n      navigator.device.capture.captureAudio(function (mediaFiles) {\n        var audioUrl = mediaFiles[0].localURL;\n        $.when(bizagi.util.media.checkMaxSize(audioUrl, self.properties)).done(function () {\n          self.saveAudio(self, mediaFiles);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, { limit: self.Class.LIMIT });\n    }\n  },\n\n  renderUploadItem: function renderUploadItem(file) {\n    return this._super(file);\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n    bizagi.util.media.checkFileTypes(dataFile, self.properties, [].concat(self.Class.EXTENSIONSIMG, self.Class.EXTENSIONSVIDEO, self.Class.EXTENSIONSAUDIO))) {\n\n      // Get form data for POSTing\n      var formData = new FormData();\n      var form = self.getFormContainer();\n      var data = self.buildAddParams();\n\n      var keys = Object.keys(data);\n      keys.map(function (key) {\n        formData.append(key, data[key]);\n      });\n\n      formData.append(\"Filedata\", dataFile);\n      // It seems like some OS uses \\ instead of / so ...\n      formData.append(\"Filename\", dataFile.name.substr(dataFile.name.replace(/([\\\\\\/]+)/g, \"/\").lastIndexOf(\"/\") + 1));\n\n      if (self.properties.contexttype) {\n        formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", self.properties.contexttype);\n      }\n\n      try {\n        if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n          formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n        } else {\n          formData.append(\"JSESSIONID\", form.properties.sessionId);\n        }\n      } catch (e) {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n\n      self.dataService.processUploadFile({\n        url: self.properties.addUrl,\n        formData: formData }).\n      done(function (response) {\n        defer.resolve(response);\n      }).fail(function (error) {\n        defer.reject(error);\n      });\n\n    } else {\n      bizagi.loading.stop();\n    }\n\n    return defer.promise();\n  },\n\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveAudio: function saveAudio(context, dataAudio) {\n    var self = context;\n    var params = {};\n    var fileName = dataAudio[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataAudio[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var fileName = dataVideo[0].name;\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    addParams[\"xPath\"] = addParams[\"xPath\"];\n    addParams.Filename = fileName;\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.uploadKey = { key: addParams[\"xPath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    bizagi.loading.start();\n    $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n      self.onUploadFileCompleted(context, r);\n    }).fail(function (error) {\n      if (error.code === 3) {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      } else {\n        bizagi.showMessageBox(self.getResource(\"render-ecm-service-general-error\"), \"Error\");\n      }\n\n      bizagi.log(\"An error has occurred: Code = \" + error.code);\n    }).always(function () {\n      bizagi.loading.stop({});\n    });\n  },\n\n  onFail: function onFail(error) {\n    bizagi.log(\"Error code: \" + error.code);\n  },\n\n  onUploadFileCompleted: function onUploadFileCompleted(context, response) {\n    var self = this;\n\n    try {\n      response = JSON.parse(decodeURI(response.response));\n\n      if (response.idFileUpload != \"undefined\" && response.idFileUpload !== null) {\n\n        //self.submitOnChange();\n        var control = self.getControl();\n\n        //Increment counter\n        self.filesCount = self.filesCount + 1;\n        var files = [].concat(self.files);\n        files.push([response.idFileUpload, response.fileName]);\n\n        //Set Value\n        self.setValue(files, false);\n\n        $.when(self.renderControl(null, null)).done(function (result) {\n          control.html(result);\n          self.postRenderSingle();\n        });\n      } else {\n        throw \"not present idFileUpload\";\n      }\n\n    } catch (e) {\n      bizagi.showMessageBox(self.getResource(\"render-ecm-service-not-available\"), \"Error\");\n      bizagi.log(\"Error ECM:\");\n      bizagi.log(e);\n    }\n  },\n\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var maxFiles = properties.maxfiles;\n    var actualFiles = properties.value.length;\n\n    if (maxFiles !== 0 && actualFiles >= maxFiles) {\n      self.itemAddfile.hide();\n    }\n  },\n\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var properties = self.properties;\n    var validExtensions = properties.validExtensions;\n\n    var enableVideo = false;\n    var enableAudio = false;\n    var enableImage = false;\n\n    var itemsUpload = [];\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      enableVideo = enableAudio = enableImage = true;\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        enableVideo = enableAudio = enableImage = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            enableImage = true;\n          }\n\n          if (self.Class.EXTENSIONSAUDIO.toString().indexOf(validExtensions[i]) >= 0) {\n            enableAudio = true;\n          }\n\n          if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\n            enableVideo = true;\n          }\n        }\n      }\n    }\n\n    if (!enableAudio && !enableImage && !enableVideo) {\n      self.itemAddfile.hide();\n    }\n\n    // Add image options\n    if (enableImage) {\n      itemsUpload.push({ \"guid\": 1, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") });\n      itemsUpload.push({ \"guid\": 2, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") });\n    }\n\n    // Audio & Video options will be disabled for a while\n    /*\r\n    // Add video options\r\n    if (enableVideo) {\r\n        itemsUpload.push({ \"guid\": 3, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\") });\r\n    }\r\n          // Add audio options\r\n    if (enableAudio) {\r\n        itemsUpload.push({ \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-record-audio\") });\r\n    }\r\n    */\n\n\n    return itemsUpload;\n  },\n\n  validateFileExtensions: function validateFileExtensions(nameArchivo) {\n    var validExtensions = /(.jpg|.gif|.png|.bmp|.jpeg|.mov|.avi|.mpg|.mpeg|.3gp|.asf|.wmv|.flv|.mp4)$/i;\n\n    return validExtensions.test(nameArchivo);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      if (metaData[0].metadata && metaData[0].metadata.length) {\n        metaData[0].metadata.map(function shapeMetadataValues(meta) {\n          if (meta.metadataType === \"DATETIME\") {\n            // Format the actual date to ISO, so mobiscroll can useit\n            // Before save the value it has to go back to the original format (cause service will accept any format)\n            meta.dateFormat = self.getResource(\"fullFormat\") !== \"fullFormat\" ? self.getResource(\"fullFormat\") : self.properties.fullFormat ? self.properties.fullFormat : \"yyyy-MM-dd HH:mm:ss\";\n            meta.value = meta.value ? bizagi.util.dateFormatter.formatDate(bizagi.util.dateFormatter.getDateFromFormat(meta.value, meta.dateFormat), \"yyyy-MM-dd\") : \"\";\n          }\n        });\n      }\n\n      var html = $.kendoTmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n  /*Check if all meta data fields that's right */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    control = self.getControl(),\n    message = [],\n    error = false,\n    properties = self.properties;\n\n\n    var bValid = true;\n\n    if (properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n      // Call base\n      bValid = newRow ? true : this._super(invalidElements);\n\n      if (self.filesCount === 0 && bValid) {\n\n        invalidElements.push({\n          xPath: properties.xpath,\n          message: self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName) });\n\n        bValid = false;\n      }\n    }\n\n    if (properties.editable) {\n      var $arrayEcmControls = $(\".bz-rn-ecm-container:visible\", control).find(\".bz-rn-ecm-metadata-value[data-required='true']\");\n      $.each($arrayEcmControls, function (key, value) {\n        if ($(\"input\", value).val() === \"\") {\n          message.push($(value).data(\"description\"));\n          error = true;\n        }\n      });\n    }\n\n    if (error) {\n      var errorMessage = self.getResource(\"render-required-text\").replaceAll(\"#label#\", message.join(\", \"));\n      invalidElements.push({\n        xPath: properties.xpath,\n        message: errorMessage });\n\n\n      // If it has error, enable editable view.\n      // open popup\n\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Cleans current value\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n\n    self.setValue(null);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n\n    var arrayItems = control.find(\".bz-rn-ecm-file-container\");\n    var length = arrayItems.length - 1;\n\n    $.each(arrayItems, function (index, value) {\n      var item = $(value);\n      var file = item.data();\n\n      if (file) {\n        $.when(self.deleteUploadItem(item, file.idfileupload)).done(function () {\n          // Detach item\n          item.remove();\n        });\n      }\n    });\n\n    // Check maxFiles\n    self.filesCount = 0;\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /**\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: Bizagi Smartphone Render Yes-No Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: UI Forms Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Yes-No render class to adjust to desktop devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\nbizagi.rendering.searchList.extend(\"bizagi.rendering.searchList\", {\n  SEARCH_MIN_LENGTH: 2,\n  temporalElements: {} },\n{\n  /**\r\n   * RenderSingle Method\r\n   * */\n  renderSingle: function renderSingle() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n\n    //Show the combo icon\n    self.getArrow().remove();\n\n    //Getting all aux templates\n    self.modalViewTemplates = kendo.template(self.renderFactory.getTemplate('searchListModalViewAuxTemplates'), { useWithBlock: false });\n    self.inputTemplates = kendo.template(self.renderFactory.getTemplate('searchListInputAuxTemplates'), { useWithBlock: false });\n\n    //Getting the input\n    self.input = $(\".bz-rn-container-searchlist\", control);\n\n    self.configureListHandlers();\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    // Call base\n    this._super();\n\n    if (!self.properties.editable) {\n      //Add styles class\n      self.configureReadOnly();\n    }\n\n    //trigger click event on remove tag\n    self.input.on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this));\n    });\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n\n    if (self.properties.editable) {\n      if (self.properties.value.length > 0) {\n        self.configureModalView(\".bz-rn-last-child\");\n      } else {\n        self.configureModalView(\"ul\");\n        self.configureModalView(\".bz-rn-last-child\");\n      }\n    }\n  },\n\n  /**\r\n      * Configure the modal view to select values\r\n      * */\n  configureModalView: function configureModalView(selector) {\n    var self = this;\n    var inputContainer = selector === \"\" ? self.input : $(selector, self.input);\n\n    inputContainer.unbind().bind(\"click\", function () {\n      //Getting the values to show\n      var elements = $(\"ul li.bz-rn-regular-element\", self.input);\n      var values = [];\n\n      //Reset the temporal array\n      self.Class.temporalElements = {};\n\n      for (var i = 0, length = elements.length; i < length; i++) {\n        var id = $(elements[i]).data(\"id\");\n        var value = $(\"label\", $(elements[i])).text();\n        var newElement = { 'id': id, 'value': value };\n\n        values.push(newElement);\n\n        //Add element to temporal context array\n        self.addTemporalElement(id, value, false);\n      }\n\n      //Creating modal view\n      var template = self.renderFactory.getTemplate('searchListModalView');\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        'items': values,\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView('open');\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n      }\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(this.value, inputContainer)).always(function () {\n        bizagi.loading.stop({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    }).focus(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").addClass(\"searching\");\n    }).blur(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").removeClass(\"searching\");\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button-searchlist\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      //Show splash loader\n      bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n\n      //Getting and showing the data\n      $.when(self.showResults(term, inputContainer)).always(function () {\n        bizagi.loading.start({ 'selector': \".bz-rn-new-modalview-content-styles\" });\n      });\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Show finded results\r\n      * */\n  showResults: function showResults(value, inputContainer) {\n    var self = this;\n\n    return $.when(self.processRequest({ 'term': value })).done(function (suggestions) {\n      if (suggestions.length === 0) {\n        self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n      } else {\n        //Hide current results\n        $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n\n        //Add new results to list\n        var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"sugestions\", 'items': suggestions }))));\n        newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n\n        //Get list of elements\n        self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n\n        //Setting the initial selected display value\n        self.modalViewList.find(\"li\").unbind().bind(\"click\", function () {\n          //add new element to data control\n          self.appendFoundItem(this, $(\".filter-searchlist-modal-view-tags\", inputContainer));\n\n          if ($(this).siblings().length === 0) {\n            self.showNoResultsMessage(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"), inputContainer);\n          }\n\n          $(this).remove();\n        });\n      }\n    }).fail(function (response) {\n      self.showNoResultsMessage(response, inputContainer);\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele.obj);\n    });\n\n    self.setValue(tempArray);\n\n    //Clear the input\n    $(\"ul li\", self.input).remove();\n\n    //Get the input content\n    var inputContainer = $(\"li\", $(bizagi.util.trim(self.inputTemplates({ 'template': \"inputContainer\", 'value': tempArray }))));\n\n    //Add the input container\n    inputContainer.appendTo($(\"ul\", self.input));\n\n    //unbind current events\n    $(\"ul\", self.input).unbind();\n    $(\".bz-rn-last-child\", self.input).unbind();\n\n    //Trigger click event\n    if (tempArray.length > 0) {\n      self.configureModalView(\".bz-rn-last-child\");\n    } else {\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    }\n  },\n\n  /*\r\n      *   check if the control has value\r\n      */\n  hasValue: function hasValue() {\n    var self = this;\n    return JSON.parse(self.getValue()).value.length > 0;\n  },\n\n  /*\r\n      *   Sets the internal value\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    // Change internal value\n    self.value = JSON.encode({ \"value\": value });\n\n    self.changeRequiredLabel();\n    // Trigger events\n    if (triggerEvents && !self.internalSetInitialValueFlag) {\n      self.triggerRenderChange();\n    }\n  },\n\n  /**\r\n      * Show the correct message if there are elements to show\r\n      * */\n  showNoResultsMessage: function showNoResultsMessage(message, inputContainer) {\n    var self = this;\n    $(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul li\", inputContainer).remove();\n    var newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"modalViewDefaultMessage\", 'message': message }))));\n    newElement.appendTo($(\"#ui-bizagi-wp-filter-results-searchlist-wrapper ul\", inputContainer));\n  },\n\n  /**\r\n      * Append founded item\r\n      * */\n  appendFoundItem: function appendFoundItem(item, container) {\n    var self = this;\n\n    // Map the ids of the elements to an array\n    var uniqueIds = $.map($('li', container), function (val) {\n      return $(val).data('id');\n    });\n\n    // Avoid appending duplicated items\n    if (uniqueIds.indexOf($(item).data(\"id\")) == -1) {\n      var id = $(item).data(\"id\");\n      var value = $(\"label\", item).text();\n      var $newElement = $(\"li\", $(bizagi.util.trim(self.modalViewTemplates({ 'template': \"fullElement\", 'id': id, 'value': value }))));\n\n      // Get the latest item on list to append new li with match word\n      var lastElement = $('li:last', container);\n      if (lastElement.hasClass(\"bz-rn-any-element\")) {\n        lastElement.remove();\n        $('ul', container).prepend($newElement);\n      } else {\n        $('ul', container).prepend($newElement);\n      }\n\n      self.addTemporalElement($(item).data(\"id\"), $(\"label\", item).text(), false);\n    }\n  },\n\n  /**\r\n      * Removen a item from the list\r\n      * */\n  removeItem: function removeItem(element, isModalViewContainer) {\n    var self = this;\n    var li = element.parent();\n    var container = element.closest(\".bz-rn-container-searchlist\");\n\n    if (container.length === 0) {\n      container = element.closest(\".filter-searchlist-modal-view-tags\");\n    }\n\n    if (!isModalViewContainer) {\n      // Remove from main memory and set the new value\n      self.removeElement({ id: li.data(\"id\") });\n    } else {\n      delete self.Class.temporalElements[li.data(\"id\")];\n    }\n\n    // Remove list element\n    li.remove();\n\n    if (container.find(\"li\").length <= 1 && !isModalViewContainer) {\n      $(\".bz-rn-click-to-add-span\", container).removeClass(\"hidden\");\n      self.configureModalView(\"ul\");\n      self.configureModalView(\".bz-rn-last-child\");\n    } else if (container.find(\"li\").length === 0 && isModalViewContainer) {\n      var defaultElement = $(bizagi.util.trim(self.modalViewTemplates({ \"template\": \"modalViewDefaultValue\" })));\n      $(\"li\", defaultElement).appendTo($(\"ul\", container));\n    }\n  },\n\n  /**\r\n      *   Process the request data for the autocomplete control\r\n      */\n  processRequest: function processRequest(req) {\n    var self = this;\n    var properties = self.properties;\n\n    // Create array for response objects\n    var suggestions = [];\n    var defer = new $.Deferred();\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n\n      // Update term property to reflect the search\n      properties.term = req.term;\n      this.getData().\n      done(function (data) {\n\n        // Process response to highlight matches\n        $.each(data, function (i, val) {\n          var parseValue;\n          switch (_typeof(val.value)) {\n            case \"number\":\n              parseValue = val.value;\n              break;\n            case \"object\":\n              parseValue = val.value.toString();\n              break;\n            case \"string\":\n              parseValue = val.value.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + req.term + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"), \"<strong>$1</strong>\");\n              break;\n            default:\n              parseValue = val.value;\n              break;}\n\n\n          if (typeof self.Class.temporalElements[val.id] === \"undefined\") {\n            suggestions.push({\n              id: val.id,\n              label: parseValue,\n              value: val.value });\n\n          }\n        });\n\n        defer.resolve(suggestions);\n      });\n    } else {\n      defer.reject(self.getResource(\"workportal-widget-inboxcommon-no-results-found\"));\n    }\n\n    return defer;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    // Set internal value\n    self.setValue(finalValue);\n\n    if (value !== undefined) {\n      if (properties.editable) {\n        self.input.val(value.label);\n      }\n    }\n  },\n\n  /**\r\n      * When the render isn't editable\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.kendoTmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      editable: false });\n\n  },\n\n  configureReadOnly: function configureReadOnly() {\n    var self = this;\n    var control = self.getControl();\n\n    // Remove click event\n    $(\".bz-rn-last-child\", control).unbind(\"click\");\n    $(\".bz-rn-searchlist-search-icon\", control).unbind(\"click\");\n\n    //hide all elements\n    $(\".bz-rn-click-to-add-span\", control).remove();\n\n    // Remove \"x\" icon from each element on the list\n    $(\".bz-rn-remove-tag-on-search-list\", control).remove();\n\n    self.input.addClass(\"searchListNonEditable\");\n  },\n\n  /**\r\n      * Add new element to the temporal array\r\n      * */\n  addTemporalElement: function addTemporalElement(id, value, elementToRemove) {\n    var self = this;\n\n    if (self.Class.temporalElements[id]) {\n      delete self.Class.temporalElements[id];\n    }\n\n    self.Class.temporalElements[id] = { \"obj\": { \"id\": id, \"value\": value }, \"remove\": elementToRemove };\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Smartphone Render Join Aearch Dialog Extension\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Bizagi Mobile Team\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will redefine the Join Search Dialog render class to adjust to tablet devices\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Extends itself\nbizagi.rendering.search.extend(\"bizagi.rendering.search\", {\n  ADVANCED_SEARCH_ID: -1,\n  ADVANCED_ADDITION_ID: -2,\n  SEARCH_MIN_LENGTH: 3,\n  SEARCH_DELAY: 750 },\n{\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonlySearch\");\n    var value = self.properties.value && self.hasValue() ? self.properties.value.label : \"\";\n\n    return $.kendoTmpl(template, { value: value });\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    //Getting the control content\n    self.input = $(\".bz-rn-container-search\", control);\n    self.inputText = self.input.find(\".bz-rn-input-search-text\");\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n      self.inputText = $('.bz-rn-text', control);\n    }\n\n    if (properties.allowSuggest) {\n      container.addClass(\"bz-command-edit-inline\");\n      if (properties.editable) {\n        self._simplySearch();\n      }\n    }\n\n    self.configureHandlers();\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    if (self.properties.advancedSearch && properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.bind(\"click\", function () {\n        self.renderSearchForm();\n      });\n    }\n\n    if (properties.editable) {\n      self.input.on(\"click\", \".bz-rn-search-control-icons-clear\", function (e) {\n        e.stopPropagation();\n        self.setValue({ id: \"\" });\n        self.inputText.prop(\"value\", \"\");\n        $(this).addClass(\"hidden\");\n        self.inputText.removeClass(\"hasValue\");\n      });\n    }\n  },\n\n  hasValue: function hasValue() {\n    var self = this;\n    return self.getValue() != null && self.getValue().id !== \"\" && typeof self.getValue().id !== \"undefined\";\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"search\");\n\n    var params = {\n      allowSuggest: properties.allowSuggest,\n      editable: properties.editable,\n      allowClear: properties.allowClear,\n      id: properties.id,\n      xpath: properties.xpath,\n      hasValue: self.hasValue(),\n      allowTyping: properties.allowTyping,\n      advancedSearch: properties.advancedSearch,\n      hasMozillaHelpText: $.browser && $.browser.mozilla && properties.helpText !== null && properties.helpText != \"\" ? true : false };\n\n\n    return $.kendoTmpl(template, params);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n\n    // Filter by valid xpaths and valid values\n    // Remove empty validation for value for combos\n    if (!compareValue || compareValue.id !== value.id || $.forceCollectData) {//if original value is equal to value\n      if (!bizagi.util.isEmpty(xpath) && value !== null && typeof value !== \"undefined\") {\n        // Add a validation because sometimes value contains an empty not null object\n        if (_typeof(value) == \"object\" && value.id === undefined)\n        return;\n        // Add the value to the server\n        renderValues[properties.xpath] = value;\n      }\n    }\n  },\n\n  /**\r\n      * Sets the value to show and calls the method to sets the control value\r\n      * @param {object} value\r\n      * @param {int} value.id\r\n      * @param {string} value.label\r\n      * @param {string=} value.additionallabel\r\n      * @example\r\n      *   value = {\r\n      *     id: 123,\r\n      *     label: \"xx\",\r\n      *     additionallabel: \"yyyy\"\r\n      *   }\r\n     */\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var label = \"\";\n    value = self.mapValue(value);\n\n    if (value !== null && typeof value !== \"undefined\" && typeof value.id !== \"undefined\") {\n      if (value.additionallabel && value.label) {\n        label = value.label + \", \" + value.additionallabel;\n      } else if (value.label) {\n        label = value.label;\n      } else {\n        label = \"\";\n      }\n\n      if (self.properties.editable) {\n        self.setValue(value, true);\n        self.inputText.val(label);\n        self.inputText.attr(\"id\", value.id);\n        self.inputText.html(label);\n\n        if (typeof value !== \"undefined\") {\n          self.inputText.addClass(\"hasValue\");\n        } else {\n          self.inputText.removeClass(\"hasValue\");\n        }\n      } else {\n        self.inputText.text(label);\n      }\n    }\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  _simplySearch: function _simplySearch() {\n    var self = this;\n    var control = self.getControl();\n\n    self.inputText.on(\"click keyup\", function () {\n      self.autoCompleteSearchResults();\n    });\n\n    control.on(\"click mousedown\", \"li\", function () {\n      var elemObject = $.data(this).itemautocomplete;\n      var label = Array.isArray(elemObject.value) ? elemObject.value.join(\",\") : elemObject.value;\n      self.setDisplayValue({ id: elemObject.id, label: label });\n      $(this).parent().hide();\n      self.input.find(\".bz-rn-search-control-icons-clear\").removeClass(\"hidden\");\n      self.inputText.addClass(\"hasValue\");\n    });\n\n    control.on(\"focusout\", \"input\", function () {\n      control.find(\"ul\").hide();\n      self.inputText.parent().find(\".bz-rn-autocomplete-wrapper\").addClass(\"hidden\");\n    });\n  },\n\n  /* Apply autocomplete capabilities to a single input*/\n  autoCompleteSearchResults: function autoCompleteSearchResults() {\n    var self = this;\n    var currentValue = self.inputText.val();\n    if (currentValue === \"\") {\n      self.input.find(\".bz-rn-search-control-icons-clear\").addClass(\"hidden\");\n    }\n\n    $.when(\n    self.processRequest({ term: currentValue }, function () {})).\n    done(function (resp) {\n      var wrapper = self.inputText.parent().find(\".bz-rn-autocomplete-wrapper\");\n      if (resp.length > 0) {\n        wrapper.removeClass(\"hidden\");\n      } else {\n        if (!wrapper.hasClass(\"hidden\")) {\n          wrapper.addClass(\"hidden\");\n        }\n      }\n\n      var elementUl = self.inputText.parent().find(\"ul\");\n      elementUl.find(\"li\").remove();\n\n      elementUl.css({\n        display: \"inline-block\",\n        left: self.inputText.position().left,\n        top: self.inputText.position().top + 15,\n        width: self.inputText.css(\"width\") });\n\n\n      for (var i = 0, length = resp.length; i < length; i++) {\n        var searchItem = self.renderSearchItem(resp[i]);\n        $(searchItem).addClass(\"bz-rn-autocomplete-item\");\n        searchItem.appendTo(elementUl);\n      }\n    });\n  },\n\n  renderSearchForm: function renderSearchForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var formSearchParams = $.extend({}, self.getParams(), {\n      navigation: self.getFormContainer().getNavigation() });\n\n\n    var searchForm = new bizagi.rendering.smartphone.helpers.searchForm(self.dataService, self.renderFactory, properties.searchForms, {\n      allowFullSearch: properties.allowFullSearch,\n      maxRecords: properties.maxRecords,\n      allowNew: properties.allowNew || false,\n      orientation: properties.orientation || \"ltr\" },\n\n    formSearchParams);\n\n\n    searchForm.renderEdition({\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      displayName: properties.displayName,\n      idPageCache: properties.idPageCache }).\n    done(function (itemId) {\n      self.setValue({ id: itemId });\n\n      //send the item selected\n      properties.submitOnChange = true;\n\n      self.submitData();\n    });\n  },\n\n  renderSearchItem: function renderSearchItem(item) {\n    var self = this;\n    var searchItem = $.kendoTmpls(self.renderFactory.getTemplate(\"edition.search.item\"), {\n      id: item.id,\n      label: item.label,\n      value: item.value });\n\n\n    searchItem.data(\"itemautocomplete\", item);\n\n    return searchItem;\n  },\n\n  processRequest: function processRequest(req, add) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Create array for response objects   \n    var suggestions = [];\n\n    // Add to suggestions function                \n    function addToSuggestions(alSuggestions) {\n\n      // Add the clear option             \n      /*\r\n       // TODO: To implement allowClear\r\n       if (properties.allowClear && (self.value !== undefined)) {\r\n       alSuggestions.push({ id: self.Class.CLEAR_SEARCH_ID, label: \"\", value: \"\" });\r\n       }*/\n      // Add additional option if advanced search is on\n      if (properties.advancedSearch) {\n        alSuggestions.push({ id: self.Class.ADVANCED_SEARCH_ID, label: \"\", value: \"\" });\n      }\n      // Add additional option if allow addition is on\n      if (properties.allowAdd) {\n        alSuggestions.push({ id: self.Class.ADVANCED_ADDITION_ID, label: \"\", value: \"\" });\n      }\n\n      // Pass array to callback   \n      defer.resolve(alSuggestions);\n\n    }\n\n    if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\n      // Update term property to reflect the search\n      properties.term = req.term;\n      this.getData().\n      done(function (data) {\n        // Process response to highlight matches\n\n        var i = -1;\n        var a;\n        while (a = data[++i] && properties.maxRecords > i && i < 10) {\n          suggestions.push({\n            id: data[i].id,\n            label: data[i].value.toString().replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\" + $.ui.autocomplete.escapeRegex(req.term) + \")(?![^<>]*>)(?![^&;]+;)\", \"gi\"), \"<strong>$1</strong>\"),\n            value: data[i].value });\n\n        }\n\n        addToSuggestions(suggestions);\n\n      }).fail(function () {\n        //fail\n        defer.reject();\n      });\n\n    } else {\n      addToSuggestions(suggestions);\n    }\n\n    /* \r\n       *   Method to add the special items to the suggestions\r\n       */\n    return defer.promise();\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n    var self = this;\n\n    self.inputEdition.find(\".ui-bizagi-render-search\").val(self.selectedValue);\n  },\n\n  //on the desktop only sends the id to submit \n  //in the smartphone it send the id and the value\n  submitData: function submitData() {\n    var self = this;\n    var properties = self.properties;\n\n    // Add current data\n    var data = {};\n\n    data[properties.xpath] = self.getValue();\n\n    // Executes submit on change\n    if (properties.submitOnChange && data[properties.xpath].id != undefined)\n    self.submitOnChange(data, true);\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n\n    self.inputText.html(self.value.value || self.value.label);\n    self.inputText.val(self.value.value || self.value.label);\n    self.inputText.attr(\"id\", self.value.id);\n  } });","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);} /*\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Name: BizAgi Rendering\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Author: Diego Parra\r\n                                                                                                                                                                                                                                                                                                                                                                                *   Comments:\r\n                                                                                                                                                                                                                                                                                                                                                                                *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n                                                                                                                                                                                                                                                                                                                                                                                *       and then process it to create base layout, and then call the device render factory\r\n                                                                                                                                                                                                                                                                                                                                                                                */\n\n// Define BizAgi Rendering namespace\nbizagi.rendering = bizagi.rendering || {};\n\n/*\r\n                                            *   This class will define a method to process the page\r\n                                            *   1. Fetch the data\r\n                                            *   2. Call the device factory to appropriately render the content\r\n                                            */\n$.Class.extend(\"bizagi.rendering.facade\", {\n  form: undefined,\n  executionDeferred: new $.Deferred() },\n{\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    params = params || {};\n\n    // Set observable element\n    this.observableElement = $({});\n\n    // Injection of Device, only for print version purpose\n    var device = params.device || \"\";\n\n    // Defines a device factory for all rendering\n    this.deviceFactory = new bizagi.rendering.device.factory();\n\n    // Creates a data service instance\n    this.dataService = new bizagi.render.services.service(params);\n\n    // Retrieves the render factory\n    this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\n  },\n  getFactory: function getFactory() {\n    var self = this;\n    return {\n      deviceFactory: self.deviceFactory,\n      dataService: self.dataService,\n      renderFactory: self.renderFactory };\n\n  },\n  /*\r\n     *   Subscribe method\r\n     */\n  subscribe: function subscribe() {\n    this.observableElement.bind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Unsubscribe method\r\n     */\n  unsubscribe: function unsubscribe() {\n    this.observableElement.unbind.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   Publish method\r\n     */\n  publish: function publish() {\n    return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\n  },\n  /*\r\n     *   This method will re-execute the process\r\n     */\n  update: function update(params) {\n    var self = this;\n\n    // Update rendering mode\n    if (params.mode)\n    self.mode = params.mode;\n\n    // Enable form buttons on desktop view\n    return self.execute($.extend({\n      canvas: self.canvas,\n      mode: self.mode },\n    params));\n  },\n  /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\n  execute: function execute(params) {\n    var self = this;\n    var doc = this.ownerDocument;\n    var body = $(\"body\", doc);\n    params = params || {};\n\n    // Creates ready deferred\n    if (self.executionDeferred && self.executionDeferred.state) {\n      if (self.executionDeferred.state() == \"resolved\") {\n        self.executionDeferred = $.Deferred();\n      }\n    } else {\n      self.executionDeferred = $.Deferred();\n    }\n\n    // Performance measurement stuff\n    bizagi.chrono.initAndStart(\"rendering+data\", true);\n    bizagi.rendering.render.startOptimization();\n\n    // Override mode\n    if (typeof params.mode === \"undefined\") {\n      if (!bizagi.util.isEmpty(window.location.search)) {\n        var queryString = bizagi.util.getQueryString();\n        params.mode = queryString[\"mode\"];\n      }\n    }\n\n    // If the canvas is not given, we need to create one\n    var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\n    self.mode = params.mode;\n\n    self.sendExecutingPostMessageWebparts();\n\n    self.process(params).done(function (form) {\n\n      // Clear canvas    \n      if (!params.refreshing) {\n        canvas.empty();\n      }\n\n      // Append content\n      canvas.append(form.container);\n\n      // Include process path\n      $(form.pathProcess).insertBefore(form.container);\n\n      // Keep reference in class\n      self.form = form;\n      self.form.setSize({ width: self.lastWidth, height: self.lastHeight });\n\n      // Save window size variables\n      var timeoutResize = setTimeout(function () {\n        self.lastWidth = $(window).width();\n        self.lastHeight = $(window).height();\n        if (window.self !== window.top)\n        self.resizeInPopUpHTML();\n        clearTimeout(timeoutResize);\n      }, 2000);\n\n      // Publish an event to check if the form has been set in the DOM\n      form.triggerHandler(\"ondomincluded\");\n\n      // Notify to module users that the form has been rendered\n      self.publish(\"rendering-formRendered\", { form: form });\n      //Configure triggers\n      self.configureOpenForm(form);\n\n      // Configure handlers\n      self.configureRefresh(form, canvas);\n      self.configureRouting(form, canvas);\n      self.configureRenderError(form, canvas);\n      self.configureResize(form);\n      self.configureGlobalHandlers(form);\n\n      // Check if it is a summary form\n      if (params.summaryForm) {\n        form.container.addClass(\"ui-bizagi-summary-form\");\n      }\n\n      // Ends main timer and log everything\n      bizagi.chrono.stopAndLog(\"rendering\");\n      bizagi.chrono.stopAndLog(\"rendering+data\");\n      bizagi.chrono.stopAndLog(\"submitForm\");\n      bizagi.chrono.stopAndLog(\"submitForm-ajax\");\n      bizagi.chrono.stopAndLog(\"waiting\");\n\n      // Resolves deferred\n      bizagi.rendering.render.stopOptimization();\n\n      // Expose public reference of form\n      if (bizagi.override.enableE2EInterface) {\n        self.Class.form = self.form;\n        self.Class.executionDeferred.resolve(self.form);\n      }\n\n      self.executionDeferred.resolve(self.form);\n\n    }).fail(function (message, errorType) {\n\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n\n        if (typeof message === \"undefined\" || message === \"\") {\n          message = bizagi.localization.getResource(\"render-error-unknown\");\n        }\n\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        self.publish(\"rendering-formRenderedError\", message);\n        self.canvas.triggerHandler(\"errorform\", message);\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering\");\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n\n        self.executionDeferred.reject();\n      });\n    });\n\n    return self.executionDeferred.promise();\n  },\n  /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\n  ready: function ready() {\n    return this.executionDeferred.promise();\n  },\n  /*\r\n     *   Loads data and render factory in order to process the form\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\n  process: function process(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Call get form data service\n    var dataPromise = self.dataService.getFormData(params);\n\n    var canvas = self.canvas || params.canvas;\n\n    bizagi.showErrorAlertDialog = false;\n    // Set callback when requests have been done\n    $.when(dataPromise, self.renderFactory).\n    done(function (data, renderFactory) {\n      bizagi.showErrorAlertDialog = true;\n\n      // When there is no data trigger an event\n      if (bizagi.util.isEmpty(data)) {\n        self.publish(\"no-data-found\");\n        defer.fail();\n        return;\n      }\n\n      if (data && data.type == \"reload\") {\n        var form = self.form;\n        if (form) {\n          form.endLoading();\n          form.dispose();\n        }\n        // Trigger handler on canvas\n        canvas.triggerHandler(\"routing\", data);\n\n      } else if (data && data.type == \"suspended\") {\n        var errorTemplate = renderFactory.getTemplate(\"info-message\");\n        var message = bizagi.localization.getResource(\"render-case-suspended\");\n        var errorHtml = $.tmpl(errorTemplate, {\n          message: message });\n\n        // Remove loading icon from summary container\n        errorHtml.appendTo(canvas);\n\n        defer.fail();\n\n      } else if (data && data.type != \"error\") {\n        if (params.hasOwnProperty('printversion')) {\n          data = self.transformGridControl(data);\n          data.form.properties.editable = \"False\";\n        }\n\n        bizagi.chrono.initAndStart(\"rendering\");\n        params.type = data.form && data.form.properties.type || params.type;\n        var form = self.processForm(data.form, renderFactory, params);\n\n        // Resolve deferred\n        defer.resolve(form);\n\n      } else {\n        self.getFailDeferred(data, defer);\n      }\n    }).fail(function (errorMessage) {\n      self.getFailDeferred(errorMessage, defer);\n    });\n\n    return defer.promise();\n  },\n  /**\r\n      * In the print version widget when grid control was rendered, the main render has broken\r\n      * Is necesary change id of grid control to fixed these  problems\r\n      */\n  transformGridControl: function transformGridControl(data) {\n    var self = this;\n    if (data == null) {\n      return data;\n    }\n\n    if (data.hasOwnProperty('type') && data.type == 'grid') {\n      data.id = data.id + \"-print\";\n      data.allowAdd = \"False\";\n      data.allowDelete = \"False\";\n      data.allowEdit = \"False\";\n      data.allowGrouping = \"False\";\n      data.allowMore = \"False\";\n      data.allowSearch = \"False\";\n    } else {\n      $.each(data, function (key, value) {\n        if (_typeof(value) == 'object') {\n          data[key] = self.transformGridControl(data[key]);\n        }\n      });\n    }\n    return data;\n  },\n  /**\r\n      * Resolve deferred\r\n      */\n  getFailDeferred: function getFailDeferred(errorMessage, defer) {\n    var self = this;\n    var message = \"\";\n    var jsonErrorMessage = {};\n    try {\n      jsonErrorMessage = JSON.parse(errorMessage.responseText);\n    } catch (e) {\n      jsonErrorMessage = { message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\" };\n    }\n\n\n    if (jsonErrorMessage.message) {\n      message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n      message += \"<br>Error Message: \" + jsonErrorMessage.message;\n    } else {\n      if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\n        message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\n      }\n    }\n\n    // Error in metadata InvalidFormMetadata\n    if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\n      defer.reject(message, jsonErrorMessage.errorType);\n    } else {\n\n      defer.reject(message);\n    }\n  },\n  /*\r\n     *   Process the form\r\n     */\n  processForm: function processForm(data, renderFactory, params) {\n    var form = renderFactory.getContainer($.extend(params, {\n      type: params.type || \"form\",\n      data: data }));\n\n\n    // Render the full form\n    form.render();\n\n    return form;\n  },\n  /*\r\n     *   Performs a resize\r\n     */\n  resize: function resize(args) {\n    var self = this;\n    if (self.form) {\n      self.form.trigger(\"renderresize\", args);\n    }\n  },\n  /*\r\n     *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n     */\n  configureRefresh: function configureRefresh(form, canvas) {\n    var self = this;\n\n    // Attach a refresh handler to recreate all the form\n    form.bind(\"refresh\", function (_, refreshParams) {\n\n      // Find the scroll top\n      var parent = form.container.parent();\n      parent = bizagi.util.scrollTop(parent);\n      var scrollTop = parent.scrollTop();\n\n      $(self.form).trigger(\"onRefreshStarted\");\n\n      //Dispose current form\n      form.dispose(refreshParams);\n      canvas.fastEmpty();\n      var canvasParent = canvas.parent();\n      if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\n        canvasParent.find(\".ui-bizagi-button-container\").remove();\n      }\n\n      if (self.executionDeferred && self.executionDeferred.state) {\n        if (self.executionDeferred.state() == \"resolved\") {\n          self.executionDeferred = $.Deferred();\n        }\n      }\n\n      var formParams = self.form.getParams();\n      if (bizagi.util.isMobileDevice() && formParams.isOfflineForm === true) {\n        $.extend(refreshParams, {\n          isOfflineForm: true,\n          offlineType: formParams.offlineType,\n          isOpen: formParams.isOpen });\n\n        refreshParams.online = (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\" ?\n        form.online : bizagi.util.isConnected();\n      }\n\n      // Re-execute process\n      $.when(self.execute($.extend(refreshParams, {\n        canvas: canvas,\n        refreshing: true,\n        idCase: formParams.idCase,\n        displayName: formParams.displayName }))).\n      done(function () {\n\n        // Restore scroll at same position\n        var timeoutTrigger = setTimeout(function () {\n          parent.scrollTop(scrollTop);\n          $(self.form).trigger(\"onRefreshFinished\");\n          clearTimeout(timeoutTrigger);\n        }, 100);\n      });\n\n      return self.executionDeferred.promise();\n    });\n  },\n  /*\r\n     *   Binds a resize hanlder to configure the resize behaviour\r\n     */\n  configureResize: function configureResize(form) {\n    var self = this;\n\n    // Attach resize handler\n    form.bind(\"renderresize\", function (_, args) {\n      args = args || {};\n      // Just allow one resize at a time\n      if (self.resizeTimeout)\n      return;\n      var resizeFn = function resizeFn() {\n        // Call resize event in form\n        var width = $(window).width();\n        var height = $(window).height();\n        if (args.forceResize || width != self.lastWidth) {\n\n          // Logging stuff\n          bizagi.chrono.initAndStart(\"resize\");\n\n          // Perform resize\n          form.resize({\n            width: width,\n            height: height });\n\n          self.lastWidth = width;\n          self.lastHeight = height;\n\n          // Logging stuff\n          bizagi.chrono.stopAndLog(\"resize\");\n          bizagi.chrono.log(\"resize\");\n        }\n\n        self.resizeTimeout = null;\n        clearTimeout(self.resizeTimeout);\n      };\n      self.resizeTimeout = setTimeout(resizeFn, 0);\n\n    });\n    self.resize();\n  },\n  /*\r\n     *   Binds a routing handler to detect when the workportal need to enroute the case\r\n     */\n  configureRouting: function configureRouting(form, canvas) {\n    // Attach a routing handler to notify to the caller\n    form.bind(\"routing\", function (context, triggerParams) {\n      //Dispose current form\n      form.dispose();\n\n      // Trigger handler on canvas\n      canvas.triggerHandler(\"routing\", triggerParams);\n    });\n  },\n  /*\r\n     *   Binds a generic handler that will be replicated to facade instantiators\r\n     */\n  configureGlobalHandlers: function configureGlobalHandlers(form) {\n    var self = this;\n\n    // Attach a routing handler to notify to the caller\n    form.bind(\"globalHandler\", function (_, args) {\n      // Trigger handler on canvas\n      return self.publish(args.eventType, args.data);\n    });\n  },\n  /*\r\n     *   Bind trigger for form opening\r\n     */\n  configureOpenForm: function configureOpenForm(form) {\n    $(document).trigger(\"openForm\", { form: form });\n  },\n\n  /*\r\n     * Binds error form handler to detect when the render element nop posible get information or error in server\r\n     */\n  configureRenderError: function configureRenderError(form, canvas) {\n    var self = this;\n\n    form.bind(\"formRenderingError\", function (event, errorMessage) {\n      $.when(self.renderFactory).\n      done(function (renderFactory) {\n        var message = \"<br>Error: \";\n\n        errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n\n        var jsonErrorMessage = JSON.parse(errorMessage);\n        if (jsonErrorMessage.message) {\n          message += jsonErrorMessage.message;\n          message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\n        }\n        var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\n        // Fill canvas\n        canvas.empty();\n        canvas.append($.tmpl(errorTemplate, {\n          message: message }));\n\n        //send the type error to differentiate between a form and an item for render\n        self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\n        // Ends main timer and log everything\n        bizagi.chrono.stopAndLog(\"rendering+data\");\n        bizagi.chrono.stopAndLog(\"rendering\");\n      });\n    });\n  },\n\n  dispose: function dispose() {\n    var self = this;\n    if (self.form) {\n      self.form.dispose();\n    }\n    bizagi.util.dispose(self);\n  },\n\n  resizeInPopUpHTML: function resizeInPopUpHTML() {\n    if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\n      var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\n      var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\n      var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\n      var heightButtonContainer = buttonContainer.outerHeight() || 0;\n      var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\n      renderBehavior = renderBehavior.replace(\"#\", \"\");\n\n      if (renderBehavior == \"PopUp\") {\n        if (typeof self.postMessageSocket == \"undefined\") {\n          var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\n          $(\"#render-canvas\").height(heightCanvas);\n          $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\n        } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\n        $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\n        $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\n        if ($(\".ui-bizagi-button-container\").length > 1) {\n          $(\".ui-bizagi-button-container:first\").hide();\n          renderForm.css(\"marginTop\", \"-17px\");\n        }\n      }\n      if (buttonContainer.length > 0) {\n        //display buttons\n        renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\n      }\n      if ($(\".ui-bizagi-button-container\").children().length == 0)\n      $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);else\n      {\n        buttonContainer.width(\"100%\");\n        buttonContainer.css(\"marginLeft\", 0);\n        buttonContainer.css(\"bottom\", 0);\n      }\n    } else if (bizagi.util.getQueryString().type == \"render\") {\n      $(\"html\").css(\"overflowX\", \"hidden\");\n      $(\"#render\").height() <= window.innerHeight + 5 ? $(\"html\").css(\"overflowY\", \"hidden\") :\n      $(\"html\").css(\"overflowY\", \"scroll\");\n      $(\".ui-widget-overlay\").height(650);\n    }\n  },\n\n  sendExecutingPostMessageWebparts: function sendExecutingPostMessageWebparts() {\n    if (bizagi && bizagi.iframeCommunicator) {\n      bizagi.iframeCommunicator.trigger(\"executing-rendering\", {});\n    }\n  } });","/*\r\n* jQuery UI Mask @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* Based on the jquery.maskedinput.js plugin by Josh Bush (digitalbush.com)\r\n*\r\n* http://docs.jquery.com/UI/Mask\r\n*\r\n* Depends:\r\n*   ui.core.js\r\n*/\n(function ($) {\n\n  var pasteEventName = (bizagi.util.isEventSupported('paste') ? 'paste' : 'input') + \".mask\";\n\n  $.widget(\"ui.mask\", {\n\n    _init: function _init() {\n\n      var options = this.options,self = this;\n\n      $.extend(this, { caret: function caret(begin, end) {return $.ui.mask.caret(self.element, begin, end);} });\n\n      if (!options.mask || !options.mask.length) {return;} //no mask pattern defined. no point in continuing.\n      if (!options.placeholder || !options.placeholder.length) {\n        options.placeholder = '_'; //in case the user decided to nix a placeholder. \n      }\n\n      this._prepareBuffer();\n      this._bindEvents();\n      this._checkVal(this.element.val().length && options.allowPartials); //Perform initial check for existing values\n    },\n\n    destroy: function destroy() {\n      this.element.\n      unbind('.mask').\n      removeData('mask');\n    },\n\n    value: function value() {\n      var input = this.element,\n      self = this,\n      res = $.map(self.buffer, function (c, i) {return self.tests[i] ? c : null;}).join(''),\n      r = new RegExp('\\\\' + this.options.placeholder, 'gi');\n      return res.replace(r, '');\n    },\n\n    formatted: function formatted() {\n      var r = new RegExp('\\\\' + this.options.placeholder, 'gi'),\n      res = this.element.val();\n      return res.replace(r, '');\n    },\n\n    apply: function apply() {\n      this.element.trigger('apply.mask');\n    },\n\n    _setData: function _setData(key, value) {\n\n      $.widget.prototype._setData.apply(this, arguments);\n      var options = this.options;\n\n      switch (key) {\n        case 'mask':\n          //no mask pattern defined. no point in continuing.\n          if (!options.mask || !options.mask.length) {\n            this.element.unbind('.mask');\n            break;\n          }\n        case 'placeholder':\n          if (!options.placeholder || !options.placeholder.length) {\n            options.placeholder = '_'; //in case the user decided to nix a placeholder.\n          }\n          this.element.val('');\n          this._prepareBuffer();\n          !this.eventsBound && this._bindEvents();\n          break;}\n\n\n    },\n\n    _prepareBuffer: function _prepareBuffer() {\n\n      this._escapeMask();\n\n      var self = this,\n      input = this.element,\n      options = this.options,\n      mask = options.mask,\n      defs = $.ui.mask.definitions,\n      tests = [],\n      partialPosition = mask.length,\n      firstNonMaskPos = null,\n      len = mask.length;\n\n      //if we're applying the mask to an element which is not an input, it won't have a val() method. fake one for our purposes.\n      if (!input.is(':input')) input.val = input.html;\n\n      $.each(mask.split(\"\"), function (i, c) {\n        if (c == '?') {\n          len--;\n          partialPosition = i;\n        } else\n        if (defs[c]) {\n          tests.push(new RegExp(defs[c]));\n          if (firstNonMaskPos == null)\n          firstNonMaskPos = tests.length - 1;\n        } else\n        {\n          tests.push(null);\n        }\n      });\n\n      $.extend(this, {\n        buffer: $.map(mask.split(\"\"), function (c, i) {\n          if (c != '?') {\n            return defs[c] ? options.placeholder : c;\n          }\n        }),\n        tests: tests,\n        firstNonMaskPos: firstNonMaskPos,\n        partialPosition: partialPosition });\n\n\n      this.buffer = $.map(this.buffer, function (c, i) {\n        if (c == \"\\t\") {\n          return self.maskEscaped[i];\n        }\n        return c;\n      });\n\n      this.options.mask = mask = this.maskEscaped;\n    },\n\n    _bindEvents: function _bindEvents() {\n\n      var self = this,\n      input = this.element,\n      ignore = false, //Variable for ignoring control keys\n      focusText = input.val();\n\n      function keydownEvent(e) {\n        e = e || window.event;\n        var pos = self.caret(),\n        k = e.keyCode,\n        keyCode = $.ui.keyCode;\n\n        ignore = k < keyCode.SHIFT || k > keyCode.SHIFT && k < keyCode.SPACE || k > keyCode.SPACE && k < 41;\n\n        //delete selection before proceeding\n        if (pos.begin - pos.end != 0 && (!ignore || k == keyCode.BACKSPACE || k == keyCode.DELETE))\n        self._clearBuffer(pos.begin, pos.end);\n\n        //backspace, delete, and escape get special treatment\n        if (k == keyCode.BACKSPACE || k == keyCode.DELETE) {//backspace/delete\n          self._shiftL(pos.begin + (k == keyCode.DELETE || k == keyCode.BACKSPACE && pos.begin != pos.end ? 0 : -1), Math.abs(pos.begin - pos.end));\n          return false;\n        } else\n        if (k == keyCode.ESCAPE) {//escape\n          input.val(focusText);\n          self.caret(0, self._checkVal());\n          return false;\n        }\n      };\n\n      function keypressEvent(e) {\n\n        e = e || window.event;\n\n        var k = e.charCode || e.keyCode || e.which,\n        keyCode = $.ui.keyCode,\n        len = self.options.mask.length;\n\n        if (ignore) {\n          ignore = false;\n          //Fixes Mac FF bug on backspace\n          return e.keyCode == keyCode.BACKSPACE ? false : null;\n        }\n\n        var pos = self.caret();\n\n        if (e.ctrlKey || e.altKey || e.metaKey) {//Ignore\n          return true;\n        } else\n        if (k >= keyCode.SPACE && k <= 125 || k > 186) {//typeable characters\n          var p = self._seekNext(pos.begin - 1);\n          if (p < len) {\n            var c = String.fromCharCode(k);\n            if (self.tests[p] && self.tests[p].test(c)) {\n              self._shiftR(p);\n              self.buffer[p] = c;\n              self._writeBuffer();\n              var next = self._seekNext(p);\n              self.caret(next);\n              self.options.completed && next == len && self.options.completed.call(input);\n            }\n          }\n        }\n        return false;\n      };\n\n      if (!input.attr(\"readonly\")) {\n        input.\n        bind(\"focus.mask\", function () {\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n          setTimeout(function () {\n            if (pos == self.options.mask.length)\n            self.caret(0, pos);else\n\n            self.caret(pos);\n          }, 0);\n        }).\n        bind(\"blur.mask\", function () {\n          self._checkVal();\n          if (input.val() != focusText)\n          input.change();\n        }).\n        bind(\"apply.mask\", function () {//changing the value of an input without keyboard input requires re-applying the mask.\n          focusText = input.val();\n          var pos = self._checkVal();\n          self._writeBuffer();\n        }).\n        bind(\"keydown.mask\", keydownEvent).\n        bind(\"keypress.mask\", keypressEvent).\n        bind(pasteEventName, function () {\n          setTimeout(function () {self.caret(self._checkVal(true));}, 0);\n        });\n        this.eventsBound = true;\n      }\n    },\n\n    _writeBuffer: function _writeBuffer() {\n      return this.element.val(this.buffer.join('')).val();\n    },\n\n    _clearBuffer: function _clearBuffer(start, end) {\n      var len = this.options.mask.length;\n      for (var i = start; i < end && i < len; i++) {\n        if (this.tests[i])\n        this.buffer[i] = this.options.placeholder;\n      }\n    },\n\n    _seekNext: function _seekNext(pos) {\n      var len = this.options.mask.length;\n      while (++pos <= len && !this.tests[pos]) {;}\n      return pos;\n    },\n\n    _shiftR: function _shiftR(pos) {\n      var len = this.options.mask.length;\n      for (var i = pos, c = this.options.placeholder; i < len; i++) {\n        if (this.tests[i]) {\n          var j = this._seekNext(i);\n          var t = this.buffer[i];\n          this.buffer[i] = c;\n          if (j < len && this.tests[j].test(t)) {\n            c = t;\n          } else\n          {\n            break;\n          }\n        }\n      }\n    },\n\n    _shiftL: function _shiftL(pos, length) {\n\n      while (!this.tests[pos] && --pos >= 0) {;}\n\n      var originalPos = pos,\n      len = this.options.mask.length,\n      placeholder = this.options.placeholder;\n\n      for (var i = pos; i < len && (i >= 0 || length > 1); i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = placeholder;\n          var j = this._seekNext(i);\n          if (j < len && this.tests[i].test(this.buffer[j])) {\n            this.buffer[pos] = this.buffer[j];\n            this.buffer[j] = placeholder;\n            pos++;\n            while (!this.tests[pos]) {pos++;}\n          }\n        }\n      }\n      this._writeBuffer();\n      this.caret(Math.max(this.firstNonMaskPos, originalPos));\n    },\n\n    _checkVal: function _checkVal(allow) {\n      //try to place characters where they belong\n      var input = this.element,\n      test = input.val(),\n      len = this.options.mask.length,\n      lastMatch = -1;\n\n      for (var i = 0, pos = 0; i < len; i++) {\n        if (this.tests[i]) {\n          this.buffer[i] = this.options.placeholder;\n          while (pos++ < test.length) {\n            var c = test.charAt(pos - 1);\n            if (this.tests[i].test(c)) {\n              this.buffer[i] = c;\n              lastMatch = i;\n              break;\n            }\n          }\n          if (pos > test.length)\n          break;\n        } else\n        if (this.buffer[i] == test[pos] && i != this.partialPosition) {\n          pos++;\n          lastMatch = i;\n        }\n      }\n      if (!allow && lastMatch + 1 < this.partialPosition) {\n        if (!this.options.allowPartials || !this.value().length) {\n          input.val(\"\");\n          this._clearBuffer(0, len);\n        } else\n          //if we're allowing partial input/inital values, and the element we're masking isnt an input, then we need to allow the mask to apply.\n          if (!input.is(':input')) this._writeBuffer();\n\n      } else\n      if (allow || lastMatch + 1 >= this.partialPosition) {\n        this._writeBuffer();\n        if (!allow) input.val(input.val().substring(0, lastMatch + 1));\n      }\n      return this.partialPosition ? i : this.firstNonMaskPos;\n    },\n\n    _escapeMask: function _escapeMask() {\n      var mask = this.options.mask,\n      literals = [],\n      replacements = [];\n\n      for (var i = 0; i < mask.length; i++) {\n        var c,temp = mask[i] || mask.charAt(i);\n        if (temp != \"\\\\\" || mask[i - 1] == \"\\\\\") {\n          if (mask[i - 1] == \"\\\\\") {\n            c = \"\\t\";\n            replacements[literals.length] = temp;\n          } else\n          {\n            c = temp;\n          }\n          literals[literals.length] = c;\n        }\n      }\n\n      this.options.mask = literals.join('');\n\n      for (var i = 0; i < literals.length; i++) {\n        if (replacements[i] !== undefined) {\n          literals[i] = replacements[i];\n        }\n      }\n\n      this.maskEscaped = literals.join('');\n    } });\n\n\n\n  $.extend($.ui.mask, {\n    version: \"@VERSION\",\n    getter: \"value formatted\",\n    defaults: {\n      mask: '',\n      placeholder: '_',\n      completed: null,\n      allowPartials: false },\n\n    definitions: { //Predefined character definitions\n      '#': \"[\\\\d]\",\n      'a': \"[A-Za-z]\",\n      '*': \"[A-Za-z0-9]\" },\n\n    caret: function caret(element, begin, end) {//Helper Function for Caret positioning\n      var input = element[0];\n      if (typeof begin == 'number') {\n        end = typeof end == 'number' ? end : begin;\n        if (input.setSelectionRange) {\n          input.focus();\n          input.setSelectionRange(begin, end);\n        } else if (input.createTextRange) {\n          var range = input.createTextRange();\n          range.collapse(true);\n          range.moveEnd('character', end);\n          range.moveStart('character', begin);\n          range.select();\n        }\n        return element;\n      } else {\n        if (input.setSelectionRange) {\n          begin = input.selectionStart;\n          end = input.selectionEnd;\n        } else\n        if (document.selection && document.selection.createRange) {\n          var range = document.selection.createRange();\n          begin = 0 - range.duplicate().moveStart('character', -100000);\n          end = begin + range.text.length;\n        }\n        return { begin: begin, end: end };\n      }\n    } });\n\n\n})(jQuery);","/*\r\n*\r\n* Copyright (c) 2006/2007 Sam Collett (http://www.texotela.co.uk)\r\n* Licensed under the MIT License:\r\n* http://www.opensource.org/licenses/mit-license.php\r\n* \r\n* Version 1.0\r\n* Demo: http://www.texotela.co.uk/code/jquery/numeric/\r\n*\r\n* $LastChangedDate: 2007-05-29 11:31:36 +0100 (Tue, 29 May 2007) $\r\n* $Rev: 2005 $\r\n*/\n\n/*\r\n   * Allows only valid characters to be entered into input boxes.\r\n   * Note: does not validate that the final text is a valid number\r\n   * (that could be done by another script, or server-side)\r\n   *\r\n   * @name     numeric\r\n   * @param    decimal      Decimal separator (e.g. '.' or ',' - default is '.')\r\n   * @param    callback     A function that runs if the number is not valid (fires onblur)\r\n   * @author   Sam Collett (http://www.texotela.co.uk)\r\n   * @example  $(\".numeric\").numeric();\r\n   * @example  $(\".numeric\").numeric(\",\");\r\n   * @example  $(\".numeric\").numeric(null, callback);\r\n   *\r\n   */\njQuery.fn.numeric = function (decimal, callback) {\n  decimal = decimal || \".\";\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n      /* '-' only allowed at start */\n      if (key == 45 && this.value.length == 0) return true;\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */ &&\n      key != 46 /* del */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};\n\njQuery.fn.numericSN = function (decimal, exp) {\n  decimal = decimal || \".\";\n  exp = exp || \"e\";\n  var plus = '+';\n  var minus = '-';\n  callback = typeof callback == \"function\" ? callback : function () {};\n  this.keypress(\n  function (e) {\n    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\n    // allow enter/return key (only when in an input box)\n    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\n      return true;\n    } else\n    if (key == 13) {\n      return false;\n    }\n    var allow = false;\n    // allow Ctrl+A\n    if (e.ctrlKey && key == 97 /* firefox */ || e.ctrlKey && key == 65 /* opera */) return true;\n    // allow Ctrl+X (cut)\n    if (e.ctrlKey && key == 120 /* firefox */ || e.ctrlKey && key == 88 /* opera */) return true;\n    // allow Ctrl+C (copy)\n    if (e.ctrlKey && key == 99 /* firefox */ || e.ctrlKey && key == 67 /* opera */) return true;\n    // allow Ctrl+Z (undo)\n    if (e.ctrlKey && key == 122 /* firefox */ || e.ctrlKey && key == 90 /* opera */) return true;\n    // allow or deny Ctrl+V (paste), Shift+Ins\n    if (e.ctrlKey && key == 118 /* firefox */ || e.ctrlKey && key == 86 /* opera */ ||\n    e.shiftKey && key == 45) return true;\n    // if a number was not pressed\n    if (key < 48 || key > 57) {\n\n      /* only one decimal separator allowed */\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\n        allow = false;\n      }\n      /* only one e character allowed */\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) != -1) {\n        allow = false;\n      }\n\n\n      // check for other keys that have special purposes\n      if (\n      key != 8 /* backspace */ &&\n      key != 9 /* tab */ &&\n      key != 13 /* enter */ &&\n      key != 35 /* end */ &&\n      key != 36 /* home */ &&\n      key != 37 /* left */ &&\n      key != 39 /* right */)\n        {\n          allow = false;\n        } else\n      {\n        // for detecting special keys (listed above)\n        // IE does not support 'charCode' and ignores them in keypress anyway\n        if (typeof e.charCode != \"undefined\") {\n          // special keys have 'keyCode' and 'which' the same (e.g. backspace)\n          if (e.keyCode == e.which && e.which != 0) {\n            allow = true;\n          }\n          // or keyCode != 0 and 'charCode'/'which' = 0\n          else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\n              allow = true;\n            }\n        }\n      }\n      // if key pressed is the exp and it is not already in the field\n      if (key == exp.charCodeAt(0) && this.value.indexOf(exp) == -1) {\n        allow = true;\n      }\n      // if key pressed is the decimal and it is not already in the field\n      if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\n        allow = true;\n      }\n\n      /* allow plus and minus keys*/\n      if (key == minus.charCodeAt(0) || key == plus.charCodeAt(0)) {\n        allow = true;\n      }\n    } else\n    {\n      allow = true;\n    }\n    return allow;\n  }).\n\n  blur(\n  function () {\n    var val = jQuery(this).val();\n    if (val != \"\") {\n      var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\n      if (!re.exec(val)) {\n        callback.apply(this);\n      }\n    }\n  });\n\n  return this;\n};","/* \r\n * Simple Pagination Control for Bizagi Mobile\r\n * @author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n */\n\n(function ($) {\n  $.fn.mobilePagination = function (options) {\n    // define options\n    options = options || {};\n\n    var defaultOptions = {\n      firstPage: 1,\n      totalPages: 1,\n      actualPage: 1,\n      pages: [],\n\n      // Controllers elements\n      listElement: $(\"ul\"),\n      first: '<spaz class=\"bz-mo-icon bz-grid-backwards-fast\"></span>',\n      firstClass: \"first\",\n      previous: '<spaz class=\"bz-mo-icon bz-grid-backwards\"></span>',\n      previousClass: 'previous',\n      next: '<spaz class=\"bz-mo-icon bz-grid-forward\"></span>',\n      nextClass: \"next\",\n      last: '<spaz class=\"bz-mo-icon bz-grid-forward-fast\"></span>',\n      lastClass: \"last\",\n      liClass: \"bz-page\",\n      arrowClass: \"bz-page-arrow\",\n\n      // Call back methods\n      clickCallBack: function clickCallBack() {} };\n\n\n\n    if (options.actualPage > options.totalPages) {\n      options.actualPage = options.totalPages;\n    }\n\n    // Extend options\n    $.extend(defaultOptions, defaultOptions, options);\n\n    var pagination = {\n      previousPage: defaultOptions.actualPage > 1 ? defaultOptions.actualPage - 1 : 1,\n      nextPage: defaultOptions.actualPage < defaultOptions.totalPages ? defaultOptions.actualPage + 1 : defaultOptions.totalPages };\n\n\n    // Modalview template\n    var modalTemplate = \"<div data-role='modalview' class='bz-rn-modal-pagination' style='width: 50%; height: 65%;'>\" +\n    \"\t<div data-role='header' class='bz-rn-modal-pagination-header'>\" +\n    \"\t\t<div class='bz-rn-modal-pagination-header-navigation' data-role='navbar'>\" +\n    \"\t\t\t<div class='bz-rn-modal-pagination-header-title'>\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-title-text'>#=data.title#</span>\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-title-cancel bz-mo-icon bz-cancel'></span>\" +\n    \"\t\t\t</div>\" +\n    \"\t\t\t<div class='bz-rn-modal-pagination-header-search'>\" +\n    \"\t\t\t\t<input class='bz-rn-modal-pagination-header-filter' type='text' placeholder='Type page...' />\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-filter-search bz-mo-icon bz-search'></span>\" +\n    \"\t\t\t\t<span class='bz-rn-modal-pagination-header-filter-cancel bz-mo-icon bz-circle-cross-full'></span>\" +\n    \"\t\t\t</div>\" +\n    \"\t\t</div>\" +\n    \"\t</div>\" +\n    \"\t<div class='bz-rn-modal-pagination-content'>\" +\n    \"\t\t<ul class='bz-rn-modal-pagination-content-list'>\" +\n    \"\t\t\t# $.each (data.list, function (i, item) { #\" +\n    \"\t\t\t<li class='bz-rn-modal-pagination-content-list-item' data-page='#= item.id #'>#= item.value #</li>\" +\n    \"\t\t\t# }) #\" +\n    \"\t\t</ul>\" +\n    \"\t</div>\" +\n    \"\t<div data-role='footer' class='bz-rn-modal-pagination-footer'>\" +\n    \"\t\t<div class='bz-rn-modal-pagination-footer-navigation' data-role='navbar'>\" +\n    \"\t\t\t<a class='bz-rn-modal-pagination-footer-action' data-align='right' data-role='button'>#=data.action#</a>\" +\n    \"\t\t</div>\" +\n    \"\t</div>\" +\n    \"</div>\";\n\n    /**\r\n               * init\r\n               * @returns {} \r\n               */\n    function init() {\n      // Add control elements\n      if (defaultOptions.totalPages && defaultOptions.totalPages > 1) {\n\n        defaultOptions.pages = [];\n        for (var i = 1; i <= defaultOptions.totalPages; i++) {\n          defaultOptions.pages.push({\n            id: i,\n            value: i,\n            active: i === defaultOptions.actualPage });\n\n        }\n\n        renderControlsArrows();\n\n        // Add events\n        attachEvents();\n      }\n    }\n\n    /**\r\n       * Append control arrow to list\r\n       * @returns {} \r\n       */\n    function renderControlsArrows() {\n      // add prev arrow\n      defaultOptions.listElement.prepend(\"<li/>\").find(\"li:first\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.previousClass).\n      data(\"page\", pagination.previousPage).\n      html(defaultOptions.previous);\n\n      // add first arrow\n      defaultOptions.listElement.prepend(\"<li/>\").find(\"li:first\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.firstClass).\n      data(\"page\", defaultOptions.firstPage).\n      html(defaultOptions.first);\n\n      // add next arrow\n      defaultOptions.listElement.append(\"<li/>\").find(\"li:last\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.nextClass).\n      data(\"page\", pagination.nextPage).\n      html(defaultOptions.next);\n\n      // add last arrow\n      defaultOptions.listElement.append(\"<li/>\").find(\"li:last\").\n      addClass(defaultOptions.arrowClass + \" \" + defaultOptions.lastClass).\n      data(\"page\", defaultOptions.totalPages).\n      html(defaultOptions.last);\n    }\n\n    /**\r\n       * Add events\r\n       * @returns {} \r\n       */\n    function attachEvents() {\n      // Click event for list element            \n      $(\"li.\" + defaultOptions.arrowClass, defaultOptions.listElement).click(function () {\n        var page = $(this).hasClass(defaultOptions.lastClass) ? defaultOptions.totalPages : Number($(this).data(\"page\"));\n\n        defaultOptions.clickCallBack({ page: page });\n      });\n\n      // Show popup pager\n      $(\"li.active .bz-page-index\", defaultOptions.listElement).click(function () {\n        showModalPage();\n      });\n    }\n\n    /**\r\n       * show modalview with pages\r\n       * @returns {} \r\n       */\n    function showModalPage() {\n      //var title = bizagi.localization.getResource(\"text-cancel\");\n      var title = \"Go to page\";\n      var placeholder = \"Type page...\";\n      var action = \"GO\";\n\n      var modalPagerTemplate = kendo.template(modalTemplate, { useWithBlock: false });\n      var modalPager = $(modalPagerTemplate({ list: defaultOptions.pages, title: title, placeholder: placeholder, action: action }).trim());\n\n      modalPager.kendoMobileModalView({\n        close: function close() {\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      attachModalHandlers(modalPager);\n\n      // Add arrow on modal\n      modalPager.closest(\".km-modalview-wrapper\").\n      addClass(\"bz-rn-modal-pagination-position\").\n      addClass(\"bz-rn-modal-pagination-container\");\n\n      modalPager.kendoMobileModalView(\"open\");\n    }\n\n    /**\r\n       * Attach events to modalview\r\n       * @param {} modalContainer \r\n       * @returns {} \r\n       */\n    function attachModalHandlers(modalContainer) {\n\n      var listItems = modalContainer.find(\".bz-rn-modal-pagination-content-list li\");\n      var modalListContainer = modalContainer.find(\".bz-rn-modal-pagination-content-list\");\n\n      // Close modalview\n      modalContainer.on(\"click\", \".bz-rn-modal-pagination-header-title-cancel\", function () {\n        modalContainer.kendoMobileModalView(\"close\");\n      });\n\n      // Change to page selected\n      modalContainer.on(\"click\", \".bz-rn-modal-pagination-footer-action\", function () {\n        var itemSelected = modalListContainer.find(\".bz-rn-modal-pagination-content-list-item-selected\");\n\n        if (itemSelected && itemSelected.length > 0) {\n          var page = Number(itemSelected.data(\"page\"));\n\n          modalContainer.kendoMobileModalView(\"close\");\n          defaultOptions.clickCallBack({ page: page });\n        }\n      });\n\n      // Filtering list\n      modalContainer.find(\".bz-rn-modal-pagination-header-filter\").keyup(function (event) {\n        var that = this;\n\n        if (event.which === 13) {\n          search({ container: modalContainer, list: listItems, query: that.value, force: true });\n        } else {\n          if (that.timeout)\n          clearTimeout(that.timeout);\n\n          that.timeout = setTimeout(function () {\n            search({ container: modalContainer, list: listItems, query: that.value });\n          }, 300);\n        }\n      });\n\n      // Cleaning list\n      modalContainer.find(\".bz-rn-modal-pagination-header-filter-cancel\").on(\"click\", function () {\n        search({ container: modalContainer, list: listItems, query: \"\", force: true });\n        modalContainer.find(\".bz-rn-modal-pagination-header-filter\").val(\"\");\n      });\n\n      // List Selectable\n      modalListContainer.on(\"click\", \"li\", function () {\n        var that = this;\n\n        modalListContainer.\n        find(\".bz-rn-modal-pagination-content-list-item-selected\").\n        removeClass(\"bz-rn-modal-pagination-content-list-item-selected\");\n\n        $(that).addClass(\"bz-rn-modal-pagination-content-list-item-selected\");\n      });\n    }\n\n    /**\r\n       * filter pages\r\n       * @param {} params \r\n       * @returns {} \r\n       */\n    function search(params) {\n      var self = this;\n      var container = params.container;\n      var list = params.list;\n\n      if (params.query === self.lastProcessedValue && !params.force) {\n        return;\n      }\n\n      self.lastProcessedValue = params.query;\n\n      if (params.query !== \"\") {\n        if (container.find(\".bz-rn-modal-pagination-header-filter-cancel\").css(\"display\") === \"none\")\n        container.find(\".bz-rn-modal-pagination-header-filter-cancel\").show(500);\n      } else {\n        container.find(\".bz-rn-modal-pagination-header-filter-cancel\").hide(500);\n      }\n\n      // List filter\n      var filter = new RegExp(params.query, \"i\");\n      list.filter(function () {\n        var that = this;\n        if (filter.test($(that).text())) {\n          return $(that);\n        } else {\n          $(that).hide();\n        }\n      }).show();\n    }\n\n    // Init plugin\n    init();\n  };\n})(jQuery);","/**\r\n* Timeago is a jQuery plugin that makes it easy to support automatically\r\n* updating fuzzy timestamps (e.g. \"4 minutes ago\" or \"about 1 day ago\").\r\n*\r\n* @name timeago\r\n* @version 1.3.1\r\n* @requires jQuery v1.2.3+\r\n* @author Ryan McGeary\r\n* @license MIT License - http://www.opensource.org/licenses/mit-license.php\r\n*\r\n* For usage and examples, visit:\r\n* http://timeago.yarp.com/\r\n*\r\n* Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)\r\n*/\n\n(function ($) {\n  $.timeago = function (timestamp) {\n    $t.settings = {\n      refreshMillis: 60000,\n      allowFuture: false,\n      localeTitle: false,\n      cutoff: 0,\n      strings: {\n        prefixAgo: null,\n        prefixFromNow: null,\n        suffixAgo: bizagi.localization.getResource(\"bizagi-editor-form-timeago-ago\"),\n        suffixFromNow: bizagi.localization.getResource(\"bizagi-editor-form-timeago-from-now\"),\n        seconds: bizagi.localization.getResource(\"bizagi-editor-form-timeago-seconds\"),\n        minute: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minute\"),\n        minutes: bizagi.localization.getResource(\"bizagi-editor-form-timeago-minutes\"),\n        hour: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hour\"),\n        hours: bizagi.localization.getResource(\"bizagi-editor-form-timeago-hours\"),\n        day: bizagi.localization.getResource(\"bizagi-editor-form-timeago-day\"),\n        days: bizagi.localization.getResource(\"bizagi-editor-form-timeago-days\"),\n        month: bizagi.localization.getResource(\"bizagi-editor-form-timeago-month\"),\n        months: bizagi.localization.getResource(\"bizagi-editor-form-timeago-months\"),\n        year: bizagi.localization.getResource(\"bizagi-editor-form-timeago-year\"),\n        years: bizagi.localization.getResource(\"bizagi-editor-form-timeago-years\"),\n        wordSeparator: \" \",\n        numbers: [] } };\n\n\n\n    if (timestamp instanceof Date) {\n      return inWords(timestamp);\n    } else if (typeof timestamp === \"string\") {\n      timestamp = timestamp.replace(\".\", \"-\");\n      return inWords($.timeago.parse(timestamp));\n    } else if (typeof timestamp === \"number\") {\n      return inWords(new Date(timestamp));\n    } else {\n      return inWords($.timeago.datetime(timestamp));\n    }\n  };\n  var $t = $.timeago;\n\n  $.extend($.timeago, {\n\n    /*\r\n                        *\r\n                        */\n    inWords: function inWords(distanceMillis) {\n      var $l = this.settings.strings;\n      var prefix = $l.prefixAgo;\n      var suffix = $l.suffixAgo;\n      if (this.settings.allowFuture) {\n        if (distanceMillis < 0) {\n          prefix = $l.prefixFromNow;\n          suffix = $l.suffixFromNow;\n        }\n      }\n\n      var seconds = Math.abs(distanceMillis) / 1000;\n      var minutes = seconds / 60;\n      var hours = minutes / 60;\n      var days = hours / 24;\n      var years = days / 365;\n\n      function substitute(stringOrFunction, number) {\n        var string = $.isFunction(stringOrFunction) ? stringOrFunction(number, distanceMillis) : stringOrFunction;\n        var value = $l.numbers && $l.numbers[number] || number;\n        return string.replace(/%d/i, value);\n      }\n\n      var words = seconds < 45 && substitute($l.seconds, Math.round(seconds)) ||\n      seconds < 90 && substitute($l.minute, 1) ||\n      minutes < 45 && substitute($l.minutes, Math.round(minutes)) ||\n      minutes < 90 && substitute($l.hour, 1) ||\n      hours < 24 && substitute($l.hours, Math.round(hours)) ||\n      hours < 42 && substitute($l.day, 1) ||\n      days < 30 && substitute($l.days, Math.round(days)) ||\n      days < 45 && substitute($l.month, 1) ||\n      days < 365 && substitute($l.months, Math.round(days / 30)) ||\n      years < 1.5 && substitute($l.year, 1) ||\n      substitute($l.years, Math.round(years));\n\n      var separator = $l.wordSeparator || \"\";\n      if ($l.wordSeparator === undefined) {separator = \" \";}\n      return $.trim([prefix, words, suffix].join(separator));\n    },\n    /*\r\n       *\r\n       */\n    parse: function parse(iso8601) {\n      var s = $.trim(iso8601);\n      s = s.replace(/\\.\\d+/, \"\"); // remove milliseconds\n      s = s.replace(/-/, \"/\").replace(/-/, \"/\");\n      s = s.replace(/T/, \" \").replace(/Z/, \" UTC\");\n      s = s.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\n      s = s.replace(/([\\+\\-]\\d\\d)$/, \" $100\"); // +09 -> +0900\n      return new Date(s);\n    },\n    /*\r\n       *\r\n       */\n    datetime: function datetime(elem) {\n      var iso8601 = $t.isTime(elem) ? $(elem).attr(\"datetime\") : $(elem).attr(\"title\");\n      return $t.parse(iso8601);\n    },\n    /*\r\n       *\r\n       */\n    isTime: function isTime(elem) {\n      // jQuery's `is()` doesn't play well with HTML5 in IE\n      return $(elem).get(0).tagName.toLowerCase() === \"time\"; // $(elem).is(\"time\");\n    } });\n\n\n  function inWords(date) {\n    return $t.inWords(distance(date));\n  }\n\n  function distance(date) {\n    return new Date().getTime() - date.getTime();\n  }\n\n})(jQuery);","/**\r\n * Name:\r\n *   Author: Bizagi Mobile team\r\n *   Comments:\r\n * Structure to applicate plugin\r\n *  <div class=\"bz-bizagi-container-tap-popup\"> //container\r\n    <div class=\"cell bz-container-items-tabs\"> // represent item of tab\r\n    <span >${displayName}</span>// the first span always is the title                                    \r\n    <span> ........</span> // after the span can place the items you want\r\n    <div> .........</div> // etc\r\n    </div> <!-- end cell-->\r\n    </div><!-- end bz-bizagi-container-tap-popup-->\r\n**/\n(function ($) {\n  $.fn.bztabs = function (params) {\n\n    var self = $(this);\n\n    params = params || {};\n    params.activeTab = params.activeTab || 0;\n    params.tabNumber = params.tabNumber || 1;\n\n\n    var activate = params.activate && typeof params.activate === \"function\" ? params.activate : function () {};\n    var beforeActivate = params.beforeActivate && typeof params.beforeActivate === \"function\" ? params.beforeActivate : function () {};\n\n    // PopUp control\n    var popUp = self.find(\">div.bz-bizagi-container-tap-popup\").hide();\n    // Depending on tabNumber a percentage will be in the width of each tab\n    var tabCountPopup = popUp.children().length;\n    // Base to build the header of tabs\n    var tabHeader = $(\"<div class='bz-header_select'></div>\");\n\n    var tabCountReal = params.tabNumber > tabCountPopup ? tabCountPopup : params.tabNumber;\n\n    // round down\n    var widthRow = Math.floor(100 / Number(tabCountReal));\n\n    // Duplicate the tabs to create the header\n    popUp.children().each(function (i, item) {\n      tabHeader.append(\n      \"<div class='bz-wp-tabs-ui bz-wp-tabs-item' data-index='\" + i + \"' data-reference-tab='\" +\n      item.getAttribute(\"data-reference-tab\") + \"'><span>\" +\n      item.textContent + \"</span></div>\");\n    });\n\n    tabHeader.find(\"> .bz-wp-tabs-ui\").css(\"width\", widthRow + \"%\");\n    tabHeader.append(\"<div class='bz-wp-tabs-arrow-container'><div class='bz-cm-icon bz-mo-icon bz-plus'></div></div>\");\n\n    self.prepend(tabHeader);\n\n    var tabCurrent = self.find(\"> .bz-bizagi-container-tap-popup > .bz-container-items-tabs\").eq(params.activeTab);\n    var itemCurrent = $($(tabCurrent).data(\"reference-tab\"), self);\n\n    itemCurrent.addClass(\"childrenActive\");\n    tabCurrent.addClass(\"tabSelected\");\n\n    // Mark the selected tab in the header\n    var activeTab = $(\".bz-wp-tabs-ui:nth-child(\" + (params.activeTab + 1) + \")\", tabHeader).addClass(\"tabSelected\");\n\n    // The new width will be added to the tabSelected in order to complete the 100% on tabs\n    var widthTabSelected = widthRow + (100 - widthRow * tabCountReal);\n    activeTab.css(\"width\", widthTabSelected + \"%\");\n\n    function updateTabSize() {\n      if (params.tabNumber < tabCountPopup) {\n        // Select the current tab\n        $(\".bz-wp-tabs-arrow-container\", self).first().addClass(\"show-pluss\");\n        tabHeader.addClass(\"show-pluss\");\n        activeTab.trigger(\"click\", { origin: \"popUp\" });\n      } else {\n        $(\".bz-wp-tabs-arrow-container\", self).removeClass(\"show-pluss\");\n        tabHeader.removeClass(\"show-pluss\");\n        tabHeader.find(\"> .bz-wp-tabs-ui:last\").addClass(\"bz-wp-no-border\");\n      }\n    }\n\n    // Reorder tabs\n    function reorderTabs(dataRef) {\n\n      var tempTabs = tabHeader.find(\".bz-wp-tabs-ui\");\n      var moveAtTheEnd = true;\n\n      tempTabs.each(function (i, item) {\n        if (dataRef !== item.getAttribute(\"data-reference-tab\") && moveAtTheEnd) {\n          tabHeader.remove(\"[data-reference-tab='\" + dataRef + \"']\");\n          tabHeader.append(item);\n        } else {\n          moveAtTheEnd = false;\n        }\n      });\n    }\n\n    // Change tabs\n    function changeTab(e, params) {\n\n      params = params || {};\n      params.origin = params.origin || \"header\";\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(this).hasClass(\"tabSelected\") && params.origin !== \"popUp\") {\n        return;\n      }\n\n      var dataRef = e.currentTarget.getAttribute(\"data-reference-tab\");\n      var tabChildren = $(dataRef, self);\n\n      activeTab = $(e.currentTarget);\n      // Changes the visibility of the contents of the tabs\n      self.find(\">div.childrenActive\").removeClass(\"childrenActive\");\n      tabChildren.addClass(\"childrenActive\");\n\n      // Add the normal width\n      tabHeader.find(\">div.tabSelected\").removeClass(\"tabSelected\").css(\"width\", widthRow + \"%\");\n\n      if (popUp.css(\"display\") === \"block\") {\n        popUp.toggle();\n      }\n\n      if (params.origin && params.origin === \"popUp\") {\n        activeTab = $(\"[data-reference-tab='\" + dataRef + \"']\", tabHeader);\n        reorderTabs(dataRef);\n      }\n\n      // Add the new width for tabSelected to complete the 100%\n      activeTab.addClass(\"tabSelected\").css(\"width\", widthTabSelected + \"%\");\n      activate(e, params);\n    }\n\n    if (typeof params.domIncluded !== \"undefined\") {\n      // Until the control is added to the DOM can be known widths to add the icon popup         \n      $.when(params.domIncluded).done(function () {\n        updateTabSize();\n      });\n    } else {\n      updateTabSize();\n    }\n\n    // Attach events\n    self.find(\".bz-wp-tabs-arrow-container\").first().bind(\"click\", function (event) {\n\n      // Determine if an item is visible or not\n      var headerWidth = tabHeader.innerWidth() - 29;\n      var totalWidth = 0;\n\n      // Remove the visible elements\n      $(\".bz-container-items-tabs\", popUp).removeClass(\"show\");\n\n      tabHeader.find(\".bz-wp-tabs-ui\").each(function (i, item) {\n\n        totalWidth += $(\":first-child\", item).outerWidth();\n\n        // If \"true\" then it is a tab to display the popup\n        if (totalWidth > headerWidth) {\n\n          popUp.children().each(function (j, pop) {\n            if (pop.textContent === item.textContent) {\n              $(pop).addClass(\"show\");\n              $(\".cell.bz-container-items-tabs\").css(\"border-bottom\", \"\");\n              $(\".cell.bz-container-items-tabs.show\").last().css(\"border-bottom\", \"none\");\n\n              return;\n            }\n          });\n        }\n      });\n\n      event.stopPropagation();\n      event.preventDefault();\n      popUp.toggle();\n    });\n\n    $(\">div.cell\", popUp).bind(\"click\", function (e) {\n      changeTab(e, { origin: \"popUp\" });\n    });\n\n    $(\".bz-wp-tabs-ui\", tabHeader).bind(\"click\", changeTab);\n\n    tabHeader.bind(\"resizeHeader\", function () {\n      updateTabSize();\n    });\n  };\n})(jQuery);","/**\r\n *\r\n * Created by RicardoPD on 8/11/2016.\r\n */\n\n(function ($) {\n  $.fn.helpText = function (options) {\n    options = options || {};\n    options.helpText = options.helpText || \"\";\n    options.dir = typeof options.dir !== \"undefined\" && options.dir !== \"\" ? options.dir : \"inherit\";\n\n    var tmpl =\n    '<div class=\"bz-container-rn-helptext-overlay\">' +\n    '   <div class=\"bz-rn-helptext\" dir=\"#: data.dir #\">' +\n    '       <div class=\"bz-cancel-container\">' +\n    '           <a href=\"\\\\#\" style=\"opacity: 0; width: 0; height: 0\"></a>' +\n    '           <span class=\"bz-mo-icon bz-cancel\"></span>' +\n    '       </div>' +\n    '       <span class=\"bz-rn-helptext-text\">#= data.helpText #</span>' +\n    '   </div>' +\n    '</div>';\n\n    var template = kendo.template(tmpl, { useWithBlock: false });\n    var $html = $(template(options));\n\n    $(this).bind(\"click\", function () {\n      $(\"body\").append($html);\n      $(\"body\").css(\"position\", \"fixed\");\n      $(\"a\", $html).get(0).focus();\n      $(\".bz-cancel\", $html).bind(\"click\", function () {\n        $html.remove();\n        $(\"body\").css(\"position\", \"\");\n      });\n      $(\"a\", $html).bind(\"blur\", function () {\n        $(\".bz-cancel\", $html).click();\n      });\n      $html.addClass(\"active\");\n    });\n  };\n})(jQuery);","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\n\n// Create or define namespace\nbizagi.render = typeof bizagi.render !== \"undefined\" ? bizagi.render : {};\nbizagi.render.services = typeof bizagi.render.services !== \"undefined\" ? bizagi.render.services : {};\nbizagi.render.services.endPoints = [];\n\n// Creates a endpoint hash factory to resolve custom requirements\nbizagi.render.services.getEndPoints = function (params) {\n\n  var renderHandlerPathRest = \"Rest/Handlers/Render\";\n  var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\n  var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\n  var letterHandlerPathRest = \"Rest/Handlers/Letter\";\n  var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\n  var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\n  var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\n  // Default workportal end-points\n  if (params.context == \"workflow\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\n      \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\n      \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\n      \"render-query-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsersForQueryFormsById/{queryFormId}/\",\n      \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\n      \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\n      \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\n      \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\n      \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\n      \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\n      \"admin-getUsersList-ForXpathIdBossUser\": params.proxyPrefix + \"Rest/Users/SearchUsersForBosses\",\n      \"admin-getUsersList-ForXpathIdDelegate\": params.proxyPrefix + \"Rest/Users/SearchUsersForDelegates\",\n      \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\n      \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\n      //users administration\n      \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\n      \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\n      \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\" };\n\n  }\n  // Sharepoint end-points (must be customized for each project)\n  if (params.context == \"sharepoint\" || params.context == \"portal\") {\n    if (typeof params.sharepointProxyPrefix === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\n    return {\n      \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\n      \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\n      \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\n      \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\n      \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\n      \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\n      \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\n      \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\n      \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\n      \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\n      \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\n      \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\n      \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\n      \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\n      \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\n      \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\n      \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\n      \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\" };\n\n  }\n\n  if (params.context == \"entitymanagement\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  if (params.context == \"search\") {\n    return {\n      \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\n      \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\n      \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\n      \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\n      \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\" };\n\n  }\n\n  return {};\n};","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\n\n$.Class.extend(\"bizagi.render.services.context\", {}, {\n  /* \r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    this.context = params.context;\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n  },\n\n  /*\r\n     *   Returns the given url for a specified service\r\n     */\n  getUrl: function getUrl(service) {\n    if (this.endPoints[service] == null) {\n      alert(\"No endpoint defined for: \" + service);\n    }\n    return this.endPoints[service];\n  },\n\n  setProxyPrefix: function setProxyPrefix(params) {\n    this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\n    this.endPoints = bizagi.render.services.getEndPoints(params);\n  } });","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"h_pageCacheId\" },\n{\n\n  /*\r\n  *   Sends a multiaction to the server\r\n  */\n  execute: function execute(params) {\n    var self = this;\n\n    // Define data\n    var data = {};\n    var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\n\n    // Check action tag\n    $.each(params.actions, function (i, action) {\n      action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\n      if (action[self.Class.BA_PAGE_CACHE]) {\n        data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\n      }\n      delete action[self.Class.BA_PAGE_CACHE];\n      delete action.tag;\n    });\n\n    // Fill optional parameters\n    params = params || {};\n    if (params.actions) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\n    }\n\n    // Log submit data\n    bizagi.debug(\"Performing multi-action metadata\", data);\n\n    // Call ajax and returns promise\n    var deferred = new $.Deferred();\n    $.ajax({\n      url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\n      data: data,\n      type: \"POST\",\n      dataType: \"json\",\n      serviceType: \"MULTIACTION\",\n      beforeSend: function beforeSend(xhr, status) {\n        bizagi.multiactionConnection = bizagi.multiactionConnection || [];\n        bizagi.multiactionConnection.push(xhr);\n      } }).\n\n    done(function (responses) {\n      for (i in responses) {\n        if (typeof responses[i] !== \"function\") {\n          var response = responses[i];\n          if (response.error) {\n            if (rejectDeferreds) {\n              deferred.reject(this, \"servererror\", response);\n              return;\n            }\n\n          }\n        }\n      }\n      deferred.resolve(responses);\n\n    }).fail(function (xhr) {\n      var response = xhr.responseText || xhr;\n      var finalResponse;\n      // Try to parse the response\n      try {\n        finalResponse = JSON.parse(response);\n      } catch (e) {}\n      deferred.reject(xhr, \"servererror\", finalResponse);\n    });\n\n    return deferred.promise();\n  } });","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\n\n  /* \r\n                                                                                            *   Constructor\r\n                                                                                            */\n  init: function init(form, validations, canvas) {\n    // Enable evalValidation function with console log trace\n    this.enableDebug = false;\n\n    // Call base\n    this._super(form);\n\n    // Perform notifications\n    this.initializeValidations(canvas, validations);\n  },\n\n  /**\r\n      * Perform validations component\r\n      * @param canvas\r\n      * @param validations\r\n      */\n  initializeValidations: function initializeValidations(canvas, validations) {\n    var self = this;\n    var validationBox = $('<div />').appendTo(canvas);\n\n    //Notifies that a modal view appear/disappear\n    $.widget(\"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\n      expand: function expand() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      collapse: function collapse() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      },\n      hide: function hide() {\n        this._super();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n\n    // Apply plugin\n    validationBox.bizagi_notifications({\n      itemIcon: \"ui-icon-circle-close\",\n      minimized: false,\n      clearEnabled: false,\n      title: bizagi.localization.getResource(\"render-form-validations-header-text\"),\n      device: bizagi.util.detectDevice(),\n      orientation: self.form.properties.orientation });\n\n\n    // Bind click\n    validationBox.bind(\"itemClick\", function (e, ui) {\n      self.onNotificationClick(ui.data);\n    });\n\n    // Build validations\n    if (validations) {\n      self.buildValidations(validations);\n    }\n\n    // Keep references\n    self.validationBox = validationBox;\n    self.validations = validations || [];\n  },\n\n  /* \r\n     *   Method to incorporate automatic validation rules \r\n     */\n  buildValidations: function buildValidations(validations) {\n    var self = this;\n    var fnValidations = self.buildAllValidations(validations);\n\n    self.form.bind(\"rendervalidate\", function () {\n      return fnValidations(self);\n    });\n  },\n\n  /* \r\n     *   Method to add a simple error message in the validation box\r\n     */\n  showErrorMessage: function showErrorMessage(message) {\n    bizagi.showErrorAlertDialog = false;\n    this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\n  },\n\n  /* \r\n     *   Method to add a simple alert message in the validation box\r\n     */\n  showAlertMessage: function showAlertMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple info message in the validation box\r\n     */\n  showInfoMessage: function showInfoMessage(message) {\n    this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\n  },\n\n  /* \r\n     *   Method to add a simple validation message in the validation box\r\n     */\n  showValidationMessage: function showValidationMessage(message, focus, icon, itemAdditionalClass, type, renderId) {\n    var self = this;\n    var form = self.form;\n    var render = null;\n\n    if (renderId) {\n      render = form.getRenderById(renderId) || null;\n    } else {\n      render = focus ? form.getRender(focus) : null;\n    }\n\n    bizagi.showErrorAlertDialog = false;\n\n    // Method to perform validations after the render has been changed, or the notifications has been clicked\n    var performValidationFn = function performValidationFn() {\n      // First hide and clear validation box\n      self.clearValidationMessages();\n\n      var lastActionButton = form ? form.getLastActionButton() : {};\n      var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\n\n      if (!skipValidation) {\n        // Run validations\n        self.validating = true;\n        self.performValidations();\n        self.validating = false;\n      }\n\n      // Attempt to hide if there are no validations\n      if (self.countValidationMessages() == 0) {\n        self.hideValidationMessages();\n        self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } else {\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      }\n\n      //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n    };\n    self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    // Add message\n    self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\n\n    if (render) {\n      // Add error message to render\n      render.setValidationMessage(message);\n\n      if (!bizagi.util.isIE8()) {\n\n        // Bind event when render change\n        if (!self.validating) render.bind(\"rendervalidate\", function () {\n          performValidationFn();\n          if (render.properties.retype != \"double\") {\n            render.unbind(\"rendervalidate\");\n          }\n        });\n      }\n    }\n  },\n\n  /*\r\n     *   Count the number of validation messages\r\n     */\n  countValidationMessages: function countValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"count\");\n  },\n\n  /*\r\n     *   Remove all the validations\r\n     */\n  clearValidationMessages: function clearValidationMessages(params) {\n    var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\n\n    return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\n  },\n\n  /*\r\n     *   Hide the validation notifications box\r\n     */\n  hideValidationMessages: function hideValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"hide\");\n  },\n\n  /*\r\n     *   Show the validation notifications box\r\n     */\n  showValidationMessages: function showValidationMessages() {\n    return this.validationBox.bizagi_notifications(\"show\");\n  },\n\n  /*\r\n     *   Expand the notification box\r\n     */\n  expandNotificationBox: function expandNotificationBox(autofocus) {\n    // Select first error and expand notifications\n    if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\n    return this.validationBox.bizagi_notifications(\"expand\");\n  },\n\n  isExpandedNotificationBox: function isExpandedNotificationBox() {\n    return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\n  },\n\n  /*\r\n     *   Run all validation rules in the form container\r\n     */\n  performValidations: function performValidations(invalidElements) {\n    var self = this;\n\n    // First hide and clear validation box\n    self.clearValidationMessages();\n    self.validationBox.bizagi_notifications(\"initBatch\");\n\n    // Run render validations\n    var bRendersValid = self.validateRenders(invalidElements);\n\n    // Run form validations\n    var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\n    self.validationBox.bizagi_notifications(\"endBatch\");\n\n    // Show validations if invalid\n    if (!bFormValid || !bRendersValid) {\n      self.validationBox.bizagi_notifications(\"show\");\n      return false;\n    }\n\n    return true;\n  },\n\n  /* PRIVATE METHODS */\n\n  /*  \r\n                        *   Construct validations javascript rules\r\n                        */\n  buildAllValidations: function buildAllValidations(validations) {\n    var self = this;\n    var sJSCode = \"\";\n\n    for (var i = 0; i < validations.length; i++) {\n\n      var isEnabled = validations[i].enabled != undefined ? validations[i].enabled : true;\n      if (isEnabled) {\n        // If validation is not \"valid\" we can omit that instruction\n        try {\n          sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\n        } catch (e) {\n          if (e.message != \"RenderNotFoundException\") {\n            bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\n          }\n        }\n      }\n    }\n\n    // Build final function\n    var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\n\n    // Return interpreted function\n    return self.evalValidation(sStatement);\n  },\n\n  /*\r\n     *   Build a single javascript validation rule\r\n     */\n  buildValidation: function buildValidation(conditions, validationCommand) {\n    var self = this;\n    var sJsCondition = \"\";\n    var sJsValidation = \"\";\n\n    // Detect grid references\n    var gridReference = self.searchForGridReference(conditions);\n    var bGridDetected = gridReference != null;\n    var validateEditability = typeof bizagi.override.validateEditabilityOnValidations != \"undefined\" ? bizagi.override.validateEditabilityOnValidations : true;\n\n    // Build Conditions\n    sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, validateEditability) + \" )\";\n\n    // Fix message for quotes and break lines\n    validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\n    validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\n\n    // Build Message\n    var focus = validationCommand.focus || \"\";\n    if (bGridDetected) focus = gridReference;\n    if (validationCommand.tokens)\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";else\n\n    sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\n\n    // Build final statement\n    if (!bGridDetected) {\n\n\n      return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\n    } else {\n      var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\n      sGridStatement += \"if(grid === null) return true;\\r\\n\";\n      sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\n      sGridStatement += \"var bGridValid = true;\\r\\n\";\n      sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\n      sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\n      sGridStatement += \"});\\r\\n\";\n      sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\n      return sGridStatement;\n    }\n  },\n\n  /* \r\n     *   Method triggered when the validation item has been clicked\r\n     */\n  onNotificationClick: function onNotificationClick(data) {\n    var self = this;\n    var form = self.form;\n    var xpath = data.focus;\n    var renderId = data.id;\n\n    if (xpath) {\n      var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\n\n      if (render) {\n        render.focus();\n      }\n    }\n  },\n\n  /* \r\n     *   Method to loop\r\n     */\n  validateRenders: function validateRenders(invalidElements) {\n    var self = this;\n    invalidElements = invalidElements || [];\n\n    // Do a check\n    var bValid = self.form.isValid(invalidElements);\n    if (!bValid) {\n      invalidElements.forEach(function (element) {\n        if (element.id) {\n          // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\n          self.showValidationMessageById(element.message, element.xpath, element.id);\n        } else if (element.message || element.xpath) {\n          self.showValidationMessage(element.message, element.xpath);\n        }\n      });\n    }\n\n    return bValid;\n  },\n\n  /*\r\n     *\tEval validation string, for debug purposes\r\n     */\n  evalValidation: function evalValidation(command) {\n    var self = this;\n\n    if (self.enableDebug && console != undefined) {\n      console.log(command);\n    }\n\n    return eval(command);\n  },\n\n  /**\r\n      * Method to add a simple validation message in the validation box\r\n      * @param message\r\n      * @param xpath\r\n      * @param renderId\r\n      */\n  showValidationMessageById: function showValidationMessageById(message, xpath, renderId) {\n    this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\n  } });","/*\r\n *   Name: Bizagi Rendering Validation controller \r\n *   Author: Richar Urbano <Richar.Urbano@Bizagi.com\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\n\n// Override to support the change of the visibility and editability over forms buttons\nbizagi.command.controllers.action.extend(\"bizagi.command.controllers.action\", {}, {\n\n  /**\r\n                                                                                     * Sets a new color for the background of the button\r\n                                                                                     * Applies also to grid cells!\r\n                                                                                     * @param {} xpath \r\n                                                                                     * @param {} color \r\n                                                                                     * @returns {} \r\n                                                                                     */\n  changeButtonBackground: function changeButtonBackground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Sets a new color for the foreground of the render\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonForeground: function changeButtonForeground(xpath, color) {\n    if (this.form && !this.form.isFloatingButtonsEnabled())\n    this._super(xpath, color);\n  },\n\n  /**\r\n      * Changes the visibility of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonVisibility: function changeButtonVisibility(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**     \r\n      * Changes the editability of the button\r\n      * @param {} xpath \r\n      * @param {} argument \r\n      * @returns {} \r\n      */\n  changeButtonEditability: function changeButtonEditability(xpath, status) {\n    var self = this;\n\n    if (self.form && !self.form.isFloatingButtonsEnabled()) {\n      self._super(xpath, status);\n    } else {\n      self.changeFloatingButtonVisibility(xpath, status);\n    }\n  },\n\n  /**\r\n      * Helper to override the visibility and editability\r\n      * @param {} xpath \r\n      * @param {} status \r\n      * @returns {} \r\n      */\n  changeFloatingButtonVisibility: function changeFloatingButtonVisibility(xpath, visible) {\n    var self = this;\n    var form = self.form;\n    var guid = xpath.substring(3);\n    var navigation = form.getNavigation();\n    var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\n    var isVisible = bizagi.util.parseBoolean(visible) !== false;\n    var index = buttons.findIndex(function (item) {return item.id === guid;});\n\n    if (index !== -1)\n    buttons[index].visible = isVisible;\n\n    form.buttons = buttons || [];\n    navigation.setNavigationButtons(form);\n  } });","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.element\", {\n  ELEMENT_TYPE_CONTAINER: 1,\n  ELEMENT_TYPE_RENDER: 2,\n  ELEMENT_TYPE_COLUMN: 3 },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    // Set render factory\n    this.renderFactory = params.renderFactory;\n\n    // Set data service\n    this.dataService = params.dataService;\n\n    // Set reference to parent\n    this.parent = params.parent;\n\n    // Set l10n service\n    this.resources = bizagi.localization;\n\n    // Set the observable element\n    this.observableElement = $(\"<div />\");\n\n    // Set the dispose flag\n    this.disposed = false;\n\n    // Update data\n    this.initializeData(params.data);\n\n    // Define an object to hold the subscribe collection\n    this.subscribers = [];\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Set the internal data\n    this.properties = {};\n    if (data && data.properties) this.properties = data.properties;\n\n    // Set xpath context\n    this.properties.xpathContext = this.getXpathContext();\n\n    // Set page cache\n    this.properties.idPageCache = this.getPageCache();\n\n    //History of visual changes from actions\n    self.visualChanges = self.visualChanges || {};\n  },\n\n  /*\r\n     *   Returns the xpath context of the element\r\n     */\n  getXpathContext: function getXpathContext() {\n    // By default return parent's xpath context\n    // This method is overriden in form container which contains the real xpath context\n\n    return this.parent != undefined && typeof this.parent.getXpathContext == \"function\" ? this.parent.getXpathContext() : \"\";\n  },\n\n  /*\r\n     *   Returns the xpath of the element\r\n     */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n  /*\r\n     *   Returns the page cache for the current element\r\n     */\n  getPageCache: function getPageCache() {\n    // By default return parent's page cache\n    // This method is overriden in form container which contains the real page cache\n\n    return this.parent != undefined && typeof this.parent.getPageCache == \"function\" ? this.parent.getPageCache() : \"\";\n  },\n\n  /*\r\n     *   Returns the form containing the element\r\n     */\n  getFormContainer: function getFormContainer() {\n    // By default return parent's form container\n    // This method is overriden in form container which returns itself\n    if (typeof this.parent != \"undefined\")\n    return this.parent.getFormContainer();\n  },\n\n\n  /*\r\n     *   Returns the mapped resource\r\n     */\n  getResource: function getResource(key) {\n    return this.resources.getResource(key);\n  },\n\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {},\n\n  /*\r\n                                                *   Resizes the element\r\n                                                */\n  resize: function resize(size) {\n\n  },\n\n  /*\r\n     *   Focus on the current element\r\n     */\n  focus: function focus() {\n\n    if (this.properties.required) {\n      var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\n      // Check if element is visible into scroll\n      if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\n        $(this.element).attr('tabindex', -1).focus();\n      }\n      if (this.element) {\n        this.element.effect('highlight', 2000);\n      }\n    }\n\n    //Check if the element has parent\n    if (this.parent && typeof this.parent.focus == 'function') {\n      this.parent.focus();\n    }\n  },\n\n  /*\r\n     *   Publish a global event that the facade will replicate\r\n     */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event inside the control\r\n     */\n  trigger: function trigger(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.trigger(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Triggers an event handler inside the control\r\n     */\n  triggerHandler: function triggerHandler(eventType, data) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\n    return null;\n  },\n\n  /*\r\n     *   Binds to an event\r\n     */\n  bind: function bind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.bind(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Un-binds to an event\r\n     */\n  unbind: function unbind(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.unbind(eventType, fn);\n    return null;\n  },\n\n  /*\r\n     *   Binds a one time event\r\n     */\n  one: function one(eventType, fn) {\n    if (this.disposed) return null;\n    if (this.observableElement) return this.observableElement.one(eventType, fn);\n    this.subscribers.push({ event: eventType });\n    return null;\n  },\n\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {},\n\n  /*\r\n                                                        *   Get current rendering mode\r\n                                                        */\n  getMode: function getMode() {\n    if (this.parent) return this.parent.getMode();\n  },\n\n  /*\r\n     *   Get current rendering params\r\n     */\n  getParams: function getParams() {\n    if (this.parent) return this.parent.getParams();\n  },\n\n  /*\r\n     * Get current form type (ex. queryform, form)\r\n     */\n  getFormType: function getFormType() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    return form.properties.type || \"form\";\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {},\n\n  /*\r\n                              *   Returns a promise that will resolve when the element is ready to save\r\n                              */\n  isReadyToSave: function isReadyToSave() {},\n\n  /*\r\n                                              *   Get the custom handlers set for this execution\r\n                                              */\n  getCustomHandlers: function getCustomHandlers() {\n    return null;\n  },\n\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n    self.disposed = true;\n\n    var timeOutDispose = setTimeout(function () {\n      if (self.subscribers != null) {\n        // Remove all subcriptions\n        $.each(self.subscribers, function (i, item) {\n          self.unbind(item.event);\n        });\n      }\n      delete self.subscribers;\n\n      if (self.observableElement) self.observableElement.off();\n      bizagi.util.dispose(self);\n      clearTimeout(timeOutDispose);\n    }, bizagi.override.disposeTime || 50);\n  },\n\n  /*\r\n     *   Check if the current object is disposed\r\n     */\n  isDisposed: function isDisposed() {\n    return this.disposed;\n  },\n\n  /*\r\n     *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n     */\n  processFailMessage: function processFailMessage(message) {\n    var self = this;\n    var form = self.getFormContainer();\n    var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\n\n    if (message.errorType === \"CustomMessageException\") {\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      var error = bizagi.localization.getResource(message.message);\n      form.validationController.showErrorMessage(error);\n    } else if (message.errorType === \"InvalidCaseStateException\") {\n      var params = form.getParams();\n\n      form.validationController.clearValidationMessages();\n\n      // Redirection Here\n      form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\n    } else {\n      var message = message || {};\n      message = typeof message == \"string\" ? JSON.parse(message) : message;\n      var type = message.type || \"error\";\n      var code = message.code || \"code\";\n      message = message.responseText || message.message || message;\n\n      // Omit processing when the ajax didn't process\n      if (type === \"not-processed\") return;\n      if (type === \"not-shown\") return;\n      if (isOfflineForm && code === \"AUTH_ERROR\") return;\n\n      // Clear previous validations\n      form.validationController.clearValidationMessages();\n      if (type == \"alert\") {\n        form.validationController.showAlertMessage(message);\n      } else {\n        form.validationController.showErrorMessage(message);\n      }\n    }\n\n    return message;\n  },\n\n  /*\r\n     *   Sets a waiting overlay above the current element\r\n     */\n  startLoading: function startLoading() {/* Override in implementations */},\n\n  /*\r\n                                                                             *   Removes the waiting overlay\r\n                                                                             */\n  endLoading: function endLoading() {/* Override in implementations */},\n\n  /**\r\n                                                                          *   Prepare control to remove it from the render, that allows to\r\n                                                                          *   clean all elements of the control or to do any stuff before to remove\r\n                                                                          */\n  beforeToRefresh: function beforeToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      *   Run before that the control has been refreshed\r\n      */\n  afterToRefresh: function afterToRefresh() {\n    /* Implement in each render and container if you need */\n  },\n\n  /**\r\n      * This method returns the localized version of the resource\r\n      * @param resource\r\n      * @param fallback\r\n      * @returns {string}\r\n      */\n  getResourceByKey: function getResourceByKey(resource, fallback) {\n    fallback = fallback || resource;\n\n    return bizagi.localization.getResource(resource, fallback);\n  },\n  /**\r\n      * Restore appearance using type of command\r\n      */\n  restoreAppearance: function restoreAppearance() {\n    var self = this;\n\n    for (var command in self.visualChanges) {\n\n      switch (command) {\n        case \"color\":\n          self.changeColor(self.visualChanges[command]);\n          break;\n        case \"backgroundColor\":\n          self.changeBackgroundColor(self.visualChanges[command]);\n          break;\n        case \"required\":\n          self.changeRequired(self.visualChanges[command]);\n          break;\n        case \"editability\":\n          self.changeEditability(self.visualChanges[command]);\n          break;\n        case \"visibility\":\n          self.changeVisibility(self.visualChanges[command]);\n          break;\n        case \"minValue\":\n          self.changeMinValue(self.visualChanges[command]);\n          break;\n        case \"maxValue\":\n          self.changeMaxValue(self.visualChanges[command]);\n          break;}\n\n    }\n  },\n\n  getOrientation: function getOrientation() {\n    var control = this;\n    while (control) {\n      properties = control.properties || {};\n      if (properties.orientation !== \"auto\") return properties.orientation;\n      control = control.parent;\n    }\n    return \"auto\";\n  } });","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\n\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\n  TYPE_QUERY_FORM: \"queryForm\" },\n{\n\n  /*\r\n  *   Update or init the element data\r\n  */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Set defaults\n    var properties = self.properties;\n    properties.uniqueId = Math.ceil(Math.random() * 1000000);\n    properties.editable = typeof properties.editable != \"undefined\" ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.visible = typeof properties.visible != \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Override orientation from parent if not set\n    properties.orientation = properties.orientation || \"auto\";\n\n    // Save original properties\n    this.originalProperties = JSON.parse(JSON.encode(properties));\n\n    // Create children\n    this.children = [];\n    this.childrenHash = {};\n\n    if (data.elements) {\n      $.each(data.elements, function (i, element) {\n        if (element.render) {\n          self.createRenderElement(element);\n        } else if (element.container) {\n          self.createContainerElement(element);\n        } else if (element.form) {\n          self.createFormElement(element);\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Creates a render element\r\n     */\n  createRenderElement: function createRenderElement(element) {\n    var self = this;\n    var properties = self.properties;\n    var originalElement;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.render.properties.editable = properties.editable;\n      /*if (element.render.properties.type == \"grid\")\r\n                                                                    element.render.properties.inlineEdit = false;*/\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.render.properties.required = properties.required;\n    }\n\n    //clone originalElement to apply duplicate render properties correctly\n    if (element.render.properties.retype == \"duplicate\") {\n      originalElement = bizagi.clone(element);\n    }\n\n    var render = self.renderFactory.getRender({\n      type: element.render.properties.type,\n      data: element.render,\n      dataService: self.dataService,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Add to children\n    self.children.push(render);\n\n    // Check for duplicate\n    if (element.render.properties.retype == \"duplicate\") {\n      self.processDuplicateRender(render, originalElement);\n    }\n\n    //TODO: at this point not posible add the retype double at this point not exist input\n\n    // Register in form container\n    self.getFormContainer().registerRender(render);\n  },\n  /*\r\n     *   Creates a container element\r\n     */\n  createContainerElement: function createContainerElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    // Replicate required property when container is not required\n    if (properties.required === false) {\n      element.container.properties.required = properties.required;\n    }\n\n    var container = self.renderFactory.getContainer({\n      type: element.container.properties.type,\n      data: element.container,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode(),\n      isDesign: self.getMode() === \"design\" });\n\n\n    self.children.push(container);\n\n    // Register in form container\n    self.getFormContainer().registerRender(container);\n  },\n  /*\r\n     *   Creates a form element\r\n     */\n  createFormElement: function createFormElement(element) {\n    var self = this;\n    var properties = self.properties;\n\n    // Replicate editable property when container is not editable\n    if (properties.editable == false) {\n      element.container.properties.editable = properties.editable;\n    }\n\n    var form = self.renderFactory.getContainer({\n      type: element.form.properties.type || \"form\",\n      data: element.form,\n      parent: self,\n      dataService: self.dataService,\n      mode: self.getMode() });\n\n    self.children.push(form);\n  },\n  /*\r\n     *   Gets the current container\r\n     */\n  getElement: function getElement() {\n    var self = this;\n    return self.container;\n  },\n  /*\r\n     *   Gets a collection for all elements matching a type\r\n     */\n  getElementsByType: function getElementsByType(type, elements) {\n    elements = elements || [];\n    var self = this;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.properties.type == type) {\n        elements.push(child);\n      }\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.getElementsByType(type, elements);\n      }\n    });\n\n    return elements;\n  },\n  /*\r\n     *   Process renders with duplicate property\r\n     */\n  processDuplicateRender: function processDuplicateRender(render, element) {\n    var self = this;\n    var clonedElement = JSON.parse(JSON.encode(element.render));\n\n    // Changes properties\n    clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\n    clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\n    clonedElement.properties.isClone = true;\n\n    // Creates clone\n    var clone = self.renderFactory.getRender({\n      type: clonedElement.properties.type,\n      data: clonedElement,\n      parent: self,\n      mode: self.getMode() });\n\n\n    // Associates with main render\n    render.cloneRender = clone;\n\n    // Add to collection\n    self.children.push(clone);\n  },\n  /*\r\n     *   Returns the element type\r\n     */\n  getElementType: function getElementType() {\n    return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\n  },\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  render: function render() {\n    var self = this,\n    mode = self.getMode(),\n    result;\n\n    // Render container\n    result = self.internalRender();\n\n    // Apply container defaults\n    self.applyContainerDefaults();\n\n    // Add container id\n    result.attr(\"data-container-id\", self.properties.id);\n\n    //Add container tag property\n    if (self.properties.tag) {\n      result.attr(\"data-tag\", self.properties.tag);\n    }\n\n    //Add class to the requested form, to specify if is add form, edit form, or detail form\n    if (self.params)\n    if (self.params.requestedForm)\n    result.addClass(self.params.requestedForm);\n\n    return result;\n  },\n  /*\r\n     *   Internal  rendering\r\n     */\n  internalRender: function internalRender() {\n    var self = this;\n\n    // Render the container\n    var html = self.renderContainerHtml();\n\n    // Convert html string to jquery object\n    var container = self.container = $(html);\n\n    // Post-render\n    self.postRenderContainer(container);\n\n    return self.container;\n  },\n  /*\r\n     *   Renders container html\r\n     */\n  renderContainerHtml: function renderContainerHtml() {\n    var self = this;\n    // Start rendering deferred\n    self.renderingDeferred = self.renderingDeferred || new $.Deferred();\n\n    return this.renderContainer();\n  },\n  /*\r\n     *   Check if the jquery element is ready or not\r\n     */\n  isRendered: function isRendered() {\n    var self = this;\n    if (!self.renderingDeferred)\n    return false;\n    return self.renderingDeferred.promise();\n  },\n  /*\r\n     *   Return the rendered element\r\n     */\n  getRenderedElement: function getRenderedElement() {\n    if (bizagi.util.isEmpty(this.container))\n    alert(\"container hasn't been rendered!\");\n\n    return this.container;\n  },\n  /*\r\n     *   Set container defaults\r\n     */\n  applyContainerDefaults: function applyContainerDefaults() {\n    var self = this,\n    properties = self.properties;\n\n    // Set customizations\n    if (properties.backgroundColor)\n    self.changeBackgroundColor(properties.backgroundColor);\n\n    // Set editability and visiblity\n    if (!properties.visible)\n    self.changeVisibility(properties.visible);\n  },\n  /*\r\n     *  Changes background color\r\n     */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    var properties = self.properties;\n\n    properties.backgroundColor = color;\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.changeBackgroundColor(color);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeBackgroundColor(color);\n      }\n    });\n  },\n  /*\r\n     *   Hides / Show container\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    // Hide - show the render\n    if (properties.visible) {\n      self.container.show();\n\n    } else {\n      self.container.hide();\n    }\n  },\n  /* Changes editability */\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var properties = self.properties;\n\n    // Store in properties\n    properties.editable = argument == \"Default\" ? self.originalProperties.editable : bizagi.util.parseBoolean(argument);\n\n    // Iterate through elements\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        $.when(child.ready()).done(function () {\n          child.changeEditability(argument);\n        });\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.changeEditability(argument);\n      }\n    });\n  },\n  /*\r\n     *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceTag: function replaceTag(container, tag, replace) {\n    bizagi.util.replaceSelector(container, tag, replace);\n  },\n  /*\r\n     *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n     */\n  replaceChildrenTag: function replaceChildrenTag(container, replace) {\n    this.replaceTag(container, \".children\", replace);\n  },\n  /*\r\n     *   Replaces a {{children}} string in the specified element\r\n     */\n  replaceChildrenHtml: function replaceChildrenHtml(html, replace) {\n    return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\n  },\n  /*\r\n     *   Template method to render the container layout, returns a string with all the builded html,\r\n     *   must be overriden in all children\r\n     */\n  renderContainer: function renderContainer() {\n  },\n  /*\r\n     *   Template method to process each jquery object\r\n     *   must be overriden in each container\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n      self.applyPlaceHolderPolyfill();\n\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n  applyPlaceHolderPolyfill: function applyPlaceHolderPolyfill() {\n    var self = this;\n    var config = window.placeHolderConfig || {};\n    if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\n      // don't run the polyfill when the browser has native support\n      return;\n    }\n    Placeholders.enable();\n  },\n  /*\r\n     *   Process container children\r\n     */\n  executeChildrenPostRender: function executeChildrenPostRender(container) {\n    var self = this;\n    var childrenElements = container.children();\n\n    $.each(childrenElements, function (i, childElement) {\n      childElement = $(childElement);\n      var id = Number(childElement.data(\"unique-id\"));\n      if (id) {\n        var child = self.childrenHash[id];\n        if (child) {\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n          child.postRenderElement(childElement);\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n          child.postRenderContainer(childElement);\n        }\n      } else {\n        self.executeChildrenPostRender(childElement);\n      }\n    });\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n     */\n  configureDesignView: function configureDesignView() {\n  },\n  /*\r\n     *   Template method to implement in each device to customize the container's behaviour to show layout\r\n     */\n  configureLayoutView: function configureLayoutView() {\n\n  },\n  /**\r\n      *   Renders all children html\r\n      */\n  renderChildrenHtml: function renderChildrenHtml() {\n    var self = this;\n    var temp = \"\";\n\n    $.each(self.children, function (i, child) {\n      var type = child.getElementType();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\n      temp += child.renderElement();\n      if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\n      temp += child.renderContainerHtml();\n      self.childrenHash[child.properties.uniqueId] = child;\n    });\n\n    return temp;\n  },\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     */\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.collectRenderValues(renderValues);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n          // Check if the render can be sent to the server\n          if (child.canBeSent()) {\n            child.collectData(renderValues);\n          }\n        }\n      });\n    }\n  },\n\n  /*\r\n     *   Iterate through all the renders and check if has changed\r\n     */\n  hasChanged: function hasChanged(result) {\n    var self = this;\n    result = result || [];\n\n    if (!result.length) {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          if (result.length || child.hasChanged(result)) {\n            return false;\n          }\n        });\n      }\n    } else {\n      return result;\n    }\n  },\n\n  /*\r\n     *    Creates a json array parameters to search result\r\n     */\n  collectRenderValuesQueryForm: function collectRenderValuesQueryForm(renderValues) {\n    var self = this;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValuesQueryForm(renderValues);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSentQueryForm()) {\n          child.collectDataQueryForm(renderValues);\n        }\n      }\n    });\n  },\n  /*\r\n     *   Gets the first child\r\n     */\n  firstChild: function firstChild() {\n    return this.children[0];\n  },\n  /*\r\n     *   Method to find all the renders matching an xpath inside the container\r\n     */\n  getRenders: function getRenders(xpath, renders) {\n    var self = this;\n\n    renders = renders || [];\n\n    // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\n    if (xpath.indexOf(\"[\") > 0) {\n      xpath = xpath.substring(0, xpath.indexOf(\"[\"));\n    }\n\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.getRenders(xpath, renders);\n\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        if (xpath == child.properties.xpath) {\n          renders.push(child);\n        }\n      }\n    });\n\n    return renders;\n  },\n  /*\r\n     *   Gets the first editable render\r\n     */\n  getRender: function getRender(xpath) {\n    var self = this;\n    var renders = self.getRenders(xpath);\n    var result = null;\n    $.each(renders, function (i, render) {\n      if (render.properties.editable) {\n        if (result == null)\n        result = render;\n      }\n    });\n\n    // if no render has been found, skip editable condition\n    if (result == null) {\n      $.each(renders, function (i, render) {\n        result = render;\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n      *   Gets all renders by xpath\r\n      */\n  getRendersByXpath: function getRendersByXpath(xpath) {\n    var self = this;\n    return self.getRenders(xpath);\n  },\n\n  /*\r\n     *   Gets a container by the id\r\n     */\n  getContainer: function getContainer(id) {\n    var self = this;\n\n    if (self.properties.id == id)\n    return this;\n\n    var result;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        var o = child.getContainer(id);\n        if (o != null) {\n          result = o;\n          return false;\n        }\n      }\n    });\n\n    return result;\n  },\n  /*\r\n     *   Validate all renders in the container\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    if (self.children) {\n      $.each(self.children, function (i, child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            child.isValid(invalidElements);\n          }\n        }\n      });\n    }\n\n    return invalidElements.length == 0;\n  },\n\n  /*\r\n     *   Validate all grids in the container\r\n     */\n  hasValidGrids: function hasValidGrids(invalidElements) {\n    var self = this;\n\n    $.each(self.children, function (i, child) {\n      if (child.properties.visible) {\n        if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n          // Go though container\n          child.hasValidGrids(invalidElements);\n\n        } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof child.grid != \"undefined\") {\n          // Go to the render\n          child.isValid(invalidElements);\n        }\n      }\n    });\n\n    return invalidElements.length == 0;\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    var self = this;\n    return $.when(self.parent.ready(), self.isRendered());\n  },\n  /*\r\n     *   Returns a promise that will resolve when the element is ready to save\r\n     */\n  isReadyToSave: function isReadyToSave() {\n    var self = this;\n    var childrenPromises = $.map(self.children, function (child) {\n      return child.isReadyToSave();\n    });\n    return $.when.apply($, childrenPromises);\n  },\n  /*\r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus;\n    $.each(self.children, function (i, child) {\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        var result = child.getFocus();\n        if (!bizagi.util.isEmpty(result)) {\n          focus = result;\n        }\n      }\n    });\n\n    return focus;\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandlers: function getCustomHandlers() {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (form) {\n      return form.getCustomHandlers();\n    }\n  },\n  /*\r\n     *   Get the custom handlers set for this execution\r\n     */\n  getCustomHandler: function getCustomHandler(key) {\n    var self = this;\n    var customHandlers = self.getCustomHandlers();\n\n    if (customHandlers) {\n      return customHandlers[key];\n    }\n  },\n  /*\r\n     *   Dispose the class so we can detect when a class is invalid already\r\n     */\n  dispose: function dispose() {\n    var self = this;\n\n    // Iterate through elements\n    var timeOutChildrenDispose = setTimeout(function () {\n      if (self.children) {\n        $.each(self.children, function (i, child) {\n          child.dispose();\n        });\n      }\n      clearTimeout(timeOutChildrenDispose);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  },\n\n  /*\r\n     *   Refresh the current container\r\n     */\n  refreshContainer: function refreshContainer(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    // Start waiting\n    self.startLoading();\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh();\n\n    // Call the service\n    return $.when(self.dataService.multiaction().refreshControl({\n      xpath: properties.xpath,\n      idRender: properties.id,\n      idPageCache: properties.idPageCache,\n      xpathContext: properties.xpathContext || args.xpathContext,\n      contexttype: self.properties.contexttype || \"\",\n      idForm: form && form.properties && form.properties.id ? form.properties.id : \"\" //To fix BA56877.\n    })).done(function (data) {\n\n      if (!self.isDisposed()) {\n        self.saveChildrenVisualChanges(self);\n\n        // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n        self.unregisterChildren();\n        delete self.children;\n        delete self.childrenHash;\n\n        self.getFormContainer().removeActions();\n\n        // update editable\n        if (self.properties.editable === false) {\n          data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n        }\n\n        // Update the data\n        self.initializeData(data.container);\n\n        // Render the container again\n        var currentContainer = self.container;\n        var result = self.render();\n\n        if (self.properties.type == \"tabItem\") {\n          $(result).addClass(\"childrenActive\");\n        }\n\n        currentContainer.replaceWith(result);\n\n        // Rebind the actions\n        var actions = data.container && data.container.actions ? data.container.actions : [];\n        self.getFormContainer().refreshActions(actions);\n\n        self.triggerChildrenActions();\n        self.restoreChildrenVisualChanges(self);\n\n        if (bizagi.override.restoreAppearanceAfterRefresh) {\n          self.restoreContainerAppearance(data.container);\n        }\n\n        // Execute personalized stuff after to refresh it\n        self.afterToRefresh();\n\n      }\n    }).fail(function (message) {\n      message = self.processFailMessage(message);\n\n    }).always(function () {\n      self.endLoading();\n    });\n  },\n\n  /*\r\n      *   Refresh the current container\r\n      */\n  refreshDesignContainer: function refreshDesignContainer(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Execute personalized stuff before to refresh it\n    self.beforeToRefresh(data);\n    //self.setActiveTab(data.elements);\n\n    $.extend(data.properties, {\n      editable: properties.editable,\n      contexttype: properties.contexttype || \"\",\n      idPageCache: properties.idPageCache,\n      idRender: properties.id,\n      messageValidation: properties.messageValidation,\n      uniqueId: properties.uniqueId,\n      visible: properties.visible,\n      xpath: properties.xpath,\n      mode: \"design\",\n      xpathContext: properties.xpathContext || \"\" });\n\n\n\n    if (!self.isDisposed()) {\n      // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\n      self.unregisterChildren();\n      delete self.children;\n      delete self.childrenHash;\n\n      // update editable\n      if (self.properties.editable === false) {\n        data.container && data.container.properties ? data.container.properties.editable = false : \"\";\n      }\n\n      // Update the data\n      self.initializeData(data.container);\n\n      // Render the container again\n      var currentContainer = self.container;\n      var result = self.render();\n\n      if (self.properties.type == \"tabItem\") {\n        $(result).addClass(\"childrenActive\");\n      }\n\n      currentContainer && currentContainer.replaceWith(result);\n\n      // Execute personalized stuff after to refresh it\n      self.afterToRefresh();\n    }\n  },\n\n  beforeToRefresh: function beforeToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].beforeToRefresh();\n    }\n  },\n\n  afterToRefresh: function afterToRefresh() {\n    var self = this;\n\n    // Call beforeToRefresh of each children\n    for (var i = 0; i < self.children.length; i++) {\n      self.children[i].afterToRefresh();\n    }\n  },\n\n  /*\r\n     *   Re-execute children actions\r\n     */\n  triggerChildrenActions: function triggerChildrenActions() {\n    var self = this;\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.triggerChildrenActions();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        child.triggerRenderChange({ changed: false });\n      }\n    }\n  },\n\n\n  /*\r\n     * register actions container\r\n     */\n  registerActions: function registerActions(actions) {\n    var self = this;\n    var form = self.getFormContainer();\n\n    if (actions) {\n      form.actionController.buildActions(actions);\n    }\n  },\n\n  /*\r\n     * unregister children container\r\n     */\n  unregisterChildren: function unregisterChildren() {\n    var self = this;\n\n    var form = self.getFormContainer();\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n      var type = child.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        child.unregisterChildren();\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        form.unregisterRender(child);\n      }\n    }\n  },\n  /*\r\n     * Replace child\r\n     */\n  replaceChild: function replaceChild(element) {\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.uniqueId == element.properties.uniqueId) {\n        children.splice(i, 1);\n        children.splice(i, 0, element);\n        break;\n      }\n    }\n  },\n  /*\r\n     * Gets child\r\n     */\n  getChildById: function getChildById(id) {\n\n    var self = this;\n\n    var children = self.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var child = children[i];\n\n      if (child.properties.id == id) {\n        return child;\n      }\n    }\n\n    return null;\n  },\n\n  /**\r\n      * Restore appearance of container\r\n      * @param data\r\n      */\n  restoreContainerAppearance: function restoreContainerAppearance(data) {\n    var self = this;\n\n    self.restoreAppearance();\n\n    (data.elements || []).forEach(function (element) {\n      if (element.container) {\n        self.restoreContainerAppearance(element.container);\n      } else if (element.render) {\n        self.restoreElementAppearance(element.render);\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore appearance of control\r\n      * @param data\r\n      */\n  restoreElementAppearance: function restoreElementAppearance(data) {\n    var self = this;\n    var element = self.getChildById(data.properties.id);\n\n    if (!!element) element.restoreAppearance();\n  },\n\n  /**\r\n      * Save visual changes of children\r\n      * @param data\r\n      */\n  saveChildrenVisualChanges: function saveChildrenVisualChanges(data) {\n    var self = this;\n    self.childrenVisualChanges = self.childrenVisualChanges || {};\n\n    (data.children || []).forEach(function (element) {\n      var type = element.getElementType();\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n        self.saveChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        self.childrenVisualChanges[element.properties.id] = element.visualChanges;\n      }\n    });\n\n  },\n\n  /**\r\n      * Restore visual changes of children\r\n      * @param data\r\n      */\n  restoreChildrenVisualChanges: function restoreChildrenVisualChanges(data) {\n    var self = this;\n\n    (data.children || []).forEach(function (element) {\n\n      var type = element.getElementType();\n      var visualChanges = self.childrenVisualChanges && self.childrenVisualChanges[element.properties.id] || {};\n\n      if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        element.visualChanges = visualChanges;\n        self.restoreChildrenVisualChanges(element);\n      } else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        element.visualChanges = visualChanges;\n      }\n\n    });\n\n    delete self.childrenVisualChanges;\n  } });","/*\r\n*   Name: BizAgi Smartphone Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.container.extend(\"bizagi.rendering.container\", {}, {\n  getMenu: function getMenu() {\n    var params = this.getFormContainer().getParams();\n    return params.menu;\n  },\n\n  /*\r\n      *   Starts waiting signal for async stuff\r\n      */\n  startLoading: function startLoading() {\n    var self = this;\n    var element = self.container;\n    if (element) {\n      element.startLoading({ delay: 250, overlay: true });\n    }\n  },\n\n  /*\r\n      *   Ends waiting for async stuff\r\n      */\n  endLoading: function endLoading() {\n    var self = this;\n\n    var element = self.container;\n    if (element) {\n      element.endLoading();\n    }\n  } });","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\n\n  /**\r\n                                                      * Method to process the render the layout\r\n                                                      * @param {boolean} isLabelFormat\r\n                                                      * @param {string} format\r\n                                                      */\n  processLayout: function processLayout(isLabelFormat, format) {\n    var properties = this.properties;\n\n    if (typeof isLabelFormat !== \"boolean\") {\n      console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\n      return;\n    }\n\n    if (isLabelFormat) {\n      this.processLabelLayout(format);\n    } else {\n      this.processControlLayout(format);\n\n      // Set required and visiblity\n      properties.required = typeof properties.required !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\n      var visible = typeof properties.visible !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\n\n      if (properties.required) {\n        this.changeRequired(properties.required);\n      }\n\n      if (!visible) {\n        this.changeVisibility(visible);\n      }\n    }\n  },\n\n  /**\r\n      * Method to process the label in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processLabelLayout: function processLabelLayout(format) {\n    var $label = this.getLabel();\n    if ($label == null) return;\n\n    // Set customizations\n    format = format || {};\n    if (typeof format.bold === \"undefined\") {\n      format.bold = true; // Default value\n    }\n\n    this.changeBackgroundColor(format.background).\n    changeFontColor($label, format.color).\n    changeFontBold($label, format.bold).\n    changeFontSize($label, format.size).\n    changeFontItalic($label, format.italic).\n    changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Method to process the control in the layout\r\n      * @param {} format\r\n      * @returns {}\r\n      */\n  processControlLayout: function processControlLayout(format) {\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    // Set customizations\n    format = format || {};\n\n    this.changeFontColor($elements, format.color).\n    changeFontBold($elements, format.bold).\n    changeFontItalic($elements, format.italic).\n    changeFontSize($elements, format.size).\n    changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeColor: function changeColor(color) {\n    var $label = this.getLabel();\n    var $control = this.getControl();\n    var $elements = this.getElementsToStylize($control);\n\n    return this.\n    changeFontColor($label, color).\n    changeFontColor($elements, color);\n  },\n\n  /**\r\n      * Customizes render color\r\n      * @param {} $element\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeFontColor: function changeFontColor($element, color) {\n    if ($element === undefined) return this;\n    if (color === undefined) return this;\n\n    var style = color !== \"none\" ? color : \"\";\n    $element.css(\"color\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font size property\r\n      * @param {} $element\r\n      * @param {} size\r\n      * @returns {}\r\n      */\n  changeFontSize: function changeFontSize($element, size) {\n    if (size === undefined) return this;\n    if ($element === undefined) return this;\n\n    if (size !== \"0\") {\n      var newFontSize = 100 + Number(size) * 10 + \"%\";\n      $element.css(\"font-size\", newFontSize);\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font Strikethrough or underline property\r\n      * @param {} $element\r\n      * @param {} textDecoration\r\n      * @returns {}\r\n      */\n  changeTextDecoration: function changeTextDecoration($element, textDecoration) {\n    if (textDecoration === undefined) return this;\n    if ($element === undefined) return this;\n\n    textDecoration && $element.css(\"text-decoration\", textDecoration);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font italic style\r\n      * @param {} $element\r\n      * @param {} italic\r\n      * @returns {}\r\n      */\n  changeFontItalic: function changeFontItalic($element, italic) {\n    var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\n\n    $element.css(\"font-style\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes the font weight\r\n      * @param {} $label\r\n      * @param {} bold\r\n      * @returns {}\r\n      */\n  changeFontBold: function changeFontBold($label, bold) {\n    var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\n\n    $label.css(\"font-weight\", style);\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.css(\"background-color\", color);\n    } else {\n      this.element.css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Customizes render cell background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeCellBackgroundColor: function changeCellBackgroundColor(color) {\n    return this.getCellBackgroundFunction(this.properties.editable.toString(), this.properties.type)(color);\n  },\n\n  getCellBackgroundFunction: function getCellBackgroundFunction(editable, type) {\n    var options = {\n      'true': { //editable\n        'columnDate': this.changeInputBackgroundColor.bind(this) },\n\n      'false': { //no editable\n        'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n      },\n      'default': this.changeBackgroundColor.bind(this) //labels o valores no editables \n    };\n\n    return options[editable][type] || options['default'];\n  },\n\n  changeInputBackgroundColor: function changeInputBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", color);\n    } else {\n      $(\".bz-input-icon\", this.element).css(\"background-color\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * This method just make a toggle of red label indicator\r\n      * @argument {boolean} argument\r\n      */\n  changeRequiredLabel: function changeRequiredLabel() {\n  },\n\n  /**\r\n      * Change cell required and attach bindings\r\n      * @param argument\r\n      */\n  changeCellRequired: function changeCellRequired(argument) {\n    this.changeRequired(argument);\n  },\n\n  /**\r\n      * \r\n      */\n  getRTLAlign: function getRTLAlign(align) {\n    if (typeof align == \"undefined\" || align == \"\") {\n      return \"default\";\n    }\n    return align;\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultLabelAlign: function getDefaultLabelAlign() {\n    return \"default\";\n  },\n\n  /**\r\n      * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n      */\n  getDefaultValueAlign: function getDefaultValueAlign() {\n    return \"default\";\n  } });","/**\r\n *   Name: BizAgi Smartphone Render Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the render class to adjust to smartphone devices\r\n */\n\nbizagi.rendering.render.extend(\"bizagi.rendering.render\", {}, {\n  getMenu: function getMenu() {\n    var params = this.getFormContainer().getParams();\n    return params.menu;\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    bizagi.log(\" post render smartphone  edit\", this, \"error\");\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.configureHelpText();\n\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n\n    if (typeof properties.textFormat !== \"undefined\" && typeof properties.textFormat.background !== \"undefined\") {\n      self.changeBackgroundColor(properties.textFormat.background);\n    }\n\n    if (typeof properties.textFormat !== \"undefined\" && typeof properties.textFormat.color !== \"undefined\") {\n      self.getControl().parent().css(\"color\", properties.textFormat.color);\n      self.element.find(\"input\").css(\"color\", properties.textFormat.color);\n\n      // Not apply for radio control\n      if (properties.type !== \"radio\") {\n        self.element.find(\".ui-bizagi-render-control > span\").css(\"color\", properties.textFormat.color);\n      }\n    }\n\n    if (typeof properties.valueFormat !== \"undefined\" && typeof properties.valueFormat.color !== \"undefined\") {\n      self.element.find(\".ui-bizagi-render-control > span\").css(\"color\", properties.valueFormat.color);\n\n      // Not apply for radio control | properties.valueFormat.color\n      if (properties.type !== \"radio\") {\n        self.element.find(\"input\").css(\"color\", properties.valueFormat.color);\n      }\n    }\n\n    // Not apply renderEdition\n    if ($(self.element).hasClass(\"bz-command-edit-inline\") || $(self.element).hasClass(\"bz-command-not-edit\") || $(self.element).hasClass(\"bz-rn-non-editable\")) {\n      return true;\n    }\n\n    var contextEdition = self.element;\n\n    if (self.properties.type === \"image\" || self.properties.type === \"columnImage\") {\n      /**\r\n                                                                                      * If this is an image, we should show a preview of it\r\n                                                                                      * but only when click right into the img tag\r\n                                                                                      */\n      contextEdition = $(self.element).find(\"img\");\n      if (contextEdition.length === 0) {\n        /**\r\n                                         * There is no image so, there is nothing to show/do\r\n                                         */\n        return;\n      }\n    }\n\n    $(contextEdition).bind(\"click\", function () {\n      $.when(self.renderEdition()).\n      then(function () {\n\n        self.endLoading();\n        self.postRenderEdit();\n\n        if (!bizagi.util.isEmpty(self.value)) {\n          if (self.value !== false) {\n            // Encode html to avoid html tags\n            self.setDisplayValueEdit(self.value);\n          } else {\n            // Special case when the value is false for boolean renders\n            self.setDisplayValueEdit(self.value);\n          }\n        }\n      });\n    });\n  },\n\n  postRenderEdit: function postRenderEdit() {\n\n    var self = this;\n    var context = self.getFormContainer().container;\n    var properties = self.properties;\n    var actualscroll = $(\"body\").scrollTop();\n\n    if (self.getParams() && self.getParams().postRenderEdit) {\n      return self.getParams().postRenderEdit(self);\n    }\n\n    $(\"#container-items-edit\", context).find(\".ui-bizagi-container-inputs\").remove();\n    var fordwardActionCommon = function fordwardActionCommon() {\n      $(\".ui-bizagi-container-children-form\", context).hide();\n      $(\"#container-items-edit\", context).empty();\n      $(\"#container-items-edit\", context).show();\n      $(\".ui-bizagi-button-container\", context).hide();\n    };\n\n    fordwardActionCommon();\n    $(\"#container-items-edit\", context).append($.kendoTmpls(self.renderFactory.getTemplate(\"editRender\"), {\n      \"label\": properties.displayName }));\n\n\n    $(\"#container-items-edit\", context).find(\".ui-bizagi-container-inputs\").html(self.inputEdition);\n\n    var contexttmp = self.contextEdit = $(context).find(\"#container-items-edit\");\n    var backActionCommon = function backActionCommon() {\n      $(\".ui-bizagi-container-children-form\", context).show();\n      $(\"#container-items-edit\", context).hide();\n      $(\".ui-bizagi-button-container\", context).show();\n\n      setTimeout(function () {\n        window.scrollTo(0, actualscroll);\n      }, 10);\n    };\n\n    $(\".ui-bizagi-container-button-edit .ui-bizagi-save-btn\", contexttmp).bind(\"click\", function () {\n      backActionCommon();\n      $.when(self.actionSave()).\n      done(function () {\n        if (self.properties.submitOnChange) {\n          self.submitOnChange();\n        }\n      });\n    });\n\n    $(\".ui-bizagi-container-button-edit .ui-bizagi-cancel-btn\", contexttmp).bind(\"click\", function () {\n      backActionCommon();\n    });\n  },\n\n  /*\r\n      *   Template method to get the label element\r\n      */\n  getLabel: function getLabel() {\n    var self = this;\n    if (!self.label) {\n      var label = $(\".ui-bizagi-label\", self.element || self.observableElement);\n      if (label.length > 0) {\n        self.label = label;\n      }\n      return label;\n    }\n    return self.label;\n  },\n\n  getContainerRender: function getContainerRender() {\n    var self = this;\n    return $(self.element);\n  },\n\n  getArrowContainer: function getArrowContainer() {\n    var self = this;\n\n    if (!self.arrow) {\n      self.arrow = $(\".bz-container-render-cell1 >.ui-bizagi-render-edition-arrow \", self.element || self.observableElement);\n    }\n\n    return self.arrow;\n  },\n\n  /*\r\n      *   Return the right align class\r\n      */\n  getAlignClass: function getAlignClass(alignType) {\n    return alignType;\n  },\n\n  getArrow: function getArrow() {\n    var self = this;\n\n    self.arrow = $(\".bz-container-render-cell1 >.ui-bizagi-render-edition-arrow > .bz-cm-icon  \", self.element || self.observableElement);\n    return self.arrow;\n\n  },\n  /*\r\n      *   Template method to get the control element\r\n      */\n  getControl: function getControl() {\n    var self = this;\n\n    if (!self.control || self.control.length === 0) {\n      self.control = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n\n    return self.control;\n  },\n\n\n  /*\r\n      *   Template method to get the control element\r\n      */\n  getContainerHelpText: function getContainerHelpText() {\n    var self = this;\n\n    if (!self.containerHelpText) {\n      self.containerHelpText = $(\".bz-container-rn-helptext\", self.element || self.observableElement);\n    }\n\n    if (!self.containerHelpText || self.containerHelpText.length === 0) {\n      return null;\n    }\n\n    return self.containerHelpText;\n  },\n\n  /*\r\n      *   Template method to get the control filler element\r\n      */\n  getControlFiller: function getControlFiller() {\n    var self = this;\n    if (!self.controlFiller) {\n      self.controlFiller = $(\".ui-bizagi-render-control\", self.element || self.observableElement);\n    }\n\n    return self.controlFiller;\n  },\n\n  getContainerMessage: function getContainerMessage() {\n    var self = this;\n    if (!self.containerMessage) {\n      self.containerMessage = $(\".bz-rn-messages\", self.element || self.observableElement);\n    }\n\n    return self.containerMessage;\n  },\n\n  getContextEdit: function getContextEdit() {\n    return this.contextEdit;\n  },\n\n  /*\r\n      * Customizes render display type with custom css classes\r\n      *   - Type: normal, value, invert\r\n      */\n  changeDisplayOption: function changeDisplayOption(dspType) {\n    var self = this;\n    var properties = self.properties;\n    var displayType = dspType || properties.displayType || \"normal\";\n    var orientation = properties.orientation || \"\";\n    var control = self.getControl();\n\n    var excludeControls = [\"image\", \"columnImage\", \"activityCheckList\", \"userfield\", \"date\", \"columnDate\", \"searchDate\", \"list\", \"columnList\", \"link\", \"columnLink\", \"fileprint\", \"searchList\", \"geolocation\", \"money\", \"multiSelect\"];\n\n    // Enable new mobile grid\n    if (bizagi.util.isMobileGridEnabled()) {\n      excludeControls.push(\"columnUpload\", \"columnImage\");\n    }\n\n    if (!$(self.element).hasClass(\"bz-command-edit-inline\") && excludeControls.indexOf(properties.type) !== -1) {\n      $(self.element).addClass(\"bz-command-edit-inline\");\n    }\n\n    if (displayType == \"value\") {\n      if (control) {\n        control.addClass(\"bz-rn-display-value\");\n      }\n\n      self.getLabel().hide();\n    }\n\n    // o rtl //ltr\n    if (displayType === \"reversed\" || orientation === \"rtl\") {\n\n      control.addClass(\"bz-control-reversed\");\n      control.find(\"input\").addClass(\"bz-render-reversed\");\n\n      if (!control.children().hasClass(\"bz-render-reversed\")) {\n        control.children().addClass(\"bz-render-reversed\");\n      }\n\n      self.getLabel().addClass(\"bz-label-reversed\");\n    }\n\n    if (displayType == \"label\" && properties.type !== \"layoutLabel\") {\n      control.hide();\n      self.getLabel().show();\n    }\n  },\n\n  /*\r\n      *   Customizes render label align\r\n      */\n  changeLabelAlign: function changeLabelAlign(alignType) {\n  },\n\n  /*\r\n      *   Customizes render value align\r\n      */\n  changeValueAlign: function changeValueAlign(alignType) {\n  },\n\n  /*\r\n      *   Customizes render label and value width\r\n      */\n  customizeRenderWidth: function customizeRenderWidth() {\n\n  },\n\n  /*\r\n      *   Sends all the info to the server then refreshes the form\r\n      *   Returns a deferred\r\n      */\n  submitOnChange: function submitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    bizagi.util.smartphone.startLoading();\n\n    $.when(self.isReadyToSave()).\n    done(function () {\n      $.when(self.internalSubmitOnChange(data, bRefreshForm)).\n      done(function () {\n        defer.resolve();\n      }).fail(function () {\n        defer.reject();\n      }).always(function () {\n        bizagi.util.smartphone.stopLoading();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n      *   Adds a validation message to the render\r\n      */\n  setValidationMessage: function setValidationMessage(message) {\n    var self = this;\n    self._super(message);\n\n    if (message && message.length > 0) {\n      message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\n      var element;\n      self.getContainerMessage().html(element = $(\"<span class=\\\"bz-rn-err\\\"></span>\"));\n      element.attr(\"data-error\", message);\n    } else {\n      self.getContainerMessage().html(\"\");\n    }\n  },\n\n  /*\r\n      *   Defines virtual method to extend in each render\r\n      */\n  renderSingle: function renderSingle() {\n  },\n\n  /*\r\n      *   Defines virtual method to extend in each render\r\n      */\n  renderEdition: function renderEdition() {\n  },\n\n  /*\r\n      *   Override internal rendering in order to apply new smartphone layout\r\n      */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    // Treat result as a promise, so if the render control returns a promise we can wait until it is done\n    // If not, it will be resolved automatically\n    $.when(self.renderSingle()).\n    then(function () {\n\n      // Remove loading status\n      self.endLoading();\n      self.changeDisplayOption();\n\n      // Post-render method\n      self.postRenderSingle();\n\n      // Resolve rendering deferred\n      if (self.renderingDeferred) {\n        self.renderingDeferred.resolve();\n      }\n\n      // Set the initial value\n      if (!bizagi.util.isEmpty(self.value)) {\n        if (self.value !== false) {\n          // Encode html to avoid html tags\n          self.setDisplayValue(self.value);\n        } else {\n          // Special case when the value is false for boolean renders\n          self.setDisplayValue(self.value);\n        }\n      }\n\n      self.processLayout(isLabelFormat, self.properties.textFormat || {});\n      self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n    });\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    // Set internal value\n    self.setValue(value, false);\n\n    // Render as simple value\n    var displayValue = self.getDisplayValue(value);\n\n    if (typeof displayValue == \"string\") {\n      control.html(displayValue);\n    }\n  },\n\n  setPlaceHolder: function setPlaceHolder() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    if (properties.editable) {\n      control.find(\".bz-rn-text\").attr(\"placeholder\", properties.required ? \"Required\" : \"Optional\");\n    }\n  },\n\n  /* Changes the render editability*/\n  changeEditability: function changeEditability(argument) {\n    var self = this;\n    var editable = bizagi.util.parseBoolean(argument);\n    var renderedElement;\n\n    self._super(argument);\n\n    renderedElement = self.getRenderedElement();\n    if (renderedElement) {\n      renderedElement.toggleClass(\"bz-rn-non-editable\", !editable).toggleClass(\"bz-rn-read-only\", !editable);\n    }\n  },\n\n  /*\r\n      *   Sets the value in the rendered controlEdit\r\n      */\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n  },\n\n  actionSave: function actionSave() {\n    var self = this;\n    self.setValue(self.inputEdition.val(), false);\n  },\n\n  changeRequiredLabel: function changeRequiredLabel() {\n    var self = this;\n    if (self.properties.displayType == \"value\") {\n      self.changeRequiredLabelByVal();\n      return;\n    }\n\n    var properties = self.properties;\n\n    if (properties.required) {\n      if (!self.checkRequired([])) {\n        $(\"div.bz-rn-required\", self.getLabel()).show();\n\n      } else {\n        $(\"div.bz-rn-required\", self.getLabel()).hide();\n      }\n    }\n  },\n\n\n  /**\r\n      * Shows or hides the required icon if the control is configured to show only the value.\r\n      */\n  changeRequiredLabelByVal: function changeRequiredLabelByVal() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.required) {\n\n      if (!self.checkRequired([])) {\n        $(\"div.bz-rn-required\", self.getControl()).show();\n\n      } else {\n        $(\"div.bz-rn-required\", self.getControl()).hide();\n      }\n    }\n  },\n  changeRequired: function changeRequired(argument) {\n    var self = this;\n    if (self.properties.displayType == \"value\") {\n      self.changeRequiredControl(argument);\n      return;\n    }\n    var labelElement = $(\"label\", self.getLabel());\n    //Remove the required div from the dom in order to have only one any time\n    self.getLabel().find(\".bz-rn-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      labelElement.text((properties.displayName || \"\") + \" \");\n\n      if (!self.hasValue()) {\n        labelElement.before(\"<div class='bz-rn-required'></div>\");\n      } else {\n        labelElement.before(\"<div class='bz-rn-required' style='display: none'></div>\");\n      }\n\n      self.setPlaceHolder();\n    } else {\n      labelElement.text(properties.displayName || \"\"); //+ ' :'\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  changeRequiredControl: function changeRequiredControl(argument) {\n    var self = this;\n    //Remove the required div from the dom in order to have only one any time\n    var control = self.getControl();\n    control.find(\".bz-rn-required\").remove();\n    var properties = self.properties;\n\n    // Update properties\n    properties.required = argument;\n\n    // Changes label\n    if (bizagi.util.parseBoolean(argument)) {\n      if (!self.hasValue()) {\n        control.prepend(\"<div class='bz-rn-required'></div>\");\n      } else {\n        control.prepend(\"<div class='bz-rn-required' style='display: none'></div>\");\n      }\n\n      self.setPlaceHolder();\n    }\n\n    // Perform validations again to check if the form is valid after this change\n    self.triggerRenderValidate();\n  },\n\n  configureLabel: function configureLabel() {\n    return this.properties.displayName;\n  },\n\n  configureHelpText: function configureHelpText() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties && properties.helpText && properties.helpText !== \"\") {\n      var containerHelp = self.getContainerHelpText();\n\n      if (containerHelp) {\n        $(containerHelp).helpText({ helpText: properties.helpText, dir: properties.orientation });\n      }\n    }\n  },\n\n  /*\r\n      *   Starts waiting signal for async stuff\r\n      */\n  startLoading: function startLoading() {\n  },\n\n  /**\r\n      * in mobiles, don't apply styles to icon's elements\r\n      */\n  getElementsToStylize: function getElementsToStylize(context) {\n    context = $(\"*:not(.bz-mo-icon):not(.bz-rn-container-control-icon):not(.bz-rn-upload-show-menu):not(.bz-rn-yesno)\", $(context));\n    return context;\n  },\n\n  /**\r\n      *   Ends waiting for async stuff\r\n      */\n  endLoading: function endLoading() {\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    if (color && color !== \"none\") {\n      self.getControl().closest(\".ui-bizagi-render\").css(\"background-color\", color);\n    }\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var control = self.getControl();\n    var input = control.find(\"input\").filter(function (index, ele) {\n      return ele.type !== \"file\" && ele.type !== \"radio\" && ele.type !== \"checkbox\";\n    });\n\n    if (input.length > 0) {\n      input.val(self.getValue());\n    } else {\n      self.setDisplayValue(\"\");\n    }\n  } });","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\n\n  /**\r\n                                                   *   Constructor\r\n                                                   */\n  init: function init(params) {\n    this._super(params);\n    if (params.paramsRender && params.paramsRender.contextEvent) {\n      self.contextEvent = params.paramsRender.contextEvent;\n    }\n  },\n\n  /**\r\n      * Process controls on template\r\n      * @param template\r\n      * @param controls\r\n      * @return {*}\r\n      */\n  processTemplate: function processTemplate(template, controls) {\n    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\n    var regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\n\n    // Remove all repeaters key words\n    var processedTemplate = template.replace(regexRepeater, \"\");\n\n    // replace controls\n    processedTemplate = processedTemplate.replace(regexControl, function (match, g1, g2, offset, string) {\n      var parameters = JSON.parse(g2);\n\n      return controls[parameters.id] || '';\n    });\n\n    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function () {\n      return '';\n    });\n\n\n    return processedTemplate;\n  },\n\n  /**\r\n      * Render layout container\r\n      * @return {*}\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var layoutCollection = self.getRenderByType(\"layout\");\n    var layout = layoutCollection.length > 0 ? layoutCollection[0] : {};\n    var template = typeof layout.getTemplate == \"function\" ? layout.getTemplate() : \"\";\n    var css = typeof layout.getCss == \"function\" ? layout.getCss() : \"\";\n    var mode = self.getMode();\n    var layoutGuid = self.properties.layoutguid || Math.guid();\n\n    var controls = {};\n\n    /**\r\n                        * Render all elements within first layout container\r\n                        */\n    if (layout.children) {\n      $.each(layout.children, function (i, child) {\n        // ignore layoutPlaceholder control in execution\n        if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\n\n          var type = child.getElementType();\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            controls[child.properties.id] = child.renderElement();\n          }\n          if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            controls[child.properties.id] = child.renderContainerHtml();\n          }\n          self.childrenHash[child.properties.uniqueId] = child;\n        }\n      });\n    }\n\n    // Load css\n    bizagi.util.loadStyle(css, layoutGuid);\n\n    return self.processTemplate(template, controls);\n  },\n\n  /**\r\n      * Get the context in which loads the formTemplate\r\n      *\r\n      */\n  getContextEvent: function getContextEvent() {\n    return self.contextEvent;\n  } });","$.Class.extend(\"bizagi.rendering.layout\", {}, {\n\n  /**\r\n                                                 * Get html template\r\n                                                 * @return {*}\r\n                                                 */\n  getTemplate: function getTemplate() {\n    var self = this;\n    var mode = self.getMode();\n    var html = self.properties.html || \"\";\n\n    // Add a container, this is important in design to calculate the scroll \n    if (mode == 'design' && html) {\n      html = \"<div class='bz-design-template'>\" + html + \"</div>\";\n    }\n\n    return bizagi.util.stripslashes(html);\n  },\n\n  /**\r\n      * Get string css of layout container\r\n      * @return {*}\r\n      */\n  getCss: function getCss() {\n    var self = this;\n    var css = self.properties.css || \"\";\n\n    var mode = self.getMode();\n    if (mode == \"design\") {\n      css = css && css.desktop;\n    }\n\n    return bizagi.util.stripslashes(css);\n  },\n\n\n  /*\r\n      *   Template method to process each jquery object\r\n      *   must be overriden in each container\r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Resolve rendering deferred\n    if (self.renderingDeferred)\n    self.renderingDeferred.resolve();\n\n    // Process children elements\n    self.container = container;\n    self.executeChildrenPostRender(container);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  } });","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\n\n  /*\r\n                                                   *   Constructor\r\n                                                   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Enumerate the children appending a property\n    $.each(self.children, function (i, child) {\n      child.properties.ordinal = i;\n    });\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"accordion\");\n\n    // Render the accordion\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\n\n  /*\r\n                                                       *   Render the container layout\r\n                                                       */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"accordionItem\");\n\n    // Render the accordionItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      ordinal: properties.ordinal,\n      displayName: properties.displayName,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Fires when the accordionItem is selected \r\n     */\n  activate: function activate() {\n    var self = this;\n    self.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  } });","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    self._super(params);\n\n    var properties = self.properties;\n    properties.allowAdd = typeof properties.allowAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.allowAdd) : true;\n    properties.withAddForm = properties.withAddForm && properties.allowAdd;\n    properties.allowEdit = typeof properties.allowEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.allowEdit) : true;\n    properties.withEditForm = properties.withEditForm && properties.allowEdit;\n    properties.allowDetail = typeof properties.allowDetail != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDetail) : false;\n    properties.inlineAdd = typeof properties.inlineAdd != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\n    properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\n    properties.inlineEdit = typeof properties.inlineEdit != \"undefined\" ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\n    properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\n    properties.allowDelete = typeof properties.allowDelete != \"undefined\" ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n\n    self.orientation = self.properties.orientation || \"ltr\",\n    self.data = self.properties.data;\n    self.keys = self.data ? self.getKeys(self.data.rows) : [];\n    self.pointer = 0;\n    self.totalRows = 0;\n    self.inlineAddRecords = [];\n\n    if (self.data) {\n      self.totalRows = self.data.rows.length;\n    }\n  },\n  /*\r\n     * Normalize keys\r\n     */\n  getKeys: function getKeys(rows) {\n    rows = rows || [];\n    var keys = [];\n\n    for (var i = 0, l = rows.length; i < l; i++) {\n      var row = rows[i];\n      keys.push(row[0]);\n    }\n    return keys;\n  },\n\n  /*\r\n     *   Render the control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = this.properties;\n    var templateItem = \"collectionnavigator\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var mode = self.getMode();\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId,\n      displayName: properties.displayName ? properties.displayName : \"\",\n      id: properties.id,\n      guid: properties.guid,\n      showPreview: self.showPreview(),\n      mode: mode,\n      orientation: self.getFormContainer().properties.orientation });\n\n\n    html = self.drawControls(html);\n\n    return html;\n  },\n\n  /*\r\n     * Render version readonly of control\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /*\r\n     * Draw navigation controls\r\n     */\n  drawControls: function drawControls(html) {\n\n  },\n\n  /*\r\n     *  render several actions in the navigation palete\r\n     *  ex. save, cancel \r\n     */\n  drawActions: function drawActions(controls) {\n\n  },\n\n  /*\r\n     * Render navigation controls (next, previous, last, first. etc )\r\n     */\n  drawControl: function drawControl(controls) {\n\n  },\n\n  /*\r\n     * Draw forms options (add form, edit form, navigation form)\r\n     */\n  drawForms: function drawForms(controls) {\n\n  },\n\n  /*\r\n     * Draw a preview views, it will be show when the collection hasn't records\r\n     */\n  drawPreview: function drawPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var templateItem = mode === \"execution\" ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\n    var template = self.renderFactory.getTemplate(templateItem);\n    var html = $.tmpl(template);\n\n    self.canvas.append(html);\n\n  },\n\n  /*\r\n     * Returns true if the collection has data\r\n     */\n  hasData: function hasData() {\n    return this.getTotalRows() > 0;\n  },\n\n  /*\r\n     * Returns the key of current row\r\n     */\n  getRow: function getRow() {\n    return this.keys[this.pointer];\n  },\n\n  /*\r\n     * Returns the key of next row\r\n     */\n  getNextRow: function getNextRow() {\n    var self = this;\n\n    if (self.getTotalRows() > self.pointer + 1)\n    self.pointer += 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of previous row\r\n     */\n  getPreviousRow: function getPreviousRow() {\n    var self = this;\n\n    if (self.pointer > 0)\n    self.pointer -= 1;\n\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of first row\r\n     */\n  getFirstRow: function getFirstRow() {\n    var self = this;\n\n    self.pointer = 0;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the key of last row\r\n     */\n  getLastRow: function getLastRow() {\n    var self = this;\n\n    self.pointer = self.keys.length - 1;\n    return self.getRow();\n  },\n\n  /*\r\n     * Returns the total numbers of rows in collection\r\n     */\n  getTotalRows: function getTotalRows() {\n    return this.keys.length;\n  },\n\n  getIndexes: function getIndexes() {\n    return this.properties.data.rows;\n  },\n\n  /*\r\n     * Sets the pointer to a specific position\r\n     */\n  setPointer: function setPointer(index) {\n    this.pointer = index - 1;\n  },\n\n  /*\r\n     * Returns true is there is a inline row pending to save\r\n     */\n  isTherePendingInlineRow: function isTherePendingInlineRow() {\n    return this.inlineAddRecords.length > 0;\n  },\n\n  /*\r\n     * Adds new row to collection\r\n     */\n  addKey: function addKey(newId) {\n    this.keys.push(newId);\n  },\n\n  /*\r\n     * Removes row in collection\r\n     */\n  removeKey: function removeKey() {\n    var self = this;\n    var index = self.pointer;\n\n    if (index >= 0) {\n      self.keys.splice(index, 1);\n\n      var totalRows = self.getTotalRows();\n      if (totalRows > 0 && index >= totalRows) {\n        self.setPointer(totalRows);\n      }\n    }\n  },\n\n  /*\r\n     * Returns true if the control should show the preview view\r\n     * ex. if the collection is empty \r\n     */\n  showPreview: function showPreview() {\n    var self = this;\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    if (mode == \"execution\") {\n      return !self.hasData();\n    } else {\n      return !bizagi.util.parseBoolean(properties.navigationform);\n    }\n  },\n\n  /*\r\n     * Returns the parameters needed for the request\r\n     */\n  getParameters: function getParameters(params) {\n    var self = this;\n\n    var parameters = {};\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\n\n    parameters.idRender = properties.id;\n    parameters.recordXPath = recordXpath;\n    parameters.xpathContext = properties.xpathContext;\n    parameters.idPageCache = properties.idPageCache;\n    parameters.requestedForm = params.requestedForm;\n    parameters.contextType = properties.contextType || properties.contexttype;\n    parameters.url = params.url;\n    parameters.editable = params.editable;\n    orientation: properties.orientation || \"ltr\";\n\n\n    return parameters;\n  },\n\n  /*\r\n     *   Submits a collection navigator add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\n  submitAddRequest: function submitAddRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    var request = self.dataService.addGridRecord({\n      url: properties.addUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache,\n      orientation: properties.orientation || \"ltr\" });\n\n\n    var filterResponse = request.pipe(function (data) {\n      // Parses response\n      return data.idEntity;\n    });\n\n    return filterResponse.promise();\n  },\n\n  /*\r\n     *   Submits a edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitEditRequest: function submitEditRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.editGridRecord({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype || '',\n      orientation: properties.orientation || \"ltr\" });\n\n  },\n\n  /*\r\n     *   Submits a collection delete record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitDeleteRequest: function submitDeleteRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    return self.dataService.deleteGridRecord({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contextType || properties.contexttype }).\n    pipe(function (data) {\n      if (data.type == \"validationMessages\") {\n        var form = self.getFormContainer();\n        var message = data.messages.join(\" \");\n        form.failHandler({ message: message });\n      }\n\n      return data;\n    });\n  },\n\n  /*\r\n     *   Submits a collection navigator edit record request for the given id \r\n     *   Returns a deferred\r\n     */\n  submitSaveRequest: function submitSaveRequest(id, data) {\n    var self = this;\n    var properties = self.properties;\n    var defer = $.Deferred();\n\n    // Calculate xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\n\n    var deferredsToWait = null;\n    if (data.deferreds) {\n      deferredsToWait = $.when.apply($, data.deferreds);\n      delete data.deferreds;\n    }\n\n    $.when(deferredsToWait).then(function () {\n      if (!bizagi.util.isEmpty(data)) {\n        data.idPageCache = data.idPageCache || self.form.getPageCache();\n        self.dataService.saveGridRecord({\n          url: properties.saveUrl,\n          idRender: properties.id,\n          xpath: properties.xpath,\n          xpathContext: xpathContext,\n          contexttype: properties.contextType || properties.contexttype || \"\",\n          submitData: data }).\n        done(function (response) {\n          defer.resolve(response);\n        }).fail(function (dataFail) {\n          var form = self.getFormContainer();\n          var message = dataFail.responseText ? dataFail.responseText : typeof dataFail == \"string\" ? dataFail : dataFail.toString();\n          //Convert String to object\n          if (typeof message == \"string\") {\n            try {\n              message = JSON.parse(message).message;\n            } catch (e) {\n              message = message.match(/\"message\":(.*)\",/)[0];\n              message = message.substr(11, message.length - 13);\n            }\n\n          } else if (!message.message) {\n            message = dataFail;\n          }\n          form.validateForm();\n          form.clearValidationMessages();\n          form.addValidationMessage(message);\n        });\n      } else {\n        defer.resolve();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Submits a collection navigator rollback request\r\n     *   Returns a deferred when done\r\n     */\n  submitRollbackRequest: function submitRollbackRequest(error) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.rollbackGridAction({\n      url: properties.rollbackUrl,\n      idRender: properties.id,\n      xpath: properties.xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: error.idPageCache,\n      contexttype: self.properties.contexttype || \"\" });\n\n  },\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set params\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType || properties.contexttype,\n      idPageCache: properties.idPageCache });\n\n\n\n    return self.dataService.getData(params);\n  },\n\n  isValid: function isValid(invalidElements) {\n    var form = this.form;\n\n    if (typeof form !== \"undefined\") {\n      (form.children || []).forEach(function (child) {\n        if (child.properties.visible) {\n          if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n            // Go though container\n            child.isValid(invalidElements);\n\n          } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n            // Go to the render\n            if (!child.isValid(invalidElements)) {\n              var content = invalidElements[invalidElements.length - 1];\n              invalidElements[invalidElements.length - 1] = $.extend(content, {\n                id: child.properties.id });\n\n            }\n          }\n        }\n      });\n    }\n\n    return invalidElements.length === 0;\n  },\n\n  validateControls: function validateControls(invalidElements) {\n    if (!this.form) return false;\n    return this.form.validationController.performValidations(invalidElements);\n  } });","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.group\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property \n    properties.cssclass = properties.cssclass || \"cssClassContainer\";\n\n    properties.collapse = typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse) ? true : false;\n  },\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"group\");\n\n    // Define icons\n    self.expandedIcon = self.getExpandedIcon();\n    self.collapsedIcon = self.getCollapsedIcon();\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      expandedClassIcon: self.expandedIcon,\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      collapse: properties.collapse,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      cssclass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Returns the expanded icon\r\n     */\n  getExpandedIcon: function getExpandedIcon() {},\n\n  /*\r\n                                                  *   Returns the collapsed icon\r\n                                                  */\n  getCollapsedIcon: function getCollapsedIcon() {},\n\n  /* \r\n                                                    *   Expands or collapse the container \r\n                                                    */\n  toogleContainer: function toogleContainer(argument, bImmediate) {} });","/*\r\n *   Name: Bizagi Section Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a section container class for all devices\r\n */\n\n$.Class.extend(\n\"bizagi.rendering.section\",\n{},\n{\n  /**\r\n   * Constructor\r\n   * @param {object} params - section information\r\n   */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Default properties\n    var properties = self.properties;\n\n    properties.helpText = properties.helpText || properties.displayName;\n    properties.displayAs = properties.displayAs || \"section\";\n  },\n\n  /**\r\n      * Render the trigger of the section.\r\n      * @returns string with html code.\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = this.renderFactory.getTemplate(\"section-header\");\n\n    // Render the section trigger\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      editable: properties.editable,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() !== \"execution\",\n      messageValidation: properties.messageValidation,\n      guid: properties.guid });\n\n    this.sectionContent = $(this.renderSectionContent())[0];\n    return html;\n  },\n\n  /**\r\n      * Render the content of the section.\r\n      * Overwritable on devices.\r\n      */\n  renderSectionContent: function renderSectionContent() {},\n\n  /**\r\n                                                             * Return the breadcrumb of the section.\r\n                                                             * @returns An array with breadcrumb. For example: [\"activity\", \"parent section\", \"child section\"]\r\n                                                             */\n  getBreadcrumb: function getBreadcrumb() {\n    var container = this;\n    var breadCrumb = [];\n\n    while (container) {\n      var properties = container.properties || {};\n      var params = container.params || {};\n\n      if (properties.type === \"section\") {\n        var displayName = properties.displayName ? properties.displayName : \"\";\n        breadCrumb.unshift(displayName);\n      } else if (params.type === \"form\") {\n        breadCrumb.unshift(this.getResourceByKey(\"render-section-breadcrumb-main-form\", \"Main form\"));\n      }\n      container = container.parent;\n    }\n    return breadCrumb;\n  },\n\n  /**\r\n      * Gets the display name of the previous section or form.\r\n      * @returns String with the display name\r\n      */\n  getParentDisplayName: function getParentDisplayName() {\n    var self = this;\n    var parent = self.getSectionParent(self.parent);\n    var displayName = \"\";\n\n    //TODO Improve this code implementation \n    if (parent.properties.type == \"form\") {\n      if (parent.properties.formtype && parent.properties.formtype == \"startform\") {\n        displayName = parent.params && parent.params.originalParams && parent.params.originalParams.displayName ? parent.params.originalParams.displayName : \"\";\n      } else\n      {\n        displayName = parent.properties.displayName || parent.params.displayName || parent.params.radNumber || parent.params.idCase;\n      }\n    } else {\n      displayName = parent.properties.displayName || \"\";\n    }\n\n    return displayName;\n  },\n\n  /**\r\n      * Gets the section's parent.\r\n      * @returns Object parent\r\n      */\n  getSectionParent: function getSectionParent(parent) {\n    if (parent.properties.type === \"section\" || !parent.parent) {\n      return parent;\n    } else {\n      return this.getSectionParent(parent.parent);\n    }\n  },\n\n  /**\r\n      * Gets if the section's  orientation is RTL.\r\n      * @returns Object\r\n      */\n  getSectionOrientationRTL: function getSectionOrientationRTL(obj) {\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"ltr\") return false;\n    if (obj && obj.properties && obj.properties.orientation && obj.properties.orientation === \"rtl\") return true;\n    if (obj.parent) return this.getSectionOrientationRTL(obj.parent);\n    return false;\n  } });","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"horizontal\");\n\n    // Render the container\n    var html = $.fasttmpl(template, {\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\n\n  /*\r\n                                               *   Constructor\r\n                                               */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n\n    if (properties.type == \"nestedForm\") {\n      var formContainer = self.getFormContainer();\n      formContainer.rendersById[properties.idForm] = self;\n    }\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"panel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      loading: properties.loading,\n      message: properties.message,\n      orientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssClass: properties.cssclass });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    var self = this;\n    var properties = self.properties;\n\n    // Set height\n    if (properties.height) {\n      panel.height(properties.height);\n    }\n\n    // Call base\n    self._super(panel);\n  } });","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\n\n  /*\r\n                                                      *   Constructor\r\n                                                      */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Override properties\n    var properties = self.properties;\n    properties.displayName = properties.displayName || \"\";\n  },\n\n\n  /*\r\n     *   Render the container layout\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"contentPanel\");\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      mode: self.getMode(),\n      uniqueId: properties.uniqueId,\n      isDesign: self.getMode() === \"design\",\n      messageValidation: properties.messageValidation,\n      cssClass: properties.cssclass,\n      guid: properties.guid });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n     *   Process the html rendering object\r\n     */\n  postRenderContainer: function postRenderContainer(panel) {\n    // Call base\n    this._super(panel);\n  } });","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\n\n  /*\r\n                                                    *   Render the container layout\r\n                                                    */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"searchForm\");\n\n    if (properties.contexttype !== \"entity\" && self.parent) {\n      properties.contexttype = typeof self.parent.getContextType == 'function' ? self.parent.getContextType() : \"\";\n    }\n\n    // Render the panel\n    var html = $.fasttmpl(template, {\n      displayName: properties.displayName,\n      uniqueId: properties.uniqueId });\n\n\n    // Render children\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n\n    // Render result\n    html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\n\n    return html;\n  },\n\n  /*\r\n     *   Perform a search and render the results\r\n     */\n  performSearch: function performSearch(searchParams) {\n    var properties = this.properties;\n\n    // Set parameter to search\n    properties.searchParams = searchParams;\n\n    // Submit the search to the server\n    this.submitSearch();\n  },\n\n  /*\r\n     *   Submits the query to the server\r\n     */\n  submitSearch: function submitSearch() {\n    // Makes the results to update its contents\n    this.refreshResults();\n  },\n\n  /*\r\n     *   Returns a promise that will resolve when the element is ready\r\n     */\n  ready: function ready() {\n    return this.parent.ready();\n  },\n\n  /*\r\n     *   Method to fill the result data\r\n     *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n     */\n  getRemoteData: function getRemoteData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Collect data\n    var data = self.collectSearchValues();\n\n    if (bizagi.util.isMapEmpty(data)) {\n      bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\n      return null;\n    }\n\n    params.rows = properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : params.rows;\n\n    // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \n    if (properties.searchParams && typeof properties.searchParams.maxRows !== \"undefined\") {\n      params.rows = properties.searchParams.maxRows || params.rows;\n    }\n\n    // Resolve with remote data\n    self.dataService.submitSearch($.extend(params, {\n      url: properties.dataUrl,\n      idRender: properties.idRender,\n      idPageCache: properties.idPageCache,\n      idSearchForm: properties.id,\n      allowFullSearch: properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null,\n      maxRecords: properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null,\n      criteria: data })).\n\n    done(function (response) {\n\n      // Resolve with fetched data    \n      properties.page = response.page;\n      properties.records = response.records;\n      properties.totalPages = response.totalPages || 0;\n\n      //In tablets are allowed about 10000 records as maximum\n      if (response.records > 10000) {\n        properties.deviceMaxRecordsExceeded = true;\n        response.deviceMaxRecordsExceeded = true;\n      } else {\n        delete properties.deviceMaxRecordsExceeded;\n      }\n\n      defer.resolve(response);\n\n      // Call virtual method\n      self.onSearchFinished();\n    }).fail(function (errorObject) {\n      bizagi.showErrorAlertDialog = false;\n      if (errorObject.responseText) {\n        try {\n          var message = JSON.parse(errorObject.responseText).message;\n          bizagi.showMessageBox(message, \"\", \"error\");\n        } catch (e) {\n        }\n      }\n      defer.reject();\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Iterate through all the renders in the container and fills the hashtable\r\n     *   - Overriden because server needs this in array\r\n     */\n  collectSearchValues: function collectSearchValues() {\n    var self = this;\n\n    // Collect data\n    var data = {};\n    this.collectRenderValues(data);\n\n    // Changes to array\n    var submitArray = [];\n    for (key in data) {\n      var xpath = key;\n      var value = data[key];\n      var operation = self.getCriteriaOperation(self.getRender(xpath));\n      var criteriaData = {};\n      if (!bizagi.util.isEmpty(value)) {\n        criteriaData[\"xpath\"] = xpath;\n        criteriaData[\"value\"] = value;\n        criteriaData[\"operation\"] = operation;\n        submitArray.push(criteriaData);\n      }\n    }\n\n    return submitArray;\n  },\n\n  /*\r\n     *   This method find out the criterial operation to be executed according to\r\n     *   data type. Text renders use LIKE operation, but other data types such like\r\n     *   numerics use exact match operatiors\r\n     */\n  getCriteriaOperation: function getCriteriaOperation(render) {\n    var self = this;\n    var properties = self.properties;\n\n    var operation = \"EQUALS\";\n    if (render.properties.dataType == \"15\") {\n      if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\n        if (properties.allowFullSearch) {\n          operation = \"FULLLIKE\";\n        } else {\n          operation = \"LIKE\";\n        }\n      }\n    }\n    return operation;\n  },\n\n  /*\r\n     *   Render the result controls for the query\r\n     *   Resolved in each device\r\n     */\n  renderResult: function renderResult() {\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n  },\n\n  /*\r\n     *   Function to parse the dataType\r\n     */\n  parseAdditionalProperties: function parseAdditionalProperties(dataType) {\n\n    // Number\n    if (dataType == 1 || dataType == 2 || dataType == 3 ||\n    dataType == 4 || dataType == 6 || dataType == 7 ||\n    dataType == 10 || dataType == 11) {\n      return { type: \"columnNumber\" };\n    }\n\n    // Oracle Number\n    if (dataType == 29) {\n      return { type: \"columnNumberScientificNotation\" };\n    }\n\n    // Money\n    if (dataType == 8) {\n      return { type: \"columnMoney\" };\n    }\n\n    // Date\n    if (dataType == 12 || dataType == 13) {\n      return { type: \"columnDate\" };\n    }\n\n    // Boolean\n    if (dataType == 5) {\n      return { type: \"columnBoolean\" };\n    }\n\n    // Text\n    return { type: \"columnText\" };\n  },\n\n  /*\r\n     *\r\n     */\n  onSearchFinished: function onSearchFinished() {\n    // Empty function, overrided for Tablet version for now\n  } });","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\n\n  /*\r\n                                              *   Constructor\r\n                                              */\n  initializeData: function initializeData(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Default properties\n    var properties = self.properties;\n    properties.helpText = properties.helpText || properties.displayName;\n\n    // Extend css property\n    properties.cssclass = properties.cssclass || \"\";\n  },\n\n  /*\r\n      *   Render the container layout\r\n      */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var tabItems = $.map(self.children, function (child, key) {\n      child.properties.counter = key;\n      child.properties.tooltip = child.properties.tooltip || child.properties.displayName || \"\";\n      return child.properties;\n    });\n    var template = self.renderFactory.getTemplate(\"tab\");\n    var mode = self.getMode();\n\n    // Render the tab\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      tabs: tabItems,\n      mode: mode,\n      isDesign: self.getMode() !== \"execution\",\n      editable: properties.editable,\n      tabOrientation: properties.orientation,\n      uniqueId: properties.uniqueId,\n      cssclass: properties.cssclass });\n\n\n    // Get active container based on focus\n    var activeTab = self.activeTab = self.getActiveTab();\n\n    // Render children\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      self.children[i].properties.loadOnDemand = i != activeTab;\n    }\n    html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\n    return html;\n  },\n\n  /*\r\n      *   Return the active tab containing the focus, or the first tab\r\n      */\n  getActiveTab: function getActiveTab() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = this.getFormContainer().getParams();\n    var mode = self.getMode();\n\n    if (mode === \"execution\") {\n      if (!formParams.isRefresh && properties.activeTab) {\n        self.getFormContainer().setFocusedElement(properties.activeTab);\n      }\n    }\n\n    var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\n\n    // Fetch from selected tabs collection\n    if (selectedTabs[self.properties.id] >= 0) {\n      return selectedTabs[self.properties.id];\n    }\n\n    // Check for focused elements\n    for (var i = 0, length = self.children.length; i < length; i++) {\n      // Load on demand other tabs besides the first one\n      if (self.children[i].containsFocusedElement()) return i;\n    }\n    return 0;\n  },\n\n  /**\r\n      * Update position of tab\r\n      * @param index\r\n      */\n  setActiveTab: function setActiveTab(index) {\n    var self = this;\n\n    self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\n\n    if (self.children[index]) {\n      var form = self.getFormContainer();\n\n      self.children[index].activate();\n      self.activeTab = index;\n\n      var selectedTab = {};\n      selectedTab[self.children[index].parent.properties.id] = index;\n      form.setParam(\"selectedTabs\", selectedTab);\n    }\n  } });","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\n\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\n\n  /*\r\n                                                 *   Render the container layout\r\n                                                 */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"tabItem\");\n\n    // Render the tabItem\n    var html = $.fasttmpl(template, {\n      id: properties.id,\n      uniqueId: properties.uniqueId,\n      counter: properties.counter,\n      tabOrientation: properties.orientation,\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    // Render content\n    html = self.renderTabContent(html);\n\n    return html;\n  },\n\n  /*\r\n     * Renders the tab content\r\n     */\n  renderTabContent: function renderTabContent(html) {\n    // Render children\n    return this.replaceChildrenHtml(html, this.renderChildrenHtml());\n  },\n\n  /*\r\n     *   Fires when the tab is selected \r\n     */\n  activate: function activate() {\n    this.active = true;\n  },\n\n  /*  \r\n     *   Return the current focuses container\r\n     */\n  getFocus: function getFocus() {\n    var self = this;\n    var focus = self._super();\n    if (bizagi.util.isEmpty(focus) && self.active) {\n      focus = self.properties.id;\n    }\n\n    return focus;\n  },\n\n  /*\r\n     *   Return true if this tab contains the active focused element\r\n     */\n  containsFocusedElement: function containsFocusedElement() {\n    var self = this;\n    var focus = self.getFormContainer().getFocusedElement();\n\n    if (focus) {\n\n      // Locate element\n      if (focus.xpath) {\n        // Search by xpath and id\n        var elements = self.getFormContainer().getRenders(focus.xpath);\n        var element;\n\n        $.each(elements, function (i, item) {\n          // Just select editable control\n          if (item.properties.id == focus.id && item.properties.editable) {\n            element = item;\n          }\n        });\n      } else {\n        // Search just using id\n        var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\n      }\n\n      // Search element parent\n      if (element) {\n        while (element.parent) {\n          if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\n          element = element.parent;\n        }\n      }\n    }\n\n    return false;\n  } });","/*\r\n*   Name: BizAgi Nested Form Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a nested form container class for all devices\r\n*/\n\n$.Class.extend(\"bizagi.rendering.nestedForm\", {}, {});","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\n\n  /*\r\n                                                         * Initialize the control with data provided\r\n                                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n    var properties = self.properties;\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    if (mode == \"execution\") {\n      self.engine = new bizagi.templateEngine({\n        renderFactory: self.renderFactory,\n        cache: true,\n        autoGenerateData: false,\n        templateGuid: properties.selecttemplate });\n\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"ptags\": self.properties.tagslist || [],\n      \"pmaxitems\": self.properties.maxItems,\n      \"pactionXpath\": self.properties.xpathActions };\n\n\n    self.processPropertyValueDataTmplArgs = {\n      \"pactionXpath\": self.properties.xpathActions,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"ptemplateGuid\": properties.selecttemplate,\n      \"property\": \"dataTemplate\",\n      \"xpathActions\": self.properties.xpathActions };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ?\n    defaultAllowActions : data.properties.allowactions;\n    self.properties.isHorizontal = typeof data.properties.isHorizontal == \"undefined\" ?\n    true : data.properties.isHorizontal;\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ?\n    false : data.properties.allowSearch;\n    self.properties.selecttemplate = typeof data.properties.selecttemplate == \"undefined\" ?\n    \"\" : data.properties.selecttemplate;\n    self.properties.templatetype = typeof properties.templatetype != \"undefined\" ?\n    properties.templatetype : 'none';\n\n    self.properties.sessionId = form.params.data.sessionId;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteAction = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeAction\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidAction\": action.guidAction,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\n      self.notifyExecution(data, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      * @param actionName\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\n      var params = {\n        type: properties.type,\n        isHorizontal: properties.isHorizontal,\n        allowSearch: properties.allowSearch,\n        templateDefined: properties.templatetype != 'none',\n        allowactions: properties.allowactions };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-actionLauncher\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    var value = self.getValue();\n    var bValid = false;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) {\n      return true;\n    }\n\n    // Check required\n    if (properties.required) {\n      if (self.value) {\n        if (self.value.length > 0)\n        return true;\n        message = self.getResource(\"render-required-register-action\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidProcess || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayName,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        // If it has additional xpath this action is a form of collection\n        if (action.xpathContext) {\n          $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        } else {\n\n          if (action.actionType === \"Form\") {\n            action.xpathContext = undefined;\n            action.contextType = \"entitytemplate\";\n            action.guidEntity = action.guidEntity || self.properties.guidEntity;\n          }\n\n          $.when(self.processActionForm(action)).done(function (idStartScope) {\n            action.idStartScope = idStartScope;\n            def.resolve(action);\n          });\n        }\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity };\n\n        break;\n      case \"Rule\":\n        action.params = {\n          xpathActions: action.xpathActions || \"\",\n          recordXpath: recordXpath };\n\n        break;}\n\n\n    var newValueActionsList = bizagi.clone(actionsList);\n    newValueActionsList.push(action);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var newValueActionsList = bizagi.clone(self.getValue());\n    newValueActionsList.splice(index, 1);\n    self.setValue(newValueActionsList);\n    self.setDisplayValue(newValueActionsList);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidAction;\n\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n     * Normalize action launcher control properties\r\n     * @param actionsLaucher\r\n     * @returns {*}\r\n     */\n  getPropertiesActionLaucher: function getPropertiesActionLaucher(actionsLaucher) {\n    var self = this;\n    var form = self.getFormContainer();\n    /**\r\n                                         * The properties of actionLaucher have to 7 properties mandatory\r\n                                         * 0: guidProcess\r\n                                         * 1: displayName\r\n                                         * 2: title\r\n                                         * 3: actionType\r\n                                         * 4: guidaction\r\n                                         * 5: xpathContext\r\n                                         * 6: readOnlyForm: default: false\r\n                                         */\n    for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\n      //some ocassions server return 6 or 7 items\n      //return 6 properties when launch form action from action launcher control.\n      //in this case dont return xpathContext.\n      // So, add item position 5, simulate xpathContext empty.\n      if (actionsLaucher[i].length === 6) {\n        actionsLaucher[i].splice(5, 0, \"\");\n\n        if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\n          actionsLaucher[i][5] = form.properties.xpathContext;\n        }\n      }\n    }\n\n    return actionsLaucher;\n  } });","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muoz\r\n * based on action launcher control\r\n */\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"psurrogatedKey\": self.properties.surrogatedKey };\n\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowactions = typeof data.properties.allowactions == \"undefined\" ? true : data.properties.allowactions;\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\n      html = $.fasttmpl(template, {});\n    } else\n    if (self.properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-entityTemplate\");\n      html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\n    }\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    // TODO: write functionality\n    // Set internal value\n    self.setValue(value, false);\n  } });","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\n\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /*\r\n                                                              * Constructor\r\n                                                              */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n    var form = self.getFormContainer();\n    this.typeForm = form.properties.typeForm || \"\";\n    var mode = self.getMode();\n\n    self.deferredActions = new $.Deferred();\n    self.deferredActions.promise();\n\n    self.properties.valueWidth = 100;\n    self.properties.displayType = \"value\";\n    self.properties.allowSearch = typeof data.properties.allowSearch == \"undefined\" ? false : data.properties.allowSearch;\n    self.properties.additionalXpath = self.properties.additionalXpath || [];\n\n    if (!self.properties.value) {\n      self.properties.value = self.value = [];\n      self.properties.originalValue = [];\n    } else if (typeof self.properties.value == \"string\") {\n      self.properties.value = self.value = JSON.parse(self.properties.value);\n    }\n\n    // Data of get process property value\n    self.processPropertyValueArgs = {\n      \"pcaseId\": self.getIdCase(),\n      \"pguidEntity\": self.properties.guidEntity,\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"data\",\n      \"ptags\": self.getTagList(self.properties.tagslist),\n      \"additionalXpaths\": self.properties.additionalXpath };\n\n  },\n\n  /**\r\n      * Send processpropertyvalue in order to execute an Action\r\n      * This method is used when this control stay in Summary form or Global form\r\n      * @param action\r\n      */\n  executeActionImmediately: function executeActionImmediately(action) {\n    var self = this;\n    //Execute action immediately\n    var form = self.getFormContainer();\n\n    var processPropertyValueExecuteConstructor = {\n      \"idRender\": self.properties.id,\n      \"xpathContext\": form.properties.xpathContext,\n      \"idPageCache\": form.properties.idPageCache,\n      \"property\": \"executeConstructor\",\n      \"psurrogatedKey\": self.properties.surrogatedKey,\n      \"pguidConstructor\": action.guidConstructor,\n      \"pparameters\": JSON.encode({\n        \"idStartScope\": action.idStartScope,\n        \"pactionXpath\": self.properties.xpathActions,\n        \"idPageCache\": action.idPageCache }) };\n\n\n\n    self.dataService.executeActions(processPropertyValueExecuteConstructor).done(function (data) {\n      self.notifyExecution(data.response, action);\n    }).fail(function (error) {\n      // TODO: Create generic mechanism to send notifications\n      self.notifyExecution(\"Error\", action);\n    });\n  },\n\n  /**\r\n      * notify action execution status\r\n      * @param response\r\n      */\n  notifyExecution: function notifyExecution(response, actionName) {\n    // To override in each device\n  },\n\n  /**\r\n      * Render control in read only mode: properties.editable = false\r\n      * @return {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Make a postrender of readonly control\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this.properties.readOnly = true;\n    this.postRender();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @return {string}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var template;\n    var html = \"\";\n\n    // Render template\n    if (mode == \"design\") {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\n      var params = {\n        type: properties.type,\n        allowSearch: properties.allowSearch };\n\n      html = $.fasttmpl(template, params);\n    } else if (properties.surrogatedKey) {\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\n      html = $.fasttmpl(template);\n    }\n    return html;\n  },\n\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @return {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    // TODO: write functionality\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Process an action\r\n      * @param action\r\n      */\n  actionManager: function actionManager(action) {\n    var self = this;\n    var guidProcess = action.guidObject || \"\";\n    var def = new $.Deferred();\n\n    action.recordXpath = self.getFormContainer().properties.recordXpath;\n\n    /**\r\n                                                                         /**\r\n                                                                          * Check if action is a process\r\n                                                                          */\n    switch (action.actionType) {\n      case \"Process\":\n        // Verify if case has startform\n        var params = {\n          guidWFClass: guidProcess };\n\n\n        $.when(self.dataService.hasStartForm(params)).done(function (result) {\n          if (result.hasStartForm) {\n            // Open a dialog with startform and wait for Scope\n            $.when(self.processStartForm({\n              guidprocess: guidProcess,\n              title: action.displayNamee,\n              recordXpath: action.recordXpath })).\n            done(function (idStartScope) {\n              action.idStartScope = idStartScope;\n              def.resolve(action);\n            });\n          } else {\n            // Just add action to queue to be executed on nextEvent\n            def.resolve(action);\n          }\n        });\n\n        break;\n      case \"Rule\":\n        // Just add action to queue to be executed on nextEvent\n        def.resolve(action);\n        break;\n      case \"Form\":\n        $.when(self.processActionForm(action)).done(function (idStartScope) {\n          action.idStartScope = idStartScope;\n          def.resolve(action);\n        });\n        break;}\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Add actions within value object\r\n      * @param action\r\n      */\n  addActionToQueue: function addActionToQueue(action) {\n    var self = this;\n    var actionsList = self.getValue();\n    var formParams = self.getFormContainer().getParams();\n\n    action.params = action.params || {};\n\n    var recordXpath = self.properties.xpathContext;\n\n    switch (action.actionType) {\n      case \"Process\":\n        action.params = {\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          recordXpath: recordXpath };\n\n        if (typeof action.idStartScope !== \"undefined\") {\n          action.params.idStartScope = action.idStartScope;\n        }\n        break;\n      case \"Form\":\n        action.params = {\n          idStartScope: action.idStartScope,\n          additionalXpaths: self.properties.additionalXpath.join(\",\"),\n          entityXpath: self.properties.xpathActions,\n          idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\n          idEntity: action.idEntity,\n          guidEntity: action.guidEntity };\n\n        break;\n      case \"Rule\":\n        //TODO\n        break;}\n\n\n    actionsList.push(action);\n    self.setValue(actionsList);\n    self.setDisplayValue(actionsList);\n  },\n\n  /**\r\n      * Remove action within value object\r\n      * @param index\r\n      */\n  removeActionToQueue: function removeActionToQueue(index) {\n    var self = this;\n    var value = self.getValue();\n    value.splice(index, 1);\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param renderValues\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    if (self.controlValueIsChanged()) {\n      var properties = self.properties;\n      var xpath = properties.xpath;\n      var controlValue = self.getValue();\n      var actions = [];\n      $.each(controlValue, function (index, value) {\n        var action = {};\n        action.params = value.params || {};\n        action.guidAction = value.guidObject || value.guidAction;\n        action.displayName = value.displayName;\n        action.guidConstructor = value.guidConstructor;\n        action.actionType = value.actionType;\n        action.xpathContext = value.xpathContext;\n        action.guidEntity = value.guidEntity;\n        actions.push(action);\n      });\n      renderValues[xpath] = actions.length == 0 ? \"\" : JSON.encode(actions);\n    }\n  },\n\n  /**\r\n      * Util to count how many actions are there\r\n      * @param action\r\n      * @return {number}\r\n      */\n  countSameActions: function countSameActions(action) {\n    var self = this;\n    var value = self.getValue();\n    var count = 0;\n    $.each(value, function (key, value) {\n      if (value.guidAction == action.guidAction) {\n        count++;\n      }\n    });\n    return count;\n  },\n\n  /**\r\n      * Get list of tags\r\n      * @param taglist\r\n      * @return {Array}\r\n      */\n  getTagList: function getTagList(taglist) {\n    taglist = taglist || [];\n    var result = [];\n\n    for (var i = taglist.length; i > 0; i--) {\n      result.push(taglist[i - 1].value);\n    }\n    return result.length > 0 ? result : \"\";\n  } });","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.check\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n\n    properties.showLetters = bizagi.override && bizagi.override.enableCheck === true && !properties.editable;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"check\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmpty(value)) return false;\n\n    var booleanValue = bizagi.util.parseBoolean(value);\n\n    return !(booleanValue === false && this.properties.required);\n  } });","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.number\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.setGroupDigits();\n    properties.colorize = properties.colorizeOnNegative || false;\n    properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\n    properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\n\n    if (typeof properties.value != \"undefined\" && /[e][-+]/gi.test(properties.value) && Math.abs(parseFloat(properties.value)) < 1) {\n      properties.value = self.value = parseFloat(properties.value).toFixed(properties.numDecimals);\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"number\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      editable: self.properties.editable,\n      value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\n      type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\n      isDesign: self.getMode() !== \"execution\" });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n\n    self._super();\n\n    var control = self.getControl();\n    var properties = self.properties;\n\n    self.numericInput = control.find(\"input\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numeric(self.properties.decimalSymbol);\n\n    // Attach event for retype double\n    if (properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  /**\r\n      * Method to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    // Attach Format Currency Plugin to format the input\n    this.attachFormatCurrency();\n  },\n\n  /**\r\n      * Removes Validation Messages\r\n      */\n  removeValidations: function removeValidations() {\n    var form = this.getFormContainer().parent || this.getFormContainer();\n\n    form.clearValidationMessages();\n  },\n\n  /**\r\n      * Function virtual implements on children (desktop,smartphone...).\r\n      * @returns {}\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n  formatNumericInput: function formatNumericInput($input) {\n    var self = this;\n    var properties = self.properties;\n    var message = bizagi.localization.getResource(\"render-number-retype-fail\");\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController == \"undefined\") {\n      var $canvas = form.getValidationsContainer();\n      form.validationController = new bizagi.command.controllers.validation(form, self.validations, $canvas);\n    }\n\n    var validationController = form.validationController || form.parent.validationController;\n    var decimalSeparator = \".\";\n    var digitGroupSeparator = \",\";\n\n    if (typeof BIZAGI_DEFAULT_CURRENCY_INFO == \"undefined\") {\n      decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\n      digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\n    } else\n    {\n      decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\n      digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\n    }\n\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (properties.percentage) self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\n    var inputValue = self.numericInput.val();\n    inputValue = decimalSeparator == \",\" ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\n    inputValue = inputValue.replace(properties.symbol, \"\");\n    //Replace all the ocurrences of the digitGroupSeparator\n    inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\n    if (inputValue.toString().indexOf(decimalSeparator) != -1) {\n      if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\n      if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\n    }\n\n    if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\n\n    if (/(.+)-$/.test(inputValue)) {\n      inputValue = inputValue.replace(/(.+)-$/, '-$1');\n      self.numericInput.val(inputValue);\n    }\n\n    var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\n    var xPath = self.properties.xpath;\n    var oldVal = self.numericInput.val();\n\n\n    if (self.isInvalidFormat != null && self.isInvalidFormat == true ||\n    inputValue != \"\" && [\"$\", \"\", \"\", \"\", properties.symbol].indexOf(inputValue) != -1) {\n      self.setValue(\"\");\n      self.getControl().find(\"input\").val(\"\");\n      self.numericInput.val(\"\");\n      return;\n    }\n\n    if (bizagi.util.trim(inputValue) == \"\") {\n      self.setValue(\"\");\n      return;\n    }\n\n    //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\n    var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\n    if (isNaN(tempValue)) {\n      tempValue = self.numericInput.asNumber();\n    }\n\n    if (minValue !== undefined && minValue != null && tempValue < minValue) {\n      message = bizagi.localization.getResource(\"render-numeric-minimum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#minValue#\", minValue.toString());\n    } else\n    if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\n      message = bizagi.localization.getResource(\"render-numeric-maximum-validation\").\n      replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\").\n      replaceAll(\"#maxValue#\", maxValue.toString());\n    } else\n    message = message + \" \" + oldVal + \"\";\n\n\n    // Do datatype validations\n    if (\n    minValue !== undefined && minValue !== null && tempValue < minValue ||\n    maxValue !== undefined && maxValue !== null && tempValue > maxValue ||\n    self.properties.dataType == 10 && inputLength > 15 ||\n    self.properties.dataType == 1 && inputLength > 19 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    self.properties.dataType == 11 && inputLength > 7 ||\n    oldVal.match(/[^$,-.()\\d]/))\n    {\n      if (typeof validationController != \"undefined\" && validationController != null) {\n        self.removeValidations();\n\n        var messageToShow = message;\n        if (messageToShow.indexOf(oldVal) === -1) {\n          messageToShow = message + \" \" + oldVal + \"\";\n        }\n\n        validationController.showValidationMessage(messageToShow, xPath);\n        self.isValidRender = false;\n        self.isValidRenderMessage = messageToShow;\n      }\n      message = message.replace(oldVal, \"\");\n      return;\n    } else\n    {\n      self.isValidRender = true;\n      self.isValidRenderMessage = \"\";\n    }\n\n    // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\n    if ($input.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if (properties.symbol.length > 0) $input.value = $input.value.toString().replace(properties.symbol + \"0\", properties.symbol);\n      $input.value = $input.value.toString().replace(/^0+/, '');\n      if ($input.value.replaceAll('0', '').length == 0)\n      $input.value = properties.symbol + \"0\";else\n      if ($input.value.toString() == parseInt($input.value)) $input.value = properties.symbol + $input.value;\n    } else {\n      //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\n      if (self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\") {\n        $input.value = $input.value.toString().replace(/^0+/, '');\n        if ($input.value === \"\") {\n          $input.value = 0;\n        }\n      }\n    }\n    self.executeFormatCurrencyPlugin();\n\n    // Updates internal value\n    self.setValue(self.numericInput.asNumber({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits }));\n\n\n    if (properties.percentage) {\n      if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\n      self.numericInput.val(self.numericInput.val() + '%');\n    }\n    message = message.replace(oldVal, \"\");\n\n  },\n  /**\r\n      * Adds the format currency plugin\r\n      * @returns {}\r\n      */\n  attachFormatCurrency: function attachFormatCurrency() {\n    var self = this;\n    var properties = self.properties;\n    self.isValidRender = self.isValidRender || true;\n\n    // Extend formatCurrency language\n    if ($.formatCurrency.regions[bizagi.language] == null)\n    $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\n\n    // Attach events\n    self.numericInput.blur(function () {\n      self.formatNumericInput(this);\n    })\n\n    // Avoiding pasting invalid characters\n    .bind('paste', function (e) {\n      try {\n        var tmpData = bizagi.util.isIE() || bizagi.util.isIE11() ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\n\n\n\n        // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\n        var totalVal = \"/[^0-9\";\n        if (properties.decimalSymbol.length > 0) {\n          totalVal += properties.decimalSymbol;\n        }\n        // Next lines only for currency type\n        if (properties.dataType == 8) {\n          if (properties.symbol.length > 0) {\n            totalVal += properties.symbol;\n          }\n          if (properties.digitGroupSymbol.length > 0) {\n            totalVal += properties.digitGroupSymbol;\n          }\n        }\n        totalVal += \"\\\\-\\\\s]/gi\";\n        try {\n          if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\n          e.preventDefault();\n        }\n        catch (e) {\n        }\n      }\n      catch (e) {\n        bizagi.log(\"Error to pasting content\");\n        self.isInvalidFormat = true;\n      }\n    })\n    // Now we implement keydown instead of keyup in order to include preventDefault\n    .keydown(function (e) {\n      self.previousValue = this.value;\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      // Validation for currency info\n      if (typeof BIZAGI_DEFAULT_CURRENCY_INFO != \"undefined\")\n      if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\n      if (properties.dataType < 5 || properties.dataType == 8 && properties.allowDecimals == false)\n      if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\n      e.preventDefault();\n      if (this.value)\n      if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\n        // Just numbers\n        if (keyUnicode > 47 && keyUnicode < 58) {\n          if (self.formatTimeout) {\n            clearTimeout(self.formatTimeout);\n          }\n\n          var floatPart = this.value + \"\";\n          //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\n          if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\n          }\n          if (properties.symbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.symbol, \"\");\n          }\n\n          floatPart = $.trim(floatPart);\n          if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\n            floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\n          }\n          // If increasing one digit (x10) will overtake the maxValue\n          if (floatPart * 10 > properties.dataTypeMaxValue) {\n            e.preventDefault();\n          }\n        } else\n        if (keyUnicode == 109 || keyUnicode == 189) {\n          if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\n            var currentPosition = this.selectionEnd;\n            this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\n            this.selectionStart = this.selectionEnd = currentPosition + 1;\n          } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\n            this.value = \"-\";\n            this.selectionStart = this.selectionEnd = this.value.length;\n          }\n        }\n      }\n    }).\n\n    keyup(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (e !== undefined) {\n        switch (keyUnicode) {\n          case 16:\n            break; // Shift\n          case 17:\n            break; // Ctrl\n          case 13:\n            break; // Intro\n          case 18:\n            break; // Alt\n          case 27:\n            this.value = '';\n            break; // Esc: clear entry\n          case 35:\n            break; // End\n          case 36:\n            break; // Home\n          case 37:\n            break; // cursor left\n          case 38:\n            break; // cursor up\n          case 39:\n            break; // cursor right\n          case 40:\n            break; // cursor down\n          case 78:\n            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\n          case 110:\n            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\n          case 188:\n            break; // , comma\n          case 190:\n            break; // .\n          default:\n            {\n\n            }}\n\n      }\n    }).keypress(function (e) {\n      e = window.event && window.event.preventDefault ? window.event : e;\n      var keyUnicode = e.charCode || e.keyCode;\n      if (typeof e !== \"undefined\") {\n        if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\n          e.preventDefault();\n        } else if (properties.dataType != 8 && keyUnicode == 36) {\n          e.preventDefault();\n        }\n\n        // When no decimals are permited\n        var character = String.fromCharCode(keyUnicode);\n        if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\n        e.preventDefault();\n      }\n    });\n\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.numericInput) {\n      self.numericInput.formatCurrency({\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n\n    if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      var value = self.numericInput.val();\n      var positive = true;\n\n      if (value.indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(regExp, \"$1\");\n\n      regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(regExp, \"\");\n      self.numericInput.val(value);\n\n      if (!positive) self.numericInput.val(\"(\" + value + \")\");\n    }\n\n    if (properties.percentage)\n    self.numericInput.val(self.numericInput.val() + '%');\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      * @returns {*}\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    if (properties.percentage)\n    label = $('<label/>').html(label.text() + '%');\n\n    // Removing unrequired zeros as requested by BA26331\n    if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\n      value = label.text();\n      var positive = true;\n\n      if (value.toString().indexOf(\")\") !== -1) {\n        positive = false;\n        value = value.replace(\"(\", \"\").replace(\")\", \"\");\n      }\n\n      var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\n      value = value.replace(re, \"$1\");\n\n      re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\n      value = value.replace(re, \"\");\n\n      if (!positive) value = \"(\" + value + \")\";\n      return value;\n    }\n\n    return label.text();\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n    var message;\n    var minValue = self.getMinValue();\n    var maxValue = self.getMaxValue();\n\n    if (typeof value == \"string\" && value != \"\") {\n      value = Number(value);\n    }\n\n    // Check min value\n    if (self.hasValue()) {\n      if (!bizagi.util.isEmpty(minValue)) {\n        if (value < minValue) {\n          message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n      // Check max value\n      if (!bizagi.util.isEmpty(maxValue)) {\n        if (value > maxValue) {\n          message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n\n    }\n\n    if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\n      bValid = false;\n      var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\n      invalidElements.push({ xpath: properties.xpath, message: validMessage });\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Get minimum value\r\n      * @returns {*}\r\n      */\n  getMinValue: function getMinValue() {\n    var minValue = this.properties.minValue;\n\n    if (minValue !== undefined && minValue !== null)\n    return minValue;\n\n    return this.properties.dataTypeMinValue;\n  },\n\n  /**\r\n      * Get maximum value\r\n      * @returns {*}\r\n      */\n  getMaxValue: function getMaxValue() {\n    var maxValue = this.properties.maxValue;\n\n    if (maxValue !== undefined && maxValue !== null)\n    return maxValue;\n\n    return this.properties.dataTypeMaxValue;\n  },\n\n  /**\r\n      * Return the allow decimals default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n      // Decimal and money data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /**\r\n      * Return the group digits default property based on the datatype\r\n      * @param dataType\r\n      * @returns {boolean}\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\n        return false;\n      }\n\n      // Decimal data types\n      if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\r\n      * Return the group digits default property based on digitGroupSymbol\r\n      * @returns {*}\r\n      */\n  setGroupDigits: function setGroupDigits() {\n    var self = this;\n    if (typeof self.properties.thousands !== \"undefined\") {\n      if (self.properties.digitGroupSymbol) {//some cultures\n        return bizagi.util.parseBoolean(self.properties.thousands);\n      } else {\n        return false;\n      }\n    } else if (self.properties.digitGroupSymbol) {//some cultures\n      return this.getDefaultGroupDigits(self.properties.dataType);\n    } else {\n      return false;\n    }\n  },\n\n  /**\r\n      * Calculate Minimum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMinValue: function calculateMinValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return -922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 0; // tinyint\n    }\n    if (dataType === 3) {\n      return -32768; // smallint\n    }\n    if (dataType === 2) {\n      return -2147483648; // int\n    }\n    if (dataType === 1) {\n      return -999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate Maximum Value\r\n      * @param dataType\r\n      * @returns {*}\r\n      */\n  calculateMaxValue: function calculateMaxValue(dataType) {\n    if (dataType === 8 || dataType === 10) {\n      return 922337203685477; // Money\n    }\n    if (dataType === 4) {\n      return 255; // tinyint\n    }\n    if (dataType === 3) {\n      return 32767; // smallint\n    }\n    if (dataType === 2) {\n      return 2147483647; // int\n    }\n    if (dataType === 1) {\n      return 999999999999999; // bigint\n    }\n    return null;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMinValue: function performMinValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMinValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Calculate min value\r\n      * @param value\r\n      * @returns {number}\r\n      */\n  performMaxValue: function performMaxValue(value) {\n    var newValue = Number(value);\n\n    if (isNaN(newValue)) {\n      newValue = this.calculateMaxValue(this.properties.dataType);\n    }\n\n    return newValue;\n  },\n\n  /**\r\n      * Changes the render minimum value\r\n      * @param value\r\n      */\n  changeMinValue: function changeMinValue(value) {\n    var newValue = this.performMinValue(value);\n\n    this.properties.minValue = this.properties.dataTypeMinValue = newValue;\n  },\n  /**\r\n      * Changes the render maximum value\r\n      * @param value\r\n      */\n  changeMaxValue: function changeMaxValue(value) {\n    var newValue = this.performMaxValue(value);\n\n    this.properties.maxValue = this.properties.dataTypeMaxValue = newValue;\n  },\n\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    try {\n      // Destroy tooltips\n      control.tooltip(\"destroy\");\n    } catch (e) {\n    }\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  } });","\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\n\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\n  /*\r\n                                                               *   Update or init the element data\r\n                                                               */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ?\n    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n  },\n\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\n\n    // Render template\n    var html = $.fasttmpl(template, {});\n    return html;\n  },\n\n  /*\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n    self.numericInput = control.find(\"input\");\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getValue().replace('.', self.properties.decimalSymbol);\n  },\n\n  setValue: function setValue(value) {\n    var self = this;\n    value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\n    self._super(value);\n  },\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n    var value = self.getValue() || \"\";\n    var compareValue = properties.originalValue || \"\";\n    var result = true;\n\n    // Flag to force to collect data\n    if ($.forceCollectData) {\n      return true;\n    }\n    result = compareValue.toLowerCase() == value.toLowerCase() ? false : true;\n    return result;\n  } });","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\n\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\n\n  /**\r\n                                                 * Returns the in-memory processed element\r\n                                                 */\n  renderControl: function renderControl() {\n    if (this.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var properties = this.properties;\n\n    // Call base\n    this._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      this.setDisplayValue(properties.value);\n    }\n  } });","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.text\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param data\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n    if (properties.regularExpressionExpression) {\n      var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\n      properties.regularExpression = { \"expression\": properties.regularExpressionExpression, \"message\": message };\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"text\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      value: this.properties.value,\n      isEmptyField: typeof this.properties.value === \"undefined\",\n      helpText: this.properties.helpText,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"text-read-only\");\n    var value = this.getValue();\n\n    if (bizagi.util.isString(value)) {\n      value = value.replaceAll(\"`\", \"&#96;\");\n    }\n\n    // Render template\n    return $.fasttmpl(template, { value: value, editable: this.properties.editable });\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    this.input = this.getControl().find(\"input\");\n\n    //Attach event for retype double\n    if (this.properties.retype === \"double\")\n    this.attachRetypeDouble();\n  },\n\n  /**\r\n      * function virtual implements on children (desktop,samrtphone...).\r\n      */\n  attachRetypeDouble: function attachRetypeDouble() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check mask property\n    if (properties.mask)\n    self.input.mask({ mask: properties.mask });\n\n    // Attach change event\n    self.input.bind(\"change\", function () {\n\n      // Updates internal value\n      self.setValue(self.input.val(), false);\n\n      // Check that the value is valid\n      var validationMessages = [];\n      if (properties.retype !== \"duplicate\") {\n        if (self.isValid(validationMessages) || typeof properties.regularExpression === \"undefined\") {\n          // Update value again triggering handlers\n          self.setValue(self.input.val(), true);\n        }\n      }\n\n    }).keypress(function (e) {\n      e = window.event || e;\n      var keyUnicode = e.charCode || e.keyCode;\n\n      if (e !== undefined) {\n        if (keyUnicode == 13) {\n          $(this).trigger(\"change\");\n        }\n      }\n    });\n    //QA33146 - maxlength does not support in Android Devices. \n    if (bizagi.util.isAndroidDevice() && properties.maxLength > 0) {\n      self.input.bind(\"keyup\", function (e) {\n        var inputLength = $(this).val() && $(this).val().length;\n        if (inputLength >= properties.maxLength) {\n          e.preventDefault();\n          e.target.value = e.target.value.substring(0, properties.maxLength);\n        }\n      });\n    }\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {*}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    // Call base\n    var bValid = this._super(invalidElements);\n    var value = self.getValue();\n\n    // When the form have big data, block browser executing RegExp. QAF-1418.\n    // Check regular expression\n    if (typeof value == \"string\") {\n      if (properties.regularExpression) {\n        if (properties.editable) {\n          var regex = new RegExp(\"\");\n          try {\n            regex = new RegExp(properties.regularExpression.expression);\n          }\n          catch (e) {\n            if (bizagi.override.showDesignValidations) {\n              bizagi.log(e);\n              invalidElements.push({ xpath: properties.xpath, message: e.message });\n              bValid = false;\n            }\n          }\n\n          if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex) && self.properties && self.properties.xpath === \"userName\")) {\n            var message = properties.regularExpression.message;\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          } else {\n            if (value && (value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\")) || !value.match(regex))) {\n              var message = properties.regularExpression.message;\n              invalidElements.push({ xpath: properties.xpath, message: message });\n              bValid = false;\n            }\n          }\n        }\n      } else {\n        // Strange behavior on IE. When matchs are united on IE have is very slow\n        // solution, divide matchs\n        //.*? means for more information search: \"Lazy matching regexp\"\n        if (value && value.match(new RegExp(\".*?eval\\\\(\", \"g\")) && value.match(new RegExp(\".*?eval\\\\u0028\", \"g\"))) {\n          if (properties.editable) {\n            var message = this.getResource(\"render-text-regular-expression-default-message\");\n\n            invalidElements.push({ xpath: properties.xpath, message: message });\n            bValid = false;\n          }\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n    var decodedValue = bizagi.util.decodeURI(value);\n\n    if (!bizagi.util.parseBoolean(self.properties.editable)) {\n      // Render as simple value\n      if (typeof value === \"string\") {\n        // Replace line breaks for html line breaks\n        var valueToDisplay = bizagi.util.encodeHtmlText(self.getDisplayValue());\n\n        control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\n      } else {\n        if (bizagi.util.isNull(value)) {\n          control.html(\"\");\n        }\n      }\n    }\n\n    // Set internal value\n    self.setValue(decodedValue, false);\n  },\n\n  /**\r\n      * Extend setValue to fix all encode data from database\r\n      * @param value\r\n      */\n  setValue: function setValue(value) {\n    this._super(value);\n  },\n\n  /**\r\n      * Helptext tooltip\r\n      * @param {} control\r\n      * @param {} currentValue\r\n      * @param {} currentTitle\r\n      */\n  createTooltip: function createTooltip(control, currentValue, currentTitle) {\n    control.data(\"oldValue\", currentValue);\n    control.val(\"\");\n\n    if (control.data('ui-tooltip')) control.tooltip('destroy');\n\n    control.attr(\"title\", currentTitle);\n    control.tooltip();\n\n    var toolTipZindex = $.getMaxZindex();\n    control.tooltip().on(\"tooltipopen\", function (event, ui) {\n      ui.tooltip.zIndex(toolTipZindex);\n    });\n\n    // Create new tooltip\n    control.tooltip(\"open\");\n\n    var timeOutFocus = setTimeout(function () {\n      control.focus();\n      clearTimeout(timeOutFocus);\n    }, 100);\n  },\n\n\n  //#region No side effects functions\n  /**\r\n   * Gets the string with the correct size\r\n   * @param {string} value String value to validate\r\n   * @param {Integer} maxLength Maximum size of the string\r\n   * @returns {string} String value validated\r\n   */\n  validateValue: function validateValue(value, maxLength) {\n    if (typeof value !== \"string\" || maxLength < 1 || value.length <= maxLength) return value;\n    return value.substr(0, maxLength);\n  }\n  //#endregion No side effects functions\n});","/**\r\n *   Name: Bizagi Render Readonly Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.readonly\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"readonly-value\");\n    var value = this.getMode() == 'execution' ?\n    this.getFormattedValue(this.properties.value, this.properties.dataType) :\n    this.getDesignModeValue(this.properties.renderType);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: this.properties.id,\n      value: value });\n\n\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      *  Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    // DON'T DO ANYTHING\n  },\n\n  /**\r\n      * Get data value with format\r\n      * @param value\r\n      * @param dataType\r\n      */\n  getFormattedValue: function getFormattedValue(value, dataType) {\n    if (bizagi.util.isEmpty(value)) return \"\";\n\n    // If dataType is integer\n    if ([1, 2, 3, 4, 7].includes(dataType)) return value;\n\n    // If dataType is boolean\n    if ([5, 17].includes(dataType)) return bizagi.util.formatBoolean(value);\n\n    // If dataType is monetary\n    if ([8].includes(dataType)) return bizagi.util.formatMonetaryValue(value);\n\n    // If dataType is real or float\n    if ([6, 10, 11].includes(dataType)) return bizagi.util.formatDecimalValue(value);\n\n    // If dataType is date\n    if ([12, 13].includes(dataType)) return bizagi.util.formatDateValue(value);\n\n    // Otherwise, If dataType is string\n    return bizagi.util.sanitizeHTML(value) || \"\";\n  },\n\n  /***/\n  getDesignModeValue: function getDesignModeValue(renderType) {\n\n    // If dataType is integer\n    if (renderType == 'number') return '123';\n    if (renderType == 'string') return 'abc';\n    if (renderType == 'date') return '1/1/1900';\n    if (renderType == 'boolean') return 'false';\n    if (renderType == 'currency') return '$123';\n\n    return \"\";\n  },\n\n  /** \r\n      * Customizes render background color\r\n      * @param {} color\r\n      * @returns {}\r\n      */\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.element.style(\"background\", color, \"important\");\n    } else {\n      this.element.css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  /**\r\n      * Gets jQuery Object to stylize\r\n      * @param {jQuery Object} $context jQuery Object\r\n      */\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\".bz-input--readonly\", $context);\n  } });","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 * @returns {}\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption || \"\";\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // A button cannot be required\n    properties.required = false;\n\n    // This flag enable/disable default behaviors of buttons\n    // auto save and execute rule\n    properties.preventDefault = properties.preventDefault || false;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"button\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      caption: self.properties.caption,\n      cssClass: self.properties.cssclass || \"\",\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render behaviour after to be processed\r\n      */\n  postRender: function postRender() {\n    // call base\n    this._super();\n\n    this.getLabel().addClass('bz-form-label--hidden');\n  },\n\n  /**\r\n      * Saves the form\r\n      * @returns {}\r\n      */\n  saveForm: function saveForm() {\n    var form = this.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n      * Executes the button action\r\n      * @returns {}\r\n      */\n  executeButton: function executeButton() {\n    var self = this;\n    var properties = self.properties;\n    var xpathContext = properties.xpathContext || \"\";\n\n    if (properties.submitOnChangexpathContextRow) {\n      xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\n    }\n\n    // Set the loading feedback\n    self.getFormContainer().startLoading();\n\n    return self.dataService.multiaction().executeButton({\n      idRender: properties.id,\n      xpath: properties.xpath || \"\",\n      xpathContext: xpathContext || \"\",\n      idPageCache: properties.idPageCache }).\n    always(function () {\n      self.getFormContainer().endLoading();\n      return arguments ? arguments[0] : undefined;\n    });\n  },\n\n  /**\r\n      * Refresh the current form\r\n      * @returns {}\r\n      */\n  refreshForm: function refreshForm() {\n    var form = this.getFormContainer();\n    form.refreshForm(this.properties.id);\n  },\n\n  /**\r\n      * Process the button actions workflow\r\n      * @returns {}\r\n      */\n  processButton: function processButton() {\n    var self = this;\n\n    if (self.properties.editable) {\n      // Save the form prior opening the dialog\n      self.runButtonAction();\n    }\n  },\n\n  /**\r\n      * Triggers the render change event\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  triggerRenderChange: function triggerRenderChange(params) {\n    var self = this;\n    params = params || {};\n\n    var pressed = params.pressed || false;\n\n    self.triggerHandler(\"renderchange\", { render: self, pressed: pressed });\n  },\n\n  /**\r\n      * Run button actions\r\n      * @returns {}\r\n      */\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n\n      var type = result && result.type ? result.type : \"\";\n\n      if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\n        return self.refreshForm();\n      } else if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\n        try {\n          if (type === \"alertMessages\") {\n            bizagi.modalError && bizagi.modalError.show(result.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\n          } else {\n            // Add validation messages\n            self.getFormContainer().addValidationMessage(result.messages);\n          }\n        } catch (e) {\n        }\n      }\n    }).fail(function (error) {\n\n      try {\n        // Add error messages\n        var error_obj = bizagi.util.getErrorFormatted(error);\n        var message = typeof error_obj === \"undefined\" ? {\n          \"message\": bizagi.localization.getResource(\"workportal-general-error\") } :\n        error_obj;\n\n        self.getFormContainer().failHandler(message);\n      } catch (e) {\n      }\n\n    });\n\n  },\n\n  processLayout: function processLayout(isLabelFormat, format) {\n    if (isLabelFormat) {\n      this.changeBackgroundColor(format.background);\n      this._super(!isLabelFormat, format);\n    }\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    if (typeof color === \"undefined\") return this;\n\n    if (color !== \"none\") {\n      this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\n    } else {\n      this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\n    }\n\n    return this;\n  },\n\n  getElementsToStylize: function getElementsToStylize($context) {\n    return $(\"input\", $context);\n  },\n\n  /**\r\n      *  Method to determine if the render value can be sent to the server or not\r\n      * @returns {}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Fileprint Class\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\n\n  /*\r\n                                                   *   Update or init the element data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.caption = properties.caption && properties.caption != \" \" ? properties.caption : \"render-fileprint-property-caption\";\n    properties.filesCount = properties.filesCount ? properties.filesCount : 0;\n\n    // set default value from normal to value\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n    // A button cannot be required\n    properties.required = false;\n  },\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"fileprint\");\n\n    return $.fasttmpl(template, {\n      caption: properties.caption });\n\n  },\n  /*\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n     *   get the fileprint url\r\n     */\n  getFilePrintUrl: function getFilePrintUrl(disposition) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getFilePrintUrl({\n      idRender: properties.id,\n      xpathContext: properties.xpathContext || \"\",\n      idPageCache: properties.idPageCache,\n      disposition: disposition,\n      sessionId: self.getSessionId() });\n\n\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  } });","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.link\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data\r\n                                               * @returns {}\r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n    properties.required = false;\n    properties.displayType = \"value\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"link\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      displayName: self.properties.displayName,\n      align: self.properties.valueAlign,\n      editable: self.properties.editable });\n\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Do nothing\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  } });","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /*\r\n                                                    *   Update or init the element data\r\n                                                    */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n    self.setValue(properties.items);\n    self.updateOriginalValue();\n  },\n\n  /*\r\n      *   Template method to implement in each device to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    var self = this;\n    var control = self.getControl();\n\n    // Call base\n    self._super();\n    self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\n  },\n\n  /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(self.getTemplateName());\n    var items = self.properties.items || [];\n\n    var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\n      id: properties.id,\n      xpath: properties.xpath,\n      unique: bizagi.util.randomNumber(10000, 1000000),\n      idPageCache: properties.idPageCache,\n      items: items }));\n\n    return html;\n  },\n\n  /*\r\n      *   Gets the template used by the combo render\r\n      *   can be overriden in subclasses to reuse logic and just change the template\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"checkList\";\n  },\n\n  /*\r\n      *   Determines if we need to show the empty node or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /*\r\n      *   Determines if we need to show the current data regardless if it belongs to data or not\r\n      *   Can be overriden to change behaviour\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /*\r\n      *   Adds custom parameters to process the template\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal };\n\n  },\n  /*\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n\n  },\n\n  setValue: function setValue(value) {;\n    this.value = bizagi.clone(value);\n  },\n\n  getValue: function getValue(data) {;\n    return this.value || [];\n  } });","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutImage\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    mode = self.getMode(),\n    useDefaultImage = false,\n    valueObj = self.properties.value || {},\n    uri = \"\";\n\n    //\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n\n    //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\n    /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n        var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n        return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n    }*/\n\n    /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\n\n    return $.fasttmpl(templateUri, { useDefaultImage: true });\n  },\n\n  /**\r\n      * Gets the base 64 image, specify in each device in order to change the size\r\n      */\n  getImage64: function getImage64() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      width: 96,\n      height: 96 };\n\n\n    return self.dataService.getEntityImage64(params);\n  },\n\n  /**\r\n      * Gets the url to get the array image, specify in each device in order to change the size\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrs Fernando Muoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-link\");\n    // Render template\n    var html = $.fasttmpl(template, { displayName: self.properties.displayName });\n    return html;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    this.properties.required = false;\n\n    // Set properties\n    this.properties.displayType = \"label\";\n    this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-label\");\n    var value = self.properties.displayName || self.properties.value || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\n  /*\r\n                                                     * Constructor\r\n                                                     */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    //properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-text\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value, editable: self.properties.editable });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Upload Class\r\n *   Author: Elkin Fernando Siabato Cruz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n  /**\r\n   * Constructor\r\n   */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    properties.editable = true;\n    properties.allowDelete = true;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n  },\n\n  /**\r\n      * Get value files by data\r\n      */\n  getValueFilesByData: function getValueFilesByData(properties) {\n    var self = this;\n    var defer = $.Deferred();\n    var dataFiles;\n    if (properties.value.value) {//Normal entityTemplate in form QAF-2319\n      dataFiles = properties.value.value;\n    } else\n    {//QAF-2210\n      dataFiles = properties.value;\n    }\n    var valueAuxFiles;\n    try {\n      if (self.isContextContainerWidgetRender()) {\n        valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles + \"}\");\n        defer.resolve(properties, valueAuxFiles);\n      } else\n      {//context: my stuff\n        $.when(self.getDataFilesWithoutScope()).done(function (valueResult) {\n          valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult + \"}\");\n          defer.resolve(properties, valueAuxFiles);\n        });\n      }\n    }\n    catch (err) {\n      valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\n      defer.resolve(properties, valueAuxFiles);\n      console.warn(\"Exception converting data files. Error: \", err);\n    }\n    return defer.promise();\n  },\n\n  isContextContainerWidgetRender: function isContextContainerWidgetRender() {\n    var self = this;\n\n    var formContainer = self.getFormContainer();\n    return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\n  },\n\n\n  /**\r\n      * Get data files when access from My stuff\r\n      */\n  getDataFilesWithoutScope: function getDataFilesWithoutScope() {\n    var self = this;\n    //Gets the real value of the image\n    var params = {\n      xpath: self.properties.xpath,\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey };\n\n\n    return self.dataService.getFilesDataForLayoutUploadControl(params);\n  },\n\n  /**\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      *   Returns the xpath to be used\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\n  /*\r\n                                                        * Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-boolean\");\n    // Render template\n    var html = $.fasttmpl(template, { value: this.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    if (value === null || value === \"\") {\n      this.properties.value = \"\";\n    } else\n    if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\") {\n      this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\n    }\n    this._super(this.properties.value, triggerEvents);\n  } });","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\n  /**\r\n                                                         * Constructor\r\n                                                         */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var dateFormat = self.getResource(\"dateFormat\");\n    var timeFormat = self.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Check if it has the showtime property\n    if (properties.showTime) {\n      if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\n        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\n      }\n    } else\n    {\n      var indexHour = properties.fullFormat.search(/[h|H]+/ig);\n      if (indexHour !== -1) {\n        properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\n      }\n    }\n\n    // Read always parameter from server in invariant format\n    if (properties.value) {\n      var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\n\n      // Format date to current format\n      if (date != 0) {\n        var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n        self.value = properties.value; // Value must always hold the value with invariant format\n        properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\n      } else\n      {\n        self.value = null;\n      }\n    } else\n    {\n      self.value = null;\n      properties.value = \"\";\n      properties.displayValue = \"\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-date-time\");\n    var value = self.properties.value === null || self.properties.value === \"\" ? \"\" : self.properties.value;\n\n    // Render template\n    return $.fasttmpl(template, { value: value });\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this,dateObj;\n    var properties = self.properties;\n    var dateControl = self.getDateControl();\n    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\n    self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\n\n    if (value.length == INVARIANT_FORMAT.length || value.length == INVARIANT_FORMAT.length + 1) {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\n    } else\n    {\n      dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\n      if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\n        dateObj.setHours(0, 0, 0, 0);\n      }\n\n    }\n    // Set value in input\n    if (value && !isNaN(Date.parse(value))) {\n      var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\n      dateControl.text(formattedDateTime);\n    }\n  },\n\n  /**\r\n      * Gets the date control\r\n      */\n  getDateControl: function getDateControl() {\n    var self = this;\n    self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\n    return self.dateControl;\n  } });","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /*\r\n                                                       * Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    properties.allowDecimals = typeof properties.allowDecimals !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\n    properties.numDecimals = properties.allowDecimals ? properties.numDecimals ? properties.numDecimals : typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2 : 0;\n    properties.symbol = '';\n    properties.positiveFormat = format.positiveFormat;\n    properties.negativeFormat = format.negativeFormat;\n    properties.decimalSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\n    properties.digitGroupSymbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\n    properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\n    properties.colorize = properties.colorizeOnNegative || false;\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-number\");\n    // Render template\n    var html = $.fasttmpl(template, { value: self.properties.value });\n    return html;\n  },\n  /*\r\n      *   Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    // Executes the same template than normal render\n    return self.renderControl();\n  },\n\n  /*\r\n      *   Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    // Workaround to get the display value by the format currency plugin, because it requires a control\n    var label = $('<label/>').html(value);\n    var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\n    if (!value.toString().match(regExp2)) {\n      label.formatCurrency(\n      {\n        symbol: properties.symbol,\n        positiveFormat: properties.positiveFormat,\n        negativeFormat: properties.negativeFormat,\n        decimalSymbol: properties.decimalSymbol,\n        digitGroupSymbol: properties.digitGroupSymbol,\n        groupDigits: properties.groupDigits,\n        roundToDecimalPlace: properties.numDecimals,\n        colorize: properties.colorize });\n\n    }\n    return label.text();\n  },\n\n  /*\r\n      *   Return the allow decimals default property based on the datatype\r\n      */\n  getDefaultAllowDecimals: function getDefaultAllowDecimals(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  },\n  /*\r\n      *   Return the group digits default property based on the datatype\r\n      */\n  getDefaultGroupDigits: function getDefaultGroupDigits(dataType) {\n    if (dataType) {\n      // Integer data types\n      if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\n        return false;\n      }\n      // Decimal data types\n      if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\n        return true;\n      }\n    }\n    return false;\n  } });","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\n\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /*\r\n                                                      * Constructor\r\n                                                      */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol :\n      typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n    } else\n    {\n      properties.symbol = \"\";\n    }\n    properties.groupDigits = true;\n  } });","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\n\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\n\n  /*\r\n                                                            * Constructor\r\n                                                            */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n  },\n\n  /*\r\n      *   Update or init the element data\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n\n  },\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"layout-placeholder\");\n    var value = self.properties.value || self.properties.displayName || \"\";\n    // Render template\n    var html = $.fasttmpl(template, { value: value });\n    return html;\n  } });","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  /**\r\n                                                      * Constructor\r\n                                                      * @param {} data\r\n                                                      */\n  init: function init(data) {\n    // Call base\n    this._super(data);\n    this.geolocation = window.navigator.geolocation;\n\n    var properties = this.properties;\n    properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n\n    // Render template\n    var html = $.fasttmpl(template, self.properties);\n    return html;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param {} invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Call base\n    return this._super(invalidElements);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      * @returns {}\r\n      */\n  configureHandlers: function configureHandlers() {\n\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} succes_callback\r\n      * @param {} fail_callback\r\n      */\n  getCurrentPosition: function getCurrentPosition(succes_callback, fail_callback) {\n    var self = this;\n\n    if (typeof self.geolocation === \"undefined\") {\n      if (fail_callback)\n      fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\n      return;\n    }\n\n    var onSuccess = function onSuccess(position) {\n      if (succes_callback)\n      succes_callback(position);\n    };\n\n    var onError = function onError(error) {\n      var strMessage = self.getErrorMessage(error);\n\n      if (fail_callback)\n      fail_callback(strMessage);\n    };\n\n    return self.geolocation.getCurrentPosition(onSuccess, onError);\n  },\n\n  /**\r\n      * Get message of error\r\n      * @param error\r\n      * @returns {*|string}\r\n      */\n  getErrorMessage: function getErrorMessage(error) {\n    var strMessage = \"\";\n\n    // Check for known errors\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n      case 1:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n      case 2:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\n        break;\n      case error.TIMEOUT:\n      case 3:\n        strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\n        break;\n      default:\n        strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\n        break;}\n\n\n    return strMessage;\n  },\n\n  /**\r\n      * Change precision number of coordinates\r\n      * @param data\r\n      * @returns {*}\r\n      */\n  performPrecision: function performPrecision(data) {\n    var geolocation = data.split(\" \") || \"\";\n\n    if (!geolocation) return data;\n\n    try {\n      var latitude = parseFloat(geolocation[0].trim());\n      var longitude = parseFloat(geolocation[1].trim());\n\n      return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\n    } catch (e) {\n      return data;\n    }\n  } });","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.association\", {}, {\n\n  /*\r\n                                                     *   Update or init the element data\r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var properties = self.properties;\n\n    // Fill default properties\n    properties.property = \"flipped\";\n    properties.idRender = self.properties.id;\n    properties.allowFlip = typeof properties.allowFlip != \"undefined\" ? bizagi.util.parseBoolean(properties.allowFlip) : true;\n    properties.flipped = typeof properties.flipped != \"undefined\" ? bizagi.util.parseBoolean(properties.flipped) : false;\n    properties.flipstate = properties.flipped;\n\n\n    // data of entities (left and right)\n    properties.leftData = properties.leftData || [];\n    properties.rightData = properties.rightData || [];\n\n    if (properties.value) {\n      self.processPropertyValue();\n    }\n  },\n\n\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).\n    done(function (flip) {\n\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var html = $.fasttmpl(template, self.properties, {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /*\r\n     * Returns the flip state\r\n     */\n  getFlipAssociation: function getFlipAssociation() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode == \"execution\")\n    return self.dataService.getFlipAssociation(self.properties);\n\n    return false;\n  },\n\n  /* \r\n     *   Gets the display value of the render\r\n     */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var value = self.getValue();\n\n    return value;\n  },\n\n  /*\r\n     *   Get the template \r\n     */\n  getTemplateName: function getTemplateName() {\n    return \"association\";\n  },\n\n\n  /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     * \r\n     * @param column {'0'||'1'}\r\n     */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.data;\n    var data = [];\n    var associationData = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(associationData, function (key, item) {\n      data.push({ id: item.id, value: item.value });\n    });\n\n    return data;\n  },\n\n  /**\r\n     * Association of right elements\r\n     */\n  getRightAssociation: function getRightAssociation(leftId) {\n    var self = this;\n    var properties = self.data;\n    var association = [];\n\n\n    var isChecked = function isChecked(leftId, idRight) {\n      var checked = false;\n      $.each(properties.formatJson.value, function (key, value) {\n        if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\n          checked = true;\n        }\n      });\n\n      return checked;\n    };\n\n    // create association and check element\n    if (properties.flipped) {\n      // left element\n      $.each(properties.leftData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(data.id, leftId) });\n\n\n      });\n    } else {\n      $.each(properties.rightData, function (key, data) {\n        association.push({\n          id: data.id,\n          name: data.value,\n          checked: isChecked(leftId, data.id) });\n\n      });\n    }\n\n    return association;\n  },\n\n\n  removeElement: function removeElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Remove right element from left panel\n          $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n            if (leftId == removeValue) {\n              // Splice from array\n              self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n            }\n          });\n        }\n      } else if (data.id == leftId) {\n        // Remove right element from left panel\n        $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\n          if (rightId == removeValue) {\n            // Splice from array\n            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\n          }\n        });\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n\n  addElement: function addElement(leftId, rightId) {\n    var self = this;\n\n    $.each(self.properties.formatJson.value, function (key, data) {\n      if (self.properties.flipped) {\n        if (data.id == rightId) {\n          // Add right element to left panel\n          self.properties.formatJson.value[key][\"value\"].push(leftId);\n        }\n      } else if (data.id == leftId) {\n        // Add right element to left panel\n        self.properties.formatJson.value[key][\"value\"].push(rightId);\n      }\n    });\n    self.setValue(JSON.encode(self.properties.formatJson));\n  },\n\n  makeJsonBase: function makeJsonBase() {\n    var self = this;\n    self.properties.formatJson = self.properties.formatJson || {\n      leftXpath: self.properties.leftXpath,\n      rightXpath: self.properties.rightXpath,\n      leftFactName: self.properties.leftFactName,\n      rightFactName: self.properties.rightFactName,\n      value: self.properties.value };\n\n  },\n\n\n  /*\r\n     *   Check if a render has no value for required validation\r\n     */\n  hasValue: function hasValue() {\n    var self = this;\n\n    if (self.properties.formatJson) {\n      var values = self.properties.formatJson.value;\n    } else {\n      values = self.properties.value;\n    }\n\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var data = values[i];\n      if (data && data.value.length > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /*\r\n     * This method process the value.\r\n     * changes the format to send request\r\n     */\n  processPropertyValue: function processPropertyValue() {\n    var self = this;\n    var properties = self.properties;\n    var values = properties.value;\n    var result = [];\n\n    for (var i = 0, l = values.length; i < l; i++) {\n      var value = values[i];\n      result.push({ id: value[0], value: value[1] });\n    }\n\n    properties.value = result;\n  } });","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\n\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\n  /***\r\n                                                 * Update or init the element data\r\n                                                 * @param data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    var form = self.getFormContainer();\n\n    // Fill default properties\n    var properties = this.properties;\n\n    var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\n    var maxFileSizeOfUser = typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\n\n    properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\n    properties.maxfiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n      var defExtensions = [];\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length > 0) {\n          defExtensions.push(\"*.\" + singleExtensions[i]);\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = defExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable ? bizagi.util.parseBoolean(properties.allowDelete) : false;\n\n    properties.contexttype = form.params && form.params.data && form.params.data.contextType ? form.params.data.contextType : \"\";\n    properties.allowSendInMail = properties.allowSendInMail || false;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"upload\");\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: properties.editable,\n      haveFiles: self.filesCount !== 0,\n      noFiles: self.filesCount === 0,\n      allowSendInMail: properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0; i < self.filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {jQuery|*}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var itemTemplate = self.getTemplateItemName();\n    var template = self.renderFactory.getTemplate(itemTemplate);\n    var form = self.getFormContainer();\n    var printVersion = form.params && form.params.printversion;\n\n    // Don't render urls when not running in execution mode\n    var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\n\n    var html = $.fasttmpl(template, {\n      id: file.id,\n      mode: mode,\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: bizagi.util.decodeURI(file.fileName),\n      editable: self.properties.editable,\n      printVersion: printVersion || false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getUploadXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: form.properties.sessionId,\n      contexttype: properties.contexttype });\n\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Removes a file from the upload control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n    var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\n\n    return self.dataService.deleteUploadFile({\n      url: properties.deleteUrl,\n      idRender: properties.id,\n      xpath: xpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype }).\n    pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n\n    // Set files property\n    self.files = value || []; // Dont remove this line\n    self.filesCount = self.files.length;\n\n    // Call base\n    self._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*}\r\n      */\n  getValue: function getValue() {\n    return this.files;\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n    var bValid = true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && properties.editable) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (self.filesCount <= 0 && !newRow) {\n        var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\n\n        if (inlineEdit) {\n          message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\n          invalidElements.push({ xpath: properties.xpath, message: message });\n          bValid = false;\n        }\n      }\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n\n    data[prefix + \"xpath\"] = self.getUploadXpath();\n    data[prefix + \"idRender\"] = properties.id;\n    data[prefix + \"xpathContext\"] = properties.xpathContext;\n    data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[prefix + \"contexttype\"] = properties.contexttype;\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the xpathContext to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpathContext: function getUploadXpathContext() {\n    return this.getXpathContext() || this.properties.xpathContext;\n  },\n\n  checkRequired: function checkRequired(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n\n    if (bizagi.util.parseBoolean(properties.required)) {\n      if (self.grid && self.grid.properties.inlineAdd === true) {\n        if (!self.hasValue() && !self.getControl().parents(\"tr\").data(\"new-row\")) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      } else {\n        if (!self.hasValue()) {\n          self.setRenderRequired(invalidElements, properties);\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  setRenderRequired: function setRenderRequired(invalidElements, properties) {\n    var self = this;\n    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\n    invalidElements.push({ xpath: properties.xpath, message: message });\n  },\n\n  /**\r\n      * Templates\r\n      */\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  } });","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\n\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\n\n  /**\r\n                                              * Update or init the element data\r\n                                              * @param data\r\n                                              */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    var self = this;\n    var properties = self.properties;\n\n    properties.maxSize = Number(properties.maxSize) || (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\n    properties.maxFiles = Number(properties.maxfiles) || 999;\n    properties.validExtensions = properties.validExtensions || \"\";\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.split(\";\");\n      for (var i = 0; i < singleExtensions.length; i++) {\n        singleExtensions[i] = \"*.\" + singleExtensions[i];\n      }\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\n    properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\n    properties.deleteUrl = properties.deleteUrl || undefined;\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\n    properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\n    properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\n\n    var dateFormat = this.getResource(\"dateFormat\");\n    var timeFormat = this.getResource(\"timeFormat\");\n\n    // We will hold here the value to display\n    properties.displayValue = \"\";\n    properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\n    properties.dateFormat = properties.dateFormat || dateFormat;\n    properties.timeFormat = properties.timeFormat || timeFormat;\n    properties.fullFormat = properties.dateFormat;\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length;\n\n    properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param listControl\r\n      * @param fileProperties\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl(listControl, fileProperties) {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"ecm\");\n    var mode = self.getMode();\n    var defer = new $.Deferred();\n\n    properties.value = fileProperties ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\n    var html = $.fasttmpl(template, properties, {\n      getFileExtension: self.getFileExtension,\n      isImage: self.isImage });\n\n\n    if (self.properties.value != undefined) {\n\n      var lengthValues = self.properties.value.length;\n\n      if (lengthValues === 0) {\n        defer.resolve(html);\n      }\n\n      $.each(self.properties.value, function (key, value) {\n        var data = {};\n\n        data.idFileUpload = value[0];\n        data.fileName = value[1];\n        data.idPageCache = self.properties.idPageCache;\n        data.xpathContext = self.getXpathContext();\n        data.xPath = self.properties.xpath;\n        data.editable = self.properties.editable;\n        data.idAttrib = self.properties.idAttrib;\n\n        var form = self.getFormContainer();\n        if (form && form.properties && form.properties.sessionId) {\n          data.sessionId = form.properties.sessionId;\n        }\n\n        if (mode === \"execution\") {\n          $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\n            lengthValues--;\n\n            if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\n              item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\n            }\n\n            html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\n            if (lengthValues === 0) {\n              defer.resolve(html);\n            }\n          });\n\n        }\n      });\n    } else {\n      defer.resolve(html);\n    }\n    return defer.promise();\n  },\n\n  replaceItemHtml: function replaceItemHtml(html, id, replace) {\n    return html.replace(\"{{\" + id + \"}}\", replace);\n  },\n\n  renderFileLayout: function renderFileLayout(data, fileProperties) {\n    var self = this;\n    var form = self.getFormContainer();\n    var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\n\n    var deferred = $.Deferred();\n\n    $.when(self.dataService.getECMMetadata(data),\n    fileProperties ? [fileProperties] : self.dataService.getFileProperties(data)).\n    done(function (metaData, fileProperties) {\n\n      fileProperties[0].data = data;\n\n      // Make xpath context\n      fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\n      fileProperties[0].xpath = self.properties.xpath;\n\n      metaData[0].filename = data.fileName;\n      metaData[0].url = self.buildItemUrl(fileProperties[0]);\n\n      // Define File Properties\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].ecm_isVisible = fileProperties[0].isVisible;\n      metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\n      metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\n      metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\n      metaData[0].ecm_allowView = fileProperties[0].allowView;\n      metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\n      metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\n      metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\n      metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\n      metaData[0].idFileUploads = fileProperties[0].idFileUpload;\n      metaData[0].xpath = fileProperties[0].xpath;\n      metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\n      metaData[0].deviceType = bizagi.detectDevice();\n\n      var html = $.fasttmpl(metadataTemplate, metaData[0]);\n      deferred.resolve(html);\n    });\n\n    return deferred.promise();\n  },\n\n  isImage: function isImage(file) {\n    var extension = this.getFileExtension(file);\n    var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\n\n    return image.indexOf(extension.toUpperCase()) > -1 ? true : false;\n  },\n\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var p_sessionId = bizagi.cookie(\"JSESSIONID\");\n\n    if (!file.data) {\n      file.data = { fileName: file.fileName, idAttrib: file.idAttrib };\n    }\n\n    return self.dataService.getECMFileUrl({\n      idFileUpload: file.idFileUpload,\n      xPath: file.xpath || file.xPath,\n      xpathContext: file.xpathContext,\n      idAttrib: file.data.idAttrib,\n      idPageCache: self.properties.idPageCache,\n      fileName: file.data.fileName.replace(/ /g, \"_\"),\n      p_sessionId: p_sessionId,\n      sessionId: file.data.sessionId || \"\" });\n\n  },\n\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    // data.fileExt = properties.validExtensions;\n    // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\n    data.xPath = properties.xpath;\n    data.idAttrib = properties.idAttrib;\n    data.xpathContext = properties.xpathContext;\n    data.metaValues = [];\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n\n    return data;\n  },\n\n  /**\r\n      * Get name of file extension\r\n      * @param fileName\r\n      * @returns {*}\r\n      */\n  getFileExtension: function getFileExtension(fileName) {\n    fileName = fileName || \"\";\n    return fileName.split(\".\").pop();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super(value, triggerEvents);\n\n    // Set files property\n    self.files = properties.value || [];\n    self.filesCount = self.files.length ? self.files.length : properties.value;\n  },\n\n  /**\r\n      * Gets xpath context\r\n      * @returns {*|string}\r\n      */\n  getXpathContext: function getXpathContext() {\n    return this.properties.xpathContext || \"\";\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Removes a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  deleteUploadItem: function deleteUploadItem(item, fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.deleteECMFile(params).pipe(function () {\n\n      // Subtract counter\n      self.filesCount = self.filesCount - 1;\n\n      // Remove from local collection\n      self.files = $.grep(self.files, function (fileItem) {\n        return fileItem[0] != fileId;\n      });\n    });\n  },\n\n  /**\r\n      * Lock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  lockUploadItem: function lockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.checkOutFile(params);\n  },\n\n  /**\r\n      * Unlock a file from the ECM control\r\n      * @param item\r\n      * @param fileId\r\n      * @returns {*} Returns a deferred\r\n      */\n  unlockUploadItem: function unlockUploadItem(fileId) {\n    var self = this;\n    var properties = self.properties;\n\n    var params = {\n      idFileUpload: fileId,\n      xPath: properties.xpath,\n      idAttrib: properties.idAttrib,\n      idPageCache: properties.idPageCache,\n      xpathContext: self.getXpathContext() };\n\n\n    return self.dataService.cancelCheckOut(params);\n  } });","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.value = typeof properties.value != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"yesno\");\n    var randomId = bizagi.util.randomNumber(100, 10000000);\n\n    // Render template\n    var html = $.fasttmpl(template, {\n      id: randomId,\n      editable: this.properties.editable });\n\n\n    return html;\n  },\n\n  /**\r\n      * Gets the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.parseBoolean(value) === true) {\n      return this.getResource(\"render-boolean-yes\");\n    } else if (bizagi.util.parseBoolean(value) === false) {\n      return this.getResource(\"render-boolean-no\");\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n\n    if (bizagi.util.isEmptyValue(value)) return false;\n    return bizagi.util.parseBoolean(value) !== null;\n  } });","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\n\n  /**\r\n                                                 * Update or init the element data\r\n                                                 * @param {} data\r\n                                                 */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Create a variable to check if the letter has been opened when editable\n    this.letterOpened = false;\n  },\n\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {}\r\n      */\n  renderControl: function renderControl() {\n    var template = this.renderFactory.getTemplate(\"letter\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"letter.readonly\");\n\n    // Render template\n    return $.fasttmpl(template);\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getLetterContent: function getLetterContent() {\n    // Set flag to true\n    this.letterOpened = true;\n\n    return this.dataService.getLetterContent({\n      url: this.properties.getUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Sends the content to the server in order to save\r\n      * @param {} content\r\n      */\n  saveLetterContent: function saveLetterContent(content) {\n    return this.dataService.saveLetterContent({\n      url: this.properties.saveUrl,\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache,\n      content: content });\n\n  },\n\n  /**\r\n      * Returns the letter content from the server\r\n      */\n  getCanGenerateLetter: function getCanGenerateLetter() {\n    return this.dataService.getCanGenerateLetter({\n      idRender: this.properties.id,\n      xpath: this.getXpath(),\n      xpathContext: this.getContextXpath(),\n      idPageCache: this.properties.idPageCache });\n\n  },\n\n  /**\r\n      * Saves the form\r\n      */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    var properties = self.properties;\n    var message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) == false) return true;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) == false) return true;\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required) {\n      if (self.letterOpened == false) {\n        message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Returns the current xpath\r\n      */\n  getXpath: function getXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Returns the current context xpath\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  } });","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Set properties\n    var properties = this.properties;\n\n    properties.displayType = \"value\";\n    properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n\n    // Calculate layout properties\n    this.calculateInitialLayoutProperties();\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"formLink\");\n\n    // Render template\n    return $.fasttmpl(template, {\n      id: properties.id,\n      align: properties.valueAlign,\n      displayName: properties.displayName,\n      value: properties.value,\n      editable: properties.editable,\n      likeButton: bizagi.util.parseBoolean(properties.likeButton) || false });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*|*|jQuery}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    // Executes the same template than normal render\n    return this.renderControl();\n\n  },\n\n  /**\r\n      * Method to customize each render after processed\r\n      */\n  postRender: function postRender() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Method to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    this._super();\n    this.getLabel().addClass(\"bz-form-label--hidden\");\n  },\n\n  /**\r\n      * Submits a edit request for a link display form\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitEditRequest: function submitEditRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    return self.dataService.editLinkForm({\n      url: properties.editUrl,\n      idRender: properties.id,\n      xpath: self.getFormLinkXpath(),\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache });\n\n  },\n\n  /**\r\n      * Submits a link save request for the displayed form\r\n      * @param data\r\n      * @returns {*} Returns a deferred\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (!properties.editable && !properties.value) return null;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    return self.dataService.saveLinkForm({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: xpathContext,\n      submitData: data }).\n    done(function (response) {\n      var executeSubmitOnChange = true;\n\n      if (response && response.type === \"validationMessages\")\n      executeSubmitOnChange = false;\n\n      if (executeSubmitOnChange)\n      self.submitOnChange({});\n    });\n  },\n\n  /**\r\n      * Sends all the data to the server then refreshes the form\r\n      * @param data\r\n      * @returns {*} Returns a promise\r\n      */\n  saveFormLinkData: function saveFormLinkData(data) {\n    var self = this;\n    var properties = self.properties;\n\n    var xpath = self.getFormLinkXpath();\n    var xpathContext = xpath;\n\n    if (typeof properties.xpathContext !== \"undefined\" && properties.xpathContext !== \"\") {\n      xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\n    }\n\n    var submitData = $.extend({}, data);\n    delete submitData.idPageCache;\n\n    return $.when(!bizagi.util.isEmpty(submitData) ? self.dataService.multiaction().submitData({\n      action: \"SAVE\",\n      data: submitData,\n      idPageCache: data.idPageCache,\n      xpathContext: xpathContext }) :\n    undefined);\n  },\n\n  /**\r\n      * Submits a rollback request\r\n      * @param params\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitRollbackRequest: function submitRollbackRequest(params) {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.rollbackLinkForm({\n          url: properties.rollbackUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: params ? params.idPageCache : properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a commit request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCommitRequest: function submitCommitRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.commitLinkForm({\n          url: properties.commitUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a checkpoint request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitCheckpointRequest: function submitCheckpointRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.sendCheckpoint({\n          url: properties.checkpointUrl,\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Submits a submitData request\r\n      * @returns {*} Returns a deferred when done\r\n      */\n  submitDataRequest: function submitDataRequest() {\n    var self = this;\n    var properties = self.properties;\n\n    return $.when(function () {\n      // Don't send request when the link is not editable\n      if (!properties.editable && !properties.value) {\n        return null;\n      } else {\n        return self.dataService.submitData({\n          url: properties.checkpointUrl,\n          action: \"SUBMITDATA\",\n          idRender: properties.id,\n          xpath: self.getFormLinkXpath(),\n          xpathContext: properties.xpathContext,\n          idPageCache: properties.idPageCache });\n\n      }\n    }());\n  },\n\n  /**\r\n      * Public method to determine if a value is valid or not\r\n      * @param invalidElements\r\n      */\n  isValid: function isValid(invalidElements) {\n    // Automatically this render is valid, so we can't check a required link\n  },\n\n  /**\r\n      * Get Form Link xpath to use\r\n      * @returns {*}\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return false;\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    // Don't do anything\n  },\n\n  /*\r\n     * Cleans current value\r\n     */\n  cleanData: function cleanData() {\n    // Don't do anything\n  } });","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX },\n{\n\n  /*\r\n  *   Constructor\r\n  */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n\n    // Create dependency collection\n    self.dependants = [];\n    self.isDependant = false;\n  },\n\n  /*\r\n     *   Update or init the element data\r\n     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\n\n    if (properties.value && properties.value.id === undefined)\n    properties.value = null;\n\n    self.value = properties.value;\n\n    // Add empty node if configured\n    if (properties.hasLocalData)\n    properties.data = self.complementData(properties.data);\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  renderControl: function renderControl() {\n    var self = this;\n    var mode = self.getMode();\n\n    // Check if this is a dependant combo\n    var parentCombo = self.parentCombo = self.getParentCombo();\n    if (parentCombo != null) {\n      var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\n\n      if (/^cascadingcombo$/i.test(renderType)) {\n        self.isDependant = true;\n      }\n    }\n\n    // Apply element plugin, set a flag to avoid dependant combo ajax requests\n    self.initializingCascadingCombo = true;\n\n    // Call base\n    var result = this._super();\n\n    if (mode !== \"execution\") {\n      self.initializingCascadingCombo = false;\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var self = this;\n    self.initializingCascadingCombo = false;\n\n    // Bind with parent combo\n    if (self.isDependant) {\n      self.parentCombo.bindDependantCombo(self);\n    }\n  },\n  /*\r\n     *   Refresh the combo, after it has been painted\r\n     */\n  refresh: function refresh(params, isInitialValue) {\n    var self = this;\n\n    // Wait until current element is rendered\n    $.when(self.isRendered()).done(function () {\n\n      // Unbind previous handler\n      // self.parentCombo.unbindDependantCombo(self);\n\n      // Clear current control\n      var control = self.getControl();\n      var mode = self.getMode();\n      control.empty();\n\n      // Render combo again\n      $.when(self.renderCombo(params)).then(function (html) {\n        // Append new element\n        control.html(html);\n\n        // Post-render method\n        self.postRender();\n\n        if (mode == \"execution\") {\n          self.configureHandlers();\n        }\n\n        // Set current value\n        if (self.getValue() !== undefined) {\n          self.setDisplayValue(self.getValue());\n        }\n\n        if (self.deferredVisible) {\n          self.deferredVisible.resolve();\n        }\n\n        self.trigger(\"select\", [self.value, isInitialValue]);\n\n      });\n    });\n  },\n\n  /*\r\n     *   Fetch the data into a deferred\r\n     */\n  getData: function getData(params) {\n    var self = this;\n    var mode = self.getMode();\n\n    // Just execute ajax calls when rendering in execution mode\n    if (mode != \"execution\") return self.getDummyData();\n\n    // Do not load dependant combos when there are no parent id\n    if (self.isDependant) {\n      if (self.parentCombo && params) {\n        self.properties.remoteDataLoaded = false;\n      }\n\n      // Return an empty array when there are no parent defined when the combo is dependant\n\n      var parentValue = self.parentCombo.selectedValue ? self.parentCombo.selectedValue.id : '';\n\n      if (parentValue != '') {\n        params = params || {};\n        if (!params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"]) {\n          params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n        }\n        return this._super(params);\n      } else {\n        return [];\n      }\n    }\n\n    return this._super(params);\n  },\n\n\n  /* \r\n     *   Bind the combos to create the cascading feature\r\n     */\n  bindDependantCombo: function bindDependantCombo(dependantCombo) {\n    var self = this;\n    var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\n\n    // Check it is a cascading combo\n    if (/^cascadingcombo$/i.test(renderType)) {\n\n      // Append to dependant combos\n      self.dependants.push(dependantCombo);\n\n      // When this combo is selected we need to make the other combo to auto fill with an extra filter\n      dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\n        // Fill items for next combo\n        self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\n\n        //if initial value is true, it prevents deleting the next combo\n        if (!isInitialValue) {\n          // Clean next inputs\n          dependantCombo.cleanInput();\n        }\n      };\n\n      if (!self.isEventBinded(\"select\")) {\n        self.bind(\"select\", dependantCombo.onChangeFunction);\n      }\n\n      // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\n      if (!bizagi.util.isEmpty(self.getValue())) {\n\n        // Auto fill dependant items with current value\n        if (self.properties.hasLocalData) {\n          self.refreshDependantCombo(dependantCombo, self.getValue().id);\n        }\n\n      }\n    }\n  },\n  isEventBinded: function isEventBinded(event) {\n    if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\n      return false;\n    } else {\n      if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n\n\n  /* \r\n     *   Unbind the combos that are being redrawn\r\n     */\n  unbindDependantCombo: function unbindDependantCombo(dependantCombo) {\n    // When this combo is selected we need to make the other combo to auto fill with an extra filter\n    this.unbind(\"select\", dependantCombo.onChangeFunction);\n  },\n\n  /*\r\n     *   Fills the next dependant combo based on the given value\r\n     */\n  refreshDependantCombo: function refreshDependantCombo(dependant, parentValue, focus, isInitialValue) {\n    var self = this;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\n\n    dependant.deferredVisible = $.Deferred();\n\n    if (!isInitialValue) {\n      // Clear dependant value\n      dependant.setValue(\"\", false);\n    }\n\n    dependant.refresh(params, isInitialValue);\n\n    if (focus) {\n      $.when(dependant.deferredVisible.promise()).done(function () {\n        dependant.inputCombo.trigger(\"click\");\n      });\n    }\n  },\n\n  /*\r\n     *   Empty html when render from action\r\n      */\n\n  emptyControlByChangeEditability: function emptyControlByChangeEditability() {\n    var control = this.getControl();\n    control.empty();\n  },\n\n  /* \r\n     *   Cleans the combo value\r\n     */\n  cleanInput: function cleanInput() {\n    this.triggerHandler(\"select\", { id: 0 });\n  },\n\n  /*\r\n     *   Search for the other cascading combo refering this one, by idRender\r\n     */\n  getParentCombo: function getParentCombo() {\n    var self = this;\n    var properties = self.properties;\n\n    // Check if parentCombo is defined\n    if (properties.parentCombo === undefined)\n    return null;\n\n    // Get form reference\n    var form = self.getFormContainer();\n    var renderType = bizagi.util.normalizeType(self.properties.type);\n    var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\n\n    var i = 0;\n    var j = 0;\n    var parents = [];\n\n    var control = null;\n\n    for (; i < controls.length; i++) {\n      if (properties.parentCombo === controls[i].properties.id) {\n        parents.push({ control: controls[i], index: i });\n      }\n    }\n\n    if (parents.length > 1) {\n      var parentLength, parent, xpathParent, parentArray;\n\n      for (; j < parents.length; j++) {\n        parent = parents[j].control;\n        xpathParent = parent.properties.xpath;\n        parentArray = xpathParent.split(\".\");\n        parentLength = parentArray.length;\n        xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\n\n        if (xpathParent === properties.xpath) {\n          control = controls[parents[j].index];\n          break;\n        }\n      }\n    } else {\n      control = form.getRenderById(properties.parentCombo);\n    }\n\n    // Return parent combo\n    return control;\n  },\n\n  /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\n  canBeSent: function canBeSent() {\n    var self = this;\n\n    // If the render has dependants we can't send to the server\n    return self._super() && bizagi.util.isMapEmpty(self.dependants);\n  },\n\n  /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\n  showCurrentData: function showCurrentData() {\n    var mode = this.getMode();\n\n    if (mode != \"execution\") return true;\n    return false;\n  },\n\n  /*\r\n     *   Enables submit on change feature for the current render\r\n     */\n  configureSubmitOnChange: function configureSubmitOnChange() {\n    var self = this;\n\n    if (!self.configured) {\n      // Call super\n      self._super();\n      self.configured = true;\n    }\n  },\n\n  internalSubmitOnChange: function internalSubmitOnChange(data, bRefreshForm) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\n    return self._super(data, bRefreshForm);\n    return defer.resolve();\n  },\n  /*\r\n     *   Sets the initial value for the renders\r\n     */\n  internalSetInitialValue: function internalSetInitialValue() {\n    var self = this;\n    // Call original method\n    self._super();\n\n    if (self.value && self.isDependant == false) {\n      self.internalSetInitialValueFlag = true;\n      self.trigger(\"select\", [self.value, true]);\n    }\n\n    self.internalSetInitialValueFlag = false;\n  } });","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\n\n$.Class.extend(\"bizagi.rendering.list\", {}, {\n\n  /**\r\n                                               * Update or init the element data\r\n                                               * @param {} data \r\n                                               * @returns {} \r\n                                               */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.listSize = properties.listSize || 0;\n  },\n\n  /**\r\n      * Gets the template used by the combo render can be overriden in subclasses\r\n      * to reuse logic and just change the template\r\n      * @returns {} \r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"list\";\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs\r\n      * to data or not Can be overriden to change behaviour    \r\n      * @returns {} \r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  } });","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\n\n  /**\r\n                                                      * Update or init the element data\r\n                                                      * @param data\r\n                                                      */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    if (Array.isArray(this.value)) {\n      this.value = this.properties.value = JSON.encode({ \"value\": this.value });\n      this.properties.originalValue = this.properties.previousValue = this.value;\n    }\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n    properties.enableTyping = bizagi.util.parseBoolean(properties.enableTyping) !== null ? bizagi.util.parseBoolean(properties.enableTyping) : true;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*|jQuery}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"list-multiselect\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      editable: properties.editable,\n      align: properties.valueAlign },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @returns {*[]}\r\n      */\n  getData: function getData() {\n    var self = this;\n    var defer = new $.Deferred();\n    var properties = this.properties;\n\n    // Go to server\n    self.dataService.multiaction().getData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contexttype || null,\n      idPageCache: properties.idPageCache }).\n    done(function (data) {\n      properties.data = self.normalizeData(data);\n\n      defer.resolve(properties.data);\n\n    }).fail(function (data) {\n      var allowActions = true;\n      var form = self.getFormContainer();\n\n      if (bizagi.util.isNativeMobileDevice() && typeof form !== \"undefined\") {\n        allowActions = form.allowOnlineActions();\n      }\n\n      if (data.type === \"not-processed\" && allowActions) return;\n\n      defer.reject(data);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param value\r\n      * @param triggerEvents\r\n      */\n  setValue: function setValue(value, triggerEvents) {\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (Array.isArray(value)) {\n      value = JSON.encode({ \"value\": value });\n    }\n\n    this._super(value, triggerEvents);\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param value\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Set internal value\n    self.setValue(value, false);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.value || [];\n  },\n\n  /**\r\n      * Get list of data\r\n      * @returns {*|Array}\r\n      */\n  getDataValue: function getDataValue() {\n    var list;\n\n    try {\n      list = JSON.parse(this.value);\n\n      return list.value || [];\n    } catch (e) {\n      return [];\n    }\n  },\n\n  /**\r\n      * Check if a render has no value for required validation\r\n      * @returns {*|Array|boolean}\r\n      */\n  hasValue: function hasValue() {\n    var values = this.getDataValue();\n\n    return values && values.length > 0;\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value\r\n      */\n  addElement: function addElement(value) {\n    var newValue = this.getDataValue();\n\n    newValue.push(value);\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value\r\n      */\n  removeElement: function removeElement(value) {\n    var idToRemove = value.id;\n    var newValue = this.getDataValue().\n    filter(function (item) {\n      return item.id !== idToRemove;\n    });\n\n    this.setValue(newValue);\n  },\n\n  /**\r\n      * Submit the selected data to the server in order to be saved\r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Mark a item how checked\r\n      * @param id\r\n      * @returns {*}\r\n      */\n  markAsChecked: function markAsChecked(id) {\n    var self = this;\n\n    return self.selected.some(function (item, index) {\n      var found = item.id === id;\n\n      if (found) self.selected.splice(index, 1);\n      return found;\n    });\n  },\n\n  isChecked: function isChecked(values, id) {\n    return values.some(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Method to verify if can add more items\r\n      * @param $tagsContainer\r\n      * @returns {boolean}\r\n      */\n  canAddMoreItems: function canAddMoreItems($tagsContainer) {\n    var self = this;\n    var containerWidth = parseInt($tagsContainer.css(\"width\"));\n    var $children = $tagsContainer.children();\n\n    var childrenWidth = $children.\n    toArray().\n    reduce(function (acc, child) {\n      acc += self.getElementWidth(child);\n      return acc;\n    }, 0);\n\n    return containerWidth > childrenWidth + self.Class.MORE_OPTION_WIDTH;\n\n  },\n\n  /**\r\n      * getElementWidth\r\n      * @param element\r\n      * @returns {*}\r\n      */\n  getElementWidth: function getElementWidth(element) {\n    var styles = window.getComputedStyle(element);\n    var outerWidth = $(element).outerWidth();\n    return outerWidth + [\n    \"padding-left\",\n    \"padding-right\",\n    \"margin-left\",\n    \"margin-right\"].\n    reduce(function (acc, property) {\n      acc += parseInt(styles[property]);\n      return acc;\n    }, 0);\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * @param query\r\n      * @param $container\r\n      */\n  filterList: function filterList(query, $container) {\n\n    $container.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = query.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n  },\n\n  /**\r\n      * Find item by id\r\n      * @param id\r\n      * @returns {[]}\r\n      */\n  findItemById: function findItemById(id) {\n    return (this.properties.data || []).find(function (item) {\n      return item.id == id;\n    });\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  },\n\n  /**\r\n      * Complement data from server before control implementation\r\n      * @param data\r\n      */\n  normalizeData: function normalizeData(data) {\n    (data || []).forEach(function (item) {\n      item.value = typeof item.value !== \"undefined\" && item.value !== null ? item.value : \"\";\n    });\n\n    return data;\n  } });","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\n\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\n\n  /**\r\n                                                     * Update or init the element data\r\n                                                     * @param {} data \r\n                                                     * @returns {} \r\n                                                     */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.maxRecords = Number(properties.maxRecords) || 20;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\n\n    // Set value\n    self.setValue(properties.value);\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} \r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n    var template = self.renderFactory.getTemplate(\"searchList\");\n\n    return $.fasttmpl(template, {\n      id: properties.id,\n      xpath: properties.xpath,\n      value: properties.value,\n      allowTyping: properties.allowTyping,\n      items: properties.value,\n      hasSearchForm: properties.searchForms ? true : false,\n      editable: properties.editable },\n    {\n      formatItem: self.formatItem });\n\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {} \r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * Sets the internal value\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setValue: function setValue(value) {\n    this.value = JSON.encode({ \"value\": value });\n    this.triggerRenderChange();\n  },\n\n  /**\r\n      * Add elements to global value\r\n      * @param value = { id:integer,value:[string || array] }\r\n      * @returns {} \r\n      */\n  addElement: function addElement(value) {\n    var list = JSON.parse(this.value);\n\n    list.value.push(value);\n\n    this.setValue(list.value);\n  },\n\n  /**\r\n      * Remove elements to global value\r\n      * @param value = { id:integer }\r\n      * @returns {} \r\n      */\n  removeElement: function removeElement(value) {\n    var list = JSON.parse(this.value);\n    var result = [];\n\n    $.each(list.value, function (key, val) {\n      if (val.id != value.id) {\n        result.push({ id: val.id, value: val.value });\n      }\n    });\n\n    this.setValue(result);\n  },\n\n  /**\r\n      * Remove last element to global value\r\n      * @returns {} \r\n      */\n  removeLastElement: function removeLastElement() {\n    var list = JSON.parse(this.value);\n\n    if (list.value.length > 0) {\n      list.value.pop();\n      this.setValue(list.value);\n    }\n  },\n\n  /**\r\n      * Fetch the data into a deferred\r\n      * @param {} params \r\n      * @returns {} \r\n      */\n  getData: function getData(params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.getSearchData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      term: properties.term,\n      extra: params }).\n    done(function (data) {\n      // Resolve with fetched data\n      properties.data = data;\n      defer.resolve(properties.data);\n    }).fail(function (data) {\n      var hideStatus = data.hideStatus || false;\n\n      defer.resolve({});\n\n      if (!hideStatus) {\n        self.trigger(\"onSearchError\", data);\n      }\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Submits the selected data to the server in order to be saved\r\n      * @returns {} \r\n      */\n  submitData: function submitData() {\n    var data = {};\n\n    // Add current data\n    data[this.properties.xpath] = this.getValue();\n\n    // Executes submit on change\n    this.submitOnChange(data);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {} \r\n      */\n  canBeSent: function canBeSent() {\n    return true;\n  },\n\n  /**\r\n      * Check if the control has value\r\n      * @returns {} \r\n      */\n  hasValue: function hasValue() {\n    var list = this.getListItems();\n\n    return list.length > 0;\n  },\n\n  getListItems: function getListItems() {\n    var value = this.getValue();\n    var finalValue = typeof value === \"string\" ? JSON.parse(value).value : value.value;\n\n    return finalValue || [];\n  },\n\n  /**\r\n      * Formats value of each item\r\n      * @param {string, boolean or array} value\r\n      * @example\r\n      * value = \"string\" => \"string\"\r\n      * value = true => \"yes\" or \"si\", the localized value\r\n      * value = false => \"no\", the localized value\r\n      * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n      * @returns {string}\r\n      */\n  formatItem: function formatItem(value) {\n    return bizagi.util.formatItem(value);\n  } });","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\n\n$.Class.extend(\"bizagi.rendering.money\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param {} data\r\n                                                * @returns {}\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = self.properties;\n    var format = this.getResource(\"numericFormat\");\n\n    // Configures symbol\n    properties.showsymbol = typeof properties.showsymbol !== \"undefined\" ? properties.showsymbol : true;\n\n    if (properties.showsymbol) {\n      var symbol = typeof BIZAGI_DEFAULT_CURRENCY_INFO !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\n      properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\n    } else {\n      properties.symbol = \"\";\n    }\n\n    properties.groupDigits = true;\n  } });","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\n\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\n\n  /**\r\n                                                * Update or init the element data\r\n                                                * @param data\r\n                                                */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\n\n    // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\n    properties.unique = bizagi.util.randomNumber(1000, 1000000);\n  },\n\n  /**\r\n      * Gets the template used by the combo render\r\n      * Can be overridden in subclasses to reuse logic and just change the template\r\n      * @returns {string}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"radio\";\n  },\n\n  /**\r\n      * Determines if we need to show the empty node or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showEmpty: function showEmpty() {\n    return false;\n  },\n\n  /**\r\n      * Determines if we need to show the current data regardless if it belongs to data or not\r\n      * Can be overridden to change behaviour\r\n      * @returns {boolean}\r\n      */\n  showCurrentData: function showCurrentData() {\n    return false;\n  },\n\n  /**\r\n      * Adds custom parameters to process the template\r\n      * @returns {{vertical: boolean}}\r\n      */\n  getTemplateParams: function getTemplateParams() {\n    var self = this;\n    var properties = self.properties;\n\n    return {\n      vertical: !properties.horizontal,\n      horizontal: properties.horizontal };\n\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".ui-radio-state-checked\");\n\n    selectedItem.removeClass(\"ui-radio-state-checked\");\n    self.setDisplayValue(value);\n    self.setValue(value, false);\n    self.clearDisplayValue();\n  },\n\n  /**\r\n      * Check value of control is changed\r\n      * @returns {boolean}\r\n      */\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var properties = self.properties;\n\n    var value = self.getValue();\n    var compareValue = properties.originalValue;\n    var baseValue = properties.defaultValue;\n\n    var result = true;\n\n    if (value && value.length !== undefined) {\n      value = value[0];\n    }\n    if (compareValue && compareValue.length !== undefined) {\n      compareValue = compareValue[0];\n    }\n    if (baseValue && baseValue.length !== undefined) {\n      baseValue = baseValue[0];\n    }\n\n    value = value && value.id !== undefined ? value.id : value;\n    compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\n    baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\n\n    if (baseValue !== undefined) {\n      if (baseValue == value && value == compareValue) {\n        result = false;\n      } else {\n        if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n          result = false;\n        } else {\n          result = compareValue == value ? false : true;\n        }\n      }\n    } else {\n      if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\n        result = false;\n      } else {\n        result = compareValue == value ? false : true;\n      }\n    }\n\n    return result;\n  },\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var control = this.getControl();\n    control.empty();\n  } });","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for image control\r\n */\n\n$.Class.extend(\"bizagi.rendering.image\", {\n  // Statics\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE },\n{\n\n  BASE_IMAGE: \"data:image/png;base64,\",\n\n  /**\r\n                                         * Update or init the element data\r\n                                         * @param data\r\n                                         */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Call base\n    self._super(data);\n\n    // Fill default properties\n    var properties = this.properties;\n    var maxSize = 4091904;\n\n    if (properties.maxSize) {\n      maxSize = Number(properties.maxSize);\n    } else if (typeof BIZAGI_SETTINGS !== \"undefined\" && typeof BIZAGI_SETTINGS.UploadMaxFileSize !== \"undefined\") {\n      maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\n    }\n\n    properties.maxSize = maxSize;\n    properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\n    properties.validExtensions = properties.validExtensions || \"\";\n    properties.isChanged = false;\n\n    if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\n      var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\n\n      for (var i = 0; i < singleExtensions.length; i++) {\n        if (singleExtensions[i].length != 0) {\n          singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\n        } else {\n          //Removes the empty element\n          var index = singleExtensions.indexOf(singleExtensions[i]);\n          singleExtensions.splice(i, 1);\n        }\n      }\n\n      properties.validExtensions = singleExtensions.join(\";\");\n    }\n\n    properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\n    properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\n    self.initializeWidthAndHeight();\n\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param data\r\n      */\n  initializeWidthAndHeight: function initializeWidthAndHeight() {\n    var properties = this.properties;\n\n    properties.isAutoWidth = false;\n    properties.isAutoHeight = false;\n\n    if (properties.width === -1) {\n      properties.width = \"100%\";\n      properties.isAutoWidth = true;\n    } else {\n      properties.width = properties.width + \"px\";\n    }\n\n    if (properties.height === -1) {\n      properties.height = \"auto\";\n      properties.isAutoHeight = true;\n    } else {\n      properties.height = properties.height + \"px\";\n    }\n  },\n\n  setData: function setData(value) {\n    var self = this;\n    var previousValue = self.getData();\n    if (bizagi.util.isEmpty(value)) {\n      this.properties.binaryValue = null;\n    } else {\n      this.properties.binaryValue = value instanceof Blob ? value : bizagi.util.b64toBlob(value, \"image/png\");\n    }\n\n    if (previousValue != this.properties.binaryValue) {\n\n      if (self.properties.required && self.isExecutionMode()) {\n        var isValidField = !self.checkRequired([]);\n        self.changeRequiredLabel(isValidField);\n      }\n\n      if (this.properties.isChanged) {\n        self.triggerRenderChange();\n        self.triggerRenderValidate();\n      }\n    }\n  },\n\n  getData: function getData() {\n    return this.properties.binaryValue || [];\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"image\");\n    var form = self.getFormContainer();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n\n        if (!bizagi.util.isEmpty(self.properties.url)) {\n          if (form.properties.compatibilityVersion < 2)\n          self.properties.value = [[0, \"uploaded\"]];\n        } else {\n          self.properties.value = [];\n        }\n\n        self.setValue(self.properties.value);\n\n        var html = $.fasttmpl(template, { url: self.properties.url });\n        return html;\n      }\n    });\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      * @returns {*}\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"image-readonly\");\n    var html = $.fasttmpl(template);\n\n    return html;\n  },\n\n  /**\r\n      * This method return the name of template of items, please make a override in each device\r\n      * @returns {*}\r\n      */\n  getTemplateItem: function getTemplateItem() {\n    return this.renderFactory.getTemplate(\"image-item\");\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  renderUploadItem: function renderUploadItem() {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.getTemplateItem();\n\n    return self.buildItemUrl().\n    then(function (dataUrl) {\n      var url = dataUrl || \"\";\n\n      var html = $.fasttmpl(template, {\n        url: url,\n        allowDelete: self.properties.allowDelete,\n        editable: self.properties.editable,\n        mode: mode });\n\n\n      self.properties.url = url;\n\n      return html;\n    });\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param params\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(params) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n    var url = \"\";\n\n    if (!this.isExecutionMode()) return $.Deferred().resolve(\"\").promise();\n\n    var parameters = {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      contexttype: properties.contexttype,\n      property: params && params.property ? params.property : \"fileContent\",\n      dataType: \"text\" };\n\n\n    if (properties.isUserPreference) {\n      self.currentUser = bizagi.currentUser.idUser;\n      parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\n      parameters.contexttype = \"entity\";\n      parameters.surrogatekey = self.currentUser;\n    }\n\n    if (isVersion2OrSuperior) {\n      if (bizagi.util.isEmpty(self.properties.value) && !self.hasValue()) return $.Deferred().resolve(\"\").promise();\n\n      // forceBase64 - Allow to get the thumbnail image on desktop devices\n      if (!self.properties.forceBase64) {\n        parameters.sessionId = form.properties.sessionId;\n        parameters.property = \"fileBinaryContent\";\n        return self.dataService.downloadFile(parameters).\n        then(function (blob) {\n          self.setData(blob);\n          if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n          return bizagi.util.blobTob64(blob, false);\n        }).\n        then(function (base64) {\n          return bizagi.util.getDataUrl(base64, properties.url);\n        });\n      }\n    }\n\n    return self.dataService.multiaction().getPropertyData(parameters, \"text\").\n    then(function (data) {\n      if (data.charAt(0) === \"\\\"\") data = data.slice(1, -1);\n      if (data !== \"\") url = self.BASE_IMAGE + data;\n      self.setData(bizagi.util.b64toBlob(data));\n      return url;\n    });\n  },\n\n  buildItemUrlOffline: function buildItemUrlOffline() {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getFormParams();\n    var loadImageFromForm = !properties.isChanged;\n    var id = self.buildOfflineImageId();\n\n    var parameters = {\n      idCase: formParams.idCase,\n      idWorkitem: formParams.idWorkitem,\n      id: id,\n      offlineType: formParams.offlineType,\n      loadImageFromForm: loadImageFromForm };\n\n\n    return $.when(self.dataService.getOfflineImage(parameters, bizagi.util.db.AttachmentType.Blob)).\n    then(function (blob) {\n      self.setData(blob);\n      if (blob == null || window.Blob && blob instanceof Blob && blob.size === 0) return null;\n      return bizagi.util.blobTob64(blob, false);\n    }).\n    then(function (base64) {\n      return bizagi.util.getDataUrl(base64, properties.url);\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param path File in Browser or Path in Mobile Devices\r\n      * @param promise Promise to be resolved when save is completed\r\n      */\n  saveImageOffline: function saveImageOffline(path) {\n    var self = this;\n    var id = self.buildOfflineImageId();\n    var fileName = self.fileProperties !== undefined ? self.fileProperties.name : path.name;\n\n    return self.dataService.getFileService().resolveBlobFromPath(path, fileName).\n    then(function (blobImage) {\n      // Save the image as attachment\n      var formParams = self.getFormParams();\n      var parameters = {\n        idCase: formParams.idCase,\n        idWorkitem: formParams.idWorkitem,\n        id: id,\n        operationType: \"edition\",\n        offlineType: formParams.offlineType };\n\n\n      return self.dataService.saveOfflineImage(parameters, blobImage);\n    });\n  },\n\n  /**\r\n      * Builds the upload item url in real size\r\n      * @returns {*}\r\n      */\n  buildFullItemUrl: function buildFullItemUrl() {\n    return this.buildItemUrl({ \"property\": \"fileFullContent\" });\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    return this.properties.isChanged;\n  },\n\n  /**\r\n      * Returns the internal value\r\n      * @returns {*|Array}\r\n      */\n  getValue: function getValue() {\n    return this.properties.value || [];\n  },\n\n  /**\r\n      * Check if control is valid or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.visible) === false) {\n      return true;\n    }\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(self.properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (self.properties.required) {\n      var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\n\n      if (!newRow) {\n        var value = self.getValue();\n\n        if (value.length === 0) {\n          var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\n          invalidElements.push({ xpath: self.properties.xpath, message: message });\n          return false;\n        }\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      */\n  buildAddParams: function buildAddParams() {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var data = {};\n\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\n    data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\n    data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\n\n    if (properties.contexttype) {\n      data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\n      } else {\n        data[\"JSESSIONID\"] = form.properties.sessionId;\n      }\n    } catch (e) {\n      data[\"JSESSIONID\"] = form.properties.sessionId;\n    }\n\n    return data;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getUploadXpath: function getUploadXpath() {\n    return this.properties.xpath;\n  },\n\n  /**\r\n      * Clean html because some scenarios render twice\r\n      */\n  emptyControlByAsyncRenderDeferred: function emptyControlByAsyncRenderDeferred() {\n    var $control = this.getControl();\n    $control.empty();\n  },\n\n  buildOfflineImageId: function buildOfflineImageId() {\n    var self = this;\n    var form = self.getFormContainer();\n    var isVersion2OrSuperior = form.properties.compatibilityVersion >= 2;\n\n    return self.dataService.fileService.buildOfflineImageId(self.properties.value, self.properties.xpathContext, self.properties.xpath, isVersion2OrSuperior);\n  } });","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\n\n  /*************************************************************/\n  /* Private section of the userfield                          */\n  /*************************************************************/\n\n  /*\r\n                                                                  *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n                                                                  */\n  getFileDependencies: function getFileDependencies() {\n    return null;\n  },\n\n  postRender: function postRender() {\n    var self = this;\n\n    // Call base\n    self._super();\n\n    var defer = $.Deferred();\n    var fileDependencies = self.getFileDependencies();\n    if (fileDependencies && fileDependencies.length > 0) {\n      bizagi.loader.loadFile(fileDependencies).\n      then(function () {\n        // After all dependencies has been resolved\n        self.internalRenderControl();\n        defer.resolve();\n      });\n\n    } else {\n      $.when(self.renderUserfieldControl()).done(function () {\n        defer.resolve();\n      });\n    }\n\n    return defer.promise();\n  },\n\n  renderUserfieldControl: function renderUserfieldControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n\n    var loadUserfield = function loadUserfield() {\n      var userEditableControl = self.getEditableControl();\n      if (userEditableControl) {\n        self.input = control.html(userEditableControl);\n      }\n      self.renderComplex();\n      def.resolve();\n    };\n\n\n    loadUserfield();\n\n\n    return def.promise();\n  },\n\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n\n    if (properties.extendedData && properties.extendedData.length > 0) {\n      self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\n    } else {\n      self.extendedData = {};\n    }\n\n    var loadUserfieldReadOnly = function loadUserfieldReadOnly() {\n      try {\n        var userReadOnlyControl = self.getReadonlyControl();\n        if (userReadOnlyControl) {\n          self.input = control.html(userReadOnlyControl);\n        }\n        self.renderComplex();\n\n      } catch (error) {\n        var displayName = self.properties.displayName || \"Widget\";\n        control.html(\"<h6>\" + displayName + \"</h6>\");\n      }\n\n    };\n\n    if (self.ready) {\n      self.ready().done(function () {\n        loadUserfieldReadOnly();\n      });\n    } else {\n      loadUserfieldReadOnly();\n    }\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return self.getReadonlyValue();\n  },\n\n  /*\r\n     *   Sets the value in the rendered control \r\n     */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    // Call base\n    self.setValue(value);\n\n    // Set editable value in control\n    self.setEditableValue(value);\n  },\n\n  getValue: function getValue() {\n    var self = this;\n    return self.getEditableValue();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n    var form = self.getFormContainer();\n\n    form.useOrSetLoaderDeferred();\n    form.appendWaitForLoader({ promise: defer.promise() });\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type == \"error\") {\n        // Workflow engine error, we gotta show it with error\n        self.getFormContainer().addErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /*\r\n     *   Saves the form\r\n     */\n  saveForm: function saveForm() {\n    var self = this;\n    var form = self.getFormContainer();\n    return form.saveForm();\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderElements: function getRenderElements(xpath) {\n    var self = this;\n    var result = $();\n    var controls = self.getFormContainer().getRenders(xpath);\n    $.each(controls, function (i, item) {\n      result = result.add($(item.element));\n    });\n\n    return result;\n  },\n\n  getServerResourceURL: function getServerResourceURL(resource) {\n    var self = this;\n    var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\n    url = url.replace(\"{0}\", self.properties.userfieldGuid);\n    resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\n    var device = bizagi.util.detectDevice();\n    url = url.replace(\"{1}\", device);\n    url = url.replace(\"{2}\", resource);\n    //Rest/Userfields/{0}/resource/desktop/{1}\n    return url;\n  },\n\n  /**\r\n     * Returns all the elements that match the given xpath\r\n     */\n  getRenderValue: function getRenderValue(xpath) {\n    var self = this;\n    var controls = self.getFormContainer().getRenders(xpath);\n    var control;\n    $.each(controls, function (index, item) {\n      if (!control || item.properties.editable) {\n        control = item;\n      }\n    });\n    if (control) {\n      return control.getValue();\n    } else {\n      return null;\n    }\n  },\n\n  /*\r\n     *   Refresh the current form\r\n     */\n  refreshForm: function refreshForm() {\n    var self = this;\n    var properties = self.properties;\n\n    var form = self.getFormContainer();\n    form.refreshForm(properties.id);\n  },\n\n  /*\r\n     * Shows a jquery dialog\r\n     */\n  showDialog: function showDialog(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showDialog method\");\n  },\n\n  /*\r\n     *   Shows a browser popup\r\n     */\n  showPopup: function showPopup(url, params) {\n    bizagi.util.mustImplement(\"Must implement the showPopup method\");\n  },\n\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = self.value = self.properties.value;\n  } });\n\n\n\n\n\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\n\n  /*************************************************************/\n  /* methods to be overriden by the implementations            */\n  /*************************************************************/\n  getEditableControl: function getEditableControl() {\n  },\n\n  renderComplex: function renderComplex() {\n  },\n\n  // Returns the value of the control\n  getEditableValue: function getEditableValue() {\n    return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\n  },\n\n  // \n  setEditableValue: function setEditableValue(value) {\n    return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n  },\n\n  getReadonlyValue: function getReadonlyValue() {\n    // if the method is not overriden then call the parent method \n    return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    // Call base\n    self._super();\n  } });\n\n\n\n/*\r\n        *   This control will wrap any userfield in order to load the code remotely, \r\n        *   when executing renderControl, which is an async method\r\n        */\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n    // Save userfield guid and name\n    self.initialParams = params;\n    self.userfieldGuid = this.properties.userfieldGuid;\n    self.userfieldName = this.properties.control;\n  },\n\n  /*\r\n     *   Starts waiting signal for async stuff\r\n     */\n  startUserfieldLoading: function startUserfieldLoading() {\n  },\n\n  /*\r\n     *   Ends waiting for async stuff\r\n     */\n  endUserfieldLoading: function endUserfieldLoading() {\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     */\n  internalPostRender: function internalPostRender() {\n    var self = this;\n    self.startUserfieldLoading();\n    $.when(self.getUserfieldControl()).\n    done(function (control) {\n      control.element = self.element;\n\n      // Add grid and surrogatekey properties if the userfield is a column userfield\n      if (self.column) {\n        control.isColumn = true;\n        control.grid = self.grid;\n        control.surrogateKey = self.surrogateKey;\n        control.properties.xpathContext = self.getControlXpathContext(control);\n        control.getControl = self.column.getControl;\n      }\n\n      return control.internalPostRender();\n    }).\n    always(function () {\n      self.endUserfieldLoading();\n    });\n  },\n\n  /*\r\n     *   Helper for userfields to fetch the xpathContext\r\n     */\n  getControlXpathContext: function getControlXpathContext(control) {\n    var self = this;\n    var properties = control.properties;\n\n    if (control.isColumn) {\n      return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\n    }\n\n    return properties.xpathContext;\n  },\n\n\n  getUserFieldInstance: function getUserFieldInstance(params) {\n    console.log(\"not implemented\");\n  },\n\n  /*\r\n     *   Replicate all userfield methods to this instance in order to create a proxy\r\n     */\n  replicateUserfieldMethods: function replicateUserfieldMethods(control) {\n    var self = this;\n    for (var key in control.Class.prototype) {\n      // Omit the folowing methods\n      if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\n      key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\n\n      // Replicate instance methods\n      self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\n    }\n\n    // Replicate properties and value\n    control.properties = self.properties;\n    control.value = self.value;\n  },\n\n  dispose: function dispose() {\n    var self = this;\n\n    var timeOutUserField = setTimeout(function () {\n      if (self.userfieldInstance) {\n        self.userfieldInstance.unbind(\"renderchange\");\n        self.userfieldInstance.dispose();\n      }\n      clearTimeout(timeOutUserField);\n    }, bizagi.override.disposeTime || 50);\n\n    // Call base\n    self._super();\n  } });","/**\r\n *   Name: Bizagi Render Column ReadOnly Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\n\n  /*\r\n                                                          *   Constructor\r\n                                                          */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    // Define the column as readonly\n    properties.editable = required = false;\n  },\n\n  /**\r\n      * Return true if the column is read-only, so we can make a quick render\r\n      */\n  isReadonly: function isReadonly() {\n    return true;\n  },\n\n  /**\r\n      * Method to check if a value is valid or not in this render\r\n      */\n  isValueValid: function isValueValid() {\n    // It is always valid because the column is readonly\n    return true;\n  } });","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\n\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  /*\r\n                                                       *   Constructor\r\n                                                       */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n    properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\n\n    if (bizagi.util.isOfflineForm({ context: this })) {\n      properties.recalculate = false;\n    }\n  },\n\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n\n    this._super(decorated);\n\n    if (!properties.recalculate) {\n      decorated.originalGetData = decorated.getData;\n      decorated.getData = this.getDataForAllCells;\n      decorated.findDataById = this.findDataById;\n    }\n  },\n\n  findDataById: function findDataById(id) {\n    var self = this;\n    var result = {};\n    if (this.column && this.column.comboData) {\n      $.each(this.column.comboData, function (key, value) {\n        if (value.id == id) {\n          result = value;\n        }\n      });\n    }\n\n    return result;\n  },\n\n  /*\r\n     *   Single data fetch for all the cells\r\n     */\n  getDataForAllCells: function getDataForAllCells(params) {\n    var column = this.column;\n    if (column.comboData) return column.comboData;\n    if (column.fetchingData) return column.dataPromise;\n\n    // Start fetching\n    column.fetchingData = true;\n    column.dataPromise = $.when(this.originalGetData(params)).\n    pipe(function (result) {\n      column.comboData = result;\n      column.fetchingData = false;\n      return result;\n    });\n\n    return column.dataPromise;\n  },\n\n  /*\r\n     *   Sets the internal value\r\n     */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    if (value && bizagi.util.isString(value)) {\n      self._super(surrogateKey, value);\n    } else if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {return i != 0;}) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (self.properties.type == \"columnRadio\") {\n      self._super(surrogateKey, null);\n      decorated.selectedValue = value;\n    } else if (value && typeof value == \"number\") {\n      self._super(surrogateKey, value);\n    } else {\n      // Set null values when the entry array is null\n      self._super(surrogateKey, null);\n      decorated.selectedValue = \"\";\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultValue[0];\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\n\n    return value;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getCompositeValue: function getCompositeValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    var label = decorated.getSelectedValue();\n\n    // Build value for grid data\n    var valueForGrid = [];\n    if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\n      valueForGrid.push([]);\n      valueForGrid[0].push(value.id);\n      valueForGrid[0].push(label);\n    } else {\n      valueForGrid.push([]);\n    }\n\n    return valueForGrid;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    if (value) return value.id;\n    return value;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element \r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  renderReadOnly: function renderReadOnly(key, value) {\n    var self = this;\n    var decorated = self.getDecorated(key);\n    var properties = self.properties;\n\n    // Change the xpath context\n    var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\n    decorated.properties.xpathContext = xpathContext;\n\n    // Render the control\n    var result = this._super(key, value);\n\n    return result;\n  } });","/**\r\n*   Name: Bizagi Render Date Column Decorator Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\n\n\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\n\n  /*\r\n                                                      *   Sets the internal value\r\n                                                      */\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) return;\n\n    self._super(surrogateKey, value);\n    if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\n      value = self.setDefaultValue(surrogateKey, decorated);\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\n\n    if (value == null) {\n      decorated.setValue(value, false);\n      decorated.properties.displayValue = \"\";\n    }\n\n    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\n\n    if (date === 0) {\n      // force another attempt in order to check invariant format for the value with time or without time (reverse option)\n      date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\n    }\n    // Format date to current format\n    if (date !== 0) {\n      var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\n      var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\n\n      // Set formatted value in display value property\n      decorated.properties.displayValue = formattedDate;\n\n      // Send original value to decorated control, because it must be with invariant format\n      decorated.setValue(value, false);\n    }\n  },\n\n  /*\r\n     * Set the cell default value and make this action as a change to send it to server\r\n     */\n  setDefaultValue: function setDefaultValue(surrogateKey, decorated) {\n    var self = this;\n    var value = self.properties.defaultvalue;\n\n    decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\n\n    value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\n\n    value = bizagi.util.dateFormatter.formatInvariant(value, true);\n    decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\n\n    return value;\n  } });","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\n  /*\r\n                                                        *   Constructor\r\n                                                        */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n\n    // Set base column styles\n    var properties = this.properties;\n\n    if (properties.advancedSearch && this.getMode() === \"execution\") {\n      properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\n      properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\n    }\n  },\n\n  /**\r\n      * Apply custom overrides to each decorated instance\r\n      * @param decorated\r\n      */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    // Change the xpath context\n    var xpathContext;\n\n    if (this.properties.xpathContext.length > 0) {\n      xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    } else {\n      xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n\n    decorated.properties.xpathContext = xpathContext;\n  },\n\n  /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\n  render: function render(surrogateKey, value, tableCell) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var properties = self.properties;\n\n    // If the control needs to recalculate data, reset it on the decorated render\n    if (properties.recalculate) {\n      decorated.resetData();\n    }\n\n    // Render the control\n    var result = this._super(surrogateKey, value, tableCell);\n\n    return result;\n  },\n\n  /*\r\n     *   Gets the internal value\r\n     */\n  getValue: function getValue(surrogateKey) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    var value = decorated.getValue();\n    return value;\n  },\n\n  setValue: function setValue(surrogateKey, value) {\n    var self = this;\n    var decorated = self.getDecorated(surrogateKey);\n    if (decorated === null) {\n      return;\n    }\n\n    // Perform default set value when rendering summary row\n    if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\n\n    var compositeValue = self.getCompositeValue(surrogateKey);\n    if (!!compositeValue && typeof compositeValue.id !== \"undefined\" && compositeValue.id == value) {\n      value = compositeValue;\n    }\n\n    if (value && value.length > 0) {\n      // Create the value property\n      var newValue = {\n        id: value[0][0],\n        value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\n          return i != 0;\n        }) : value[0][1] };\n\n      // Call base\n      self._super(surrogateKey, newValue);\n      decorated.selectedValue = newValue.value;\n    } else if (value && value.id && value.value) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.value;\n    } else if (value && value.id && value.label) {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = value.label;\n    } else {\n      self._super(surrogateKey, value);\n      decorated.selectedValue = \"\";\n    }\n  } });","/**\r\n *   Name: Bizgi Render Hidden Column Decorator Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hidden-columns\r\n */\n\n$.Class.extend(\"bizagi.rendering.columns.hidden\", {}, {\n\n  /**\r\n                                                         * Method to determine if the render value can be sent to the server or not\r\n                                                         * @returns {}\r\n                                                         */\n  canBeSent: function canBeSent() {\n    return true;\n  } });","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\n\n$.Class.extend(\"bizagi.rendering.document\", {}, {\n\n  /**\r\n                                                   * Update or init the element data\r\n                                                   * @param data\r\n                                                   */\n  initializeData: function initializeData(data) {\n    // Call base\n    this._super(data);\n\n    var properties = this.properties;\n\n    properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\n    properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\n    properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\n    properties.append = properties.append ? properties.append : false;\n\n    if (properties.caption) {\n      properties.caption = bizagi.util.trim(properties.caption);\n\n      if (properties.caption.length === 0) {\n        properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n      }\n    } else {\n      properties.caption = this.getResource(\"render-documentgenerator-button-label\");\n    }\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {*}\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n\n    self.preRenderControl();\n\n    var properties = self.properties;\n    var mode = self.getMode();\n    var downloadAllDocuments = properties.downloadalldocuments;\n    var allowGenerate = properties.allowGenerate;\n    var template = self.renderFactory.getTemplate(self.getTemplate());\n    var documents = properties.value || [];\n    var noFiles = documents ? documents.length === 0 : true;\n\n    // Render template\n    var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\n\n    // Render current children\n    var items = this.renderDocumentsHtml(documents);\n    items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param template\r\n      * @param mode\r\n      * @param downloadAllDocuments\r\n      * @param allowGenerate\r\n      * @param properties\r\n      * @param noFiles\r\n      * @returns {*|jQuery}\r\n      */\n  getControlHtml: function getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n\n    return $.fasttmpl(template, {\n      noActivateButton: false,\n      editable: mode !== \"execution\",\n      mode: mode,\n      downloadalldocuments: downloadAllDocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append,\n      caption: properties.caption,\n      noFiles: noFiles,\n      allowSendInMail: properties.allowSendInMail });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getXpath: function getXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      */\n  preRenderControl: function preRenderControl() {\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {boolean}\r\n      */\n  activateButton: function activateButton() {\n    return true;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @param xpath\r\n      * @returns {*}\r\n      */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    return xpath;\n  },\n\n  /**\r\n      * Returns the xpath to be used\r\n      * @returns {*}\r\n      */\n  getContextXpath: function getContextXpath() {\n    return this.properties.xpathContext;\n  },\n\n  /**\r\n      * Renders a single document item\r\n      * @param file\r\n      * @returns {*|jQuery}\r\n      */\n  renderDocumentItem: function renderDocumentItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildItemUrl(file);\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: self.properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      editable: self.properties.editable,\n      joined: false });\n\n\n    return html;\n  },\n\n  /**\r\n      * Builds the upload item url\r\n      * @param file\r\n      * @returns {*}\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this;\n    var properties = self.properties;\n\n    return self.dataService.getUploadFileUrl({\n      idRender: properties.id,\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      fileId: file.id,\n      sessionId: self.getSessionId() });\n\n  },\n\n  /**\r\n      * Builds the download all items item url\r\n      * @returns {*}\r\n      */\n  buildAllDocumentsUrl: function buildAllDocumentsUrl() {\n    var self = this;\n    var properties = self.properties;\n\n    var returnLink = self.dataService.getAllDocumentsDownloadUrl({\n      xpath: self.getDocumentXpath(properties.xpath),\n      xpathContext: self.getContextXpath(),\n      idPageCache: properties.idPageCache,\n      idCase: properties.caseId,\n      idWorkItem: properties.workitemId,\n      sessionId: self.getSessionId() });\n\n\n    return returnLink;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @returns {string}\r\n      */\n  postRender: function postRender() {\n    // Call base\n    this._super();\n\n    return \"<div></div>\";\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed in read-only mode\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var mode = self.getMode();\n\n    if (mode !== \"design\") {\n      var control = self.getControl();\n      var htmlControl = self.renderControl();\n\n      control.append(htmlControl);\n\n      self.updateControlForPrintMode(control);\n\n      // Execute the same as post-render\n      self.postRender();\n    }\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  validateContainer: function validateContainer() {\n    // Check if the form is valid, then generate\n    var form = this.getFormContainer();\n    return form.validateForm();\n  },\n\n  /**\r\n      * Saves the form before the document generation\r\n      * @returns {*}\r\n      */\n  save: function save() {\n    var form = this.getFormContainer();\n\n    return form.saveForm();\n  },\n\n  /**\r\n      * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceFilesHtml: function replaceFilesHtml(html, replace) {\n    return html.replace(\"{{files}}\", replace);\n  },\n\n  /**\r\n      * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n      * @param html\r\n      * @param replace\r\n      * @returns {*}\r\n      */\n  replaceActionsHtml: function replaceActionsHtml(html, replace) {\n    return html.replace(\"{{actions}}\", replace);\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @returns {boolean}\r\n      */\n  canBeSent: function canBeSent() {\n    // This render cannot be sent because it is full ajax\n    return false;\n  },\n\n  /**\r\n      * Method to determine if the render value can be sent to the server or not\r\n      * @param invalidElements\r\n      * @returns {boolean}\r\n      */\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.visible) === false) {\n      return true;\n    }\n    // Don't check non-editable renders\n    if (bizagi.util.parseBoolean(properties.editable) === false) {\n      return true;\n    }\n\n    // Clear error message\n    self.setValidationMessage(\"\");\n\n    // Check required\n    if (properties.required && !properties.buttonExecuted) {\n      if (self.value) {\n        if (self.value.length > 0) return true;\n        message = self.getResource(\"render-document-required-text\");\n        invalidElements.push({ xpath: properties.xpath, message: message });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    // Call base\n    self._super();\n\n    // Attach handler\n    var generateLink = $(\".ui-bizagi-button-documentgenerator\", control);\n    if (mode === \"execution\") {\n      generateLink.click(function (e) {\n        if (e.isPropagationStopped()) return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n    }\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-preview\", control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.showDocumentPreview($(this).data(\"url\"), $(this).data(\"filename\"));\n    });\n\n    // Configure preview handler\n    $(\".ui-bizagi-container-documents-item-delete\", control).click(function (e) {\n      if (e.isPropagationStopped()) return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).data(\"filename\"));\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      * @param filename\r\n      */\n  deleteDocumentTemplate: function deleteDocumentTemplate(filename) {\n    var self = this;\n    var params = {\n      xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\n      idRender: self.properties.id,\n      xpathContext: self.getContextXpath(),\n      idPageCache: self.properties.idPageCache };\n\n\n    self.startLoading();\n\n    $.when(self.dataService.deleteUploadFile(params)).\n    done(function () {\n      $.when(self.dataService.multiaction().getPropertyData({\n        xpath: self.properties.xpath,\n        idRender: self.properties.id,\n        xpathContext: self.getContextXpath(),\n        idPageCache: self.properties.idPageCache,\n        property: \"value\" })).\n      done(function (documents) {\n        self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\n\n        // Finish loading\n        self.endLoading();\n      });\n    });\n  },\n\n  /**\r\n      * Creates the event of generation of templates.\r\n      */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n\n    self.startLoading();\n\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    self.save().done(function () {\n\n      bizagi.showErrorAlertDialog = false;\n\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function () {\n\n        // Fetch again the value property\n        $.when(self.dataService.multiaction().getPropertyData({\n          xpath: properties.xpath,\n          idRender: properties.id,\n          xpathContext: self.getContextXpath(),\n          idPageCache: properties.idPageCache,\n          property: \"value\" })).\n        done(function (documents) {\n          self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\n\n          // Finish loading\n          self.endLoading();\n        });\n\n      }).fail(function (error) {\n        self.endLoading();\n\n        // Add error messages\n        self.showErrorMessage(error);\n      });\n    }).fail(function (message) {\n      self.endLoading();\n\n      // Add error messages\n      self.showErrorMessage(message);\n    });\n  },\n\n  /**\r\n      * Show the error message when something went wrong with the service.\r\n      * @param error\r\n      */\n  showErrorMessage: function showErrorMessage(error) {\n    var self = this;\n    var form = self.getFormContainer();\n    var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\n\n    try {\n      messageText = error && typeof error.responseText !== \"undefined\" ? JSON.parse(error.responseText).message : error;\n    } catch (e) {\n    }\n\n    form.addErrorMessage(messageText);\n    form.endLoading();\n  },\n\n  /**\r\n      * Shows the document if the flag is set. (virtual Function)\r\n      */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed (Virtual method)\r\n      * @param url\r\n      * @param filename\r\n      */\n  showDocumentPreview: function showDocumentPreview(url, filename) {\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param file\r\n      * @returns {string}\r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file\";\n    }\n\n    var extension = file.substr(file.lastIndexOf('.') + 1);\n\n    switch (extension) {\n      case 'docx':\n        return \"ui-bizagi-document-upload-item-doc\";\n      case 'pdf':\n        return \"ui-bizagi-document-upload-item-pdf\";\n      case 'xlsx':\n        return \"ui-bizagi-document-upload-item-xls\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file\";}\n\n  },\n\n  /**\r\n      * Redraw documents when needed\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadAllDocuments) {\n    var self = this;\n    var control = self.getControl();\n    var html = \"\";\n    var documentContainer = $(\"[data-component='files']\", control);\n\n    // Clear current links\n    documentContainer.empty();\n\n    // Draw links again\n    html += this.renderDocumentsHtml(documents);\n\n    // Check if there are documents and the flag to download all are available to show the link.\n    html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\n\n    documentContainer.append(html);\n\n    //Set value\n    self.setValue(documents);\n  },\n\n  /**\r\n      * This method must be implemented by the specific class of each device. (Virtual method)\r\n      * @param file\r\n      * @returns {*|*|*}\r\n      */\n  renderAllDocumentDownload: function renderAllDocumentDownload(file) {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n\n    var template = self.renderFactory.getTemplate(self.getTemplateItem());\n    var url = self.buildAllDocumentsUrl();\n\n    // Don't render urls when not running in execution mode\n    if (mode !== \"execution\") url = \"javascript:void(0);\";\n\n    var html = $.fasttmpl(template, {\n      url: url,\n      allowDelete: properties.allowDelete,\n      filename: file.fileName,\n      mode: mode,\n      joined: true });\n\n\n    return self.removeDeleteButton(html);\n  },\n\n  /**\r\n      * removeDeleteButton\r\n      * @param html\r\n      * @returns {*}\r\n      */\n  removeDeleteButton: function removeDeleteButton(html) {\n    var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\n\n    if (startIndex > 0) {\n      var restOfWord = html.substring(startIndex);\n      var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\n\n      return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\n    } else {\n      return html;\n    }\n  },\n\n  /**\r\n      * Process request of DeleteDocumentTemplate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDocumentTemplateGenerate: function resolveDocumentTemplateGenerate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.autoOpenDocuments();\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Process request of DocumentTemplateGenerate action\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      */\n  resolveDeleteDocumentTemplate: function resolveDeleteDocumentTemplate(documents, noFiles, downloadAllDocuments) {\n    // Redraw documents\n    this.redrawDocuments(documents, noFiles, downloadAllDocuments);\n    this.value = documents;\n\n    // This does not apply for mobile.\n    this.configureHandlers();\n  },\n\n  /**\r\n      * Method to renders the documents\r\n      * @param documents\r\n      * @returns {string}\r\n      */\n  renderDocumentsHtml: function renderDocumentsHtml(documents) {\n    var items = \"\";\n\n    for (var i = 0; i < documents.length; i++) {\n      var document = { id: documents[i][0], fileName: documents[i][1] };\n      var item = this.renderDocumentItem(document);\n\n      items += item;\n    }\n\n    return items;\n  },\n\n  /**\r\n      * Methos to renders action of document\r\n      * @param documents\r\n      * @param noFiles\r\n      * @param downloadAllDocuments\r\n      * @returns {string}\r\n      */\n  renderActionsHtml: function renderActionsHtml(documents, noFiles, downloadAllDocuments) {\n    var actions = \"\";\n\n    if (downloadAllDocuments && !noFiles && documents.length > 0) {\n      var downloadAllDocumentsLink = { fileName: this.getResource(\"render-document-downloadalldocuments\") };\n      var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\n\n      actions += action;\n    }\n\n    return actions;\n  },\n\n  getTemplate: function getTemplate() {\n    return \"document\";\n  },\n\n  getTemplateItem: function getTemplateItem() {\n    return \"document-item\";\n  },\n\n  getErrorTemplate: function getErrorTemplate() {\n    return \"form-error\";\n  },\n\n  getTemplateDownload: function getTemplateDownload() {\n    return \"document-download\";\n  },\n\n  getTemplateReadonly: function getTemplateReadonly() {\n    return \"document-readonly\";\n  } });","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.range\", {}, {\n  /*\r\n                                                * Constructor\r\n                                                */\n  init: function init(params) {\n    // Call base\n    this._super(params);\n  },\n\n  /*\r\n      * Initialize the control with data provided\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n    // Call base\n    this._super(data);\n  },\n\n\n  /*\r\n      * Template method to implement in each children to customize each control\r\n      */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties;\n    var template;\n    var html = \"\";\n    // Render template\n    template = self.renderFactory.getTemplate(\"render-range\");\n    html = $.fasttmpl(template, {});\n    return html;\n  },\n  /**\r\n      * Sets the range controls in DOM\r\n      * @param minControl: min range control\r\n      * @param maxControl: max range control\r\n      */\n  setRanageControls: function setRanageControls(minControl, maxControl) {\n    var self = this;\n    self.minControl = minControl || null;\n    self.maxControl = maxControl || null;\n    var control = self.getControl();\n\n    var $maxCanvas = $(\".bz-range-maximum\", control);\n    var $minCanvas = $(\".bz-range-minimum\", control);\n\n    //var $maxCanvas = $('<div>hola</div>');\n    //var $minCanvas = $('<div>hola</div>');\n\n    self.renderRangeControl($minCanvas, minControl);\n    self.renderRangeControl($maxCanvas, maxControl);\n  },\n\n  /*\r\n      *   Returns the internal value\r\n      */\n  getValue: function getValue() {\n    var self = this;\n    var minValue = self.minControl.getValue();\n    var maxValue = self.maxControl.getValue();\n\n    var value = {\n      min: minValue,\n      max: maxValue };\n\n    return value;\n  },\n\n  renderRangeControl: function renderRangeControl($canvas, control) {\n    $.when(control.render(\"render\")).done(function (html) {\n      $canvas.empty().append(html);\n      control.postRenderElement($canvas);\n    });\n  } });","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                    * Defines de min date an de max date to the range control\r\n                                                    */\n  defineRangeControl: function defineRangeControl(params) {\n    var self = this;\n\n    var dateMin = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var dateMax = bizagi.rendering.date.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n\n    var minControl = new dateMin(self.getRenderProperties(\"min\"));\n    var maxControl = new dateMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    if (typeRangeControl === \"min\") {\n      renderProperties.data.properties.displayName = \"From\";\n    } else {\n      renderProperties.data.properties.displayName = \"To\";\n    }\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                     * Defines de min money an de max money to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var moneyMin = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var moneyMax = bizagi.rendering.money.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new moneyMin(self.getRenderProperties(\"min\"));\n    var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n    return renderProperties;\n  } });","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\n\n$.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                     * Defines de min number an de max number to the range control\r\n                                                     */\n  defineRangeControl: function defineRangeControl() {\n    var self = this;\n\n    var numberMin = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMinValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var numberMax = bizagi.rendering.number.extend({\n      suscribe: function suscribe(control) {\n        this.observer = this.observer || [];\n        this.observer.push(control);\n      },\n\n      notify: function notify(value) {\n        for (var i = this.observer.length - 1; i >= 0; i--) {\n          this.observer[i].changeMaxValue(value);\n        }\n      },\n\n      setValue: function setValue(value) {\n        value = value || \"\";\n        this._super(value);\n        this.notify(value);\n      } });\n\n\n    var minControl = new numberMin(self.getRenderProperties(\"min\"));\n    var maxControl = new numberMax(self.getRenderProperties(\"max\"));\n\n    minControl.suscribe(maxControl);\n    maxControl.suscribe(minControl);\n\n    self.setRanageControls(minControl, maxControl);\n  },\n\n\n  getRenderProperties: function getRenderProperties(typeRangeControl) {\n    var self = this;\n    var form = self.getFormContainer();\n    var properties = self.properties;\n\n    var renderProperties = {\n      data: {\n        properties: {\n          \"id\": properties.id,\n          \"xpath\": properties.xpath + \"_\" + typeRangeControl,\n          \"displayType\": \"value\" } },\n\n\n      mode: \"execute\",\n      parent: form,\n      renderFactory: self.renderFactory,\n      resources: bizagi.localization,\n      dataService: self.dataService };\n\n\n    return renderProperties;\n  } });","/*\r\n*   Name: Bizagi Smartphone Form Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.form.extend(\"bizagi.rendering.form\", {\n\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    self._super(params);\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each container after processed   \r\n      */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n\n    self._super(container);\n\n    //Set button length\n    var buttons = self.getButtons();\n    var lengthButtons = buttons ? buttons.length : 0;\n\n    if (lengthButtons) {\n\n      $(document).data(\"auto-save\", \"auto-save\");\n\n      //bind event auto-save\n      $(document).unbind(\"save-form\").bind(\"save-form\", function (e, deferredSave) {\n        self.autoSaveEvents(deferredSave);\n      });\n\n      //bind event beforeunload\n      $(window).unbind(\"beforeunload\").bind(\"beforeunload\", function (e) {\n\n        var newData = {};\n        self.collectRenderValues(newData);\n\n        //if there are changes in the form show a message\n        if (!$.isEmptyObject(newData) && $(document).data(\"auto-save\")) {\n          return bizagi.localization.getResource(\"confirmation-savebox-message2\");\n        }\n\n        return;\n\n      });\n    }\n  },\n  /*\r\n      *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var complexGatewayContainer;\n    var form = self.container;\n\n    $(form.children()).each(function () {\n      if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\n        complexGatewayContainer = this;\n      }\n    });\n\n    // activeTransitions is used to store ids of activities in Complex Gateway\n    self.activeTransitions = {};\n\n    // Process buttons\n    self.processButtons(form);\n    // Check for dom included event\n    self.bind(\"ondomincluded\", function () {\n      // Creates validation controller after the form is ready\n      self.validationController = new bizagi.command.controllers.validation(self, self.validations);\n\n      // Creates action controller after the form is ready\n      self.actionController = new bizagi.command.controllers.action(self, self.actions);\n\n      // Resolve this deferred to start executing DOM dependant plugins\n      self.readyDeferred.resolve();\n    });\n\n    //Event to notify the native code the form will be showing a modal view \n    self.bind(\"modalViewDidAppear\", function () {\n      self.params.navigation.modalViewDidAppear();\n    });\n\n    //Event to notify the native code the form will be hiding a modal view \n    self.bind(\"modalViewDidDisappear\", function () {\n      self.params.navigation.modalViewDidDisappear();\n    });\n\n    // Set events for complex gateway interface\n    $(\".bz-rn-cg-checkbox\", complexGatewayContainer).bind(\"click\", function () {\n      var selectedElement = $(this).find(\"label\");\n      var transitionId = selectedElement.data(\"value\") || \"\";\n\n      if (typeof self.activeTransitions[transitionId] == \"undefined\") {\n        self.activeTransitions[transitionId] = false;\n      }\n\n      if (bizagi.util.parseBoolean(selectedElement.data(\"checked\"))) {\n        // Uncheck element\n        selectedElement.removeClass(\"ui-checkbox-state-checked\");\n        selectedElement.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        selectedElement.data(\"checked\", false);\n        self.activeTransitions[transitionId] = false;\n      } else {\n        // Check element\n        selectedElement.addClass(\"ui-checkbox-state-checked\");\n        selectedElement.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\n        selectedElement.data(\"checked\", true);\n        self.activeTransitions[transitionId] = true;\n      }\n    });\n  },\n\n  /*\r\n     * Auto Save Events\r\n     */\n  autoSaveEvents: function autoSaveEvents(deferredSave, saveBox) {\n    var self = this;\n    var data = {};\n\n    self.collectRenderValues(data);\n\n    if (!$.isEmptyObject(data)) {\n      var isStartForm = self.properties.formtype === \"startform\";\n      var message = isStartForm ? bizagi.localization.getResource(\"confirmation-savebox-message4\") : bizagi.localization.getResource(\"confirmation-savebox-message1\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"warning\")).done(function () {\n        if (!isStartForm)\n        self.saveForm();\n\n        deferredSave.resolve();\n      }).fail(function () {\n        if (isStartForm) {\n          deferredSave.reject();\n        } else {\n          deferredSave.resolve();\n        }\n      });\n    } else {\n      deferredSave.resolve();\n    }\n  },\n\n  internalSubmitForm: function internalSubmitForm(buttonProperties) {\n    var self = this;\n    // Assemble the actions\n    var actions = [];\n    var defer = $.Deferred();\n    var submitDataAction = null;\n    var executeButtonAction = null;\n    var performAction = null;\n    var checkpointAction = null;\n    var commitAction = null;\n    var data;\n\n    // Fill data hash\n    if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\n      // Collect data\n      data = self.collectRenderValuesForSubmit();\n    }\n\n    // Start asynchronous operation\n    $.when(self.startLoading()).done(function () {\n      $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\n    });\n\n    // Prepare actions\n    if (buttonProperties.executeRule) {\n      // When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\n      submitDataAction = self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      submitDataAction.tag = \"submitData\";\n\n      checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\n\n      // Reset data because when an execute rule operation has been performed, it saved already all the data\n      data = {};\n      executeButtonAction = self.dataService.executeButton({\n        idRender: buttonProperties.id,\n        xpathContext: self.properties.xpathContext || \"\",\n        idPageCache: self.properties.idPageCache,\n        prepare: true });\n\n      executeButtonAction.tag = \"executeRule\";\n\n      commitAction = self.prepareCommitAction(buttonProperties.id);\n    }\n\n    if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase) {\n      // Verify transitions\n      if (self.transitions) {\n        var transitions = [];\n        $.each(this.activeTransitions, function (key, value) {\n          value ? transitions.push(key) : \"\";\n        });\n\n        if (bizagi.util.countProps(transitions) == 0) {\n          var messageComplexGateway = bizagi.localization.getResource(\"render-widget-complexgateway-path\");\n          var errorComplexGateway = bizagi.localization.getResource(\"render-widget-complexgateway-error\");\n\n          bizagi.showMessageBox(messageComplexGateway, errorComplexGateway, \"info\", false);\n          self.endLoading();\n          defer.reject();\n          return defer.promise();\n        }\n      }\n\n      performAction = self.dataService.submitData({\n        action: buttonProperties.action,\n        forcePlanCompletion: buttonProperties.forcePlanCompletion,\n        data: data,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        prepare: true,\n        transitions: transitions || \"\",\n        contexttype: self.properties.contextType,\n        surrogatekey: self.properties.surrogateKey });\n\n\n      performAction.tag = \"performAction\";\n    }\n\n    if (executeButtonAction) {\n      actions.push(submitDataAction);\n\n      //Validates if the method CHECKPOINT is supported\n      if (checkpointAction) {\n        actions.push(checkpointAction);\n      }\n\n      actions.push(executeButtonAction);\n\n      //Validates if the method COMMIT is supported\n      if (commitAction) {\n        actions.push(commitAction);\n      }\n\n      actions.push(executeButtonAction);\n    }\n\n    if (performAction) {\n      actions.push(performAction);\n    }\n\n    //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\n    var flowControlDeferred = new $.Deferred();\n    if (data && data.deferreds) {\n      $.when.apply(this, data.deferreds).done(function (response) {\n        flowControlDeferred.resolve(response);\n      }).fail(function () {\n        console.log(\"Error: It was not possible resolve async actions on form \");\n        flowControlDeferred.reject();\n      });\n    } else {\n      flowControlDeferred.resolve();\n    }\n\n    $.when(flowControlDeferred).done(function () {\n      bizagi.util.smartphone.startLoading();\n\n      $.when(self.dataService.multiaction().execute({ actions: actions })).\n      done(function (responses) {\n        // End asynchronous operation\n        self.endLoading();\n        // Find validations\n        var bHasValidations;\n        $.each(responses, function (i, response) {\n          if (response.result.type == \"validationMessages\") {\n            // Something went wrong, we gotta display messages in notifications grid\n            self.addValidationMessage(response.result.messages);\n            bHasValidations = true;\n          }\n        });\n\n        if (!bHasValidations) {\n          // Everything went ok .. succesfully response from the server\n          if (!self.postProcessButton(responses, buttonProperties)) {\n            return;\n          }\n\n          // After successfully response refresh the form\n          if (buttonProperties.refresh) {\n            self.refreshForm();\n          }\n\n          // If needs routing publish an event\n          if (buttonProperties.routing) {\n            self.triggerHandler(\"routing\", {\n              idCase: self.params.idCase });\n\n          }\n\n          // Create case\n          if (buttonProperties.createnewcase) {\n            if (responses.length > 0) {\n              self.triggerHandler(\"routing\", {\n                idCase: responses[0].result.IdCase,\n                caseNumber: responses[0].result.CaseNumber });\n\n            }\n          }\n        } else {\n          if (buttonProperties.executeRule) {\n            self.sendRollbackAction(buttonProperties.id);\n          }\n        }\n\n        //Removes the nonSupportedMethods to prevent further iterations\n        delete self.nonSupportedMethods;\n\n        defer.resolve();\n      }).fail(function (res1, res2, response) {\n        var messageError = \"\";\n        var errorTypeList = [\n        \"WaitForCompletionPlanException\", \"InvalidPlanStateException\", \"CustomMessageException\"];\n\n\n        if (buttonProperties.executeRule)\n        self.sendRollbackAction(buttonProperties.id);\n\n        if (response && response.error && errorTypeList.indexOf(response.error.errorType) !== -1) {\n          messageError = bizagi.localization.getResource(response.error.message);\n          self.endLoading();\n          $.when(bizagi.showConfirmationBox(messageError, null, false)).then(function () {\n            var _params = $.extend({}, buttonProperties, { forcePlanCompletion: true });\n\n            return $.when(self.internalSubmitForm(_params));\n          }).done(function () {\n            defer.resolve();\n          }).fail(function () {\n            defer.reject();\n          });\n        } else {\n          messageError = typeof response === \"undefined\" ? bizagi.localization.getResource(\"workportal-general-error\") : response;\n          self.failHandler({ \"error\": messageError });\n          defer.reject(response);\n        }\n      }).always(function () {\n        bizagi.util.smartphone.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n    return defer.promise();\n  },\n\n  prepareCheckpointAction: function prepareCheckpointAction(id) {\n    return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\n  },\n\n  prepareCommitAction: function prepareCommitAction(id) {\n    return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\n  },\n\n  /**\r\n     *  TEMPLATE METHOD TO GET THE BUTTONS OBJECTS      \r\n     */\n  getButtons: function getButtons() {\n    var self = this;\n\n    if (self.getParams() && (handler = self.getParams().getButtons))\n    handler(self);\n\n    return $(\".ui-bizagi-button-container .action-button\", self.container);\n  },\n\n  processButtons: function processButtons() {\n    var self = this;\n    var params = self.getParams();\n\n    if (params && params.processButtons) {\n      var handler = params.processButtons;\n      handler(self);\n    }\n\n    var properties = self.properties;\n    properties.buttons = self.buttons;\n\n    // To cache a submit Data Buttom if exist\n    self.saveButton = null;\n    self.nextButton = null;\n\n    // Set saveButton and nextButton if exist\n    for (var i = 0, length = properties.buttons.length; i < length; i++) {\n      if (properties.buttons[i].action === \"save\") {\n        self.saveButton = properties.buttons[i];\n      } else if (properties.buttons[i].action === \"next\") {\n        self.nextButton = properties.buttons[i];\n      }\n    }\n\n    var navigation = self.getNavigation();\n\n    if (typeof navigation !== \"undefined\") {\n      //si tiene un viewContainer sera porque es una forma dentro de container de edicion\n      var view_container = self.getViewContainer();\n\n      if (typeof view_container !== \"undefined\") {\n        view_container.setNavigationButtons(self);\n      } else {\n        navigation.setNavigationButtons(self);\n      }\n    }\n\n    // bind de touch events\n    self.bindTouchEvents(self.getButtons());\n  },\n\n  bindTouchEvents: function bindTouchEvents(buttons) {\n    var self = this;\n    var touchMoveStart = 0;\n\n    // Don't process buttons if they are undefined in the template\n    if (!buttons || buttons.length === 0) return;\n\n    buttons.bind(\"touchstart\", function (event) {\n      event.preventDefault();\n\n      var pointer = event.originalEvent.targetTouches ? event.originalEvent.targetTouches[0] : event;\n      touchMoveStart = pointer.pageY;\n    });\n\n    buttons.bind(\"touchend , click\", function (event) {\n      event.preventDefault();\n\n      // Trigger the blur of the focused element in order to catch the render Change in the last changed control\n      $(\":focus\", self.container).blur();\n      var pointer = event.originalEvent && event.originalEvent.changedTouches ? event.originalEvent.changedTouches[0] : event;\n      var currentPositionY = pointer.pageY;\n\n      self.startLoading();\n\n      // If the finger is too far from the button when you stop touching the screen, then do nothing\n      if (event.type !== \"click\" && currentPositionY > touchMoveStart + 40 || currentPositionY < touchMoveStart - 40) {\n        self.endLoading();\n      } else {\n        var button = $(this);\n        var ordinal = button.attr(\"ordinal\");\n        var buttonProperties = self.buttons[ordinal];\n\n        // Execute button\n        $.when(self.processButton(buttonProperties)).always(function () {\n          self.endLoading();\n        });\n      }\n    });\n\n    return;\n  },\n\n  refreshForm: function refreshForm(focus, showLoading) {\n    var self = this;\n    var params = self.getParams();\n    var defer = new $.Deferred();\n\n    focus = focus || self.getFocus();\n    showLoading = showLoading != false ? true : showLoading;\n\n    var options = {\n      idCase: self.params.idCase || \"\",\n      idWorkitem: self.params.idWorkitem || \"\",\n      idTask: self.params.idTask || \"\",\n      focus: focus,\n      selectedTabs: self.getSelectedTabs(),\n      xpathContext: self.properties.xpathContext,\n      idPageCache: self.properties.idPageCache,\n      isRefresh: true,\n      action: self.getEndPointAction(),\n      idStartScope: self.properties.idStartScope || \"\",\n      navigation: params.navigation,\n      view_container: params.view_container };\n\n\n    if (params.postRenderEdit || params.processButtons) {\n      options.postRenderEdit = params.postRenderEdit;\n      options.processButtons = params.processButtons;\n      options.originalParams = params.originalParams || {};\n      options.getButtons = params.getButtons;\n    }\n\n    $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\n\n    // Notify the refresh event so the consumer takes the decision about what to do\n    if (showLoading) {\n      self.startLoading();\n    }\n\n    $.when(self.triggerHandler(\"refresh\", options)).done(function () {\n      defer.resolve();\n      setTimeout(function () {\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\n      }, 1000);\n    }).fail(function () {\n      defer.reject();\n    }).always(function () {\n      if (showLoading) {\n        self.endLoading();\n      }\n    });\n\n    return defer.promise();\n  },\n\n  getSelectedTabs: function getSelectedTabs() {\n    var self = this,\n    tabContainers = self.getElementsByType(\"tab\");\n\n    var tabs = $.map(tabContainers, function (tabContainer) {\n      return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\n    });\n\n    var selectedTabs = {};\n    var i = tabs.length;\n\n    while (i-- > 0) {\n      selectedTabs[tabs[i].tab] = tabs[i].selected;\n    }\n\n    return selectedTabs;\n  },\n\n  getNavigation: function getNavigation() {\n    var params = this.getFormContainer().getParams();\n    return params.navigation;\n  },\n\n  getViewContainer: function getViewContainer() {\n    var params = this.getFormContainer().getParams();\n    return params.view_container;\n  },\n\n  isFloatingButtonsEnabled: function isFloatingButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFloatingButtonsEnabled();\n  },\n\n  isFormButtonsEnabled: function isFormButtonsEnabled() {\n    var navigation = this.getNavigation();\n    return navigation && navigation.isFormButtonsEnabled();\n  },\n\n  /*\r\n     * Add a validation message to the form\r\n     */\n  addValidationMessage: function addValidationMessage(validationMessage) {\n    var self = this;\n\n    if (typeof validationMessage == \"string\") {\n      self.validationController.showValidationMessage(validationMessage);\n    } else {\n      $.each(validationMessage, function (i, message) {\n        self.validationController.showValidationMessage(message);\n      });\n    }\n\n    self.validationController.expandNotificationBox();\n\n    // TODO: Review function\n    var navigation = self.getNavigation();\n    if (navigation && navigation.hasOwnProperty(\"undoRemoveLastSuscriber\")) {\n      self.getNavigation().undoRemoveLastSuscriber();\n    }\n  },\n\n  startLoading: function startLoading(delay) {\n    bizagi.util.smartphone.startLoading();\n  },\n\n  endLoading: function endLoading() {\n    bizagi.util.smartphone.stopLoading();\n  },\n\n  dispose: function dispose(params) {\n    var self = this;\n\n    // Active refresh on smartphone\n    if (typeof params === \"undefined\" || typeof params.isRefresh === \"undefined\" || params.isRefresh == false) {\n      self._super();\n    }\n  },\n\n  /*\r\n      *   Publish a global event that the facade will replicate, also will be triggered in the form\r\n      */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    this._super(eventType, data);\n    if (!this.parent) {\n      if (this.observableElement) {\n        return this.observableElement.trigger(eventType, data);\n      } else {\n        return null;\n      }\n    } else {\n      return this.parent.triggerGlobalHandler(eventType, data);\n    }\n  },\n\n  failHandler: function failHandler(error) {\n    var self = this;\n    self._super(error);\n\n    var error_obj = {};\n    try {\n      error_obj = JSON.parse(error) || {};\n    } catch (e) {\n      error_obj = error.length && error.length > 1 ? error[0] : error;\n    } finally {\n\n      //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\n      if (error_obj.error) error_obj = error_obj.error;\n      if (error_obj.error) error_obj = error_obj.error;\n\n      //trigger the routing event in order to refresh the case\n      if (typeof error_obj.code !== \"undefined\" && error_obj.code == \"AUTH_ERROR\") {\n\n        $.notifier.add({\n          class_name: \"error\",\n          title: \"Error\",\n          text: bizagi.localization.getResource(\"render-idle-expired-error\", \"Idle timer expired. For safety reasons this view will be refreshed automatically in 5 seconds. Note that any unsaved data is lost.\").replace(\"%s\", \"5\"),\n          sticky: false,\n          time: 5000 });\n\n\n        setTimeout(function () {\n          self.triggerHandler(\"routing\", {\n            idCase: self.params.idCase,\n            idWorkitem: self.params.idWorkitem });\n\n        }, 5000);\n      }\n    }\n  },\n\n  /*\r\n     *   Build the container html\r\n     */\n  renderContainer: function renderContainer() {\n    var self = this;\n    var properties = this.properties;\n    var template = self.renderFactory.getTemplate(\"form\");\n    var idCase = \"\";\n\n    // Render the form\n    var html = $.kendoTmpl(template, {\n      buttons: self.buttons,\n      transitions: self.transitions,\n      uniqueId: properties.uniqueId,\n      helptext: properties.helpText,\n      mode: self.getMode(),\n      queryForm: self.getFormType() == \"queryForm\",\n      summaryForm: self.params.summaryForm || false,\n      globalForm: self.properties.displayAsReadOnly || false,\n      idCase: idCase,\n      displayName: self.params.displayName || idCase,\n      processPath: properties.processPath,\n      breadCrumb: properties.breadCrumb,\n      orientation: properties.orientation });\n\n\n    // Render children\n    return self.replaceChildrenHtml(html, self.renderChildrenHtml());\n  } });","/*\r\n*   Name: BizAgi Smartphone Panel Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.panel.extend(\"bizagi.rendering.panel\", {}, {});","/*\r\n*   Name: BizAgi Desktop Panel Extension\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to desktop devices\r\n*/\n\n// Auto extend\nbizagi.rendering.contentPanel.extend(\"bizagi.rendering.contentPanel\", {}, {});","/*\r\n*   Name: BizAgi Smartphone Tab Container Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to Smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tab.extend(\"bizagi.rendering.tab\", {\n  VISIBLE_TABS: 2 },\n{\n\n  /* POST RENDER CONTAINER ACTIONS\r\n  =================================================*/\n  postRenderContainer: function postRenderContainer(tab) {\n    var self = this;\n    self._super(tab);\n\n    // Apply any plugin or custom code to implement smartphone tabs\n    self.suscribeMethods();\n  },\n\n  suscribeMethods: function suscribeMethods() {\n    var self = this;\n    var tab = self.container;\n\n    //tabs\n    $(tab).bztabs({\n      activeTab: self.activeTab !== undefined && self.activeTab !== null ? self.activeTab : 0,\n      tabNumber: self.Class.VISIBLE_TABS,\n      domIncluded: self.ready(),\n      activate: function activate(event, ui) {\n        self.activeTab = $(event.currentTarget) ? $(event.currentTarget).data(\"index\") : 0;\n\n        var index = self.activeTab;\n        var form = self.getFormContainer();\n        var selectedTab = {};\n        selectedTab[self.children[index].parent.properties.id] = index;\n        form.setParam(\"selectedTabs\", selectedTab);\n      } });\n\n  },\n\n  /**\r\n      * Checks the visibility of the plus icon after partial refresh of itemTabs\r\n      */\n  checkPlusVisibility: function checkPlusVisibility() {\n    var self = this;\n    var visible_tabs = $(\".bz-header_select > .bz-wp-tabs-ui:not(:hidden)\", self.container);\n    if (visible_tabs.length <= self.Class.VISIBLE_TABS) {\n      $(\".bz-header_select\", self.container).removeClass(\"show-pluss\");\n    } else\n    {\n      $(\".bz-header_select\", self.container).addClass(\"show-pluss\");\n    }\n  } });","/*\r\n*   Name: BizAgi Smartphone Panel Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to Smartphone devices\r\n*/\n\n// Auto extend\nbizagi.rendering.tabItem.extend(\"bizagi.rendering.tabItem\", {}, {\n  /*\r\n                                                                   *   Constructor\r\n                                                                   */\n  init: function init(params) {\n    var self = this;\n\n    // Call base\n    this._super(params);\n\n    // Set tab ready deferred\n    self.tabReadyDeferred = new $.Deferred();\n    self.loadingDeferred = new $.Deferred();\n    self.tabActiveDeferred = new $.Deferred();\n  },\n  /**\r\n      * Change selected item\r\n      *\r\n      * @param {} argument\r\n      * @returns {}\r\n      */\n  setAsActiveContainer: function setAsActiveContainer(argument) {\n    var self = this;\n\n    $.when(self.ready()).done(function () {\n      // Changes item\n      var tabContainer = self.parent;\n      if (tabContainer && tabContainer.container.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.container.tabs(\"option\", \"active\", self.container.data(\"tab-counter\"));\n      }\n    });\n  },\n\n  /**\r\n      * Focus on container\r\n      *\r\n      * @returns {}\r\n      */\n  focus: function focus() {\n    var self = this;\n\n    // Set this tab as an active container\n    self.setAsActiveContainer();\n\n    // Call base\n    this._super();\n  },\n\n  /**\r\n     *  Hides / Show container\r\n     *\r\n     * @param {} argument\r\n     * @returns {}\r\n     */\n  changeVisibility: function changeVisibility(argument) {\n\n    var self = this;\n    var properties = self.properties;\n    var tabContainer = self.parent.container;\n    var activeTab = self.parent.getActiveTab();\n\n    var id = \"ui-bizagi-tab-\" + properties.id;\n    var header = $(\".bz-wp-tabs-item[data-reference-tab='#\" + id + \"']\", tabContainer);\n\n    // Store in properties\n    properties.visible = bizagi.util.parseBoolean(argument);\n\n    $.when(self.ready()).\n    done(function () {\n      // Hide - show the render\n      if (properties.visible) {\n        self.container.css(\"display\", \"\");\n\n        self.setAsActiveContainer();\n\n        if (header && header.css(\"display\", \"none\")) {\n          var headerShow = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerShow && headerShow.css(\"display\", \"\");\n        }\n      } else {\n        self.container.hide();\n        if (header && header.css(\"display\", \"block\")) {\n          var headerHide = $(\"div[data-reference-tab='#\" + id + \"']\", tabContainer);\n          headerHide && headerHide.hide();\n        }\n      }\n\n    }).always(function () {\n      if (tabContainer && tabContainer.tabs.hasOwnProperty(\"option\")) {\n        tabContainer.tabs(\"option\", \"active\", activeTab);\n      }\n      self.parent.checkPlusVisibility();\n    });\n  } });","/*\r\n*   Name: BizAgi Smartphone Horizontal Container Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to tablet devices\r\n*/\n\n// Auto extend\nbizagi.rendering.horizontal.extend(\"bizagi.rendering.horizontal\", {}, {});","/*\r\n *   Name: BizAgi Smartphones Group Extension\r\n *   Author: oscar osorio\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to smartphones devices\r\n */\n\n// Auto extend\nbizagi.rendering.group.extend(\"bizagi.rendering.group\", {}, {\n  /* \r\n                                                              *   Template method to implement in each device to customize each container after processed\r\n                                                              */\n  postRenderContainer: function postRenderContainer(group) {\n    var self = this;\n\n    // Call base\n    self._super(group);\n    self.subscribeOnTouch();\n  },\n\n  /* \r\n     *   Expands group container \r\n     */\n  expand: function expand() {\n    var self = this;\n    var group = self.container;\n  },\n\n  /* \r\n     *   Collapses group container \r\n     */\n  collapse: function collapse() {\n    var self = this;\n    var group = self.container;\n  },\n\n  /* \r\n     *   Expands or collapse the container \r\n     */\n  toogleContainer: function toogleContainer(argument) {\n    var self = this;\n\n    if (argument) {\n      self.expand();\n    } else {\n      self.collapse();\n    }\n  },\n\n  subscribeOnTouch: function subscribeOnTouch() {\n    var self = this;\n    var group = self.container;\n\n    $(group).find(\">div.headertitle\").bind(\"click\", function () {\n      $(group).toggleClass(\"collapsed\");\n    });\n  } });","/*\r\n *   Name: BizAgi Smartphone Search Form Extension\r\n *   Author: Oscar O\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\n\n// Auto extend\nbizagi.rendering.searchForm.extend(\"bizagi.rendering.searchForm\", {}, {\n  /*\r\n                                                                        *   Render the results of the query\r\n                                                                        *   Resolved in each device\r\n                                                                        */\n  renderResult: function renderResult() {\n    var self = this;\n    var properties = self.properties;\n\n    // Creates grid definition\n    var data = {};\n    data.properties = {\n      displayName: self.getResource(\"render-search-advanced-results-label\"),\n      type: \"grid\",\n      xpath: \"searchForm\" + properties.id,\n      id: properties.id,\n      skipInitialLoad: true,\n      rowsPerPage: 10,\n      sortBy: properties.sortBy,\n      sortOrder: properties.sortOrder,\n      overrideGetRemoteData: function overrideGetRemoteData(params) {\n        return self.getRemoteData(params);\n      } };\n\n\n    data.elements = [];\n\n    // Creates columns\n    var columns = properties.columns;\n    $.each(columns, function (i) {\n      var column = {\n        render: {} };\n\n      column.render.properties = {\n        displayName: columns[i].caption,\n        xpath: columns[i].xpath,\n        editable: false };\n\n\n      $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\n\n      // Next conditional added to print only columns and not labels\n      // if type = label then column is not rendered on the results table\n      if (columns[i].dataType == 0)\n      column.render.properties.columnVisible = false;\n\n      // if column is number or monetary push allowDecimals property\n      if (columns[i].dataType == 7 || columns[i].dataType == 8)\n      column.render.properties.allowDecimals = columns[i].allowDecimals;\n\n      // if column is real or float set allowDecimals property to true\n      if (columns[i].dataType == 10 || columns[i].dataType == 11)\n      column.render.properties.allowDecimals = true;\n\n      // if column is date push showtime property\n      if (columns[i].dataType == 12)\n      column.render.properties.showTime = columns[i].showTime;\n\n      data.elements.push(column);\n    });\n\n    var grid = self.renderFactory.getRender({\n      type: \"grid\",\n      data: data,\n      parent: self,\n      mode: self.getMode() });\n\n\n    grid.properties.allowAdd = false;\n    grid.properties.allowEdit = false;\n    grid.properties.allowDelete = false;\n\n    // Saves reference\n    self.resultsGrid = grid;\n\n    return grid.render();\n  },\n\n  /*\r\n     *   Template method to implement in each device to customize each container after processed\r\n     */\n  postRenderContainer: function postRenderContainer(container) {\n    var self = this;\n    self._super(container);\n\n    var results = container.find(\".ui-bizagi-container-search-results\");\n    var mode = self.getMode();\n\n    // Process children elements\n    self.container = container;\n\n    // Process result\n    var grid = $(results.children()[0]);\n    self.resultsGrid.postRenderElement(grid);\n\n    if (mode == \"execution\") {\n      // Apply handlers\n      self.configureHandlers();\n    }\n    if (mode == \"design\") {\n      // Configure view\n      self.configureDesignView();\n    }\n    if (mode == \"layout\") {\n      // Configure view\n      self.configureDesignView();\n      self.configureLayoutView();\n    }\n  },\n\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Saves reference\n    self.criteriaContainer = $(\".ui-bizagi-container-search-criteria\", self.container);\n    self.resultsContainer = $(\".ui-bizagi-container-search-results\", self.container);\n\n    // Bind to grid row select event\n    self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\n      if (self.properties.searchParams.hasOwnProperty(\"multiSelect\")) {\n        self.trigger(\"multiSelect\", ui);\n      } else {\n        // Trigger event to bubble up to main container\n        self.trigger(\"instanceSelected\", ui);\n      }\n    });\n  },\n\n  /*\r\n     *   Refresh the result panel, making it to query data with current criteria\r\n     */\n  refreshResults: function refreshResults() {\n    var self = this;\n    self.trigger(\"instancerefresh\");\n\n    return $.when(self.resultsGrid.refresh()).done(function () {\n      self.trigger(\"instancerefreshdone\");\n      if (self.resultsGrid.properties.data && self.resultsGrid.properties.data.records == 0 &&\n      self.resultsGrid.properties.data.rows.length == 0) {\n        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-general-no-records-found\"),\n        bizagi.localization.getResource(\"render-dialog-sendemail-message\"));\n      }\n    });\n  },\n\n  /*\r\n      *   Publish a global event that the facade will replicate, also will be triggered by the principal form\r\n      */\n  triggerGlobalHandler: function triggerGlobalHandler(eventType, data) {\n    var self = this;\n\n    self._super(eventType, data);\n\n    if (!self.parent) {\n      if (self.observableElement) {\n        return self.observableElement.trigger(eventType, data);\n      } else {\n        return null;\n      }\n    } else {\n      return self.parent.triggerGlobalHandler(eventType, data);\n    }\n  } });","/*\r\n *   Name: BizAgi Tablet slide form implementation\r\n *   Author: Andres Valencia\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n\n// Extends itself\n$.Class.extend(\"bizagi.rendering.smartphone.startForm\", {}, {\n\n  /* CONSTRUCTOR\r\n                                                               =====================================================*/\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container    \t\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n  },\n\n  /**\r\n      * go back and destroy\r\n      */\n  goBack: function goBack() {\n    var self = this;\n    self.slideContainer.destroy();\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    var self = this;\n    // Fill content\n    self.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getStartForm(params)).then(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm() {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n              self.form.collectRenderValues(data);\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n      self.form = new formClass(containerParams);\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function (_, refreshParams) {\n        refreshParams = $.extend({\n          selectedTabs: self.form.getSelectedTabs(),\n          isRefresh: true },\n        params, refreshParams, { idStartScope: self.form.properties.idStartScope });\n\n        self.renderSlideForm(refreshParams);\n      });\n      // Return rendering promise\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": self.slideFormParams.saveButtonLabel,\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          self.form.submitForm();\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          if (self.slideFormParams.onCancel) {\n            self.slideFormParams.onCancel();\n          }\n          self.goBack();\n        } })];\n\n\n\n      return self.form.render();\n    }).done(function (element) {\n      var saveButtonLabel = self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\");\n      var cancelButtonLabel = bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n\n      if (!params.isRefresh) {\n        self.slideFormParams.navigation.navigate(self.slideContainer.id);\n      }\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal='0' id='formButton0' class='action-button ui-bizagi-form-button'>\" +\n      saveButtonLabel + \"</div>\").delegate(\"div[ordinal='0']\", \"click\", function () {\n        self.form.submitForm();\n      });\n\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal='1' id='formButton1' class='action-button ui-bizagi-form-button'>\" +\n      cancelButtonLabel + \"</div>\").delegate(\"div[ordinal='1']\", \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      //self.view.scroller.reset();\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n    }).fail(function (xhr, errorType, message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/*\r\n *   Name: BizAgi Tablet slide form implementation\r\n *   Author: Andres Valencia\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\n$.Class.extend(\"bizagi.rendering.smartphone.slide.form\", {}, {\n  init: function init(dataService, renderFactory, slideFormParams) {\n    var self = this;\n\n    // Define instance variables\n    self.dataService = dataService;\n    self.renderFactory = renderFactory;\n    self.slideFormParams = slideFormParams || {};\n\n    // Create container\n    self.slideContainer = self.slideFormParams.navigation.createRenderContainer({ title: self.slideFormParams.title });\n    self.configureViewHandlers();\n  },\n\n  /**\r\n      * go back and destroy\r\n      */\n  goBack: function goBack() {\n    this.slideContainer.destroy();\n  },\n\n  /**\r\n      * Handlers de la vista de kendo\r\n      */\n  configureViewHandlers: function configureViewHandlers() {\n  },\n\n  /*\r\n      *   Render the form\r\n      *   The params are the same that will be send to the ajax service\r\n      *   Returns a deferred\r\n      */\n  render: function render(params) {\n    this.renderSlideForm(params);\n  },\n\n  /* RENDERS slideForm\r\n      =====================================================*/\n  renderSlideForm: function renderSlideForm(params) {\n    var self = this;\n    var defer = new $.Deferred();\n\n    // Load template and data\n    $.when(self.dataService.getFormData(params)).\n    pipe(function (data) {\n      /*** SUCCESS FILTER **/\n      // Apply editable param\n      if (params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Render dialog template\n      var formClass = bizagi.rendering.form.extend({\n        submitForm: function submitForm(parameters) {\n          if (self.form) {\n            this.endLoading();\n            // Perform validations\n            if (self.form.validateForm()) {\n              // Collect data\n              var data = {};\n              self.form.collectRenderValues(data);\n              // Add page cache for this form\n              data.idPageCache = self.form.getPageCache();\n              // Call user callback\n              if (self.slideFormParams.onSave) {\n                $.when(self.slideFormParams.onSave(data)).\n                done(function (result) {\n                  if (result === null || result === true || result.type === \"success\") {\n                    defer.resolve();\n                    self.goBack();\n                  } else if (result.type === \"validationMessages\") {\n                    // Add validation messages\n                    self.form.addValidationMessage(result.messages);\n                    // Update original value to use as reference to other futures changes in the dialogBox\n                    $.each(data, function (key, value) {\n                      var renders = self.form.getRenders(key);\n                      $.each(renders, function (i, render) {\n                        render.updateOriginalValue();\n                      });\n                    });\n                  } else if (result.type === \"error\") {\n                    // Add error messages\n                    self.form.addErrorMessage(result.message);\n                  }\n                });\n\n              } else {\n                defer.resolve();\n                self.goBack();\n              }\n            }\n          }\n        } });\n\n      var containerParams = $.extend({\n        type: \"form\",\n        data: data.form,\n        navigation: self.slideFormParams.navigation,\n        view_container: self.slideContainer },\n      {\n        renderFactory: self.renderFactory,\n        dataService: self.renderFactory.dataService });\n\n      self.form = new formClass(containerParams);\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          self.form.submitForm();\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\" },\n\n      {\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          if (self.slideFormParams.onCancel) {\n            self.slideFormParams.onCancel();\n          }\n          self.goBack();\n        } })];\n\n\n\n      // Return rendering promise\n      return self.form.render();\n    }).done(function (element) {\n      var saveButtonLabel = self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\");\n      var cancelButtonLabel = bizagi.localization.getResource(\"render-form-dialog-box-cancel\");\n\n      // Append form  in the view\n      self.slideContainer.element.html(element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n\n      $(\".ui-bizagi-button-container div\", self.form.container).remove();\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal=\\\"0\\\" id=\\\"formButton0\\\" class=\\\"action-button ui-bizagi-form-button\\\">\" +\n      saveButtonLabel + \"</div>\").delegate(\"div[ordinal=\\\"0\\\"]\", \"click\", function () {\n        self.form.submitForm();\n      });\n      $(\".ui-bizagi-button-container\", self.form.container).\n      append(\"<div ordinal=\\\"1\\\" id=\\\"formButton1\\\" class=\\\"action-button ui-bizagi-form-button\\\">\" +\n      cancelButtonLabel + \"</div>\").delegate(\"div[ordinal=\\\"1\\\"]\", \"click\", function () {\n        self.slideFormParams.onCancel && self.slideFormParams.onCancel();\n        self.goBack();\n      });\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        self.renderSlideForm(params);\n      });\n    }).fail(function (message) {\n      /*** FAIL FILTER **/\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      var error_message = message.message || \"Error\";\n\n      $.kendoTmpls(errorTemplate, { message: error_message }).appendTo(self.slideContainer.element);\n      // Navigate on view\n      self.slideFormParams.navigation.navigate(self.slideContainer.id);\n    });\n\n    return defer.promise();\n  } });","/**\r\n * Tablet definition of Action Launcher\r\n *\r\n * @author: Ricardo Prez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.actionLauncher\", {}, {\n  /**\r\n                                                                                 * Render a specific implementation for Desktop device\r\n                                                                                 */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var template;\n    var def = new $.Deferred();\n\n    self.actions = [];\n    self.configureQueueVisibility();\n    self.startLoading();\n\n    // Define params to get list of actions        \n    $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs)).\n    then(function (response) {\n      response = self.getPropertiesActionLaucher(response);\n      self.actions = response;\n      self.deferredActions.resolve(response);\n\n      if (properties.isHorizontal) {\n        if (properties.templatetype != \"none\") {\n          return self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n          then(function (templateData) {\n            return self.engine.render($.extend(templateData, {\n              isDefaultTemplate: properties.templatetype === \"default\",\n              sessionId: self.properties.sessionId }),\n            $.extend({}, self.processPropertyValueDataTmplArgs, { formParams: self.getFormParams(self.getFormContainer()) }));\n          }).then(function (tmpl) {\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n            var html = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n\n            $(\".template-container\", html.wrap(\"<div>\").parent()).append(tmpl);\n            return html;\n          });\n        } else {\n          template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n          return $.kendoTmpl(template, {\n            actions: self.actions });\n\n        }\n      } else {\n        template = self.renderFactory.getTemplate(\"render-actionLauncher-vertical\");\n        return $.kendoTmpl(template, {\n          actions: self.actions,\n          allowSearch: properties.allowSearch,\n          maxItems: properties.maxItems });\n\n      }\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n\n    return def.promise();\n  },\n\n  /**\r\n      * \r\n     */\n  getFormParams: function getFormParams(form) {\n    if (form.parent) {\n      return this.getFormParams(form.parent.getFormContainer());\n    } else\n    {\n      return form.getParams();\n    }\n\n  },\n\n  /**\r\n      * Validates if the action launcher control contains a valid value\r\n      * @returns {boolean}\r\n      */\n  hasValue: function hasValue() {\n    var value = this.getValue();\n    return typeof value !== \"undefined\" && value !== null && value.length > 0;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".action-launcher-control\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        readOnlyForm: item[6] || false,\n        guidEntity: self.properties.guidEntity,\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      self.processAction(action);\n    });\n\n    var actions = [];\n    for (var i = 0, length = self.actions.length; i < length; i++) {\n      actions.push({\n        guid: self.actions[i][0],\n        displayName: self.actions[i][1] });\n\n    }\n\n\n    //Binding for click action sheet\n    $(\".wp-action-more\", control).actionSheet({\n      actions: actions,\n      actionClicked: function actionClicked(action) {\n        var item = self.actions.find(function (element) {\n          return element[0] == action.guid;\n        });\n\n        self.processAction({\n          guidProcess: item[0],\n          guidAction: item[4],\n          displayName: item[1],\n          actionType: item[3],\n          xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n          readOnlyForm: item[6] || false,\n          xpathActions: self.properties.xpathActions || \"\" });\n\n      } });\n\n\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".action-launcher-control\", control).show();\n      if (search) {\n        $(\".action-launcher-control\", control).\n        not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n  },\n  /**\r\n      *\r\n      */\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n\n    //Catch the event from the layout link\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  processAction: function processAction(action) {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var multipleSelection = typeof properties.multipleSelection == \"undefined\" ? true : properties.multipleSelection;\n\n    if (multipleSelection) {\n      // If this is a form and has been queued, so open it\n      if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\n        //Open action\n        $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\n      } else {\n        $.when(self.actionManager(action)).done(function (act) {\n          self.executeAction(act);\n        });\n      }\n    } else if (self.getValue().length > 0) {\n      self.showConfirmationDialog(action);\n    } else {\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    }\n  },\n\n  /**\r\n      *\r\n      * @param data\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(data, action) {\n    var self = this;\n\n    if (data.response == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var formParams = self.getParams();\n\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var def = new $.Deferred();\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) === 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    var renderParams = {\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath };\n\n\n    if (action.actionType === \"Form\") {\n      renderParams.contextType = \"entitytemplate\";\n      renderParams.xpathContext = undefined;\n      renderParams.guidEntity = action.guidEntity;\n      renderParams.rewriteContextType = true;\n    }\n\n    slideForm.render(renderParams);\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      * @returns {*}\r\n      */\n  processActionFormCollection: function processActionFormCollection(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\n    var xpathPattern = \"%s[id=%s]\";\n    var xpathPatternWithoutkey = \"%s[]\";\n    var xpathContextWithKey = xpathContext !== \"\" ? printf(xpathPattern, xpathContext, action.idEntity) : xpathContext;\n    var xpathContextWithoutKey = xpathContext !== \"\" ? printf(xpathPatternWithoutkey, xpathContext) : xpathContext;\n    var formParams = form.getParams();\n\n    var slideForm = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        if (action.editMode) {\n          return self.dataService.multiaction().submitData({\n            action: \"SAVE\",\n            data: data,\n            xpathContext: xpathContextWithKey,\n            idPageCache: data.idPageCache,\n            isOfflineForm: false,\n            isActionStartForm: true }).\n          done(function (savedData) {\n            def.resolve(savedData.IdScope);\n          });\n        } else {\n          return self.dataService.addGridRecordData({\n            idRender: properties.id,\n            //xpath: properties.xpath,\n            xpathContext: xpathContext,\n            contexttype: \"start\",\n            idPageCache: data.idPageCache,\n            submitData: data }).\n          done(function (savedData) {\n            action.idStartScope = savedData.IdScope;\n            action.idEntity = savedData.IdEntity;\n            self.addActionToQueue(action);\n            def.resolve(savedData.IdScope);\n          });\n        }\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidProcess,\n      \"contextType\": \"start\",\n      \"idCase\": formParams.idCase,\n      \"additionalXpaths\": additionalXpaths,\n      \"xpathContext\": action.editMode ? xpathContextWithKey : xpathContextWithoutKey,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"readOnlyForm\": action.readOnlyForm,\n      \"recordXpath\": action.recordXpath });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var def = new $.Deferred();\n    args = args || {};\n    var formParams = self.getFormContainer().getParams();\n\n    // Show dialog\n    var slideForm = new bizagi.rendering.smartphone.startForm(self.dataService, self.renderFactory, {\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\" ?\n      bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n    // Render the search form\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      *\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show the confirmation dialog\r\n      * bizagi.createOkCancelPopup\r\n      * @param action\r\n      * */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\n\n    self.configureQueueVisibility();\n\n    $.when(self.deferredActions).done(function (listOfActions) {\n      var getMappingAction = function getMappingAction(guidAction) {\n        var mapping = [];\n        $.each(listOfActions, function (key, value) {\n          if (value[4] == guidAction) {\n            mapping = value;\n          }\n        });\n\n        return mapping;\n\n      };\n\n      $.each(data, function (key, value) {\n        var mapping = getMappingAction(value.guidAction);\n        data[key].displayName = mapping[1];\n        data[key].guidProcess = mapping[0];\n        data[key].actionType = mapping[3];\n        data[key].xpathContext = mapping[5];\n        data[key].readOnlyForm = mapping[6];\n\n        if (data[key].params && data[key].params.idStartScope) {\n          data[key].idStartScope = data[key].params.idStartScope;\n        }\n        if (data[key].params && data[key].params.idPageCache) {\n          data[key].idPageCache = data[key].params.idPageCache;\n        }\n        if (data[key].params && data[key].params.idEntity) {\n          data[key].idEntity = data[key].params.idEntity;\n        }\n      });\n\n      $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n        actionsToExecuteContainer.empty();\n        actionsToExecuteContainer.append(html);\n\n        var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n        var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n\n        removeActionSelector.on(\"click\", function () {\n          var index = $(this).parent().data(\"index\");\n          self.removeActionToQueue(index);\n        });\n\n        openActionSelector.on(\"click\", function () {\n          var target = $(this).parent();\n          var type = target.data(\"actiontype\");\n          var guidprocess = target.data(\"guidprocess\");\n          var idStartScope = target.data(\"idstartscope\");\n          var title = target.data(\"title\");\n          // When undefined return string \"undefined\" instead of type \"undefined\"\n          var xpathContext = target.data(\"xpathcontext\");\n          var readOnlyForm = target.data(\"readonlyform\") || false;\n          var idEntity = target.data(\"identity\") || \"\";\n          var guidAction = target.data(\"guidaction\");\n          var recordXpath = xpathContext || self.properties.xpathContext;\n          switch (type) {\n            case \"Process\":\n              if (idStartScope) {\n                self.processStartForm({\n                  guidprocess: guidprocess,\n                  idStartScope: idStartScope,\n                  title: title,\n                  xpathContext: xpathContext,\n                  recordXpath: recordXpath });\n\n              }\n              break;\n            case \"Form\":\n              var action = {\n                guidProcess: guidprocess,\n                idStartScope: idStartScope,\n                editMode: true,\n                xpathContext: xpathContext,\n                readOnlyForm: readOnlyForm,\n                idEntity: idEntity,\n                recordXpath: recordXpath };\n\n\n              if (action.xpathContext) {\n                self.processActionFormCollection(action);\n              } else {\n                // Convert string \"undefined\" into type \"undefined\"\n                action.xpathContext = undefined;\n\n                // Add parameters if action form\n                var extraParams = {};\n                var dataAction = self.value.filter(function (item) {\n                  return item.guidAction == guidAction;\n                });\n\n                if (dataAction.length > 0) {\n                  extraParams = {\n                    actionType: \"Form\",\n                    contextType: \"entitytemplate\",\n                    guidEntity: self.properties.guidEntity || dataAction[0].guidEntity };\n\n                }\n\n                self.processActionForm($.extend(action, extraParams));\n              }\n              break;\n            case \"Rule\":\n              // Rules dont have forms or something like that\n              break;}\n\n        });\n      });\n    });\n  },\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".action-to-execute-label\", control);\n\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n * Tablet definition of entity template\r\n *\r\n * @author: Ricardo Prez\r\n */\n\nbizagi.rendering.actionLauncher.extend(\"bizagi.rendering.entityTemplate\", {}, {\n\n  /**\r\n                                                                                 * Render a specific implementation for smartphone device\r\n                                                                                 */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    self.actions = [];\n\n    self.getArrowContainer().hide();\n    self.configureQueueVisibility();\n\n    self.startLoading();\n\n    // Define params to get template               \n    self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs).\n    then(function (templateData) {\n      return self.engine.render(templateData, self.processPropertyValueDataTmplArgs).\n      then(function (tmpl) {\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\n        if (properties.allowactions) {\n          return self.dataService.multiaction().getActions(self.processPropertyValueArgs).\n          then(function (response) {\n            self.deferredActions.resolve(response);\n            self.actions = response;\n\n            var htmlTemplate = $($.kendoTmpl(template, {\n              actions: self.actions,\n              template: true }));\n\n\n            $(\".template-container\", htmlTemplate.wrap(\"<div>\").parent()).append(tmpl);\n\n            return htmlTemplate;\n          });\n        } else {\n          var htmlTemplate = $($.kendoTmpl(template, { template: true }));\n          $(\".template-container\", htmlTemplate.wrap(\"<div>\").parent()).append(tmpl);\n\n          return htmlTemplate;\n        }\n      });\n\n    }).done(function (html) {\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-action-launcher-actions-container\", control);\n\n      self.endLoading();\n\n      actionsContainer.append(html);\n      self.configureHandlers();\n      self.configureTemplateHandlers();\n\n      def.resolve(actionsContainer);\n    }).fail(function (error) {\n      self.endLoading();\n      def.fail(error);\n    });\n    return def.promise();\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var entityTemplateControls = $(\".action-launcher-control\", control);\n\n    /**\r\n                                                                          * Binding for click action on buttons\r\n                                                                          */\n    entityTemplateControls.on(\"click\", function () {\n      var item = self.actions[parseInt($(this).data(\"index\"))];\n      var action = {\n        guidProcess: item[0],\n        guidAction: item[4],\n        displayName: item[1],\n        actionType: item[3],\n        xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\n        xpathActions: self.properties.xpathActions || \"\" };\n\n\n      if (action.actionType === \"Form\") {\n        action.xpathContext = undefined;\n        action.contextType = \"entitytemplate\";\n        action.guidEntity = self.properties.guidEntity;\n      }\n\n      self.processAction(action);\n    });\n\n    var actions = [];\n    for (var i = 0, len = self.actions.length; i < len; i++) {\n      actions.push({\n        guid: self.actions[i][0],\n        displayName: self.actions[i][1] });\n\n    }\n\n    /**\r\n       * Binding for click action sheet\r\n       */\n    $(\".wp-action-more\", control).actionSheet({\n      actions: actions,\n      actionClicked: function actionClicked(action) {\n        var item = self.actions.find(function (e) {\n          return e[0] == action.guid;\n        });\n        self.processAction({\n          guidProcess: item[0],\n          guidAction: item[4],\n          displayName: item[1],\n          actionType: item[3],\n          xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\" });\n\n      } });\n\n\n  },\n\n  configureTemplateHandlers: function configureTemplateHandlers() {\n    var self = this;\n    /**\r\n                      * Catch the event from the layout link\r\n                      */\n    self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\n      params.filters = [];\n      params.calculateFilters = params.calculateFilters || true;\n\n      self.triggerGlobalHandler(\"dataNavigation\", params);\n    });\n  } });","/**\r\n * Device definition of Polymorphic launcher\r\n *\r\n * @author: Andres Felipe Arenas\r\n */\n\nbizagi.rendering.polymorphicLauncher.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\n  /**\r\n                                                                                           * Render a specific implementation for Smartphone device\r\n                                                                                           */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var mode = self.getMode();\n    var html, template;\n\n    if (mode == \"design\" || !self.properties.surrogatedKey) {\n      return \"\";\n    }\n\n    self.configureQueueVisibility();\n\n    /**\r\n                                      * Define params to get list of actions\r\n                                      */\n    return $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).\n    done(function (response) {\n      // Convert default response to tree data structure\n      response = self.dataService.serializePolymorphicActions(response);\n      self.totalActions = bizagi.clone(response);\n      var actions = bizagi.clone(response);\n      self.lessActions = bizagi.clone(actions);\n\n      // NOTE: Code extracted\n      var templateArguments = {\n        actions: actions,\n        allowSearch: properties.allowSearch,\n        treeActionsList: self.getTreeItems(actions) };\n\n      template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\n\n      var control = self.getControl();\n      var actionsContainer = $(\".bz-polymorphic-launcher-constructors-container\", control);\n      actionsContainer.append($.kendoTmpl(template, templateArguments));\n      self.bindHandlers();\n    });\n  },\n\n  /**\r\n      * Get rendered html of each node of constructors\r\n      * @param actions\r\n      * @param level\r\n      * @return {string}\r\n      */\n  getTreeItems: function getTreeItems(actions, level) {\n    var self = this;\n    var item = \"<ul>\";\n    var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\n    actions = actions || {};\n    level = level || 1;\n\n    $.each(actions, function (key, value) {\n      item += $.kendoTmpl(templateTreeItem, value);\n\n      if (value.children) {\n        item += self.getTreeItems(value.children, level + 1);\n      }\n    });\n    item += \"</ul>\";\n    return item;\n  },\n\n  /**\r\n      * Add binding to html elements\r\n      */\n  bindHandlers: function bindHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var actionLauncherControls = $(\".bz-polymorphic-launcher-constructors-container li span\", control);\n\n    //Binding for click action on buttons\n    actionLauncherControls.on(\"click\", function () {\n      var $targetData = $(this).parent();\n      var action = {\n        guidEntity: $targetData.data(\"guidentity\"),\n        guidObject: $targetData.data(\"guidobject\"),\n        guidConstructor: $targetData.data(\"guidconstructor\"),\n        displayName: $targetData.data(\"display-name\"),\n        actionType: $targetData.data(\"action-type\"),\n        xpathContext: $targetData.data(\"xpathcontext\") };\n\n      self.onActionClicked(action);\n    });\n    //Catch the typed text in the search field and filter the action list\n    $.expr[\":\"].FilterAction = function (entity, i, array) {\n      var search = array[3];\n      if (!search) {\n        return false;\n      }\n      return new RegExp(search, \"i\").test($(entity).text());\n    };\n    $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\n      var search = $(this).val();\n      $(\".bz-polymorphic-launcher-constructors-container li\", control).show();\n      if (search) {\n        $(\".bz-polymorphic-launcher-constructors-container li\", control).not(\":FilterAction(\" + search + \")\").hide();\n      }\n    });\n\n  },\n  /**\r\n      * Execute an Action\r\n      * @param action\r\n      */\n  onActionClicked: function onActionClicked(action) {\n    var self = this;\n\n    $.when(self.actionManager(action)).done(function (act) {\n      self.executeAction(act);\n    });\n  },\n  /**\r\n      * Show a message when action has been executed\r\n      * @param status\r\n      * @param action\r\n      */\n  notifyExecution: function notifyExecution(status, action) {\n    var self = this;\n    if (status == \"success\") {\n      $.notifier.add({\n        class_name: \"success\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n\n    } else {\n      $.notifier.add({\n        class_name: \"error\",\n        title: action.displayName,\n        text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\n        sticky: false });\n\n    }\n  },\n  /**\r\n      * Show a dialog with a form\r\n      * @param action\r\n      * @return {*}\r\n      */\n  processActionForm: function processActionForm(action) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var additionalXpaths = self.properties.additionalXpath.join(\",\");\n    var def = new $.Deferred();\n    var xpathContext = action.xpathContext || \"\";\n    var formParams = form.getParams();\n\n    var recordXpath = self.properties.recordXpath;\n\n    // Show dialog with new form after that\n    var slideForm = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: formParams.navigation,\n      showSaveButton: true,\n      cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n      onSave: function onSave(data) {\n        var pageCache = data.idPageCache;\n        data.idPageCache = null;\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: slideForm.form.properties.xpathContext, //self.properties.xpathContext,\n          idPageCache: pageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          if (!action.editMode && self.countSameActions(action) == 0) {\n            action.idStartScope = savedData.IdScope;\n          }\n          def.resolve(savedData.IdScope);\n        });\n      },\n      onCancel: function onCancel(data) {\n\n      } });\n\n\n    slideForm.render({\n      \"idForm\": action.guidObject,\n      \"contextType\": \"entity\",\n      \"guidEntity\": action.guidEntity,\n      \"idCase\": self.properties.caseId,\n      \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      \"additionalXpaths\": additionalXpaths,\n      //\"xpathContext\": xpathContext,\n      \"idStartScope\": action.idStartScope,\n      \"surrogateKey\": self.properties.surrogatedKey,\n      \"recordXpath\": recordXpath });\n\n\n    return def.promise();\n  },\n\n  /**\r\n      * Process a start form\r\n      * @param args\r\n      * @return {*}\r\n      */\n  processStartForm: function processStartForm(args) {\n    var self = this;\n    var properties = self.properties;\n    var form = self.getFormContainer();\n    var def = new $.Deferred();\n    var formParams = form.getParams();\n    args = args || {};\n\n\n    var slideForm = new bizagi.rendering.smartphone.startForm(self.dataService, self.renderFactory, {\n      //showSaveButton: properties.editable,\n      maximized: properties.maximized,\n      title: args.title || \"\",\n      navigation: formParams.navigation,\n      saveButtonLabel: self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\" ?\n      bizagi.localization.getResource(\"render-form-button-create\") :\n      bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n      onSave: function onSave(data) {\n        form.startLoading();\n\n        // Submit the form\n        return self.dataService.multiaction().submitData({\n          action: \"SAVE\",\n          data: data,\n          xpathContext: self.properties.xpathContext,\n          idPageCache: data.idPageCache,\n          isOfflineForm: false,\n          isActionStartForm: true }).\n        done(function (savedData) {\n          form.endLoading();\n          def.resolve(savedData.IdScope);\n        });\n      } });\n\n\n    slideForm.render({\n      guidprocess: args.guidprocess,\n      idStartScope: args.idStartScope,\n      idCase: self.properties.caseId,\n      idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\n      additionalXpaths: self.properties.additionalXpath.join(\",\"),\n      surrogatedKey: self.properties.surrogatedKey,\n      recordXpath: args.recordXpath,\n      mappingstakeholders: true });\n\n\n    return def.promise();\n  },\n  /**\r\n      * Execute and action if a form is global form or summary, or send to queue\r\n      * @param action\r\n      */\n  executeAction: function executeAction(action) {\n    var self = this;\n\n    if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\n      var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n        self.executeActionImmediately(action);\n      });\n    } else {\n      self.addActionToQueue(action);\n    }\n  },\n\n  /**\r\n      * Show confirmation dialog\r\n      * @param action\r\n      */\n  showConfirmationDialog: function showConfirmationDialog(action) {\n    var self = this;\n    var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\n\n    $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n    done(function () {\n      self.setValue([]);\n\n      $.when(self.actionManager(action)).done(function (act) {\n        self.executeAction(act);\n      });\n    });\n  },\n\n  /**\r\n      * Render actual value of control and set events\r\n      * @param data\r\n      */\n  setDisplayValue: function setDisplayValue(data) {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\n    self.configureQueueVisibility();\n\n    $.when($.kendoTmpl(template, { actions: data })).done(function (html) {\n      actionsToExecuteContainer.empty();\n      actionsToExecuteContainer.append(html);\n      var removeActionSelector = $(\".action-to-execute-control .delete-action\", actionsToExecuteContainer);\n      var openActionSelector = $(\".action-to-execute-control label\", actionsToExecuteContainer);\n      removeActionSelector.on(\"click\", function () {\n        var index = $(this).parent().data(\"index\");\n        self.removeActionToQueue(index);\n      });\n      openActionSelector.bind(\"click\", function () {\n        var $target = $(this).parent();\n        var type = $target.data(\"actiontype\");\n        var guidprocess = $target.data(\"guidprocess\");\n        var idStartScope = $target.data(\"idstartscope\");\n        var title = $target.data(\"title\");\n        var xpathContext = $target.data(\"xpathcontext\");\n        var idEntity = $target.data(\"identity\") || \"\";\n        var guidEntity = $target.data(\"guidentity\");\n        var recordXpath = xpathContext || self.properties.xpathContext;\n\n        switch (type) {\n          case \"Process\":\n            if (idStartScope) {\n              self.processStartForm({\n                guidprocess: guidprocess,\n                idStartScope: idStartScope,\n                title: title,\n                xpathContext: xpathContext,\n                recordXpath: recordXpath });\n\n            }\n            break;\n          case \"Form\":\n            var action = {\n              guidProcess: guidprocess,\n              idStartScope: idStartScope,\n              editMode: true,\n              xpathContext: xpathContext,\n              idEntity: idEntity,\n              guidEntity: guidEntity,\n              guidObject: guidprocess };\n\n\n            self.processActionForm(action);\n            break;\n          case \"Rule\":\n            // Rules dont have forms or something like that\n            break;}\n\n      });\n    });\n  },\n\n  /**\r\n      * Show container if it has actions\r\n      */\n  configureQueueVisibility: function configureQueueVisibility() {\n    var self = this;\n    var control = self.getControl();\n    var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\n    var actionsToExecuteTitle = $(\".actions-to-execute-title\", control);\n    if (self.getValue().length > 0) {\n      actionsToExecuteContainer.show();\n      actionsToExecuteTitle.show();\n    } else {\n      actionsToExecuteContainer.hide();\n      actionsToExecuteTitle.hide();\n    }\n  } });","/**\r\n *   Name: BizAgi Tablet Render Text Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments: Extended text implementation\r\n */\nbizagi.rendering.extendedText.extend(\"bizagi.rendering.extendedText\", {\n  TEXTAREA_LINE_HEIGHT: 14 },\n{\n  /**\r\n   * Creates the markup for the readonly extendedText field\r\n   * Comment: includes the default value in the markup\r\n   * @returns {html}\r\n   */\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyExtendedText\");\n    // Render template\n    return $.kendoTmpl(template);\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    self.element = container;\n\n    if (!properties.editable) {\n      self.input = container.find(\".bz-rn-text-extended pre\");\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      self.input = container.find(\".bz-rn-text-extended\");\n      container.addClass(\"bz-command-edit-inline\");\n\n      $(self.input).bind(\"keyup\", function () {\n        self.calculateHeight(this);\n        self.setValue(self.input.val(), false);\n      });\n    }\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    //Attach event for retype double\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n\n    self.textarea = control.find(\"textarea\");\n\n    // Set the default maxlenght for the input if is 0 or undefined set to infinity\n    // this resolve issue with scope strings that don't have maxlength\n    if (properties.maxLength > 0)\n    self.textarea.prop(\"maxlength\", properties.maxLength);\n\n    if (properties.maxLines) {\n      self.hasMaxLines = true;\n      self.textarea.prop(\"rows\", properties.maxLines);\n    } else {\n      self.hasMaxLines = false;\n      self.textarea.prop(\"rows\", 6);\n    }\n\n    self._super();\n  },\n\n  /**\r\n      *  SET DISPLAY VALUE\r\n      *\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n\n    var self = this;\n    var properties = self.properties;\n    var decodedValue = bizagi.util.decodeURI(value);\n    value = typeof decodedValue == \"string\" ? decodedValue : \"\";\n\n    // Call base\n    this._super(value);\n\n    // Set value in input\n    if (value && properties.editable) {\n      var resolvedValue = $.br2nl(value);\n      self.textarea.val(resolvedValue);\n\n      if (!self.hasMaxLines) {\n        var rows = self.input.val().split(\"\\n\");\n        self.input.prop(\"rows\", rows.length + 1);\n      }\n    }\n  },\n\n  renderEdition: function renderEdition() {\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit(value) {\n  },\n\n  actionSave: function actionSave() {\n  },\n\n  calculateHeight: function calculateHeight(input) {\n    var self = this;\n    var textarea = input;\n    var newHeight = textarea.scrollHeight;\n    var currentHeight = textarea.clientHeight;\n\n    if (newHeight > currentHeight && !self.hasMaxLines) {\n      $(textarea).css(\"height\", newHeight + 2 * self.Class.TEXTAREA_LINE_HEIGHT + \"px\");\n    }\n  } });","/*\r\n*   Name: BizAgi Smartphone Render Label Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the label render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.label.extend(\"bizagi.rendering.label\", {}, {\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    properties.editable = false;\n    self.getArrowContainer().hide();\n\n    if (!self.properties.editable)\n    self.getContainerRender().addClass(\"bz-rn-non-editable\");\n\n    container.addClass(\"ui-bz-rn-label-only\");\n\n    this._super();\n  } });","/*\r\n*   Name: Bizagi smartphone Render Number Extension\r\n*   Author: Bizagi Mobile Team \r\n*   Comments:\r\n*   -   This script will redefine the number render class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.number.extend(\"bizagi.rendering.number\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var template = this.renderFactory.getTemplate(\"readonlyNumber\");\n    return $.kendoTmpl(template, {});\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    if (!properties.editable) {\n      self.numericInput = self.input = control.find(\".ui-bizagi-render-numeric\");\n      container.addClass(\"bz-rn-non-editable\");\n      container.find(\"i\").addClass(\"bz-rn-icon-readonly\").addClass(\"bz-mo-icon\").addClass(\"bz-number-icon\");\n    } else {\n      self.numericInput = self.input = control.find(\"input\");\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.removeAttr(\"readonly\");\n\n      //Adjust the input in order to accept the comma input as decimal for certain language standars\n      if (properties.decimalSymbol == ',') {\n        self.input.attr(\"lang\", \"en-150\");\n      }\n\n      self.configureHandlers();\n    }\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    self._super();\n\n    //Attach event for retype double\n    if (self.properties.retype === \"double\") {\n      self.attachRetypeDouble();\n    }\n  },\n\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    self._super();\n\n    if (!properties.editable && properties.percentage) {\n      self.numericInput.text(self.input.text() + \"%\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    self.setValue(value, false);\n\n    if (!self.properties.editable) {\n      self.input.text(self.getDisplayValue());\n    } else {\n      self.input.html(value);\n      self.input.val(value);\n\n      // Formats the input\n      self.executeFormatCurrencyPlugin();\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var input = self.input;\n    var properties = self.properties;\n\n    self.numericInput = input;\n    self.attachFormatCurrency();\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.input.numeric(self.properties.decimalSymbol);\n\n    self.input.blur(function () {\n      var inputValue = self.input.val();\n\n      if (inputValue === \"\" || !bizagi.util.isNumeric(inputValue) && self.properties.value === 0) {\n        self.setValue(\"\", false);\n\n        self.input.html(\"\");\n        self.input.val(\"\");\n      }\n    });\n  },\n\n  attachRetypeDouble: function attachRetypeDouble() {\n    var self = this;\n    var element = self.element;\n    var input = $(\"input\", element);\n\n    if (!input || input.length === 0) return;\n\n    // Apply blur handler to check value\n    input.blur(function () {\n      var control = $(this);\n      self.retypeDouble(control);\n    });\n  },\n\n  retypeDouble: function retypeDouble(control) {\n    var self = this;\n\n    if ($(control).attr(\"type\") !== \"hidden\" &&\n    $(control).css(\"display\") !== \"none\" &&\n    $(control).css(\"visibility\") !== \"hidden\") {\n\n      if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\n\n        // Check that there is something in the value or \n        // if a value has already been set\n        if (control.val() === \"\" || control.val() === control.attr(\"newValue\"))\n        return;\n\n        // Create new tooltip\n        control.data(\"oldValue\", control.val());\n        control.val(\"\");\n\n        try {\n          control.tooltip(\"destroy\");\n        } catch (e) {}\n\n        // Re-type value\n        control.attr(\"title\", self.getResource(\"render-number-retype\"));\n\n        // Setup tooltip\n        control.tooltip();\n        control.tooltip(\"open\");\n\n        // Focus after 100ms to avoid bubbling\n        setTimeout(function () {\n          control.focus();\n        }, 100);\n\n      } else {\n\n        // Check that there is something in the value\n        if (control.val() === \"\") {\n          return;\n        }\n\n        if (control.val() !== control.data(\"oldValue\")) {\n          self.setValue(\"\");\n\n          control.val(\"\");\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n\n          control.attr(\"title\", self.getResource(\"render-number-retype-fail\"));\n          control.tooltip();\n          control.tooltip(\"open\");\n\n          setTimeout(function () {\n            control.focus();\n          }, 100);\n\n        } else {\n          control.data(\"newValue\", control.val());\n          control.data(\"oldValue\", \"\");\n\n          try {\n            // Destroy tooltips\n            control.tooltip(\"destroy\");\n          } catch (e) {}\n        }\n      }\n    }\n  } });","/*\r\n*   Name: Bizagi Rendering Smartphone numberScientificNotation\r\n*   Author: Luis Cabarique - LuisCE\r\n*   Comments:\r\n*   -   This script will define a base class to define the Scientific number notation\r\n*/\n\nbizagi.rendering.numberScientificNotation.extend(\"bizagi.rendering.numberScientificNotation\", {}, {\n\n  /*\r\n                                                                                                     * Template method to implement in each device to customize each render after processed\r\n                                                                                                     */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    self.inputDisplay = $(\"input\", control).first();\n    self.numericInput = self.input = control.find(\"input\").length > 1 ? $(\"input\", control).last() : control.append(\"<span class=\\\"bz-rn-non-editable bz-rn-align-class bz-rn-text\\\"></span>\").find(\"span\");\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.numericInput.numericSN(self.properties.decimalSymbol);\n\n    // Attach Format Currency Plugin to format the input\n    self.attachFormatSientificNotation();\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n      self.numericInput.addClass(\"bz-rn-icon-readonly\").addClass(\"bz-mo-icon\").addClass(\"bz-specialnumbers-input\");\n      self.numericInput.attr(\"readonly\", \"readonly\");\n      self.inputDisplay.attr(\"readonly\", \"readonly\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n      self.numericInput.removeAttr(\"readonly\");\n      self.inputDisplay.removeAttr(\"readonly\");\n    }\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var value = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 38);\n    var displayValue = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 15);\n\n    // Set value in input\n    self.numericInput.val(value);\n    self.inputDisplay.val(displayValue);\n    self.numericInput.html(displayValue);\n    self.value = self.properties.value = value;\n  },\n\n  attachFormatSientificNotation: function attachFormatSientificNotation() {\n    var self = this;\n\n    self.inputDisplay.focus(function () {\n      $(this).val(self.getDisplayValue());\n    });\n\n    // Attach events\n    self.inputDisplay.blur(function () {\n      if (typeof self.getFormContainer().validationController == \"undefined\") self.getFormContainer().validationController = new bizagi.command.controllers.validation(self.getFormContainer(), self.validations);\n\n      var scientificNotationNumber = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 38);\n      var scientificNotationNumberDisplay = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol, 15);\n\n      self.numericInput.val(scientificNotationNumber);\n      self.inputDisplay.val(scientificNotationNumberDisplay);\n\n      // Updates internal value\n      self.setValue(scientificNotationNumber);\n    });\n  } });","/*\r\n*   Name: BizAgi smartphone Render Money Extension\r\n*   Author: OscarO\r\n*   Comments:\r\n*   -   This script will redefine the money render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.money.extend(\"bizagi.rendering.money\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var value = self._super();\n    var template = self.renderFactory.getTemplate(\"readonlyNumber\");\n    var tmpl = $($.kendoTmpl(template, { value: value }));\n    $(\".bz-rn-icon\", tmpl).removeClass(\"bz-rn-icon-number\").removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\").addClass(\"bz-rn-icon-coin\");\n\n    return tmpl.get(0).outerHTML;\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    if (!properties.editable) {\n      self.numericInput = self.input = control.find(\".ui-bizagi-render-numeric\");\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      self.numericIcon = $(\"span\", control);\n      self.numericIcon.removeClass(\"bz-number-icon\").addClass(\"bz-coin-input\");\n\n      self.numericInput = self.input = control.find(\"input\");\n      container.addClass(\"bz-command-edit-inline\");\n      self.input.removeAttr(\"readonly\");\n\n      //Adjust the input in order to accept the comma input as decimal for certain language standars\n      if (properties.decimalSymbol == ',') {\n        self.input.attr(\"lang\", \"en-150\");\n      }\n\n      self.configureHandlers();\n    }\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self._super();\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    self.setValue(value, false);\n\n    if (!properties.editable) {\n      self.input.text(value);\n    } else {\n      self.input.html(value);\n      self.input.val(value);\n    }\n\n    self.executeFormatCurrencyPlugin();\n  },\n\n  // override\n  executeFormatCurrencyPlugin: function executeFormatCurrencyPlugin() {\n    var self = this;\n    var properties = self.properties;\n\n    self.input.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var input = self.input;\n    var properties = self.properties;\n\n    self.numericInput = input;\n    self.attachFormatCurrency();\n    self.executeFormatCurrencyPlugin();\n\n    // Add numeric plugin to avoid invalid keystrokes\n    self.input.numeric(self.properties.decimalSymbol);\n\n    self.input.blur(function () {\n      var inputValue = self.input.val();\n      if (inputValue === \"\" || !bizagi.util.isNumeric(inputValue) && self.properties.value === 0) {\n        self.setValue(0, false);\n        self.input.html(0);\n        self.input.val(0);\n        self.executeFormatCurrencyPlugin();\n      }\n    });\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"text\";\n  } });","/**\r\n*   Name: BizAgi Smartphone Render Yes-No Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the Yes-No render class to adjust to smartphone devices\r\n*/\nbizagi.rendering.yesno.extend(\"bizagi.rendering.yesno\", {}, {\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var container = self.getContainerRender();\n\n    if (properties.editable) {\n      if ((self.value == null || self.value === undefined) && self.properties.value != null) {\n        self.value = properties.value;\n      }\n\n      self.input = self.getControl().find(\"> div\");\n      container.addClass(\"bz-command-edit-inline\");\n\n      self.input.change(function () {\n        var selectedRadio = self.input.find(\"input:radio:checked\");\n        var nValue = selectedRadio.prop(\"value\");\n\n        if (self.value !== nValue) {\n          self.setValue(nValue);\n          self.setDisplayValue(nValue);\n\n          if (self.properties.submitOnChange) {\n            self.submitOnChange();\n          }\n        }\n      });\n\n    } else {\n      container.addClass(\"bz-rn-non-editable\");\n      self.input = control.append(\"<span class=\\\"bz-rn-non-editable bz-rn-align-class bz-rn-text\\\"></span>\").find(\"span\");\n    }\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return this.properties.editable ? $(\".bz-rn-yesno\", context) : $(context);\n  },\n\n  /**\r\n      * set the display value en the rendered control\r\n      * */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    self.setValue(value.toString().toLowerCase(), false);\n\n    if (properties.editable) {\n      var parsedValue = bizagi.util.parseBoolean(value);\n      self.input.find(\".bz-radio-true\").\n      prop(\"checked\", parsedValue === true).\n      toggleClass(\"bz-unchecked\", parsedValue !== true).\n      toggleClass(\"bz-check\", parsedValue === true);\n\n      self.input.find(\".bz-radio-false\").\n      prop(\"checked\", parsedValue === false).\n      toggleClass(\"bz-unchecked\", parsedValue !== false).\n      toggleClass(\"bz-check\", parsedValue === false);\n    } else {\n      this._super(value);\n    }\n  } });","/**\r\n*   Name: BizAgi Smartphone Render Check\r\n*   Author: Bizagi Mobile Team\r\n*   Comments: Check implementation for smartphone\r\n*/\n\n// Extends itself\nbizagi.rendering.check.extend(\"bizagi.rendering.check\", {}, {\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    self.configureHelpText();\n\n    //self.getArrowContainer().hide();\n    // Personalize display of render\n    self.element.find(\".bz-container-render-cell > .ui-bizagi-render-control\").addClass(\"bz-check-control\");\n    self.element.find(\".bz-container-render-cell > .ui-bizagi-label\").addClass(\"bz-check-label\");\n    self.element.find(\".bz-container-render-cell > .ui-bizagi-render-control\").insertBefore(self.element.find(\".bz-container-render-cell > .ui-bizagi-label\"));\n    self.input = self.getControl().find(\"input\");\n\n    if (properties.editable) {\n      container.addClass(\"bz-command-edit-inline\");\n\n      self.input.bind(\"click\", function () {\n        var isChecked = self.input.is(\":checked\");\n\n        self.setValue(isChecked, true);\n        isChecked ? self.input.removeClass(\"bz-unchecked\").addClass(\"bz-check\") : self.input.addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n\n        if (self.properties.submitOnChange) {\n          self.submitOnChange();\n        }\n\n        if (self.properties.required && !isChecked) {\n          var requiredElement = self.element.find(\".ui-bizagi-label .bz-rn-required\");\n          requiredElement.length > 0 ? requiredElement.show() : self.element.find(\".ui-bizagi-label\").prepend('<div class=\"bz-rn-required\"></div>');\n        }\n      });\n    } else {\n      container.addClass(\"bz-rn-non-editable\");\n    }\n  },\n\n  /* SET DISPLAY VALUE\r\n     ======================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n\n    self.setValue(value, false);\n\n    var parsedValue = \"\";\n    if (properties.editable) {\n      parsedValue = bizagi.util.parseBoolean(value);\n    } else {\n      parsedValue = bizagi.util.parseBoolean(self.properties.value);\n    }\n\n    self.input.prop(\"checked\", parsedValue === true);\n    self.input.toggleClass(\"bz-check\", parsedValue === true).toggleClass(\"bz-unchecked\", parsedValue !== true);\n  } });","/**\r\n *   Name: BizAgi Tablet Render list Extension\r\n *   Author: Cristian O\r\n *   Date: 2015 - Oct - 10\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from base list \nbizagi.rendering.list.extend(\"bizagi.rendering.list\", {}, {\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"readonly\");\n    var value = self.properties.value && self.hasValue() ? self.properties.value.value : \"- -\";\n\n    return $.kendoTmpl(template, { value: value });\n  },\n\n  renderSingle: function renderSingle() {\n    // Call combo postRender\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n\n    // Call base \n    this._super();\n\n    if (!self.properties.editable) {\n      // If isn't a editable control, then show a non editable span\n      container.addClass(\"bz-rn-non-editable\");\n\n      // Getting the input\n      self.list = control.find(\"span\");\n\n      self.list.attr(\"readonly\", \"readonly\");\n    } else {\n      // Apply plugin\n      self.list = $(\".ui-bizagi-render-list\", control);\n    }\n\n    self.configureListHandlers();\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self._super();\n\n    // Show clear icon\n    $.when(self.ready()).done(function () {\n      if (!self.hasValue()) {\n        self.getControl().find(\".bz-rn-input-selected\").html(\"-------------\");\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").hide(500);\n      } else {\n        self.getControl().find(\".bz-wp-list-clear-icon-list\").show(500);\n      }\n    });\n  },\n\n  /**\r\n      * Setting the control events\r\n      * */\n  configureListHandlers: function configureListHandlers() {\n    var self = this;\n    var control = self.getControl();\n\n    self.list.find(\".see-more-icon\").bind(\"click\", function () {\n      var template = self.renderFactory.getTemplate(\"listModalView\");\n      var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n      var data = {\n        \"items\": self.properties.data,\n        \"displayName\": self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation };\n\n      var modalView = $($.trim(modalViewTemplate(data)));\n\n      modalView.kendoMobileModalView({\n        close: function close() {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n\n          this.destroy();\n          this.element.remove();\n        },\n        useNativeScrolling: true,\n        modal: false });\n\n\n      self.configureModalViewHandlers(modalView);\n\n      self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      modalView.kendoMobileModalView(\"open\");\n    });\n\n    // Setting the initial selected display value\n    self.list.on(\"click\", \".bz-rn-regular-element\", function () {\n      var val = $(this).data(\"value\");\n      var label = $(this).text();\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.selectedValue = newValue.value;\n      self.setValue(newValue);\n      self.setDisplayValue(newValue);\n    });\n\n    // Set clear event\n    control.find(\".bz-rn-first-element-container\").on(\"click\", \".bz-wp-list-clear-icon-list\", function () {\n      var val = \"\";\n      var label = \"-------------\";\n\n      var newValue = { \"id\": val, \"value\": label };\n      self.setValue(newValue);\n      self.selectedValue = newValue.value;\n      self.setDisplayValue(newValue);\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n\n    var closeModalViewPromise = new $.Deferred();\n\n    //getting combo list elements\n    var container = inputContainer.find(\".ui-bizagi-render-list-elements li\");\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    //Closing modalview\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Filtering list\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind(\"change keypress keyup change\", function () {\n      self.filterList(this.value, container, inputContainer);\n    });\n\n    //Cleaning list\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind(\"click\", function () {\n      self.filterList(\"\", container, inputContainer);\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //Configuring list as a selectable element\n    self.modalViewList = $(\".ui-bizagi-render-list-elements\", inputContainer);\n    self.setModalViewDisplayValue();\n\n    //Setting the initial selected display value\n    self.modalViewList.on(\"click\", \"li\", function () {\n      self.modalViewList.find(\"li\").filter(function () {\n        if ($(this).hasClass(\"ui-selected\")) {\n          return $(this);\n        }\n      }).removeClass(\"ui-selected\");\n\n      $(this).addClass(\"ui-selected\");\n      $(\".bz-wp-modalview-header-input-search\", inputContainer).blur();\n    });\n\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      var selected = $(\"li.ui-selected\", self.modalViewList);\n      var _value = $(selected).data(\"value\");\n      var label = $(selected).text();\n\n      //Update internal value\n      if (typeof _value !== \"undefined\") {\n        var newValue = { \"id\": _value, \"value\": label };\n        self.setValue(newValue);\n        self.selectedValue = newValue.value;\n        self.setDisplayValue(newValue);\n      }\n    }).fail(function () {\n    });\n  },\n\n  /**\r\n      * Filtering list of elements\r\n      * */\n  filterList: function filterList(search, $li, inputContainer) {\n    if (search !== \"\") {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n    } else {\n      inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n    }\n\n    $li.filter(function () {\n      var stringContainer = $(this).text().toUpperCase();\n      var stringToSearch = search.toUpperCase();\n\n      if (stringContainer.indexOf(stringToSearch) >= 0) {\n        return $(this);\n      } else {\n        $(this).hide();\n      }\n    }).show();\n  },\n\n  /* SETS THE VALUE IN THE RENDERED CONTROL\r\n      =====================================================*/\n  /**\r\n                                                               *   Sets the value in the rendered control\r\n                                                               */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.properties.editable) {\n      if (typeof value !== \"undefined\") {\n        control.find(\".bz-rn-input-selected\").html(value.value);\n\n        if (value.value === \"-------------\" || value.value === \"\") {\n          control.find(\".bz-wp-list-clear-icon-list\").hide(500);\n        } else {\n          control.find(\".bz-wp-list-clear-icon-list\").show(500);\n        }\n      }\n    } else {\n      self.list.text(value.value);\n    }\n  },\n\n  /**\r\n      * Cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", value: \"\" };\n    var control = self.getControl();\n\n    self.setValue(value);\n    self.setDisplayValue(value);\n  },\n\n  /**\r\n      * Setting the selected element.\r\n      * */\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n\n    if (self.list && properties.editable &&\n    self.properties.value && typeof self.properties.value !== \"undefined\" &&\n    self.properties.value.id !== \"\") {\n      $(\"#ui-bizagi-list-\" + self.properties.value.id, self.modalViewList).addClass(\"ui-selected\");\n    }\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    // Call base\n    self._super();\n    // Nothing todo, all events apply in selectable plugin\n  },\n\n  /**\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    var self = this;\n    return self.selectedValue;\n  } });","/*\r\n *   Name: Bizagi Smartphone Render MultiSelect Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the MultiSelect render class to adjust to smartphone devices\r\n */\n\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", bizagi.rendering.render.base.prototype);\n// Extends itself\nbizagi.rendering.multiSelect.extend(\"bizagi.rendering.multiSelect\", {\n  MORE_OPTION_WIDTH: 40,\n  SEARCH_MIN_LENGTH: 1,\n  temporalElements: {} },\n{\n\n  /**\r\n   * Template method to implement in each device to customize each render after processed\r\n   */\n  renderSingle: function renderSingle() {\n    // Call base\n    this._super();\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    if (this.properties.editable) {\n      this.configureHandlers();\n    } else {\n      this.configureHandlersReadOnly();\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var $control = this.getControl();\n    $(\".bz-multiselect__arrow\", $control).\n    on(\"click\", this.openModalView.bind(this));\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li div.bz-btn-icn\", this.onUnselectElement.bind(this)).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n      */\n  configureHandlersReadOnly: function configureHandlersReadOnly() {\n    var $control = this.getControl();\n\n    $('ul.bz-multiselect__tags', $control).\n    on(\"click\", \"li.bz-multiselect__plus\", this.onShowSelectedElements.bind(this));\n  },\n\n  onUnselectElement: function onUnselectElement(ev) {\n    var $element = $(ev.target);\n    var idToRemove = $element.data(\"id\");\n\n    // Remove element\n    this.removeElement({ id: idToRemove });\n    this.addSelectedElements();\n  },\n\n  onShowSelectedElements: function onShowSelectedElements(ev) {\n    var self = this;\n    var $element = $(ev.currentTarget);\n    var index = $element.data('index');\n    var values = self.getDataValue();\n    var valuesToShow = (values || []).slice(index);\n    var template = this.renderFactory.getTemplate(\"list-multiselect-tags\");\n    var $listView = this.showFloatListView(template, {\n      datasource: valuesToShow,\n      editable: self.properties.editable });\n\n\n    var $tagElements = $('ul.bz-multiselect__tags', $listView);\n\n    $tagElements.on(\"click, mousedown\", \"li div.bz-btn-icn\", function (ev) {\n      self.onUnselectElement(ev);\n      $listView.remove();\n    });\n\n    $listView.on(\"closeView\", function () {\n      $tagElements.off(\"click\", \"li div.bz-btn-icn\", self.onUnselectElement.bind(self));\n      $listView.remove();\n    });\n  },\n\n  openModalView: function openModalView() {\n    //Creating modal view\n    var self = this;\n    //Reset the temporal array\n    self.Class.temporalElements = {};\n    var template = self.renderFactory.getTemplate('multiselectModalView');\n    var values = self.getDataValue();\n    var options = {\n      selected: values,\n      isChecked: function isChecked(id) {\n        return self.markAsChecked.call(this, id);\n      } };\n\n\n    this.getData().done(function (result) {\n      var data = {\n        'displayName': self.properties.displayName || \"\",\n        \"orientation\": self.properties.orientation,\n        \"datasource\": result,\n        \"options\": options };\n\n      try {\n        var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n        for (var i = 0, length = values.length; i < length; i++) {\n          self.Class.temporalElements[values[i].id] = values[i];\n        }\n        var modalView = $($.trim(modalViewTemplate(data)));\n        self.modalListHandlers(modalView);\n\n        modalView.kendoMobileModalView({\n          close: function close() {\n            self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n            this.destroy();\n            this.element.remove();\n          },\n          useNativeScrolling: true,\n          modal: false });\n\n\n        self.configureModalViewHandlers(modalView);\n\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        modalView.kendoMobileModalView('open');\n      } catch (e) {\n        bizagi.log(e.message);\n      }\n    });\n  },\n\n  /**\r\n      * Configure the modalView Handlers for the new combo control.\r\n      * */\n  configureModalViewHandlers: function configureModalViewHandlers(inputContainer) {\n    var self = this;\n    var $listContainer = inputContainer.find(\".bz-multiselect__list li\");\n    var closeModalViewPromise = new $.Deferred();\n\n    //Hide the clear text icon\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n\n    inputContainer.delegate(\"#ui-bizagi-cancel-button\", \"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Showing found results\n    inputContainer.find(\".bz-wp-modalview-header-input-search\").bind('keypress keyup', function () {\n      if (this.value !== \"\") {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").show(500);\n      } else {\n        inputContainer.find(\".bz-wp-modalview-header-cancel-search\").hide(500);\n        $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      }\n\n      // Getting and showing the data\n      self.filterList(this.value, $listContainer);\n    }).focus(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").addClass(\"searching\");\n    }).blur(function () {\n      inputContainer.find(\".filter-searchlist-modal-view-tags\").removeClass(\"searching\");\n    });\n\n    //Cleaning search\n    inputContainer.find(\".bz-wp-modalview-header-cancel-search\").bind('click', function () {\n      $(\"#ui-bizagi-wp-filter-results-multiselect-wrapper ul li\", inputContainer).show();\n      inputContainer.find(\".bz-wp-modalview-header-input-search\").val(\"\");\n      $(this).hide(500);\n    });\n\n    //when click on apply button\n    inputContainer.delegate(\".ui-bizagi-apply-button\", \"click\", function () {\n      closeModalViewPromise.resolve();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    inputContainer.find(\".bz-wp-modalview-close\").bind(\"click\", function () {\n      closeModalViewPromise.reject();\n      inputContainer.data(\"kendoMobileModalView\").close();\n    });\n\n    //Trigger delete event for tags\n    inputContainer.find(\".filter-searchlist-modal-view-tags\").on(\"click\", '.bz-rn-remove-tag-on-search-list', function () {\n      self.removeItem($(this), true);\n\n      var term = inputContainer.find(\".bz-wp-modalview-header-input-search\").val();\n\n      // Getting and showing the data\n      self.filterList(term, $listContainer);\n    });\n\n    $.when(closeModalViewPromise).done(function () {\n      self.addNewValuesToInput();\n      self.Class.temporalElements = {};\n    }).fail(function () {\n      self.Class.temporalElements = {};\n    });\n  },\n\n  /**\r\n      * Adding new values to input\r\n      * */\n  addNewValuesToInput: function addNewValuesToInput() {\n    var self = this;\n\n    //Create a temporal array\n    var tempArray = [];\n\n    $.each(self.Class.temporalElements, function (i, ele) {\n      tempArray.push(ele);\n    });\n\n    self.setValue(tempArray);\n    self.addSelectedElements();\n  },\n\n  /**\r\n      * Method to render non editable values\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Call base\n    this._super();\n  },\n\n  /**\r\n      * addSelectedElements\r\n      */\n  addSelectedElements: function addSelectedElements() {\n    var self = this;\n    var $control = self.getControl();\n    var values = self.getDataValue();\n    var totalValues = values.length;\n    var $tagsContainer = $('ul.bz-multiselect__tags', $control);\n    var editable = this.properties.editable;\n    $tagsContainer.empty();\n\n    if (totalValues > 0) {\n\n      var template = this.renderFactory.getTemplate(\"list-multiselect-tag\");\n\n      for (var i = 0; i < totalValues; i++) {\n        var item = values[i];\n        var data = { id: item.id, value: item.value, editable: editable };\n        var elementTemplate = kendo.template(template, { useWithBlock: false });\n        var $ChildToAdd = $($.trim(elementTemplate(data)));\n\n        $tagsContainer.append($ChildToAdd);\n\n        // Process the control in the layout\n        this.processControlLayout(this.properties.valueFormat || {});\n\n        if (!this.canAddMoreItems($tagsContainer)) {\n          // Remove last item added\n          $tagsContainer.\n          children().\n          last().\n          remove();\n\n          // Add the view mode item\n          var data = {\n            'value': totalValues - i,\n            'index': i };\n\n\n          var viewMoreTemplate = kendo.template(this.renderFactory.getTemplate(\"list-multiselect-view-more\"), { useWithBlock: false });\n          var $viewMore = $($.trim(viewMoreTemplate(data)));\n          $tagsContainer.append($viewMore);\n          break;\n        }\n      }\n    }\n\n  },\n\n  modalListHandlers: function modalListHandlers($floatListContext) {\n    var self = this;\n    var $listContainer = $floatListContext.find(\".bz-multiselect__list li\");\n    var checkbox = $listContainer.find(\"input[type=checkbox]\");\n\n    $floatListContext.find(\".bz-multiselect__search_input\").bind(\"change keypress keyup mousedown\", function (evt) {\n      evt.stopPropagation();\n\n      self.filterList(this.value, $listContainer);\n    });\n\n    checkbox.change(function () {\n      var $context = $(this);\n      var isChecked = $context.is(\":checked\");\n      var newValue = { id: $context.data(\"id\"), value: $context.data(\"value\") };\n\n      if (isChecked) {\n        self.addTemporalElement(newValue, false);\n      } else {\n        self.addTemporalElement(newValue, true);\n      }\n    });\n\n    $floatListContext.on(\"closeView\", function () {\n      self.closeFloatView();\n\n      $(document).unbind(\"mousedown.multiselect\");\n    });\n  },\n\n  addTemporalElement: function addTemporalElement(element, elementToRemove) {\n    var self = this;\n    if (elementToRemove) {\n      delete self.Class.temporalElements[element.id];\n    } else {\n      self.Class.temporalElements[element.id] = element;\n    }\n  },\n\n  showFloatListView: function showFloatListView(template, data) {\n    var self = this;\n    var $control = self.getControl();\n    var multiSelect = $(\".bz-multiselect\", $control);\n\n    var $containerControl = $control.closest(\".ui-bizagi-render-control\");\n    var modalViewTemplate = kendo.template(template, { useWithBlock: false });\n    var $floatList = $($.trim(modalViewTemplate(data))); //$.tmpl(template, data, options);\n    var widthControl = multiSelect.width();\n\n    $containerControl.append($floatList);\n\n    $floatList.width(widthControl);\n\n    $floatList.position({\n      my: \"left top\",\n      at: \"left bottom\",\n      of: multiSelect,\n      collision: \"fit\" }).\n    hide();\n\n    // Display view\n    $floatList.show();\n\n    // Stop bubbling outside the dropdown\n    $floatList.on(\"mousedown\", function (ev) {\n      ev.preventDefault();\n      return false;\n    });\n\n    // Add global handler to close the float view\n    $(document).one(\"mousedown.multiselect\", function (evt) {\n      $floatList.trigger('closeView');\n    });\n\n    return $floatList;\n  } });","/*  \r\n *   Name: BizAgi Smartphone Render list Extension\r\n*   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\n\n// Extends from base list\nbizagi.rendering.radio.extend(\"bizagi.rendering.radio\", {}, {\n\n  /* POSTRENDER\r\n                                                              ======================================================*/\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var deferred = $.Deferred();\n\n    self.getArrowContainer().hide();\n    $.when(self.renderControl()).done(function () {\n      self.input = self.combo = $(\".ui-bz-render-radio\", self.getControl());\n\n      if (self.value)\n      self.setValue(self.value, false);\n\n      if (properties.editable) {\n        container.addClass(\"bz-command-edit-inline\");\n\n        self.input.change(function () {\n          var selectedRadio = self.input.find(\"input:radio:checked\");\n          self.input.find(\".checked\").removeClass(\"checked\");\n          self.input.find(\".bz-check\").addClass(\"bz-unchecked\").removeClass(\"bz-check\");\n\n          selectedRadio.closest(\"div\").addClass(\"checked\");\n          selectedRadio.addClass(\"bz-check\");\n          selectedRadio.removeClass(\"bz-unchecked\");\n\n          var newValue = { id: selectedRadio.prop(\"value\"), value: selectedRadio.parent().text() };\n          self.setValue(newValue);\n\n          /*if (self.properties.submitOnChange) {\r\n                                       self.submitOnChange();\r\n                                   }*/\n        });\n      } else {\n        container.addClass(\"bz-rn-non-editable\");\n        self.input = self.combo = self.getControl().html(\"<span class=\\\"bz-rn-non-editable bz-rn-align-class bz-rn-text\\\"></span>\").find(\"span\");\n      }\n\n      deferred.resolve();\n\n    });\n\n    return deferred.promise();\n  },\n\n  /* SETS DISPLAY VALUE\r\n     ======================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n\n    if (value !== undefined && value.id != null) {\n      if (properties.editable) {\n        // Find the control to check where value is\n        var radioItem = self.input.find(\"input[type='radio'][value='\" + value.id + \"']\");\n        radioItem.prop(\"checked\", \"checked\");\n        radioItem.closest(\"div\").addClass(\"checked\");\n        radioItem.addClass(\"bz-check\").removeClass(\"bz-unchecked\");\n      } else {\n        // Find the control to check where value is\n        self.input.html(value.value ? value.value.toString() : \"\");\n        self.input.attr(\"id\", value.id);\n      }\n    }\n  },\n\n  /**\r\n      * Cleans current data\r\n      */\n  cleanData: function cleanData() {\n    var self = this;\n    var value = { id: \"\", label: \"\" };\n    var selectedItem = self.element.find(\".checked\").removeClass(\"checked\");\n\n    selectedItem.find(\".bz-rn-radio-item\").prop(\"checked\", false).removeClass(\"bz-check\").addClass(\"bz-unchecked\");\n    self.setValue(value, false);\n    self.setDisplayValue(value);\n  } });","/**\r\n *   Name: BizAgi Smartphone Render Cascading combo Extension\r\n *   Author: Oscar O\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to tablet devices\r\n */\n\n// Extends from base cascading combo, then apply tablet combo stuff\nbizagi.rendering.cascadingCombo.extend(\"bizagi.rendering.cascadingCombo\", {}, {\n\n  init: function init(params) {\n    var self = this;\n    self._super(params);\n    this.properties.data = this.properties.data || [];\n\n    self.bind(\"select\", function (ex, value) {\n      self.onComboChange(value);\n    });\n  },\n  /*\r\n     *\r\n     * */\n  renderReadOnly: function renderReadOnly() {\n    return bizagi.rendering.combo.prototype.renderReadOnly.apply(this, arguments);\n  },\n\n  /**\r\n      * Initilizing the combo control\r\n      * */\n  renderSingle: function renderSingle() {\n    var self = this;\n    self._super();\n\n    var parentCombo = self.getParentCombo();\n\n    if (parentCombo !== null && parentCombo.properties.type == \"cascadingCombo\") {\n      self.isDependant = true;\n      parentCombo.dependants.push(self);\n      if (self.getValue() != null) {\n        self.properties.parentComboValue = self.getValue().id;\n      } else {\n        self.initializingCascadingCombo = true;\n      }\n    }\n\n    self.initialValueSet = true;\n    $.when(bizagi.rendering.combo.prototype.renderSingle.apply(self, arguments)).\n    done(function () {\n      if (self.value && self.isDependant == false) {\n        self.triggerHandler(\"select\", self.value);\n      }\n      self.initialValueSet = false;\n    });\n  },\n\n  /**\r\n      * Postrender Method\r\n      * */\n  postRenderSingle: function postRenderSingle() {\n    bizagi.rendering.combo.prototype.postRenderSingle.apply(this, arguments);\n  },\n\n  renderEdition: function renderEdition() {\n    bizagi.rendering.combo.prototype.renderEdition.apply(this, arguments);\n  },\n\n  /**\r\n      * Setting the combo's handlers\r\n      * */\n  configureCombo: function configureCombo() {\n    bizagi.rendering.combo.prototype.configureCombo.apply(this, arguments);\n  },\n\n  configureModalViewHandlers: function configureModalViewHandlers() {\n    bizagi.rendering.combo.prototype.configureModalViewHandlers.apply(this, arguments);\n  },\n\n  filterList: function filterList() {\n    bizagi.rendering.combo.prototype.filterList.apply(this, arguments);\n  },\n\n  setModalViewDisplayValue: function setModalViewDisplayValue() {\n    bizagi.rendering.combo.prototype.setModalViewDisplayValue.apply(this, arguments);\n  },\n\n  /*\r\n      *   Sets the value in the rendered control\r\n      */\n  setDisplayValue: function setDisplayValue() {\n    bizagi.rendering.combo.prototype.setDisplayValue.apply(this, arguments);\n  },\n\n  setValue: function setValue(value, triggerEvents) {\n    var self = this;\n    triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\n\n    if (value === \"\") {\n      value = { id: \"\", value: \"\" };\n    }\n\n    if (!!value) {\n      if (self.value === null || self.value.id !== value.id) {\n        self.triggerHandler(\"select\", value);\n      }\n\n      this._super(value, triggerEvents);\n    }\n  },\n\n  /**\r\n      * Finds an element in the combo data values by id\r\n      * @param {int} id \r\n      * @returns {Object}\r\n      */\n  findDataValueById: function findDataValueById(id) {\n    return (this.properties.data || []).find(function (e) {\n      return e.id == id;\n    });\n  },\n\n  /**\r\n      * cleans the control's data\r\n      * */\n  cleanData: function cleanData() {\n    bizagi.rendering.combo.prototype.cleanData.apply(this, arguments);\n  },\n\n  /**\r\n      * cleans the control's data\r\n      * */\n  resetData: function resetData() {\n    bizagi.rendering.combo.prototype.resetData.apply(this, arguments);\n  },\n\n  processComboData: function processComboData(data) {\n    bizagi.rendering.combo.prototype.processComboData.apply(this, arguments);\n  },\n\n  validateValue: function validateValue(value) {\n    bizagi.rendering.combo.prototype.validateValue.apply(this, arguments);\n  },\n\n  /*\r\n      *   Returns the selected value in the template\r\n      */\n  getSelectedValue: function getSelectedValue() {\n    return bizagi.rendering.combo.prototype.getSelectedValue.call(this, arguments);\n  },\n\n  /*\r\n      *   Handler for combo change\r\n      */\n  onComboChange: function onComboChange(newValue) {\n    var self = this;\n    self.selectedValue = newValue.value;\n    var params = {};\n    params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = newValue.id;\n\n    $.each(this.dependants, function (key, dependant) {\n      dependant.properties.params = params;\n      dependant.properties.parentComboValue = newValue.id;\n\n      if (newValue.id == \"\") {\n        dependant.resetData();\n        dependant.setDisplayValue({ id: \"\", value: \"\" });\n      } else {\n        $.when(dependant.getData(params)).done(function (data) {\n          dependant.properties.data = data;\n          if (dependant.value !== null) {\n            var selected = dependant.findDataValueById(dependant.value.id);\n            if (selected) {\n              if (selected.id == \"\" && self.value && self.value.value == \"\") {\n                dependant.resetData();\n                dependant.setDisplayValue({ id: \"\", value: \"\" });\n              } else {\n                dependant.triggerHandler(\"select\", selected);\n              }\n            } else\n            {\n              dependant.setDisplayValue({ id: \"\", value: \"\" });\n              dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n            }\n          } else {\n            dependant.triggerHandler(\"select\", { id: \"\", value: \"\" });\n          }\n\n        });\n      }\n    });\n  },\n\n  getTemplateName: function getTemplateName() {\n    return \"combo\";\n  } });","/*\r\n*   Name: BizAgi Smartphone Collection Navigator Extension\r\n*   Author: Bizagi Bizagi Team\r\n*   Comments:\r\n*   -   This script will redefine the collection Navigator class to adjust to smartphone devices\r\n*/\n\nbizagi.rendering.collectionnavigator.extend(\"bizagi.rendering.collectionnavigator\", {}, {\n\n  renderSingle: function renderSingle() {\n\n    var self = this;\n    var container = self.getContainerRender();\n\n    container.addClass(\"bz-command-not-edit\");\n  } });","/*\r\n*   Name: BizAgi smartphones Render Hidden Extension\r\n*   Author: RicharU based on Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the hidden render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.hidden.extend(\"bizagi.rendering.hidden\", {}, {\n  /**\r\n                                                                 * Returns the html templated element\r\n                                                                 * @returns {} \r\n                                                                 */\n  render: function render() {\n    var self = this;\n\n    return self.renderSingle();\n  },\n\n  /**\r\n      * Returns the in-memory processed element\r\n      * @returns {} \r\n      */\n  renderSingle: function renderSingle() {\n    var self = this;\n    if (self.getMode() === \"design\") {\n      return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\n    } else {\n      return \"<div />\";\n    }\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {} \r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base\n    self._super();\n\n    // Set the initial value\n    if (properties.value !== undefined) {\n      self.setDisplayValue(properties.value);\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control\r\n      * @param {} value \r\n      * @returns {} \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    self.setValue(value, false);\n  } });","/**\r\n *   Name: Bizagi smartphone Render Upload Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the upload render class to adjust to smartphones devices\r\n */\n\n// Extends itself\nbizagi.rendering.upload.extend(\"bizagi.rendering.upload\", {\n  BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\n  BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\n  QUALITY_PICTURE: 50,\n  LIMIT: 1, // limit: The maximum number of multimedia files in the device user can record in a single capture operation.\n  EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\n  EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\n  EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\n  EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"] },\n{\n\n  /**\r\n   * Template method to implement in each children to customize each control\r\n   * @returns {}\r\n   */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"upload\");\n    var allow_upload = true;\n\n    self.checkExtensions();\n\n    if (bizagi.util.isCordovaSupported()) {\n      allow_upload = self.validOptions && (self.validOptions.image || self.validOptions.video);\n    }\n\n    // Render template\n    var html = $.kendoTmpl(template, {\n      xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\n      editable: self.properties.editable && allow_upload,\n      noFiles: self.filesCount === 0,\n      allow_upload: allow_upload,\n      nonSupportedExtension: self.nonSupportedExtension,\n      uploadOptions: self.upload_options,\n      allowSendInMail: self.properties.allowSendInMail });\n\n\n    // Render current children\n    var items = \"\";\n    for (var i = 0, filesCount = self.filesCount; i < filesCount; i++) {\n      var file = { id: self.files[i][0], fileName: self.files[i][1] };\n      var item = self.renderUploadItem(file);\n      items += item;\n    }\n\n    html = self.replaceFilesHtml(html, items);\n    return html;\n  },\n\n  /**\r\n      * Renders a single upload item\r\n      * @param {} file\r\n      * @returns {}\r\n      */\n  renderUploadItem: function renderUploadItem(file) {\n    var self = this;\n    var mode = self.getMode();\n    var image = self.checkImageFile(file.fileName);\n    var template = self.renderFactory.getTemplate(\"uploadItem\");\n\n    // Don't render urls when not running in execution mode\n    var url = mode !== \"execution\" ? \"javascript:void(0);\" : self.buildItemUrl(file);\n\n    var html = $.kendoTmpl(template, {\n      url: url,\n      image: image,\n      allowDelete: self.properties.allowDelete,\n      editable: self.properties.editable,\n      filename: file.fileName,\n      id: file.id,\n      mode: mode,\n      isCordovaSupported: bizagi.util.isCordovaSupported() });\n\n\n    return html;\n  },\n\n  /**\r\n      * Template method to implement in each device to customize each render after processed\r\n      * @returns {}\r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var containerRender = self.getContainerRender();\n\n    self.configureHelpText();\n\n    self.itemAddfile = $(\".bz-rn-upload-show-menu\", self.getControl());\n\n    if (!self.properties.editable || self.itIsMaxNumberFilesReached() || !bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported()) {\n      self.itemAddfile.hide();\n    }\n\n    if (!self.properties.editable || !bizagi.util.isCordovaSupported() && !bizagi.util.media.fileAPISupported()) {\n      containerRender.addClass(\"bz-rn-non-editable\");\n    } else {\n      containerRender.addClass(\"bz-command-edit-inline\");\n      self.buildUploadControl();\n    }\n\n    self.addInteractions();\n  },\n\n  buildUploadControl: function buildUploadControl() {\n    var self = this;\n    var container = self.getControl();\n    var fileInput = $(\".bz-rn-upload-web\", container);\n\n    if (bizagi.util.isCordovaSupported()) {\n      // Upload image\n      $(self.itemAddfile).actionSheet({\n        actions: self.upload_options,\n        actionClicked: function actionClicked(action) {\n          // Action for web file upload\n          if (action.guid === 5) {\n            fileInput.click();\n          } else {\n            self.handlerUploadImage(action.guid);\n          }\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n\n      // Resolution image\n      $(\".bz-rn-upload-resolution-container\", container).actionSheet({\n        actions: bizagi.util.media.getImageResolutionItems(),\n        actionClicked: function actionClicked(action) {\n          bizagi.loading.start();\n          $.when(self.handlerResolutionUpload(action.guid)).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n    } else {\n      $(self.itemAddfile).click(function () {\n        fileInput.click();\n      });\n    }\n\n    fileInput.on(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    // Attach event to web upload-control\n    fileInput.on(\"change\", function () {\n      var that = this;\n      var dataFile = that.files[0];\n      var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSAUDIO, self.Class.EXTENSIONSVIDEO);\n\n      dataFile.fullPath = that.value;\n\n      bizagi.loading.start();\n\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.processUploadFile(dataFile)).\n        then(function (result) {\n          self.onUploadFileCompleted(self, JSON.parse(decodeURIComponent(result)));\n        }).fail(function (error) {\n          if (error.statusText !== \"Unauthorized\" || error.statusText.toLowerCase() !== \"ok\") {\n            bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\n          }\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      } else {\n        bizagi.loading.stop();\n      }\n\n      // Clearing input Values\n      $(that).val(\"\");\n    });\n\n    // Check files number\n    self.checkMaxFiles();\n\n    // Attach delete option\n    self.attachDeleteHandler();\n  },\n\n  /**\r\n      * Add the interactions to the upload control items\r\n      * @return {}\r\n      */\n  addInteractions: function addInteractions() {\n    var self = this;\n\n    // Handler to download the file\n    $(\"ul.files\", self.getControl()).on(\"click\", \".ui-bizagi-render-link.button\", function () {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n        self.executeFormFailHandler(error);\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Handler of delete action\r\n      * @returns {}\r\n      */\n  attachDeleteHandler: function attachDeleteHandler() {\n    var self = this;\n\n    $(\".bz-rn-upload-delete-icon\", self.getControl()).on(\"click\", function () {\n      var item = $(this).parent(\".ui-bizagi-render-upload-item\");\n      var file = item.data();\n      $.when(self.deleteUploadItem(item, file.id)).\n      done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  /**\r\n      * Handler of upload image\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerUploadImage: function handlerUploadImage(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    switch (actionSelected) {\n      case 2:\n        navigator.camera.getPicture(function (dataImage) {\n          self.dataImage = dataImage;\n          var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            //Gets the real properties for the file\n            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage)).\n            then(function (fileData) {\n              self.fileProperties = fileData;\n              if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.handlerResolutionUpload(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // force click to show actionsheet menu\n                  $(\".bz-rn-upload-resolution-container\", self.getContainerRender()).click();\n                }\n              }\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY });\n\n        break;\n      case 1:\n        navigator.camera.getPicture(function (dataImage) {\n          bizagi.loading.start();\n          $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).\n          then(function () {\n            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n              self.fileProperties = fileData;\n              return self.saveImage(self, dataImage);\n            });\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        },\n        self.onFail.bind(self),\n        {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: navigator.camera.PictureSourceType.CAMERA,\n          mediaType: navigator.camera.MediaType.PICTURE,\n          destinationType: Camera.DestinationType.FILE_URI,\n          correctOrientation: true,\n          targetWidth: 1280,\n          targetHeight: 960 });\n\n        break;\n      case 3:\n        navigator.device.capture.captureVideo(function (dataVideo) {\n          bizagi.loading.start();\n\n          $.when(bizagi.util.media.checkMaxSizeVideo(dataVideo, self.properties)).\n          then(function () {\n            return self.saveVideo(self, dataVideo);\n          }).always(function () {\n            bizagi.loading.stop();\n          });\n        }, self.onFail.bind(self), { limit: self.Class.LIMIT });\n        break;}\n\n  },\n\n  /**\r\n      * Handler of resolution upload\r\n      * @param {} ordinal\r\n      * @returns {}\r\n      */\n  handlerResolutionUpload: function handlerResolutionUpload(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    //if original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n      return self.saveImage(self, self.dataImage);\n    } else {\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n        return self.saveImage(self, self.dataImage);\n      });\n    }\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * CheckImageFile\r\n      * @param {} fileName\r\n      * @returns {}\r\n      */\n  checkImageFile: function checkImageFile(fileName) {\n    var self = this;\n    var validExtensions = self.Class.EXTENSIONSIMG;\n\n    if (!fileName || bizagi.util.isObjectEmpty(fileName)) return false;\n\n    for (var i = 0, length = validExtensions.length; i < length; i++) {\n      var image = fileName.indexOf(\".\" + validExtensions[i]);\n\n      if (image >= 0) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\r\n      * Templates\r\n      * @returns {}\r\n      */\n  getTemplateName: function getTemplateName() {\n    return \"upload\";\n  },\n\n  getTemplateItemName: function getTemplateItemName() {\n    return \"uploadItem\";\n  },\n\n  /**\r\n      * Send image using HTTP\r\n      * @param {} context\r\n      * @param {} dataImage\r\n      * @returns {}\r\n      */\n  saveImage: function saveImage(context, dataImage) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n    var fileName = self.fileProperties.name;\n\n    if (self.editedImageURL) {\n      params.dataFile = self.editedImageURL;\n    } else if (self.fileProperties) {\n      params.dataFile = self.fileProperties.url;\n    }\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileKey = \"file\";\n    params.options.fileName = fileName;\n    params.options.mimeType = \"image/jpeg\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n\n    //Cleans variables related previous uploads\n    self.editedImageURL = null;\n    self.fileProperties = null;\n\n    // Fix android 4.4 getting images from recent folder\n    params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n    return $.when(bizagi.util.media.uploadFile(params)).then(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * saveVideo\r\n      * @param {} context\r\n      * @param {} dataVideo\r\n      * @returns {}\r\n      */\n  saveVideo: function saveVideo(context, dataVideo) {\n    var self = context;\n    var params = {};\n    var addParams = self.buildAddParams();\n\n    addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n\n    params.data = addParams;\n    params.options = new FileUploadOptions();\n    params.options.fileName = dataVideo[0].name;\n    params.options.mimeType = \"video/quicktime\";\n    params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n    params.options.addUrl = self.properties.addUrl;\n    params.dataFile = dataVideo[0].fullPath;\n\n    return $.when(bizagi.util.media.uploadFile(params)).then(function (r) {\n      var response = JSON.parse(decodeURIComponent(r.response));\n      if (response.type === \"error\") {\n        bizagi.showMessageBox(response.message, response.errorType);\n      } else {\n        self.onUploadFileCompleted(context, response);\n      }\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    });\n  },\n\n  /**\r\n      * Management fail messages\r\n      */\n  onFail: function onFail(error) {\n    var messageError = bizagi.util.processFailMessage(error);\n\n    bizagi.loading.stop();\n\n    if (typeof messageError == \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\n      var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\n      var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\n\n      bizagi.showMessageBox(message);\n    }\n  },\n\n  /**\r\n      * onUploadFileCompleted\r\n      * @param {} context\r\n      * @param {} response\r\n      * @returns {}\r\n      */\n  onUploadFileCompleted: function onUploadFileCompleted(context, result) {\n    var self = context;\n    var control = self.getControl();\n    var uploadWrapper = $(\".ui-bizagi-render-upload-container .files\", control);\n\n    if (result.id && result.fileName) {\n      // Locate it before the upload wrapper\n      var newItem = self.renderUploadItem(result);\n      uploadWrapper.append(newItem);\n\n      // Increment counter\n      self.filesCount = self.filesCount + 1;\n\n      // Copy the files value but not its reference\n      var files = self.files.slice();\n\n      //Add the new item to this temporal array\n      files.push([result.id, result.fileName]);\n\n      // Update value\n      self.setValue(files, true);\n\n      // Check maxFiles\n      self.checkMaxFiles();\n\n      if (self.properties.allowDelete && self.properties.editable) {\n        self.attachDeleteHandler();\n      }\n\n      self.editedImageURL = null;\n    } else {\n      bizagi.showMessageBox(result.message, \"Error\");\n    }\n  },\n\n  /**\r\n     * Checks if the control data is valid\r\n     * @returns Boolean\r\n     */\n  isValid: function isValid(invalidElements) {\n    var self = this;\n    //Call Base\n    var bValid = self._super(invalidElements);\n\n    if (bValid) {\n      // Clear error message\n      self.setValidationMessage(\"\");\n    }\n\n    return bValid;\n  },\n\n  /**\r\n      * Check maximum number of files\r\n      * @returns {}\r\n      */\n  checkMaxFiles: function checkMaxFiles() {\n    var self = this;\n    var properties = self.properties;\n    var control = self.getControl();\n    var maxFiles = properties.maxfiles;\n\n    var actualFiles = properties.value ? properties.value.length : 0;\n\n    if (properties.editable) {\n      if (maxFiles !== 0 && self.filesCount >= maxFiles && actualFiles >= maxFiles) {\n        self.itemAddfile.hide();\n      } else {\n        self.itemAddfile.show();\n      }\n    } else {\n      //Checks if the files count is equals to 0, to show the no files dialog\n      if (self.filesCount == 0) {\n        $(\"#no-files\", control).show();\n      }\n    }\n  },\n\n  /**\r\n      * Check allow extensions and define possible choices\r\n      * @returns {}\r\n      */\n  checkExtensions: function checkExtensions() {\n    var self = this;\n    var validExtensions = self.properties.validExtensions || \"\";\n\n    self.validOptions = { audio: false, video: false, image: false, file: false };\n\n    // Preprocess the extensions string\n    validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\n\n    //Helps to get the non-supported extensions for mobile\n    var nonSupportedExtensionsArr = [];\n\n    // Initizalice the nonSupportedExtension element\n    self.nonSupportedExtension = \"\";\n\n    if (typeof validExtensions === \"undefined\" || validExtensions === \"\") {\n      self.validOptions = {\n        video: true,\n        image: true,\n        file: true };\n\n    } else {\n      validExtensions = validExtensions.split(\";\");\n\n      if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\n        self.validOptions.video = true;\n        self.validOptions.image = true;\n      } else {\n        for (var i = 0, length = validExtensions.length; i < length; i++) {\n          validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\n\n          if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.file = true;\n          } else if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.image = true;\n          } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\n            self.validOptions.video = true;\n          } else {\n            //If the extension is not part or any category, it is stored in nonSupportedExtensions array\n            nonSupportedExtensionsArr.push(validExtensions[i]);\n          }\n        }\n      }\n    }\n\n    if (!self.validOptions.file && !self.validOptions.image && !self.validOptions.video) {\n      if (typeof self.itemAddfile !== \"undefined\") {\n        self.itemAddfile.hide();\n      }\n    }\n\n    // Get upload options\n    self.getUploadChoices();\n\n    // Adjust file extension, in order to make it multiline & Stores the non-supported extensions\n    self.nonSupportedExtension = nonSupportedExtensionsArr.join(\", \") || \"\";\n  },\n\n  /**\r\n      * Check if the maximun number of files than can be uploaded has been reached\r\n      * @returns {}\r\n      */\n  itIsMaxNumberFilesReached: function itIsMaxNumberFilesReached() {\n    var maxFiles = this.properties.maxfiles;\n    var actualFiles = this.properties.value ? this.properties.value.length : 0;\n\n    return maxFiles !== 0 && actualFiles >= maxFiles;\n  },\n\n  /**\r\n      * Build add params to send to the server\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(prefix + \"xpath\", self.getUploadXpath());\n    formData.append(prefix + \"idRender\", self.properties.id);\n    formData.append(prefix + \"xpathContext\", self.properties.xpathContext || this.getXpathContext());\n    formData.append(prefix + self.Class.BA_PAGE_CACHE, self.properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.properties.xpath, dataFile);\n\n    if (self.properties.contexttype) {\n      formData.append(prefix + \"contexttype\", self.properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n  },\n\n  /**\r\n      * Get the XpathContext in a grid\r\n      */\n  getXpathContext: function getXpathContext() {\n    var self = this;\n    if (self.grid) {\n      var surrogateKey = this.surrogateKey || \"\";\n      var self = this;\n      return self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Process an upload file into the server\r\n      * @param {} context\r\n      * @param {} dataFile\r\n      * @returns {}\r\n      */\n  processUploadFile: function processUploadFile(dataFile) {\n    var data = { url: this.properties.addUrl, formData: this.buildAddFileParams(dataFile) };\n    return this.dataService.processUploadFile(data);\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    var items = $(\".ui-bizagi-render-upload-item\", self.getControl());\n\n    items.each(function (index, item) {\n      item = $(item);\n      var file = item.data();\n\n      $.when(self.deleteUploadItem(item, file.id)).done(function () {\n        // Remove item\n        item.hide();\n        item.remove();\n\n        // Update value\n        self.setValue(self.files, false);\n\n        // Check maxFiles\n        self.checkMaxFiles();\n\n        // Trigger change\n        self.triggerRenderChange();\n      });\n    });\n  },\n\n  getUploadChoices: function getUploadChoices() {\n    var self = this;\n    var itemsUpload = [];\n\n    // Add upload options\n    if (self.validOptions.file && bizagi.util.media.fileAPISupported() && bizagi.util.isAndroidDevice() && !bizagi.util.isCordovaSupported()) {\n      // Upload any file\n      itemsUpload.push({ \"guid\": 5, \"displayName\": bizagi.localization.getResource(\"render-upload-link-label\") });\n    }\n\n    if (bizagi.util.isCordovaSupported()) {\n      if (self.validOptions.image) {\n        // Take photo, Choose photo\n        itemsUpload.push({\n          \"guid\": 1,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") });\n\n        itemsUpload.push({\n          \"guid\": 2,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") });\n\n      }\n\n      if (self.validOptions.video) {\n        // Take video\n        itemsUpload.push({\n          \"guid\": 3,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\") });\n\n      }\n    }\n\n    // Stores the upload options\n    self.upload_options = [].concat(itemsUpload);\n  } });","/*\r\n*   Name: Bizagi Smartphone Render Grid Extension\r\n*   Author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n*   Comments:\r\n*   -   This script will redefine the grid render class to adjust to smartphone devices\r\n*/\n\n// Extends itself\nbizagi.rendering.render.extend(\"bizagi.rendering.grid.beta\", {}, {\n  init: function init(params) {\n    var self = this;\n\n    self.params = params;\n\n    // Call base\n    self._super(params);\n  },\n\n  /**\r\n      * Returns the grid template to be used\r\n      * @returns {} \r\n      */\n  getGridTemplate: function getGridTemplate() {\n    return this.renderFactory.getTemplate(\"grid-control\");\n  },\n\n  /**\r\n      * Applies the template to the render and returns the resolved element\r\n      * @param {} template \r\n      * @returns {} \r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this;\n    var properties = self.properties;\n    var orientation = self.properties.orientation;\n\n    // TODO: helptext\n    return $.kendoTmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      displayName: bizagi.util.encodeXpath(properties.displayName),\n      orientation: orientation });\n\n  },\n\n  /**\r\n      * Template method to implement in each children to customize each control\r\n      * @returns {} Returns a promise that will be resolved when all the columns has been loaded\r\n      */\n  renderControl: function renderControl() {\n    var self = this;\n    var defer = new $.Deferred();\n    var template = self.getGridTemplate();\n\n    // Render template\n    var html = self.applyTemplate(template);\n    defer.resolve(html);\n\n    return defer.promise();\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var container = self.getContainerRender();\n\n    container.addClass(\"bz-command-edit-inline\");\n    container.find(\".ui-bizagi-label\").hide();\n    self.getArrowContainer().hide();\n\n    // Call base \n    self._super();\n\n    // Render Edition       \n    $(self.element).on(\"click\", function (e) {\n      bizagi.loading.start();\n      setTimeout(function () {\n        $.when(self.renderEdition()).\n        then(function (gridView) {\n          gridView.postRenderSingle();\n        });\n      }, 1);\n\n    });\n  },\n\n  renderEdition: function renderEdition() {\n    var self = this;\n    var control = self.getControl();\n    var deferred = $.Deferred();\n\n    self.params.pane = control.closest('div[data-role=\"pane\"]');\n\n    // Render grid view        \n    var grid = new bizagi.rendering.smartphone.helpers.grid(self.params);\n    deferred.resolve(grid);\n\n    return deferred.promise();\n  } });","/*\r\n *   Name: Bizagi smartphone view form implementation\r\n *   Author: Richar Urbano <Richar.Urbano@Bizagi.com>\r\n *   Comments:\r\n *   -   Serves as a view form that can render a inner grid form\r\n */\nbizagi.rendering.grid.extend(\"bizagi.rendering.smartphone.helpers.grid\", {\n  GRID_PAGE_SIZE: 10 },\n{\n\n  /**\r\n   * init\r\n   * @param {} params\r\n   * @returns {}\r\n   */\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    if (typeof params.pane !== \"undefined\") {\n      self.pane = params.pane;\n      //self.pane = params.pane.data(\"kendoMobilePane\");\n    } else {\n      console.warn(\"Es necesario asignar un pane a la forma {pane: $pane} para evitar problemas de navegacin entre vistas de Kendo\");\n    }\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    self._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    self.cellMetadata = {};\n\n    // Fill default properties\n    var properties = self.properties;\n    //var form = self.getFormContainer();\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n\n    // Editable property\n    // Revisar base para mejorar comportamiento cuando esta en false los elementos\n    $.each(self.columns, function () {\n      if (self.properties && self.properties.editable) {\n        self.properties.editable = properties.allowEdit === true;\n      }\n    });\n\n    // Create container & Render template\n    var template = self.getViewTemplate();\n    self.gridView = $(self.applyTemplate(template));\n    self.pane.append(self.gridView);\n\n    // <stretch> If set to true, the view will stretch its child contents to occupy the entire view,\n    // while disabling kinetic scrolling. Useful if the view contains an image or a map.\n    // <useNativeScrolling> If set to true, the view will use the native scrolling available in the current platform\n    self.view = new kendo.mobile.ui.View(self.gridView, {\n      \"useNativeScrolling\": false,\n      stretch: true,\n      init: function init() {\n        self.attachHandlers();\n      } });\n\n\n\n    self.scrollContent = $(\"#\" + bizagi.util.encodeXpath(properties.xpath), self.view.contentElement());\n  },\n\n  /**\r\n      * Update or init the element data\r\n      * @param {} data\r\n      * @returns {}\r\n      */\n  initializeData: function initializeData(data) {\n    var self = this;\n\n    // Create a single instance for each cell\n    data.properties.singleInstance = false;\n\n    // Call base\n    self._super(data);\n  },\n\n  /**\r\n      * Returns the view template to be used\r\n      * @returns {}\r\n      */\n  getViewTemplate: function getViewTemplate() {\n    return this.renderFactory.getTemplate(\"grid-view\");\n  },\n\n  /**\r\n      * Applies the template to the render and returns the resolved element\r\n      * @param {} template\r\n      * @returns {}\r\n      */\n  applyTemplate: function applyTemplate(template) {\n    var self = this;\n    var properties = self.properties;\n\n    // id + other column\n    var allowFilter = self.columns.length > 2;\n\n    // Localstorage filter\n    bizagi.util.removeItemLocalStorage(\"grid.filter.\" + properties.id);\n    bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, null);\n\n    return $.kendoTmpl(template, {\n      id: bizagi.util.encodeXpath(properties.xpath),\n      title: properties.displayName,\n      allowAdd: properties.allowAdd,\n      allowFilter: allowFilter });\n\n  },\n\n  /**\r\n      * Method to attach any handler to the view\r\n      * @returns {}\r\n      */\n  attachHandlers: function attachHandlers() {\n    var self = this;\n\n    $(\".bz-rn-view-options\", self.gridView).on(\"click\", function (evt) {\n      evt.stopPropagation();\n\n      self.processAction($(this).attr(\"data-action\"));\n    });\n  },\n\n  /**\r\n      *  Process an action in order to do something with the view\r\n      * @param {} action\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  processAction: function processAction(action, params) {\n    var self = this;\n\n    if (action === \"close\") {\n      self.onClose();\n    }\n\n    if (action === \"add\") {\n      self.addRow();\n    }\n\n    if (action === \"filter\") {\n      self.onFilterRow();\n    }\n  },\n\n  /**\r\n      * Go back and destroy\r\n      * @returns {}\r\n      */\n  onClose: function onClose() {\n    var self = this;\n    var properties = self.properties;\n\n    // Localstorage filter\n    bizagi.util.removeItemLocalStorage(\"grid.filter.\" + properties.id);\n\n    self.pane.data(\"kendoMobilePane\").navigate(\"#:back\");\n    self.view.destroy();\n    self.view.element.remove();\n  },\n\n  onFilterRow: function onFilterRow() {\n    var self = this;\n\n    var title = \"Column settings\";\n    var action = \"FILTER\";\n    var modalTemplate = self.renderFactory.getTemplate(\"grid-modal-filter\");\n    var columnFilter = self.buildColumnFilter();\n    var modalFilterTemplate = kendo.template(modalTemplate, { useWithBlock: false });\n    var modalFilter = $(modalFilterTemplate({ list: columnFilter, title: title, action: action }).trim());\n\n    modalFilter.kendoMobileModalView({\n      close: function close() {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true,\n      modal: false });\n\n\n    self.attachModalFilterHandlers(modalFilter);\n    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    modalFilter.kendoMobileModalView(\"open\");\n  },\n\n  /**\r\n      * Creates the column filter\r\n      * @returns {}\r\n      */\n  buildColumnFilter: function buildColumnFilter() {\n    var self = this;\n    var properties = self.properties;\n    var columnFilter = [];\n\n    // Localstorage filter\n    var localstorage = bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id) ? JSON.parse(bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id)) : null;\n    var columns = localstorage ? localstorage : self.buildColumns;\n\n    $.each(columns, function (index, column) {\n      if (!column.key && !column.hidden) {\n        column.active = typeof column.active !== \"undefined\" ? column.active : true;\n        columnFilter.push(column);\n      }\n    });\n\n    bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, JSON.stringify(columnFilter));\n\n    return columnFilter;\n  },\n\n  /**\r\n      * Attach events to modalview\r\n      * @param {} modalContainer\r\n      * @returns {}\r\n      */\n  attachModalFilterHandlers: function attachModalFilterHandlers(modalContainer) {\n    var self = this;\n    var properties = self.properties;\n\n    var modalListContainer = modalContainer.find(\".bz-rn-modal-filter-content-list\");\n\n    // Close modalview\n    modalContainer.on(\"click\", \".bz-rn-modal-filter-header-title-cancel\", function () {\n      modalContainer.kendoMobileModalView(\"close\");\n    });\n\n    modalContainer.on(\"click\", \".bz-rn-modal-filter-footer-action\", function () {\n      var localstorage = bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id) ? JSON.parse(bizagi.util.getItemLocalStorage(\"grid.filter.\" + properties.id)) : null;\n      //bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, JSON.stringify(columnFilter));\n\n      //var items = modalListContainer.find(\"input:checkbox:checked\");\n      var showHeaders = modalListContainer.find(\"input\").map(function () {\n        var that = this;\n        return { index: $(that).data(\"index\"), active: that.checked };\n      });\n\n      $.each(showHeaders, function (index, item) {\n        var cssIndex = item.index + 1;\n\n        localstorage[index].active = item.active;\n\n        var tags = $(\".bz-rn-grid-table th:nth-child(\" + cssIndex + \"), .bz-rn-grid-table td:nth-child(\" + cssIndex + \")\");\n        if (item.active) {\n          tags.show();\n        } else {\n          tags.hide();\n        }\n      });\n\n      bizagi.util.setItemLocalStorage(\"grid.filter.\" + properties.id, JSON.stringify(localstorage));\n      modalContainer.kendoMobileModalView(\"close\");\n    });\n\n    modalListContainer.on(\"click\", \"input\", function () {\n      var that = this;\n\n      if (modalListContainer.find(\"input:checkbox:checked\").length > 0) {\n        var radioSelected = $(that).is(\":checked\");\n\n        radioSelected ?\n        $(that).removeClass(\"bz-full-ball\").addClass(\"bz-check\") :\n        $(that).addClass(\"bz-full-ball\").removeClass(\"bz-check\");\n      } else {\n        $(that).prop(\"checked\", true);\n      }\n    });\n  },\n\n  /* RENDERS GRID\r\n      =====================================================*/\n\n  /**\r\n                                                               * postRenderSingle\r\n                                                               * @returns {}\r\n                                                               */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    container.addClass(\"bz-command-edit-inline\");\n\n    if (self.properties.helpText !== \"\") {\n      control.addClass(\"bz-rn-grid-contains-help-text\");\n    }\n\n    // Hide the standar label\n    self.getContainerRender().find(\".ui-bizagi-label\").hide();\n    self.getArrowContainer().hide();\n\n    // Call base\n    self._super();\n\n    // Apply plugin\n    self.applyGridPlugin();\n\n    // Set initial data\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n\n    if (!properties.skipInitialLoad) {\n      if (properties.data) {\n        if (properties.data === \"\" || properties.data.rows.length === 0 && properties.data.page > 1) {\n          self.fetchData(undefined, self.sortBy, self.sortType);\n        } else {\n          self.updateData(properties.data);\n\n          // Trigger change in order to start up the actions when the controls is ready\n          $.when(self.ready()).\n          done(function () {\n            self.triggerRenderChange({ changed: false });\n            self.pane.data(\"kendoMobilePane\").navigate(self.view.id);\n\n            self.configureHeaderAndFooterFixed();\n            self.attachScrollHandler();\n            self.endLoading();\n          });\n        }\n      } else {\n        self.fetchData(properties.page, properties.sortBy, properties.sortOrder);\n      }\n    }\n  },\n\n  /**\r\n      * Method to attach any handler to the Scroller\r\n      * @returns {}\r\n      */\n  attachScrollHandler: function attachScrollHandler() {\n    var self = this;\n    var properties = self.properties;\n    var scrollLeft = 0;\n    var scrollTop = 0;\n\n\n    if (properties.data && properties.data.records === 0) {\n      return;\n    }\n\n    var scroller = self.view.content.find(\".bz-rn-grid-scroll-content\").data(\"kendoMobileScroller\");\n\n    if (scroller) {\n      scroller.reset();\n    }\n\n    var tableLeft = self.view.content.find(\".left-table\").get(0);\n    var scrollHeader = self.view.content.find(\".bz-rn-grid-scroll-header\").get(0);\n\n    scroller.bind(\"scroll\", function (event) {\n      var left = event.scrollLeft;\n      var top = event.scrollTop;\n\n      if (left !== scrollLeft) {\n        var transformLeft = \"translateX(\" + left * -1 + \"px)\";\n        scrollHeader.style.transform = transformLeft;\n        scrollHeader.style.webkitTransform = transformLeft;\n        scrollHeader.style.OTransform = transformLeft;\n\n        scrollLeft = left;\n      }\n\n      if (top !== scrollTop) {\n        var transformTop = \"translateY(\" + top * -1 + \"px)\";\n        tableLeft.style.transform = transformTop;\n        tableLeft.style.webkitTransform = transformTop;\n        tableLeft.style.OTransform = transformTop;\n\n        scrollTop = top;\n      }\n    });\n  },\n\n  /**\r\n      * configureFixedHeaders\r\n      * @returns {}\r\n      */\n  configureHeaderAndFooterFixed: function configureHeaderAndFooterFixed() {\n    var self = this;\n\n    var pivot;\n    var i = -1;\n    var properties = self.properties;\n\n    if (properties.data && properties.data.records === 0) return;\n\n    var tbody = self.scrollContent.find(\".bz-rn-grid-body\");\n    var cols = $(\"tr:first-child td\", tbody);\n    var colgroup = $(\"<colgroup></colgroup>\");\n\n    while (pivot = cols[++i]) {\n      var col = document.createElement(\"col\");\n      col.style.width = pivot.offsetWidth + \"px\";\n      colgroup.append(col);\n    }\n\n    var rows = $(\"tr\", tbody) ? $(\"tr\", tbody).length : 0;\n    var tbodyLeftTable = $(\"<table class='left-table'>\");\n\n    for (var j = 0; j < rows; j++) {\n      var row = $(\"<tr><td>\" + (j + 1) + \"</td></tr>\");\n      tbodyLeftTable.append(row);\n    }\n\n    // Clean content\n    self.view.content.find(\".bz-rn-grid-counter-column\").empty();\n    self.view.content.find(\".bz-rn-grid-scroll-header\").empty();\n\n    // Column counter\n    self.view.content.find(\".bz-rn-grid-counter-column\").append(tbodyLeftTable);\n\n    // Column group\n    self.view.content.find(\".bz-rn-grid-table\").prepend(colgroup.clone());\n\n    // Header\n    var header = self.scrollContent.find(\".bz-rn-grid-header\");\n    self.view.content.find(\".bz-rn-grid-scroll-header\").\n    append($(\"<table class='bz-rn-grid-table'></table>\").\n    append(colgroup).append(header));\n\n    // Footer\n    self.view.footer.empty();\n    var pager = self.scrollContent.find(\".bz-rn-grid-container-pager\");\n    self.view.footer.append(pager);\n  },\n\n  /**\r\n      * Render the grid\r\n      * @returns {}\r\n      */\n  applyGridPlugin: function applyGridPlugin() {\n    var self = this;\n    var properties = self.properties;\n    var scrollContainer = self.view.content.find(\".bz-rn-grid-scroll-content\").data(\"kendoMobileScroller\");\n\n    self.buildColumns = self.buildColumnModel();\n\n    self.currentGrid = $(scrollContainer.scrollElement).mobileGrid({\n      columns: self.buildColumns,\n      title: properties.displayName,\n      mode: self.getMode(),\n      sortBy: properties.sortBy || \"\",\n      sortOrder: properties.sortOrder || \"\",\n      sortType: bizagi.override.gridDefaultSortBy || \"asc\",\n      template: {\n        grid: self.renderFactory.getTemplate(\"grid\"),\n        table: self.renderFactory.getTemplate(\"grid-table\"),\n        emptyTable: self.renderFactory.getTemplate(\"grid-table-empty\"),\n        column: self.renderFactory.getTemplate(\"grid-table-column\"),\n        specialColumn: self.renderFactory.getTemplate(\"grid-table-column-special\"),\n        row: self.renderFactory.getTemplate(\"grid-table-row\"),\n        cell: self.renderFactory.getTemplate(\"grid-table-cell\"),\n        specialCell: self.renderFactory.getTemplate(\"grid-table-cell-special\"),\n        pager: self.renderFactory.getTemplate(\"grid-table-pager\"),\n        waiting: \"\" },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm,\n        remove: properties.allowDelete,\n        details: properties.allowDetail },\n\n      tooltips: {\n        addLabel: $.trim(bizagi.localization.getResource(\"render-grid-add-label\")), //properties.addLabel,\n        editLabel: $.trim(bizagi.localization.getResource(\"render-grid-edit-label\")), //properties.editLabel,\n        deleteLabel: $.trim(bizagi.localization.getResource(\"render-ecm-confirm-bt-delete\")), //properties.deleteLabel,\n        detailLabel: $.trim(bizagi.localization.getResource(\"render-collection-navigator-details-form\")) //properties.detailLabel\n      },\n      drawCell: function drawCell(params) {\n        return self.drawCell(params.column, params.key, params.value, params.isNewRow);\n      },\n      cellReady: function cellReady(params) {\n        return self.onCellReady(params.column, params.key, params.cell, params.isNewRow);\n      },\n      rowSelected: function rowSelected(params) {\n        self.rowSelected(params.key);\n      },\n      rowUnselected: function rowUnselected(params) {\n        self.rowUnselected(params.key);\n      },\n      editRow: function editRow(params) {\n        self.editRow(params.key);\n      },\n      deleteRow: function deleteRow(params) {\n        self.deleteRow(params.key);\n      },\n      showFormDetails: function showFormDetails(params) {\n        self.showFormDetails(params.key);\n      },\n      pageRequested: function pageRequested(params) {\n        self.pageRequested(params);\n      },\n      sortRequested: function sortRequested(params) {\n        self.fetchData(params.page, params.sortBy, params.sortType);\n      } });\n\n  },\n\n  /*\r\n      *   Triggers the grid plugin event\r\n      */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 0);\n    //return self.grid.apply(self.grid, args);\n  },\n\n  /**\r\n      * rowSelected\r\n      * @param {} key\r\n      * @returns {}\r\n      */\n  rowSelected: function rowSelected(key) {\n    var self = this;\n    var grid = self.currentGrid;\n    var element = grid.getContainer();\n\n    // Add selected style to row\n    var rowSeleted = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + key + \"]\");\n    rowSeleted.addClass(\"bz-rn-grid-state-selected\");\n  },\n\n  /**\r\n      * rowUnselected\r\n      * @param {} key\r\n      * @returns {}\r\n      */\n  rowUnselected: function rowUnselected(key) {\n    var self = this;\n    var grid = self.currentGrid;\n    var element = grid.getContainer();\n\n    var tr = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + key + \"]\");\n    tr.removeClass(\"bz-rn-grid-state-selected\");\n  },\n\n  /**\r\n      * Method overrrides from base or virtual\r\n      * @param {} value\r\n      * @returns {}\r\n      */\n  setDisplayValue: function setDisplayValue(value) {},\n\n  /**\r\n                                                        * setDisplayValueEdit\r\n                                                        * @param {} value\r\n                                                        * @returns {}\r\n                                                        */\n  setDisplayValueEdit: function setDisplayValueEdit(value) {},\n\n  /**\r\n                                                                * actionSave\r\n                                                                * @returns {}\r\n                                                                */\n  actionSave: function actionSave() {},\n\n  /**\r\n                                         * Updates manually the affected cell\r\n                                         * @returns {}\r\n                                         */\n  updateAffectedCellManually: function updateAffectedCellManually() {},\n\n  /**\r\n                                                                         * Get the row index using the key as a reference\r\n                                                                         * @returns {}\r\n                                                                         */\n  getRowIndexByKey: function getRowIndexByKey() {},\n\n  /**\r\n                                                     * Shows more info about a grid row in smartphones not implemented\r\n                                                     * @param {} id\r\n                                                     * @returns {}\r\n                                                     */\n  showMore: function showMore(id) {},\n\n  /**\r\n                                       * getHeaderStyles\r\n                                       * @returns {}\r\n                                       */\n  getHeaderStyles: function getHeaderStyles() {},\n\n  /**\r\n                                                   * Creates the column model required to initialize the grid plugin\r\n                                                   * @returns {}\r\n                                                   */\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n      // Set grid column\n      column.columnIndex = index + 1;\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        hidden: !column.properties.visible || column.properties.type == \"columnHidden\" || column.properties.columnVisible === false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n      * Makes the grid to refresh\r\n      * @returns {}\r\n      */\n  refresh: function refresh() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.fetchData()).done(function () {\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * Holds the execution until the grid data is ready after a load operation\r\n      * @returns {}\r\n      */\n  dataReady: function dataReady() {\n    var self = this;\n\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /**\r\n      * Method to set data and update the grid\r\n      * @param {} data\r\n      * @returns {}\r\n      */\n  updateData: function updateData(data) {\n    var self = this;\n    var grid = self.currentGrid;\n\n    if (!data.records || data.records && data.records === 0) {\n      self.view.content.find(\".bz-rn-grid-top-content, .bz-rn-grid-counter-column\").hide();\n      self.view.content.find(\".bz-rn-grid-scroll-content\").css(\"width\", \"100%\");\n    } else {\n      if (self.view.content.find(\".bz-rn-grid-top-content\").css(\"display\") === \"none\") {\n        self.view.content.find(\".bz-rn-grid-top-content, .bz-rn-grid-counter-column\").show();\n      }\n    }\n\n    // Set value in control\n    if (data && self.properties) {\n      self.properties.data = data;\n      self.setCellOverrides(data);\n      grid.setData(data);\n    }\n  },\n\n  /**\r\n      * Method to fetch data from the server and then update the data\r\n      * @param {} page\r\n      * @param {} sortBy\r\n      * @param {} sortType\r\n      * @returns {}\r\n      */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    self.dataReadyDeferred = $.Deferred();\n    self.sortBy = sortBy;\n    self.sortType = sortType;\n\n    // Define defaults\n    page = page || 1;\n    sortBy = sortBy || properties.sortBy || \"id\";\n    sortType = sortType || properties.sortOrder || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sortBy = sortBy;\n    properties.sortType = sortType;\n    properties.sort = sortBy + \" \" + sortType;\n\n    // Start loading to avoid multiple calls to the server\n    self.startLoading();\n\n    $.when(self.getRemoteData()).\n    then(function (data) {\n      self.endLoading();\n\n      if (data) {\n        if (data.deviceMaxRecordsExceeded) {\n          bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-maximum-records-allowed\"));\n          self.dataReadyDeferred.resolve();\n        } else {\n          $.when(self.updateData(data)).\n          done(function () {\n            // Attach handlers\n            self.configureHeaderAndFooterFixed();\n            self.attachScrollHandler();\n\n            self.triggerRenderChange({ changed: false });\n            self.dataReadyDeferred.resolve();\n          });\n        }\n      }\n    });\n\n    return self.dataReadyDeferred.promise();\n  },\n\n  /**\r\n      * Fetch Sum Data\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  fetchTotalData: function fetchTotalData(params) {\n  },\n\n  /**\r\n      * Add the render data to the given collection in order to send data to the server\r\n      * @param {} renderValues\r\n      * @returns {}\r\n      */\n  collectData: function collectData(renderValues) {},\n\n  /**\r\n                                                       * onPageRequested\r\n                                                       * @param {} ui\r\n                                                       * @returns {}\r\n                                                       */\n  pageRequested: function pageRequested(params) {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    if (!jQuery.isEmptyObject(data)) {\n\n      self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache });\n\n\n    }\n\n    self.fetchData(params.page, params.sortBy, params.sortType);\n  },\n\n  /**\r\n      * onTotalData\r\n      * @param {} ui\r\n      * @returns {}\r\n      */\n  onTotalData: function onTotalData(ui) {},\n\n  /**\r\n                                             * showTotals\r\n                                             * @param {} params\r\n                                             * @returns {}\r\n                                             */\n  showTotals: function showTotals(params) {},\n\n  /**\r\n                                               *  Customizes the content drawing inside the cell\r\n                                               * @param {} column\r\n                                               * @param {} key\r\n                                               * @param {} value\r\n                                               * @param {} isNewRow\r\n                                               * @returns {}\r\n                                               */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    var self = this;\n\n    if (column.key) return value;\n\n    self.newRecords = self.newRecords || {};\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) {\n      self.cellMetadata[key][columnIndex] = {};\n    }\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Not display\n    properties.editable = false;\n    renderColumn.properties.displayType = 'value';\n\n    renderColumn.setValue(key, value);\n    renderColumn.setSurrogateKey(key);\n\n    if (visible) {\n      var defer = new $.Deferred();\n      renderColumn.properties = properties;\n\n      $.when(renderColumn.renderReadOnly(key, value)).done(function (cell) {\n        // Register array with new records\n        for (var j = 0; j < self.columns.length; j++) {\n          self.cellOverrides[key] = self.cellOverrides[key] || {};\n          self.getCellOverride(key, j).visible = true;\n        }\n        defer.resolve(cell);\n      });\n\n      return defer.promise();\n\n    } else {\n      return \"\";\n    }\n  },\n\n  /**\r\n      * Executes when the cell is ready and inserted into the DOM\r\n      * @param {} column\r\n      * @param {} key\r\n      * @param {} cell\r\n      * @param {} isNewRow\r\n      * @returns {}\r\n      */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = (self.cellMetadata[key][columnIndex] != undefined ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    } else {\n      editable = false;\n    }\n\n    if (visible) {\n      var control;\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n        renderColumn.postRenderReadOnly(key, cell);\n      }\n    }\n  },\n\n  /**\r\n      * Returns a promise that will resolve when the element is ready\r\n      * @returns {}\r\n      */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n\n    return $.when(parentPromise);\n  },\n\n  /**\r\n      * Adds a row to the grid\r\n      * @returns {}\r\n      */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n\n    self.startLoading();\n\n    $.when(self.submitAddRequest()).\n    done(function (newId) {\n      var recordXpath = properties.xpath + \"[id=\" + newId + \"]\";\n\n      var propertiesGridForm = {\n        idRender: properties.id,\n        \"recordXPath\": recordXpath,\n        url: properties.addPage,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        xpath: recordXpath,\n        editable: true,\n        requestedForm: \"addForm\",\n        displayName: properties.addLabel,\n        idAsigned: newId,\n        enableEditSubmitRequest: false,\n        hideLabel: true,\n        withAddForm: true };\n\n\n      var argumentsGrid = {\n        \"renderFactory\": renderFactory,\n        \"dataService\": dataservice,\n        \"parent\": self,\n        \"data\": {\n          properties: propertiesGridForm } };\n\n\n\n      var formlink = new bizagi.rendering.formLink(argumentsGrid);\n\n      $.extend(formlink, {\n        contextEdit: $(container).find(\"#container-items-edit\"),\n        element: self.element,\n        actionSave: self.actionSaveNewRow,\n        actionCancel: self.actionCancelRow,\n        _sendRelation: function _sendRelation() {\n          return true;\n        },\n        _getData: self.dataService.getFormData,\n        _params: propertiesGridForm });\n\n\n      self._InternalRenderLinkForm(formlink);\n      self.endLoading();\n\n    }).fail(function (error) {\n      self.endLoading();\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-no-records\"), \"Error\");\n    });\n  },\n\n  /**\r\n      * Edit form in the grid\r\n      * @param {} id\r\n      * @returns {}\r\n      */\n  editRow: function editRow(id) {\n    var self = this;\n\n    //save form in case the user has made changes in the inline row\n    var containerForm = self.getFormContainer();\n    containerForm.saveForm();\n\n    var properties = self.properties;\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    var propertiesGridForm = {\n      idRender: properties.id,\n      id: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: recordXpath,\n      xpath: recordXpath,\n      editable: true,\n      url: properties.editPage,\n      requestedForm: \"editForm\",\n      displayName: properties.editLabel,\n      idAsigned: id };\n\n\n    var argumentsGrid = {\n      \"renderFactory\": renderFactory,\n      \"dataService\": dataservice,\n      \"parent\": self,\n      \"data\": {\n        properties: propertiesGridForm } };\n\n\n\n    var formlink = new bizagi.rendering.formLink(argumentsGrid);\n\n    $.extend(formlink, {\n      contextEdit: $(container).find(\"#container-items-edit\"),\n      element: self.element,\n      actionSave: self.actionSaveNewRow,\n      actionCancel: self.actionCancelRow,\n      _sendRelation: formlink.submitEditRequest,\n      _getData: self.dataService.getFormData,\n      _params: propertiesGridForm });\n\n\n    self._InternalRenderLinkForm(formlink);\n  },\n\n  /**\r\n      * Deletes  a row to the grid\r\n      * @param {} id\r\n      * @returns {}\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n\n    if (id === 0) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      //Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Reload grid\n        self.fetchData();\n\n        if (data.type === \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      });\n    });\n  },\n\n  /**\r\n      * Details form in the grid\r\n      * @param {} id\r\n      * @returns {}\r\n      */\n  showFormDetails: function showFormDetails(id) {\n    var self = this;\n\n    if (id === 0 || id == undefined) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\n      return;\n    }\n\n    //save form in case the user has made changes in the inline row\n    //var containerForm = self.getFormContainer();\n    //containerForm.saveForm();\n\n    var properties = self.properties;\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    var propertiesGridForm = {\n      idRender: properties.id,\n      id: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      recordXPath: recordXpath,\n      xpath: recordXpath,\n      editable: false,\n      url: properties.editPage,\n      requestedForm: \"detailForm\",\n      displayName: properties.detailLabel,\n      idAsigned: id,\n      hideSaveButton: true };\n\n\n    var argumentsGrid = {\n      \"renderFactory\": renderFactory,\n      \"dataService\": dataservice,\n      \"parent\": self,\n      \"data\": {\n        properties: propertiesGridForm } };\n\n\n\n    var formlink = new bizagi.rendering.formLink(argumentsGrid);\n\n    $.extend(formlink, {\n      contextEdit: $(container).find(\"#container-items-edit\"),\n      element: self.element,\n      //disable if you want only save at the end (submit the form)\n      //actionCancel: self.actionCancelRow,\n      _sendRelation: formlink.submitEditRequest,\n      _getData: self.dataService.getFormData,\n      _params: propertiesGridForm });\n\n\n    self._InternalRenderLinkForm(formlink);\n  },\n\n  /**\r\n      * actionCancelRow\r\n      * @returns {}\r\n      */\n  actionCancelRow: function actionCancelRow() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * actionSaveNewRow\r\n      * @returns {}\r\n      */\n  actionSaveNewRow: function actionSaveNewRow() {\n    var self = this;\n    var properties = self.properties;\n    var deferred = $.Deferred();\n    var data = {};\n\n    if (self.form.validateForm() === true) {\n      $.when(\n      self.form.collectRenderValues(data),\n      data.idPageCache = self.form.getPageCache()).\n      then(function () {\n        $.when(\n        self.parent.submitSaveRequest(properties.idAsigned, data)).done(function (resp) {\n          if (resp.type == \"validationMessages\") {\n            self.form.addValidationMessage(resp.messages);\n            properties.submitOnChange = false;\n            deferred.reject(resp.messages);\n          } else {\n            self.parent.fetchData();\n            if (!properties.submitOnChange) {\n              properties.submitOnChange = true;\n            }\n            self.submitOnChange({}, true);\n            deferred.resolve();\n          }\n        });\n\n      });\n    } else {\n      deferred.reject({ noAction: true });\n    }\n\n    return deferred.promise();\n  },\n\n  /**\r\n      * _InternalRenderLinkForm\r\n      * @param {} formlink\r\n      * @returns {}\r\n      */\n  _InternalRenderLinkForm: function _InternalRenderLinkForm(formlink) {\n    var self = this;\n\n    $.when(formlink.renderEdition()).done(\n    function () {\n      formlink.endLoading();\n      formlink.postRenderEdit();\n\n      formlink.form.one(\"refresh\", function (_, refreshParams) {\n        if (formlink.kendoView) {var\n\n\n\n\n\n\n\n          refresh = function refresh() {\n            self = this;\n            bizagi.kendoMobileApplication.navigate(\"#:back\");\n            formlink.kendoView.data(\"kendoMobileView\").destroy();\n            self._InternalRenderLinkForm(formlink);\n          };var id = formlink.kendoView.data(\"kendoMobileView\").id;if (id.substring(1, id.length) === kendo.history.current) {refresh.apply(self);} else {formlink.kendoView.data(\"kendoMobileView\").bind(\"afterShow\", refresh.bind(self));}\n        }\n      });\n    });\n\n  },\n\n  /**\r\n      * applyActionUpdateGrid\r\n      * @param {} column\r\n      * @param {} context\r\n      * @returns {}\r\n      */\n  applyActionUpdateGrid: function applyActionUpdateGrid(column, context) {},\n\n  /**\r\n                                                                              * collectRenderValues\r\n                                                                              * @param {} renderValues\r\n                                                                              * @returns {}\r\n                                                                              */\n  collectRenderValues: function collectRenderValues(renderValues) {},\n\n\n  /*   Sets an error on the cell\r\n                                                                       */\n  setError: function setError(key, xpath) {},\n\n  /**\r\n                                               * Changes the required for cell\r\n                                               * @param {} key\r\n                                               * @param {} xpath\r\n                                               * @param {} argument\r\n                                               * @returns {}\r\n                                               */\n  changeCellValue: function changeCellValue(key, xpath, argument) {},\n\n  /**\r\n                                                                       * Changes the background for a cell\r\n                                                                       * @param {} key\r\n                                                                       * @param {} xpath\r\n                                                                       * @param {} argument\r\n                                                                       * @returns {}\r\n                                                                       */\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {},\n\n  /**\r\n                                                                                           *  Changes the background for a cell\r\n                                                                                           * @param {} key\r\n                                                                                           * @param {} xpath\r\n                                                                                           * @param {} argument\r\n                                                                                           * @returns {}\r\n                                                                                           */\n  changeCellColor: function changeCellColor(key, xpath, argument) {},\n\n  /**\r\n                                                                       *  Changes the visibility for a cell\r\n                                                                       * @param {} key\r\n                                                                       * @param {} xpath\r\n                                                                       * @param {} argument\r\n                                                                       * @returns {}\r\n                                                                       */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {},\n\n  /**\r\n                                                                                 *  Changes the editability for a cell\r\n                                                                                 * @param {} key\r\n                                                                                 * @param {} xpath\r\n                                                                                 * @param {} argument\r\n                                                                                 * @returns {}\r\n                                                                                 */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {},\n\n  /**\r\n                                                                                   * cleanCellData\r\n                                                                                   * @param {} key\r\n                                                                                   * @param {} xpath\r\n                                                                                   * @returns {}\r\n                                                                                   */\n  cleanCellData: function cleanCellData(key, xpath) {},\n\n  /**\r\n                                                         * Method to start loading for ajax data and update the ui\r\n                                                         * @param {} bUseTimeout\r\n                                                         * @returns {}\r\n                                                         */\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n\n  /**\r\n      * Method to remove the loading message\r\n      * @returns {}\r\n      */\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  } });","/**\r\n *  Name: BizAgi Smartphone Render Grid Extension\r\n *  Author: Oscar o\r\n *  Comments:\r\n *  -   This script will redefine the grid render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.grid.extend(\"bizagi.rendering.grid\", {}, {\n  init: function init(params) {\n    var self = this;\n    var data = params.data;\n\n    data.properties.singleInstance = false;\n    data.properties.rowsPerPage = 1;\n    data.properties.labelAlign = \"left\";\n    data.properties.displayType = \"vertical\";\n\n    // Call base\n    self._super(params);\n\n    // Create a data-structure to keep track of each cell properties\n    this.cellMetadata = {};\n\n    // Fill default properties\n    var properties = this.properties;\n\n    // Just apply display-type: vertical, align it to the left\n    properties.displayType = \"vertical\";\n    properties.labelAlign = \"left\";\n    properties.rowsPerPage = 1;\n\n    //Totalizer validation\n    if (properties.data && properties.data.rows)\n    self.allRows = [].concat(properties.data.rows);\n\n    //revisar base para mejorar comportamiento cuando esta en false los elementos\n    $.each(self.columns, function (index, value) {\n      if (this.properties && this.properties.editable) {\n        this.properties.editable = properties.allowEdit === true ? true : false;\n      }\n    });\n\n    // Just for smartphones we need to take only one row if there is data in the json, because we use just one row per page\n    if (properties.data && properties.data.rows && properties.data.rows.length > 1) {\n      properties.data.rows = [].concat([properties.data.rows[0]]);\n    }\n  },\n\n  /* method overrrides\r\n      *  from base or virtual\r\n      */\n  setDisplayValue: function setDisplayValue(value) {},\n  setDisplayValueEdit: function setDisplayValueEdit(value) {},\n  actionSave: function actionSave() {},\n  /*\r\n                                         * Updates manually the affected cell\r\n                                         */\n  updateAffectedCellManually: function updateAffectedCellManually() {},\n\n  /*\r\n                                                                         * Get the row index using the key as a reference\r\n                                                                         */\n  getRowIndexByKey: function getRowIndexByKey() {},\n  /**\r\n                                                     *  Shows more info about a grid row\r\n                                                     * in smartphones not implemented\r\n                                                     */\n  showMore: function showMore(id) {},\n\n\n  /**\r\n                                       * Returns the indexes of all elements in the grid\r\n                                       * @returns {*}\r\n                                       */\n  getIndexes: function getIndexes() {\n    var self = this;\n    var data = $.merge(self.allRows, self.getDataNewRows());\n\n    return data.reduce(function (acum, current) {\n      if (typeof acum.find(function (el) {return el[0] == current[0];}) === 'undefined') {\n        acum.push(current);\n      }\n      return acum;\n    }, []).map(function (item) {\n      return item[0];\n    });\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    properties.rowsPerPage = 1;\n\n    container.addClass(\"bz-command-edit-inline\");\n    if (self.properties.helpText !== \"\") {\n      control.addClass(\"bz-rn-grid-contains-help-text\");\n    }\n\n    //hide the standar label\n    //TODO: en tablet se realizae como getLabel\n    self.getContainerRender().find(\".ui-bizagi-label\").hide();\n    self.getArrowContainer().hide();\n\n    // Call base\n    this._super();\n    var grid = self.inputEdition = self.input = self.grid = control.find(\"#\" + bizagi.util.encodeXpath(properties.xpath)).addClass(\"bz-cn-grid\");\n    var mode = self.getMode();\n    var columns = self.buildColumnModel();\n\n    var columnsTotalizers = jQuery.grep(columns, function (a) {\n      return a.summarizeBy;\n    });\n\n    //bizagi_grid_tablet\n    grid.bizagi_grid_smartphone({\n      columns: columns,\n      title: properties.displayName,\n      mode: self.getMode(),\n      template: {\n        grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\n        waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\n        table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\n        emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\n        column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\n        specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\n        row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\n        rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\n        cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\n        specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\n        pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\n        buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\n        totalizer: self.renderFactory.getTemplate(\"bizagi.grid.totalizer\") },\n\n      actions: {\n        add: properties.allowAdd,\n        edit: properties.allowEdit && properties.withEditForm,\n        remove: properties.allowDelete,\n        details: properties.allowDetail,\n        inlineAdd: properties.inlineAdd,\n        allowMore: false,\n        totalizer: properties.showSummary,\n        hasTotalizer: columnsTotalizers.length > 0 && properties.data.rows.length > 0 ? true : false },\n\n      pageRequested: function pageRequested(ui) {\n        if (mode != \"execution\") return;\n        self.onPageRequested(ui);\n      },\n      totalData: function totalData(ui) {\n        if (mode != \"execution\") return;\n\n        self.onTotalData();\n      },\n      sortRequested: function sortRequested(ui) {\n        if (mode != \"execution\") return;\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\n      },\n      isValid: function isValid(invalidElements) {\n        return self.isValidGrid(invalidElements);\n      },\n      drawCell: function drawCell(ui) {\n        return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\n      },\n      cellReady: function cellReady(ui) {\n        return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\n      },\n      rowSelected: function rowSelected(ui) {\n        //self.triggerHandler(\"rowSelected\", { id: ui.key });\n      },\n      gridControlReady: function gridControlReady() {\n        self.processLayout(isLabelFormat, self.properties.textFormat || {});\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\n      },\n      addRow: function addRow(ui) {\n        if (mode != \"execution\") return;\n        self.addRow();\n      },\n      editRow: function editRow(ui) {\n        if (mode != \"execution\") return;\n        self.editRow(ui.key);\n      },\n      deleteRow: function deleteRow(ui) {\n        if (mode != \"execution\") return;\n        self.deleteRow(ui.key);\n      },\n      showMore: function showMore(ui) {\n        self.showMore(ui.key);\n      },\n      showFormDetails: function showFormDetails(ui) {\n        if (mode != \"execution\") return;\n        self.showDetail(ui.key);\n      } });\n\n\n    // Just for smartphones we need to take only one row if there is data in the json, because we use just one row per page\n    if (properties.data && properties.data.rows && properties.data.rows.length > 1) {\n      properties.data.rows = [].concat([properties.data.rows[0]]);\n    }\n\n    properties.skipInitialLoad = properties.skipInitialLoad || false;\n    // Set initial data\n    if (!properties.skipInitialLoad) {\n      if (properties.data) {\n        self.updateData(properties.data);\n\n        // Trigger change in order to start up the actions when the controls is ready\n        $.when(self.ready()).\n        done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      } else {\n        self.fetchData(properties.page, properties.sortBy, properties.sortOrder);\n      }\n    }\n  },\n\n  getHeaderStyles: function getHeaderStyles() {\n    var self = this;\n    var label = \"\";\n    var header = \"\";\n    var properties = self.properties;\n\n    if (properties.headerFormat) {\n      var format = properties.headerFormat;\n\n      if (format.color) {\n        label += \"color: \" + format.color + \";\";\n      }\n\n      if (format.background) {\n        header += \"background-color: \" + format.background + \";\";\n      }\n\n      if (format.bold) {\n        label += \"font-weight: bold; \";\n      }\n\n      if (format.italic) {\n        label += \"font-style: italic; \";\n      }\n\n      if (format.underline || format.strikethru) {\n        var strikethru = bizagi.util.parseBoolean(format.strikethru) ? \"line-through \" : \"\";\n        var underline = bizagi.util.parseBoolean(format.underline) ? \"underline \" : \"\";\n\n        label += \"text-decoration: \" + strikethru + underline + \";\";\n      }\n\n      if (format.size && format.size != \"0\") {\n        var newFontSize = 100 + Number(format.size) * 10 + \"%\";\n        label += \"font-size: \" + newFontSize + \";\";\n      }\n    }\n\n    return { label: label, header: header };\n  },\n\n  buildColumnModel: function buildColumnModel() {\n    var self = this;\n    var properties = self.properties;\n    var columns = self.columns;\n\n    // Create id column first\n    var keyColumn = {\n      name: \"id\",\n      index: 0,\n      label: \"id\",\n      hidden: true,\n      align: \"center\",\n      key: true };\n\n\n    // Add to column model\n    var columnModel = [];\n    columnModel.push(keyColumn);\n\n    $.each(columns, function (index, column) {\n      // Set grid column\n      column.columnIndex = index + 1;\n      var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\n      var gridColumn = {\n        name: column.properties.xpath,\n        index: index + 1,\n        label: columnLabel,\n        key: false,\n        hidden: !column.properties.visible || column.properties.type === \"columnHidden\" || column.properties.columnVisible === false,\n        summarizeBy: column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined,\n        bizAgiProperties: column.properties };\n\n      columnModel.push(gridColumn);\n    });\n\n    return columnModel;\n  },\n\n  /**\r\n      * Makes the grid to refresh\r\n      */\n  refresh: function refresh() {\n    var self = this;\n\n    return $.when(self.fetchData());\n  },\n\n  /*\r\n      *   Holds the execution until the grid data is ready after a load operation\r\n      */\n  dataReady: function dataReady() {\n    var self = this;\n\n    return self.dataReadyDeferred != null ? self.dataReadyDeferred.promise() : null;\n  },\n\n  /*\r\n      *   Method to set data and update the grid\r\n      */\n  updateData: function updateData(data) {\n    var self = this;\n    var columns = self.columns;\n\n    // Set value in control\n    if (data && self.properties) {\n      self.properties.data = data;\n      self.setCellOverrides(data, columns);\n\n      self.triggerGridPluginHandler(\"setData\", data);\n    }\n  },\n\n  /*\r\n      *   Method to fetch data from the server and then update the data\r\n      */\n  fetchData: function fetchData(page, sortBy, sortType) {\n    var self = this;\n    var properties = self.properties;\n\n    // Define defaults\n    page = page || 1;\n    sortBy = sortBy || \"\";\n    sortType = sortType || \"asc\";\n\n    // Update control properties\n    properties.page = page;\n    properties.sort = sortBy + \" \" + sortType;\n\n    bizagi.util.smartphone.startLoading();\n\n    return $.when(self.getRemoteData()).\n    then(function (data) {\n\n      if (data) {\n        return $.when(\n        self.updateData(data)).\n        done(function () {\n          self.triggerRenderChange({ changed: false });\n        });\n      }\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n  /*\r\n      * Fetch Sum Data\r\n      */\n  fetchTotalData: function fetchTotalData(params) {\n    var self = this;\n    var properties = self.properties;\n\n    params = params || {};\n    $.extend(params, {\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      contexttype: properties.contextType,\n      idPageCache: properties.idPageCache,\n      sort: properties.sort,\n      page: 1,\n      rows: self.properties.data.records,\n      searchFilter: properties.searchFilter });\n\n\n    // Check if a custom method has been given\n    if (properties.overrideGetRemoteData) {\n      var result = properties.overrideGetRemoteData(params);\n      return result != null ? result.promise() : null;\n    }\n\n    // Default ajax call\n    var defer = new $.Deferred();\n\n    // Resolve with remote data\n    self.dataService.multiaction().getGridData(params).done(function (data) {\n      // Check RTL\n      if (self.isRTL()) {\n        data.rows = self.changeOrderData(data.rows);\n      }\n\n      defer.resolve(data);\n    }).fail(function (fail) {\n\n      defer.reject(fail);\n    });\n\n    return defer.promise();\n  },\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var grid = self.grid;\n\n    // Remove changes for inline added rows\n    if (self.properties.inlineAdd) {\n      var omitKeys = grid.bizagi_grid_smartphone.hasOwnProperty(\"getNewRowKeys\") ? grid.bizagi_grid_smartphone(\"getNewRowKeys\") : [];\n      for (var i = 0, length = omitKeys.length; i < length; i++) {\n        if (self.changes[omitKeys[i]]) {\n          delete self.changes[omitKeys[i]];\n        }\n      }\n    }\n\n    self._super(renderValues);\n  },\n\n  onPageRequested: function onPageRequested(ui) {\n    var self = this;\n    var properties = self.properties;\n    var data = {};\n\n    if (!jQuery.isEmptyObject(data)) {\n\n      self.dataService.submitData({\n        action: \"SUBMITDATA\",\n        data: data,\n        idRender: properties.id,\n        xpath: properties.xpath,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache });\n\n    }\n\n    self.fetchData(ui.page, ui.sortBy, ui.sortType);\n  },\n\n  onTotalData: function onTotalData(ui) {\n\n    var self = this;\n    var containerForm = self.getFormContainer();\n    containerForm.saveForm();\n\n    //defered que retorne la respuesta del servidor\n    bizagi.util.smartphone.startLoading();\n    $.when(self.fetchTotalData()).done(function (data) {\n      var rows = data.rows;\n      var rowsLength = rows.length;\n\n      //calcula los totalizadores y crea el html\n      var showTotal = [];\n\n      var columnsModel = self.buildColumnModel();\n      var result;\n\n      var operationState;\n\n      columnsModel.forEach(function callback(column, columnIndex) {\n        if (column.bizAgiProperties) {\n          operationState = column.bizAgiProperties.totalize.operation;\n\n          switch (operationState) {\n            case \"sum\":\n              result = rows.sum(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n              break;\n\n            case \"count\":\n              result = rows.count(function (row) {\n                //Checks if there is a DefaultValue, so assign it to the returnedvalu in case it doesn't have value\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n\n                if (!bizagi.util.isArray(return_value)) {\n                  return return_value;\n                }\n\n                if (bizagi.util.isArray(return_value) && return_value.length > 0) {\n                  return return_value; //If the returned value is not undefined, neither null, it will count +1\n                }\n              }, column, columnIndex);\n\n              break;\n\n            case \"max\":\n              result = rows.max(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n\n              break;\n\n            case \"min\":\n              result = rows.min(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n              break;\n\n            case \"avg\":\n              result = rows.avg(function (row) {\n                var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\n                return Number(return_value);\n              }, columnIndex);\n\n              result = result.toFixed(2);\n              break;}\n\n\n          if (operationState) {\n            result = self.formatTotalizedResult(operationState, column.bizAgiProperties.type, result);\n            showTotal.push({ label: column.label, total: result });\n          }\n        }\n      });\n\n      self.showTotals(showTotal);\n    }).fail(function (error) {\n      bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-no-records\"), \"Error\");\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  formatTotalizedResult: function formatTotalizedResult(operation, controlType, value) {\n    switch (operation) {\n      case 'sum':\n      case 'avg':\n      case 'min':\n      case 'max':\n        if (controlType == \"columnMoney\" || controlType == \"money\") {\n          return bizagi.util.formatMonetaryCell(value);\n        }\n        break;}\n\n\n    return value || 0;\n  },\n\n  showTotals: function showTotals(params) {\n    var self = this;\n    var modalViewTemplate = kendo.template(self.renderFactory.getTemplate('bizagi.grid.totalizer'), { useWithBlock: false });\n    var data = $.extend(params, { \"orientation\": self.properties.orientation });\n    var modalView = $($.trim(modalViewTemplate(data)));\n\n    $(\".bz-rn-grid-totalize-container\").remove();\n\n    modalView.kendoMobileModalView({\n      close: function close() {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        this.destroy();\n        this.element.remove();\n      },\n      useNativeScrolling: true });\n\n\n    modalView.delegate(\".bz-rn-grid-totalize-close-btn\", \"click\", function () {\n      modalView.data(\"kendoMobileModalView\").close();\n    });\n\n    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n    modalView.kendoMobileModalView(\"open\");\n  },\n\n  /*\r\n      *   Customizes the content drawing inside the cell\r\n      */\n  drawCell: function drawCell(column, key, value, isNewRow) {\n    //revisar ya que en las demas implementacion en desktop y tablet utilizan una validacion para edicion en linea o no\n    var self = this;\n    self.newRecords = {};\n\n    if (column.key) {\n      return value;\n    }\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n\n    if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\n    if (!self.cellMetadata[key][columnIndex]) {\n      self.cellMetadata[key][columnIndex] = {};\n    }\n\n    var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    renderColumn.properties.displayType = 'normal';\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) editable = true;\n\n    var cellOverride = self.getCellOverride(key, column.index - 1);\n\n    if (cellOverride) {\n      visible = cellOverride.visible;\n      editable = properties.editable ? cellOverride.editable : false;\n    }\n\n    if (visible) {\n      if (editable) {\n        var defer = new $.Deferred();\n\n        $.when(renderColumn.render(key, value)).done(function (cell) {\n\n          if (cell && $(cell).css(\"display\") !== \"none\") {\n            var headerStyles = self.getHeaderStyles();\n\n            cell = cell.replace(\"headerStyles\", headerStyles.header);\n            cell = cell.replace(\"headerLabelStyles\", headerStyles.label);\n          }\n\n          // Register array with new records\n          if (isNewRow && !self.newRecords[key]) {\n            self.newRecords[key] = {};\n          }\n\n          for (var j = 0, length = self.columns.length; j < length; j++) {\n            self.cellOverrides[key] = self.cellOverrides[key] || {};\n            self.getCellOverride(key, j).visible = true;\n          }\n\n          self.bindRenderChange(renderColumn, key, true);\n\n          defer.resolve(cell);\n        });\n        return defer.promise();\n      } else {\n        /* return renderColumn.renderReadOnly(key, value); */\n        return $.when(renderColumn.renderReadOnly(key, value)).then(function (cell) {\n\n          if (cell && $(cell).css(\"display\") !== \"none\") {\n            var headerStyles = self.getHeaderStyles();\n            var item = $(cell);\n\n            $('.ui-bizagi-label', item).attr('style', headerStyles.header);\n            $('label', item).attr('style', headerStyles.label);\n\n            if (typeof self.properties.textFormat !== \"undefined\") {\n\n              if (typeof self.properties.textFormat.color !== \"undefined\") {\n                $('label', item).css('color', self.properties.textFormat.color);\n              }\n\n              if (typeof self.properties.textFormat.size !== \"undefined\" && self.properties.textFormat.size > 0) {\n                var newFontSize = 100 + Number(self.properties.textFormat.size) * 10 + \"%\";\n                $('label', item).css('font-size', newFontSize);\n              }\n            }\n\n            cell = item[0].outerHTML;\n          }\n\n          return cell;\n        });\n      }\n\n    } else {\n      return \"\";\n    }\n  },\n\n  /*\r\n      *   Executes when the cell is ready and inserted into the DOM\r\n      */\n  onCellReady: function onCellReady(column, key, cell, isNewRow) {\n    var self = this;\n\n    // Get render column\n    var columnIndex = column.index - 1;\n    var renderColumn = self.columns[columnIndex];\n    var properties = (self.cellMetadata[key][columnIndex] != undefined ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\n    var visible = properties.visible !== undefined ? properties.visible : true;\n    var editable = properties.editable !== undefined ? properties.editable : true;\n\n    $(\".bz-rn-messages\", cell).toggleClass(\"bz-rn-messages\", \"bz-rn-messages-grid\");\n\n    // If the cell we are drawing is the summary cell, we need to make it readonly\n    if (key == \"summary\") {\n      editable = false;\n    }\n\n    // Show editable cell when we are performing inline add operation\n    if (isNewRow) {\n      editable = true;\n    }\n\n    if (visible) {\n      if (editable) {\n        // Set editable\n        var originalEditable = renderColumn.properties.editable;\n        renderColumn.properties.editable = editable;\n\n        // Set xpath context for submitonchange action\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        // Execute cell post render\n        renderColumn.postRender(key, cell);\n\n        // Restore editable\n        renderColumn.properties.editable = originalEditable;\n      } else {\n\n        if (renderColumn.properties.submitOnChange) {\n          var control = renderColumn.getDecorated(key);\n          if (control) {\n            control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\n          }\n        }\n\n        renderColumn.postRender(key, cell);\n      }\n    }\n  },\n\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  bindRenderChange: function bindRenderChange(renderColumn, key, isBinding) {\n    if (isBinding) {\n      var self = this;\n      renderColumn.getDecorated(key).bind(\"renderchange\", function (render, args) {\n\n        var value = renderColumn.getValue(args.render.surrogateKey);\n        var compositeValue = renderColumn.getCompositeValue(args.render.surrogateKey);\n\n        if (renderColumn.properties.type == \"columnDate\") {\n          if (!bizagi.util.isEmpty(value)) {\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(value, args.render.properties.showTime || false);\n            value = bizagi.util.dateFormatter.formatInvariant(date, true);\n          } else if (value === \"\") {\n            value = \"\";\n          }\n        }\n        self.collectGridChange($.extend(args, {\n          id: args.render.surrogateKey,\n          xpath: renderColumn.properties.xpath || renderColumn.properties.id,\n          value: value,\n          compositeValue: compositeValue,\n          columnIndex: renderColumn.columnIndex }));\n\n\n        // Update change in grid's component data\n        self.grid.bizagi_grid_smartphone(\"changeCellValue\", args.render.surrogateKey, renderColumn.columnIndex, value);\n\n        // If the column has totalizers then we need to refresh the summary\n        if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\n          self.grid.bizagi_grid_smartphone(\"refreshSummary\", renderColumn.columnIndex);\n        }\n      });\n    } else {\n      renderColumn.getDecorated(key).unbind(\"renderchange\");\n    }\n  },\n\n  /**\r\n      *  Adds a row to the grid\r\n      */\n  addRow: function addRow() {\n    var self = this;\n    var properties = self.properties;\n\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n\n    bizagi.util.smartphone.startLoading();\n\n    $.when(self.submitAddRequest()).\n    done(function (newid) {\n      var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\n      var propertiesGridForm = {\n        idRender: properties.id,\n        \"recordXPath\": recordXpath,\n        url: properties.addPage,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        xpath: recordXpath,\n        editable: true,\n        requestedForm: \"addForm\",\n        displayName: properties.addLabel,\n        idAsigned: newid,\n        enableEditSubmitRequest: false,\n        hideLabel: true,\n        disableProcessButons: true };\n\n\n      var argumentsfl = {\n        \"renderFactory\": self.renderFactory,\n        \"dataService\": dataservice,\n        \"parent\": self,\n        \"data\": {\n          properties: propertiesGridForm } };\n\n\n\n      var formlink = new bizagi.rendering.formLink(argumentsfl);\n\n      jQuery.extend(formlink, {\n        contextEdit: $(container).find(\"#container-items-edit\"),\n        element: self.element,\n        actionSave: self.actionSaveNewRow,\n        actionCancel: self.actionCancelRow,\n        _sendRelation: function _sendRelation() {\n          return true;\n        },\n        _getData: self.dataService.getFormData,\n        _params: propertiesGridForm });\n\n\n      self._InternalRenderLinkForm(formlink);\n      bizagi.util.smartphone.stopLoading();\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  /* edit form in the grid*/\n  editRow: function editRow(id) {\n    var self = this;\n\n    //save form in case the user has made changes in the inline row\n    var containerForm = self.getFormContainer();\n    containerForm.saveForm();\n\n    var properties = self.properties;\n    var container = self.getFormContainer().container;\n    var dataservice = self.dataService;\n\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n\n    bizagi.util.smartphone.startLoading();\n    $.when(containerForm.saveForm()).done(function () {\n      var propertiesGridForm = {\n        idRender: properties.id,\n        id: properties.id,\n        xpathContext: properties.xpathContext,\n        idPageCache: properties.idPageCache,\n        recordXPath: recordXpath,\n        xpath: recordXpath,\n        editable: true,\n        url: properties.editPage,\n        requestedForm: \"editForm\",\n        displayName: properties.editLabel,\n        idAsigned: id,\n        disableProcessButons: true };\n\n\n      var argumentsfl = {\n        \"renderFactory\": self.renderFactory,\n        \"dataService\": dataservice,\n        \"parent\": self,\n        \"data\": {\n          properties: propertiesGridForm } };\n\n\n\n      var formlink = new bizagi.rendering.formLink(argumentsfl);\n\n      jQuery.extend(formlink, {\n        contextEdit: $(container).find(\"#container-items-edit\"),\n        element: self.element,\n        //disable if you want only save at the end (submit the form)\n        actionSave: self.actionSaveNewRow,\n        actionCancel: self.actionCancelRow,\n        _sendRelation: formlink.submitEditRequest,\n        _getData: self.dataService.getFormData,\n        _params: propertiesGridForm });\n\n\n      self._InternalRenderLinkForm(formlink);\n    }).fail(function (error) {\n      self.executeFormFailHandler(error);\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  _InternalRenderLinkForm: function _InternalRenderLinkForm(formlink) {\n    $.when(formlink.renderEdition()).done(\n    function () {\n      formlink.endLoading();\n    });\n\n  },\n\n  /**\r\n      *  Deletes  a row to the grid\r\n      */\n  deleteRow: function deleteRow(id) {\n    var self = this;\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      // Do a grid record deletion\n      $.when(self.submitDeleteRequest(id)).\n      done(function (data) {\n        // Reload grid\n        self.fetchData();\n        if (data.type == \"success\") {\n          // Trigger the event\n          //'key' must be included to trigger a single call to actions and validations\n          //line 310 bizagi.command.controllers.action\n          self.triggerRenderChange({ rowDeleted: true, changed: false, key: id });\n        }\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n    });\n  },\n\n  /**\r\n      *  Shows detail form\r\n      */\n  showDetail: function showDetail(id) {\n    var self = this;\n    self.executeSubmitShowDetailRequest(id);\n  },\n\n  /**\r\n      * Execute the request for details. \r\n      */\n  executeSubmitShowDetailRequest: function executeSubmitShowDetailRequest(id) {\n    var self = this;\n    var properties = self.properties;\n    var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\n    var dataservice = self.dataService;\n    var renderFactory = self.renderFactory;\n    var formView = new bizagi.rendering.smartphone.slide.form(self.dataService, self.renderFactory, {\n      title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\n      navigation: self.getParams().navigation,\n      container: self.getFormContainer().container,\n      showSaveButton: false });\n\n\n    formView.render({\n      idRender: properties.id,\n      recordXPath: recordXpath,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      requestedForm: \"detailForm\",\n      editable: false });\n\n  },\n\n  actionCancelRow: function actionCancelRow() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      deferred.resolve();\n    });\n\n    return deferred.promise();\n  },\n\n  /*\r\n      * Save data in the form link related\r\n      * parameter: data data collected in the related form link\r\n      */\n  actionSaveNewRow: function actionSaveNewRow(data) {\n    var self = this;\n    var deferred = $.Deferred();\n\n    if (self.form.validateForm() === true) {\n      var properties = self.properties;\n\n      if (!data) {\n        self.form.collectRenderValues(data);\n      }\n\n      data.idPageCache = self.form.getPageCache();\n\n      $.when(\n      self.parent.submitSaveRequest(properties.idAsigned, data)).done(function (resp) {\n        if (resp.type == \"validationMessages\") {\n          self.form.addValidationMessage(resp.messages);\n          properties.submitOnChange = false;\n          deferred.reject(resp.messages);\n        } else {\n          self.parent.fetchData();\n          if (!properties.submitOnChange) {\n            properties.submitOnChange = true;\n          }\n          self.submitOnChange({}, true);\n          deferred.resolve();\n        }\n      });\n    } else {\n      deferred.reject();\n    }\n\n    return deferred.promise();\n  },\n\n  applyActionUpdateGrid: function applyActionUpdateGrid(column, context) {\n    var self = context;\n    var originalMethod = column.decorated.actionSave;\n\n    jQuery.extend(column.decorated, {\n      actionSave: function actionSave() {\n        var selfIntern = this;\n        $.when(originalMethod.apply(selfIntern, arguments)).done(function () {\n          var data = {};\n          self.collectRenderValues(data);\n\n          $.when(self.submitSaveRequest(selfIntern.surrogateKey, data)).done(function () {\n            self.fetchData();\n          });\n        });\n      } });\n\n  },\n\n\n  collectRenderValues: function collectRenderValues(renderValues) {\n    var self = this;\n\n    $.each(self.columns, function (i, child) {\n      child = child.decorated;\n      if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\n        // Go though container\n        child.collectRenderValues(renderValues);\n      } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\n        // Check if the render can be sent to the server\n        if (child.canBeSent()) {\n          child.collectData(renderValues);\n        }\n      }\n    });\n  },\n\n  /*\r\n      *   Returns a promise that will resolve when the element is ready\r\n      */\n  ready: function ready() {\n    var self = this;\n    var parentPromise = self._super();\n    var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\n\n    return $.when(parentPromise, inlineAddPromise);\n  },\n\n  /*   Sets an error on the cell\r\n      */\n  setError: function setError(key, xpath) {\n    var self = this;\n  },\n\n  /*\r\n      *  Changes the required for cell\r\n      */\n  changeCellValue: function changeCellValue(key, xpath, argument) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control) {\n      if (argument != null)\n      control.setDisplayValue(argument);\n\n      //ISUPP 3866\n      var _value = control.column.getValue(key);\n      var compositeValue = control.column.getCompositeValue(key);\n\n      if (argument != null)\n      control.setDisplayValue(argument);\n\n      var trigger = false;\n      self.collectGridChange({ id: key, xpath: xpath, value: _value, compositeValue: compositeValue, columnIndex: control.column, trigger: trigger });\n    }\n  },\n\n  changeCellBackgroundColor: function changeCellBackgroundColor(key, xpath, argument) {\n    var self = this;\n\n    var control = self.getControlCell(key, xpath);\n    if (control) {\n      control.changeCellBackgroundColor(argument);\n\n      // Exclusive for complex elements such as checkboxes, and list\n      if (control.element) {\n        control.element.find(\".bz-container-render-cell1, .ui-bizagi-render-control\").css({\n          \"background-color\": argument,\n          \"background-image\": argument });\n\n      }\n    }\n  },\n  /*\r\n      *   Changes the background for a cell\r\n      */\n  changeCellColor: function changeCellColor(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeCellColor(argument);\n    }\n  },\n  /*\r\n      *   Changes the visibility for a cell\r\n      */\n  changeCellVisibility: function changeCellVisibility(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeCellVisibility(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).visible = argument;\n\n      // Bind/Ubind the render change, so it can works with actions and validations as needed\n      if (control.properties.editable && argument) {\n        self.bindRenderChange(self.getColumn(xpath), key, true);\n      } else {\n        self.bindRenderChange(self.getColumn(xpath), key, false);\n      }\n    }\n  },\n\n  /*\r\n      *   Changes the editability for a cell\r\n      */\n  changeCellEditability: function changeCellEditability(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeEditability(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).editable = argument;\n\n      // Bind/Unbind the render change, so it can works with actions and validations as neededn\n      if (control.properties.visible && argument) {\n        self.bindRenderChange(self.getColumn(xpath), key, true);\n      } else {\n        self.bindRenderChange(self.getColumn(xpath), key, false);\n      }\n    }\n  },\n\n  /*\r\n      *   Changes the min value for a cell\r\n      */\n  changeCellMinValue: function changeCellMinValue(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeMinValue(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).minValue = argument;\n    }\n  },\n\n  /*\r\n      *   Changes the max value for a cell\r\n      */\n  changeCellMaxValue: function changeCellMaxValue(key, xpath, argument) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.changeMaxValue(argument);\n      for (var j = 0, length = self.columns.length; j < length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).maxValue = argument;\n    }\n  },\n\n  cleanCellData: function cleanCellData(key, xpath) {\n    var self = this;\n    var control = self.getControlCell(key, xpath);\n\n    if (control) {\n      control.cleanData();\n      for (var j = 0; j < self.columns.length; j++) {\n        if (self.columns[j].properties.xpath == xpath) {\n          break;\n        }\n      }\n\n      var rows = self.properties.data.rows,i = 0,rowLength = rows.length;\n      for (; i < rowLength; i++) {\n        if (Number(key) === rows[i][0]) {\n          rows[i][j + 1] = [[\"\", \"\"]];\n          break;\n        }\n      }\n      self.cellOverrides[key] = self.cellOverrides[key] || {};\n      self.getCellOverride(key, j).value = null;\n    }\n  },\n\n  /**\r\n      * Triggers the grid plugin event\r\n      * @returns {}\r\n      */\n  triggerGridPluginHandler: function triggerGridPluginHandler() {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 0);\n\n    return self.grid.bizagi_grid_smartphone.apply(self.grid, args);\n  },\n\n  isValidGrid: function isValidGrid(invalidElements) {\n    var self = this;\n    var errorsMessage = [];\n    var form = self.getFormContainer();\n\n    if (typeof form.validationController !== \"undefined\")\n    form.validationController.clearValidationMessages();\n\n    self.isValid(errorsMessage);\n\n    if (errorsMessage.length > 0) {\n      if (typeof form.validationController !== \"undefined\") {\n        for (var i = 0, length = errorsMessage.length; i < length; i++) {\n          // Show validation message\n          form.validationController.showValidationMessage(errorsMessage[i].message, errorsMessage[i].xpath);\n        }\n      }\n\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  getLabel: function getLabel() {\n    var self = this;\n    return $(\".ui-bizagi-label\", self.element || self.observableElement);\n  },\n\n  changeBackgroundColor: function changeBackgroundColor(color) {\n    var self = this;\n    self._super(color);\n\n    var control = self.getControl();\n    control.find(\".bz-rn-grid-cn-header\").css(\"background-color\", color, \"!important\");\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  startLoading: function startLoading() {\n    bizagi.loading.start();\n  },\n  endLoading: function endLoading() {\n    bizagi.loading.stop();\n  } });","/*\r\n*   Name: BizAgi smartphone Render Letter Extension\r\n*   Author: oscaro\r\n*   Comments:\r\n*   -   This script will redefine the letter render class to adjust to smartphones devices\r\n*/\n\n// Extends itself\nbizagi.rendering.letter.extend(\"bizagi.rendering.letter\", {}, {\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n\n    properties.editable = false;\n  } });","/**\r\n*   Name: Bizagi Smartphone Render Button Extension\r\n*   Author: Bizagi UI Forms\r\n*   Comments:\r\n*   -   This script will redefine the button render class to adjust to smartphone devices\r\n*/\n\nbizagi.rendering.button.extend(\"bizagi.rendering.button\", {}, {\n\n  /**\r\n                                                                *   Template method to implement in each device to customize each render after processed\r\n                                                                */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    $.when(self.renderControl()).done(function () {\n      self.input = $(\":button\", control).click(function () {\n        self.processButton();\n      });\n    }).always(function () {\n      if (properties.editable)\n      container.addClass(\"bz-command-edit-inline\");else\n      {\n        container.addClass(\"bz-rn-non-editable\");\n        self.input.prop(\"disabled\", true);\n      }\n    });\n  },\n\n  /**\r\n     *   Process the button actions workflow\r\n     */\n  processButton: function processButton() {\n    var self = this;\n    var properties = self.properties;\n\n    if (properties.editable) {\n      // Check if action need conformation\n      if (properties.needsUserConfirmation) {\n        $.when(bizagi.showConfirmationBox(properties.userConfirmationMessage, \"Bizagi\", \"warning\")).\n        done(function () {\n          // Trigger change\n          self.triggerRenderChange({ pressed: true });\n        });\n      } else {\n        if (!properties.preventDefault) {\n          self.runButtonAction();\n        }\n        // Trigger change\n        self.triggerRenderChange({ pressed: true });\n      }\n    }\n  },\n\n  runButtonAction: function runButtonAction() {\n    var self = this;\n\n    // Save the form prior opening the dialog\n    self.getFormContainer().clearValidationMessages();\n\n    self.saveForm().pipe(function () {\n      return self.executeButton();\n    }).done(function (result) {\n      if (result == null || result == true || result.result == \"success\" || result.type == \"success\") {\n        return self.refreshForm();\n      } else if (result.type == \"validationMessages\") {\n        try {\n          // Add validation messages \n          self.getFormContainer().addValidationMessage(result.messages);\n        } catch (e) {\n          bizagi.showMessageBox(result.messages, \"Error\");\n        }\n      }\n    }).fail(function (a, b, message) {\n      // Add error messages\n      try {\n        self.getFormContainer().addErrorMessage(message);\n      } catch (e) {\n        bizagi.showMessageBox(message, \"Error\");\n      }\n    });\n  },\n\n  // rewrite method to prevent the button on the tablet be affected when customizing on other platforms\n  processLayout: function processLayout() {\n    var self = this;\n    var properties = self.properties;\n    var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\n\n    // Set required and visiblity\n    properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\n\n    if (properties.required) {\n      self.changeRequired(properties.required);\n    }\n\n    if (!visible) {\n      self.changeVisibility(visible);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render fileprint Extension\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.fileprint.extend(\"bizagi.rendering.fileprint\", {}, {\n  /*\r\n                                                                      *   Template method to implement in each device to customize each render after processed\r\n                                                                      */\n  renderSingle: function renderSingle() {\n    var self = this;\n    self.getControl().parent().hide();\n  } });","/*\r\n *   Name: Bizagi smartphone Render Link Extension\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\nbizagi.rendering.link.extend(\"bizagi.rendering.link\", {}, {\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n    var link = $(\".ui-bizagi-render-link\", control);\n\n    self.input = control.find(\"a\");\n    self.getArrowContainer().hide();\n\n    if (self.properties.value) {\n      self.configureHandlers();\n    } else {\n      link.addClass(\"ui-state-disabled\");\n      container.addClass(\"bz-rn-non-editable\");\n    }\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value The control's value that is needed to be displayed\r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n\n    if (self.isValidValue(value)) {\n      //Get the decoded version of the URL\n      value = getFullyDecodedURI($.trim(value));\n      self.input.attr(\"href\", value);\n    }\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var properties = self.properties;\n\n    self.input.on(\"click\", function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (self.isValidValue(properties.value)) {\n        var linkEncode = encodeURI(this.getAttribute(\"href\"));\n\n        if (properties.linktarget === \"newwindow\" || bizagi.util.isCordovaSupported()) {\n          window.open(linkEncode, \"_system\", \"location=yes\");\n        } else {\n          window.open(linkEncode, \"_system\");\n        }\n      }\n    });\n  },\n\n  /**\r\n      * Checks if the value is a valid url (http/https valid urls)\r\n      *\r\n      * @param {String} value Stored value in the control\r\n      */\n  isValidValue: function isValidValue(value) {\n    return value && $.trim(value + \"\").toLowerCase().match(/^(http|https):\\/\\//) !== null || false;\n  } });","/**\r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.checkList\", {}, {\n\n  /**\r\n                                                                       *   Template method to implement in each device to customize each render after processed\r\n                                                                       */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    // Call base \n    this._super();\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n    self.properties.unique = Math.ceil(Math.random() * 1000);\n    // Apply plugin\n    //$(\".ui-bizagi-render-checkList-label\", self.checkListGroup).check();\n  },\n\n  /**\r\n      *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    // Call base\n    self._super();\n    $(\"input[type=checkbox]\", self.checkListGroup).bind(\"change\", function (evt, ui) {\n      var itemId = $(this).data(\"item-guid\");\n      var checked = false;\n      if ($(this).hasClass(\"bz-check\")) {\n        $(this).removeClass(\"bz-check\").addClass(\"bz-full-ball\");\n        checked = false;\n      } else {\n        $(this).removeClass(\"bz-full-ball\").addClass(\"bz-check\");\n        checked = true;\n      }\n\n      self.onCheckListGroupChange(itemId, checked);\n    });\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.checked = checked;\n  },\n\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  clearDisplayValue: function clearDisplayValue() {\n    var self = this;\n    $(\"input[type=checkbox]\", self.checkListGroup).removeAttr(\"checked\");\n  },\n\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n  } });","/*\r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\n\n// Extends from base list\nbizagi.rendering.checkList.extend(\"bizagi.rendering.activityCheckList\", {}, {\n\n  /*\r\n                                                                               *   Template method to implement in each device to customize each render after processed\r\n                                                                               */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    // Call base\n    this._super();\n    self.header = $(\".ui-bizagi-render-checkList-activity-work\", self.element);\n    self.addButton = $(\".ui-bizagi-render-checkList-add-item\", self.control);\n    self.newItemName = $(\".ui-bizagi-render-checkList-input-name\", self.control);\n    self.separator = $(\".ui-bizagi-render-checkList-separator\", self.element);\n    self.goalActivity = $(\".ui-bizagi-render-checkList-goal-activity\", self.element);\n    self.addEditButton = $(\".add-edit-item-button-checklist\", self.control);\n    self.cancelEditButton = $(\".cancel-edit-item-button-checklist\", self.control);\n    self.additionalElements();\n    self.configureHandlers();\n    $(\".ui-bizagi-render-edition-arrow\", self.getControl().parent()).hide();\n\n    self.notifyLoadItems();\n  },\n\n  notifyLoadItems: function notifyLoadItems() {\n    var self = this;\n    setTimeout(function () {\n      var resolvedItems = self.properties.items.filter(function (i) {\n        return i.resolved;\n      }).length;\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': true,\n        'idActivity': self.properties.idActivity,\n        'itemsResolved': resolvedItems,\n        'items': self.properties.items,\n        'progress': self.properties.activityWork }));\n\n\n      bizagi.webpart.publish(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\n    }, 100);\n  },\n\n  additionalElements: function additionalElements() {\n    var self = this;\n    var control = self.getControl();\n    var activityWorkTitle = this.getResource(\"render-activity-check-list-activitywork\") + \" (\" + self.properties.activityWork + \"%)\";\n    var activityFormTitle = this.getResource(\"render-activity-check-list-form\");\n    if (!(self.header && self.header.length > 0)) {\n      self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-activity-work\").append($(\"<span/>\").text(bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\"))));\n    }\n    if (!(self.goalActivity && self.goalActivity.length > 0)) {\n      if (self.properties.activityDescription && self.properties.activityDescription !== \"\") {\n        self.element.prepend($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-goal-activity\").append(\"<h4><span class='ui-bizagi-wp-bold'>\" +\n        bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") +\n        \": </span><span>\" + self.properties.activityDescription + \"</span></h4>\"));\n      }\n    }\n    if (!(self.addButton && self.addButton.length > 0)) {\n      self.control.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-add-item\").append($(\"<button/>\").text(\"+\")));\n    }\n    if (!(self.separator && self.separator.length > 0)) {\n      self.element.append($(\"<div/>\").addClass(\"ui-bizagi-render-checkList-separator\").append($(\"<span/>\").text(activityFormTitle)));\n    }\n    if (self.addEditButton && self.addEditButton.length > 0) {\n      self.addEditButton.hide();\n    }\n    if (self.cancelEditButton && self.cancelEditButton.length > 0) {\n      self.cancelEditButton.hide();\n    }\n    control.parent().addClass(\"render-activity-check\");\n  },\n\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    this._super();\n    $(\".ui-bizagi-render-checkList-add-item button\", control).unbind(\"click\").click(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      if (itemSelected.length <= 0) {\n        self.prepareNewItem();\n      } else {\n        $(\".ui-bizagi-render-checkList-input-name\", itemSelected).focus();\n      }\n    });\n\n    $(\".delete-item-from-activity\", self.control).bind(\"click\", function () {\n      var that = this;\n      var message = bizagi.localization.getResource(\"workportal-widget-reports-confirm\");\n      var contentHolder = $(this).closest(\".ui-bizagi-render-checkList-item\");\n\n      contentHolder.addClass(\"ui-bizagi-to-remove\");\n\n      $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\")).\n      done(function () {\n\n        var itemId = $(that).closest(\".ui-bizagi-render-checkList-item\").data(\"item-guid\");\n\n        self.deleteItem(itemId);\n        self.addButton.show();\n\n      }).fail(function () {\n        contentHolder.removeClass(\"ui-bizagi-to-remove\");\n      });\n    });\n\n    $(\".activity-work-items\", self.control).bind(\"click\", function () {\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemId = element.data(\"item-guid\");\n      var itemPosition = element.data(\"item-position\");\n\n      self.selectItem(itemId, itemPosition);\n    });\n  },\n\n  selectItem: function selectItem(itemId) {\n    var self = this;\n\n    for (var i = 0, length = self.properties.items.length; i < length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items[i].selected = true;\n      } else {\n        self.properties.items[i].selected = false;\n      }\n    }\n\n    self.repaintControl();\n\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\");\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var itemContent = itemSelectedName.val();\n\n    itemSelectedName.focus();\n    itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\n    self.addButton.hide();\n\n    self.addSelectedHandlers();\n  },\n\n  deleteItem: function deleteItem(itemId) {\n    var self = this;\n\n    for (var i = 0, length = self.properties.items.length; i < length; i++) {\n      if (self.properties.items[i].guid === itemId) {\n        self.properties.items.splice(i, 1);\n        break;\n      }\n    }\n\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.addSelectedHandlers();\n  },\n\n  prepareNewItem: function prepareNewItem() {\n    var self = this;\n    var newItem = {\n      guid: Math.guid(),\n      resolved: false,\n      name: \"\",\n      selected: true };\n\n\n    self.properties.items.push(newItem);\n    self.repaintControl();\n    self.addButton.hide();\n    self.newItemName.focus();\n\n    self.newItemName.blur(function () {\n      var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n      var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n      var valueInput = itemSelectedName.val();\n\n      if (valueInput === \"\" && self.properties.items && self.properties.items.length >= 1 &&\n      self.properties.items.slice(-1)[0].name === \"\") {\n        self.properties.items.pop();\n      }\n    });\n    self.addSelectedHandlers();\n    self.newItemName.keypress(function (event) {\n      if (event.which == 13) {\n        event.preventDefault();\n        self.addItem();\n        self.prepareNewItem();\n      }\n    });\n  },\n\n  addSelectedHandlers: function addSelectedHandlers() {\n    var self = this;\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    itemSelectedName.focus();\n    $(\".add-item-button-checklist\", itemSelected).bind(\"click\", function () {\n      var newItemName = itemSelectedName.val();\n      if (newItemName && newItemName !== \"\") {\n        self.addItem();\n      }\n    });\n    $(\".cancel-item-button-checklist\", itemSelected).bind(\"click\", function (e) {\n      var newItemName = itemSelectedName.val();\n      var element = $(this).closest(\".ui-bizagi-render-checkList-item\");\n      var itemPosition = element.data(\"item-position\");\n      var guidItem = element.data(\"item-guid\");\n\n      if (newItemName && newItemName !== \"\" && self.properties.items[itemPosition].name !== \"\") {\n        self.properties.items[itemPosition].selected = false;\n      }\n      if (newItemName === \"\" || self.properties.items[itemPosition].name === \"\") {\n        self.deleteItem(guidItem);\n      }\n      self.addButton.show();\n      self.repaintControl();\n    });\n  },\n\n  addItem: function addItem() {\n    var self = this;\n    var control = self.getControl();\n\n    var itemSelected = $(\".ui-bizagi-render-checkList-item.selected\", self.control);\n    var itemSelectedName = $(\".ui-bizagi-render-checkList-input-name\", itemSelected);\n    var newItemName = itemSelectedName.val();\n\n    $.each(self.properties.items, function (index, item) {\n      if (item.selected) {\n        item.name = newItemName;\n        item.selected = false;\n      }\n    });\n    self.updateOriginalValue();\n    self.setValue(self.properties.items);\n    self.repaintControl();\n    self.addButton.show();\n  },\n\n  repaintControl: function repaintControl() {\n    var self = this;\n    var control = self.getControl();\n    var checkListHtml = self.renderControl();\n    $(\".ui-bizagi-render-checkList\", self.control).replaceWith(checkListHtml);\n    self.postRenderSingle();\n  },\n\n  onCheckListGroupChange: function onCheckListGroupChange(itemId, checked) {\n    var self = this;\n    var item;\n    var items = $.grep(self.properties.items, function (element, index) {\n      return element.guid === itemId;\n    });\n    if (items && items.length > 0) {\n      item = items[0];\n    }\n    item.resolved = checked;\n    self.setValue(self.properties.items);\n    self.refreshValue(self.properties.items);\n  },\n\n  refreshValue: function refreshValue(items) {\n    var self = this,\n    control = self.getControl(),\n    length = items.length,\n    completed = 0;\n\n    for (var i = 0; i < length; i++) {\n      if (items[i].resolved) {\n        completed += 1;\n      }\n    }\n\n    if (length > 0) {\n      self.properties.activityWork = Math.floor(100 * completed / length);\n    } else\n    {\n      self.properties.activityWork = 100;\n    }\n\n    self.notifyLoadItems();\n  },\n\n  getValue: function getValue(data) {\n    var self = this;\n\n    return self.value || [];\n  },\n\n  controlValueIsChanged: function controlValueIsChanged() {\n    var self = this;\n    var originalValue = JSON.stringify(self.properties.originalValue);\n    var newValue = JSON.stringify(self.value);\n    return originalValue !== newValue;\n  },\n\n  /*\r\n      *   Updates original value for some comparisons\r\n      */\n  updateOriginalValue: function updateOriginalValue() {\n    var self = this;\n    self.properties.originalValue = bizagi.clone(self.value);\n  },\n\n  /*\r\n      *   Add the render data to the given collection in order to send data to the server\r\n      */\n  collectData: function collectData(renderValues) {\n    var self = this;\n    var properties = self.properties;\n\n    // Add the render value\n    var xpath = properties.xpath;\n    var value = self.getValue();\n    var idActivity = self.properties.idActivity;\n\n    if (self.controlValueIsChanged()) {\n      // Filter by valid xpaths and valid values\n      if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\n        if (Array.isArray(value)) {\n          renderValues[properties.xpath] = {\n            idActivity: idActivity,\n            items: value };\n\n        } else if (value === \"\") {\n          renderValues[properties.xpath] = \"\";\n        }\n      }\n    } else {\n      bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\n        'hasChanges': false }));\n\n    }\n  },\n\n  isValid: function isValid(invalidElements) {\n    var self = this,\n    properties = self.properties,\n    message;\n    var items = self.getValue();\n    message = self.getResource(\"render-activity-check-list-validation\");\n    for (var i = 0; i < items.length; i += 1) {\n      var item = items[i];\n      if (!item.resolved) {\n        invalidElements.push({\n          xpath: properties.xpath,\n          message: message });\n\n        break;\n      }\n    }\n  } });","/*\r\n *   Name: BizAgi Render Layout Image Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable image control inside templates\r\n *   -   This control is based on the image no flash render control\r\n */\n\nbizagi.rendering.layoutImage.extend(\"bizagi.rendering.layoutImage\", {},\n\n{\n  renderControl: function renderControl() {\n    var self = this;\n    var templateUri = self.renderFactory.getTemplate(\"layout-image\");\n    self.control = self.getControl();\n    return $.kendoTmpl(templateUri, {});\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n\n    if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\n      //Get image of customer in binary format\n      var url = self.getImageUri();\n      $.ajax({\n        url: url,\n        type: \"GET\",\n        dataType: \"binary\",\n        processData: false,\n        success: function success(blob) {\n\n          if (typeof blob == \"string\") {\n            var xhr = arguments[2];\n            var contentType = xhr.getResponseHeader('Content-type');\n            blob = bizagi.util.media.byteArrayToBlob(bizagi.util.media.stringToByteArray(blob), contentType);\n          }\n\n          var urlCreator = window.URL || window.webkitURL;\n          var imageUrl = urlCreator.createObjectURL(blob);\n\n          $(control).find('img').attr(\"src\", imageUrl);\n        } });\n\n    }\n  },\n\n  /**\r\n      * Gets the url to get the array image\r\n      */\n  getImageUri: function getImageUri() {\n    var self = this;\n    var templateControl = self.parent.parent;\n    var renderParams = templateControl.properties.paramsRender || {};\n\n    var map = {\n      entity: self.value.guid,\n      surrogateKey: self.value.surrogateKey,\n      xpath: self.properties.xpath,\n      width: 96,\n      height: 96,\n      hash: self.value.value,\n      idcase: renderParams.idRender ? renderParams.formParams.idCase : \"_\",\n      idworkitem: renderParams.idRender ? renderParams.formParams.idWorkitem : \"_\",\n      contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\" };\n\n\n    return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\n  },\n  /**\r\n      *   Sets the value in the rendered control\r\n      */\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    return [self.value];\n  } });","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n *   -   This control is based on the link render control\r\n */\n\nbizagi.rendering.layoutLink.extend(\"bizagi.rendering.layoutLink\", {}, {\n  /*\r\n                                                                         *   Template method to implement in each children to customize each control\r\n                                                                         */\n  renderSingle: function renderSingle() {\n    var self = this;\n    var container = self.getContainerRender();\n    container.addClass(\"bz-command-not-edit\");\n    self.value = undefined;\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var element = self.element;\n    if (element) {\n      element.on(\"click\", $.proxy(self.onClickElement, self));\n    }\n  },\n\n  onClickElement: function onClickElement() {\n    var self = this,\n    params = {\n      \"displayName\": self.properties.displayName,\n      \"navigateFromRender\": false,\n      \"reference\": self.properties.reference,\n      \"referenceType\": self.properties.referenceType,\n      \"xpath\": self.properties.xpath };\n\n    if (bizagi.kendoMobileApplication && bizagi.kendoMobileApplication.view().id == \"#renderSplitView\") {\n      params.navigateFromRender = true;\n    }\n    self.triggerGlobalHandler(\"DATA-NAVIGATION\", params);\n  } });","/*\r\n*   Name: BizAgi Render Layout Label Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for labels inside templates\r\n*/\n\nbizagi.rendering.layoutLabel.extend(\"bizagi.rendering.layoutLabel\", {}, {\n\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    self.properties.displayName = val;\n    this._super(val, triggerEvents);\n    var control = self.getControl();\n    if (control) {\n      $(\".ui-bizagi-render-label\", control).text(val);\n    }\n  } });","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\n\nbizagi.rendering.layoutText.extend(\"bizagi.rendering.layoutText\", {}, {\n  setDisplayValue: function setDisplayValue(value) {\n  } });","/*\r\n*   Name: BizAgi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.layoutDateTime.extend(\"bizagi.rendering.layoutDateTime\", {}, {});","/*\r\n *   Name: BizAgi Desktop Render Template number Extension\r\n *   Author: Mauricio Sanchez\r\n *   Comments:\r\n *   -   This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutNumber.extend(\"bizagi.rendering.layoutNumber\", {}, {\n  /**\r\n                                                                             * Sets the value in the rendered control\r\n                                                                             */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n    val = typeof val === \"undefined\" || val === null ? \"\" : self.getDisplayValue(val);\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  },\n\n  /**\r\n      * Returns the display value of the render\r\n      */\n  getDisplayValue: function getDisplayValue(value) {\n    var self = this;\n    var properties = self.properties;\n    var label = $('<label/>').html(value); // To get the display value by the format currency plugin, because it requires a control\n\n    label.formatCurrency({\n      symbol: properties.symbol,\n      positiveFormat: properties.positiveFormat,\n      negativeFormat: properties.negativeFormat,\n      decimalSymbol: properties.decimalSymbol,\n      digitGroupSymbol: properties.digitGroupSymbol,\n      groupDigits: properties.groupDigits,\n      roundToDecimalPlace: properties.numDecimals,\n      colorize: properties.colorize });\n\n\n    return [label.text()];\n  } });","/*\r\n *   Name: BizAgi Desktop Render Template Money Extension\r\n *   Author: Andres Fernando Muoz\r\n *   Comments:\r\n *   -   This script will redefine the money render class inside templates to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.layoutMoney.extend(\"bizagi.rendering.layoutMoney\", {}, {\n  /**\r\n                                                                           * Sets the value in the rendered control\r\n                                                                           */\n  setValue: function setValue(val, triggerEvents) {\n    var self = this;\n    var control = self.getControl();\n\n    val = typeof val === \"undefined\" || val === null ? \"\" : self.getDisplayValue(val);\n    self.properties.displayName = val;\n\n    this._super(val, triggerEvents);\n    if (control) {\n      $(\".ui-bizagi-render-number\", control).text(val);\n    }\n  } });","/*\r\n *   Name: BizAgi Desktop Render Layout Upload\r\n *   Author: Bizagi\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\n\nbizagi.rendering.layoutUpload.extend(\"bizagi.rendering.layoutUpload\", {}, {\n  /**\r\n                                                                             *   Template method to implement in each children to customize each control\r\n                                                                             */\n  renderControl: function renderControl() {\n    var self = this,\n    properties = self.properties,\n    defer = $.Deferred();\n\n    $.when(self.getValueFilesByData(bizagi.clone(properties))).done(function (properties, valueResult) {\n      self.properties = properties;\n      self.files = valueResult.files;\n      defer.resolve(self.getHTMLFiles());\n    });\n\n    return defer.promise();\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var filesLinkElements = control.find(\".ui-bizagi-render-upload-item a\");\n\n    filesLinkElements.on(\"click\", function () {\n      bizagi.loading.start();\n      $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\n        if (error.responseText) {\n          self.getFormContainer().failHandler(error.responseText);\n        }\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  getHTMLFiles: function getHTMLFiles() {\n    var self = this;\n    var files = $.map(self.files, function (el) {\n      var file = { \"id\": el[0], \"filename\": el[1] };\n      file.url = self.buildItemUrl(file);\n      return file;\n    });\n\n    var template = self.renderFactory.getTemplate(\"layout-upload\");\n    return $.kendoTmpl(template, { \"files\": files });\n  },\n\n  /**\r\n      *   Builds the upload item url\r\n      */\n  buildItemUrl: function buildItemUrl(file) {\n    var self = this,\n    properties = self.properties;\n\n    var form = self.getFormContainer();\n\n    return self.dataService.getUploadFileEntityUrl({\n      isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\n      xpath: self.getUploadXpath(),\n      fileId: file.id,\n      idRender: form.properties.paramsRender.idRender || \"undefined\",\n      xpathContext: properties.xpathContext,\n      idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\n      xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\n      sessionId: form.properties.sessionId,\n      surrogatekey: self.properties.value.surrogateKey,\n      guidentity: self.properties.value.guid });\n\n  } });","/*\r\n *   Name: BizAgi Render Image Class\r\n *   Author: Bizagi Mobile Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to smathphone devices\r\n */\n\n// Extends itself\n//noinspection JSValidateTypes\nbizagi.rendering.image.extend(\"bizagi.rendering.image\", {\n  QUALITY_PICTURE: 50,\n  EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"] },\n{\n  /**\r\n   * Just listing the order of function calls (bizagi.rendering.render)\r\n   * 1. renderControl (found it on bizagi.rendering.image)\r\n   * 2. postRender / postRenderReadOnly / postRenderPrintVersion\r\n   * 3. configureHandlers / configureHandlersReadOnly\r\n   *\r\n   * Other functions are just local implementation\r\n   *\r\n   */\n\n  /**\r\n       * DOM elements to use as an ADD option button\r\n       * @var $actionImage jQuery DOM\r\n       */\n  $addImage: null,\n  /**\r\n                    * DOM elements to use as a REMOVE option button\r\n                    * @var $actionImage jQuery DOM\r\n                    */\n  $deleteImage: null,\n  /**\r\n                       * DOM input to handle HTML uploads\r\n                       * @var $inputFile jQuery DOM\r\n                       */\n  $inputFile: null,\n  /**\r\n                     * Whether or not is a native device 'Just a shortcut\r\n                     * @var isNative boolean\r\n                     */\n  isNative: false,\n  /**\r\n                    * Whether or not we are offline 'Just a shortcut\r\n                    * @var isOfflineForm boolean\r\n                    */\n  isOfflineForm: false,\n\n  /**\r\n                         * This method tries to get the HTML template an render the current object inside\r\n                         * @return {jQuery} $.Deferred()\r\n                         */\n  renderControl: function renderControl() {\n    var self = this;\n    var properties = self.properties;\n\n    /**\r\n                                       * Check if this is an offline form\r\n                                       * It doesn't validate if the device goes offline so.. (but smartphone)\r\n                                       */\n    //this.isOfflineForm = bizagi.util.isOfflineForm({ context: this });\n    this.isOfflineForm = false;\n    this.isNative = bizagi.util.isCordovaSupported();\n\n    var template = self.renderFactory.getTemplate(\"image\");\n\n    var allowDelete = self.isOfflineForm ? false : properties.allowDelete && properties.editable;\n    return $.kendoTmpl(template, {\n      url: \"\",\n      allowDelete: allowDelete,\n      editable: properties.editable });\n\n  },\n\n  getElementsToStylize: function getElementsToStylize(context) {\n    return $({});\n  },\n\n  /**\r\n      * There is no difference when rendering a readonly image, so ...\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  renderReadOnly: function renderReadOnly() {\n    return this.renderControl();\n  },\n\n  /**\r\n      * After rendering element\r\n      */\n  postRender: function postRender() {\n  },\n\n  /**\r\n      * After rendering a readonly element\r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    // Just a little colors\n    this.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n  },\n\n  /**\r\n      * Add action handlers\r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var version = bizagi.util.getAndroidVersion();\n    var resolutionUpload = [];\n\n    this.$addImage = $(\".bz-rn-image-actions-add\", this.getControl());\n    this.$deleteImage = $(\".bz-rn-image-actions-delete\", this.getControl());\n    this.$inputFile = $(\".bz-rn-upload-image-web\", this.getControl());\n\n    this._super();\n\n    if (this.isNative) {\n      // Upload Image Options\n      this.$addImage.off(\"click\").actionSheet({\n        actions: [\n        {\n          \"guid\": 1,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\") },\n\n        {\n          \"guid\": 2,\n          \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\") }],\n\n\n        actionClicked: function actionClicked(action) {\n          switch (action.guid) {\n            case 1:\n              self.imageAdd();\n              break;\n            case 2:\n              self.imageAdd(true);\n              break;\n            default:}\n\n        },\n        appear: function appear(action) {\n          self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n        },\n        cancelClicked: function cancelClicked(action) {\n          self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n        } });\n\n    } else {\n      if (bizagi.util.media.fileAPISupported()) {\n        this.$addImage.off(\"click\").click(function () {\n          self.$inputFile.click();\n        });\n      } else {\n        this.element.addClass(\"bz-rn-read-only bz-rn-non-editable\");\n        this.$addImage.removeClass(\"bz-plus\").addClass(\"bz-rn-read-only\");\n      }\n    }\n\n    // remove Image\n    this.$deleteImage.off(\"click\").click(function () {self.imageDelete();});\n    // Image change (Hybrid only)\n    this.$inputFile.off(\"change\").on(\"change\", function () {\n      self.imageAdd();\n      this.value = \"\";\n    });\n\n    // Just in case\n    this.$inputFile.off(\"click\").on(\"click\", function (e) {e.stopPropagation();});\n\n    // Resolution upload menu\n    // If android version is less than 4.4 avoid to show upload sizes due to compatibility with blob files\n    if (version && version <= 4.4) {\n      resolutionUpload = [\n      { \"guid\": 4, \"displayName\": bizagi.localization.getResource(\"workportal-size-original\") }];\n\n    } else {\n      resolutionUpload = bizagi.util.media.getImageResolutionItems();\n    }\n\n    $(\".bz-resolution-container\", self.getControl()).off(\"click\").actionSheet({\n      actions: resolutionUpload,\n      actionClicked: function actionClicked(action) {\n        bizagi.loading.start();\n        $.when(self.resolutionButtonHandler(action.guid)).\n        always(function () {\n          bizagi.loading.stop();\n        });\n      },\n      appear: function appear(action) {\n        self.triggerGlobalHandler(\"modalViewDidAppear\", {});\n      },\n      cancelClicked: function cancelClicked(action) {\n        self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\n      } });\n\n  },\n\n  clearDisplayValue: function clearDisplayValue() {\n    this.$deleteImage.click();\n  },\n\n  /**\r\n      * Add an image\r\n      * @param useCamera boolean Whether or not to use device's camera\r\n      */\n  imageAdd: function imageAdd(useCamera) {\n\n    var self = this;\n\n    if (!this.isNative) {\n      var dataFile = this.$inputFile[0].files[0];\n      dataFile.fullPath = this.$inputFile[0].value;\n      var extensions = this.Class.EXTENSIONSIMG;\n\n      bizagi.loading.start();\n      if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.\n      checkFileTypes(dataFile, self.properties, extensions)) {\n\n        $.when(self.uploadFile(dataFile)).done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n\n      } else {\n        bizagi.loading.stop();\n      }\n    } else {\n\n      var options = {\n        quality: self.Class.QUALITY_PICTURE,\n        targetWidth: 1280,\n        targetHeight: 960,\n        correctOrientation: true };\n\n\n      if (!useCamera) {\n        var coordinates = self.getControl()[0].getBoundingClientRect();\n        //noinspection JSUnresolvedVariable,JSUnresolvedFunction\n        options = {\n          quality: self.Class.QUALITY_PICTURE,\n          sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n          popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\n          destinationType: navigator.camera.DestinationType.FILE_URI,\n          correctOrientation: true };\n\n      }\n\n      //noinspection JSUnresolvedFunction,JSUnresolvedVariable\n      navigator.camera.getPicture(function (dataImage) {\n\n        bizagi.loading.start();\n\n        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\n          return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\n            if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\n              self.dataImage = dataImage;\n              self.fileProperties = fileData;\n              // \"new Blob\" constructor is not supported in android version 4.2.2\n              var version = bizagi.util.getAndroidVersion();\n              if (version && version <= 4.2 || self.isOfflineForm) {\n                return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n                  self.uploadFileCompleted(self);\n                }).fail(function (error) {\n                  self.executeFormFailHandler(error);\n                }).always(function () {\n                  bizagi.loading.stop();\n                });\n\n              } else {\n\n                if (!bizagi.util.isAndroid()) {\n                  return $.when(bizagi.util.media.modalResolutionUpload()).then(\n                  function (buttonIndex) {\n                    if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\n                      return self.resolutionButtonHandler(buttonIndex);\n                    }\n                  });\n\n                } else {\n                  // force click to show actionsheet menu\n                  $(\".bz-resolution-container\", self.getControl()).click();\n                }\n\n              }\n            }\n          });\n\n        }).always(function () {\n          bizagi.loading.stop();\n        });\n      }, self.onFail, options);\n    }\n  },\n\n\n  /**\r\n      * onFail\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  onFail: function onFail(error) {\n    bizagi.util.smartphone.stopLoading();\n  },\n\n  /**\r\n      * Remove the current image\r\n      */\n  imageDelete: function imageDelete() {\n    var self = this;\n    bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).\n    done(function () {\n      bizagi.loading.start();\n      $.when(self.dataService.deleteImage({\n        url: self.properties.deleteUrl,\n        idRender: self.properties.id,\n        xpath: self.properties.xpath,\n        xpathContext: self.properties.xpathContext,\n        idPageCache: self.properties.idPageCache,\n        contexttype: self.properties.contexttype })).\n      done(function () {\n        self.uploadFileCompleted(self);\n      }).fail(function (msg) {\n        var message;\n        var responseText = msg.responseText;\n\n        try {\n          message = JSON.parse(responseText);\n          message = message.message || responseText;\n        } catch (e) {\n          message = responseText;\n        }\n        bizagi.showMessageBox(message, \"Error\");\n\n      }).always(function () {\n        bizagi.loading.stop();\n      });\n    });\n  },\n\n  /**\r\n      * Send file using HTTP\r\n      * @param dataFile\r\n      * @return {jQuery} $.Deferred()\r\n      */\n  uploadFile: function uploadFile(dataFile) {\n\n    var self = this;\n    var defer = new $.Deferred();\n\n    if (!this.isOfflineForm) {\n\n      // Fix android 4.4 getting images from recent folder\n      if (this.isNative) {\n\n        //noinspection JSUnresolvedFunction\n        var params = {};\n        var addParams = self.buildAddParams();\n        var fileName = self.fileProperties.name;;\n\n        if (self.editedImageURL) {\n          params.dataFile = self.editedImageURL;\n        } else if (self.fileProperties) {\n          params.dataFile = self.fileProperties.url;\n        }\n\n        addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\n        params.data = addParams;\n        params.options = new FileUploadOptions();\n        params.options.fileKey = \"file\";\n        params.options.fileName = fileName;\n        params.options.mimeType = \"image/jpeg\";\n        params.options.uploadKey = { key: addParams[\"h_xpath\"] };\n        params.options.addUrl = self.properties.addUrl;\n\n        //Cleans variables related previous uploads\n        self.editedImageURL = null;\n        self.fileProperties = null;\n\n        // Fix android 4.4 getting images from recent folder\n        params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\n\n        $.when(bizagi.util.media.uploadFile(params)).done(function (r) {\n          var response = JSON.parse(decodeURIComponent(r.response));\n          if (response.type === \"error\") {\n            defer.reject(response);\n          } else {\n            defer.resolve(response);\n          }\n        }).fail(function (error) {\n          defer.reject(error);\n        });\n      } else {\n\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\n        bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\n\n          self.dataService.processUploadFile({\n            url: self.properties.addUrl,\n            formData: self.buildAddFileParams(dataFile) }).\n          done(function (response) {\n            defer.resolve(response);\n          }).fail(function (error) {\n            defer.reject(error);\n          });\n        } else {\n          defer.reject();\n        }\n      }\n    } else {\n      // Load image\n      self.saveImageOffline(self, dataFile, function (dataUrl) {\n        self.setValue(dataUrl);\n        defer.resolve();\n      });\n\n      // Enables canbesent on offline mode\n      self.canBeSent = function () {\n        return true;\n      };\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * File upload is done\r\n      * @param context\r\n      */\n  uploadFileCompleted: function uploadFileCompleted(context) {\n    var self = context;\n\n    try {\n      self.showAsyncImage();\n      self.editedImageURL = null;\n    } catch (error) {\n      self.getFormContainer().refreshForm();\n    }\n  },\n  /**\r\n      * Show async image\r\n      * */\n  showAsyncImage: function showAsyncImage() {\n    var self = this;\n    var control = self.getControl();\n\n    $.when(self.buildItemUrl()).done(function (dataUrl) {\n      if (!self.isDisposed()) {\n        self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\n        self.properties.value = self.properties.url.length > 0 ? [self.properties.url] : null;\n        self.setValue(self.properties.value);\n\n        if (self.isOfflineForm && dataUrl.indexOf(\"Invalid case id\") !== -1) {\n          self.properties.url = \"\";\n        }\n\n        control.find(\".bz-rn-image-container\").off(\"click\").toggleClass(\"bz-rn-image-actions-add\",\n        self.properties.editable && self.properties.url === \"\");\n\n        if (self.properties.url !== \"\") {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"inherit\").\n          attr(\"src\", self.properties.url);\n          control.find(\".bz-rn-image-container img\").off(\"click\").click(function () {self.renderEdition();});\n          control.find(\".bz-rn-image-actions-add\").toggle(self.properties.editable);\n          control.find(\".bz-rn-image-actions-delete\").\n          toggle(self.properties.allowDelete && self.properties.editable);\n        } else {\n          control.find(\".bz-rn-image-container img\").css(\"display\", \"none\");\n          control.find(\".bz-rn-image-actions-add.bz-upload\").hide();\n          control.find(\".bz-rn-image-actions-delete\").hide();\n        }\n        self.configureHandlers();\n      }\n    });\n  },\n\n  /**\r\n      * Create an image offline\r\n      * @param context\r\n      * @param url\r\n      * @param callback\r\n      */\n  saveImageOffline: function saveImageOffline(context, url, callback) {\n    var control = this.getControl();\n    var image = new Image();\n\n    image.onload = function () {\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = this.width;\n      canvas.height = this.height;\n\n      canvas.getContext(\"2d\").drawImage(this, 0, 0);\n\n      // Get raw image data\n      var dataUrl = canvas.toDataURL(\"image/png\");\n      callback(dataUrl.replace(/^data:image\\/(png|jpg|jpeg);base64,/, \"\"));\n    };\n\n    image.src = url;\n    control.find(\"img\").replaceWith(image);\n    control.find(\".bz-cm-icon.image-file\").replaceWith(image);\n  },\n\n  /**\r\n      * resolutionButtonHandler\r\n      * @param buttonOrdinal\r\n      */\n  resolutionButtonHandler: function resolutionButtonHandler(ordinal) {\n    var self = this;\n    var actionSelected = ordinal || 0;\n\n    // If original, save image normally, if not, reduce quality and size\n    if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\n\n      return $.when(self.uploadFile(self.dataImage)).done(function (result) {\n        self.uploadFileCompleted(self);\n      }).fail(function (error) {\n        self.executeFormFailHandler(error);\n      });\n\n    } else {\n\n      var resolution = bizagi.util.media.getImageResolution(actionSelected);\n\n      return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).\n      then(function (result) {\n\n        self.editedImageURL = result.localUrl;\n        self.properties.url = result.base64Image;\n\n        return $.when(self.uploadFile(self.dataImage)).\n        done(function (result) {\n          self.uploadFileCompleted(self);\n        }).fail(function (error) {\n          self.executeFormFailHandler(error);\n        });\n\n      });\n    }\n\n  },\n\n  /**\r\n      * Call the form failhandler with an specific error\r\n      * @param {} error\r\n      * @returns {}\r\n      */\n  executeFormFailHandler: function executeFormFailHandler(error) {\n    var self = this;\n    var errorResponse = error.responseText ? error.responseText :\n    bizagi.localization.getResource(\"workportal-general-error\");\n    self.getFormContainer().failHandler(errorResponse);\n  },\n\n  /**\r\n      * Smartphone compatibility mode\r\n      */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    self._super();\n\n    self.configureHandlers();\n    self.configureHelpText();\n\n    // Some compat for the smartphone weird behavior\n    if (!self.properties.editable) {\n      self.postRenderReadOnly();\n    }\n\n    self.showAsyncImage();\n  },\n\n  /**\r\n      * Render edition view\r\n      * @returns {}\r\n      */\n  renderEdition: function renderEdition() {\n    var self = this;\n    var properties = self.properties;\n\n    // TODO Creates a container, be careful you must destroy it later\n    var baseParams = self.getParams();\n    var container = baseParams.navigation.createRenderContainer(\n    {\n      title: properties.displayName,\n      view: {\n        zoom: true,\n        useNativeScrolling: false } });\n\n\n\n\n    var img = $.kendoTmpls(self.renderFactory.getTemplate(\"image-preview\"),\n    { \"url\": self.value && self.value[0] !== \"\" ? self.value[0] : \"\" });\n    container.element.css(\"display\", \"none\");\n    self.inputEdition = container.element.html(img);\n    baseParams.navigation.navigate(container.id);\n\n    bizagi.loading.start();\n\n    //TODO review fail scenario, should it call the forms.failHandler method?\n    $.when(self.buildFullItemUrl()).done(function (dataUrl) {\n      container.element.css(\"display\", \"block\");\n\n      if (dataUrl.indexOf(\"error\") < 0) {\n        var $preview = $(\".bz-rn-image-render-preview:first\", container.element).attr(\"src\", dataUrl);\n        var originalImageWidth = $preview.css(\"width\");\n        originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\n\n        if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\n          $preview.css(\"width\", \"100%\");\n        }\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n\n  },\n\n  /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\n  buildAddFileParams: function buildAddFileParams(dataFile) {\n    var self = this;\n    var properties = self.properties;\n\n    // Get form data for POSTing\n    var formData = new FormData();\n    var form = self.getFormContainer();\n\n    // Build add params to send to the server\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\", properties.xpath);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\", properties.id);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\", properties.xpathContext);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE, properties.idPageCache);\n    formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\n    formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\", \"savefile\");\n    formData.append(self.properties.xpath, dataFile);\n\n    if (properties.contexttype) {\n      formData.append(self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\", properties.contexttype);\n    }\n\n    try {\n      if (typeof BIZAGI_SESSION_NAME !== \"undefined\") {\n        formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\n      } else {\n        formData.append(\"JSESSIONID\", form.properties.sessionId);\n      }\n    } catch (e) {\n      formData.append(\"JSESSIONID\", form.properties.sessionId);\n    }\n\n    return formData;\n\n  },\n\n  /**\r\n      * postRenderEdition\r\n      */\n  postRenderEdit: function postRenderEdit() {\n    //Override the super behavior and do nothing, it is ok to do this don't remove.\n  } });","/*\r\n *   Name: BizAgi Tablet Render Form Link Extension\r\n *   Author: Oscar O\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\n\n// Extends itself\nbizagi.rendering.formLink.extend(\"bizagi.rendering.formLink\", {\n  BA_ACTION_PARAMETER_PREFIX: \"p_\",\n  BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\n  BA_PAGE_CACHE: \"pageCacheId\" },\n{\n  init: function init(params) {\n    // Call base\n    this._super(params);\n    params.context = params.context || \"workflow\";\n    var paramsRender = $.extend({}, this._params, { \"proxyPrefix\": this.dataService.serviceLocator.proxyPrefix, \"context\": this.dataService.serviceLocator.context });\n    this.serviceLocator = new bizagi.render.services.context(paramsRender);\n  },\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    var control = self.getControl();\n\n    self.getArrowContainer().hide();\n\n    if (properties.displayType === \"value\") {\n      self.changeDisplayOption(properties.displayType);\n    }\n    self.originalElement = self.element;\n    properties.orgiginalDisplayType = properties.displayType;\n    properties.displayType = \"normal\";\n    self.input = self.element = control.find(\"a\");\n\n    self._sendRelation = self.submitEditRequest;\n    self._getData = self.dataService.getFormData;\n    self._isRefreshForm = false;\n    self._params = {\n      idRender: properties.id,\n      xpathContext: self.getFormLinkXpathContext(),\n      idPageCache: properties.idPageCache,\n      recordXPath: self.getFormLinkXpath(),\n      requestedForm: \"linkform\",\n      editable: properties.editable,\n      url: properties.editPage };\n\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n  },\n\n  //para la grilla lo que se debe hacer es sobreescribir o crear los metodos params,sendrelation,getData\n  renderEdition: function renderEdition() {\n    var self = this;\n    var properties = self.properties;\n\n    self.container = self.getParams().navigation.createRenderContainer({ title: properties.displayName });\n    self.inputEdition = self.container.element;\n\n    if (self.properties.hasentryrule) {\n      var form = self.getFormContainer();\n      $.when(form.saveForm()).done(function () {\n        self.resolveCheckpointRequest().done(function () {\n          return self.openLinkRule(\"entryrule\");\n        }).fail(function (error) {\n          bizagi.log(\"Error: \" + err.code);\n        });\n      });\n    } else {\n      return self.openLink();\n    }\n  },\n\n  openLink: function openLink() {\n    var self = this;\n\n    //Renderiza de nuevo la forma, a travez de una promesa, asignandole el metodo Rollback en caso de cancelar la ultima transacin\n    return $.when(self._sendRelation.apply(self)).done(function () {\n      bizagi.util.smartphone.startLoading();\n      $.when(self.paintFormLink()).done(function () {\n        bizagi.util.smartphone.stopLoading();\n      }).fail(function () {//Executes Rollback action\n        bizagi.util.smartphone.startLoading();\n        self.rollbackForm();\n      }).always(function () {\n        bizagi.util.smartphone.stopLoading();\n      });\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n  },\n\n  openLinkRule: function openLinkRule(property) {\n    var self = this;\n    var def = new $.Deferred();\n\n    bizagi.util.smartphone.startLoading();\n\n    self.getPropertyValue(property, {}).\n    done(function (dataRuleResp) {\n      if (dataRuleResp.messages) {\n        var message = dataRuleResp.messages[0];\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(message);\n        def.reject();\n      } else {\n        if (property === \"entryrule\") {\n          self.openLink();\n        }\n      }\n      def.resolve();\n    }).fail(function () {\n      def.reject();\n    }).\n    always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n    return def.promise();\n  },\n\n  getPropertyValue: function getPropertyValue(propertyName, params) {\n    var self = this;\n    var properties = self.properties;\n    var defer = new $.Deferred();\n\n    self.dataService.multiaction().getPropertyData({\n      url: properties.dataUrl,\n      xpath: properties.xpath,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext,\n      idPageCache: properties.idPageCache,\n      property: propertyName,\n      extra: params,\n      dataType: params ? params.dataType : null }).\n    done(function (data) {\n      if (data.type === \"error\") {\n        // Workflow engine error, we gotta show it with error\n        var form = self.getFormContainer();\n        form.validationController.showErrorMessage(data.message);\n        defer.reject(data);\n      } else {\n        defer.resolve(data);\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      // Add error messages\n      var form = self.getFormContainer();\n      form.validationController.showErrorMessage(jqXHR.message);\n\n      defer.reject(jqXHR, textStatus, errorThrown);\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * postRenderEdition\r\n      */\n  postRenderEdit: function postRenderEdit() {\n  },\n\n  /**\r\n      *\r\n      */\n  paintFormLink: function paintFormLink() {\n    var self = this;\n    var deferred = $.Deferred();\n\n    $.extend(self._params, { \"proxyPrefix\": self.serviceLocator.proxyPrefix });\n\n    $.when(self._getData.call(self, self._params)).pipe(function (data) {\n      if (self._params.recordXPath) {\n        data.form.properties.recordXpath = self._params.recordXPath;\n      }\n\n      if (self._params.editable === false) {\n        data.form.properties.editable = false;\n      }\n\n      // Grid\n      if (self._params.hasOwnProperty(\"withAddForm\") && self._params.withAddForm) {\n        if (!data.form.elements || data.form.elements && data.form.elements.length === 0) {\n          self._params.hideSaveButton = true;\n        }\n      }\n\n      /**\r\n         * This creation of form on every action like refresh or save\r\n         * is driving nuts the listeners in native apps\r\n         */\n      self.form = self.renderFactory.getContainer({\n        type: \"form\",\n        data: data.form,\n        navigation: self.getParams().navigation,\n        wiew_container: self.container });\n\n\n      self.form.params = self.getFormContainer().getParams();\n\n      self.form.buttons = [\n      $.extend(\n      self.form.buttons[0] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 0,\n        \"action\": \"save\",\n        \"save\": true,\n        \"style\": \"\",\n        // This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          // When the data is saved then\n          return self.saveRecord().then(function () {\n            self.container.destroy();\n          }).fail(function (error) {\n            if (error && error.error_code && error.error_code == 1) {\n              //if doesn't support commit, rollback, etc.\n              $.when(self.actionSave(error.data)).then(function () {\n                self.container.destroy();\n              });\n            } else if (error && error.type == \"validationMessages\") {\n              self.form.addValidationMessage(error.messages);\n            } else if (error && error.responseText) {\n              bizagi.showMessageBox(error.responseText || \"Error\", \"Error\");\n            }\n          });\n        } }),\n\n      $.extend(\n      self.form.buttons[1] || {},\n      {\n        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\n        \"actions\": [\"submitData\", \"refresh\"],\n        \"submitData\": true,\n        \"refresh\": true,\n        \"ordinal\": 1,\n        \"action\": \"back\",\n        \"save\": true,\n        \"style\": \"\",\n        //This callback avoid to call the default processButton in the form\n        callback: function callback() {\n          self.container.destroy();\n          deferred.reject();\n        } })];\n\n\n\n      $.extend(self.form, {\n        processButtons: function processButtons() {\n          //not send information set in memory and save\n          $.each(self.form.buttons, function (index, element) {\n            switch (element[\"ordinal\"]) {\n              case 1: //next button will behave as a cancel button\n                $(self.form.getButtons()[index]).click(function () {\n                  self.container.destroy();\n                  deferred.reject();\n                });\n\n                self.form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n\n                self.form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\n                self.form.buttons[index].action = \"back\";\n                break;\n\n              default:\n                $(self.form.getButtons()[index]).click(function () {\n                  if (self._params.hideSaveButton) {\n                    $(self.form.getButtons()[index]).hide();\n                  }\n\n                  return self.saveRecord().then(function () {\n                    self.container.destroy();\n                  }).fail(function (error) {\n                    if (error && error.error_code && error.error_code == 1) {\n                      //if doesn't support commit, rollback, etc.\n                      $.when(self.actionSave(error.data)).then(function () {\n                        self.container.destroy();\n                      });\n                    } else\n                    {\n                      bizagi.showMessageBox(error.responseText || \"Error\", \"Error\");\n                    }\n                  });\n                });\n                break;}\n\n          });\n        } });\n\n\n      return self.form.render();\n\n    }, function (message) {\n      // FAIL FILTER\n      var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\n      $.kendoTmpls(errorTemplate, { message: message }).appendTo(self.inputEdition);\n\n      deferred.reject();\n    }).done(function (element) {\n      // Remove button container\n\n      self.inputEdition.html(element);\n      if (!self._isRefreshForm) {\n        self.getParams().navigation.navigate(self.container.id);\n      }\n\n      self.container.setNavigationButtons(self.form);\n\n      // Publish an event to check if the form has been set in the DOM\n      self.form.triggerHandler(\"ondomincluded\");\n\n      // Attach a refresh handler to recreate all the form\n      self.form.bind(\"refresh\", function () {\n        //TODO the parent who call this class implement redraw. see smartphone.grid _InternalRenderLinkForm\n        self.inputEdition.empty();\n        self._isRefreshForm = true;\n\n        //Adds the events to capture the\n        $.when(self.paintFormLink()).done(function () {}).\n        fail(function () {\n          self.submitRollbackRequest();\n        });\n      });\n\n      //Binds the view close event, and send the RollBack\n      self.container.element.bind(\"close\", function () {\n        self.rollbackForm();\n      });\n\n    }).always(function () {\n      bizagi.util.smartphone.stopLoading();\n    });\n\n    return deferred.promise();\n  },\n\n  hideHeadersButtonEdit: function hideHeadersButtonEdit() {\n    var self = this;\n    var context = self.getContextEdit();\n    var properties = self.properties;\n\n    if (properties.hideLabel) {\n      context.find(\".bz-cn-label\").hide();\n    }\n  },\n\n  setDisplayValueEdit: function setDisplayValueEdit() {},\n\n  /*\r\n                                                           *\r\n                                                           */\n  rollbackForm: function rollbackForm() {\n    var self = this;\n\n    $.when(self.submitRollbackRequest()).done(function () {\n      //Sends additional rollback request to delete checkpoint from entry rule\n      if (self.properties.hasentryrule) {\n        self.submitRollbackRequest();\n      }\n    });\n  },\n  /*\r\n      *\r\n      */\n  saveRecord: function saveRecord() {\n    var self = this;\n    var deferred = $.Deferred();\n    var properties = self.properties;\n\n    if (self.form.validateForm()) {\n      var data = {};\n      self.form.collectRenderValues(data);\n      // Add page cache for this form\n      data.idPageCache = self.form.getPageCache();\n\n      $.when(self.submitSaveRequest(data)).done(function (result) {\n        try {\n          var executeSubmitOnChange = true;\n          if (result && result.type == \"validationMessages\") {\n            executeSubmitOnChange = false;\n            deferred.reject(result);\n          }\n          if (properties.hasexitrule) {\n            self.closeExitRule().done(function () {\n              if (executeSubmitOnChange) {\n                self.resolveSubmitCommitRequest().then(function () {\n                  self.submitOnChange({}).then(function () {\n                    deferred.resolve(result);\n                    if (properties.hasentryrule) {\n                      self.resolveSubmitCommitRequest();\n                    }\n                  });\n                });\n              } else {\n                deferred.reject();\n              }\n            }).fail(function () {\n              deferred.reject();\n            });\n          } else if (executeSubmitOnChange) {\n            self.resolveSubmitCommitRequest().then(function () {\n              if (properties.hasentryrule) {\n                self.resolveSubmitCommitRequest().done(function () {\n                  self.submitOnChange({}).then(function () {\n                    deferred.resolve(result);\n                  });\n                });\n              } else {\n                self.submitOnChange({}).then(function () {\n                  deferred.resolve(result);\n                });\n              }\n            });\n          } else {\n            deferred.reject();\n          }\n        } catch (ex) {\n          deferred.reject();\n        }\n      }).fail(function (error) {\n        var err = JSON.parse(error.responseText || \"{message:'', code: ''}\");\n        if (err.code == \"UNKNOWN_ERROR\" && err.message.indexOf(\"Requested value\") !== -1 &&\n        err.message.indexOf(\"was not found\") !== -1) {\n          deferred.reject({ error_code: 1, data: data });\n        } else {\n          deferred.reject(error);\n        }\n      });\n    } else {\n      deferred.reject();\n    }\n\n    return deferred.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  submitSaveRequest: function submitSaveRequest(data) {\n    var self = this;\n    var properties = self.properties;\n\n    // Don't send request when the link is not editable\n    if (properties.editable === false && !properties.value) {\n      return null;\n    }\n\n    var xpath = self.getFormLinkXpath();\n\n    //saveGridRecord\n    return self.dataService.saveGridRecord({\n      url: properties.saveUrl,\n      idRender: properties.id,\n      xpathContext: properties.xpathContext === undefined || properties.xpathContext === \"\" ? xpath : xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext,\n      submitData: data });\n\n  },\n\n  /*\r\n     *\r\n     */\n  resolveSubmitCommitRequest: function resolveSubmitCommitRequest() {\n    var self = this;\n    var def = new $.Deferred();\n\n    self.submitCommitRequest().done(function () {\n      def.resolve();\n    }).fail(function (error) {\n      var err = JSON.parse(error.responseText || \"{message:'', code: ''}\");\n      if (err.code == \"UNKNOWN_ERROR\") {\n        def.resolve();\n      } else {\n        def.reject();\n      }\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n     *\r\n     */\n  resolveCheckpointRequest: function resolveCheckpointRequest() {\n    var self = this;\n    var def = new $.Deferred();\n\n    self.submitCheckpointRequest().done(function () {\n      def.resolve();\n    }).fail(function (error) {\n      var err = JSON.parse(error.responseText || \"{message:'', code: ''}\");\n      if (err.code == \"UNKNOWN_ERROR\" && err.message.indexOf(\"Requested value\") !== -1 &&\n      err.message.indexOf(\"was not found\") !== -1) {\n        def.resolve();\n      } else {\n        def.reject();\n      }\n    });\n\n    return def.promise();\n  },\n\n  /*\r\n      *\r\n      */\n  closeExitRule: function closeExitRule() {\n    var self = this;\n    var properties = self.properties;\n    var def = new $.Deferred();\n\n    if (properties.hasexitrule) {\n      $.when(self.openLinkRule(\"exitrule\")).done(function (result) {\n        def.resolve(result);\n      }).fail(function () {\n        def.reject();\n      });\n    } else {\n      def.resolve();\n    }\n\n    return def.promise();\n  },\n\n  getFormLinkXpathContext: function getFormLinkXpathContext() {\n    var self = this;\n    var xpathContext = self.properties.xpathContext;\n    var parentXpathContext = self.getXpathContext();\n    if (parentXpathContext && xpathContext) {\n      if (xpathContext.indexOf(parentXpathContext) === 0) {\n        return xpathContext;\n      } else {\n        return parentXpathContext + \".\" + xpathContext;\n      }\n    } else {\n      return xpathContext;\n    }\n  } });","/**\r\n*   Name: Bizagi Render Geolocation control\r\n*   Author: Ricardo Perez\r\n*   Comments:\r\n*   -   This script will define basic stuff for form link renders\r\n*/\n\nbizagi.rendering.geolocation.extend(\"bizagi.rendering.geolocation\", {}, {\n\n  renderSingle: function renderSingle() {\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n\n    container.addClass(\"bz-rn-non-editable\");\n\n    self.cordinate = $(\".bz-rn-geolocation-coordinate\", control);\n  },\n\n  /**\r\n     *   Method to render non editable values\r\n     */\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"geolocation\");\n    return $.kendoTmpl(template, self.properties);\n  },\n\n  /**\r\n     * Template method to implement in each device to customize each render after processed \r\n     */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n\n    // Call base \n    self._super();\n    self.configureHandlers();\n  },\n\n  /**\r\n      * Template method to implement in each device to customize the render's behaviour to add handlers \r\n      */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n\n    if (self.getMode() === \"execution\" && self.properties.editable) {\n\n      //If the control doesn't have a value set the position\n      if (self.value == null)\n      self.updateDisplayValue();\n\n      $(\".bz-rn-geolocation-selector\", self.getControl()).on(\"click\", function () {\n        self.cordinate.empty();\n\n        // This retun a promise if is usefull\n        self.updateDisplayValue();\n      });\n    }\n  },\n\n  /**\r\n      * Sets the value in the rendered control \r\n      */\n  setDisplayValue: function setDisplayValue(value) {\n    var self = this;\n    var def = new $.Deferred();\n\n    if (value != null && value !== \"\") {\n      if (!self.cordinate)\n      self.cordinate = self.getControl();\n\n      self.cordinate.html(value);\n\n      // Set internal value \n      self.setValue(value, false);\n      def.resolve();\n    } else {\n\n      var onSuccess = function onSuccess(position) {\n        var latitude = position.coords.latitude.toString();\n        var longitude = position.coords.longitude.toString();\n        var cordinate = latitude + \" \" + longitude;\n\n        self.cordinate.html(cordinate);\n\n        // Set internal value \n        self.setValue(cordinate, false);\n        def.resolve();\n      };\n\n      // onError Callback receives a PositionError object\n      var onError = function onError(message) {\n        var strMessage = message;\n\n        if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n          strMessage = self.getErrorMessage(message);\n        }\n\n        def.reject(strMessage);\n      };\n\n      if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\n        navigator.geolocation.getCurrentPosition(onSuccess, onError);\n      } else {\n        self.getCurrentPosition(onSuccess, onError);\n      }\n\n    }\n\n    return def.promise();\n\n  },\n\n  updateDisplayValue: function updateDisplayValue() {\n    var self = this;\n\n    self.setDisplayValue().then(function () {}).fail(function (message) {\n      self.cordinate.val(\"\");\n      self.cordinate.html(\"<span style='color: red'>\" + message + \"</span>\");\n    });\n  } });","/*\r\n *   Name: BizAgi Smartphone Render Association\r\n *   Author: RicharU (based on Edward Morales)\r\n *   Comments: Defines the association control\r\n */\n\nbizagi.rendering.association.extend('bizagi.rendering.association', {}, {\n  /**\r\n                                                                           * Template method to implement in each children to customize each control\r\n                                                                           * \r\n                                                                           * @returns {} \r\n                                                                           */\n  renderControl: function renderControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var def = new $.Deferred();\n\n    self.properties.property = \"flipped\";\n    self.properties.idRender = self.properties.id;\n\n    // Define flipped\n    $.when(self.getFlipAssociation()).done(function (flip) {\n      // Make json base, create self.properties.formatJson\n      self.makeJsonBase();\n\n      self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\n\n      var columnData = self.getColumnData();\n\n      var html = $.kendoTmpl(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation });\n\n\n      /* by default need set self.properties.formatJson */\n      self.setValue(JSON.encode(self.properties.formatJson));\n\n      def.resolve(html);\n    });\n\n    return def.promise();\n  },\n\n\n  /**\r\n      * Get Left Data, verify if flipper flags sets true\r\n      *\r\n      * @param column {'0'||'1'}\r\n      */\n  getColumnData: function getColumnData() {\n    var self = this;\n    var properties = self.properties;\n    var data = [];\n\n    self.data = properties;\n\n    var dataAssociation = properties.flipped ? properties.rightData : properties.leftData;\n\n    $.each(dataAssociation, function (key, item) {\n      data.push({\n        id: item.id,\n        value: item.value,\n        association: self.getRightAssociation(item.id) });\n\n    });\n\n    return data;\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var control = self.getControl();\n\n    // Cache control\n    self.association = $(\".bz-rn-association-control\", control);\n    self.getArrowContainer().css(\"visibility\", \"hidden\");\n    self.getArrowContainer().hide();\n\n    // Add Events at Association Control\n    self.addEventControl();\n\n    if (!self.properties.editable) {\n      self.association.find(\"input:checkbox\").hide();\n      self.association.find(\".ui-bz-rn-check-item label\").addClass(\"bz-rn-association-non-editable\");\n    }\n\n    self.showDefaultContainer();\n  },\n\n  showDefaultContainer: function showDefaultContainer() {\n    var self = this;\n    var control = self.getControl();\n    var associations = $('.bz-rn-association-group-container .bz-rn-association-header', control);\n\n    if (associations.length > 0) {\n      var defaultHeader = $($('.bz-rn-association-group-container .bz-rn-association-header', control)[0]);\n      var defaultContainer = $($('.bz-rn-association-group-container .bz-rn-association-items', control)[0]);\n\n      self.closeAccordionSection(true);\n      defaultHeader.addClass('active');\n      defaultContainer.slideDown(300).addClass('open');\n    }\n  },\n\n  /**\r\n      * Add event to control\r\n      * @returns {} \r\n      */\n  addEventControl: function addEventControl() {\n    var self = this;\n    var template = self.renderFactory.getTemplate(\"association\");\n    var control = self.getControl();\n\n    // Bind check toggle\n    self.association.delegate(\"input:checkbox\", \"change\", function () {\n      var contextElement = $(this);\n\n      if (contextElement.prop(\"checked\")) {\n        // Associate item\n        contextElement.addClass(\"bz-check\");\n        self.associateElement(contextElement);\n      } else {\n        // Dissociate item\n        contextElement.removeClass(\"bz-check\");\n        self.dissociateElement(contextElement);\n      }\n    });\n\n    // Bind flip actions\n    self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n      $(control).empty();\n\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      // Send flip data to server\n      self.properties.flipstate = self.properties.flipped;\n\n      self.dataService.getFlipAssociation(self.properties);\n\n      var columnData = self.getColumnData();\n\n      // Render template\n      $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n        getColumnData: self.getColumnData,\n        getRightAssociation: self.getRightAssociation }).\n      appendTo(control);\n\n      self.postRenderSingle();\n    });\n\n    self.association.delegate(\".bz-rn-association-container .bz-rn-association-header\", \"click\", function () {\n      if (!$(this).is('.active')) {\n        self.closeAccordionSection();\n        $(this).addClass('active');\n        $(this).siblings().slideDown(300).addClass('open');\n      }\n    });\n  },\n\n  closeAccordionSection: function closeAccordionSection(active) {\n    var self = this;\n    var control = self.getControl();\n    var headers = $('.bz-rn-association-group-container .bz-rn-association-header', control);\n    var contents = $('.bz-rn-association-group-container .bz-rn-association-items', control);\n\n    if (active) {\n      headers = headers.not(':first').removeClass('active');\n      contents = contents.not(':first').slideUp(300).removeClass('open');\n    }\n\n    headers.removeClass('active');\n    contents.slideUp(300).removeClass('open');\n  },\n\n  renderReadOnly: function renderReadOnly() {\n    var self = this;\n\n    return self.renderControl();\n  },\n\n  /**\r\n      * Render for readonly\r\n      * @returns {} \r\n      */\n  postRenderReadOnly: function postRenderReadOnly() {\n    var self = this;\n    var control = self.getControl();\n    var template = self.renderFactory.getTemplate(\"association\");\n    var columnData = self.getColumnData();\n\n    // Render template  \n    $.kendoTmpls(template, $.extend(self.properties, { columnData: columnData }), {\n      getColumnData: self.getColumnData,\n      getRightAssociation: self.getRightAssociation }).\n    appendTo(control);\n\n    // Cache control\n    self.association = $(\".bz-rn-association-control\", control);\n    self.getArrowContainer().css(\"visibility\", \"hidden\");\n\n    // Bind event for flip botton\n    self.association.delegate(\".bz-rn-association-flip-button\", \"click\", function () {\n      $(control).empty();\n      // Define flipped\n      self.properties.flipped = !self.properties.flipped;\n\n      self.postRenderReadOnly();\n    });\n  },\n  /**\r\n      * Associate the left item with the active parent\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  associateElement: function associateElement(element) {\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemAdd = element.data(\"id\");\n\n    // Update JSON object\n    self.addElement(parentId, itemAdd);\n  },\n\n  /**\r\n      * Dissociates an item from the active collection\r\n      * @param {} element \r\n      * @returns {} \r\n      */\n  dissociateElement: function dissociateElement(element) {\n    var self = this;\n    var context = self.getControl();\n\n    // Get the parent id\n    var parentId = $(element.parents(\"ul\"), context).data(\"parent-id\");\n    var itemRemove = element.data(\"id\");\n\n    // Update JSON object\n    self.removeElement(parentId, itemRemove);\n  },\n\n  /* SET-DISPLAY-VALUE\r\n      =====================================================*/\n  setDisplayValue: function setDisplayValue(value) {\n    // Set internal value\n    this.setValue(value, false);\n  } });","/*\r\n*   Name: BizAgi User Field render tablet Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will define the basic behaviour for userfields    \r\n*/\n\n// Auto-extension\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.basicUserField\", {}, {\n  renderSingle: function renderSingle() {\n    var self = this;\n\n    // Hide arrow\n    $(\".ui-bizagi-render-edition-arrow\", self.getControl().parent()).hide();\n\n    return self.postRender();\n\n  },\n\n  renderEdition: function renderEdition() {\n    var self = this;\n    var defer = $.Deferred();\n\n    $.when(self.postRender()).done(function () {\n      $.when(self.renderUserfieldControl()).done(function () {\n        self.inputEdition = self.input;\n        defer.resolve();\n      });\n    });\n\n    return defer.promise();\n  },\n\n  getEditableControl: function getEditableControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this, arguments);\n    }\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    if (!this.isSupported()) {\n      return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this, arguments);\n    }\n  },\n\n  isSupported: function isSupported() {\n    return true;\n  } });\n\n\n/*\r\n        *   Default implementation for user fields\r\n        */\nbizagi.rendering.basicUserField.extend(\"bizagi.rendering.defaultUserField\", {}, {\n\n  /*\r\n                                                                                  *   Template method to implement in each device to customize each render after processed\r\n                                                                                  */\n  getEditableControl: function getEditableControl() {\n    var self = this;\n    var control = self.getControl();\n    var container = self.getContainerRender();\n    var properties = self.properties;\n    var controlName = properties.control.replace(/column/g, \"\");\n\n    self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n    self.input.addClass(\"ui-bizagi-render-userfield-notSupported\");\n    container.addClass(\"bz-rn-non-editable\");\n\n    return self.input;\n  },\n\n  /*\r\n     *  Dont send the data to the server\r\n     */\n  collectData: function collectData(renderValues) {\n  },\n\n  getDisplayValue: function getDisplayValue() {\n    var self = this;\n    var properties = self.properties;\n    var controlName = properties.control;\n\n    return \"Userfield: \" + controlName + \" not found\";\n  },\n\n  getReadonlyControl: function getReadonlyControl() {\n    var self = this;\n    var control = self.getControl();\n    var properties = self.properties;\n    var controlName = properties.control;\n    var mycontrol = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\n\n    return mycontrol;\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.column\", {}, {\n\n  /*\r\n                                                                                *   Apply custom overrides to each decorated instance\r\n                                                                                */\n  applyOverrides: function applyOverrides(decorated) {\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated && decorated.getControl) {\n      this.originalGetControl = decorated.getControl;\n      decorated.getControl = this.getControl;\n      decorated.properties.displayType = \"normal\";\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = this._super();\n\n    if (!result || result.length === 0) {\n      var selector = bizagi.util.isMobileGridEnabled() ? \".bz-rn-grid-cell-readonly\" : \".ui-bizagi-cell-readonly\";\n      result = $(selector, self.element || self.observableElement);\n    }\n\n    return result;\n  },\n  /*\r\n     *   Apply column styles to a specified element\r\n     */\n  applyColumnStyles: function applyColumnStyles(element) {\n    var self = this;\n    var properties = self.properties;\n\n    element = $(element);\n\n    // Set cell alignment\n    element.css(\"-webkit-box-pack\", properties.align);\n\n    // Set cell back color\n    if (properties.textFormat.background) {\n      element.css(\"background-color\", properties.textFormat.background);\n      element.css(\"background-image\", \"none\");\n    }\n  },\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell) {\n    var self = this;\n    var properties = self.properties;\n\n    // Call base        \n    this._super(surrogateKey, cell);\n\n    // Just draw render if the cell layout has been filled\n    if (cell && cell.length > 0) {\n      var cellIcon;\n\n      if (bizagi.util.isMobileGridEnabled()) {\n        cellIcon = $(\".bz-mo-icon\", cell);\n        if ($(self.element).hasClass(\"bz-command-edit-inline\")) {\n          $(self.element).toggleClass(\"bz-command-edit-inline\");\n        }\n\n        if (!properties.editable) {\n          cellIcon.removeClass(\"bz-mo-icon\");\n          cellIcon.removeClass(\"bz-coin-input bz-number-icon bz-calendar-input\");\n        }\n      } else {\n        cellIcon = $(\".ui-bizagi-cell-icon\", cell);\n        if (properties.align == \"left\") {\n          cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\n        }\n\n        if (!properties.editable) {\n          cellIcon.detach();\n        }\n      }\n\n      // Apply styles to cell\n      self.applyColumnStyles(cell);\n    }\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.combo\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    // Hacks the getControl method in the decorated render to add features\n    var self = this;\n    self._super(decorated);\n    if (decorated && decorated.getControl) {\n      self.originalGetControl = decorated.getControl;\n      decorated.getControl = self.getControl;\n      decorated.properties.displayType = \"normal\";\n    }\n  },\n\n  /*\r\n     *   Template method to get the control element\r\n     *   This code runs under the decorated element context\r\n     */\n  getControl: function getControl() {\n    var self = this;\n    var result = self._super();\n\n    if (!result || result.length == 0) {\n      result = $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\n    }\n\n    return result;\n  } });","/*\r\n*   Name: BizAgi Desktop Render Document Generator Extension\r\n*   Author: Mauricio Gonzalez\r\n*   Comments:\r\n*   -   This script will redefine the document generator render class to adjust to desktop devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.document\", {}, {\n\n  /*\r\n                                                                                  *   Apply custom overrides to each decorated instance\r\n                                                                                  */\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n    self._super(decorated);\n\n    decorated.getControlHtml = self.getControlHtml;\n\n    if (mode != \"design\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = this.getXpath;\n      decorated.getDocumentXpath = this.getDocumentXpath;\n      decorated.getContextXpath = this.getContextXpath;\n      decorated.documentTemplateGenerate = this.documentTemplateGenerate;\n      decorated.properties.xpathContext = self.getContextXpath();\n    }\n  },\n\n  /*\r\n     *   Creates the event of generation of templates.\r\n     */\n  documentTemplateGenerate: function documentTemplateGenerate() {\n    var self = this;\n    var properties = self.properties;\n    self.startLoading();\n    //Get the context xPath\n    properties.xpathcontext = self.getContextXpath();\n    properties.xpath = self.getDocumentXpath(properties.xpath);\n\n    var grid = self.parent;\n\n    $.when(grid.submitOnChange(\"\", false)).\n    done(function () {\n      $.when(self.dataService.generateDocumentTemplate(properties)).\n      done(function (response) {\n        $.when(grid.refresh()).\n        done(function () {\n          self.autoOpenDocuments();\n        });\n\n        self.endLoading();\n      }).fail(function () {\n        self.showErrorMessage();\n        self.endLoading();\n      });\n    }).fail(function (message) {\n      // Add error messages \n      self.getFormContainer().addErrorMessage(message);\n      self.endLoading();\n    });\n  },\n\n  /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\n  getControlHtml: function getControlHtml(template, mode, downloadalldocuments, allowGenerate, properties, noFiles) {\n    var self = this;\n    var isInlineRow = true;\n\n    for (var i = 0; i < self.parent.properties.data.rows.length; i++) {\n      if (self.parent.properties.data.rows[i][0] == self.surrogateKey) {\n        isInlineRow = false;\n        break;\n      }\n    }\n\n    var html = $.kendoTmpl(template, {\n      noActivateButton: isInlineRow,\n      editable: mode != \"execution\",\n      downloadalldocuments: downloadalldocuments,\n      required: properties.required,\n      allowgenerate: allowGenerate,\n      xpath: self.getXpath(properties.xpath),\n      append: properties.append ? properties.append : false,\n      caption: properties.caption,\n      noFiles: noFiles });\n\n\n    return html.replace(\"ui-bizagi-document-upload-item-design\", \"ui-bizagi-document-upload-item-design-column\");\n  },\n\n  /*\r\n     *   Apply custom overrides to each decorated instance\r\n     */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getDocumentXpath: function getDocumentXpath(xpath) {\n    var xpathPath = xpath;\n    var index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return xpathPath;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRenderReadOnly: function postRenderReadOnly(surrogateKey, cell, tableCell) {\n    // Call base\n    this._super(surrogateKey, cell, tableCell);\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getContextXpath: function getContextXpath() {\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/*\r\n*   Name: Bizagi tablet Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.date\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    var self = this;\n    var mode = self.getMode();\n\n    self._super(decorated);\n\n    // Hacks the getControl method in the decorated render to add features\n    if (decorated) {\n      decorated.showTime = false;\n\n      if (mode === \"execution\") {\n        decorated.changeMinValue = function (value) {\n          // resolve array minvalue\n          var properties = this.properties;\n          var dateControl = this.getDateControl();\n          var calculateValue = self.resolveValue(this, value);\n\n          // Set value in control\n          if (value && properties.editable) {\n            if (typeof calculateValue === \"number\") {\n              calculateValue = new Date(calculateValue);\n              dateControl.mobiscroll('option', { min: calculateValue }); // DateTime Normal\n              calculateValue = bizagi.util.dateFormatter.formatInvariant(calculateValue, properties.showTime); // Set as invariant\n            } else {\n              dateControl.datepicker(\"option\", \"minDate\", bizagi.util.dateFormatter.getDateFromInvariant(calculateValue)); // DateTime Normal\n            }\n\n            properties.minValue = value; // Invarian date   \n            decorated.properties.minValue = calculateValue;\n          }\n        };\n\n        decorated.changeMaxValue = function (value) {\n          // resolve array minvalue\n          var properties = this.properties;\n          var dateControl = this.getDateControl();\n          var calculateValue = self.resolveValue(this, value);\n\n          // Set value in control\n          if (value && properties.editable) {\n\n            if (typeof calculateValue === \"number\") {\n              calculateValue = new Date(calculateValue);\n              dateControl.mobiscroll('option', { max: calculateValue }); // DateTime Normal\n              calculateValue = bizagi.util.dateFormatter.formatInvariant(calculateValue, properties.showTime); // Set as invariant\n            } else {\n              dateControl.datepicker(\"option\", \"maxDate\", bizagi.util.dateFormatter.getDateFromInvariant(calculateValue)); // DateTime Normal\n            }\n\n            properties.maxValue = value; // Invarian date       \n            decorated.properties.maxValue = calculateValue;\n          }\n        };\n      }\n    }\n  },\n\n  resolveValue: function resolveValue(context, value) {\n    var result = \"\";\n\n    if (bizagi.util.isString(value) || bizagi.util.isNumeric(value)) {\n      result = value;\n    }\n\n    if (bizagi.util.isArray(value)) {\n      var indexes = context.grid.getIndexes();\n      var surrogateKey = context.surrogateKey;\n      var index = indexes.indexOf(surrogateKey);\n      if (index !== -1) {\n        result = value[index];\n      }\n    }\n\n    return result;\n  } });","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.text\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi Tablet Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.number\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n*   Name: BizAgi smartphone Column Decorator Extension\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.image\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    var properties = this.properties;\n    this._super(decorated);\n\n    decorated.getXpathContext = this.getImageXpathContext;\n\n    decorated.setDisplayValue = function () {\n      return true;\n    };\n\n    // Change xpath context\n    // Taken from desktop version to fix non existence of \"xpathContext\" property\n    if (this.getMode() === \"execution\") {\n      decorated.properties.xpathContext = (properties.xpathContext ? properties.xpathContext + \".\" : \"\") + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\n    }\n  },\n\n  getImageXpathContext: function getImageXpathContext() {\n    return (this.column.properties.xpathContext ? this.column.properties.xpathContext + \".\" : \"\") + this.column.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/*\r\n*   Name: BizAgi smartphone Text Column Decorator Extension\r\n*   Author: OscarO\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to smartphones devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.upload\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n    var self = this,\n    mode = self.getMode();\n\n    if (mode != \"design\" && mode != \"layout\") {\n\n      decorated.getUploadXpath = this.getUploadXpath;\n\n      decorated.getXpathContext = function () {\n\n        var surrogateKey = this.surrogateKey || \"\",\n        properties = self.properties,\n        columnXpath = self.getUploadXpath(decorated),\n        columnXpathSplit = columnXpath.split(\".\"),\n        nameFile = columnXpathSplit[columnXpathSplit.length - 1],\n        xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\n\n        return { xpathContext: xpathContext, nameFile: nameFile };\n      };\n\n\n\n      decorated.buildItemUrl = function (file) {\n        var selfIntern = this;\n        var properties = selfIntern.properties;\n\n        var form = selfIntern.getFormContainer();\n        var context = selfIntern.getXpathContext();\n\n        return selfIntern.dataService.getUploadFileUrl({\n          idRender: properties.id,\n          xpath: context.nameFile,\n          xpathContext: context.xpathContext,\n          idPageCache: properties.idPageCache,\n          fileId: file.id,\n          sessionId: form.properties.sessionId,\n          contexttype: properties.contexttype });\n\n      };\n\n    }\n  },\n\n  /*\r\n     *   Returns the xpath to be used  \r\n     */\n  getUploadXpath: function getUploadXpath(decorated) {\n    return (decorated || this).grid.properties.xpath + \"[id=\" + (decorated || this).surrogateKey + \"].\" + (decorated || this).properties.xpath;\n  } });","/*\r\n *   Name: BizAgi Tablet Link Column Decorator Extension\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will redefine the link column decorator class to adjust to tablet devices\r\n */\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.link\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    var self = this,\n    mode = self.getMode();\n\n    if (mode != \"design\" && mode != \"layout\") {\n      self.surrogateKey = decorated.surrogateKey;\n      decorated.getXpath = this.getXpath;\n\n      decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\n\n      if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) == -1)\n      decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\n\n    }\n    if (decorated.properties.type == \"columnFormLink\") {\n      decorated.getFormLinkXpath = this.getFormLinkXpath;\n    }\n  },\n\n  /*\r\n      *   Apply custom overrides to each decorated instance\r\n      */\n  getXpath: function getXpath(xpath) {\n    var xpathPath = xpath,\n    index = xpathPath.indexOf(this.grid.properties.xpath);\n\n    if (index != -1) {\n      xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\n    }\n\n    return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\n  },\n\n  /*\r\n      *   Get Form Link xpath to use\r\n      */\n  getFormLinkXpath: function getFormLinkXpath() {\n    // Calculate layout properties to maximized property\n    this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\n    this.calculateInitialLayoutProperties();\n\n    if (!this.properties.xpath) {\n      return;\n    }\n    return this.properties.xpath;\n  } });","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.search.extend(\"bizagi.rendering.columns.search\", {}, {\n\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  },\n\n  render: function render(surrogateKey, value) {\n    var self = this;\n    if (value.length > 0) {\n      value = [].concat(value[0]);\n      return self._super(surrogateKey, {\n        id: value[0],\n        label: value[1],\n        additionallabel: value[2] || undefined });\n\n    } else\n    {\n      return self._super(surrogateKey, value);\n    }\n  } });","/*\r\n*   Name: BizAgi Desktop ECM Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.uploadecm\", {}, {\n  /*\r\n                                                                                   *   Apply custom overrides to each decorated instance\r\n                                                                                   */\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n\n    decorated.getXpathContext = this.getECMXpathContext;\n\n    decorated.getUploadXpath = this.getUploadXpath;\n\n    decorated.buildItemUrl = function (file) {\n      var self = this;\n      var properties = self.properties;\n\n      var form = self.getFormContainer();\n\n      var columnXpath = self.getUploadXpath(self.surrogateKey);\n      columnXpath = columnXpath.split(\".\");\n      var nameFile = columnXpath[columnXpath.length - 1];\n      var xpathContext = self.getXpathContext(self.surrogateKey);\n\n      return self.dataService.getUploadFileUrl({\n        idRender: properties.id,\n        xpath: nameFile,\n        xpathContext: xpathContext,\n        idPageCache: properties.idPageCache,\n        fileId: file.idFileUpload,\n        sessionId: form.properties.sessionId,\n        contexttype: properties.contexttype });\n\n    };\n\n    decorated.buildAddParams = function () {\n      var properties = this.properties,\n      form = this.getFormContainer();\n\n      return {\n        url: properties.addUrl,\n        h_xpath: properties.xpath,\n        idAttrib: properties.idAttrib,\n        xpathContext: this.getXpathContext(this.surrogateKey),\n        xPath: properties.xpath,\n        p_sessionId: form.properties.sessionId,\n        h_contexttype: \"entity\",\n        h_pageCacheId: properties.idPageCache };\n\n\n    };\n\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n\n  getUploadXpath: function getUploadXpath(surrogateKey) {\n    surrogateKey = this.surrogateKey || surrogateKey || \"\";\n    return this.grid.properties.xpath + \"[id=\" + surrogateKey + \"].\" + this.properties.xpath;\n  },\n\n\n  getECMXpathContext: function getECMXpathContext() {\n    return (this.column.properties.xpathContext ? this.column.properties.xpathContext + \".\" : \"\") + this.column.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\n  } });","/**\r\n* Grid control Column Button\r\n*\r\n* @author Ricardo Prez\r\n*/\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.button\", {}, {\n  applyOverrides: function applyOverrides(decorated) {\n    this._super(decorated);\n  } });","/*\r\n *   Name: Bizagi Column Rendering Smartphone numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Column Scientific number notation\r\n */\n\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.numberScientificNotation\", {}, {\n  /*\r\n                                                                                                   *   Post process the element after it has been rendered\r\n                                                                                                   */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n    this._super(surrogateKey, cell);\n\n    // Apply styles to input\n    var input = $(\"input\", cell);\n    this.applyColumnStyles(input);\n  },\n  renderSummary: function renderSummary(key, value) {\n    var self = this;\n    return self.renderReadOnly(key, value);\n  },\n  postRenderSummary: function postRenderSummary(key, value) {\n    var self = this;\n    self.postRenderReadOnly(key, value);\n    return true;\n  } });","/*\r\n*   Name: BizAgi Smartphone Radio Column Decorator Extension\r\n*   Author: Richar Urbano\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to smartphone devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.radio\", {}, {});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\n\n// Extends itself\nbizagi.rendering.columns.combo.extend(\"bizagi.rendering.columns.list\", {}, {});","/*\r\n*   Name: BizAgi tablet Date Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the check column to adjust to tablet devices\r\n*/\n\n// Extends from column\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.columns.exclusiveCheck\", {}, {\n\n  /*\r\n                                                                                        *   Returns the in-memory processed element\r\n                                                                                        *   so the caller could append it to any place\r\n                                                                                        */\n  render: function render(surrogateKey, value) {\n\n    var self = this;\n    // Set flag to check when a render has changed\n    self.changed = false;\n    var properties = self.properties;\n    // Set grid and id references to the control in order to render the content\n    var decorated = self.getDecorated(surrogateKey);\n    decorated.grid = self.grid;\n    decorated.column = this;\n    decorated.surrogateKey = surrogateKey;\n\n    // Set cell value\n\n    var mode = self.getMode();\n\n    if (self.grid.exclusiveChanges[self.properties.xpath]) {\n      if (self.grid.exclusiveChanges[self.properties.xpath].key === surrogateKey) {\n        self.setValue(surrogateKey, self.grid.exclusiveChanges[self.properties.xpath].value);\n      } else\n      {\n        self.setValue(surrogateKey, false);\n      }\n    } else\n    {\n      var enabledChecks = self.grid.enabledChecks[self.properties.xpath];\n      self.setValue(surrogateKey, value);\n    }\n\n    // Override render properties\n    self.overrideDecoratedRenderProperties(surrogateKey);\n\n    // If the render is not editable return the readonly version of the column\n    if (!properties.editable)\n    return self.renderReadOnly.apply(self, arguments);\n\n    // Returns the decorated render inside a custom layout for columns\n    self.readyDeferred = new $.Deferred();\n    var cell = decorated.render(\"cell\");\n\n    // If the render changes set the flag on\n    decorated.bind(\"renderchange\", function () {\n      self.changed = true;\n      var lastKey = self.grid.exclusiveChanges[self.properties.xpath] ? self.grid.exclusiveChanges[self.properties.xpath].key : -1;\n      if (lastKey !== surrogateKey) {\n        var simpleXpathArray = self.properties.xpath.split(\".\");\n        self.grid.exclusiveChanges[self.properties.xpath] = {\n          xpath: self.properties.xpath,\n          simpleXpath: simpleXpathArray[simpleXpathArray.length - 1],\n          value: self.getValue(surrogateKey),\n          key: surrogateKey };\n\n        self.clearOtherRows(surrogateKey, value);\n      }\n    });\n\n    self.bind(\"rendered\", function () {\n      self.readyDeferred.resolve();\n    });\n\n    return cell;\n  },\n\n  /*\r\n     *   Post process the element after it has been rendered\r\n     */\n  postRender: function postRender(surrogateKey, cell) {\n    // Call base\n\n    this._super(surrogateKey, cell);\n    /*\r\n                                             var self = this;\r\n                                             var mode = self.getMode();\r\n                                     \r\n                                             this.setSurrogateKey(surrogateKey);\r\n                                             if (mode == \"execution\") {\r\n                                     \r\n                                                 var decorated = this.getDecorated(surrogateKey);\r\n                                                 var control = decorated.getControl();\r\n                                     \r\n                                                 // Check if its new row\r\n                                                 if (control.parents(\"tr\").data(\"new-row\")) {\r\n                                                     // Show a disabled check box\r\n                                                     control.html('<input type=\"checkbox\" name=\"exclusiveCheck\" title=\"' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '\" disabled=\"disabled\" style=\"width:16.5px;height:16.5px;\">');\r\n                                     \r\n                                                     //Set the column with this attribute, so when the control is evaluated in isValid(), validated\r\n                                                     //also if it is required, and belongs from a new row\r\n                                                     self.isNewRow = true;\r\n                                                 } else {\r\n                                                     self.isNewRow = false;\r\n                                                 }\r\n                                             }*/\n  },\n\n  clearOtherRows: function clearOtherRows(surrogateKey, value) {\n    var self = this;\n    for (var j = 0, rowsNumber = self.grid.properties.data.rows.length; j < rowsNumber; j++) {\n      var rowIndex = self.grid.properties.data.rows[j][0];\n      if (rowIndex !== surrogateKey) {\n        var decorated = self.getDecorated(rowIndex);\n        decorated.setDisplayValue(false);\n        self.setValue(rowIndex, false);\n      }\n    }\n  } });","/*\r\n *   Name: BizAgi Smartphone Render Document Generator Extension\r\n *   Author: Dario Estupian\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to desktop devices\r\n */\n\n// Extends itself\nbizagi.rendering.document.extend(\"bizagi.rendering.document\", {}, {\n  /*\r\n                                                                    * Put formating to the documents that are generated by the control\r\n                                                                    */\n  applyDocumentTemplatesFormat: function applyDocumentTemplatesFormat() {\n    var self = this;\n    var control = self.getControl();\n    self.getArrowContainer().hide();\n\n    // Set control container to behave as a block\n    control.addClass(\"ui-bizagi-render-display-block\");\n\n    // Resolve the type of the document based on the extension and put the icon to acconding to it\n    var documentList = $(\".ui-bizagi-document-upload-item\", control);\n\n    $.each(documentList, function (index, value) {\n      $(\".ui-bizagi-document-type\", value).addClass(\"ui-bizagi-document-extension\");\n\n      // add the tooltip to the document preview icon        \n      var previewTooltip = $(\".ui-bizagi-document-preview\", value);\n      previewTooltip.attr(\"title\", self.resources.getResource('render-document-preview-tooltip'));\n      previewTooltip.tooltip();\n\n      // Add file extension\n      var returnType = self.returnCssTypeFile($(\"span > span\", value).html());\n      $(\".ui-bizagi-document-type\", value).addClass(returnType);\n\n      // Disable preview\n      $(\".ui-bizagi-button\", value).remove();\n      $(\".ui-bizagi-document-preview\", value).attr(\"display\", \"none\");\n    });\n  },\n\n  /**\r\n      * Identifies the extension of the file in a simpler way that ECM does\r\n      * @param {} file \r\n      * @returns {} \r\n      */\n  returnCssTypeFile: function returnCssTypeFile(file) {\n\n    if (file == undefined || file.lenght === 0) {\n      return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";\n    }\n\n    var extension = file.substr(file.lastIndexOf(\".\") + 1);\n\n    switch (extension) {\n      case \"docx\":\n        return \"ui-bizagi-document-upload-item-doc bz-file-word\";\n      case \"pdf\":\n        return \"ui-bizagi-document-upload-item-pdf bz-file-pdf\";\n      case \"xlsx\":\n        return \"ui-bizagi-document-upload-item-xls bz-file-excel\";\n      default:\n        return \"ui-bizagi-document-upload-item-generic-file bz-file-text\";}\n\n  },\n\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    var properties = self.properties;\n    var container = self.getContainerRender();\n    self.configureHelpText();\n    self.applyDocumentTemplatesFormat();\n    self.configureHandlers();\n\n    if (!properties.editable) {\n      container.addClass(\"bz-rn-non-editable\");\n    } else {\n      container.addClass(\"bz-command-edit-inline\");\n    }\n  },\n  /*\r\n     * Template method to implement in each device to customize the render's\r\n     * behaviour to add handlers\r\n     */\n  configureHandlers: function configureHandlers() {\n    var self = this;\n    var control = self.getControl();\n    var mode = self.getMode();\n\n    // Attach handler\n    var generateLink = $(\".ui-bizagi-button-documentgenerator\", control);\n    if (mode == \"execution\") {\n      generateLink.click(function (e) {\n        if (e.isPropagationStopped())\n        return;\n        e.stopPropagation();\n\n        self.properties.buttonExecuted = true;\n\n        if (self.properties.validate) {\n          // Check if the form is valid, then generate\n          var isValid = self.validateContainer();\n          if (isValid) {\n            self.documentTemplateGenerate();\n          }\n        } else {\n          // Just generate the form\n          self.documentTemplateGenerate();\n        }\n\n        self.properties.buttonExecuted = false;\n      });\n    }\n\n    // Configure preview handler\n    $(\".ui-bizagi-document-upload-item > .ui-bizagi-document-upload-element\", control).click(function (e) {\n      self.showDocumentPreview($(this).data(\"url\"), $(this).attr(\"title\"));\n    });\n\n    // Configure delete handler\n    $(\".bz-rn-document-delete-icon\", control).click(function (e) {\n      if (e.isPropagationStopped())\n      return;\n      e.stopPropagation();\n\n      self.deleteDocumentTemplate($(this).parent().data(\"filename\"));\n    });\n  },\n\n  /*\r\n     * Redraw documents when needed\r\n     */\n  redrawDocuments: function redrawDocuments(documents, noFiles, downloadalldocuments) {\n    var self = this;\n\n    self._super(documents, noFiles, downloadalldocuments);\n    // Add icons\n    self.applyDocumentTemplatesFormat();\n  },\n\n  /*\r\n     * Shows the document if the flag is set.\r\n     */\n  autoOpenDocuments: function autoOpenDocuments() {\n  },\n\n  updateControlForPrintMode: function updateControlForPrintMode() {\n  },\n\n  showDocumentPreview: function showDocumentPreview(url, title) {\n    bizagi.loading.start();\n    $.when(bizagi.util.media.downloadFile(url, title)).fail(function (error) {\n      if (error.responseText) {\n        self.getFormContainer().failHandler(error.responseText);\n      }\n    }).always(function () {\n      bizagi.loading.stop();\n    });\n  } });","/**\r\n * Smartphone definition of range date control\r\n *\r\n * @author: Ricardo Perez\r\n */\n\nbizagi.rendering.rangeDate.extend(\"bizagi.rendering.rangeDate\", {}, {\n\n  /**\r\n                                                                       * Render a specific implementation for Desktop device\r\n                                                                       */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self.getArrow().hide();\n\n    self.defineRangeControl();\n  } });","/**\r\n * Desktop definition of range money control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeMoney.extend(\"bizagi.rendering.rangeMoney\", {}, {\n\n  /**\r\n                                                                         * Render a specific implementation for Desktop device\r\n                                                                         */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self.getArrow().hide();\n    self.defineRangeControl();\n  } });","/**\r\n * Desktop definition of range number control\r\n *\r\n * @author: Andrs Fernando Muoz\r\n */\n\nbizagi.rendering.rangeNumber.extend(\"bizagi.rendering.rangeNumber\", {}, {\n\n  /**\r\n                                                                           * Render a specific implementation for Desktop device\r\n                                                                           */\n  postRenderSingle: function postRenderSingle() {\n    var self = this;\n    self.getArrow().hide();\n    self.defineRangeControl();\n  } });","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\n\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\n  /* \r\n                                                      *   Constructor\r\n                                                      */\n  init: function init(dataService) {\n    this.templates = {};\n    this.dataService = dataService;\n  },\n\n  /**\r\n     * Load client resources in order to override a default behavior\r\n     */\n  loadOverrides: function loadOverrides() {\n  },\n  /*\r\n     *   This function will load asynchronous stuff needed in the module\r\n     */\n  initAsyncStuff: function initAsyncStuff() {\n    return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\n  },\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n  },\n  /*\r\n     *   Load one template and save it internally\r\n     */\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return bizagi.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedTemplate) {\n      self.templates[template] = resolvedTemplate;\n    });\n  },\n  /*\r\n     * Returns a common  used template for the framework\r\n     */\n  getCommonTemplate: function getCommonTemplate(template) {\n    return this.templates[template];\n  },\n  /*\r\n     *   Returns the appropiate container based on the container type\r\n     */\n  getContainer: function getContainer(params) {\n    // TODO: REMOVE IMPLEMENTATION\n\n    var type = params.type;\n    var data = params.data;\n    var containerParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"form\") {\n      return new bizagi.rendering.form(containerParams);\n    }\n\n    if (type == \"mobileform\") {\n      return new bizagi.rendering.mobileform(containerParams);\n    }\n\n    if (type == \"template\") {\n      return new bizagi.rendering.formTemplate(containerParams);\n    }\n\n    if (type == \"queryForm\") {\n      return new bizagi.rendering.queryForm(containerParams);\n    }\n\n    if (type == \"layout\") {\n      return new bizagi.rendering.layout(containerParams);\n    }\n\n    if (type == \"usersForm\") {\n      return new bizagi.rendering.usersForm(containerParams);\n    }\n\n    if (type == \"panel\") {\n      return new bizagi.rendering.panel(containerParams);\n    }\n\n    if (type == \"section\") {\n      return new bizagi.rendering.section(containerParams);\n    }\n\n    if (type == \"contentPanel\" || type == \"contentpanel\") {\n      return new bizagi.rendering.contentPanel(containerParams);\n    }\n\n    if (type.toLowerCase() == \"nestedform\") {\n      return new bizagi.rendering.nestedForm(containerParams);\n    }\n\n    if (type == \"tab\") {\n      return new bizagi.rendering.tab(containerParams);\n    }\n\n    if (type == \"tabItem\" || type == \"tabitem\") {\n      return new bizagi.rendering.tabItem(containerParams);\n    }\n\n    if (type == \"horizontal\") {\n      return new bizagi.rendering.horizontal(containerParams);\n    }\n\n    if (type == \"accordion\") {\n      return new bizagi.rendering.accordion(containerParams);\n    }\n\n    if (type == \"accordionItem\") {\n      return new bizagi.rendering.accordionItem(containerParams);\n    }\n\n    if (type == \"group\") {\n      return new bizagi.rendering.group(containerParams);\n    }\n\n    if (type == \"mobilegroup\") {\n      return new bizagi.rendering.mobilegroup(containerParams);\n    }\n\n    if (type == \"searchForm\") {\n      containerParams.context = \"search\";\n      containerParams.contexttype = \"metadata\";\n      return new bizagi.rendering.searchForm(containerParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate render based on the render type\r\n     */\n  getRender: function getRender(params) {\n\n    // TODO: REMOVE IMPLEMENTATION\n    var type = params.type;\n    var data = params.data;\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (!type)\n    type = \"label\";\n\n    if (type == \"text\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(renderParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(renderParams);\n    }\n    if (type == \"mobiletext\") {\n      return new bizagi.rendering.mobiletext(renderParams);\n    }\n\n    if (type == \"association\") {\n      return new bizagi.rendering.association(renderParams);\n    }\n\n    if (type == \"label\") {\n      return new bizagi.rendering.label(renderParams);\n    }\n\n    if (type == \"hidden\") {\n      return new bizagi.rendering.hidden(renderParams);\n    }\n\n    if (type == \"number\") {\n      return new bizagi.rendering.number(renderParams);\n    }\n\n    if (type == \"money\") {\n      return new bizagi.rendering.money(renderParams);\n    }\n\n    if (type == \"date\") {\n      return new bizagi.rendering.date(renderParams);\n    }\n\n    if (type == \"boolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(renderParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(renderParams);\n    }\n\n    if (type == \"combo\") {\n      return new bizagi.rendering.combo(renderParams);\n    }\n\n    if (/^cascadingcombo$/i.test(type)) {\n      return new bizagi.rendering.cascadingCombo(renderParams);\n    }\n\n    if (type == \"list\") {\n      return new bizagi.rendering.list(renderParams);\n    }\n\n    if (type == \"multiSelect\") {\n      return new bizagi.rendering.multiSelect(renderParams);\n    }\n\n    if (type == \"radio\") {\n      return new bizagi.rendering.radio(renderParams);\n    }\n\n    if (type == \"image\") {\n      // Override for test purposes\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"uploadecm\") {\n      // Check if its ECM file            \n      return new bizagi.rendering.ecm(renderParams);\n    }\n\n    if (type == \"upload\") {\n      return new bizagi.rendering.upload(renderParams);\n    }\n    if (type == \"grid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"groupedgrid\") {\n      return new bizagi.rendering.grid(renderParams);\n    }\n\n    if (type == \"search\") {\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"suggest\") {\n      renderParams.data.properties.enableQuerySuggestBehavior = true;\n      return new bizagi.rendering.search(renderParams);\n    }\n\n    if (type == \"searchList\") {\n      return new bizagi.rendering.searchList(renderParams);\n    }\n\n    if (type == \"letter\") {\n      return new bizagi.rendering.letter(renderParams);\n    }\n\n    if (type == \"button\") {\n      return new bizagi.rendering.button(renderParams);\n    }\n\n    if (type == \"formLink\") {\n      return new bizagi.rendering.formLink(renderParams);\n    }\n\n    if (type == \"link\") {\n      return new bizagi.rendering.link(renderParams);\n    }\n\n    if (type == \"layoutImage\") {\n      return new bizagi.rendering.layoutImage(renderParams);\n    }\n\n    if (type == \"layoutLink\") {\n      return new bizagi.rendering.layoutLink(renderParams);\n    }\n\n    if (type == \"layoutLabel\") {\n      return new bizagi.rendering.layoutLabel(renderParams);\n    }\n\n    if (type == \"layoutText\") {\n      return new bizagi.rendering.layoutText(renderParams);\n    }\n\n    if (type == \"layoutDateTime\") {\n      return new bizagi.rendering.layoutDateTime(renderParams);\n    }\n\n    if (type == \"layoutNumber\") {\n      return new bizagi.rendering.layoutNumber(renderParams);\n    }\n\n    if (type == \"layoutMoney\") {\n      return new bizagi.rendering.layoutMoney(renderParams);\n    }\n\n    if (type == \"layoutPlaceholder\") {\n      return new bizagi.rendering.layoutPlaceholder(renderParams);\n    }\n\n    if (type == \"actionLauncher\") {\n      return new bizagi.rendering.actionLauncher(renderParams);\n    }\n\n    if (type == \"layoutBoolean\") {\n      return new bizagi.rendering.layoutBoolean(renderParams);\n    }\n\n    if (type == \"layoutUpload\") {\n      return new bizagi.rendering.layoutUpload(renderParams);\n    }\n\n    if (type == \"entityTemplate\") {\n      return new bizagi.rendering.entityTemplate(renderParams);\n    }\n\n    if (type == \"polymorphicLauncher\") {\n      return new bizagi.rendering.polymorphicLauncher(renderParams);\n    }\n\n    if (type == \"userfield\") {\n      return new bizagi.rendering.userfieldWrapper(renderParams);\n    }\n\n    // Check search renders (starts with \"search\")\n    if (type.indexOf(\"search\") == 0) {\n      return this.getSearchRender(params);\n    }\n\n    if (type.indexOf(\"query\") == 0) {\n      return this.getQueryRender(params);\n    }\n\n    if (type == \"document\") {\n      return new bizagi.rendering.document(renderParams);\n    }\n\n    if (type == \"image\") {\n      return new bizagi.rendering.image(renderParams);\n    }\n    if (type == \"fileprint\") {\n      return new bizagi.rendering.fileprint(renderParams);\n    }\n    if (type == \"geolocation\") {\n      return new bizagi.rendering.geolocation(renderParams);\n    }\n\n    if (type == \"collectionnavigator\") {\n      return new bizagi.rendering.collectionnavigator(renderParams);\n    }\n\n    if (type == \"getUser\") {\n      return new bizagi.rendering.getUser(renderParams);\n    }\n\n    if (type == \"rangeDate\") {\n      return new bizagi.rendering.rangeDate(renderParams);\n    }\n\n    if (type == \"rangeMoney\") {\n      return new bizagi.rendering.rangeMoney(renderParams);\n    }\n\n    if (type == \"rangeNumber\") {\n      return new bizagi.rendering.rangeNumber(renderParams);\n    }\n\n    if (type == \"activityCheckList\") {\n      return new bizagi.rendering.activityCheckList(renderParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate column based on the render type\r\n     */\n  getColumn: function getColumn(params) {\n    var type = params.type;\n    var data = params.data;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type == \"columnText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        columnParams.decorated = bizagi.rendering.extendedText;\n      } else {\n        // Creates one normal text render\n        columnParams.decorated = bizagi.rendering.text;\n      }\n      return new bizagi.rendering.columns.text(columnParams);\n    }\n\n    if (type == \"columnSearchList\") {\n      columnParams.decorated = bizagi.rendering.searchList;\n      return new bizagi.rendering.columns.searchList(columnParams);\n    }\n\n    if (type == \"columnNumber\") {\n      columnParams.decorated = bizagi.rendering.number;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnMoney\") {\n      columnParams.decorated = bizagi.rendering.money;\n      return new bizagi.rendering.columns.number(columnParams);\n    }\n\n    if (type == \"columnDate\") {\n      columnParams.decorated = bizagi.rendering.date;\n      return new bizagi.rendering.columns.date(columnParams);\n    }\n\n    if (type == \"columnBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        columnParams.decorated = bizagi.rendering.check;\n        if (params.data.properties.isExclusive) {\n          return new bizagi.rendering.columns.exclusiveCheck(columnParams);\n        }\n      } else {\n        // Creates one yes-no render\n        columnParams.decorated = bizagi.rendering.yesno;\n      }\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnCombo\") {\n      columnParams.decorated = bizagi.rendering.combo;\n      return new bizagi.rendering.columns.combo(columnParams);\n    }\n\n    if (type == \"columnRadio\") {\n      columnParams.decorated = bizagi.rendering.radio;\n      return new bizagi.rendering.columns.radio(columnParams);\n    }\n\n    if (type == \"columnList\") {\n      columnParams.decorated = bizagi.rendering.list;\n      return new bizagi.rendering.columns.list(columnParams);\n    }\n\n    if (type == \"columnHidden\") {\n      columnParams.decorated = bizagi.rendering.hidden;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnUpload\") {\n      columnParams.decorated = bizagi.rendering.upload;\n      return new bizagi.rendering.columns.upload(columnParams);\n    }\n\n    if (type == \"columnImage\") {\n      columnParams.decorated = bizagi.rendering.image;\n      return new bizagi.rendering.columns.image(columnParams);\n    }\n\n    if (type == \"columnUploadEcm\") {\n      columnParams.decorated = bizagi.rendering.ecm;\n      return new bizagi.rendering.columns.uploadecm(columnParams);\n    }\n    if (type == \"columnLink\") {\n      columnParams.decorated = bizagi.rendering.link;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnFormLink\") {\n      columnParams.decorated = bizagi.rendering.formLink;\n      return new bizagi.rendering.columns.link(columnParams);\n    }\n\n    if (type == \"columnUserfield\") {\n      columnParams.decorated = bizagi.rendering.userfieldWrapper;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnSearch\") {\n      columnParams.decorated = bizagi.rendering.search;\n      return new bizagi.rendering.columns.search(columnParams);\n    }\n\n    if (type == \"columnLabel\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.column(columnParams);\n    }\n\n    if (type == \"columnReadonly\") {\n      columnParams.decorated = bizagi.rendering.label;\n      return new bizagi.rendering.columns.readonly(columnParams);\n    }\n\n    if (type == \"columnDocument\") {\n      columnParams.decorated = bizagi.rendering.document;\n      return new bizagi.rendering.columns.document(columnParams);\n    }\n\n    if (type == \"columnLetter\") {\n      columnParams.decorated = bizagi.rendering.letter;\n      return new bizagi.rendering.columns.letter(columnParams);\n    }\n\n    if (type == \"columnButton\") {\n      columnParams.decorated = bizagi.rendering.button;\n      return new bizagi.rendering.columns.button(columnParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getSearchRender: function getSearchRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"searchText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.extendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.text(searchParams);\n    }\n\n    if (type == \"searchBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.check(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.yesno(searchParams);\n    }\n\n    if (type == \"searchNumber\") {\n      if (data.properties.dataType == 29) {\n        //Creates a Scientific Notation render\n        return new bizagi.rendering.numberScientificNotation(searchParams);\n      }\n      return new bizagi.rendering.number(searchParams);\n    }\n\n    if (type == \"searchMoney\") {\n      return new bizagi.rendering.money(searchParams);\n    }\n\n    if (type == \"searchDate\") {\n      return new bizagi.rendering.date(searchParams);\n    }\n\n    if (type == \"searchCombo\") {\n      return new bizagi.rendering.combo(searchParams);\n    }\n\n    if (type == \"searchSuggest\") {\n      return new bizagi.rendering.search(searchParams);\n    }\n\n    if (type == \"searchLabel\") {\n      return new bizagi.rendering.label(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Returns the appropiate search render based on the type\r\n     */\n  getQueryRender: function getQueryRender(params) {\n    var type = params.type;\n    var data = params.data;\n    var searchParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type == \"queryText\") {\n      var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\n\n      if (isExtended) {\n        // Creates one extended render\n        return new bizagi.rendering.queryExtendedText(searchParams);\n      }\n\n      // Creates one normal text render\n      return new bizagi.rendering.queryText(searchParams);\n    }\n\n    if (type == \"queryBoolean\") {\n      var display = data.properties.display || \"option\";\n\n      if (display == \"check\") {\n        // Creates one check render\n        return new bizagi.rendering.queryCheck(searchParams);\n      }\n\n      // Creates one yes-no render\n      return new bizagi.rendering.queryYesNo(searchParams);\n    }\n\n    if (type == \"queryNumber\") {\n\n      return new bizagi.rendering.queryNumber(searchParams);\n    }\n\n    if (type == \"queryMoney\") {\n      return new bizagi.rendering.queryMoney(searchParams);\n    }\n\n    if (type == \"queryDate\") {\n      return new bizagi.rendering.queryDate(searchParams);\n    }\n\n    if (type == \"queryCombo\") {\n      return new bizagi.rendering.queryCombo(searchParams);\n    }\n\n    if (type == \"queryCascadingCombo\") {\n      return new bizagi.rendering.queryCascadingCombo(searchParams);\n    }\n\n    if (type == \"querySuggest\") {\n      return new bizagi.rendering.querySuggest(searchParams);\n    }\n\n    if (type == \"queryLabel\") {\n      return new bizagi.rendering.queryLabel(searchParams);\n    }\n\n    if (type == \"queryList\") {\n      return new bizagi.rendering.queryList(searchParams);\n    }\n\n    if (type == \"queryMultiSelect\") {\n      return new bizagi.rendering.queryMultiSelect(searchParams);\n    }\n\n    if (type == \"querySearch\") {\n      return new bizagi.rendering.querySearch(searchParams);\n    }\n\n    if (type == \"queryRadio\") {\n      return new bizagi.rendering.queryRadio(searchParams);\n    }\n\n    if (type == \"queryState\") {\n      return new bizagi.rendering.queryState(searchParams);\n    }\n\n    if (type == \"queryCaseState\") {\n      return new bizagi.rendering.queryCaseState(searchParams);\n    }\n\n    if (type == \"queryProcess\") {\n      return new bizagi.rendering.queryProcess(searchParams);\n    }\n\n    if (type == \"querySearchUser\") {\n      return new bizagi.rendering.querySearchUser(searchParams);\n    }\n\n    if (type == \"queryHidden\") {\n      return new bizagi.rendering.hidden(searchParams);\n    }\n\n    // No type supported\n    bizagi.log(type + \" not supported in render factory\", data, \"error\");\n    return null;\n  },\n  /*\r\n     *   Method to fetch templates from a private dictionary\r\n     */\n  getTemplate: function getTemplate(template) {\n    var self = this;\n    return self.templates[template];\n  } });","/*\r\n*   Name: BizAgi Smartphone Render Factory\r\n*   Author: Oscar O\r\n*   Comments:\r\n*   -   This script will define a render factory to create smartphone versions of each render type\r\n*/\n\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.smartphone.factory\", {}, {\n\n  init: function init(dataService) {\n    var self = this;\n\n    self._super(dataService);\n\n    if (bizagi.override.enableMSF) {\n      if (bizagi.hasOwnProperty(\"kendo\")) {\n        self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n      } else {\n        self.templateService = new bizagi.templates.services.service(bizagi.localization);\n      }\n    } else {\n      self.templateService = new bizagi.kendo.templates.services.service(bizagi.localization);\n    }\n  },\n\n  loadTemplate: function loadTemplate(template, templateDestination) {\n    var self = this;\n\n    // Go fetch the template\n    return self.templateService.getTemplate(templateDestination, template).\n    done(function (resolvedRemplate) {\n      self.templates[template] = resolvedRemplate;\n    });\n  },\n\n  /*\r\n     *   Load all the templates used for rendering\r\n     */\n  loadTemplates: function loadTemplates() {\n    var self = this;\n    var defer = new $.Deferred();\n\n    $.when(\n    // Icons\n    self.loadTemplate(\"icons\", bizagi.getTemplate(\"common.bizagi.rendering.icons\")),\n    // Containers\n    self.loadTemplate(\"form\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form\") + \"#ui-bizagi-render-form\"),\n    self.loadTemplate(\"complexgateway\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form\") + \"#ui-bizagi-render-complexGateway\"),\n    self.loadTemplate(\"panel\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.panel\")),\n    self.loadTemplate(\"tab\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.tab\")),\n    self.loadTemplate(\"tabItem\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.tabItem\")),\n    self.loadTemplate(\"horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.horizontal\")),\n    self.loadTemplate(\"group\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.group\")),\n    self.loadTemplate(\"editRender\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edit\")),\n    self.loadTemplate(\"searchForm\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchForm\")),\n    self.loadTemplate(\"accordion\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.accordion\")),\n    self.loadTemplate(\"accordionItem\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.accordionItem\")),\n    self.loadTemplate(\"contentPanel\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.contentPanel\")),\n\n    // Renders\n    self.loadTemplate(\"render\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.render\")),\n    self.loadTemplate(\"render-layout\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.render.layout\")),\n    self.loadTemplate(\"combo\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.combo\") + \"#ui-bz-mobile-combo-control\"),\n    self.loadTemplate(\"readonlyCombo\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.combo\") + \"#ui-bz-mobile-readonly-combo-control\"),\n    self.loadTemplate(\"comboModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.combo\") + \"#ui-bz-wp-popup-combo-control\"),\n    self.loadTemplate(\"date\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.date\") + \"#bz-rn-date\"),\n    self.loadTemplate(\"text\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.text\")),\n    self.loadTemplate(\"number\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.number\") + \"#ui-bz-mobile-number-control\"),\n    self.loadTemplate(\"readonlyNumber\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.number\") + \"#ui-bz-mobile-readonly-number-control\"),\n    self.loadTemplate(\"numberScientificNotation\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.numberScientificNotation\")),\n    self.loadTemplate(\"extendedText\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.extendedText\") + \"#ui-bz-mobile-extended-text-control\"),\n    self.loadTemplate(\"readonlyExtendedText\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.extendedText\") + \"#ui-bz-mobile-readonly-extended-text-control\"),\n    self.loadTemplate(\"yesno\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.yesno\")),\n    self.loadTemplate(\"check\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.check\")),\n    self.loadTemplate(\"button\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.button\")),\n    self.loadTemplate(\"link\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.link\")),\n    self.loadTemplate(\"list\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.list\") + \"#ui-bz-mobile-list-control\"),\n    self.loadTemplate(\"listModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.list\") + \"#ui-bz-wp-popup-list-control\"),\n    self.loadTemplate(\"geolocation\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.geolocation\")),\n    self.loadTemplate(\"radio\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.radio\")),\n    self.loadTemplate(\"search\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.search\") + \"#ui-bz-mobile-search-control\"),\n    self.loadTemplate(\"readonlySearch\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.search\") + \"#ui-bz-mobile-readonly-search-control\"),\n    self.loadTemplate(\"searchList\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-mobile-searchlist-control\"),\n    self.loadTemplate(\"searchListModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-wp-popup-searchlist-control\"),\n    self.loadTemplate(\"searchListModalViewAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-wp-searchlist-control-modalview-auxiliary-templates\"),\n    self.loadTemplate(\"searchListInputAuxTemplates\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.searchList\") + \"#ui-bz-wp-searchlist-control-input-auxiliary-templates\"),\n    self.loadTemplate(\"upload\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.upload\") + \"#bz-rn-upload-container\"),\n    self.loadTemplate(\"uploadItem\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.upload\") + \"#bz-rn-upload-item\"),\n    self.loadTemplate(\"association\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.association\")),\n    self.loadTemplate(\"ecm\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.ecm\") + \"#bz-rn-ecm-view-default-item\"),\n    self.loadTemplate(\"ecm-metadata\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.ecm\") + \"#bz-rn-ecm-metadata\"),\n    self.loadTemplate(\"checkList\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.checkList\")),\n    self.loadTemplate(\"image\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.image\") + \"#ui-bizagi-render-image\"),\n    self.loadTemplate(\"image-item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.image\") + \"#ui-bizagi-render-image-item\"),\n    self.loadTemplate(\"image-preview\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.image\") + \"#bz-rd-upload-render-edition\"),\n    self.loadTemplate(\"document\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.document\") + \"#bz-document-generator\"),\n    self.loadTemplate(\"document-item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.document\") + \"#bz-document-generator-item\"),\n    self.loadTemplate(\"render-range\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.range\")),\n    self.loadTemplate(\"readonly\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.readonly\")),\n    self.loadTemplate(\"list-multiselect\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-mobile-multiselect-control\"),\n    self.loadTemplate(\"list-multiselect-tag\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-mobile-multiselect-tag\"),\n    self.loadTemplate(\"list-multiselect-tags\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#bz-list-multiselect-tags\"),\n    self.loadTemplate(\"list-multiselect-view-more\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-mobile-multiselect-view-more\"),\n    self.loadTemplate(\"multiselectModalView\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.multiSelect\") + \"#ui-bz-wp-popup-multiselect-control\"),\n\n    //action launcher helpers\n    self.loadTemplate(\"render-slide-view\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.slide.view\")),\n\n    //action launcher\n    self.loadTemplate(\"render-actionLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\n    self.loadTemplate(\"render-actionLauncher-horizontal\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\n    self.loadTemplate(\"render-actionLauncher-vertical\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\n    self.loadTemplate(\"render-actionLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\n\n    //polymorphic launcher\n    self.loadTemplate(\"render-polymorphicLauncher\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\n    self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\n    self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\n    self.loadTemplate(\"render-polymorphicLauncher-confirm\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\n\n    //Renders Edition\n    self.loadTemplate(\"edition.number\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.number\")),\n    self.loadTemplate(\"edition.search.add\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.search\") + \"#bz-rn-search-add\"),\n    self.loadTemplate(\"edition.search.item\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.search\") + \"#bz-rn-search-item\"),\n    self.loadTemplate(\"edition.link\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.link\")),\n    self.loadTemplate(\"edition.letter\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.edition.letter\")),\n\n    //Renders Layouts\n    self.loadTemplate(\"layout-image\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.image\") + \"#ui-bizagi-render-layout-image\"),\n    self.loadTemplate(\"layout-image64\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\n    self.loadTemplate(\"layout-label\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.label\")),\n    self.loadTemplate(\"layout-link\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.link\")),\n    self.loadTemplate(\"layout-text\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.text\")),\n    self.loadTemplate(\"layout-date-time\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.dateTime\")),\n    self.loadTemplate(\"layout-money\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.money\")),\n    self.loadTemplate(\"layout-number\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.number\")),\n    self.loadTemplate(\"layout-upload\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.layout.upload\")),\n\n    //Renders commons\n    self.loadTemplate(\"form-error\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form-error\")),\n    self.loadTemplate(\"form-waiting\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.form-waiting\")),\n\n    self.getGridTemplates()).\n    done(function () {\n      var tmplIcons = self.getTemplate(\"icons\");\n      var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\n\n      if (svgStoreCounter === 0) {\n        $(\"head\").append(tmplIcons);\n      }\n      // Resolve when all templates are loaded\n      defer.resolve();\n    });\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Load javascripts after render has been rendered\r\n      */\n  loadOverrides: function loadOverrides() {\n    // Load custom javascript overrides\n    if (bizagi.enableCustomizations) {\n      return bizagi.util.loadFile({\n        src: bizagi.getJavaScript(\"bizagi.workportal.smartphone.overrides\"),\n        type: \"js\" });\n\n    }\n\n    return;\n  },\n\n  /**\r\n      * Returns the appropiate render based on the render type\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getRender: function getRender(params) {\n    var self = this;\n    var type = params.type;\n    var data = params.data;\n\n    var renderParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService });\n\n\n    if (type === \"number\") {\n      var properties = data.properties;\n      if (properties && properties.dataType === 29) {\n        return new bizagi.rendering.numberScientificNotation(renderParams);\n      }\n    }\n\n    // Grid Beta\n    if (bizagi.util.isMobileGridEnabled() && type === \"grid\") {\n      return new bizagi.rendering.grid.beta(renderParams);\n    }\n\n    return self._super(params);\n  },\n\n  /**\r\n      * Returns the appropiate column based on the render type\r\n      * @param {} params\r\n      * @returns {}\r\n      */\n  getColumn: function getColumn(params) {\n    var self = this;\n    var type = params.type;\n    var columnParams = $.extend(params, {\n      renderFactory: this,\n      dataService: params.dataService || this.dataService,\n      singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance });\n\n\n    if (type === \"columnNumber\") {\n      var data = params.data;\n      var properties = data.properties;\n      if (properties && properties.dataType === 29) {\n        columnParams.decorated = bizagi.rendering.numberScientificNotation;\n        return new bizagi.rendering.columns.numberScientificNotation(columnParams);\n      }\n    }\n\n    // Call base\n    return self._super(params);\n  },\n\n  /**\r\n      * Get template by type\r\n      * @returns {}\r\n      */\n  getGridTemplates: function getGridTemplates() {\n    var self = this;\n    var deferred = new $.Deferred();\n\n    if (bizagi.util.isMobileGridEnabled()) {\n      $.when(\n      //Grid helper\n      self.loadTemplate(\"grid-view\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.helpers\")),\n\n      //Grid Smartphone\n      self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid\"),\n      self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-cell\"),\n      self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-cell-readonly\"),\n\n      //Grid items\n      self.loadTemplate(\"grid-control\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-control\"),\n      self.loadTemplate(\"grid-table\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table\"),\n      self.loadTemplate(\"grid-table-empty\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-empty\"),\n      self.loadTemplate(\"grid-table-column\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-column\"),\n      self.loadTemplate(\"grid-table-column-special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-column-special\"),\n      self.loadTemplate(\"grid-table-row\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-row\"),\n      self.loadTemplate(\"grid-table-cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-cell\"),\n      self.loadTemplate(\"grid-table-cell-special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-cell-special\"),\n      self.loadTemplate(\"grid-table-pager\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-table-pager\"),\n      //Modal filter\n      self.loadTemplate(\"grid-modal-filter\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid.control\") + \"#bz-rn-grid-filter\")).\n      done(function () {\n        deferred.resolve();\n      });\n    } else {\n      $.when(\n      //Grid Smartphone\n      self.loadTemplate(\"grid\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.grid\")),\n      self.loadTemplate(\"cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.cell\")),\n      self.loadTemplate(\"cell.readonly\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.cell.readonly\")),\n\n      // Grid items\n      self.loadTemplate(\"bizagi.grid.grid\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid\"),\n      self.loadTemplate(\"bizagi.grid.waiting\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-waiting\"),\n      self.loadTemplate(\"bizagi.grid.table\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-table\"),\n      self.loadTemplate(\"bizagi.grid.table.empty\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-table-empty\"),\n      self.loadTemplate(\"bizagi.grid.column\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-column\"),\n      self.loadTemplate(\"bizagi.grid.column.special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-column-special\"),\n      self.loadTemplate(\"bizagi.grid.row\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-row\"),\n      self.loadTemplate(\"bizagi.grid.row.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-row-buttons\"),\n      self.loadTemplate(\"bizagi.grid.cell\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-cell\"),\n      self.loadTemplate(\"bizagi.grid.cell.special\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-cell-special\"),\n      self.loadTemplate(\"bizagi.grid.pager\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-pager\"),\n      self.loadTemplate(\"bizagi.grid.buttons\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-buttons\"),\n      self.loadTemplate(\"bizagi.grid.totalizer\", bizagi.getTemplate(\"bizagi.renderingflat.smartphone.bizagi.grid\") + \"#ui-bizagi-grid-totalizer\")).\n      done(function () {\n        deferred.resolve();\n      });\n    }\n\n    return deferred.promise();\n  } });","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\n\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\n\n  /**\r\n                                                         * Constructor, detects the device\r\n                                                         * @param params\r\n                                                         */\n  init: function init(params) {\n    this.execution_device = bizagi.util.detectDevice();\n    this.cachedFactory = {};\n  },\n\n  /**\r\n      * Returns the appropriate render factory based on the device detection\r\n      * Because it loads the scripts on demand it must return a promise\r\n      * @param dataService\r\n      * @param device\r\n      * @returns {*}\r\n      */\n  getRenderFactory: function getRenderFactory(dataService, device) {\n    var self = this;\n    device = device || \"desktop\";\n    var defer = new $.Deferred();\n\n    if (typeof self.cachedFactory[device] !== \"undefined\") {\n      // Reset print version value\n      self.cachedFactory[device].printVersion = false;\n      // Resolve with cached factory                \n      defer.resolve(self.cachedFactory[device]);\n    } else {\n      // If factory is not cached then build it\n      if (device === \"print\") {\n\n        // Load print version references\n        self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (device === \"desktop\") {\n\n        // Load desktop references\n        self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n\n      } else if (bizagi.util.isTabletDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else if (bizagi.util.isSmartphoneDevice(device)) {\n\n        // Load tablet references\n        self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\n\n        // Wait for async loading\n        self.cachedFactory[device].initAsyncStuff().\n        done(function () {\n\n          // Resolve operation\n          defer.resolve(self.cachedFactory[device]);\n        });\n      } else {\n        // if no device suuported\n        bizagi.showMessageBox(\"Not supported device: \" + device);\n        defer.reject(\"Not supported device: \" + device);\n      }\n    }\n\n    return defer.promise();\n  },\n\n  /**\r\n      * Returns the current data service being used\r\n      * @returns {*}\r\n      */\n  getDataService: function getDataService() {\n    return this.dataService;\n  } });"]}